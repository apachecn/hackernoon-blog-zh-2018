<html>
<head>
<title>ES6 Proxy and Localization</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ES6代理和本地化</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/es6-proxy-and-localization-c1269bbc0a26?source=collection_archive---------7-----------------------#2018-01-01">https://medium.com/hackernoon/es6-proxy-and-localization-c1269bbc0a26?source=collection_archive---------7-----------------------#2018-01-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="3a71" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">也许你听说过JavaScript代理，并认为，“嘿，这很酷，但我应该用它来做什么呢？”别担心，我也是这么想的，直到最近我需要一个包罗万象的解决方案。看哪，间接中介只知道“代理”从灰烬中升起，点燃了整个已知宇宙的所有文本编辑器。</p><p id="5eda" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我的用例中，我希望传回一个对象(更像一个字典)，该对象包含应用程序中每个本地化字符串的键/值对。但是这里的神奇之处在于，任何丢失的字符串都应该返回一个看不见邪恶的猴子表情符号(🙈)因为这意味着开发人员打错了一个字母，或者字符串根本没有翻译！猴子不会评判你。</p><p id="eefc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们看一些JSON的例子，当一个来自大洋彼岸的好人访问我们的应用程序时(有人使用了<code class="eh jp jq jr js b">en-GB</code>)。</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="e9e4" class="kb kc hu js b fv kd ke l kf kg">{<br/>  "color": "Colour",<br/>  "elevator": "Lift",<br/>  "pants": "Trousers"<br/>}</span></pre><p id="f69a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">起初，您可能认为<a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/get" rel="noopener ugc nofollow" target="_blank"> ES5 Getter </a>可以解决我们的问题，因为您可以覆盖一个属性(比如<code class="eh jp jq jr js b">elevator</code>)并检查是否没有定义值。但是你不知道的钥匙呢？你不知道你不知道什么。</p><p id="2198" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">进入<a class="ae kh" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy" rel="noopener ugc nofollow" target="_blank">代理</a>，李小龙在其中扮演一名网络开发人员，决心帮助捕获导致他妹妹死亡的失踪钥匙。</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="6081" class="kb kc hu js b fv kd ke l kf kg">let obj = JSON.parse(json);<br/>let l10n = new Proxy(obj, {<br/>  get(target, name) {<br/>    if (typeof target[name] === 'undefined') {<br/>      console.error(`Localized string is missing: ${name}`);<br/>      return '🙈';<br/>    }<br/>    return target[name];<br/>  }<br/>});</span></pre><p id="f431" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们称本地化对象为<code class="eh jp jq jr js b">l10n</code>,因为我们很懒，根据<a class="ae kh" href="https://en.wikipedia.org/wiki/Internationalization_and_localization#Naming" rel="noopener ugc nofollow" target="_blank">维基百科</a>和其他懒惰开发者的说法，这个缩写是常用的。没人有时间打字。我为什么要写这篇文章？</p><p id="e9f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在回到代理使用的话题…我们来谈谈React。</p><p id="7397" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">React很棒，你应该使用它，因为互联网是这么告诉你的，一个博客作者在他们的博客上写了关于它的博客，所以不要挑战这个博客。拥抱博客世界。</p><pre class="jt ju jv jw fq jx js jy jz aw ka dt"><span id="be84" class="kb kc hu js b fv kd ke l kf kg">const SelectAColor = (props) =&gt; (&lt;div&gt;<br/>  &lt;label&gt;{props.l10n.color}:&lt;/label&gt;<br/>  &lt;select&gt;{props.colors.map(c =&gt;<br/>    &lt;option value={c}&gt;<br/>      {c}<br/>    &lt;/option&gt;)}<br/>  &lt;/select&gt;<br/>&lt;/div&gt;);</span></pre><p id="3d0e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们有了一个React组件，让我们看看它如何为来自不同国家的用户呈现。</p><figure class="jt ju jv jw fq kj fe ff paragraph-image"><div class="fe ff ki"><img src="../Images/6631953bee06824bc6a36125fb56103b.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/0*B2GWWw47m8UwewT2.png"/></div></figure><p id="4d0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">美国看起来不错！大不列颠看起来很棒！墨西哥是啊，卡兰巴！我们忘记翻译成西班牙语了！猴子不会说谎，但猴子是宽容的。</p><p id="edc8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">同样的情况也会发生，如果你拼错了<code class="eh jp jq jr js b">props.l10n.color</code>，例如<code class="eh jp jq jr js b">props.l10n.colr</code>，在这种情况下，猴子会再次拜访你，对你的无能睁一只眼闭一只眼。</p><p id="88bf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想看演示，请访问<a class="ae kh" href="https://codesandbox.io/s/48lknyyo47" rel="noopener ugc nofollow" target="_blank"> CodeSandbox </a>查看运行中的代码，并见证壮观的猴子疯狂！</p></div><div class="ab cl km kn hc ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="hn ho hp hq hr"><p id="6794" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="kt">原载于2018年1月1日</em><a class="ae kh" href="https://www.ceriously.com/blog/post.php?id=2018-01-01-es6-proxy-localization.md" rel="noopener ugc nofollow" target="_blank"><em class="kt">【www.ceriously.com】</em></a><em class="kt">。</em></p></div></div>    
</body>
</html>