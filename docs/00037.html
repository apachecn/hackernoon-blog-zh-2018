<html>
<head>
<title>SICP 1.3.4: “Formulating Abstractions with Higher-Order Procedures: Procedures as General Methods”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">SICP 1.3.4:“用高阶过程公式化抽象:作为一般方法的过程”</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/sicp-1-3-4-formulating-abstractions-with-higher-order-procedures-procedures-as-general-methods-f0ee50edf919?source=collection_archive---------24-----------------------#2018-01-02">https://medium.com/hackernoon/sicp-1-3-4-formulating-abstractions-with-higher-order-procedures-procedures-as-general-methods-f0ee50edf919?source=collection_archive---------24-----------------------#2018-01-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="7a01" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">(计算机程序的结构和解释)</h2></div><p id="35f3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我的1.3.4习题解答也在Github这里:<a class="ae kf" href="https://github.com/bolducp/SICP/tree/master/exercises/chapter_01/1.3_exercises" rel="noopener ugc nofollow" target="_blank">https://Github . com/bold UCP/SICP/tree/master/exercises/chapter _ 01/1.3 _ exercises</a></p></div><div class="ab cl kg kh hc ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hn ho hp hq hr"><p id="65fe" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">本节关于高阶过程(1.3)的最后一小节(1.3.4)关注的是不仅将过程用作参数，而且将其用作过程的返回值的有用性。我们通过前面章节中的<code class="eh kn ko kp kq b">sqrt</code>和<code class="eh kn ko kp kq b">newtons-method</code>函数的转换，使用返回其他过程的过程来实现。这种比较说明的一个主要优点是，从这种风格的<a class="ae kf" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>构建的代码变得非常清晰。</p><figure class="ks kt ku kv fq kw fe ff paragraph-image"><div role="button" tabindex="0" class="kx ky di kz bf la"><div class="fe ff kr"><img src="../Images/ad1f120e49e2513fae15ed2098a215a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2gUD6BhNjkF7ac4UEwg5Q.jpeg"/></div></div></figure><p id="0cba" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">本节还花了一些时间解释在实现平方根和牛顿法的过程中寻找导数和平均值的数学方程。它还包含了一个有用的、简明的术语定义，这个术语在讨论编程语言时仍然经常被抛出，即关于元素类型的“一级状态”(pgs 76–77)。</p><p id="6241" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，我想指出这一段的精华，我认为它很好地阐明了为什么这一整章对高阶过程的关注，实际上对我们每天编写的代码很重要:</p><blockquote class="ld le lf"><p id="a39f" class="jj jk lg jl b jm jn iv jo jp jq iy jr lh jt ju jv li jx jy jz lj kb kc kd ke hn dt translated">作为程序员，我们应该注意识别程序中底层抽象的机会，并在此基础上构建和概括它们以创建更强大的抽象。这并不是说一个人应该总是尽可能用最抽象的方式编写程序；专业程序员知道如何选择适合他们任务的抽象层次。但是，能够根据这些抽象进行思考是很重要的，这样我们就可以准备好在新的环境中应用它们。高阶过程的意义在于，它们使我们能够将这些抽象明确地表示为编程语言中的元素，这样它们就可以像其他计算元素一样被处理。(第76页)</p></blockquote><h1 id="c013" class="lk ll hu bd lm ln lo lp lq lr ls lt lu ja lv jb lw jd lx je ly jg lz jh ma mb dt translated">练习</h1><p id="8b4b" class="pw-post-body-paragraph jj jk hu jl b jm mc iv jo jp md iy jr js me ju jv jw mf jy jz ka mg kc kd ke hn dt translated">我的答案在每个练习题下面的灰色文本块中提供。</p><h2 id="b36b" class="mh ll hu bd lm mi mj mk lq ml mm mn lu js mo mp lw jw mq mr ly ka ms mt ma mu dt translated">练习1.40</h2><blockquote class="ld le lf"><p id="2f76" class="jj jk lg jl b jm jn iv jo jp jq iy jr lh jt ju jv li jx jy jz lj kb kc kd ke hn dt translated">定义一个<a class="ae kf" href="https://hackernoon.com/tagged/procedure" rel="noopener ugc nofollow" target="_blank">程序</a> <code class="eh kn ko kp kq b">cubic</code>，它可以和<code class="eh kn ko kp kq b">newtons-method</code>程序一起用于(牛顿法(立方a b c) 1)形式的表达式中。为了逼近三次x^3 + ax^2 + bx + c的零点</p></blockquote><pre class="ks kt ku kv fq mv kq mw mx aw my dt"><span id="fb50" class="mh ll hu kq b fv mz na l nb nc">(define (fixed-point f first-guess)<br/>  (define (close-enough? v1 v2)<br/>    (&lt; (abs (- v1 v2))<br/>       0.0001))<br/>  (define (try guess)<br/>    (let ((next (f guess)))<br/>      (if (close-enough? guess next)<br/>          next<br/>          (try next))))<br/>  (try first-guess))</span><span id="e06b" class="mh ll hu kq b fv nd na l nb nc">(define dx 0.00001)</span><span id="6c9c" class="mh ll hu kq b fv nd na l nb nc">(define (deriv g)<br/>  (lambda (x)<br/>    (/ (- (g (+ x dx)) (g x))<br/>       dx)))</span><span id="0ce7" class="mh ll hu kq b fv nd na l nb nc">(define (newton-transform g)<br/>  (lambda (x)<br/>    (- x (/ (g x)<br/>            ((deriv g) x)))))</span><span id="cd8f" class="mh ll hu kq b fv nd na l nb nc">(define (newtons-method g guess)<br/>  (fixed-point (newton-transform g)<br/>               guess))</span><span id="502e" class="mh ll hu kq b fv nd na l nb nc">(define (cube x)<br/>   (* x x x))</span><span id="178e" class="mh ll hu kq b fv nd na l nb nc">(define (cubic a b c)<br/>   (lambda (x)<br/>     (+ (cube x)<br/>        (* a (square x))<br/>        (* b x)<br/>        c)))</span><span id="c287" class="mh ll hu kq b fv nd na l nb nc">(newtons-method (cubic 2 -5 7) 1)</span></pre><h2 id="ceb5" class="mh ll hu bd lm mi mj mk lq ml mm mn lu js mo mp lw jw mq mr ly ka ms mt ma mu dt translated">练习1.41</h2><blockquote class="ld le lf"><p id="e97c" class="jj jk lg jl b jm jn iv jo jp jq iy jr lh jt ju jv li jx jy jz lj kb kc kd ke hn dt translated"><em class="hu">定义一个过程</em> <code class="eh kn ko kp kq b"><em class="hu">double</em></code> <em class="hu">，该过程以一个参数的过程为参数，返回一个应用原过程两次的过程。例如，如果</em> <code class="eh kn ko kp kq b"><em class="hu">inc</em></code> <em class="hu">是一个为其参数加1的过程，那么</em> <code class="eh kn ko kp kq b"><em class="hu">(double inc)</em></code> <em class="hu">应该是一个加2的过程。</em>返回什么值</p><p id="48fc" class="jj jk lg jl b jm jn iv jo jp jq iy jr lh jt ju jv li jx jy jz lj kb kc kd ke hn dt translated"><em class="hu">(((double(double double))Inc)5)</em></p></blockquote><pre class="ks kt ku kv fq mv kq mw mx aw my dt"><span id="3f01" class="mh ll hu kq b fv mz na l nb nc">(define (inc n) (+ n 1))</span><span id="a2ed" class="mh ll hu kq b fv nd na l nb nc">(define (double f)<br/>        (lambda (x) (f (f x))))</span><span id="a40a" class="mh ll hu kq b fv nd na l nb nc">(((double (double double)) inc) 5) = 21</span></pre><h2 id="17a0" class="mh ll hu bd lm mi mj mk lq ml mm mn lu js mo mp lw jw mq mr ly ka ms mt ma mu dt translated">练习1.42</h2><blockquote class="ld le lf"><p id="1770" class="jj jk lg jl b jm jn iv jo jp jq iy jr lh jt ju jv li jx jy jz lj kb kc kd ke hn dt translated">设f和g是两个单参数函数。g后的<em class="hu">合成</em> f定义为函数x ↦ f(g(x))。定义一个实现组合的过程<code class="eh kn ko kp kq b">compose</code>。例如，如果<code class="eh kn ko kp kq b">inc</code>是一个参数加1的过程:((compose square inc) 6)</p></blockquote><pre class="ks kt ku kv fq mv kq mw mx aw my dt"><span id="8db7" class="mh ll hu kq b fv mz na l nb nc">(define (inc n) (+ n 1))<br/>(define (square n) (* n n))</span><span id="fc43" class="mh ll hu kq b fv nd na l nb nc">(define (compose f g)<br/>    (lambda (x) (f (g x))))</span><span id="beea" class="mh ll hu kq b fv nd na l nb nc">((compose square inc) 6) = 49</span></pre><h2 id="4108" class="mh ll hu bd lm mi mj mk lq ml mm mn lu js mo mp lw jw mq mr ly ka ms mt ma mu dt translated">练习1.43</h2><blockquote class="ld le lf"><p id="7125" class="jj jk lg jl b jm jn iv jo jp jq iy jr lh jt ju jv li jx jy jz lj kb kc kd ke hn dt translated">如果f是一个数值函数，n是一个正整数，那么我们可以形成f的第n个重复应用，定义为在x处的值为f的函数(f(…(f(x))…))。例如，如果f是函数x↦x+1，那么f的第n次重复应用是函数x↦x+n.如果f是平方一个数的运算，那么f的第n次重复应用是将其自变量提升到2n次幂的函数。编写一个过程，将计算f和正整数n的过程作为输入，并返回计算f的第n次重复应用的过程。您的过程应该能够如下使用:((重复平方2) 5) <br/> <em class="hu"> 625 </em></p></blockquote><pre class="ks kt ku kv fq mv kq mw mx aw my dt"><span id="ac70" class="mh ll hu kq b fv mz na l nb nc">(define (compose f g)<br/>  (lambda (x) (f (g x))))</span><span id="7b08" class="mh ll hu kq b fv nd na l nb nc">(define (repeated f n)<br/>  (if (&gt; n 1)<br/>    (compose f (repeated f (- n 1)))<br/>    f))</span><span id="d21e" class="mh ll hu kq b fv nd na l nb nc">((repeated square 2) 5) = 625</span></pre><figure class="ks kt ku kv fq kw"><div class="bz el l di"><div class="ne nf l"/></div></figure></div></div>    
</body>
</html>