<html>
<head>
<title>MetalLB: a load balancer for bare metal Kubernetes clusters</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MetalLB:裸机Kubernetes集群的负载平衡器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/metallb-a-load-balancer-for-bare-metal-kubernetes-clusters-f7320fde52f2?source=collection_archive---------8-----------------------#2018-01-05">https://medium.com/hackernoon/metallb-a-load-balancer-for-bare-metal-kubernetes-clusters-f7320fde52f2?source=collection_archive---------8-----------------------#2018-01-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="a93f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">直到最近，Kubernetes还没有对裸机集群负载平衡的本地支持。MetalLB 是新的解决方案，目前处于alpha版本，旨在缩小这一差距。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/7f9b1d9824815777c574d8928bed8cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rXXwrhpGmnZK7p65vK15cg.jpeg"/></div></div></figure><p id="a63c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">截至目前，Kubernetes自带网络LB解决方案，实际上是调用各种IaaS云平台(AWS、Azure、GCP等)的胶水代码。).然而，将Kubernetes部署在除受支持的平台(如私有云或裸机集群)之外的任何平台上会导致服务对象</p><pre class="jr js jt ju fq kc kd ke kf aw kg dt"><span id="8585" class="kh ki hu kd b fv kj kk l kl km">spec.type=LoadBalancer</span></pre><p id="1a14" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">永远处于待定状态。</p><p id="aa22" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，选择裸机集群让Kubernetes管理员在Nodeport和ExternalIPs之间进行选择，没有一个是完美的解决方案。MetalLB是一种新的负载平衡器，它提供了一种基于标准网络设备的网络LB实现。</p><h1 id="02cc" class="kn ki hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">MetalLB先决条件和要求</h1><p id="d4a8" class="pw-post-body-paragraph ir is hu it b iu lk iw ix iy ll ja jb jc lm je jf jg ln ji jj jk lo jm jn jo hn dt translated">MetalLB稳定运行的先决条件包括:</p><ul class=""><li id="0c4a" class="lp lq hu it b iu iv iy iz jc lr jg ls jk lt jo lu lv lw lx dt translated">一个干净的<a class="ae jp" href="https://kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>集群版本1.8.0或以上，没有安装任何其他负载平衡解决方案</li><li id="f748" class="lp lq hu it b iu ly iy lz jc ma jg mb jk mc jo lu lv lw lx dt translated">一个或多个使用4字节AS号的<a class="ae jp" href="https://en.wikipedia.org/wiki/Border_Gateway_Protocol" rel="noopener ugc nofollow" target="_blank"> BGP </a>路由器(<a class="ae jp" href="https://tools.ietf.org/html/rfc6793" rel="noopener ugc nofollow" target="_blank"> RFC 6793 </a></li><li id="0036" class="lp lq hu it b iu ly iy lz jc ma jg mb jk mc jo lu lv lw lx dt translated">供路由器分配的一组IPv4地址</li></ul><p id="b6f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下面是<a class="ae jp" href="https://metallb.universe.tf/installation/#requirements" rel="noopener ugc nofollow" target="_blank">要求</a>的更多细节。由于MetalLB项目肯定会发展，请参考<a class="ae jp" href="https://metallb.universe.tf/maturity/" rel="noopener ugc nofollow" target="_blank">成熟度页面</a>进行解释。</p><p id="59d2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以按照本<a class="ae jp" href="https://metallb.universe.tf/tutorial/" rel="noopener ugc nofollow" target="_blank">教程</a>测试独立的minikube MetalLB功能。要将该工具部署到生产集群，请参阅<a class="ae jp" href="https://metallb.universe.tf/installation/" rel="noopener ugc nofollow" target="_blank">安装</a>和<a class="ae jp" href="https://metallb.universe.tf/usage/" rel="noopener ugc nofollow" target="_blank">使用</a>指南。这份详细的<a class="ae jp" href="https://metallb.universe.tf/design/" rel="noopener ugc nofollow" target="_blank">设计文档</a>将帮助您立即启动并运行该工具。</p><p id="5b78" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您希望参与项目进展，请遵循本<a class="ae jp" href="https://metallb.universe.tf/hacking/" rel="noopener ugc nofollow" target="_blank">黑客指南</a>获取技术信息。任何<a class="ae jp" href="https://github.com/google/metallb/issues/5" rel="noopener ugc nofollow" target="_blank">使用反馈和建议</a>都会让MetalLB开发者非常高兴，所以请随意分享你的想法和创意！</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="9b10" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">之前我在我公司的博客上发布过这篇文章:<a class="ae jp" href="https://itsvit.com/blog/metallb-load-balancer-bare-metal-kubernetes-clusters/" rel="noopener ugc nofollow" target="_blank">https://its vit . com/blog/metal lb-load-balancer-bare-metal-kubernetes-clusters/</a></p></div></div>    
</body>
</html>