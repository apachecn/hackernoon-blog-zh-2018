<html>
<head>
<title>Spectre-on-Kubernetes, a proof of concept</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">库贝内特斯河畔的幽灵，概念验证</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/spectre-on-kubernetes-a-proof-of-concept-baade68284f8?source=collection_archive---------10-----------------------#2018-01-05">https://medium.com/hackernoon/spectre-on-kubernetes-a-proof-of-concept-baade68284f8?source=collection_archive---------10-----------------------#2018-01-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="ac76" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">TL；DR:一个PoC演示</em> <a class="ae jq" href="https://spectreattack.com/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">厉鬼</em> </a> <em class="jp">，这个讨厌的CPU bug，在Kubernetes上运行。</em></p></div><div class="ab cl jr js hc jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="hn ho hp hq hr"><p id="ceac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你没有生活在岩石下，你一定听说过<a class="ae jq" href="https://spectreattack.com/" rel="noopener ugc nofollow" target="_blank"> Meltdown和Spectre </a>，这两个非常严重的硬件错误影响了许多现代(台式机和服务器)CPU。</p><p id="0d1d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，当我仔细阅读这两个家伙时，我问自己:他们如何影响一个<a class="ae jq" href="https://hackernoon.com/tagged/kubernetes" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>集群和/或在其上运行的应用？假设有一个适用于Spectre 的<a class="ae jq" href="https://gist.github.com/ErikAugust/724d4a969fb2c6ae1bbd7b2a9e3d4bb6" rel="noopener ugc nofollow" target="_blank">示例C源代码，将它放入</a><a class="ae jq" href="https://quay.io/repository/mhausenblas/spectre" rel="noopener ugc nofollow" target="_blank">容器</a>中会更容易，如下所示:</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="kd ke l"/></div></figure><p id="8379" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后在Kubernetes中运行它，例如，使用:</p><pre class="jy jz ka kb fq kf kg kh ki aw kj dt"><span id="e803" class="kk kl hu kg b fv km kn l ko kp">$ kubectl run spectre \<br/>          --image=quay.io/mhausenblas/spectre:0.1 \<br/>          --restart=Never</span></pre><p id="1a3d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">事实证明这是可行的。使用以下方式检查日志:</p><pre class="jy jz ka kb fq kf kg kh ki aw kj dt"><span id="81c1" class="kk kl hu kg b fv km kn l ko kp">$ kubectl logs spectre</span></pre><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kr ks di kt bf ku"><div class="fe ff kq"><img src="../Images/41f9740f08b01a6de7481ba630af1d2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XnMyid-VEB8AqoCkd4Ogyg.png"/></div></div></figure><p id="388e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！</p><p id="538b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">嗯，2018年确实开始了，呃，非常有趣。我们将有很多工作要做——我已经看到第一个<a class="ae jq" href="https://github.com/kubernetes/kops/issues/4188" rel="noopener ugc nofollow" target="_blank">问题</a>正在处理——目前我们能做的最好的事情是不要从不受信任的注册表中随机抽取图像并在我们的集群中运行，但是我想你已经知道了这一点，并且(希望)无论如何不要这样做。</p></div><div class="ab cl jr js hc jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="hn ho hp hq hr"><p id="8e33" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一些想法和免责声明:这个PoC是一个容易实现的结果，它使用了一个太大的图像(见鬼，500MB！)，并不能证明任何一般性的攻击，只是说已知的漏洞利用可以打包成一个容器，运行在一个Kubernetes集群中。此外，我不是代表我的雇主或以任何官方身份发言，我只是对在集装箱化的环境中进行这项工作有多难感兴趣。</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="kx ke l"/></div></figure></div></div>    
</body>
</html>