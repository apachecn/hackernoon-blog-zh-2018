<html>
<head>
<title>Butler CLI: Export/Import Jenkins Plugins &amp; Jobs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Butler CLI:导出/导入Jenkins插件和作业</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/butler-cli-export-import-jenkins-plugins-jobs-c8c16ff51a72?source=collection_archive---------6-----------------------#2018-01-06">https://medium.com/hackernoon/butler-cli-export-import-jenkins-plugins-jobs-c8c16ff51a72?source=collection_archive---------6-----------------------#2018-01-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/d6b7142aae8e6f3531375155b9042357.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*XKZP9GOprA7_hboe1yugQQ.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Butler CLI</figcaption></figure><p id="5529" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不久前，我不得不将詹金斯的工作从旧服务器转移到新服务器上。这就是<a class="ae ka" href="https://stackoverflow.com/" rel="noopener ugc nofollow" target="_blank"> StackOverflow </a>发挥作用的地方，下面是我找到的投票最多的答案:</p><ul class=""><li id="a6f5" class="kb kc hu je b jf jg jj jk jn kd jr ke jv kf jz kg kh ki kj dt translated"><a class="ae ka" href="https://wiki.jenkins-ci.org/display/JENKINS/Jenkins+CLI" rel="noopener ugc nofollow" target="_blank">詹金斯CLI </a></li><li id="4678" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">复制作业目录</li><li id="d2cf" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">Jenkins远程API</li><li id="8a2e" class="kb kc hu je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated"><a class="ae ka" href="https://wiki.jenkins-ci.org/display/JENKINS/Job+Import+Plugin" rel="noopener ugc nofollow" target="_blank">詹金斯工作导入插件</a></li></ul><p id="dc5e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">尽管有这些优点，这些解决方案也有其缺点，尤其是如果您有大量的<strong class="je hv">作业</strong>要移动或者没有对服务器的根访问权限。但是，你猜怎么着？我没有就此止步。我想出了一个<strong class="je hv"> CLI </strong>来让你的生活变得更简单，不仅可以像老板一样进出口<strong class="je hv">詹金斯乔布斯</strong>还有<strong class="je hv">插件</strong>。</p><p id="a1fb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，找到适合您系统的<a class="ae ka" href="https://github.com/mlabouardy/butler" rel="noopener ugc nofollow" target="_blank">软件包</a>并下载。对于linux:</p><blockquote class="kp kq kr"><p id="5373" class="jc jd ks je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">wget<a class="ae ka" href="https://s3.us-east-1.amazonaws.com/butlercli/1.0.0/linux/butler" rel="noopener ugc nofollow" target="_blank">https://S3 . us-east-1 . Amazon AWS . com/butler CLI/1 . 0 . 0/Linux/butler</a><br/>chmod+x butler<br/>mv butler/usr/local/bin/</p></blockquote><p id="a0f5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注:对于<strong class="je hv">窗口</strong>，确保<strong class="je hv">管家</strong>二进制文件在<strong class="je hv">路径</strong>上可用。<a class="ae ka" href="https://stackoverflow.com/questions/1618280/where-can-i-set-path-to-make-exe-on-windows" rel="noopener ugc nofollow" target="_blank">本页</a>包含在<strong class="je hv">窗口</strong>上设置<strong class="je hv">路径</strong>的说明。</p><p id="d3e2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">完成后，通过打开一个新的终端会话并检查<strong class="je hv"> butler </strong>是否可用来验证安装是否有效:</p><blockquote class="kp kq kr"><p id="0648" class="jc jd ks je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">管家帮忙</p></blockquote><figure class="kx ky kz la fq iv fe ff paragraph-image"><div class="fe ff kw"><img src="../Images/1cdbaa4d9d5080af5248f9fde5272cb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/0*WULem4cyUguleiSd."/></div></figure><p id="0e68" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 1 —插件管理</strong></p><p id="c9d6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要导出<strong class="je hv">詹金斯作业</strong>，需要提供源<strong class="je hv">詹金斯</strong>实例的<strong class="je hv"> URL </strong>:</p><blockquote class="kp kq kr"><p id="ce9a" class="jc jd ks je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">butler插件导出—服务器本地主机:8080 —用户名管理—密码管理</p></blockquote><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lb"><img src="../Images/6539224a0bf9a4dacf5e215a3709af50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-Onqi1Lao6EZKlBn."/></div></div></figure><p id="3ff1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如上图所示，<strong class="je hv"> butler </strong>会将已安装的插件列表转储到stdout，并生成一个新文件<em class="ks"> plugins.txt </em>，其中包含已安装的<strong class="je hv"> Jenkins插件列表</strong>，名称<em class="ks">为</em>和<em class="ks">版本</em>对:</p><figure class="kx ky kz la fq iv"><div class="bz el l di"><div class="lg lh l"/></div></figure><p id="dfe5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，要将<strong class="je hv">插件</strong>导入到新的Jenkins实例，使用下面的命令，并将Jenkins目标实例的<strong class="je hv"> URL </strong>作为参数:</p><blockquote class="kp kq kr"><p id="061f" class="jc jd ks je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">butler插件导入—服务器本地主机:8080 —用户名管理—密码管理</p></blockquote><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff li"><img src="../Images/65aa2969a207698e125b9d2a6290bbb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*D1uQLgs3Z7x8b3jM."/></div></div></figure><p id="2954" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> Butler </strong>将通过发出<strong class="je hv"> API调用</strong>在目标Jenkins实例上安装每个插件。</p><p id="730b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 2 —作业管理</strong></p><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lj"><img src="../Images/59396530b355b962d2ba0be7ffdc1950.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7_5fH9mcT-47TIGV."/></div></div></figure><p id="a006" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要导出<strong class="je hv"> Jenkins作业</strong>，只需提供源<strong class="je hv"> Jenkins </strong>服务器的<strong class="je hv"> URL </strong>:</p><blockquote class="kp kq kr"><p id="d907" class="jc jd ks je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">butler作业导出—服务器本地主机:8080 —用户名管理—密码管理</p></blockquote><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lk"><img src="../Images/cee896b9b9f1aafc03d6a60452d1251b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*z_R-lOVGt5Sz6cwp."/></div></div></figure><p id="1bf2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将为<strong class="je hv"> Jenkins </strong>中的每个作业创建一个新目录<em class="ks"> jobs/ </em>。每个作业都有自己的配置文件<em class="ks"> config.xml </em>。</p><figure class="kx ky kz la fq iv fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/f23fecd8acd083f69848a05b7a1a45b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:694/0*LcbIhwXQV_x0fVI2."/></div></figure><p id="1203" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，要将作业导入到新的<strong class="je hv"> Jenkins </strong>实例，发出以下命令:</p><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lj"><img src="../Images/9b7a21994afd0751cc63122b319b421a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zj7pWHg9i7XKZ70G."/></div></div></figure><blockquote class="kp kq kr"><p id="2cff" class="jc jd ks je b jf jg jh ji jj jk jl jm kt jo jp jq ku js jt ju kv jw jx jy jz hn dt translated">butler作业导入—服务器本地主机:8080 —用户名管理—密码管理</p></blockquote><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lk"><img src="../Images/9d30b9bd3caca3efb9e4f4adf22257c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*skSirXZi8DPTMbCM."/></div></div></figure><p id="864c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Butler 将使用之前创建的配置文件向目标<strong class="je hv"> Jenkins </strong>实例发出API调用来创建作业。</p><p id="4547" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">完成后，检查<strong class="je hv"> Jenkins </strong>，您应该会看到您的工作已成功创建:</p><figure class="kx ky kz la fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lj"><img src="../Images/b18bc170f7bea6ec3b0356f5a41f9ed9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qxj1n88PrEE3TODb."/></div></div></figure><p id="17a9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">希望有帮助！CLI仍处于早期阶段，因此欢迎您为Github中的项目做出贡献。</p></div></div>    
</body>
</html>