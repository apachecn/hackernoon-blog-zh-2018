<html>
<head>
<title>Integrating dumb lights in my smart home</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在我的智能家居中集成哑灯</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/integrating-dumb-lights-in-my-smart-home-philips-hue-busch-jaeger-zigbee-homekit-658bfdfd1cd0?source=collection_archive---------4-----------------------#2018-01-07">https://medium.com/hackernoon/integrating-dumb-lights-in-my-smart-home-philips-hue-busch-jaeger-zigbee-homekit-658bfdfd1cd0?source=collection_archive---------4-----------------------#2018-01-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/0d7ce19f0af2f2beab38f2e90812181e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pn8pnfDynfjtEqA0mgdFIA.jpeg"/></div></div></figure><p id="508d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">注意:我住在荷兰，因此所有关于电气外形和布线的解释仅适用于欧洲地区。</em></p><p id="1190" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它始于卧室里一个难以触及的电灯开关。由于房间的重建方式，入口在主灯开关的对面。这意味着每当你晚上进入时，在黑暗中跌跌撞撞地寻找开关。给房间重新布线以在入口附近放置一个开关被证明几乎是不可能的，所以我想我应该试试这些飞利浦Hue入门套件中的一个——两个“智能”灯泡和一个将它们连接到你的家庭网络的桥——看看这是否能解决我的问题。这个选择被证明是一种入门药物，因为现在，八个月后，我有了16个智能灯泡，三个灯带，两个用于“哑”灯的墙内智能调光器，几个无线遥控器，运动传感器和一些软件，让它们无缝地协同工作。</p><p id="a947" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我写这篇文章是因为在这方面有相当多的开拓性，而且没有很多全面的信息。然而更重要的是，<strong class="je hv">我最终拥有了一个智能照明系统，我的女朋友、岳母和孩子们可以轻松可靠地使用它</strong>、<strong class="je hv">和</strong>，因为<strong class="je hv">、</strong>我不想最终不得不远程解决开灯这样的基本问题。</p><h2 id="62d9" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">基础知识:飞利浦色相和Zigbee平台</h2><p id="cd7e" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">当你开始使用家庭自动化时，你正在有意识或无意识地为某个物联网平台做出选择。这是因为您需要一种方法来从您的控制设备(如电话或遥控器)与您的智能设备(如灯泡)进行通信。有许多标准可以实现这一点，如Wi-Fi和蓝牙，但也有专门为物联网应用设计的其他标准，如Thread、WeMo、ZigBee和Z-Wave。</p><p id="8a4b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">除此之外，还有智能家居系统，如Apple Homekit、Google Home和Amazon with Alexa，它们试图将所有平台捆绑在一起，并为您的设备提供语音控制访问。例如，在苹果Homekit中，我可以制定一个规则，如果我的飞利浦运动传感器检测到运动，它会将我的智能恒温器设置为20摄氏度。它之所以有效，是因为即使两个设备本身并不知道彼此的存在，但它们都是“Homekit兼容的”，将它们放在一个保护伞下。</p><p id="1fbc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我不打算讨论每一个的细节，但是在扩展您最初的选择时，记住这些平台和系统是很重要的。我选择飞利浦Hue是因为它使用专门为物联网应用制定的Zigbee标准:一种低功耗、低数据速率的网状网络。此外，Hue与苹果、谷歌和亚马逊的三大家庭自动化系统配合良好。最后，飞利浦积极选择开放他们的平台，这意味着您可以将其他供应商的Zigbee设备添加到平台中，如Innr、Osram Lightify或IKEA Trå dfri，而不会损失任何功能。</p><p id="91c0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">回想起来，飞利浦Hue给我提供了一个很好的起点。如果你最终发现飞利浦的灯泡、遥控器和运动传感器不能提供你需要的一切，你可以很容易地将其他供应商的设备添加到系统中，只要他们使用通用的Zigbee标准。这为你提供了相当多的选择和灵活性。</p><h2 id="7426" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">在我的智能家居中集成“哑”灯</h2><p id="247b" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">我有一个模块化的Nomad灯具已经超过20年了。这是一个经典的设计，我的使用AR111卤素灯泡，不完全是我期待飞利浦发布的色调启用版本。</p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lb"><img src="../Images/4445bf8cb54de364bcf8655faa320f2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZnC9zQ5TO-3fHOzoOGOlg.jpeg"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">a Modular Nomad with AR111 halogen bulbs — no smartness here</figcaption></figure><p id="c817" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当你为你的客厅设置了所有这些灯光场景时，有点遗憾，它们中没有一个对那个不属于系统的主灯有任何影响。</p><p id="e140" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我开始寻找智能壁式调光器，为我的普通老式无光灯供电。最初我以为Lutron是唯一一家生产我需要的产品的制造商，但是他们的设计是为美国市场量身定做的。</p><p id="6646" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后我偶然发现了<a class="ae lk" href="https://www.busch-jaeger.de/en/products/product-solutions/remote-control/zigbee-light-link/" rel="noopener ugc nofollow" target="_blank"> Busch-Jaeger </a>，这是一家德国公司，为欧洲市场提供了一系列支持Zigbee的室内控制元件。他们有一系列调光器、开关和电池供电的发射器，可以与您现有的Zigbee设置集成。</p><p id="a81a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Busch-Jaeger Zigbee系列应分为两组:</p><ul class=""><li id="3838" class="ll lm hu je b jf jg jj jk jn ln jr lo jv lp jz lq lr ls lt dt translated">与控制元件结合的嵌入式调光器或开关</li><li id="f604" class="ll lm hu je b jf lu jj lv jn lw jr lx jv ly jz lq lr ls lt dt translated">独立的电池供电发射机，可以挂在墙上</li></ul><p id="47ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我之所以强调这一点，是因为调光器的控制元件和电池供电的发射器看起来完全一样，所以你必须注意你点的东西。此外，当你买一个调光器时，你需要在它上面安装一个控制元件，它才能工作。缺一不可。</p><p id="918b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此外，<strong class="je hv">所有的</strong> <strong class="je hv">嵌入式控制都需要永久电源，这意味着你需要在墙上的插座中安装一根中性线。</strong>如果现有的开关或调光器在同一位置有电源插座，您将有一根中性线。如果没有，你要么<a class="ae lk" href="https://www.youtube.com/watch?v=4-77YdzI_0Y" rel="noopener ugc nofollow" target="_blank">自己拉一根中性线</a>，要么找电工来做。</p><p id="0e31" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于我的模块化Nomad，我订购了6715U调光器，并在其上安装了6736–84四按钮控制元件。</p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/b870e8e72b2524df4bd53bfb0e85c12d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K7RG7lg91ZikFcxDqHpo-A.jpeg"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Order these two elements as a set to get a working product</figcaption></figure><p id="f2fb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过这个控制元件，我可以使用顶部的两个按钮直接控制调光器，并将底部的两个按钮分配给我的智能照明设置中的场景，将我家里的任何灯光组合设置为特定的颜色和强度。Busch-Jaeger还提供了两个和八个按钮的控制元素，因此您可以灵活地使用您的方法。</p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/3c3efc8b6043fddb29b6268ae4efd870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_WiOtaXAStUIR9vJPDWJtA.jpeg"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Everything combined with a power outlet and a frame</figcaption></figure><p id="b1bb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我已经有了一个电源插座，所以不需要使用中性线。在将所有东西都安装到墙上后，我必须将调光器添加到我的Zigbee网络中。我会帮你省去几个小时的咒骂，按下各种<a class="ae lk" href="https://en.wikipedia.org/wiki/Konami_Code" rel="noopener ugc nofollow" target="_blank"> Konami-code </a>风格的按钮却无济于事。最后，<strong class="je hv">将这些设备添加到Zigbee网络的最可靠方法是使用Touchlink，您可以将设备靠近Hue网桥进行配对。</strong></p><p id="4551" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">遗憾的是，我已经把所有东西都装在了我的墙上，所以我没有把我的设备放在我的Hue桥上，而是拿了一根延长线，一根长网线，把我的桥对着调光器。然后，我用<a class="ae lk" href="https://itunes.apple.com/us/app/hue-lights/id762009425" rel="noopener ugc nofollow" target="_blank">色调灯</a> iOS应用程序强制桥梁进入触摸链接模式，瞧</p><p id="159d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这个障碍之后，调光器在Hue应用程序中显示为“可调光”，允许我将其集成到现有的场景中。快乐的日子！底部的两个按钮可以通过以下方式进行配置:首先只打开您希望包含在场景中的灯光，然后按住按钮十秒钟以上以启用编程模式，然后将所有这些灯光设置为所需的强度和颜色，最后再次按下按钮进行确认。请记住，这些按钮不会在Hue应用程序中显示。事实上，触发场景甚至不涉及色调桥，发射器直接在Zigbee网络级别上控制灯光。</p><p id="30a4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后我发现Busch-Jaeger调光器没有出现在苹果家庭应用程序中，Siri抱怨说不是你场景中的每个设备都有反应。这很糟糕，因为我越来越喜欢能够从苹果Home应用程序单独控制每一台智能设备，或者使用Siri，而不是单独使用每个制造商的应用程序。</p><p id="855a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">很公平，接受挑战…</p><h2 id="8bba" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">将Hue bridge看到的非飞利浦设备添加到Homekit</h2><p id="ab09" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">当支持Homekit的飞利浦Hue bridge发布时，只有灯接触到了苹果Homekit。自2017年10月的Hue更新以来，飞利浦遥控器和运动传感器也可以在Homekit中使用，当飞利浦运动传感器检测到运动时，可以打开支持Homekit的恒温器等选项。然而，<strong class="je hv">任何被Hue bridge识别的非飞利浦制造的设备都不会暴露在Homekit </strong>下，包括我新买的调光器。</p><p id="08bd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了解决这个问题，我使用了<a class="ae lk" href="https://www.npmjs.com/package/homebridge" rel="noopener ugc nofollow" target="_blank"> homebridge </a>，一个轻量级NodeJS服务器，你可以在你的家庭网络上运行，它模拟了iOS HomeKit API。我有一台Mac Mini作为服务器和媒体中心运行，所以很容易开始使用。你也可以选择在专用的<a class="ae lk" href="https://github.com/nfarina/homebridge/wiki/Running-HomeBridge-on-a-Raspberry-Pi" rel="noopener ugc nofollow" target="_blank"> Raspberry Pi </a>上运行。我唯一需要的插件是Erik Baauw的非常优秀的homebridge-hue。它得到了很好的支持和维护，宜家Trå dfri仅在推出几天后就获得了支持。</p><p id="d4da" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在安装和配置homekit-hue插件后，连接到我的Busch-Jaeger调光器的灯出现在Home应用程序中。打开它们，使用家庭应用程序或通过Siri改变亮度，将所需的命令发送回Zigbee网络。现在，我有了一个完全无缝的灯光设置，可以使用墙内遥控器、装有Hue应用程序的智能手机或我家里任何使用Home应用程序或Siri的苹果设备来控制灯光。</p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/e266101fb219acf008f797ec7437167a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0ZvMMcMq6ZXqNcDBKN1UGw.jpeg"/></div></div><figcaption class="lg lh fg fe ff li lj bd b be z ek">Watching homebridge sending commands to my lights</figcaption></figure><h2 id="a735" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">安全性</h2><p id="dff0" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">物联网的营销方式非常注重家庭内外的便利性。飞利浦公司宣传说，可以在你度假的地方开灯，让潜在的窃贼以为你在家。这很好，但它需要远程访问您家中的设备。</p><p id="6931" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">德国智能恒温器制造商tado播放电视广告，演示当你离你的房子越来越近时，它如何逐渐加热，不仅需要远程访问，还需要连续的手机地理定位。嗯，没有。</p><figure class="lc ld le lf fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/4eebfd677fb6e53bf31a71b07a1faa47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWJVenQsE2ZjJpPJ79bsWw.jpeg"/></div></div></figure><p id="c3b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">飞利浦自1892年以来一直从事灯泡制造业务，我对他们在这一领域的技能非常有信心。我不确信他们在运行一个安全的web服务来保证我的数据和凭证的安全方面同样熟练。鉴于<a class="ae lk" href="https://boingboing.net/2017/11/16/unsafe-at-any-speed-2.html" rel="noopener ugc nofollow" target="_blank">物联网安全的糟糕状态</a>，我主动选择不使用他们允许远程访问的服务，因为即使是以安全为生的公司也不总是做得好。</p><p id="a799" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果当我不在的时候访问我的家庭设备真的是我需要的东西，那么我会对苹果更有信心，因为他们对Homekit设置了很多限制，以保护开发者和用户双方的安全和隐私，例如在你被允许设置它之前需要两步验证。</p><h2 id="446e" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">结论</h2><p id="f7a3" class="pw-post-body-paragraph jc jd hu je b jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv la jx jy jz hn dt translated">如果你的房子里的灯只使用E27、E14或GU10插座，你愿意只使用飞利浦灯泡和遥控器，再也不碰你现有的墙内开关，那么实际上，未来就是现在。但我认为这不太现实或实际。</p><p id="8b66" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我想几乎每个人最终都会像我一样遇到障碍。有许多解决方案可以克服它们，但是没有一个适合普通用户。虽然我选择的Busch-Jaeger解决方案运行良好，但它没有通过父母测试，因为他们很容易在自己的房子里模仿。</p><p id="4dde" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">浏览各种技术论坛，很明显，人们迫切需要一种比目前可用的解决方案更标准、更优雅的墙内开关解决方案，例如，本指导视频展示了如何修改Hue Tap开关，使其适合Eltakto框架，看起来像普通开关。</p><figure class="lc ld le lf fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><p id="6924" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">飞利浦生产标准墙壁开关和调光器解决方案的可能性似乎很小。在Hue应用中提供更好的第三方设备支持，并将其暴露给Homekit等智能家居平台，似乎同样微不足道。最终，这些都是广泛采用的障碍，所以我不指望我的父母会很快加入智能照明的行列。</p></div></div>    
</body>
</html>