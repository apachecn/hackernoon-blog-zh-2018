<html>
<head>
<title>How to Deploy a Create React App with Recharts, the WikiQuotes API, and Datasets</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Recharts、WikiQuotes API和数据集部署Create React应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-create-and-deploy-a-create-react-app-with-recharts-the-wikiquotes-api-and-a-data-set-1f3a90fccb2d?source=collection_archive---------10-----------------------#2018-01-09">https://medium.com/hackernoon/how-to-create-and-deploy-a-create-react-app-with-recharts-the-wikiquotes-api-and-a-data-set-1f3a90fccb2d?source=collection_archive---------10-----------------------#2018-01-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="93c5" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">我最近开发了一个应用，利用了来自世卫组织(世界卫生组织)、维基百科API、Recharts、大量CSS和JS的数据，当然，还有对这个主题的热情。这将详细地告诉你如何去做。</h2></div><p id="3c47" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在开始一个项目之前，有一件事你必须知道，那就是你到底对什么有热情。我将把这个基本难题留给你。就我个人而言，我喜欢详细描述地球上的生命和人们生活中各种不同的力量。我决定这样做:</p><ul class=""><li id="8797" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn dt translated">十组数据表达了生活中一些强烈的东西。创建用户数据体验的十个图表。</li><li id="e144" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn dt translated">与数据相关的十条引文，来自WikiQuotes <a class="ae kt" href="https://hackernoon.com/tagged/api" rel="noopener ugc nofollow" target="_blank"> API </a>。</li></ul><p id="a0e0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是这个应用程序最终的样子:</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="kz la l"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Quick viewing of the app</figcaption></figure><p id="8088" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">本指南将分为以下几部分:</p><ol class=""><li id="e7e8" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated">用Create <a class="ae kt" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> React </a> app创建App</li><li id="96b4" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">操纵数据，用图表创建图表</li><li id="ab64" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">利用WikiQuotes API收集报价</li><li id="cf18" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">动态换页和传递道具</li><li id="4932" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">在Github页面上部署</li></ol><p id="4a88" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你肯定能做到。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff lg"><img src="../Images/85a88c396e2fd511c79305c121d23dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*znvbzjfWMvD1Pe0yyBR6Ng.jpeg"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">this is possibly, probably, maybe an exaggeration</figcaption></figure></div><div class="ab cl lj lk hc ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hn ho hp hq hr"><h1 id="eed4" class="lq lr hu bd ls lt lu lv lw lx ly lz ma ja mb jb mc jd md je me jg mf jh mg mh dt translated">创建React应用程序</h1><ol class=""><li id="448e" class="kf kg hu jl b jm mi jp mj js mk jw ml ka mm ke lf kl km kn dt translated"><code class="eh mn mo mp mq b">npm install -g create-react-app</code></li><li id="0c89" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">然后这个:<code class="eh mn mo mp mq b">create-react-app name_of_app_you're_creating</code></li><li id="557f" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">这将创建一个包含文件结构的目录</li><li id="a1da" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">进入这个新目录</li><li id="86c1" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated"><code class="eh mn mo mp mq b">npm start</code>或<code class="eh mn mo mp mq b">yarn start</code></li><li id="a195" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">砰！您已经设置好了文件结构！</li></ol><p id="899d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">看一看吧:</strong></p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="be9e" class="mv lr hu mq b fv mw mx l my mz">my-app/<br/>  README.md<br/>  node_modules/<br/>  package.json<br/>  public/<br/>    index.html<br/>    favicon.ico<br/>  src/<br/>    App.css<br/>    App.js<br/>    App.test.js<br/>    index.css<br/>    index.js<br/>    logo.svg</span></pre><p id="d7b0" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">节点模块？</strong></p><ul class=""><li id="124e" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn dt translated">包含由一些聪明人编写的无数行代码，为您做各种繁重的工作，因此您可以简单地关注编写代码中容易概念化的部分(做相关事情和视觉方面的功能)</li></ul><p id="97c5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">公？</strong></p><ul class=""><li id="ab4a" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke kk kl km kn dt translated">这是将在页面上可视化呈现的HTML文件，页面是应用程序的起点。</li><li id="e7a2" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn dt translated"><code class="eh mn mo mp mq b">favicon.ico</code>那是你标签上的小图片。它在<code class="eh mn mo mp mq b">manifest.json</code>中被引用</li><li id="c895" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke kk kl km kn dt translated"><code class="eh mn mo mp mq b">manifest.json</code>主要用于元数据</li></ul><p id="7762" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv"> src </strong></p><p id="5e50" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是你写的所有东西的位置</p><p id="b76d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">参见<code class="eh mn mo mp mq b">index.css</code>和<code class="eh mn mo mp mq b">App.css</code>。两者做同样的事情。我是这样想的。我希望在整个应用程序中出现什么样的视觉效果？把那个放进<code class="eh mn mo mp mq b">index.css</code>。其他全部放入<code class="eh mn mo mp mq b">App.css</code>。是个小app。</p><p id="260f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这就产生了“工作人员”,他们的任务是改善用户对网站的体验，并从整体上改善网站的功能。</p><p id="c441" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">index.js</code>将<code class="eh mn mo mp mq b">index.html </code>与你要写的所有东西联系起来。</p><p id="2201" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">有趣的部分是你的应用程序。这是居住的地方。万物汇聚的地方。就我个人而言，我删除了退货声明中的所有内容，除了<code class="eh mn mo mp mq b">div</code>，因为我不想要标题。</p><p id="cbea" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">注意我放在那里的文件夹。去找一些数据，我个人用:<a class="ae kt" href="http://apps.who.int/gho/data/node.home" rel="noopener ugc nofollow" target="_blank">世卫组织数据</a>四处点击，直到找到感兴趣的数据。JSON下载后，将文件移动到data文件夹。</p><p id="12c8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，开始实际的代码编写。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff na"><img src="../Images/ba4544f5c6321485361bceb594d031c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/1*E4vQx_QoYJIdhMZJMwBpSg.png"/></div></figure><p id="717f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你会有几个独立的页面？你应该为每一个都创建一个组件。我的计划是这样开始的。十个数据文件创建十个图表。因此，我将展示如何创建图表。</p><p id="be7b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，创建一个新文件夹来保存您将创建的这些组件，同时创建相关的文件。</p></div><div class="ab cl lj lk hc ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hn ho hp hq hr"><h1 id="de7d" class="lq lr hu bd ls lt lu lv lw lx ly lz ma ja mb jb mc jd md je me jg mf jh mg mh dt translated">数据处理和图表创建</h1><p id="5000" class="pw-post-body-paragraph jj jk hu jl b jm mi iv jo jp mj iy jr js nb ju jv jw nc jy jz ka nd kc kd ke hn dt translated"><strong class="jl hv">我将向您展示如何创建这个图表:</strong></p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="nf ng di nh bf ni"><div class="fe ff ne"><img src="../Images/af3361a443643a2628137c4f04893e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0-8PcqFHOv5InnYhIitdEw.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">I did mention expressing something intense about life</figcaption></figure><p id="5597" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果好奇可以链接到数据:<a class="ae kt" href="http://apps.who.int/gho/data/view.main.vEQKNHIVTOTv" rel="noopener ugc nofollow" target="_blank">数据集</a></p><p id="ffd5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">数据最初的结构如下:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="d938" class="mv lr hu mq b fv mw mx l my mz">{</span><span id="2c53" class="mv lr hu mq b fv nj mx l my mz">   "dimension": [<br/>                   many_irrelevant_objects<br/>                ],<br/>   "fact": [</span><span id="fd13" class="mv lr hu mq b fv nj mx l my mz">    {<br/>                   "dims": {<br/>                               "COUNTRY": "Afganhistan",<br/>                               "YEAR": "2010",<br/>                               "GHO": "Knowledge about sexual    <br/>                               transmission of AIDS",<br/>                               "SEX": "Female"<br/>                           },<br/>                   "Value": "8.8"</span><span id="0ded" class="mv lr hu mq b fv nj mx l my mz">    },<br/>              ...many_more_objects of same format<br/>           ]<br/>}</span></pre><p id="9085" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">对于我的图表，我希望数据最终看起来像这样:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="a400" class="mv lr hu mq b fv mw mx l my mz">[<br/>  {<br/>    "year": "1993",<br/>    "Burkina Faso": 16,<br/>    "Ghana": 0,<br/>    "Kenya": 0<br/>  },<br/>  ...,<br/>  {<br/>    "year": "2010",<br/>    "Burkina Faso": 80.4,<br/>    "Ghana": 75.05,<br/>    ...<br/>  }<br/>]</span></pre><p id="7363" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">格式化数据</strong></p><p id="b5a9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">注意，初始格式中有不需要的奇数<code class="eh mn mo mp mq b">“dimension”</code>字段，所有需要的都在<code class="eh mn mo mp mq b">"fact"</code>的<code class="eh mn mo mp mq b">"dims"</code>和<code class="eh mn mo mp mq b">"Value"</code>中。所以，我在这里获取这些值，并将它们设置为一个单独的对象。</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="49cf" class="mv lr hu mq b fv mw mx l my mz">const initialReformat = (data) =&gt; {<br/>  let temp = {}<br/>  return data.fact.map(row =&gt; {<br/>    temp = row.Value<br/>    row = row.dims<br/>    row.Value = temp<br/>    return row<br/>  })<br/>}</span></pre><p id="f6c1" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我现在有了这个:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="6343" class="mv lr hu mq b fv mw mx l my mz">[ <br/>   { <br/>     COUNTRY: 'Afghanistan',<br/>     YEAR: '2010',<br/>     GHO: 'Knowledge about sexual transmission of AIDS',<br/>     SEX: 'Female',<br/>     Value: '8.8' <br/>   },<br/>   ...<br/>]</span></pre><p id="4fed" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">接下来，我创建了一个对象，将每年设置为一个键，该键的值是一个数组，其中包含与年份值相关的所有数据。</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="6564" class="mv lr hu mq b fv mw mx l my mz">const sortDataByYear = data =&gt; {<br/>  var sortByYear = {}<br/>  data.forEach( row =&gt; {<br/>    if (!sortByYear[row.YEAR]) {<br/>      sortByYear[row.YEAR] = [];<br/>      sortByYear[row.YEAR].push(row);<br/>    } else {<br/>      sortByYear[row.YEAR].push(row);<br/>    }<br/>  })<br/>  return sortByYear<br/>}</span></pre><p id="634f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">很简单，检查年份是否不存在，如果是，创建一个新数组并将数据放入其中。否则，将数据推入已经创建的年份数组中。</p><p id="4f30" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后我得到了这个东西:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="3faa" class="mv lr hu mq b fv mw mx l my mz">{ <br/>   1992: <br/>      [ { COUNTRY: 'Malawi',<br/>          YEAR: '1992',<br/>          GHO: 'Knowledge about sexual transmission of AIDS',<br/>          SEX: 'Male',<br/>          Value: '0.0' },<br/>          ...<br/>      ],<br/>    1993: [...],<br/>    ...<br/>}</span></pre><p id="f91b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，获取图表所需数据结构的最后一个函数:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="3b56" class="mv lr hu mq b fv mw mx l my mz">const finalData = []<br/>for (const year in sortByYear) {<br/>  finalData.push({ year })<br/>  sortByYear[year].forEach(obj =&gt; {<br/>    if (parseFloat(finalData[i][obj.COUNTRY]) &gt; 0) {<br/>      finalData[i][obj.COUNTRY] = (finalData[i][obj.COUNTRY] + parseFloat(obj.Value)) / 2<br/>    }<br/>    else finalData[i][obj.COUNTRY] =  <br/>         parseFloat(obj.Value).toFixed(2)<br/>  })<br/>  i++<br/>}</span></pre><p id="d5db" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，我制作了一个全新的数组来存储最终数据。然后，我为每一年创建一个新对象，并将该年设置为对象的键/值对之一(<code class="eh mn mo mp mq b">finalData.push({ year })</code>)。最后，我遍历了前面函数返回的对象:<code class="eh mn mo mp mq b">sortByYear</code>中对应于年份的数组。</p><p id="a2ff" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这个数组中，我有两层要检查:</p><ol class=""><li id="dcfb" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated">国家是否被设置为最终数据数组中对象的键？</li><li id="5727" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">如果没有，这意味着我看到的是一个不同的性别，所以我应该将这个数字与前一个数字进行平均。</li></ol><p id="072b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">使用了<code class="eh mn mo mp mq b">i</code>,所以下一年在数组的下一个索引中。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/69de76d585d488b99f830685a0959f69.png" data-original-src="https://miro.medium.com/v2/resize:fit:496/format:webp/1*-2BFByeRl2z0UFbamfN91Q.png"/></div></figure><p id="ffdb" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们在<em class="nl">安排的</em>点。不过，接下来将快速描述react组件的创建。然后是视觉呈现。</p><p id="14c8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">看看React组件的渲染</strong></p><ol class=""><li id="e4bb" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated"><code class="eh mn mo mp mq b">import React, { Component } from 'react'</code></li><li id="2176" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">创建类和构造函数</li></ol><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="09c4" class="mv lr hu mq b fv mw mx l my mz">class HIVKnowledge extends Component {<br/>    constructor(props) {<br/>        super(props)<br/>        this.state = {<br/>            data: [],<br/>            quote: ""<br/>        }<br/>    }...</span></pre><p id="4a44" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">3.导入数据，当“组件安装”时，设置数据的状态。</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="3951" class="mv lr hu mq b fv mw mx l my mz">const HIVKnowledgeData = require('../data/diseases-hiv-knowledge.json');</span><span id="44ac" class="mv lr hu mq b fv nj mx l my mz">...where I left off above</span><span id="7cf5" class="mv lr hu mq b fv nj mx l my mz">componentDidMount() {<br/>    const data = []<br/>    data = initialReformat(HIVKnowledgeData)<br/>    this.setState({ data })<br/>}</span></pre><p id="36d6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">componentDidMount</code>当页面被“装载”或准备加载时运行，无论在这里放置什么都会影响初始呈现。</p><p id="8b38" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">4.呈现页面之前的最终数据管理:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="3aa7" class="mv lr hu mq b fv mw mx l my mz">render() {<br/>    let sortByYear = [],<br/>      finalData = [],<br/>      i = 0<br/>    if (this.state.data.length &gt; 0) {<br/>        sortByYear = sortDataByYear(this.state.data)<br/>        ...then run the last data function on sortByYear<br/>}</span></pre><p id="690b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">检查长度是否大于零，因为<code class="eh mn mo mp mq b">componentDidMount</code>不会立即出现。因此，在这个if语句的第一次检查中，数据将是一个空数组，这根本不是我们想要输入到图表中的内容。</p><p id="7e34" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">图表的创建和页面的呈现</strong></p><p id="9833" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">npm install recharts</code></p><p id="7692" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">从recharts导入什么:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="0984" class="mv lr hu mq b fv mw mx l my mz">import { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';</span></pre><p id="fd3d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在标签上方的index.html中放置什么(如果你想让标签显示其他内容，也可以修改)</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="d986" class="mv lr hu mq b fv mw mx l my mz">&lt;link rel="stylesheet" href="<a class="ae kt" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css</a>"&gt;<br/>&lt;script src="<a class="ae kt" href="https://code.jquery.com/jquery-2.1.3.min.js" rel="noopener ugc nofollow" target="_blank">https://code.jquery.com/jquery-2.1.3.min.js</a>" integrity="sha256-ivk71nXhz9nsyFDoYoGf2sbjrR9ddh+XDkCcfZxjvcM="<br/>  crossorigin="anonymous"&gt;&lt;/script&gt;<br/>&lt;script src="<a class="ae kt" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js" rel="noopener ugc nofollow" target="_blank">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js</a>"&gt;&lt;/script&gt;</span></pre><p id="63e1" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">呈现器的返回语句中应该包含什么:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="abde" class="mv lr hu mq b fv mw mx l my mz">return (<br/>     &lt;div className="chart bar HIV"&gt;<br/>          &lt;h6&gt;Knowlege about sexual transmission of AIDS (Average              <br/>          Both Sexes)&lt;/h6&gt;<br/>          &lt;ResponsiveContainer width='100%' height={300}&gt;<br/>              &lt;LineChart <br/>                cx="50%" <br/>                cy="50%" <br/>                outerRadius="80%"<br/>                data={finalData}<br/>               &gt;<br/>               &lt;XAxis dataKey="year" /&gt;<br/>               &lt;YAxis /&gt;<br/>               &lt;CartesianGrid strokeDasharray="3 3" /&gt;<br/>               &lt;Tooltip /&gt;<br/>               &lt;Line <br/>                   connectNulls={true} <br/>                   type="monotone" <br/>                   dataKey="Zambia" <br/>                   stroke="black" <br/>               /&gt;  <br/>               ...rest of lines and closing tags</span></pre><p id="5951" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是页面上将呈现的内容。这是JSX。类名是React设置类的方式。否则,<code class="eh mn mo mp mq b">&lt;h6&gt;</code>正如人们所料，请注意该图也非常HTML'y。请注意，JSX组件的一个决定性因素是茶包。</p><p id="6358" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">至于图表:</p><p id="47ca" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">响应式容器完全按照预期的那样工作，根据屏幕大小变大变小。</p><p id="55ea" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">width</code> <code class="eh mn mo mp mq b">cx</code> <code class="eh mn mo mp mq b">cy</code> <code class="eh mn mo mp mq b">outerRadius</code>都不是随机数。这是获得图表中心位置的秘方。</p><p id="1fe2" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">data={finalData}</code>是数据输入图表的方式。</p><p id="c455" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">&lt;XAxis datakey=”year” /&gt;</code>是将年份设定为… x轴的东西，非常复杂。</p><p id="2cf9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">&lt;Tooltip /&gt;</code>悬停在数据上时创建一个可爱的用户交互。</p><p id="cb58" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">&lt;Line … /&gt;</code>是每一行的颜色，国家(在数组中的关键)，而<code class="eh mn mo mp mq b">connectNulls</code>将做到这一点，如果下一年是一个距离，线将连接。这些数据很有帮助，因为许多国家的研究间隔了很多年。</p><p id="d014" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">导出文件末尾的组件</strong></p><p id="c7ac" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">export default HIVKnowledge</code></p><p id="a467" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">导入App.js中的组件</strong></p><p id="2f14" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">import HIVKnowledge from ‘./poem-1-data/HIVKnowledge’</code></p><p id="ba0c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">渲染图表组件</strong></p><p id="9b21" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">将<code class="eh mn mo mp mq b">&lt;HIVKnowledge /&gt;</code>放在render方法的return语句中的<code class="eh mn mo mp mq b">div</code>内。</p><p id="7e4d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，您应该会看到页面上的图表。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff nm"><img src="../Images/11796af7496a09c8c10ce66623135297.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*mwXaxSwTyfEitsM2izUwEg.jpeg"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Hopefully not</figcaption></figure></div><div class="ab cl lj lk hc ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hn ho hp hq hr"><h1 id="dd26" class="lq lr hu bd ls lt lu lv lw lx ly lz ma ja mb jb mc jd md je me jg mf jh mg mh dt translated">利用WikiQuotes API来呈现报价</h1><p id="4e6c" class="pw-post-body-paragraph jj jk hu jl b jm mi iv jo jp mj iy jr js nb ju jv jw nc jy jz ka nd kc kd ke hn dt translated">1.我用的是github上现成的这个模块:<a class="ae kt" href="https://github.com/natetyler/wikiquotes-api" rel="noopener ugc nofollow" target="_blank">https://github.com/natetyler/wikiquotes-api</a></p><p id="3966" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">将其复制并粘贴到应用程序中的一个文件中。我用了一个叫<code class="eh mn mo mp mq b">WikiQuote.js</code>的文件。</p><p id="0e02" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">2.在该文件的顶部导入jQuery:</p><p id="8252" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">import * as $ from ‘jquery’</code></p><p id="1f66" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">3.导出模块:</p><p id="b784" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">export const WikiquoteApi = ...</code></p><p id="58bf" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">4.创建必要的错误回调:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="11f0" class="mv lr hu mq b fv mw mx l my mz">export const error = (err) =&gt; {<br/>    console.error(err)<br/>}</span></pre><p id="43d8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">5.导入图表组件:</p><p id="a223" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh mn mo mp mq b">import { WikiquoteApi, error } from ‘../WikiQuote.js’</code></p><p id="bf9b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">6a。在<code class="eh mn mo mp mq b">componentDidMount</code>中创建<code class="eh mn mo mp mq b">success</code>回调函数，以便在调用时设置<code class="eh mn mo mp mq b">quote</code>变量:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="ad54" class="mv lr hu mq b fv mw mx l my mz">const success = (wikiData) =&gt; {<br/>    quote = `"${wikiData.quote}"`<br/>}</span></pre><p id="c84d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">6b。创建一个等待WikiQuote函数完成的<code class="eh mn mo mp mq b">checkQuoteLength</code>函数(这是一个异步挑战)，重复调用自己，直到完成，立即设置状态。将此也放入<code class="eh mn mo mp mq b">componentDidMount</code></p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="a319" class="mv lr hu mq b fv mw mx l my mz">const checkQuoteLength = () =&gt; {<br/>  if (quote.length &gt; 0) {<br/>    this.setState({ quote, data })<br/>  } else {<br/>    setTimeout(checkQuoteLength, 100)<br/>  }<br/>}</span></pre><p id="e396" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">6c。调用<code class="eh mn mo mp mq b">checkQuoteLength</code>:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="64b6" class="mv lr hu mq b fv mw mx l my mz">checkQuoteLength()</span></pre><p id="8351" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">6d。呼叫<code class="eh mn mo mp mq b">WikiquoteApi.getRandomQuote(title_to_search_in_wikiquotes, success, error)</code>:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="e766" class="mv lr hu mq b fv mw mx l my mz">componentDidMount () {<br/>  let quote = "", data = []<br/>  const success = (wikiData) =&gt; {<br/>    quote = `"${wikiData.quote}"`<br/>  }<br/>  const checkQuoteLength = () =&gt; {<br/>    if (quote.length &gt; 0) {<br/>      this.setState({ quote, data })<br/>    } else {<br/>      setTimeout(checkQuoteLength, 100)<br/>    }<br/>  }<br/>  WikiquoteApi.getRandomQuote("HIV/AIDS", success, error)<br/>  data = initialReformat(HIVKnowledgeData)<br/>  checkQuoteLength()<br/>}</span></pre><p id="f633" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">7.呈现报价:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="6f57" class="mv lr hu mq b fv mw mx l my mz">return (<br/>     &lt;div className="chart bar HIV"&gt;<br/>          &lt;h6&gt;Knowlege about sexual transmission of AIDS (Average              <br/>          Both Sexes)&lt;/h6&gt;<br/>          &lt;p&gt;{this.state.quote}&lt;/p&gt;<br/>          &lt;ResponsiveContainer width='100%' height={300}&gt;<br/>          ...</span></pre><p id="d750" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">瞧啊。现在这段引文已经出现在网页上了。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff nn"><img src="../Images/4f692a6512ad8251b6e6aa5f7a632fee.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*6GvOQPgLi-DGtylBElXfUA.png"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Now you can do all sorts of stuff with this in apps</figcaption></figure><p id="b9a9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是您只有一个包含一个图表的页面，如果您打算继续，请在继续之前创建更多的图表。接下来，将展示如何以简单的方式从一个页面转到下一个页面。</p></div><div class="ab cl lj lk hc ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hn ho hp hq hr"><h1 id="b693" class="lq lr hu bd ls lt lu lv lw lx ly lz ma ja mb jb mc jd md je me jg mf jh mg mh dt translated">动态换页和传递道具</h1><p id="7583" class="pw-post-body-paragraph jj jk hu jl b jm mi iv jo jp mj iy jr js nb ju jv jw nc jy jz ka nd kc kd ke hn dt translated"><strong class="jl hv">创建一些按钮:</strong></p><p id="4f8c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我用<a class="ae kt" href="http://css3buttongenerator.com" rel="noopener ugc nofollow" target="_blank"> CSS按钮生成器</a>让我的生活更轻松。</p><p id="d360" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">为左右按钮创建按钮组件:</strong></p><ol class=""><li id="b986" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated">创建一个名为<code class="eh mn mo mp mq b">Buttons</code>的文件，其中包含按钮的HTML。</li><li id="9c2b" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">创建一个具有两个初始状态<code class="eh mn mo mp mq b">leftButtonDisable: true</code>和<code class="eh mn mo mp mq b">rightButtonDisable: false</code>的类组件(同上)。</li><li id="2384" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">在返回时创建按钮:</li></ol><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="4c53" class="mv lr hu mq b fv mw mx l my mz">&lt;div className="buttons"&gt;<br/>    &lt;button className="btn" value="left" disabled=<br/>    {this.state.leftButtonDisable} onClick=                                   <br/>    {this.handleClick}&gt;◀&lt;/button&gt;<br/>    &lt;button className="btn" value="right" disabled=<br/>    {this.state.rightButtonDisable} onClick=<br/>    {this.handleClick}&gt;▶&lt;/button&gt;<br/>&lt;/div&gt;</span></pre><p id="bf41" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">3.创建<code class="eh mn mo mp mq b">handleClick</code>类方法:</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="b87b" class="mv lr hu mq b fv mw mx l my mz">handleClick(event) {<br/>  let value = 0<br/>  if (event.target.value === "left") {<br/>    value--<br/>    this.props.onPageChange(value)<br/>  } else {<br/>    value++<br/>    this.props.onPageChange(value)<br/>  }<br/>}</span></pre><p id="d7ab" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">将值设置为零，如果为左，则递减，否则递增。并将该值传递给… <code class="eh mn mo mp mq b">this.props.onPageChange</code>。我接下来会讲这个。</p><p id="8142" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">4.导出组件</p><p id="e2a7" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">在App.js内:</strong></p><ol class=""><li id="a779" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated"><code class="eh mn mo mp mq b">import Buttons from ‘./Buttons’</code></li><li id="965a" class="kf kg hu jl b jm ko jp kp js kq jw kr ka ks ke lf kl km kn dt translated">创建一个当前页面状态并将其设置为零:<code class="eh mn mo mp mq b">currentPage: 0</code></li></ol><p id="c066" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">2.创建一个<code class="eh mn mo mp mq b">onPageChange</code>类方法，并设置<code class="eh mn mo mp mq b">this</code>上下文以允许呈现相应的页面</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="8d60" class="mv lr hu mq b fv mw mx l my mz">constructor (props) {<br/>  ...<br/>  this.onPageChange = this.onPageChange.bind(this)<br/>}</span><span id="9a09" class="mv lr hu mq b fv nj mx l my mz">onPageChange(value) {<br/>  const currentPage = this.state.currentPage + value<br/>  this.setState({ currentPage })<br/>}</span></pre><p id="8d0f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">3.将按钮组件放入渲染中，并将<code class="eh mn mo mp mq b">onPageChange</code>和<code class="eh mn mo mp mq b">currentPage</code>作为道具传递给<code class="eh mn mo mp mq b">Buttons</code>组件</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="7b6e" class="mv lr hu mq b fv mw mx l my mz">&lt;Buttons <br/>    currentPage={this.state.currentPage} <br/>    onPageChange={this.onPageChange}<br/>/&gt;</span></pre><p id="1038" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">回到按钮组件</strong></p><p id="fdf4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">使用生命周期方法<code class="eh mn mo mp mq b">componentWillRecieveProps</code>了解何时禁用按钮</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="6880" class="mv lr hu mq b fv mw mx l my mz">componentWillReceiveProps(nextProps) {<br/>  let currentPage = nextProps.currentPage<br/>  if (currentPage === 0) {<br/>    this.setState({<br/>      leftButtonDisable: true<br/>    })<br/>  }<br/>  else if (currentPage === 9) {<br/>    this.setState({<br/>      rightButtonDisable: true<br/>    })<br/>  } else {<br/>    this.setState({<br/>      leftButtonDisable: false,<br/>      rightButtonDisable: false<br/>    })<br/>  }<br/>}</span></pre><p id="553b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">每当<code class="eh mn mo mp mq b">App.js</code>传递给<code class="eh mn mo mp mq b">buttons.js</code>的道具发生变化时就会运行，在这种情况下，<code class="eh mn mo mp mq b">currentPage</code>发生变化。当<code class="eh mn mo mp mq b">currentPage</code>改变时<code class="eh mn mo mp mq b">componentWillReceiveProps</code>运行，并且<code class="eh mn mo mp mq b">nextProps</code>是一个对象，其属性的键/值作为传入值被传递。这允许您改变该实例的状态，进而改变页面上可视的组件。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff no"><img src="../Images/440aad418afa19ee2c14674545e565f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:350/format:webp/1*OgKCD2b-S8UKrC3XGXyr-A.jpeg"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Ah buttons, wonderful buttons</figcaption></figure><p id="ece9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">根据</strong> <code class="eh mn mo mp mq b"><strong class="jl hv">currentPage</strong></code>渲染不同的页面</p><ol class=""><li id="5665" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated">在App.js中创建一个呈现页面类方法</li></ol><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="7ade" class="mv lr hu mq b fv mw mx l my mz">renderPage(curPage) {<br/>  switch (curPage) {<br/>    case 0:<br/>      return &lt;HIVKnowledge /&gt;<br/>    case 1:<br/>      return &lt;LifeExpectancy /&gt; <br/>    ...<br/>    default:<br/>      return console.error("Something is wrong with your buttons")<br/>  }<br/>}</span></pre><p id="9e07" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">2.在<code class="eh mn mo mp mq b">render</code>类方法的<code class="eh mn mo mp mq b">return</code>语句中调用这个函数</p><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="ad87" class="mv lr hu mq b fv mw mx l my mz">&lt;div className="App"&gt;<br/>  {this.renderPage(this.state.currentPage)}<br/>  &lt;Buttons currentPage={this.state.currentPage} onPageChange= <br/>           {this.onPageChange} /&gt;<br/>&lt;/div&gt;</span></pre><p id="c9b4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，可能，希望你知道如何创建一个多页面的react应用程序。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff np"><img src="../Images/57dfc29c25ff146abfe507a07eeceb09.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/1*QmoIWhhl_QPrxz3YbvIePw.gif"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">If yes, you must feel this way</figcaption></figure><h1 id="108d" class="lq lr hu bd ls lt nq lv lw lx nr lz ma ja ns jb mc jd nt je me jg nu jh mg mh dt translated">将应用程序部署到Github页面</h1><p id="2d0e" class="pw-post-body-paragraph jj jk hu jl b jm mi iv jo jp mj iy jr js nb ju jv jw nc jy jz ka nd kc kd ke hn dt translated">Info感谢<a class="ae kt" href="https://medium.freecodecamp.org/surge-vs-github-pages-deploying-a-create-react-app-project-c0ecbf317089" rel="noopener ugc nofollow" target="_blank">这篇媒体文章</a>。</p><ol class=""><li id="d682" class="kf kg hu jl b jm jn jp jq js kh jw ki ka kj ke lf kl km kn dt translated">转到您的<code class="eh mn mo mp mq b">package.json</code>并添加两个新字段，如下所示:</li></ol><pre class="ku kv kw kx fq mr mq ms mt aw mu dt"><span id="c3f7" class="mv lr hu mq b fv mw mx l my mz">{<br/>    ...<br/>    "private": true, //below this add:<br/>    "homepage": <!-- -->"https://github_username.github.io/repository_name",<br/>    ...<!-- --> <br/>    "scripts": {<br/>        "eject": "react-scripts-eject", //below this add:<br/>        "deploy: "npm run build&amp;&amp;gh-pages -d build"<br/>    ...<br/>}</span></pre><p id="2229" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">2.然后这样做:<code class="eh mn mo mp mq b">npm install --save-dev gh-pages</code>。把你的代码推给master。</p><p id="c50a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">3.<code class="eh mn mo mp mq b">npm run build</code>这将创建应用程序中所有代码的捆绑包(运行后，查看您的文件系统，您将看到一个<code class="eh mn mo mp mq b">build </code>文件夹，其中包含紧密编织的、不可读格式的所有代码)。</p><p id="a247" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">4.<code class="eh mn mo mp mq b">npm run deploy</code>是终端的最后一步</p><p id="dacc" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">5.进入你的GitHub账户。转到应用程序页面，然后到设置，向下滚动直到你到达GitHub页面，点击源下拉菜单，找到<code class="eh mn mo mp mq b">gh-pages branch</code>，然后等待一会儿，你就…</p><p id="cc57" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">部署完毕！</p><p id="aba4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">将来，如果你编辑了一些代码或类似的东西，一定要运行<code class="eh mn mo mp mq b">npm run build</code>然后<code class="eh mn mo mp mq b">npm run deploy</code>，这样你部署的应用就会受到影响！</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff nv"><img src="../Images/beae9842b496deb9cb1a7f2c37e8d098.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*d5t9pTUC1yjeShWWYNgABA.jpeg"/></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">buenisimo</figcaption></figure><h1 id="1595" class="lq lr hu bd ls lt nq lv lw lx nr lz ma ja ns jb mc jd nt je me jg nu jh mg mh dt translated">最后</h1><p id="15c2" class="pw-post-body-paragraph jj jk hu jl b jm mi iv jo jp mj iy jr js nb ju jv jw nc jy jz ka nd kc kd ke hn dt translated">无论您的React技能水平如何，我的目标是确保这篇文章包含任何人都可以学习的细微差别。这是在完成上述项目后直接写的，所以这些麻烦和磨难在我脑海中记忆犹新(当我打这些文字时，它们是参考文献)。</p><p id="15d6" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">React中还有无数的资源，这只是众多资源中的一小部分。如果你读了这篇文章，但知道你还有其他想做的事情，看看这个回购:<a class="ae kt" href="https://github.com/brillout/awesome-react-components" rel="noopener ugc nofollow" target="_blank">真棒-反应-组件</a>。</p><p id="41f5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是马赛尔·普鲁斯特的一句话:</p><blockquote class="nw"><p id="7863" class="nx ny hu bd nz oa ob oc od oe of ke ek translated">“每个读者都发现自己。作家的作品只不过是一种光学仪器，使读者能够辨别出如果没有这本书，他可能永远也看不到的东西。”</p></blockquote><p id="363c" class="pw-post-body-paragraph jj jk hu jl b jm og iv jo jp oh iy jr js oi ju jv jw oj jy jz ka ok kc kd ke hn dt translated">让我们希望React是一个工具，可以帮助您编写同样的代码。</p><p id="3d55" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">有相应的CSS文章… <a class="ae kt" rel="noopener" href="/@muzsik33/a-compilation-of-css-hacks-a4392947d16">这里</a></p><p id="fd4a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是回购:<a class="ae kt" href="https://github.com/jMuzsik/quote_and_a_chart" rel="noopener ugc nofollow" target="_blank">报价和图表</a></p><p id="0da3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">感谢道格和凯尔的校对！</p><blockquote class="ol om on"><p id="8aaa" class="jj jk nl jl b jm jn iv jo jp jq iy jr oo jt ju jv op jx jy jz oq kb kc kd ke hn dt translated">祝你旅途顺利，我定期创作内容，所以如果你学到了一两件事，请跟我来，那些鼓掌的东西肯定是受欢迎的。评论也是。</p></blockquote><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="or la l"/></div></figure></div></div>    
</body>
</html>