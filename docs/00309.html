<html>
<head>
<title>Deploy Magento 2 &amp; MySQL to Kubernetes Locally via Minikube</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Minikube在本地将Magento 2和MySQL部署到Kubernetes</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploy-magento2-app-mysql-on-kubernetes-locally-via-minikube-558beebb0f?source=collection_archive---------8-----------------------#2018-01-10">https://medium.com/hackernoon/deploy-magento2-app-mysql-on-kubernetes-locally-via-minikube-558beebb0f?source=collection_archive---------8-----------------------#2018-01-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/05472e9c6ee4e17db4ee307c53facfe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yyjznRoogA6EczwoLgUcfQ.png"/></div></div></figure><p id="e51a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最近，我一直在探索容器和可伸缩微服务的美丽而令人惊叹的世界。这时候我才知道Kubernetes，Docker等<em class="ka">头牌</em>。所以作为一个“新手”，我搜索了关于如何使用Kubernetes管理Dockerized Magento 2应用程序的文章和教程。</p><p id="5912" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我做了<strong class="je hv">拼凑(Magento，Kubernetes和Docker) </strong>的工作，我想分享它。本文的目标是将简单的docker图像(<a class="ae kb" href="https://hub.docker.com/r/alexcheng/magento2/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">alexcheng/magento 2</strong></a>&amp;<a class="ae kb" href="https://hub.docker.com/_/mysql/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">MySQL:5.6</strong></a>)转化为运行在Kubernetes上的应用程序。基本上，MySQL和core Magento 2 web应用程序被打包到单独的Docker容器中，这些Docker容器将通过Minikube在kubernetes上运行。</p><p id="d523" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这只会在本地运行，不会在云上运行。我的下一篇技术文章将是关于在Google Cloud——Kubernetes Engine(GKE)上运行Magento 2，所以如果你对<strong class="je hv"> DevOps </strong>、<strong class="je hv">云计算、Site Reliable Engineering (SRE)、全栈开发</strong>、<strong class="je hv">后端开发、解决方案架构、系统管理和计算机黑客</strong>感兴趣，请点击下面的按钮。</p><p id="560f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">首先，这些家伙是谁，Magento，Kubenetes，Minikube，Docker？</strong></p><p id="e4e6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们来定义它们:</p><blockquote class="kc kd ke"><p id="11c0" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated"><a class="ae kb" href="https://magento.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Magento </strong> </a>为成千上万的零售商和品牌提供最好的电子商务平台和灵活的云解决方案，帮助他们快速创新和发展。</p><p id="61d8" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">Kubernetes是一个开源系统，用于自动化部署、扩展和管理容器化的应用程序。</p><p id="de72" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated"><a class="ae kb" href="https://github.com/kubernetes/minikube" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Minikube </strong> </a>是一个可以轻松在本地运行Kubernetes的工具。Minikube在笔记本电脑上的虚拟机中运行一个单节点Kubernetes集群，供希望尝试Kubernetes或日常使用它进行开发的用户使用。</p><p id="5e42" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated"><a class="ae kb" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Docker </strong> </a>是一个开放平台，开发人员和系统管理员可以在笔记本电脑、数据中心虚拟机或云上构建、发布和运行分布式应用。</p></blockquote><p id="45bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我会试着一步步为你解释这个过程。这将花费我们几分钟时间。</p><p id="375b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们开始之前，让我们确保具备这些<strong class="je hv">先决条件</strong>:</p><ol class=""><li id="64a9" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated"><strong class="je hv"> Docker: </strong>我们需要下载、安装并运行。</li></ol><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/b219f363e5253ef70769e2bbcfbf2e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*13ZSoprMMNXB4gpDMdG85g.png"/></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek"><em class="la">Note: The platform I am using is Docker for Mac on OS X</em></figcaption></figure><p id="8c6f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">2.对于OS X，我们需要<strong class="je hv">自制软件</strong>来安装xhyve驱动程序。</p><p id="90b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">3.克隆我的<strong class="je hv"> </strong> <a class="ae kb" href="https://github.com/siphesande/magento2-minikube" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">资源库</strong> </a> <strong class="je hv">。</strong></p><h1 id="c05b" class="lb lc hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated"><strong class="ak">步骤1:创建一个小型集群</strong></h1><p id="9b01" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">我们将使用Minikube创建一个本地集群。我们需要先下载它:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="5e29" class="mj lc hu mf b fv mk ml l mm mn">Use curl to download and install the latest Minikube release. Let us cut and paste this to the terminal</span><span id="dcf4" class="mj lc hu mf b fv mo ml l mm mn"><strong class="mf hv">curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-darwin-amd64 &amp;&amp; \<br/>  chmod +x minikube &amp;&amp; \<br/>  sudo mv minikube /usr/local/bin/</strong></span><span id="a06e" class="mj lc hu mf b fv mo ml l mm mn">Use Homebrew to install the xhyve driver and set its permissions:</span><span id="3fd9" class="mj lc hu mf b fv mo ml l mm mn"><strong class="mf hv">brew install docker-machine-driver-xhyve<br/>sudo chown root:wheel $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve<br/>sudo chmod u+s $(brew --prefix)/opt/docker-machine-driver-xhyve/bin/docker-machine-driver-xhyve</strong></span><span id="b885" class="mj lc hu mf b fv mo ml l mm mn">-<a class="ae kb" href="https://kubernetes.io/docs/tutorials/stateless-application/hello-minikube/" rel="noopener ugc nofollow" target="_blank">kubernetes.io</a></span></pre><p id="95cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一个挑战是下载<a class="ae kb" href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> kubectl </strong> </a>命令行工具，我将使用它与Kubernetes集群进行交互:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="735c" class="mj lc hu mf b fv mk ml l mm mn">$ brew install kubectl</span></pre><p id="8aee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在让我们开始吧！第一件事是启动minikube集群。我们在终端中键入以下命令:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="c8e2" class="mj lc hu mf b fv mk ml l mm mn">$ minikube start — vm-driver=xhyve</span></pre><p id="2b2e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的输出将是这样的:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/6cced4cfca27b5c4d20d5aa00d09351b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OYev2ZP9gc312PCwQNR1sg.png"/></div></div></figure><p id="6aa9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们需要设置Minikube上下文。上下文决定了kubectl与哪个集群进行交互。</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="aecb" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl config use-context minikube<br/>Output: Switched to context "minikube".</span></pre><p id="3f71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们确保使用Minikube Docker守护程序:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="d8c7" class="mj lc hu mf b fv mk ml l mm mn">$ eval $(minikube docker-env)</span></pre><h1 id="f0ee" class="lb lc hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated">步骤2:创建部署和服务</h1><p id="ef66" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">Kubernetes<a class="ae kb" href="https://kubernetes.io/docs/tutorials/stateless-application/hello-minikube/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">Pod</strong></a><strong class="je hv"/>是一组一个或多个容器，为了管理和联网的目的而捆绑在一起。Kubernetes <a class="ae kb" href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/" rel="noopener ugc nofollow" target="_blank">部署</a>检查我们的Pod的健康状况，如果它终止，就重启Pod的容器。部署是管理pod的创建和扩展的推荐方式。</p><h2 id="8a7d" class="mj lc hu bd ld mq mr ms lh mt mu mv ll jn mw mx lp jr my mz lt jv na nb lx nc dt translated">Kubernetes仪表板/UI</h2><p id="0604" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">为了访问<a class="ae kb" href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/" rel="noopener ugc nofollow" target="_blank"> Kubernetes仪表板</a>，我们在启动minikube后运行这个命令来获取地址:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="2b07" class="mj lc hu mf b fv mk ml l mm mn">$ minikube dashboard </span></pre><p id="5e5c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Kubernetes UI(仪表盘)会自动打开！</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/df29a31375ae77afb9565878b7bf49c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XNR8ehe930eXmdHo4z6Cvw.png"/></div></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">Nothing Deployed yet</figcaption></figure><h2 id="7dad" class="mj lc hu bd ld mq mr ms lh mt mu mv ll jn mw mx lp jr my mz lt jv na nb lx nc dt translated"><strong class="ak">部署Magento 2 </strong></h2><p id="4bcf" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">这是事情变得更加有趣，我保证你会发现kubernetes非常有吸引力。以下要点描述了Magento 2部署和服务的单实例。它使用类似于<a class="ae kb" href="https://kubernetes.io/docs/concepts/configuration/secret/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">秘密</strong> </a>的特征作为密码。它使用不同的设置:<code class="eh ne nf ng mf b"><strong class="je hv"><em class="ka">type: NodePort</em></strong></code>。该设置将Magento 2暴露给来自minikube集群外部的流量。</p><figure class="ks kt ku kv fq iv"><div class="bz el l di"><div class="nh ni l"/></div></figure><p id="a65e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们的终端上，我们键入以下命令来部署Magento 2:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="ac4d" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl create -f magento2-deployment.yaml</span></pre><p id="16f3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要查看部署，我们只需键入以下命令:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="5622" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get deployments</span></pre><p id="24e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输出:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nj"><img src="../Images/96753034fc94abacc95de32103ae7130.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TXDc99TkE490V9riOWyjzw.png"/></div></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">We have one deployment</figcaption></figure><p id="1eff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们来看看豆荚:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="31e0" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get pods</span></pre><p id="3637" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输出:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nk"><img src="../Images/68b96c60232d7a0874415cb4db312f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a10BcrXL7gRbGF9QdeFJbg.png"/></div></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">We have only one service</figcaption></figure><p id="bc16" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果我们还想查看集群事件，只需在终端上键入以下命令:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="77df" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get events</span></pre><h2 id="eb5e" class="mj lc hu bd ld mq mr ms lh mt mu mv ll jn mw mx lp jr my mz lt jv na nb lx nc dt translated"><strong class="ak">创建Magento 2服务—公开</strong></h2><p id="45dc" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">您刚才看到了上面文件中的代码(<a class="ae kb" href="https://gist.github.com/siphesande/d422755b754013690470c8506df13566" rel="noopener ugc nofollow" target="_blank"> magento2-deployment.yaml </a>)。以下代码取自上述文件，用于创建Magento 2服务。</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="02d5" class="mj lc hu mf b fv mk ml l mm mn"><br/>apiVersion: v1<br/>kind: Service<br/>metadata:<br/>  name: magento2<br/>  labels:<br/>    app: magento2<br/>spec:<br/>  ports:<br/>    - port: 80<br/>  selector:<br/>    app: magento2<br/>    tier: frontend<br/>  type: NodePort </span></pre><blockquote class="kc kd ke"><p id="7638" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">注意:为了简化，您可以将这段代码放在一个单独的文件中(命名为:magento2-service.yaml ),并在终端中编写以下命令:</p><p id="d9c4" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">$ ku bectl create-f magento 2-service . YAML</p><p id="6d59" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">它将为您公开magento2服务。</p></blockquote><p id="eab0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">默认情况下，Pod只能通过其在Kubernetes集群中的内部IP地址进行访问。因此，为了使Magento 2容器可以从Kubernetes虚拟网络外部访问，我们必须将Pod公开为Kubernetes服务。</p><p id="124d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要查看我们刚刚创建的服务。我们在命令行中编写以下命令:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="27df" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get services</span></pre><p id="07b2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的产出:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nl"><img src="../Images/fe3626e24a1d610a394f694e766673cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ewmRiN5L9nZC1_xKJpzRig.png"/></div></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">Note: magento2 TYPE is NodePort</figcaption></figure></div><div class="ab cl nm nn hc no" role="separator"><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr ns"/><span class="np bw bk nq nr"/></div><div class="hn ho hp hq hr"><h2 id="965d" class="mj lc hu bd ld mq mr ms lh mt mu mv ll jn mw mx lp jr my mz lt jv na nb lx nc dt translated"><strong class="ak">部署MySQL </strong></h2><p id="686a" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">它与部署Magento 2部署的过程相同。</p><p id="645d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">mysql-deployment.yaml文件如下所示:</p><figure class="ks kt ku kv fq iv"><div class="bz el l di"><div class="nh ni l"/></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">Note: The MySQL container mounts the PersistentVolume at /var/lib/mysql. The <code class="eh ne nf ng mf b"><strong class="ak">MYSQL_ROOT_PASSWORD</strong></code> environment variable sets the database password from the Secret. To create Secrets object that stores a piece of sensitive data, password we type this in the terminal: <code class="eh ne nf ng mf b">kubectl create secret generic mysql-pass --from-literal=password=MY_PASSWORD</code></figcaption></figure><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="a2c8" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl create -f mysql-deployment.yaml<br/></span></pre><p id="f10c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在让我们查看所有部署:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="234d" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get deployments</span></pre><p id="8743" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的产出:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div class="fe ff nt"><img src="../Images/ba198e1954d39120e657d7788df98da6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*J3HPjWF415zbowq8oedHpw.png"/></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">Note: now we have two deployments</figcaption></figure><p id="93d5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们看看所有的豆荚:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="62c2" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get pods</span></pre><p id="865d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输出:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nu"><img src="../Images/8ac15c5feac07952a937a83e4eb2e6de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/format:webp/1*9ohU3U_gnKKN4qt-jHcz4w.png"/></div></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">Note: now we have two pods</figcaption></figure><h2 id="b42c" class="mj lc hu bd ld mq mr ms lh mt mu mv ll jn mw mx lp jr my mz lt jv na nb lx nc dt translated"><strong class="ak">公开MySQL服务</strong></h2><p id="dd5e" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">我们已经用上面的代码在<strong class="je hv"> mysql-deployment.yaml </strong>文件<strong class="je hv">中公开了MySQL。</strong>要查看我们刚刚创建的服务:</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="1259" class="mj lc hu mf b fv mk ml l mm mn">$ kubectl get services</span></pre><p id="e5e1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的产出:</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div class="fe ff nv"><img src="../Images/2ded520102b13f6d59a42b913bc810c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*dtiBlk2001I4W08xMQBKHg.png"/></div></figure><p id="fc1e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">最后，我们的kubernetes用户界面(仪表板)将是这样的:</strong></p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/04d09d004e96684ef8974b11245336f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZE8CKvtKK8zSN7wwttVDJw.png"/></div></div><figcaption class="kw kx fg fe ff ky kz bd b be z ek">This is cool!</figcaption></figure><blockquote class="kc kd ke"><p id="137c" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated"><strong class="je hv">网络泄密</strong></p><p id="7420" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">minikube虚拟机通过一个主机专用的IP地址向主机系统公开，该地址可以通过minikube ip命令获得。任何NodePort类型的服务都可以通过该IP地址在NodePort上访问。要确定您的服务的节点端口，您可以使用kubectl命令，如下所示:</p><p id="6079" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">$ ku bectl get SERVICE $ SERVICE output = ' JSON path = " { . spec . ports[0]。节点端口}“”</p><p id="e4f9" class="jc jd ka je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated"><a class="ae kb" href="https://kubernetes.io/docs/getting-started-guides/minikube/" rel="noopener ugc nofollow" target="_blank"> — kubernetes.io </a></p></blockquote><h1 id="aadc" class="lb lc hu bd ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly dt translated"><strong class="ak">步骤3 : Magento 2设置</strong></h1><p id="8f9d" class="pw-post-body-paragraph jc jd hu je b jf lz jh ji jj ma jl jm jn mb jp jq jr mc jt ju jv md jx jy jz hn dt translated">下面将使用本地IP地址自动打开一个浏览器窗口，显示Magento 2设置页面。</p><pre class="ks kt ku kv fq me mf mg mh aw mi dt"><span id="1f95" class="mj lc hu mf b fv mk ml l mm mn">$ minikube service magento2</span></pre><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/01f782e2a8af711ac4eacd70072d7f23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDFuYDeDhr3KVuHNrlLiTw.png"/></div></div></figure><p id="73a4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">太神奇了！就这样！现在我们已经运行了Magento 2应用程序！</p><p id="23a5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的下一步是按下<strong class="je hv">:按下同意并设置&gt;恒星就绪检查&gt;下一个</strong></p><p id="63c5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们就要结束这一章了，看看下面几页，照着我做的去做，你就会成功了！</p><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/a5fb5ce6089028aa802659e665de8250.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zThQj3KdgsKjVvqmTK2QVw.png"/></div></div></figure><figure class="ks kt ku kv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/0186c084e3914e7bb7011b27fdc63168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C9YIKiA8YH1_BcBMUv7cqQ.png"/></div></div></figure><p id="9b40" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">女士们，先生们，现在我们已经到达了旅程的终点。</p><p id="1960" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">还可以阅读一下<a class="ae kb" href="https://kubernetes.io/docs/concepts/storage/persistent-volumes/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">执着卷</strong></a><strong class="je hv">【s】</strong>感谢<a class="ae kb" href="https://github.com/alexcheng1982" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">创作者</strong></a><strong class="je hv"/><a class="ae kb" href="https://hub.docker.com/r/alexcheng/magento2/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">alexcheng/magento 2</strong></a>的形象。如果您有任何问题，请在评论区发表或访问<a class="ae kb" href="http://slack.kubernetes.io/" rel="noopener ugc nofollow" target="_blank"> minikube社区</a>。</p><p id="de50" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我将发表另一篇博文，届时我将使用谷歌云——Kubernetes引擎，而不是minikube。请鼓掌，在medium &amp; Twitter<a class="ae kb" href="https://twitter.com/sphemalgas" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">@</strong>sphemalgas</a>上跟我来。</p><blockquote class="ny"><p id="4eea" class="nz oa hu bd ob oc od oe of og oh jz ek translated">我感谢你…..我出来了！</p></blockquote></div></div>    
</body>
</html>