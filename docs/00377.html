<html>
<head>
<title>Dynamic (but limited) Page Size with Laravel Pagination</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有Laravel分页的动态(但有限)页面大小</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/dynamic-but-limited-page-size-with-laravel-pagination-2826cab8b053?source=collection_archive---------8-----------------------#2018-01-12">https://medium.com/hackernoon/dynamic-but-limited-page-size-with-laravel-pagination-2826cab8b053?source=collection_archive---------8-----------------------#2018-01-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="53c1" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">让用户决定，但不要让用户滥用。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff jj"><img src="../Images/9fd88c8cf80c2d7db79ecdce30a9ce94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*Rcnbd7wUnIVKsNlBXKbl7w.png"/></div></figure><p id="cd19" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">Laravel使分页成为一个极其简单的过程，你只需在雄辩上调用<code class="eh kn ko kp kq b">paginate()</code>就可以了。今天我收到了一个功能请求，我必须允许前端团队决定页面的大小。这也是一个简单的任务，你只需要给它一个参数<code class="eh kn ko kp kq b">paginate($size);</code>。大概是这样的:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kr ks l"/></div></figure><p id="21f5" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">有时候这就是你所需要的，因为你的商业模式可以告诉你这个实体是否会无限增长。在这种情况下，我们按用户收费，一家公司不太可能购买100万用户。然而，我知道在接下来的几周内，我将会开发其他一些拥有数百万条记录的API，这意味着我不能允许页面大小超过一个合理的数量。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kr ks l"/></div></figure><p id="705b" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">太好了。现在我可以确保，如果有人将<code class="eh kn ko kp kq b">page_size</code>设为10亿，我在互联网上公开的API不会降低我们的服务质量。但是感觉还是不太好，因为每次我写一个<em class="kt">可分页</em>端点时，我都要记住设置这个。</p><h2 id="381d" class="ku kv hu bd kw kx ky kz la lb lc ld le ka lf lg lh ke li lj lk ki ll lm ln lo dt translated">可分页特征</h2><p id="4f49" class="pw-post-body-paragraph jr js hu jt b ju lp iv jw jx lq iy jz ka lr kc kd ke ls kg kh ki lt kk kl km hn dt translated">在幕后，Laravel在雄辩模型上默认使用<code class="eh kn ko kp kq b">getPerPage</code>，以防没有提供特定的页面大小。默认情况下，Laravel每页附带<code class="eh kn ko kp kq b">15</code>。有了一个<em class="kt">可分页的</em>特征，我们可以覆盖该方法并在模型上实现它，该模型应该允许<em class="kt">请求者</em>告诉我们他们想要每页多少项，同时验证他们是否请求太多。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kr ks l"/></div></figure><p id="b76d" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">只要在你的模型上使用这个特性，那么<code class="eh kn ko kp kq b">Controller</code>就可以成为一个小的<code class="eh kn ko kp kq b">paginate()</code>呼叫。这是一个非常简单和小的东西，但是如果你希望编写这种公共API，它会非常强大和方便。</p></div></div>    
</body>
</html>