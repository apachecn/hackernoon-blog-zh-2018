<html>
<head>
<title>The Gravity of Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">库伯内特斯的引力</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-gravity-of-kubernetes-33126a96ee23?source=collection_archive---------3-----------------------#2018-01-13">https://medium.com/hackernoon/the-gravity-of-kubernetes-33126a96ee23?source=collection_archive---------3-----------------------#2018-01-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="0f97" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">Kubernetes已经成为部署新的分布式应用程序的标准方式。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/7ca2a10bd15191f39af4f2534384f430.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7xQwZ3YwnY27gkU_.png"/></div></div></figure><p id="ab6b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><a class="ae kr" href="https://www.softwaredaily.com/#/post/5a5a2387f43c8d000457a110" rel="noopener ugc nofollow" target="_blank"> <em class="ks">要收听本集的播客版本，请每天在软件上查看。</em>T3】</a></p><p id="a590" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在可预见的未来，大多数新的互联网企业将会利用<a class="ae kr" href="https://hackernoon.com/tagged/kubernetes" rel="noopener ugc nofollow" target="_blank">的Kubernetes </a>(无论他们是否意识到这一点)。许多旧的应用程序也在向Kubernetes迁移。</p><p id="c526" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在Kubernetes之前，没有围绕特定分布式系统平台的标准化。就像Linux成为单个节点的标准服务器端操作系统一样，Kubernetes已经成为编排应用程序中所有节点的标准方式。</p><p id="037f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">有了Kubernetes，分布式系统工具可以产生网络效应。每当有人为Kubernetes构建一个新工具时，它都会使所有其他工具变得更好。它进一步巩固了Kubernetes的标准。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff kt"><img src="../Images/bd3bdc8f6d53947004808e55d7576d01.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/0*LzWmGIS_1Cyh6WjB.png"/></div></figure><p id="3087" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">谷歌、微软、亚马逊和IBM都有Kubernetes即服务产品，这使得在主要云提供商之间转移基础设施变得更加容易。我们可能会看到数字海洋、Heroku和长尾云提供商最终提供托管的Kubernetes。</p><p id="0091" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在这篇社论中，我探讨了以下问题:</p><ul class=""><li id="cb7e" class="ku kv hu jx b jy jz kb kc ke kw ki kx km ky kq kz la lb lc dt translated">为什么会这样？</li><li id="04e1" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">对开发者有什么启示？</li><li id="3575" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">云提供商受到了怎样的影响？</li><li id="9bc9" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">在Kubernetes标准化的世界里，有哪些新的商业模式是可能的？</li></ul><h1 id="afed" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">软件标准</h1><p id="cf30" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">标准化的软件平台有好有坏。</p><p id="a20f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">标准允许开发者对他们的软件将如何运行有所期望。如果一个开发者为一个标准化的平台开发一些东西，他们可以对这个软件的潜在市场做出明智的估计。</p><p id="ce80" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你用JavaScript写一个程序，你知道它会在每个人的浏览器中运行。如果你为iOS开发了一个游戏，你知道每个有iPhone的人都可以下载它。如果您在。你知道有一个很大的有内存问题的Windows开发者社区可以购买你的软件。</p><p id="0f44" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">标准化的<em class="ks">专有</em>平台可以为平台提供商带来巨大的利润回报。1995年，Windows是一个非常好的平台，微软可以以100美元的价格出售一张装在纸板箱中的CD。2018年，iPhone太好了，苹果可以从其平台上的所有应用销售额中拿走30%。</p><p id="3846" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">专有标准导致碎片化。</p><p id="1d7b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你的iPhone应用程序无法在我的Kindle Fire上运行。我不能在Facebook Messenger上使用你的Snapchat增强现实贴纸。我最喜欢的数字音频工作站只能在Windows上运行——所以我不得不随身携带一台Windows电脑来制作音乐。</p><p id="19c7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当开发人员看到这种分裂时，他们会抱怨。他们想象贪婪的资本家，他们以牺牲软件质量为代价来赚钱。开发人员会想，“为什么我们不能好好相处呢？为什么我们不能拥有开放和自由的事物？”</p><p id="73eb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">开发者认为，“我们不需要专有标准。我们可以让<em class="ks">开放</em>标准。”</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mf"><img src="../Images/0de98dc45e572b527ed78531fc72b028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/0*qwI2D1oFl3P2JHq8.png"/></div></figure><p id="52a6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Apache的增长，LAMP (Linux、Apache、MySQL、PHP)堆栈的一部分</p><p id="6ba5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Linux就是这样。如今，新的服务器端应用程序大多是在Linux中。曾几何时，这是有争议的(见上图的最左边)。</p><p id="25ba" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">最近，我们看到了Docker的一个更新的开放标准。Docker为我们提供了一种开放、标准化的方式来打包、部署和分发单个节点。这非常有价值！但是对于Docker解决的所有大问题，它强调了一个新问题——我们应该如何将这些节点编排在一起？</p><p id="67c0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">毕竟，您的应用程序不仅仅是一个节点。您知道您想要部署一个Docker容器——但是您的容器是如何相互通信的呢？您如何扩展这些容器的实例？您如何在容器实例之间路由流量？</p><h1 id="842f" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">容器编排</h1><p id="080e" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">在Docker流行起来之后，出现了一系列开源项目和专有平台来解决容器编排的问题。</p><p id="47f0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Mesos、Docker Swarm和Kubernetes都为管理容器提供了不同的抽象集。Amazon ECS提供了一个专有的托管服务，负责为AWS用户安装和扩展Docker容器。</p><p id="443a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">一些开发人员没有采用任何编排平台，而是使用BASH、Puppet、Chef和其他工具来编写部署脚本。</p><p id="098a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">无论开发人员是通过使用编排平台还是脚本来部署他们的容器，Docker都加速了开发，并使开发人员和操作人员之间更加和谐。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/cb11a3a6d2697afce7014d0843f2a9ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/0*FflFI5GHu0pozdg1.png"/></div></figure><p id="977d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">随着越来越多的开发人员使用Docker部署容器，编排平台的重要性变得越来越明显。<a class="ae kr" href="https://youtu.be/gCQfFXSHSxw?t=611" rel="noopener ugc nofollow" target="_blank">容器对于分布式系统就像对象对于面向对象的程序一样重要</a>。每个人都想使用容器平台，但这些平台之间存在竞争，很难看出哪一个会胜出——或者这将是一场长达几十年的斗争，就像iOS与Android的斗争一样。</p><p id="29b0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">不同容器编排平台之间的斗争导致了分裂——不是因为任何流行的编排框架都是专有的(Swarm、Kubernetes和Mesos都是开源的),而是因为每个容器编排社区都在自己的系统上投入了大量资金。</p><p id="ecf1" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">因此，从2013年到2016年，Docker power用户中存在一些焦虑。选择容器编排框架是一个巨大的赌注——如果你选择了错误的编排系统，这就像开了一家电影商店，选择了HD DVD而不是蓝光。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mh"><img src="../Images/2b046ef333d798007422441878c60172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JrgnRNku68-NHmdR.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">These pictures of container ships falling over never get old. Image: Huffington Post</figcaption></figure><p id="257d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">容器编排者之间的战争感觉像是赢家通吃的事情。</p><p id="4c91" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">就像在任何一场战争中一样，有一场迷雾很难看透。当我在报道容器编排大战时，我和容器编排专家一起录制了一个又一个<a class="ae kr" href="https://softwareengineeringdaily.com/tag/containers/" rel="noopener ugc nofollow" target="_blank">播客，在播客中我会问一些形式的问题，“那么，哪个容器编排系统会赢呢？”</a></p><p id="cddc" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我一直这样做，直到<a class="ae kr" href="https://softwareengineeringdaily.com/2016/07/06/schedulers-with-adrian-cockcroft/" rel="noopener ugc nofollow" target="_blank">一个我尊敬的人</a>告诉我，询问谁将“赢得编排之战”并不是一个比评估编排者之间的技术权衡更有趣的问题。</p><p id="a4b5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">回过头来看，我后悔相信了容器编制者之间的战争。</p><p id="8c19" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">随着关于容器管弦乐队的辩论激烈进行，房间里最聪明的人大多在进行冷静的科学讨论——即使像我这样的记者变得激动，认为这是一个关于部落主义的故事。</p><p id="5da2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">容器编排者之间的冲突与部落主义无关——他们更多的是关于意见的分歧和开发人员的人机工程学。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/54ebaf9ead76b398ea94f0c718e9cf6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/0*0hsP2p-pTtYNwdV2.png"/></div></figure><p id="fd7a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">好吧，也许容器编排之战不仅仅是关于观点的分歧。这一领域有大把的钱可以赚。我们正在讨论与价值数十亿美元的传统组织(银行、电信和保险公司)签订合同，这些组织正在向云发展。</p><p id="af3e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你从事的是帮助电信公司走向成功平台的业务，那么生意会很好。如果你支持错误的平台，你最终会得到满满一仓库的HD-DVD。</p><p id="7706" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">冲突最严重的时候是在2016年底，当时有<a class="ae kr" href="https://softwareengineeringdaily.com/2016/10/03/docker-fork-with-alex-williams-and-joab-jackson/" rel="noopener ugc nofollow" target="_blank">关于Docker潜在分叉的传言，以便Docker公司可以改变Docker标准，以更好地适应他们的容器编排系统Docker Swarm</a>——但即使在那个时候，乐观主义者也有道理。</p><p id="8da0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">创造性破坏是痛苦的，但它是进步的标志——在争夺容器编排主导权的斗争中，有大量的创造性破坏。</p><p id="266e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当2016年底尘埃落定时，Kubernetes显然是赢家。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mn"><img src="../Images/fc1e87de5ad1e07afa6310c5d1220975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/0*6UVTKJhwCidusF3V.png"/></div></figure><p id="dbe7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如今，随着Kubernetes成为安全的选择，首席信息官们对在他们的企业中采用容器编排感到更加放心——这使得供应商们对投资Kubernetes特定的工具以销售给这些首席信息官们感到更加放心。</p><p id="f02f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这就把我们带到了现在:</p><ul class=""><li id="ae39" class="ku kv hu jx b jy jz kb kc ke kw ki kx km ky kq kz la lb lc dt translated">开源开发者正朝着同一个方向前进，对构建什么感到兴奋。</li><li id="b6c1" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">主要企业(新老企业)都在购买Kubernetes。</li><li id="a200" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">主要的云提供商已经准备好了低成本的Kubernetes即服务。</li><li id="790e" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">监控、日志记录、安全和法规遵从性软件的众多供应商兴奋不已，因为他们必须集成的底层软件堆栈变得更加可预测。</li></ul><h1 id="4489" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">走向多云</h1><p id="83cf" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">今天，最赚钱的专有后端开发基础设施提供商是Amazon Web Services。开发人员不会怨恨AWS，因为AWS是创新的、强大的、廉价的。如果你付给AWS很多钱，那可能意味着你的生意做得很好。</p><p id="1206" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">有了AWS，开发人员就不会像90年代的主流专有平台那样受到限制。但是有一些局限。一旦你深深嵌入AWS生态系统，使用像DynamoDB、亚马逊弹性容器服务或亚马逊Kinesis这样的服务，离开亚马逊就成了一项艰巨的任务。</p><p id="a8e8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">随着Kubernetes为基础设施创建一个开放的公共层，理论上可以将您的Kubernetes集群从一个云提供商“提升并转移”到另一个云提供商。</p><p id="291e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你决定提升和转移你的应用程序，你将不得不重写你的应用程序的一部分，以停止使用亚马逊特定的服务(如亚马逊S3)。例如，如果您想要一个可以在任何云上运行的S3替代程序，那么您可以使用<a class="ae kr" href="https://rook.io/" rel="noopener ugc nofollow" target="_blank"> Rook </a>配置一个Kubernetes集群，并开始使用与您在S3上存储对象相同的API在Rook上存储对象。</p><p id="ce26" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这是一个很好的选择，但我还没有听说过任何人真的将他们的应用程序从云迁移到<a class="ae kr" href="https://softwareengineeringdaily.com/2016/05/17/dropboxs-magic-pocket-james-cowling/" rel="noopener ugc nofollow" target="_blank">，除了Dropbox </a>，他们的迁移是<a class="ae kr" href="https://www.wired.com/2016/03/epic-story-dropboxs-exodus-amazon-cloud-empire/" rel="noopener ugc nofollow" target="_blank">如此壮观，花了两年半的时间</a>。</p><p id="bd42" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当然，除了Dropbox，还有人在亚马逊S3上花了这么多钱，以至于他们会考虑建立自己的对象商店，但这将是一个巨大的努力来完成这样的迁移。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/b1f47c043fe5f3fc70bf569c2755897c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/0*5OnHS84CUz8R46Xg.png"/></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Kubernetes can be used for lifting and shifting — but more likely will be used to have familiar operating layer in different clouds</figcaption></figure><p id="2c09" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Kubernetes可能不会很快成为大范围提升和移动的工具。更有可能的情况是，Kubernetes将成为一个无处不在的控制平面，企业将在多个云上使用。</p><p id="e0bc" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">NodeJS是一个有用的类比。为什么人们喜欢在他们的服务器端应用程序中使用NodeJS？不一定是因为Node是最快的web服务器。这是因为人们喜欢在客户端和服务器端使用相同的语言。就像NodeJS可以让你在客户机和服务器代码之间切换而不必切换语言一样，Kubernetes可以让你在云之间切换而不必改变你对操作的看法。</p><p id="7d0b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在每个云上，您将有一些在Kubernetes上运行的定制应用程序代码，它们与该云提供的托管服务进行交互。</p><p id="c620" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">公司希望成为多云—部分是为了灾难恢复，但也因为在不同的云上访问托管服务有实际的好处。</p><p id="022e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">一种新兴的模式是将用户流量的基础设施分为AWS和数据工程的Google Cloud。使用这种模式的一家公司是<a class="ae kr" href="https://softwareengineeringdaily.com/2017/11/28/thumbtack-infrastructure-with-nate-kupp/" rel="noopener ugc nofollow" target="_blank">图钉</a>:</p><p id="df24" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">在图钉，AWS上的生产基础设施服务于用户请求。发生的事务日志从AWS推送到Google Cloud，在那里进行数据工程。在Google Cloud上，交易记录在Cloud PubSub中排队，这是一种消息排队服务。这些事务从队列中取出并存储在BigQuery中，big query是一个用于存储和查询大量数据的系统。<br/> <br/> BigQuery被用作编排机器学习作业时从中提取的数据湖。这些机器学习作业运行在Cloud Dataproc中，这是一个运行Apache Spark的托管服务。在Google Cloud中训练一个模型后，该模型被部署在AWS端，在那里它为用户流量服务。在谷歌云方面，这些不同的托管服务的编排是由Apache Airflow完成的，这是一个开源工具，是Thumbtack在谷歌云上进行自我管理的少数基础设施之一。</em></p><p id="4c53" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">今天，Thumbtack使用AWS来服务用户请求，使用Google Cloud在PubSub中进行数据工程和排队。Thumbtack在谷歌中训练其机器学习模型，并将其部署到AWS。</p><p id="cbaa" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这就是今天的情况。Thumbtack可能最终也会将谷歌云用于面向用户的服务。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/0789bb6158a7ed683ccdb4c2d6f80ae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/0*W7PG52mXdwFNvDJV.png"/></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">A multi-cloud data engineering pipeline from a Japanese company</figcaption></figure><p id="a5af" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">越来越多的公司将逐渐转向多个云——其中一些公司将在每个云上管理一个独特的Kubernetes集群。</p><p id="9f70" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">您可能在Google上有一个GKE Kubernetes集群来协调BigQuery、Cloud PubSub和Google Cloud ML之间的工作负载，您可能有一个亚马逊EKS集群来协调DynamoDB、亚马逊Aurora和您的生产NodeJS应用程序之间的工作负载。</p><p id="d75e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">云提供商不是可替代的商品。不同云提供的服务将变得越来越奇特和不同。企业将从访问不同云提供商的不同服务中受益。</p><h1 id="cccd" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">分布式系统分布</h1><p id="5c08" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">像Google BigQuery和AWS Redshift这样的服务很受欢迎，因为它们通过一个简单的API为您提供了一个强大的、可伸缩的、多节点的工具。开发人员通常选择这些托管服务，因为它们非常易于使用。</p><p id="57d9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你看不到这些类型的单节点付费工具。我不为NodeJS、React或Ruby on Rails付费。</p><p id="452e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">用于单个节点的工具比用于分布式系统的工具更容易操作。跨服务器部署Hadoop比在我的笔记本电脑上运行Ruby on Rails应用程序更难。有了Kubernetes，这种情况将会改变。</p><p id="21f6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果您正在使用Kubernetes，您可以使用一个名为Helm的分布式系统包管理器。这就像Kubernetes应用程序的npm。如果您正在使用Kubernetes，您可以使用Helm轻松安装一个复杂的多节点应用程序，无论您在哪个云提供商上。</p><p id="fc77" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">以下是对Helm的描述:</p><blockquote class="mo mp mq"><p id="d8a2" class="jv jw ks jx b jy jz iv ka kb kc iy kd mr kf kg kh ms kj kk kl mt kn ko kp kq hn dt translated">Helm帮助您管理Kubernetes应用程序——Helm Charts帮助您定义、安装和升级最复杂的Kubernetes应用程序。图表易于创建、版本化、共享和发布——所以开始使用Helm，停止复制粘贴的疯狂行为。</p></blockquote><p id="7042" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">分布式系统的包管理器。太神奇了！来看看我能装什么吧。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mu"><img src="../Images/0292117721e7ae95ebf2bce8236217cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YfsEPukj5PL4xzyM.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Not pictured: WordPress, Jenkins, Kafka</figcaption></figure><p id="c1e5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">分布式系统很难建立。问问那些建立了自己的Kafka集群的人。Helm将使安装Kafka像在MacBook上安装新版Photoshop一样简单。你将能够在<em class="ks">的任何云</em>上做到这一点。</p><p id="e5f5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在Helm之前，最接近分布式系统包管理器的东西(据我所知)是你在<a class="ae kr" href="https://aws.amazon.com/marketplace" rel="noopener ugc nofollow" target="_blank"> AWS </a>或<a class="ae kr" href="https://azuremarketplace.microsoft.com/en-us/marketplace/" rel="noopener ugc nofollow" target="_blank"> Azure </a>或<a class="ae kr" href="https://cloud.google.com/launcher/" rel="noopener ugc nofollow" target="_blank"> Google Cloud Launcher </a>上找到的市场。在这里，我们再次看到专有软件是如何导致分裂的。在Helm之前，没有标准的、与平台无关的一键安装Kafka的方式。</p><p id="a875" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你可以想办法在AWS，Google，或者Azure上一键安装Kafka。但是这些安装中的每一个都必须为特定的云提供商独立编写。而要在数字海洋上安装Kafka，需要遵循<a class="ae kr" href="https://www.digitalocean.com/community/tutorials/how-to-install-apache-kafka-on-ubuntu-14-04" rel="noopener ugc nofollow" target="_blank">一个10步教程</a>。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mv"><img src="../Images/9dd096400526268c74ed1ece2b698327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8W4s0FCz2jdEil7S.png"/></div></div></figure><p id="b3ec" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Helm代表一个跨平台系统，用于在任何Kubernetes实例上分发多节点软件。您可以在任何云提供商或您自己的硬件上使用Helm安装的应用程序。你可以很容易地安装Apache Spark或Cassandra——众所周知，这些系统很难安装和操作。</p><p id="47b9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Helm是Kubernetes的软件包经理——但它看起来也像是Kubernetes应用商店的开端。有了应用商店，你可以为Kubernetes出售软件。</p><p id="3045" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你能卖什么样的软件？</p><p id="573d" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你可以销售分布式系统平台的企业发行版，比如Cloudera Hadoop、Databricks Spark和Confluent Kafka。像Prometheus这样的新型监控系统和Cassandra这样难以安装的多节点数据库。</p><p id="9822" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">也许你甚至可以像Zendesk一样销售更高级的消费级软件。</p><p id="78be" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">自托管Zendesk的想法听起来很疯狂，但有人<em class="ks">可以</em>构建它，并以专有二进制的形式出售，以固定费用而不是订阅的成本。如果我卖给你一个99美元的Zendesk-for-Kubernetes，你可以很容易地在AWS上的Kubernetes集群上运行它，你最终会在支持票务软件上节省很多钱。</p><p id="a0ef" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">企业经常运行自己的WordPress来管理公司博客。Zendesk的软件比WordPress复杂吗？我不这么认为——但是比起管理自己的博客软件，企业更害怕管理自己的帮助台软件。</p><p id="4ba6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我经营着一家相当小的企业，但我订阅了许多不同的软件即服务工具。昂贵的WordPress主机，昂贵的广告销售CRM，时事通讯的MailChimp。我为这些服务付费是因为它们超级可靠和安全，而且它们是复杂的多节点应用程序。我不想主持我自己的。我不想支持他们。当我的简讯发送失败时，我不想负责技术故障排除。<a class="ae kr" href="https://softwareengineeringdaily.com/2017/11/20/run-less-software-with-rich-archbold/" rel="noopener ugc nofollow" target="_blank">我想少跑软件</a>。</p><p id="31b6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">相比之下，我不怕我的单节点软件要坏了。</p><p id="535e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我从单个节点使用的软件往往要便宜得多，因为我不必将它作为“服务”来购买。我用来写音乐的软件有一倍的固定成本。Photoshop有一次性固定成本。我支付运行电脑的电费，但除此之外，我没有运行Photoshop的持续资本支出。</p><p id="ccc6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当多节点应用程序与单节点应用程序一样可靠时，我们将看到定价模式的变化。</p><p id="a1aa" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">也许有一天我会买一个Zendesk-for-Kubernetes。Zendesk-for-Kubernetes将为我提供我从服务台获得的一切——它将启动一个电子邮件服务器，它将为我提供一个管理票证的网络前端。如果出现任何问题，我可以在需要时支付支持费用。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mw"><img src="../Images/be42b367938cd915bc8e73ad16917d1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lmC8T3q7MutBM2dU.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Zendesk is a fantastic service — but it would be cool if it had a fixed pricing model</figcaption></figure><h1 id="a436" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">元粒子</h1><p id="2b0b" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">有了Kubernetes，部署和管理分布式应用程序变得更加容易。有了Helm，将这些应用程序分发给其他用户变得更加容易。但是开发分布式系统仍然非常困难。</p><p id="fed0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这是Brendan Burns最近的CloudNative Con/KubeCon主题演讲的焦点，名为<a class="ae kr" href="https://www.youtube.com/watch?v=gCQfFXSHSxw" rel="noopener ugc nofollow" target="_blank">“这项工作太难了:构建新的工具、模式和范例来实现分布式系统开发的民主化”</a>。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mx"><img src="../Images/ec87870fc42aae236ac52e3e15b92a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*FS0Dq3SEQMCHjBJT.png"/></div></div></figure><p id="470c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在他的演讲中，Brendan展示了一个叫做Metaparticle的项目。Metaparticle是云原生开发的标准库，目标是使分布式系统民主化。在《T2》对超粒子的介绍中，布兰登写道:</p><blockquote class="mo mp mq"><p id="798c" class="jv jw ks jx b jy jz iv ka kb kc iy kd mr kf kg kh ms kj kk kl mt kn ko kp kq hn dt translated">云原生开发是定制的、复杂的，并且仅限于少数专业开发人员。Metaparticle通过引入一组熟悉的编程语言实用程序来改变这种情况，这些实用程序满足了开发人员的需求，使他们能够开始使用熟悉的语言功能开发云原生系统。</p><p id="77fb" class="jv jw ks jx b jy jz iv ka kb kc iy kd mr kf kg kh ms kj kk kl mt kn ko kp kq hn dt translated">Metaparticle构建在Kubernetes原语之上，也使分布式同步变得更加容易。它为锁定和领导者选举提供了独立于语言的模块，作为熟悉的编程语言中易于使用的抽象。</p></blockquote><p id="04eb" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">经过几十年的分布式系统研究和应用，关于我们如何构建这些系统的模式已经出现。我们需要一种锁定变量的方法，这样两个节点就不能以不确定的方式写入该变量。我们需要一种方法来进行主节点选举，这样，如果主节点死亡，其他节点可以选择一个新的节点来编排系统。</p><p id="4a0f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">今天，我们使用像etcd和Zookeeper这样的工具来帮助我们选择和锁定主人——而且这些工具需要成本。</p><p id="a7a1" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Brendan以Zookeeper为例说明了这一点，Hadoop和Kafka都使用它来进行主选举。动物园管理员需要花费大量的时间和精力来学习如何操作。在Hadoop和Kafka的构建过程中，这些项目的创始工程师将他们的系统设计为与Zookeeper一起维护一个主节点。</p><p id="4778" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果我正在编写一个分布式mapreduce系统，我希望避免考虑节点故障和竞争条件。Brendan的想法是将这些问题推进到一个标准库中——这样下一个对多节点应用程序有新想法的开发人员就更容易了。</p><p id="9428" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">重要的元点:元粒子是在假设你在Kubernetes上的情况下建立的。这是一个语言级的抽象，建立在对底层(分布式)操作系统的假设之上——这又一次将我们带回了标准。如果<strong class="jx hv">每个人</strong>都在同一个分布式操作系统上，我们可以对我们项目的下游用户做<em class="ks">大</em>假设。</p><p id="f703" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这就是为什么我的头脑被Kubernetes吹乱了。它是跨异构系统世界的一层标准。</p><h1 id="93c2" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">无服务器工作负载</h1><p id="0f76" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">功能即服务(通常称为“无服务器”功能)是一种强大、廉价的抽象，开发人员可以在Kubernetes之上与Kubernetes一起使用，在某些情况下可以完全代替Kubernetes。</p><p id="c4a9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">让我们快速回顾一下无服务器应用程序的现代景观，然后考虑无服务器和Kubernetes之间的关系。</p><p id="59b7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><a class="ae kr" href="https://www.softwaredaily.com/#/post/5a251d5f0cbcbe0004c932e1" rel="noopener ugc nofollow" target="_blank">功能即服务快速回顾</a>:</p><p id="01df" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">功能即服务是无需可寻址服务器即可运行的可部署功能。</em></p><p id="7555" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">开发人员只需一次调用，即可部署、执行和扩展服务。在调用无服务器函数之前，您的函数不会在任何地方运行——因此，除了存储原始代码的数据库之外，您不会耗尽其他资源。当您调用一个函数作为服务时，您的集群将负责调度和运行该函数。</em></p><p id="3afd" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">您不必担心启动一台新机器并对其进行监控，也不必担心在机器闲置时停止运转。你只要告诉集群你想运行一个函数，集群就执行它并返回结果。</em></p><p id="90a9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当您“部署”一个无服务器功能时，实际上并没有部署功能代码。您的代码以纯文本的形式存储在数据库中。当您调用该函数时，您的代码将从数据库条目中取出，加载到Docker容器中并执行。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff my"><img src="../Images/d3c1af6a2a910ba34d31ab0f85091848.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GGHJQMc7YcOZO40x.png"/></div></div><figcaption class="mi mj fg fe ff mk ml bd b be z ek">Diagram from <a class="ae kr" rel="noopener" href="/openwhisk/uncovering-the-magic-how-serverless-platforms-really-work-3cb127b05f71">How Serverless Platforms Work</a></figcaption></figure><p id="2c1f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">AWS Lambda在2014年率先提出了“功能即服务”的理念。从那以后，开发人员一直在思考各种各样的用例。关于开发者如何使用无服务器的完整列表，有一个由CNCF无服务器工作组创建的<a class="ae kr" href="https://docs.google.com/document/d/1UjW8bt5O8QBgQRILJVKZJej_IuNnxl20AJu9wA8wcdI/edit#heading=h.yiaul8is1ki" rel="noopener ugc nofollow" target="_blank">共享Google文档(在本文发表时有34页)</a>。</p><p id="5421" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">从我每天在软件工程上的谈话来看，这些功能即服务至少展示了两个清晰的应用:</p><ul class=""><li id="f6b5" class="ku kv hu jx b jy jz kb kc ke kw ki kx km ky kq kz la lb lc dt translated">能够快速、廉价地扩展以应对突发工作负载的计算(例如，Yubl的社交媒体可扩展性案例研究)</li><li id="18f3" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">具有可变工作负载频率的事件驱动“粘合代码”(例如，具有各种数据库使用者的事件源模型)</li></ul><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mh"><img src="../Images/42f55ada4283d1a859029c054b4c0b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*81Tj9sYkvNf17-_G.png"/></div></div></figure><p id="b9aa" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">为了创建一个FaaS平台，云提供商提供了一个称为调用者的Docker容器集群。这些调用者等待调度的代码块进入。当您发出执行程式码的要求时，有一段时间必须等待程式码载入至叫用程式并执行。这种花在等待上的时间就是“冷启动”问题。</p><p id="61f6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果您决定在FaaS上运行应用程序的一部分，冷启动问题就是您所做的权衡之一。不需要为不做任何工作的服务器的正常运行时间付费，但是当您想要调用函数时，您必须等待将代码调度到调用者上。</p><p id="3cab" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在AWS上，对于AWS Lambda的任何请求都有指定的调用程序。在Microsoft Azure上，有为Azure函数请求指定的调用程序。在Google Cloud上，有一些为Google Cloud函数保留的调用程序。</p><p id="1800" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">对于大多数开发人员来说，使用AWS、微软、谷歌或IBM的“功能即服务”平台就可以了。成本低，并且对于大多数应用来说，冷起动问题不成问题。但一些开发者会希望得到更低的成本。或者，他们可能希望编写自己的调度程序，以定义如何将代码调度到调用者容器上。这些开发者可以推出自己的无服务器平台。</p><p id="4e21" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">像Kubernetes这样的开源FaaS项目允许您在Kubernetes之上调配自己的无服务器集群。您可以定义自己的调用程序池。可以确定如何根据作业计划容器。您可以决定如何解决自己集群的冷启动问题。</p><p id="bf30" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Kubernetes的开源FaaS只是一种类型的资源调度程序。它们只是我们将在Kubernetes之上看到的其他自定义计划程序的预览。开发人员总是构建新的调度程序，以便在这些调度程序的基础上构建更高效的服务。</p><p id="be16" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">那么，在Kubernetes的基础上还将构建哪些类型的调度程序呢？正如他们所说，未来已经到来，但它只能作为AWS托管服务提供。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mz"><img src="../Images/61ea70ef747a4bc689cff8c620f31aeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3Lm707-mv0THbIpX.png"/></div></div></figure><p id="01a0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">AWS推出了一项名为Amazon Aurora无服务器的新服务，这是一个自动上下扩展存储和计算的数据库。来自<a class="ae kr" href="https://aws.amazon.com/blogs/aws/in-the-works-amazon-aurora-serverless/" rel="noopener ugc nofollow" target="_blank">杰夫·巴尔关于AWS无服务器Aurora </a>的帖子:</p><p id="5e1f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">创建Aurora数据库实例时，您可以选择所需的实例大小，并选择使用读取副本来增加读取吞吐量。如果您的处理需求或查询率发生变化，您可以根据需要选择修改实例大小或改变读取副本的数量。这种模型在工作负载是可预测的、请求速率和处理要求有限制的环境中非常适用。</em></p><p id="911f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">在某些情况下，工作负载可能是间歇性的和/或不可预测的，突发的请求可能每天或每周只持续几分钟或几小时。Flash销售、不频繁或一次性的活动、在线游戏、报告工作负载(每小时或每天)、开发/测试和全新的应用程序都符合要求。安排合适的容量可能需要大量的工作；在稳定状态的基础上支付可能是不明智的。</em></p><p id="3340" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="ks">因为存储和处理是分开的，所以您可以一直缩减到零，并且只需支付存储费用。我认为这真的很酷，我希望它能导致新类型的即时启动、瞬时应用程序的产生。扩展发生在几秒钟内，建立在一个“温暖的”资源池之上，这些资源迫不及待地想要满足您的请求。</em></p><p id="24cc" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们对AWS可以构建这样的东西并不感到惊讶，但很难想象它如何成为一个开源项目——直到Kubernetes。这是一种随机开发人员可以在Kubernetes上构建的系统。</p><p id="7924" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果您想在Kubernetes上构建自己的无服务器数据库，您需要解决许多调度问题。网络、存储、日志、缓冲和缓存需要不同的资源层。对于这些不同的资源层中的每一层，您都需要定义如何调度资源以响应需求。</p><p id="30ac" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">就像Kubeless为小部分功能代码提供了一个调度程序一样，我们可能会看到其他定制的调度程序，人们用它们作为更大应用程序的构建模块。</p><p id="9e4b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">一旦你真正建立了你的无服务器数据库，也许你可以在Helm app store上以99美元的价格一次性购买。</p><h1 id="adaf" class="li lj hu bd lk ll lm ln lo lp lq lr ls ja lt jb lu jd lv je lw jg lx jh ly lz dt translated">结论</h1><p id="7aff" class="pw-post-body-paragraph jv jw hu jx b jy ma iv ka kb mb iy kd ke mc kg kh ki md kk kl km me ko kp kq hn dt translated">我希望你通过一些Kubernetes的历史和对未来的猜测享受这次旅行。</p><p id="b461" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">随着2018年的开始，以下是我们今年想要探索的一些领域:</p><ul class=""><li id="8a0a" class="ku kv hu jx b jy jz kb kc ke kw ki kx km ky kq kz la lb lc dt translated"><strong class="jx hv">人们如何管理机器学习模型在Kubernetes上的部署？我们和马特·泽勒一起做了一个节目，他讨论了这个问题，听起来很复杂。</strong></li><li id="5a94" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">Kubernetes用于自动驾驶汽车吗？如果是，您是否部署一个集群来管理整个汽车？</li><li id="6f33" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">Kubernetes物联网部署看起来像什么？在一组网络连接时断时续的设备上运行Kubernetes有意义吗？</li><li id="2fbc" class="ku kv hu jx b jy ld kb le ke lf ki lg km lh kq kz la lb lc dt translated">Kubernetes将构建哪些新的基础设施产品和开发工具？有哪些新的商机？</li></ul><p id="dda5" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Kubernetes是构建现代应用程序后端的一个极好的工具——但它仍然只是一个工具。</p><p id="bab6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果Kubernetes完成了它的使命，它最终将淡出人们的视线。总有一天，我们会像谈论编译器或操作系统内核一样谈论Kubernetes。Kubernetes将是较低级的管道，不在一般应用程序开发人员的权限之内。</p><p id="2811" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">但在那之前，我们会继续报道。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="na nb l"/></div></figure></div></div>    
</body>
</html>