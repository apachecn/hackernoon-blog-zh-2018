<html>
<head>
<title>To close or not to close</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">关还是不关</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/to-close-or-not-to-close-4365d24853ff?source=collection_archive---------4-----------------------#2018-01-17">https://medium.com/hackernoon/to-close-or-not-to-close-4365d24853ff?source=collection_archive---------4-----------------------#2018-01-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="e0b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你有没有想过像<code class="eh jp jq jr js b">&lt;br /&gt;</code>一样“关闭”一个<code class="eh jp jq jr js b">br</code>或<code class="eh jp jq jr js b">input</code>标签更好，或者在HTML5中只写<code class="eh jp jq jr js b">&lt;br&gt;</code>更好？或者为什么写<code class="eh jp jq jr js b">&lt;script src="script.js" /&gt;</code>不正确？我也是，我在这个问题上的发现比我预期的要有趣得多(如果出于某种奇怪的原因，你觉得这类东西有趣的话)。</p><p id="c7f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你对整个故事不感兴趣，直接跳到有效性部分就能得到你的答案。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="fe ff jt"><img src="../Images/8463d22f6615f5f73260d3ee89c97b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ol1sVac_1T5HvVTyV1kULw.jpeg"/></div></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Random Photo © Matias Meno</figcaption></figure><h1 id="f82d" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">空元素</h1><p id="613c" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">Void元素是一种特殊的元素，它不能包含内容。这与其他元素有很大的不同，即<em class="lm">可以为空，但也可以包含其他元素和文本(如<code class="eh jp jq jr js b">&lt;div&gt;</code> s)。</em></p><p id="a0ea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最常见的空隙元素有:</p><p id="371b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jp jq jr js b">&lt;br&gt;</code><code class="eh jp jq jr js b">&lt;hr&gt;</code><code class="eh jp jq jr js b">&lt;img&gt;</code><code class="eh jp jq jr js b">&lt;input&gt;</code><code class="eh jp jq jr js b">&lt;link&gt;</code>T11】</p><p id="5044" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">鲜为人知的有:</p><p id="ffcf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jp jq jr js b">&lt;area&gt;</code><code class="eh jp jq jr js b">&lt;base&gt;</code><code class="eh jp jq jr js b">&lt;col&gt;</code><code class="eh jp jq jr js b">&lt;command&gt;</code><code class="eh jp jq jr js b">&lt;embed&gt;</code><code class="eh jp jq jr js b">&lt;keygen&gt;</code><code class="eh jp jq jr js b">&lt;param&gt;</code><code class="eh jp jq jr js b">&lt;source&gt;</code><code class="eh jp jq jr js b">&lt;track&gt;</code>T21】</p><p id="4c1f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样。这些是所有现存的空元素。</p><p id="150d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">编写<code class="eh jp jq jr js b">&lt;br&gt;&lt;/br&gt;</code>不是也从来不是有效的HTML，因为这意味着<code class="eh jp jq jr js b">br</code>元素接受内容(编写<code class="eh jp jq jr js b">&lt;br&gt;Hello!&lt;/br&gt;</code>完全没有意义)。但是同时看到<code class="eh jp jq jr js b">&lt;br&gt;</code>和<code class="eh jp jq jr js b">&lt;br /&gt;</code>是很常见的。</p><p id="847e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">尽管大多数人都知道在HTML中,<strong class="it hv"> X </strong>是强制的,来编写,<code class="eh jp jq jr js b">&lt;br /&gt;</code>HTML的规则并不明显。</p><h1 id="2f58" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">历史</h1><p id="2abf" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">为了完全理解无效元素的规则，有必要了解一些历史。</p><p id="0b0b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae ln" href="http://en.wikipedia.org/wiki/HTML" rel="noopener ugc nofollow" target="_blank"> HTML </a>、<a class="ae ln" href="http://en.wikipedia.org/wiki/XML" rel="noopener ugc nofollow" target="_blank"> XML </a>和<a class="ae ln" href="http://en.wikipedia.org/wiki/XHTML" rel="noopener ugc nofollow" target="_blank"> X(HT)ML </a>都是基于<a class="ae ln" href="http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> SGML </strong> </a>、标准的通用<a class="ae ln" href="https://hackernoon.com/tagged/markup" rel="noopener ugc nofollow" target="_blank">标记</a>语言，这种语言在1986年就已经制作完成。</p><p id="0be7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">HTML 和XML直接来源于SGML。XML是SGML的一个限制性更强的子集，这也是XHTML的基础。</p><blockquote class="lo"><p id="2163" class="lp lq hu bd lr ls lt lu lv lw lx jo ek translated">XHTML基本上和HTML一样，但是基于XML。</p></blockquote><p id="a90a" class="pw-post-body-paragraph ir is hu it b iu ly iw ix iy lz ja jb jc ma je jf jg mb ji jj jk mc jm jn jo hn dt translated">到目前为止还好吗？然后让我们进入有趣的部分:</p><p id="1776" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">SGML有一个特性叫做<a class="ae ln" href="http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#NET" rel="noopener ugc nofollow" target="_blank"> NET(空结束标签)</a>。这是一个简短的符号，当元素的内容是简单的文本时，它可以避免关闭标签。用<em class="lm">网</em>可以写<code class="eh jp jq jr js b">&lt;quote/Quoted text/</code>而不是<code class="eh jp jq jr js b">&lt;quote&gt;Quoted text&lt;/quote&gt;</code>。</p><p id="655c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">顺便提一下，不包含任何文本的元素可以写成<code class="eh jp jq jr js b">&lt;quote//</code>，称为<a class="ae ln" href="http://en.wikipedia.org/wiki/Standard_Generalized_Markup_Language#Other_features" rel="noopener ugc nofollow" target="_blank">short tag NETENABL immed net</a>，与<code class="eh jp jq jr js b">&lt;quote&gt;&lt;/quote&gt;</code>相同。</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="0f87" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，按照这种逻辑，如果一个void元素的<em class="lm">没有</em>的结束标签，<code class="eh jp jq jr js b">&lt;br/</code>将被解释为<code class="eh jp jq jr js b">&lt;br&gt;</code>，而<code class="eh jp jq jr js b">&lt;br/&gt;</code>将被解释为<code class="eh jp jq jr js b">&lt;br&gt;&gt;</code>，这显然是不正确的语法。如果你像我一样，你可能会认为这是疯狂的！。不幸的是，HTML4规范的作者不这么认为，这就是为什么这是规范的一部分。显然，当时的浏览器供应商也没有被说服，这导致了非常差的浏览器支持(在这种情况下，可以说不是一件坏事)。</p><p id="32ff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">XML(以及XHTML)认识到了这种语法的疯狂，并没有包括<em class="lm"> NET </em>或SHORTTAG NETENABL IMMEDNET特性，而是为void元素提供了一种合理的语法，即类似于<code class="eh jp jq jr js b">&lt;br /&gt;</code>的<a class="ae ln" href="http://www.w3.org/TR/xml/#sec-starttags" rel="noopener ugc nofollow" target="_blank">空元素标签</a>。这看起来很自然，这也是为什么大多数开发者认为这是正确的编写方式。</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="62fb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">幸运的是，HTML在发展，万维网联盟的人(他们正在起草和制定整个网络的标准)也在从他们过去的错误中学习。这就是为什么HTML5让<em class="lm">更有意义。</em></p><p id="8261" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就在新HTML5语法的介绍中，W3C说:</p><blockquote class="mk ml mm"><p id="2ae4" class="ir is lm it b iu iv iw ix iy iz ja jb mn jd je jf mo jh ji jj mp jl jm jn jo hn dt translated">HTML 5定义了一种HTML语法，它与发布在Web上的HTML 4和XHTML 1文档兼容，但与HTML 4更深奥的SGML特性不兼容，比如NET语法(即<em/></p></blockquote><p id="2895" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Yay for HTML5!</p><p id="258c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">(I think they should have kept the cool <em class="lm"> SHORTTAG </em>特性(<code class="eh jp jq jr js b">&lt;strong&gt;Hell yea&lt;/&gt;</code>)但是，嘿…至少HTML不再是一团乱麻了)</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><h1 id="9067" class="kj kk hu bd kl km mq ko kp kq mr ks kt ku ms kw kx ky mt la lb lc mu le lf lg dt translated">有效期</h1><p id="668a" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">所以回到有效性的问题上来，void元素的当前<a class="ae ln" href="http://www.w3.org/TR/html-markup/syntax.html#void-element" rel="noopener ugc nofollow" target="_blank"> HTML5规范如下:</a></p><p id="4e63" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">开始标记由以下部分组成，完全按照以下顺序排列:</p><ul class=""><li id="f870" class="mv mw hu it b iu iv iy iz jc mx jg my jk mz jo na nb nc nd dt translated">一个<code class="eh jp jq jr js b">&lt;</code>人物。</li><li id="e0ad" class="mv mw hu it b iu ne iy nf jc ng jg nh jk ni jo na nb nc nd dt translated">元素的标记名。</li><li id="f719" class="mv mw hu it b iu ne iy nf jc ng jg nh jk ni jo na nb nc nd dt translated">(可选)一个或多个属性，每个属性前面必须有一个或多个空格字符。</li><li id="ba1d" class="mv mw hu it b iu ne iy nf jc ng jg nh jk ni jo na nb nc nd dt translated">或者，一个或多个空格字符。</li><li id="155a" class="mv mw hu it b iu ne iy nf jc ng jg nh jk ni jo na nb nc nd dt translated">可选地，一个<code class="eh jp jq jr js b">/</code>字符，只有当元素是空元素时才出现。</li><li id="5758" class="mv mw hu it b iu ne iy nf jc ng jg nh jk ni jo na nb nc nd dt translated">一个<code class="eh jp jq jr js b">&gt;</code>人物。</li></ul><p id="45dd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这意味着<code class="eh jp jq jr js b">/</code>字符在HTML5中已经被渲染为<em class="lm">可选</em>，但并没有增加任何意义。<code class="eh jp jq jr js b">&lt;br&gt;</code>和<code class="eh jp jq jr js b">&lt;br /&gt;</code>之间绝对没有的区别。</p><h1 id="e7a0" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">正确性</h1><p id="8f41" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">好吧，对于那些真正沉迷于X(HT)ML的人来说，你可能会想，是的，这是可选的，但<code class="eh jp jq jr js b">&lt;br /&gt;</code>仍然是‘更正确的’，但我必须告诉你:它不是。实际上，有人可能会认为将<code class="eh jp jq jr js b">/</code>添加到void标签是一个被<em class="lm">忽略的语法错误</em>。编写它的可能性主要是出于兼容性的原因，每个浏览器和解析器都不应该对<code class="eh jp jq jr js b">&lt;br&gt;</code>和<code class="eh jp jq jr js b">&lt;br /&gt;</code>有任何不同的处理。</p><p id="be0a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这个问题上，谷歌的风格指南也非常明确，你确实应该<em class="lm">而不是</em>关闭void标签。</p><h1 id="099c" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">理论上的缺点</h1><p id="57de" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">当然，不关闭void标签也有它的缺点，但是我认为它们并没有超过拥有像<code class="eh jp jq jr js b">&lt;meta&gt;</code>这样干净简洁的void标签的优点。</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="e8fb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不关闭void标签的第一个缺点是用户需要<strong class="it hv">了解现有的void标签</strong>。例如，如果您不知道什么是<code class="eh jp jq jr js b">&lt;img&gt;</code>元素，如果您找不到它的任何结束标签，您可能会感到困惑。但是void标签的列表很短，通常很明显哪些标签是void标签。</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="c6c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第二个缺点是对于<strong class="it hv">编辑器和解析器</strong>来说，得到正确的结果变得更加复杂。他们需要知道完整的列表来正确地解释代码。如果你在编辑器中写<code class="eh jp jq jr js b">&lt;input&gt;</code>，它<em class="lm">必须知道</em>后面永远不会有<code class="eh jp jq jr js b">&lt;/input&gt;</code>。</p><p id="d5d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是这更多的是一个与规范相关的问题，而不是关闭或不关闭void标签，因为<code class="eh jp jq jr js b">&lt;input&gt;&lt;/input&gt;</code>是<em class="lm">无效</em>，所以void元素在任何情况下都需要特殊处理。</p></div><div class="ab cl md me hc mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><h1 id="6c9f" class="kj kk hu bd kl km mq ko kp kq mr ks kt ku ms kw kx ky mt la lb lc mu le lf lg dt translated">我对空标签的看法</h1><p id="1777" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">我认为，通过使用一些标签的内容，而不是定义额外的属性，可以完全避免void标签的整个概念。让我们以<code class="eh jp jq jr js b">&lt;img&gt;</code>标签为例。它有一个<em class="lm">强制的</em> <code class="eh jp jq jr js b">alt</code>属性来添加图像的描述，这是有充分理由的:看不到图像的人(要么因为他们身体上没有能力，要么因为他们的设备不能显示图像)应该有办法知道描述的是什么(如果你添加一个<code class="eh jp jq jr js b">img</code>标签仅仅是为了设计的目的，那么你无论如何都做错了)。所以我的问题是:为什么图片标签的<em class="lm">内容</em>不是备选标签？写<code class="eh jp jq jr js b">&lt;img src="doge.png"&gt;Image of doge&lt;/img&gt;</code>在我看来还是比较明显的。同样的道理也适用于<code class="eh jp jq jr js b">&lt;meta&gt;</code>标签，它甚至有一个<code class="eh jp jq jr js b">content</code> <em class="lm">属性</em>！为什么不使用实际的元素内容呢？<code class="eh jp jq jr js b">&lt;input value="Value content"&gt;</code>应该是<code class="eh jp jq jr js b">&lt;input&gt;Value content&lt;/input&gt;</code>跟<code class="eh jp jq jr js b">&lt;textarea&gt;</code>一样，等等…</p><p id="be30" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以实际上应该只有几个void标签存在，但是显然W3C必须考虑向后兼容性，这使得这种改变更加困难。</p><h1 id="6b63" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">最后的想法:标签</h1><p id="2115" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">script标签真的让我很困扰，因为对于这样一个简单的指令来说，它是一个如此冗长的标签。编写<code class="eh jp jq jr js b">&lt;script src="my-script.js"&gt;&lt;/script&gt;</code>似乎是错误的，因为这个<code class="eh jp jq jr js b">script</code>标签的内容与<code class="eh jp jq jr js b">my-script.js</code>没有逻辑关联(并且<a class="ae ln" href="http://www.w3.org/html/wg/drafts/html/master/scripting-1.html#the-script-element" rel="noopener ugc nofollow" target="_blank"> html规范</a>不允许添加内容和<code class="eh jp jq jr js b">src</code>属性)。</p><p id="bf7f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">问题是，<code class="eh jp jq jr js b">&lt;script&gt;</code>是<strong class="it hv">而不是</strong>一个void标签，因为你可以在你的页面上内嵌JavaScript，并且没有“可选的void标签”。</p><p id="8cc4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用<code class="eh jp jq jr js b">&lt;link&gt;</code>标签是完美的，因为它已经用于其他导入，并提供了包含外部文件所需的所有属性。当然，正如在web中经常出现的那样，不使用它的原因是向后兼容性，因为您会排除所有不支持该语法的旧浏览器。</p><figure class="ju jv jw jx fq jy"><div class="bz el l di"><div class="nj nk l"/></div></figure></div></div>    
</body>
</html>