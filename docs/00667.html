<html>
<head>
<title>Stress Testing the RaiBlocks Network: Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RaiBlocks网络的压力测试:第一部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/stress-testing-the-raiblocks-network-568be62fdf6d?source=collection_archive---------7-----------------------#2018-01-22">https://medium.com/hackernoon/stress-testing-the-raiblocks-network-568be62fdf6d?source=collection_archive---------7-----------------------#2018-01-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/bfd40d33097df04707b32a7cde68e897.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GI-42XyiyxUfr7P_0a-brw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Captured from <a class="ae jg" href="https://rai.watch/#/graph" rel="noopener ugc nofollow" target="_blank">rai.watch</a> during the stress test</figcaption></figure><p id="5c68" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">更新:见<a class="ae jg" rel="noopener" href="/@bnp117/stress-testing-the-raiblocks-network-part-ii-def83653b21f">第二部分</a>我达到了峰值306 TPS。</p><h1 id="2e97" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">介绍</h1><p id="e07d" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">RaiBlocks被吹捧为市场上最快、最具可扩展性的加密货币之一，但这些说法如何站得住脚？在<a class="ae jg" rel="noopener" href="/@bnp117/raiblocks-how-fast-actually-is-it-tl-dr-about-1-7-seconds-8cf2799e4da3">我之前的文章</a>中，我研究了事务速度，发现事务速度的中间值为1.7秒。今天，我将回顾我最近的实验，该实验于2018年1月21日上午11点左右在太平洋标准时间进行，我从一个廉价的虚拟专用服务器(VPS)快速发送了大量预先计算的事务，以查看RaiBlocks网络每秒可以处理多少事务(TPS)。</p><h1 id="275a" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">准备压力测试</h1><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff li"><img src="../Images/b190c8746ad7b0f37a50b9e72fa51cb0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cjueAE1SSTtQATGwrZjM-Q.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Custom script generating the PoW for 30k Transactions on an overclocked GTX 1070</figcaption></figure><p id="ad4f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在开始之前，让我们快速回顾一下网络运行的背景。在RaiBlocks中，每个账户都有自己的<a class="ae jg" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">区块链</a>(账户链)，只有账户所有者才能登录他们个人账户链的交易。网络中的每个节点都有形成块格的所有账户链的本地副本。像传统的区块链一样，账户链中的每个块包含该链中前一个块的散列；如果一个块的先前散列不在节点的本地分类帐中，则它不会被视为有效块，但会被缓存一段时间，以防传入的块使该块有效。正因为如此，单个账户链在网络中发送垃圾邮件的速度自然会受到限制，而不会有很大一部分网络拒绝许多交易，因为传入的数据块尚未与其本地分类账完全同步。因此，在这个测试中，我创建了100个帐户，并从这些帐户中连续发送垃圾邮件。由于在发送账户链中的下一笔交易之前有99笔交易被垃圾邮件发送，<a class="ae jg" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>有更好的机会接受这些交易，因为前一笔交易有足够的时间传播网络。在整个测试过程中，我还会偶尔重新发布这些过去的事务，以便节点有更大的机会接收它们。</p><p id="dafa" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以下是这个实验的说明:</p><ul class=""><li id="5bd5" class="ln lo hu jj b jk jl jo jp js lp jw lq ka lr ke ls lt lu lv dt translated">创建了100个帐户，每个帐户填充了300xrb (0.0003XRB)。这需要200次PoW(发送和打开块)计算，然后才能预计算实验的其余部分。</li><li id="41f2" class="ln lo hu jj b jk lw jo lx js ly jw lz ka ma ke ls lt lu lv dt translated">30，000笔交易(每个账户300笔交易，每笔交易发送1xrb)的PoW是在GTX1070上生成的，生成大约需要5个小时。</li><li id="ffc8" class="ln lo hu jj b jk lw jo lx js ly jw lz ka ma ke ls lt lu lv dt translated">这些交易都是从我的数字海洋水滴中播出的，因为它有强大的互联网连接。分别播报如下:<em class="mb"> {Account_A_1，Account_B_1，Account_C_1，…，Account_A_2，Account_B_2，Account_C_2，…)}</em></li></ul><h1 id="b746" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">测试执行</h1><p id="fc2a" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">由于其高质量的互联网连接，这些块从5美元/月的VPS播放。应该注意的是，这个实验是在RaiBlocks MainNet上进行的，并在各种硬件的真实节点上传播。这不是一个综合的数据中心测试。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/51e3aea9c86d3ea50ed1b0e6e520ecfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bg4uj2HmFoKiObxzvGTrcQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Custom script broadcasting the precomputed blocks</figcaption></figure><p id="8384" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">该节点花费了907秒(大约15分钟)来广播所有30k个事务。非常有限的VPS CPU在此期间紧张；我怀疑一个更强大的VPS可以更快地处理交易。</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="md me l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Beginning of stress test (sped up 8x)</figcaption></figure><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="md me l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Ending of stress test (sped up 40x)</figcaption></figure><h1 id="1fa8" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结果</h1><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mf"><img src="../Images/f8e00ba8c84a86775f5408b7f55454cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfYVHceVXefDUQTcGehA8g.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Dashboard for my $5/mo Digital Ocean Droplet that broadcasted the transactions</figcaption></figure><p id="5b1e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">节点以33TPS的平均事务速度广播所有事务大约需要15分钟。<a class="ae jg" href="https://www.raiblocks.club/" rel="noopener ugc nofollow" target="_blank"> raiblocks.club </a> 30分钟平均计数器最大值达到16.86TPS左右；压力测试持续了大约15分钟，因此我们可以推断他们也观察到了平均约33TPS。</p><p id="cf5d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">由于像RaiBlocks这样的基于DAG的加密货币中不存在确切的全局状态，因此不同的节点在不同的时间会经历不同的交易速率。社区成员Cronoh在他的本地笔记本电脑节点上通过Wi-Fi连接测得了120TPS 的<a class="ae jg" href="https://gist.github.com/cronoh/9d5515146971541503b49643d165675e" rel="noopener ugc nofollow" target="_blank">峰值。rai.watch上每分钟2406个事务的峰值导致平均每分钟大约40个事务。</a></p><p id="7f52" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">每个RaiBlocks的发送事务大约为260字节。这意味着，在GTX1070上计算这30，000笔交易需要大约5个小时，这使得分类账的大小增加了大约7.8MB。如果接收方生成所有相应的接收交易，那么全球分类账将增加7.8MB。当帐户链历史修剪被释放时，该测试将使分类帐膨胀不到50KB。</p><p id="7d14" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我的数字海洋带宽在压力测试期间达到了44Mbps的峰值。如果一个节点有一个较低的带宽限制，那么随着时间的推移，使用将会更加分散，并且该节点将会稍微取消同步，直到它赶上。</p><h1 id="07ab" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论和要点</h1><p id="e285" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">在这个实验中，我们表明RaiBlocks的网络至少可以处理持续的33 TPS，而单个节点处理的最低峰值为120 TPS。这些结果是这个实验和我发布的节点的局限性；我对网络处理更高交易速率的能力非常有信心。未来的工作是执行多节点发布压力测试，或者在我当前的压力测试代码中找到瓶颈。</p><h1 id="014d" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">误解</h1><ol class=""><li id="6e41" class="ln lo hu jj b jk ld jo le js mg jw mh ka mi ke mj lt lu lv dt translated">请注意，崩溃或取消同步的节点<strong class="jj hv">不是因为CPU或互联网带宽</strong>不足。廉价的VPSs和&lt; 10W电脑上的节点在压力测试中表现良好。UDP事务的突发性可能会使一些服务质量(QoS)较差的路由器崩溃，或者触发其他配置不佳的网络。核心团队目前正致力于减少rai_wallet/rai_node软件产生的突发流量，并致力于一种总体上对NAT和路由器更友好的数据泛洪方案。</li><li id="5b82" class="ln lo hu jj b jk lw jo lx js ly jw lz ka ma ke mj lt lu lv dt translated">事务在GPU上预计算了许多小时。5美元/月的VPS只是广播交易，它不需要进行功率计算。</li><li id="0d23" class="ln lo hu jj b jk lw jo lx js ly jw lz ka ma ke mj lt lu lv dt translated"><strong class="jj hv">在此期间，网络没有出现故障，也没有饱和</strong>。在此期间，其他人的正常交易以正常速度进行。</li></ol><p id="a026" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">像这样的东西？支持我在:<br/>xrb _ 1y 6 fjssau 9 hmnprwfxemfnahz 759 tx 7 qrdrfz 7 kbzd 4 jbkd 4 grurq 7 tfmf</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mk me l"/></div></figure></div></div>    
</body>
</html>