<html>
<head>
<title>Making a game with Javascript: Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Javascript制作游戏:第1部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/making-a-game-with-javascript-and-pixijs-part-1-e3235139cd6f?source=collection_archive---------5-----------------------#2018-01-23">https://medium.com/hackernoon/making-a-game-with-javascript-and-pixijs-part-1-e3235139cd6f?source=collection_archive---------5-----------------------#2018-01-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="baf6" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">从动画背景开始</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/5be759745b407e95d349e39d6a9c50c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HzqOJEbfVXOlhZ4Qh4qjMA.png"/></div></div></figure><h2 id="ffeb" class="jv jw hu bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated">介绍</h2><p id="d4ba" class="pw-post-body-paragraph kt ku hu kv b kw kx iv ky kz la iy lb kg lc ld le kk lf lg lh ko li lj lk ll hn dt translated">我很想写一个关于我喜欢使用的游戏技术的教程，所以在这里。在这个故事中，我们将开始用PixiJS制作一个小的射击游戏，这是一个非常简单和酷的Javascript库。</p><p id="930d" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">我们要做的就是让一艘宇宙飞船能够移动和射击，敌人的波浪穿过，以及一个美丽的移动的云的动画背景。第一部分(这个故事)将重点放在背景上。</p><p id="905d" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">准备好了吗？让我们搞定它！</p><h2 id="fd05" class="jv jw hu bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated">入门指南</h2><p id="d23a" class="pw-post-body-paragraph kt ku hu kv b kw kx iv ky kz la iy lb kg lc ld le kk lf lg lh ko li lj lk ll hn dt translated">让我们从设置我们的项目开始:我上传了一个已经设置好的代码结构，所以我们都在同一个基础上工作。但是如果你想自己制作，我把我的文件夹的图片放在<strong class="kv hv"> : </strong>下面</p><p id="19ba" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated"><a class="ae lr" href="https://github.com/Karzam/Spaceship_Tutorial_Starter_Project" rel="noopener ugc nofollow" target="_blank">点击这里下载入门项目</a></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/c39dbb570988362b6bd84a2f1bf2c35a.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/1*bKB5woPIR7lvDSl62Jer8w.tiff"/></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Project folder structure</figcaption></figure><p id="779b" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">我们需要一个本地服务器来运行这个游戏:我邀请你下载<strong class="kv hv"> WAMP </strong>如果你用的是Windows，或者<strong class="kv hv"> MAMP </strong>用于macOS，它们都是免费且易于使用的。让我们<strong class="kv hv">把你的游戏文件夹放到服务器one</strong>(MAMP的<em class="lx">htdocs</em>/WAMP的<em class="lx"> www </em>)里，在你最喜欢的浏览器里输入localhost链接(对我来说:<em class="lx">http://localhost:8888/Spaceship/bin/</em>)</p><p id="f856" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">在<em class="lx">index.html</em>中，我们正在导入头文件中的javascript文件:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="4a86" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">…并且<strong class="kv hv">我们需要为我们制作的每个文件做同样的事情</strong>。接下来是Pixi的初始化(基于WebGL渲染引擎):</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="70e6" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">对于本教程，我们告诉游戏覆盖整个浏览器窗口，所以如果你现在尝试，你会得到一个全黑的背景。</p><p id="0c2c" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated"><em class="lx"> main.js </em>文件是所有游戏开始的地方。它就像一个管理器，拥有游戏首先执行的功能，以及我们可以告诉游戏在每一帧上需要做什么的循环。我们想要的是游戏开始时天空的蓝色背景，所以让<strong class="kv hv">更新<em class="lx"> init </em>函数:</strong></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="385e" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">Pixi使用的是<em class="lx">十六进制</em>颜色格式，所以<strong class="kv hv">你需要在<em class="lx"> 0x </em> </strong>之前写你的颜色代码。让我们保存并在您的浏览器中查看结果！</p><h2 id="acea" class="jv jw hu bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated">到处都是云</h2><p id="2f63" class="pw-post-body-paragraph kt ku hu kv b kw kx iv ky kz la iy lb kg lc ld le kk lf lg lh ko li lj lk ll hn dt translated">这个背景很无聊，我们来加点浮云吧。</p><p id="73cf" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">首先，让我们<strong class="kv hv">在<em class="lx"> src </em>文件夹中添加一个新的</strong><em class="lx">cloud manager</em><strong class="kv hv"/>类文件(它将创建并移动云):</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="eb61" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">不要忘记将<strong class="kv hv">添加到index.html<strong class="kv hv">文件</strong>的</strong> <em class="lx">中，就像我们对<em class="lx"> main.js </em>所做的那样:</em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="11d0" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">构造函数是这个类的入口点，我们可以在这里为我们的云添加spawn函数。我们想要的基本上是一种能够每X秒创建一个云的方法，这很好，因为有一个javascript工具可以做到这一点:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="05b7" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">这段放在构造函数中的代码，每隔 <strong class="kv hv"> 1000毫秒</strong> (= 1秒)，就会<strong class="kv hv">调用小胡子括号里面的内容。</strong></p><p id="8bf0" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">让我们<strong class="kv hv">在</strong> <em class="lx">资产</em> <strong class="kv hv">文件夹</strong>中添加云精灵，因为它更好，我们有2个不同的图像:(<strong class="kv hv">云是白色的，背景透明，所以它们在这个页面上是不可见的，但这里有GitHub </strong>上的链接；)</p><blockquote class="ma mb mc"><p id="4a23" class="kt ku lx kv b kw lm iv ky kz ln iy lb md lo ld le me lp lg lh mf lq lj lk ll hn dt translated"><a class="ae lr" href="https://github.com/Karzam/Spaceship_Tutorial_Part_1/blob/master/bin/assets/cloud_1.png" rel="noopener ugc nofollow" target="_blank">https://github . com/Karzam/space ship _ Tutorial _ Part _ 1/blob/master/bin/assets/cloud _ 1 . png</a></p><p id="ecff" class="kt ku lx kv b kw lm iv ky kz ln iy lb md lo ld le me lp lg lh mf lq lj lk ll hn dt translated"><a class="ae lr" href="https://github.com/Karzam/Spaceship_Tutorial_Part_1/blob/master/bin/assets/cloud_2.png" rel="noopener ugc nofollow" target="_blank">https://github . com/Karzam/space ship _ Tutorial _ Part _ 1/blob/master/bin/assets/cloud _ 2 . png</a></p></blockquote><p id="de35" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">我们需要在游戏开始前加载精灵，所以<strong class="kv hv">将它们添加到</strong><em class="lx">pixi . loader . add</em><strong class="kv hv">函数:</strong></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="dc4e" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">好了，现在我们可以在<em class="lx"> CloudManager </em>的<em class="lx"> setInterval </em>方法中显示云了:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="2fd9" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">要恢复此代码:</p><ul class=""><li id="ef9a" class="mg mh hu kv b kw lm kz ln kg mi kk mj ko mk ll ml mm mn mo dt translated">首先，我们<strong class="kv hv">正在计算一个介于0和1之间的随机数</strong>，它要么小于0.5，所以我们将第一个精灵存储在一个常量中，要么就是第二个精灵。</li><li id="218c" class="mg mh hu kv b kw mp kz mq kg mr kk ms ko mt ll ml mm mn mo dt translated">然后，我们用在前一行中得到的图像创建一个新的sprite对象。</li><li id="a50b" class="mg mh hu kv b kw mp kz mq kg mr kk ms ko mt ll ml mm mn mo dt translated">这个精灵的原点将是它的左上角，所以我们<strong class="kv hv">将它的锚点设置在中间。</strong></li><li id="9ee1" class="mg mh hu kv b kw mp kz mq kg mr kk ms ko mt ll ml mm mn mo dt translated">我们要<strong class="kv hv">显示超出屏幕右边界的云</strong>，这样它就可以通过屏幕向左移动:<strong class="kv hv"><em class="lx">renderer . width * 1.2</em></strong>就是左边界位置+屏幕宽度+其宽度的20%。我们可以确定我们不会看到它产卵。对于y位置，<strong class="kv hv"><em class="lx">renderer . height * math . random()</em></strong>是介于0和窗口高度之间的数字。因此云的垂直位置将位于屏幕顶部和底部之间的<strong class="kv hv">。</strong></li><li id="9a43" class="mg mh hu kv b kw mp kz mq kg mr kk ms ko mt ll ml mm mn mo dt translated">最后，我们把<strong class="kv hv"> <em class="lx"> addChild </em> </strong>这个云带到舞台上。</li></ul><p id="23b6" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">如果你运行这段代码，什么都不会出现，这是故意的，因为它们必须弹出来。所以现在我们必须让他们搬走。</p><p id="6f24" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">更新功能是做这件事的地方。但是我们需要将云存储在一个数组中，这样我们就可以迭代并设置它们的位置。让我们<strong class="kv hv">在</strong> <em class="lx"> CloudManager </em> <strong class="kv hv">中初始化一个新数组构造函数:</strong></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="8e99" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">…并在<em class="lx"> stage.addChild </em>函数后将云推入:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="3956" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">现在我们可以在<em class="lx"> update </em>中<strong class="kv hv">迭代数组，并设置每个云的位置</strong>:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="9ab5" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">现在成功了！</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mu"><img src="../Images/e1ce21d44caaadb02a9c6fd3de5ea85d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*O-F1YaJaFMeijf6ewskl7A.gif"/></div></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Moving clouds!</figcaption></figure><p id="ef54" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">哦，等等，有件事应该让我们烦恼:<strong class="kv hv">那些云都去哪里了？</strong></p><p id="2827" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">是的，如果我们在它们离开屏幕后不删除它们，它们将继续存在，这可能会导致一些性能问题<strong class="kv hv">。</strong>让我们在<em class="lx"> forEach </em>中添加一条语句，当它们的水平位置稍微低于屏幕的左边界时，删除它们(这样我们就看不到它们突出来了):</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="656a" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">我们不玩云了！</p><p id="26f6" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">对云的大小做一个随机的变化怎么样？<strong class="kv hv">将此添加到云创建块:</strong></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ly lz l"/></div></figure><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mv"><img src="../Images/fe6fd1a57e19e2b607152ae072ebef2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*7fHsC9aCJwOe3f4WBjAbBA.gif"/></div><figcaption class="lt lu fg fe ff lv lw bd b be z ek">Random clouds size</figcaption></figure><p id="4158" class="pw-post-body-paragraph kt ku hu kv b kw lm iv ky kz ln iy lb kg lo ld le kk lp lg lh ko lq lj lk ll hn dt translated">如果你的代码中缺少/没有工作，<a class="ae lr" href="https://github.com/Karzam/Spaceship_Tutorial_Part_1" rel="noopener ugc nofollow" target="_blank"> <strong class="kv hv">你可以在这里查看结果</strong> </a> <strong class="kv hv">。</strong></p><h2 id="c712" class="jv jw hu bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks dt translated"><a class="ae lr" href="https://hackernoon.com/making-a-game-with-javascript-part-2-8154bd6e2de1" rel="noopener ugc nofollow" target="_blank">下一部分:玩家飞船</a></h2><p id="5dd8" class="pw-post-body-paragraph kt ku hu kv b kw kx iv ky kz la iy lb kg lc ld le kk lf lg lh ko li lj lk ll hn dt translated">感谢您的阅读！</p></div></div>    
</body>
</html>