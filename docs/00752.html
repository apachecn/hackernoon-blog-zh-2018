<html>
<head>
<title>Enterprise ready Angular-CLI seed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">企业就绪Angular-CLI种子</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/enterprise-ready-angular-cli-seed-618b35a66c1e?source=collection_archive---------12-----------------------#2018-01-24">https://medium.com/hackernoon/enterprise-ready-angular-cli-seed-618b35a66c1e?source=collection_archive---------12-----------------------#2018-01-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="a16a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在过去的一年里，我帮助我的团队开发并交付了许多Angular应用程序。这包括桌面网络、RWD、混合网络等。在这段时间里，我开始感觉到需要为团队准备一个现成的初学者工具包——包括更多的企业特性。Angular CLI是设置Angular应用程序的绝佳入门套件。它给了你一个基础，但这就是它留给你的！因此，我决定使用Angular-CLI作为基础，为Angular构建一个企业级seed应用程序。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/67040fef59a42725379c9f82ac19f75d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8c333d_YNEHG4q3UDb1wTA.jpeg"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Photo by <a class="ae kf" href="https://unsplash.com/photos/5fNmWej4tAA?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Helloquence</a> on <a class="ae kf" href="https://unsplash.com/search/photos/enterprise?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="c5f7" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">目标</h1><p id="eb83" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated">如果有好的目标，每个项目都有可能成功。该项目的目标是:</p><ul class=""><li id="b4db" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">添加一些库/定制实现来提供企业级的特性——繁忙指示器、模板中的授权检查和功能(当然还有路由守卫)</li><li id="1011" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">默认情况下提供路由的延迟加载，包括主页，从而将主包的包大小减少到绝对最小。</li><li id="af9d" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">每次迭代后，检查包的大小。丢弃任何证明会增加过多负载的库。</li><li id="65ec" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">添加通知-在页面中以及浮动</li><li id="2b3e" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">添加表单验证示例</li><li id="64d3" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">细长滚动条</li><li id="3d80" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">条件日志记录(自动禁用生产中的某些日志)</li><li id="9146" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">动画片</li><li id="6990" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">更多…</li><li id="4199" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">让它在麻省理工学院许可下开源！</li></ul><p id="f38c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我计划在这里写一系列基于这个种子如何形成的最佳实践(在代码级别)。</p><h1 id="a24d" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">TL；DR；我的代码在哪里？</h1><p id="9110" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed" rel="noopener ugc nofollow" target="_blank">这里的</a>是我开发的基于Angular CLI的企业应用Seed的代码！记住🌟github上的书签项目！</p><p id="de3e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是我强烈建议你通读整篇文章，理解种子的各种代码片段以及它们存在的原因。</p><p id="c920" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这段代码实现了许多最佳实践，因此我决定将这篇文章分成多篇，每次包含3-4个最佳实践。</p><h1 id="b974" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">架构上重要的最佳实践—第一部分</h1><h2 id="810d" class="lx kh hu bd ki ly lz ma km mb mc md kq jc me mf ku jg mg mh ky jk mi mj lc mk dt translated">1.默认为SCSS</h2><p id="0916" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated">SCSS提供了比普通CSS更多的优势，例如变量支持(有助于全局变化，主题化等)，通过调整树结构，混合，代码生成等紧凑的风格定义。几乎所有成熟的样式库和组件库都使用SCSS作为它们的样式定义引擎。任何企业应用程序都应该使用SCSS。</p><p id="0acd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">默认情况下，Angular CLI <code class="eh ml mm mn mo b">new</code>命令使用css作为样式选项来生成应用程序。虽然这对于一些幼稚的实现来说是可以的，但是任何使用bootstrap或任何其他css系统的应用程序都应该知道，通过添加整个分发css文件，他们添加了太多的CSS。Bootstrap4启用了OOTB sass。引导v3有完全支持的<code class="eh ml mm mn mo b">bootstrap-sass</code> npm包。</p><p id="368e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，我们的应用程序支持SCSS，并且使用scss只包含任何CSS库的必需部分，这一点很重要。</p><p id="9f39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您要运行<code class="eh ml mm mn mo b">new</code>，请添加额外选项<code class="eh ml mm mn mo b">--style scss</code>。就是这样！现在新生成的代码将默认为SCSS。您将生成的任何新组件也将具有。scss作为样式的默认扩展名。如果你已经生成了应用程序，你仍然可以在<code class="eh ml mm mn mo b">defaults</code>部分的<code class="eh ml mm mn mo b">.angular-cli.json</code>文件中为将来的组件生成做修改。</p><p id="44c7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> Pro提示</strong>:当你这么做的时候——如果你不打算写测试，或者如果你不想让Angular CLI开始运行安装(如果你已经安装了Yarn，使用Yarn)，你可能还想添加<code class="eh ml mm mn mo b">--skip-test</code>和<code class="eh ml mm mn mo b">--skip-install</code>选项。<code class="eh ml mm mn mo b">--routing</code>对于企业应用程序，也强烈推荐使用该选项。</p><h2 id="5ad2" class="lx kh hu bd ki ly lz ma km mb mc md kq jc me mf ku jg mg mh ky jk mi mj lc mk dt translated">2.CSS重置(正常化)</h2><p id="e117" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated">使用良好的样式重置非常重要，这样html组件的大多数基本呈现在所有浏览器中都是一样的。如果你使用bootstrap/Zurb foundation——它们内置了重置功能。如果你是从零开始，重置是必须的。你可以使用其中一个<a class="ae kf" href="https://github.com/necolas/normalize.css" rel="noopener ugc nofollow" target="_blank">normalize . CSS</a>+<a class="ae kf" href="https://github.com/jonathantneal/sanitize.css" rel="noopener ugc nofollow" target="_blank">sanitize . CSS</a>/<a class="ae kf" href="https://meyerweb.com/eric/tools/css/reset/reset.css" rel="noopener ugc nofollow" target="_blank">Meyer web reset</a>/<a class="ae kf" href="https://github.com/mirego/simple-css-reset" rel="noopener ugc nofollow" target="_blank">simple CSS reset</a>/<a class="ae kf" href="https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css" rel="noopener ugc nofollow" target="_blank">html 5样板重置</a>。</p><p id="7dc2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于这个种子，我使用了<a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/master/src/styles.scss#L2-L3" rel="noopener ugc nofollow" target="_blank">的</a> normalize.css + sanitize.css选项。而normalize是一个很好重置。它不提供<code class="eh ml mm mn mo b">box-sizing: border-box</code>和其他类似的默认值。这些是由sanitize.css添加的，sanitize . CSS是normalize.css的合著者。</p><p id="28b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您计划使用bootstrap —您可以删除此组合，因为这些东西由bootstrap处理。</p><h2 id="f028" class="lx kh hu bd ki ly lz ma km mb mc md kq jc me mf ku jg mg mh ky jk mi mj lc mk dt translated">3.现成的授权指令</h2><p id="21dc" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated">所有企业应用程序的另一个关键要求是拥有授权支持。在筛选了多个库之后，我将选择范围缩小到了<a class="ae kf" href="https://github.com/AlexKhymenko/ngx-permissions" rel="noopener ugc nofollow" target="_blank"> ngx-permissions </a>。</p><ul class=""><li id="b1fe" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">ngx-permissions提供了3个指令来快速描述模板中的授权需求。</li><li id="44fe" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">指令在AOT准备好了。</li><li id="db9a" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">它还提供全面的路由引导，并在用户未被授权使用另一个路由时重定向到该路由。</li><li id="0302" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">可激活和可加载保护都受支持..因此，当用户没有正确的权限时，您可以禁止下载模块。</li></ul><p id="56bb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如何在代码中包含这一点？</p><p id="3135" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh ml mm mn mo b"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/master/package.json" rel="noopener ugc nofollow" target="_blank">package.json </a></code> — ( <code class="eh ml mm mn mo b">yarn add ngx-permissions</code> ) <br/> <code class="eh ml mm mn mo b"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/9eed90dd0fc7644ae9ab4121c81bcb4c34517666/src/app/app.module.ts#L36" rel="noopener ugc nofollow" target="_blank">src/app/app.module.ts</a> </code> —在进口中增加<code class="eh ml mm mn mo b">NgxPermissionsModule.forRoot()</code>。重要提示:这必须在您的应用程序主模块中(在Angular-CLI生成的项目中通常是app . module)<br/><code class="eh ml mm mn mo b"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/9eed90dd0fc7644ae9ab4121c81bcb4c34517666/src/app/app.component.ts#L27-L38" rel="noopener ugc nofollow" target="_blank">src/app/app.component.ts</a> </code>—从后端服务调用/ OAuth2重定向头等中检索权限集，并将它们推送到ngx-permissions的PermissionService和RoleService实例中。<br/> <code class="eh ml mm mn mo b"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/9eed90dd0fc7644ae9ab4121c81bcb4c34517666/src/app/home/components/home/home.component.html#L12-L23" rel="noopener ugc nofollow" target="_blank">src/app/&lt;yourcompoent&gt;/&lt;your comp.html&gt;</a></code> —添加ngxPermisssions *指令。例如</p><pre class="jq jr js jt fq mp mo mq mr aw ms dt"><span id="29a3" class="lx kh hu mo b fv mt mu l mv mw">&lt;div *ngxPermissionsOnly=”[‘listExperts’]”&gt;<br/>   &lt;div&gt;Viewable List of Experts here.. accessible to permission “listExperts”&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><h2 id="895e" class="lx kh hu bd ki ly lz ma km mb mc md kq jc me mf ku jg mg mh ky jk mi mj lc mk dt translated">4.使用共享模块</h2><p id="dca4" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated">如果您没有在Angular应用程序中创建模块；你现在应该停下来，首先<a class="ae kf" href="https://johnpapa.net/introducing-angular-modules-feature-modules-2/" rel="noopener ugc nofollow" target="_blank">阅读</a>关于<a class="ae kf" rel="noopener" href="/@cyrilletuzi/understanding-angular-modules-ngmodule-and-their-scopes-81e4ed6f7407">这样做的好处</a>。其中一个重要的原因是应用程序其余部分的延迟加载。另一个是可重用性。</p><p id="69f3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae kf" href="https://angular.io/docs/ts/latest/guide/ngmodule.html#!#shared-module" rel="noopener ugc nofollow" target="_blank">共享模块</a>有助于提供可在多个应用模块间重用的公共服务和组件。我可以想象，任何企业应用都至少有一个共享模块。</p><p id="669f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看一看<code class="eh ml mm mn mo b"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/9eed90dd0fc7644ae9ab4121c81bcb4c34517666/src/app/appcommon/appcommon.module.ts" rel="noopener ugc nofollow" target="_blank">src/app/appcommon/appcommon.module.ts</a></code>了解如何编写公共模块..特别是，请参见<code class="eh ml mm mn mo b"><a class="ae kf" href="https://github.com/Infosys/enterprise-angular-seed/blob/9eed90dd0fc7644ae9ab4121c81bcb4c34517666/src/app/appcommon/appcommon.module.ts#L16" rel="noopener ugc nofollow" target="_blank">exports</a></code>属性，了解我们如何使共享模块代码对世界其他地方可访问。</p></div><div class="ab cl mx my hc mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="hn ho hp hq hr"><p id="3b0b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">出于内容长度的考虑，我就讲到这里。这篇文章的下一部分将详细阐述以下项目。github上的代码已经有了许多这些项目所需的实现:</p><ul class=""><li id="3e48" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated">UX改进——细滚动条</li><li id="97c9" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">高生产率—灌注组件库</li><li id="5d43" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">在应用程序的不同部分使用动画</li><li id="165e" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">动态日志级别设置来做有效的调试</li><li id="ee60" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">懒惰加载一切，包括主页。</li><li id="2b2c" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">使用HTTP_INTERCEPTORS的通用HTTP头</li><li id="0884" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">使用AppState的全局共享状态</li><li id="dd0f" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">跟踪你的包裹大小</li><li id="f0c9" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">在NPM和纱线之间沉降(通过纱线或模具)</li><li id="ddd7" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">IE11支持</li><li id="7930" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">json-server和一定程度上的后端集成自由</li><li id="436b" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">对共享模块中的各种第三方模块调用forRoot()调用的不利影响。</li><li id="02e6" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">为什么在模板中使用异步管道(<code class="eh ml mm mn mo b">| async</code>)很棒</li><li id="2511" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">PageNotFoundComponent</li><li id="859e" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated">针对持久性的LocalStorage / IndexedDB。</li></ul><p id="3587" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">欢迎您通过代码评审、特性请求、PRs和其他方式对代码做出贡献。</p><p id="ff4b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了确保你能看到剩下的帖子，请点击我名字旁边的“关注”按钮，在Medium上关注我。</p><h1 id="7c03" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">连接</h1><p id="cdd1" class="pw-post-body-paragraph ir is hu it b iu le iw ix iy lf ja jb jc lg je jf jg lh ji jj jk li jm jn jo hn dt translated">请一如既往地在<a class="ae kf" rel="noopener" href="/@dharapvj">媒体</a>、<a class="ae kf" href="https://twitter.com/dharapvj" rel="noopener ugc nofollow" target="_blank">推特</a>上鼓掌、评论、关注，保持联系，进行精彩的技术对话！</p></div></div>    
</body>
</html>