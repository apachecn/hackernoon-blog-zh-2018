<html>
<head>
<title>The Definitive Guide to Customizing the Tmux Status Line</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">定制Tmux状态行的权威指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/customizing-tmux-b3d2a5050207?source=collection_archive---------3-----------------------#2018-01-26">https://medium.com/hackernoon/customizing-tmux-b3d2a5050207?source=collection_archive---------3-----------------------#2018-01-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/53509bb4f306d7d77ee79b6312083d7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h12p00mTjaRZmwgyTxDPWg.png"/></div></div></figure><p id="5f88" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我假设您已经设置了一个正在使用的. tmux.conf文件。如果没有，首先查找setting . tmux . conf或类似的文件。</p><h1 id="f637" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤1:如何更改状态行</h1><blockquote class="ky"><p id="d356" class="kz la hu bd lb lc ld le lf lg lh jz ek translated">设定-g状态-左侧<options/></p><p id="f45d" class="kz la hu bd lb lc ld le lf lg lh jz ek translated">设置-g状态-右侧<options/></p></blockquote><p id="8858" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">用一串你想要的选项替换<code class="eh ln lo lp lq b">&lt;options&gt;</code>。可以使用<code class="eh ln lo lp lq b">#[bg=colour*]</code>设置背景颜色，其中<code class="eh ln lo lp lq b">*</code>是0-255之间的某个数字，用于支持256色的终端。要改变前景色(文本颜色)，只需<code class="eh ln lo lp lq b">#[fg=colour*]</code>(再次用0到255之间的数字替换*)。</p><p id="4e93" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要一次查看所有255种颜色，请查看<a class="ae lr" href="https://superuser.com/a/1104214" rel="noopener ugc nofollow" target="_blank">该堆栈溢出答案的注释</a></p><p id="1d45" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我想做的第一件事就是在状态行中添加日期和时间。很简单对吧。这里是一个选项的完整列表<a class="ae lr" href="https://linux.die.net/man/3/strftime" rel="noopener ugc nofollow" target="_blank">https://linux.die.net/man/3/strftime</a>或者一个更短更可读的列表见我的<code class="eh ln lo lp lq b"><a class="ae lr" href="https://github.com/sbernheim4/dotfiles/blob/master/.tmux.conf#L59." rel="noopener ugc nofollow" target="_blank">.tmux.conf</a></code>的一部分</p><p id="5090" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh ln lo lp lq b">&lt;options&gt;</code>字符串中添加<code class="eh ln lo lp lq b">%H:%M</code>将会以24小时格式显示当前时间，不带秒(类似于15:38)。</p><h1 id="1a93" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤2: Tmux特定值</h1><p id="00a6" class="pw-post-body-paragraph jc jd hu je b jf ls jh ji jj lt jl jm jn lu jp jq jr lv jt ju jv lw jx jy jz hn dt translated">Tmux有自己的一套代表不同事物的价值观。例如，<code class="eh ln lo lp lq b">#H</code>指的是您当前所在的计算机的主机名，<code class="eh ln lo lp lq b">#S</code>指的是当前会话的索引。关于选项的完整列表，请点击<a class="ae lr" href="https://linux.die.net/man/1/tmux" rel="noopener ugc nofollow" target="_blank">此处</a>并搜索短语“字符对替换为”</p><p id="4984" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">—2018年4月20日更新—</p><p id="781b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以我最近学会了如何在当前状态下显示或隐藏状态栏中的文本(如果前缀被按下或者窗口被缩放等)。tmux的官方手册页有一个记录窗格/窗口/会话状态的属性列表。访问该页面，搜索“以下变量适用”，您将看到一长串选项。你可能会问，如何使用它们，为了知道前缀是否被按下，我用下面的代码改变了我的状态行的颜色。</p><blockquote class="lx ly lz"><p id="3e2a" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated"><code class="eh ln lo lp lq b">#{?client_prefix,#[bg=colour2],}</code></p></blockquote><p id="a3ea" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果前缀是活动的(就像我刚才按下它一样)，那么它会在第一个逗号后插入文本，否则会在第二个逗号后插入文本，在本例中没有任何内容。这里我插入文本来改变背景颜色，但是任何文本都可以插入，包括…图标。要在当前窗口放大时显示图标(可以用前缀+ z来实现)，请参见下面的代码。</p><blockquote class="lx ly lz"><p id="6f38" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated"><code class="eh ln lo lp lq b">#{?window_zoomed_flag, ,</code>🔍<code class="eh ln lo lp lq b">}</code></p></blockquote><p id="cc1b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将在状态行中的任何位置添加一个放大镜。(对于图标，您可能需要在图标前后添加额外的空格。我在前后都增加了额外的空间，以免显得拥挤)。</p><p id="d574" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">—结束更新—</p><h1 id="74ce" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤3:使用Bash命令显示很酷的东西</h1><p id="8ccd" class="pw-post-body-paragraph jc jd hu je b jf ls jh ji jj lt jl jm jn lu jp jq jr lv jt ju jv lw jx jy jz hn dt translated">最后一个关键步骤是能够使用bash命令显示很酷的信息。这可以包括诸如电池百分比、当前歌曲播放等内容。要做到这一点，您首先必须找到一个bash脚本或命令来提供您想要的输出。例如，我使用以下命令显示当前的电池百分比:</p><blockquote class="lx ly lz"><p id="2342" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated"><code class="eh ln lo lp lq b">pmset -g batt | grep [0-9][0-9]% | awk ‘NR==1{print$3}’ | cut -c 1–3</code></p></blockquote><p id="d4db" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意:这只适用于mac，因为pmset是MAC特有的终端命令。</p><p id="0f82" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我电脑里存了一个文件叫battery.sh，文件有两行长。第一行是bash shebang ( <em class="ma"> #！/bin/bash </em>)而第2行是上面的命令。为了在状态行中显示电池，在我的. tmux.conf中的&lt;选项&gt;中我有</p><blockquote class="lx ly lz"><p id="9468" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated"><code class="eh ln lo lp lq b">#(path/to/battery.sh)</code></p></blockquote><p id="e77a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">(专业提示:在#前添加一个表情符号，如:♥，会在状态行显示为♥ 64%，看起来比64%更酷)</p><h1 id="7acc" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">第四步:插件</h1><p id="7185" class="pw-post-body-paragraph jc jd hu je b jf ls jh ji jj lt jl jm jn lu jp jq jr lv jt ju jv lw jx jy jz hn dt translated">好吧，这些并不是真正的插件，而是其他人已经写好的脚本。查看<a class="ae lr" href="https://github.com/jdxcode/tmux-spotify-info" rel="noopener ugc nofollow" target="_blank">https://github.com/jdxcode/tmux-spotify-info</a>获取当前播放的Spotify歌曲，这又是mac版，因为开发者用苹果脚本编写了这个脚本。但关键是您可以找到其他人已经为您的环境编写的脚本，并轻松地将它们添加到您的状态行中。</p><h1 id="025b" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">步骤5:自定义窗口</h1><p id="0983" class="pw-post-body-paragraph jc jd hu je b jf ls jh ji jj lt jl jm jn lu jp jq jr lv jt ju jv lw jx jy jz hn dt translated">希望您已经知道了会话、窗口和窗格之间的区别。如果没有，请快速阅读。</p><p id="f7f1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要点是，除了状态行的左侧和右侧之外，您还可以使用以下选项自定义窗口在状态中的显示方式:</p><blockquote class="lx ly lz"><p id="6966" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated"><code class="eh ln lo lp lq b">set -g window-status-format &lt;options&gt;</code></p></blockquote><p id="4176" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">其中<options>与之前的配置相同。您还可以自定义当前窗口的显示:</options></p><blockquote class="lx ly lz"><p id="68e0" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated"><code class="eh ln lo lp lq b">set -g window-status-current-format &lt;options&gt;</code></p></blockquote><p id="4e4d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">再次查看<a class="ae lr" href="https://linux.die.net/man/1/tmux" rel="noopener ugc nofollow" target="_blank">这个</a>站点，搜索“字符对替换为”查看一些专门为windows保留的Tmux命令。然后，您还可以自定义用于显示窗口之间差异的分隔符。自定义分隔符可能需要修补字体来显示某些字符。在谷歌上快速搜索修补过的字体应该会得到一些好的结果。对于很酷的unicode字符分隔符(尽管它们是unicode，仍然可能需要修补的字体)，请查看<a class="ae lr" href="http://www.amp-what.com/unicode/search/" rel="noopener ugc nofollow" target="_blank">这个网站</a>。</p><blockquote class="lx ly lz"><p id="b8d7" class="jc jd ma je b jf jg jh ji jj jk jl jm mb jo jp jq mc js jt ju md jw jx jy jz hn dt translated">提示:尝试搜索类似左三角形的东西</p></blockquote><p id="0378" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">感谢阅读。<a class="ae lr" href="https://github.com/sbernheim4/dotfiles/blob/251a30db0dbbd2953df35bfa0ef43e92ce15b752/tmux/.tmux.conf#L1" rel="noopener ugc nofollow" target="_blank">查看我自己的. tmux.conf </a></p></div></div>    
</body>
</html>