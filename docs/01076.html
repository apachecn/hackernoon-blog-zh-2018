<html>
<head>
<title>React + WebGL. Different ways of creating 3D apps with React.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React + WebGL。使用React创建3D应用程序的不同方式。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/react-webgl-different-ways-of-creating-3d-apps-with-react-3af844f61257?source=collection_archive---------2-----------------------#2018-02-02">https://medium.com/hackernoon/react-webgl-different-ways-of-creating-3d-apps-with-react-3af844f61257?source=collection_archive---------2-----------------------#2018-02-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="9364" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">最初发表于<a class="ae jj" href="https://www.zeolearn.com/magazine/react-webgl-different-ways-of-creating-3d-apps-with-react" rel="noopener ugc nofollow" target="_blank">泽奥利安</a></h2></div><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff jk"><img src="../Images/0bcaf3d356c18e4451ec54824ad8cd9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HT34WVhFuntDAi6jzpAGFA.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek"><a class="ae jj" href="http://www.larsberg.net/#triboids" rel="noopener ugc nofollow" target="_blank">http://www.larsberg.net/#triboids</a> by Lars Berg</figcaption></figure><p id="ef20" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在这篇文章中，我将描述一些用于用React创建3D在线游戏和网站的库/框架。这篇文章不是关于每种方法的缺点，它解释了可能对完成你的目标有用的可能性和特性。</p><h2 id="8bf4" class="kw kx hu bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated">何时使用React with WebGL以及如何使用？</h2><p id="cf2f" class="pw-post-body-paragraph ka kb hu kc b kd lr iv kf kg ls iy ki kj lt kl km kn lu kp kq kr lv kt ku kv hn dt translated">React最常见和最受欢迎的功能是“组件”——我的建议是在3D中使用这种模式，你可以在本文的<a class="ae jj" href="https://hackernoon.com/component-system-in-interactive-3d-of-web-18348eecf270?gi=b526939de8ef" rel="noopener ugc nofollow" target="_blank">中阅读更多关于3D组件的内容。</a></p><p id="47a6" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">TL；博士</strong>:将react用于小型3D网络应用程序(没有后期处理，没有太多的交互性)，这不是一个严格的规则，但当制作3D游戏时，将所有3D内容放在React组件中会导致你进一步开发的瓶颈，并限制你的可能性。</p><h1 id="25df" class="lw kx hu bd ky lx ly lz lc ma mb mc lg ja md jb lj jd me je lm jg mf jh lp mg dt translated">框架、库、工具</h1><p id="29c0" class="pw-post-body-paragraph ka kb hu kc b kd lr iv kf kg ls iy ki kj lt kl km kn lu kp kq kr lv kt ku kv hn dt translated">因此，让我们通过编写一个基本的3D应用程序来比较所有这些规则:</p><ul class=""><li id="6410" class="mh mi hu kc b kd ke kg kh kj mj kn mk kr ml kv mm mn mo mp dt translated">对层次使用反应</li><li id="9582" class="mh mi hu kc b kd mq kg mr kj ms kn mt kr mu kv mm mn mo mp dt translated">添加<strong class="kc hv">轨道控制</strong>(或者是模拟的)</li><li id="5832" class="mh mi hu kc b kd mq kg mr kj ms kn mt kr mu kv mm mn mo mp dt translated">动画(渲染图像应在每一帧上更新)</li></ul><h2 id="eeef" class="kw kx hu bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated"><a class="ae jj" href="https://github.com/Izzimach/react-three" rel="noopener ugc nofollow" target="_blank">反应-三</a></h2><p id="7ef5" class="pw-post-body-paragraph ka kb hu kc b kd lr iv kf kg ls iy ki kj lt kl km kn lu kp kq kr lv kt ku kv hn dt translated"><strong class="kc hv">浏览器限制。你可能会同意，这可能是你可以使用的最简单的工具组合，<strong class="kc hv"> <em class="mv">并且可能是使它工作的最简单的方法？呃… </em> </strong>嗯，我试着做了一个小的<em class="mv"> codepen例子</em>，令人惊讶的是，<a class="ae jj" href="https://github.com/Izzimach/react-three" rel="noopener ugc nofollow" target="_blank"> react-three </a>没有提供我可以在浏览器中使用的react绑定库的UMD版本，相反，他们只有一个Commonjs2版本，当你在codepen上使用它时，它不能工作(当然，因为它还是一个模块，而不是一个库)。如果你使用的是webpack或browserify这样的工具——这对你来说应该不是问题，而且当提到React时，这也是你应该做的，但我不能用这种方式编写代码。所以我编写了自己的hacky <code class="eh mw mx my mz b">react-three.js</code>来让一切正常工作。</strong></p><p id="6f82" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">同样的事情也发生在我和<code class="eh mw mx my mz b">ReactVR</code>以及<code class="eh mw mx my mz b">Aframe-react</code>身上。有问题吗？对我来说——是的，但可能对你来说不是，因为我的任务是在CodePen上显示所有代码，你可能会“以正确的方式”使用它。</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff na"><img src="../Images/488c4dd60a9332d0ce0c0a418e332035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjlTmAuCtWgmrbQ2imDHIw.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">react-three bindings</figcaption></figure><p id="e48b" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在<code class="eh mw mx my mz b">react-three</code>中，你做事情的方式和在<strong class="kc hv"> Three.js </strong>中一样，但是使用了react-binding，除了有时候你可能会看到与Three.js中的组件并不真正相关的道具，比如<code class="eh mw mx my mz b">&lt;Scene /&gt;</code>组件的<code class="eh mw mx my mz b">orbitControls</code>道具。(OrbitControls与相机一起工作，而不是与场景本身一起工作)。我希望在未来的版本中看到对其他类型控件的支持。</p><p id="4c1a" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">文档:</strong><a class="ae jj" href="https://github.com/Izzimach/react-three/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">https://github . com/izzi mach/react-three/blob/master/readme . MD</a></p><p id="774a" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">演示:</strong><a class="ae jj" href="https://github.com/Izzimach/r3test/" rel="noopener ugc nofollow" target="_blank">https://github.com/Izzimach/r3test/</a></p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="nb nc l"/></div></figure><h2 id="9d25" class="kw kx hu bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated"><a class="ae jj" href="https://github.com/WhitestormJS/react-whs" rel="noopener ugc nofollow" target="_blank">反应堆</a></h2><p id="cb46" class="pw-post-body-paragraph ka kb hu kc b kd lr iv kf kg ls iy ki kj lt kl km kn lu kp kq kr lv kt ku kv hn dt translated">这是我发明的工具:)它是为一个<a class="ae jj" href="https://github.com/WhitestormJS/whs.js" rel="noopener ugc nofollow" target="_blank"> WhitestormJS框架</a>开发的，该框架基于<a class="ae jj" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank"> Three.js </a>库，让你在3D (WebGL)世界中使用可重用组件&amp;模块。</p><blockquote class="nd ne nf"><p id="4ad3" class="ka kb mv kc b kd ke iv kf kg kh iy ki ng kk kl km nh ko kp kq ni ks kt ku kv hn dt translated">WhitestormJS 实现了一个具有组件系统和插件支持的核心，用于快速开发具有物理特性的3D场景。</p><p id="a1f3" class="ka kb mv kc b kd ke iv kf kg kh iy ki ng kk kl km nh ko kp kq ni ks kt ku kv hn dt translated">使用whitestorm自动化您的web应用程序既快速又舒适。这个引擎有自定义Physi.js库实现的物理支持，比其他的要快很多。框架提供了扩展的组件控制和高帧速率，因为它使用WebWorkers技术进行多线程处理。</p></blockquote><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nj"><img src="../Images/b68d43ff76ab4ee9b46f6be2f98be390.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nZj06rAcxyosLbzaBWPr8g.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">react-whs bindings</figcaption></figure><p id="5eed" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">如果您以前使用过<strong class="kc hv"> whs </strong>，那么使用<code class="eh mw mx my mz b">react-whs</code>相当容易，因为您不需要猜测特定组件存在哪些道具，因为它会自动将params {}对象转换为react的道具。只需比较两者:</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nk"><img src="../Images/3f3e4cc1b3439e31bb4afb21f7a60b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KcoLiT664FyPorhAZmjRUA.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">whs.js</figcaption></figure><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nl"><img src="../Images/5086609b6f53df0bf65528ae631218ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gWnPvWUsn_8YBzMNqawAug.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">react-whs</figcaption></figure><p id="bfca" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我想展示的另一个好特性是，WHS组件可以简单地转换成React组件:</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nm"><img src="../Images/bfd7fe358f4e6818b81619cc4713111d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dmVaEd39yPxO_JAFbanEnQ.png"/></div></div></figure><p id="c077" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">您可以传递一个回调(<code class="eh mw mx my mz b">refComponent</code>或<code class="eh mw mx my mz b">refApp</code>)来获取React外部的whs实例的引用</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff nn"><img src="../Images/bdb5f8e78f0d6fffe72e420c51e5c368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bL1xEUtIuC7zcCf_-_Cu9Q.png"/></div></div></figure><p id="a75c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">文档:</strong><a class="ae jj" href="https://github.com/WhitestormJS/react-whs/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">https://github . com/WhitestormJS/react-whs/blob/master/readme . MD</a></p><p id="006e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">演示:</strong>T15】https://codepen.io/sasha240100/pen/dNqKMd?editors=1010</p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="nb nc l"/></div></figure><h2 id="075b" class="kw kx hu bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated"><a class="ae jj" href="https://facebook.github.io/react-vr/" rel="noopener ugc nofollow" target="_blank">反应堆</a></h2><blockquote class="nd ne nf"><p id="1522" class="ka kb mv kc b kd ke iv kf kg kh iy ki ng kk kl km nh ko kp kq ni ks kt ku kv hn dt translated"><strong class="kc hv"> React VR </strong>让你只用JavaScript就能构建VR应用。它使用与React相同的设计，让您从声明性组件中构建丰富的VR世界和UI。</p><p id="faba" class="ka kb mv kc b kd ke iv kf kg kh iy ki ng kk kl km nh ko kp kq ni ks kt ku kv hn dt translated">来自<a class="ae jj" href="https://facebook.github.io/react-vr/index.html" rel="noopener ugc nofollow" target="_blank"> ReactVR网站</a></p></blockquote><p id="f012" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">ReactVR是脸书React团队做的一个很好很有前景的项目。和大多数3D框架一样，它基于<strong class="kc hv"> Three.js </strong>。</p><p id="6442" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在写这篇文章的时候，只有一些几何图形可用(球体、盒子、圆柱体)——对于任何其他形状，你需要使用<code class="eh mw mx my mz b">&lt;Model /&gt;</code>组件并导入<em class="mv"> obj/mtl。</em></p><p id="93c9" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">材料也是如此，你可以在<code class="eh mw mx my mz b">MeshBasicMaterial</code>(不依赖光的，<code class="eh mw mx my mz b">lit = false</code>)和<code class="eh mw mx my mz b">MeshPhongMaterial</code>(依赖光的，<code class="eh mw mx my mz b">lit = true</code>)之间做出选择。—如果要使用自定义材质，需要在<code class="eh mw mx my mz b">materialParameters</code>对象内提供<code class="eh mw mx my mz b">vertexShader</code> &amp; <code class="eh mw mx my mz b">fragmentShader</code>属性。</p><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff no"><img src="../Images/f054f7353965960e447913e7f56303ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IeIR3d8-ZoqlkHpBqEmWJw.png"/></div></div></figure><p id="6153" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">他们决定在3D 中拥有<a class="ae jj" href="https://facebook.github.io/react-vr/docs/3dcoordinates-and-transforms.html" rel="noopener ugc nofollow" target="_blank">类似css的坐标系。Three.js“位置”被命名为“平移”,这意味着使用平移向量将对象从其轴心移动。你有了<code class="eh mw mx my mz b">rotateX, rotateY and rotateZ</code>而不是<code class="eh mw mx my mz b">rotation</code>或<code class="eh mw mx my mz b">quaternion</code>。这些非常类似于</a><a class="ae jj" href="https://developer.mozilla.org/en-US/docs/Web/CSS/transform" rel="noopener ugc nofollow" target="_blank"> css转换</a>。</p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="nb nc l"/></div></figure><h2 id="ce61" class="kw kx hu bd ky kz la lb lc ld le lf lg kj lh li lj kn lk ll lm kr ln lo lp lq dt translated"><a class="ae jj" href="https://github.com/ngokevin/aframe-react" rel="noopener ugc nofollow" target="_blank"> Aframe-react </a></h2><p id="21b2" class="pw-post-body-paragraph ka kb hu kc b kd lr iv kf kg ls iy ki kj lt kl km kn lu kp kq kr lv kt ku kv hn dt translated">A-frame是Mozilla WebVR团队做的一个很酷的Three.js框架。</p><blockquote class="nd ne nf"><p id="eb69" class="ka kb mv kc b kd ke iv kf kg kh iy ki ng kk kl km nh ko kp kq ni ks kt ku kv hn dt translated">A-Frame可以从一个普通的HTML文件开发出来，而不需要安装任何东西。尝试A-Frame的一个很好的方法是在Glitch 上重新混合starter示例，Glitch是一个在线代码编辑器，可以立即免费托管和部署。或者，创建一个<code class="eh mw mx my mz b">.html</code>文件，并在<code class="eh mw mx my mz b">&lt;head&gt;</code>中包含一个A帧</p></blockquote><figure class="jl jm jn jo fq jp fe ff paragraph-image"><div role="button" tabindex="0" class="jq jr di js bf jt"><div class="fe ff np"><img src="../Images/c1ca7d740f571313955319e2f3ed9ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4WzvLm7pVmfr4gs_ghL2ZA.png"/></div></div><figcaption class="jw jx fg fe ff jy jz bd b be z ek">aframe-react</figcaption></figure><p id="e6b3" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在<strong class="kc hv"> aframe-react </strong>中，你得到<code class="eh mw mx my mz b">Scene</code>和<code class="eh mw mx my mz b">Entity</code>(任何不是场景的东西，实体= 3D物体)react组件。下面是如何将任何a-frame自定义html标签转换为React组件:假设您有<code class="eh mw mx my mz b">&lt;a-sky color="#000000"&gt;&lt;/a-sky&gt;</code>，那么<code class="eh mw mx my mz b">a-sky</code>就是您的<strong class="kc hv">原语</strong>道具，您将属性转换为道具。</p><p id="c672" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">文档:</strong><a class="ae jj" href="https://aframe.io/docs/0.7.0/introduction/" rel="noopener ugc nofollow" target="_blank">https://aframe.io/docs/0.7.0/introduction/</a></p><figure class="jl jm jn jo fq jp"><div class="bz el l di"><div class="nb nc l"/></div></figure><h1 id="06a5" class="lw kx hu bd ky lx ly lz lc ma mb mc lg ja md jb lj jd me je lm jg mf jh lp mg dt translated">结论</h1><p id="d7b5" class="pw-post-body-paragraph ka kb hu kc b kd lr iv kf kg ls iy ki kj lt kl km kn lu kp kq kr lv kt ku kv hn dt translated">WebGL发展很快，React中已经有很多覆盖webgl的大项目(在我们的例子中——three . js)。</p><p id="d9ef" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">这些是three.js功能的包装器，它只允许您访问常用选项(<em class="mv">而不是高级功能</em>)，这是因为您永远不会在React中使用WebGL来构建高级的东西(复杂的3D游戏或创意网站)。</p><p id="6164" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">React+WebGL作为创建内容的方式对于处理基本功能的简单直观的3D web应用程序来说是很好的，例如3D模型查看或像<a class="ae jj" href="https://aframe.io/examples/showcase/shopping/" rel="noopener ugc nofollow" target="_blank"> this </a>这样的简单VR体验。</p><p id="90d9" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">值得一提的是这个WebGL-React项目:</p><ul class=""><li id="b8d7" class="mh mi hu kc b kd ke kg kh kj mj kn mk kr ml kv mm mn mo mp dt translated"><a class="ae jj" href="https://github.com/gre/gl-react-v2" rel="noopener ugc nofollow" target="_blank"><strong class="kc hv">GL-React</strong></a><strong class="kc hv"/>—React在描述性VDOM范式中对图像和内容实现复杂效果的绑定。</li><li id="e393" class="mh mi hu kc b kd mq kg mr kj ms kn mt kr mu kv mm mn mo mp dt translated"><a class="ae jj" href="https://github.com/jeffreylanters/react-unity-webgl" rel="noopener ugc nofollow" target="_blank"><strong class="kc hv">react-unity-web GL</strong></a><strong class="kc hv"/>—<strong class="kc hv"/>将您的Unity应用程序嵌入react应用程序中，编写具有双向Unity和react通信的交互界面。</li></ul><blockquote class="nq"><p id="b3ee" class="nr ns hu bd nt nu nv nw nx ny nz kv ek translated">最近我为Skillshare制作了一个<a class="ae jj" href="https://skl.sh/2shhq00" rel="noopener ugc nofollow" target="_blank">“WebGL世界介绍”</a> <strong class="ak">课程，</strong>你可能会在那里找到一些有趣的web GL秘密！点击这里。</p></blockquote></div></div>    
</body>
</html>