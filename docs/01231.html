<html>
<head>
<title>Ubuntu 16 installer boot image for Dell Chromebook 13 (Lulu)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">戴尔Chromebook 13 (Lulu)的Ubuntu 16安装程序启动映像</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/ubuntu-16-installer-boot-image-for-dell-chromebook-11-candy-4bdf281f55df?source=collection_archive---------20-----------------------#2018-02-07">https://medium.com/hackernoon/ubuntu-16-installer-boot-image-for-dell-chromebook-11-candy-4bdf281f55df?source=collection_archive---------20-----------------------#2018-02-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="4779" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">戴尔Chromebook 13英寸7310 (Lulu型号)是一款不错的Chromebook，我们要做的第一件事就是在上面安装Ubuntu。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff jp"><img src="../Images/7300e3269bb7d4176acf9cd627c6d880.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*527GmPDAyAzoMQLXxSqORg.png"/></div><figcaption class="jx jy fg fe ff jz ka bd b be z ek">Don’t rush to Dell website: it’s out of production. Only student versions are available now</figcaption></figure><h1 id="e373" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">传统引导</h1><p id="68dd" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">在该设备上启动Linux时，不需要移除写保护开关。我将在此就我遵循的程序给出一些说明，以供参考。</p><p id="dc26" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">第一步是将chromebook切换到开发者模式；你可以使用Arch Linux的文档来做这件事。应该遵循包括“启用SeaBIOS”在内的所有步骤，但是不要重启机器。</p><h1 id="f961" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">闪出右边的海豚</h1><p id="bb4f" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">为了在这个模型上安装SeaBIOS，我使用了John Lewis提供的脚本，您可以在这里找到文档和说明*:</p><p id="f4ed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae le" href="https://johnlewis.ie/custom-chromebook-firmware/rom-download/" rel="noopener ugc nofollow" target="_blank">https://John Lewis . ie/custom-chrome book-firmware/rom-download/</a></p><p id="864b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此处的矩阵表明，由于支持RW_LEGACY模式，因此无需移除写保护开关。</p><p id="9772" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">*=请向作者捐款以支持他的工作，否则我们不会在这里用这台设备享受Ubuntu。</p><p id="f23b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以下载并检查该脚本，看看它是做什么的；它将检测型号，然后下载正确的ROM文件，并为您提供将它安装在磁盘的RW_LEGACY插槽上的选项。</p><p id="6199" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在上一步开始的chromebook root shell上运行该脚本(如果愿意，可以在阅读/修改后运行);一旦完成，恭喜你，你现在已经为你的设备解锁了一个工作的SeaBIOS！</p><h1 id="d3d6" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">gfxboot问题</h1><p id="65c6" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">在将Ubuntu 16安装程序ISO(桌面或服务器)刷新到USB设备并按Ctrl+L启动后，您将不幸地被可怕的gfxboot错误阻止:</p><pre class="jq jr js jt fq lf lg lh li aw lj dt"><span id="d3f2" class="lk kc hu lg b fv ll lm l ln lo">graphics initialization failled<br/>Error setting up gfxboot<br/>boot: </span></pre><p id="c882" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以在网上看到许多写<em class="lp">【帮助】</em>并进入下一阶段的绝望电话，但这在今天是没有帮助的。这个bug在<a class="ae le" href="https://bugs.launchpad.net/ubuntu/+source/gfxboot-theme-ubuntu/+bug/1530530" rel="noopener ugc nofollow" target="_blank">上游发射台问题这里</a>有详细解释。</p><p id="ad2f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">基本上这意味着引导装载程序阶段不能设置一个有效的视频模式，但是记住:这只是引导装载程序，而不是实际的安装程序。</p><h1 id="c91e" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">胖靴(netboot)</h1><p id="45e2" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">最简单的解决方案是更改isolinux.cfg文件，这样它就可以选择第一个条目(安装程序)而不显示菜单，但是这被证明是一个死胡同，因为我没有成功地修改ISO并将其再次刷新为可引导。</p><p id="915c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我决定改变方法，尝试一个来自USB的胖启动盘，对于Debian/Ubuntu来说，它通常被称为<em class="lp">netboot</em>/<em class="lp">boot.img.gz</em>。</p><p id="e716" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以从备用下载部分下载Ubuntu netboot镜像:</p><div class="lq lr fm fo ls lt"><a href="http://archive.ubuntu.com/ubuntu/dists/xenial-updates/main/installer-amd64/current/images/netboot/" rel="noopener  ugc nofollow" target="_blank"><div class="lu ab ej"><div class="lv ab lw cl cj lx"><h2 class="bd hv fv z el ly eo ep lz er et ht dt translated">/Ubuntu/dists/xenial-updates/main/installer-amd64/current/images/netboot的索引</h2><div class="ma l"><h3 class="bd b fv z el ly eo ep lz er et ek translated">编辑描述</h3></div><div class="mb l"><p class="bd b gc z el ly eo ep lz er et ek translated">archive.ubuntu.com</p></div></div></div></a></div><p id="600e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个映像是一个普通的FAT16分区，有一个可引导的MBR，所以没有分区表。它可能是用<em class="lp"> makeboot </em>创建的(在网上找不到关于Debian/Ubuntu如何创建它的说明)，我也无法从头创建一个更大的(稍后你会明白为什么这很重要)。</p><p id="1dc0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以通过以下方式将映像闪存到正确的USB设备:</p><pre class="jq jr js jt fq lf lg lh li aw lj dt"><span id="fd31" class="lk kc hu lg b fv ll lm l ln lo">gunzip &lt; boot.img.gz | dd of=/dev/sdX bs=16M</span></pre><p id="f05c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">用实际的USB大容量存储设备替换/dev/sdX(尽量不要在这个过程中刷新你的主盘)。</p><h1 id="234c" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">英特尔无线网络</h1><p id="a50d" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">netboot镜像将很好地启动，并允许我们到达文本安装程序，但是您将很快意识到无线网络接口无法识别。这似乎是由于缺少一个模块，<em class="lp"> iwlmvm </em>。</p><p id="a41c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">仅仅从initrd内部的linux-image-extra包中复制iwlmvm.ko是不行的，因为内核符号不匹配；此外，由于大小限制(boot.img非常小),从linux-image-extra添加所有模块不是一个选项，因此我必须使用以下过程修补现有的initrd:</p><ol class=""><li id="ca80" class="mc md hu it b iu iv iy iz jc me jg mf jk mg jo mh mi mj mk dt translated">创建initrd中已经存在的所有模块文件的列表</li><li id="4dae" class="mc md hu it b iu ml iy mm jc mn jg mo jk mp jo mh mi mj mk dt translated">从<a class="ae le" href="http://security.ubuntu.com/ubuntu/pool/main/l/linux/linux-image-extra-4.4.0-101-generic_4.4.0-101.124_amd64.deb" rel="noopener ugc nofollow" target="_blank">http://security . Ubuntu . com/Ubuntu/pool/main/l/linux/Linux-image-4 . 4 . 0-101-generic _ 4 . 4 . 0-101 . 124 _ amd64 . deb</a>中复制这样的模块和<em class="lp">boot/vmlinuz-4 . 4 . 0–101-generic</em>(简称为Linux)</li><li id="3e05" class="mc md hu it b iu ml iy mm jc mn jg mo jk mp jo mh mi mj mk dt translated">从<a class="ae le" href="http://security.ubuntu.com/ubuntu/pool/main/l/linux/linux-image-extra-4.4.0-101-generic_4.4.0-101.124_amd64.deb" rel="noopener ugc nofollow" target="_blank">http://security . Ubuntu . com/Ubuntu/pool/main/l/Linux/Linux-image-extra-4 . 4 . 0-101-generic _ 4 . 4 . 0-101.124 _ amd64 . deb</a>中复制缺失的iwlmvm.ko</li><li id="30e7" class="mc md hu it b iu ml iy mm jc mn jg mo jk mp jo mh mi mj mk dt translated">将所有复制的文件(除了linux内核之外)放在initrd.gz中(我在这个过程中移除了其他未使用的模块以释放一些空间)</li><li id="83ae" class="mc md hu it b iu ml iy mm jc mn jg mo jk mp jo mh mi mj mk dt translated">将内核(<em class="lp"> /linux </em>)和更新后的initrd.gz复制到挂载的boot.img上</li></ol><p id="1c1b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">同时，我还修复了<em class="lp"> vga= </em>行，以便为chromebook的显示屏使用正确的值，即0x340。</p><h1 id="9b80" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">成功</h1><p id="5bed" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">最终结果是安装程序几乎完美地启动了<em class="lp">程序，你会收到一个网络未检测到的错误，然后你必须返回到安装菜单并选择“执行一个shell”。在提示符下，只需运行:</em></p><pre class="jq jr js jt fq lf lg lh li aw lj dt"><span id="0911" class="lk kc hu lg b fv ll lm l ln lo"># rmmod iwlwifi<br/># modprobe iwlwifi<br/># exit</span></pre><p id="da17" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">并在最终能够配置无线网络后继续安装。</p><h1 id="1411" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第一次开机</h1><p id="6e84" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">完成安装后，您将看不到GRUB启动菜单；重新使用引导镜像进入救援模式下的根分区(它会设置一个chroot)，启用<code class="eh mq mr ms lg b">/etc/default/grub</code>中的<code class="eh mq mr ms lg b">GRUB_TERMINAL=console</code>行，然后运行<code class="eh mq mr ms lg b">update-grub</code>。</p><p id="d7e3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此时，您可以将<code class="eh mq mr ms lg b">/etc/network/interfaces</code>从安装环境复制到新的根文件系统中，这样在下次引导时，无线网络也将被配置。</p><h1 id="91c4" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">引导映像</h1><p id="a9cd" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">你可以自己重复上面的步骤来修复引导镜像或者下载我从<a class="ae le" href="https://gist.github.com/gdm85/9756b8bdaadcd2af5e2caf9d8d12f1de" rel="noopener ugc nofollow" target="_blank">改过来的文件这个要诀</a>:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="7f56" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最重要的文件是<em class="lp"> linux </em>和<em class="lp">initrd.gz</em>；像平常一样挂载USB存储器(Ubuntu将允许你这样做，即使从GUI也没有问题),并用gist中提供的文件覆盖其中的文件。</p></div></div>    
</body>
</html>