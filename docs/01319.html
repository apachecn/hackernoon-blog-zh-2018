<html>
<head>
<title>How to build a complete JavaScript library using ES6 and Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用ES6和Webpack构建一个完整的JavaScript库</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-complete-workshop-build-your-es6-code-into-a-library-using-webpack-80295faeb833?source=collection_archive---------2-----------------------#2018-02-11">https://medium.com/hackernoon/a-complete-workshop-build-your-es6-code-into-a-library-using-webpack-80295faeb833?source=collection_archive---------2-----------------------#2018-02-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="065b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">大家好。我们将逐步开发一个<a class="ae jx" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>插件/库。在文章的最后，我们将完成构建一个Js插件，它将生成一个玩井字游戏的UI。此外，在本课程结束后，您将有效掌握以下知识:</p><ul class=""><li id="d56b" class="jy jz hu jb b jc jd jg jh jk ka jo kb js kc jw kd ke kf kg dt translated">最常用的<a class="ae jx" href="https://en.wikipedia.org/wiki/ECMAScript" rel="noopener ugc nofollow" target="_blank"> ES6(es2015) </a>核心特性</li><li id="b26d" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">如何将你的<a class="ae jx" href="https://hackernoon.com/tagged/es6-code" rel="noopener ugc nofollow" target="_blank"> ES6代码</a>转换成一个可以通过脚本标签使用的库</li><li id="a108" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">构建系统宽度npm和webpack</li><li id="4a64" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">使用下一代JavaScript和<a class="ae jx" href="https://www.dofactory.com/javascript/design-patterns" rel="noopener ugc nofollow" target="_blank">单例设计模式</a>构建任何Js插件的知识</li></ul><blockquote class="km kn ko"><p id="18b5" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">你可以在https://github.com/debabrata100/tic-tac-toe.git<a class="ae jx" href="https://github.com/debabrata100/tic-tac-toe.git" rel="noopener ugc nofollow" target="_blank">找到本次研讨会的代码库</a></p></blockquote><p id="6801" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">让我们看看最终版本:</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff kt"><img src="../Images/57e8d942c90169960c5c1aaa1df34ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*o4deMFoTTo4Q_LxOUoHEqg.png"/></div></figure><p id="67c9" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们的库将能够生成一个在web服务器上玩井字游戏的用户界面。</p><p id="2b44" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">建成后，我们将按如下方式使用我们的库:</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="4758" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的<code class="eh ld le lf lg b"><strong class="jb hv">index.html</strong></code>文件中，一个外部脚本<code class="eh ld le lf lg b"><strong class="jb hv"><em class="kp">game-lib.js</em></strong></code> <strong class="jb hv"> <em class="kp"> </em> </strong>(我们最终要生成)会暴露一个全局对象<strong class="jb hv">游戏</strong>。</p><p id="8b6d" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><code class="eh ld le lf lg b">index.html</code>文件中的以下代码片段将使用<strong class="jb hv">游戏</strong>对象初始化游戏:</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="4e54" class="ll lm hu lg b fv ln lo l lp lq">Game.init({</span><span id="6eb5" class="ll lm hu lg b fv lr lo l lp lq">     container:"game_container",</span><span id="46f7" class="ll lm hu lg b fv lr lo l lp lq">     cellHeight: 100,</span><span id="f938" class="ll lm hu lg b fv lr lo l lp lq">     cellWidth: 100</span><span id="cc59" class="ll lm hu lg b fv lr lo l lp lq">});</span></pre><ul class=""><li id="617b" class="jy jz hu jb b jc jd jg jh jk ka jo kb js kc jw kd ke kf kg dt translated"><strong class="jb hv">容器</strong> : <strong class="jb hv"> </strong>取html元素的css id选择器的名称，该元素将包含游戏库提供的游戏UI。</li><li id="82df" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated"><strong class="jb hv"> cellHeight </strong>:以像素为单位获取游戏中每个单元格的高度</li><li id="da60" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated"><strong class="jb hv">单元格宽度</strong>:这是游戏中每个单元格的宽度，以像素为单位</li></ul><p id="3720" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">要遵循的步骤:</p><ul class=""><li id="5987" class="jy jz hu jb b jc jd jg jh jk ka jo kb js kc jw kd ke kf kg dt translated">项目目录结构</li><li id="25e8" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">安装webpack</li><li id="64a7" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">开发库</li></ul><h1 id="6af8" class="ls lm hu bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo dt translated">目录结构:</h1><p id="76de" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">我们将使用以下目录结构创建我们的项目</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="6d6b" class="ll lm hu lg b fv ln lo l lp lq">+ -- app<br/>|    +-- index.js<br/>| -- build<br/>|    +-- game-lib.js<br/>|    +-- game-lib.min.js<br/>|    +-- index.html</span></pre><p id="b5a2" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv"> app </strong>文件夹包含生成库所需的源文件/模块。<strong class="jb hv">构建</strong>文件夹包含我们上面讨论过的<strong class="jb hv">index.html</strong>和两个库文件lib.js和lib.min.js，这两个库文件是在捆绑源文件后生成的。</p><h1 id="9a64" class="ls lm hu bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo dt translated">安装Webpack</h1><p id="2a4f" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">在ES6(2015)之前，有如此多的模块系统来实现JavaScript的模块化。让我们看看JavaScript模块性的<a class="ae jx" href="https://github.com/myshov/history-of-javascript/tree/master/4_evolution_of_js_modularity" rel="noopener ugc nofollow" target="_blank">演变。为了实现原生JavaScript的模块化，我相信ES6模块系统是迄今为止最辉煌的发现。但是它的大部分功能只被</a><a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#Browser_compatibility" rel="noopener ugc nofollow" target="_blank">少数现代浏览器</a>支持。最流行的工具<a class="ae jx" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> <strong class="jb hv"> webpack </strong> </a> <strong class="jb hv">，</strong>一个javascript模块捆绑器，它将具有依赖关系的模块作为输入，解析所有依赖关系并生成一个静态Javascript文件，在本例中为game-lib.js/game-lib.min.js.</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="fe ff mu"><img src="../Images/000ce850dbbeef485292cbcb59b16fba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VGSoyiIu6HsCsB43bLD3oA.png"/></div></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">Webpack module bundler</figcaption></figure><p id="1fa7" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">还有一个痛点。ES6的大多数特性，特别是箭头函数表达式、扩展操作符、析构函数并不被所有的浏览器支持。因此，我们需要一个transpiler将我们的ES6代码转换成所有浏览器都支持的较低版本。巴贝尔以最有效的方式完成了这项工作。它是webpack的扩展，也称为<a class="ae jx" href="https://webpack.js.org/concepts/loaders/#using-loaders" rel="noopener ugc nofollow" target="_blank"> <strong class="jb hv">加载器</strong> </a> <strong class="jb hv">。【babel和Webpack都被流行的JavaScript框架共同使用，如<a class="ae jx" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>、<a class="ae jx" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>、<a class="ae jx" href="https://vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vue js </a>。</strong></p><h1 id="1352" class="ls lm hu bd lt lu lv lw lx ly lz ma mb mc md me mf mg mh mi mj mk ml mm mn mo dt translated">开发库</h1><p id="425e" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated"><strong class="jb hv">入门</strong></p><p id="4306" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">Webpack约定:</p><ul class=""><li id="d7f5" class="jy jz hu jb b jc jd jg jh jk ka jo kb js kc jw kd ke kf kg dt translated">Webpack最适合NPM</li><li id="7981" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">使用模块系统(ES6、<a class="ae jx" href="http://www.commonjs.org/" rel="noopener ugc nofollow" target="_blank">普通</a>、<a class="ae jx" href="http://requirejs.org/docs/whyamd.html#amd" rel="noopener ugc nofollow" target="_blank">和</a>)</li></ul><p id="62ea" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在继续之前，请确保您已经在系统中安装了node和npm。如果没有，检查这个<a class="ae jx" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">连杆</a>。</p><p id="67a1" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">检查节点和npm是否已安装</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="9b21" class="ll lm hu lg b fv ln lo l lp lq">$ node -v<br/>$ npm -v</span></pre><p id="8efc" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">让我们开始我们的工作，将项目目录创建为“井字游戏”并初始化npm</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="a31c" class="ll lm hu lg b fv ln lo l lp lq">$ mkdir tic-tac-toe<br/>$ cd tic-tac-toe<br/>$ npm init -y<br/>{<br/>  "name": "learn",<br/>  "version": "1.0.0",<br/>  "description": "",<br/>  "main": "index.js",<br/>  "scripts": {<br/>    "test": "echo \"Error: no test specified\" &amp;&amp; exit 1"<br/>  },<br/>  "keywords": [],<br/>  "author": "",<br/>  "license": "ISC"<br/>}</span></pre><p id="6f08" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">$ <strong class="jb hv"> npm init -y </strong>命令使用默认配置的package.json文件创建一个节点项目。这个文件是一个json对象。我们将安装映射到这个json对象的依赖项。</p><p id="16d8" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">安装Webpack</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="ce5e" class="ll lm hu lg b fv ln lo l lp lq">$ npm install webpack --save-dev</span></pre><p id="307b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在在编辑器中打开您的项目。它看起来会像这样</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="mv mw di mx bf my"><div class="fe ff nd"><img src="../Images/3a4c6102e54de8d6561a0d097200f3f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NJD78OtCcKsB7qpFeXL4hQ.png"/></div></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">project opened in atom editor</figcaption></figure><p id="2302" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在在根文件夹中创建一个名为<strong class="jb hv"> build </strong>的文件夹。在build中创建我们的第一个名为index.html的文件。快速插入html标签。为标题标签提供标题井字符号。在头部分包含一个脚本标签，并提到一个相对于src属性的路径，如<em class="kp"> game-lib.js. </em>并为游戏提供一个容器(game_container)，如下所示</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="0fb1" class="ll lm hu lg b fv ln lo l lp lq">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;meta charset="utf-8"&gt;<br/>    &lt;title&gt;Tic Tac Toe&lt;/title&gt;<br/>    &lt;script src="game-lib.js" type="text/javascript"&gt;&lt;/script&gt;<br/>  &lt;/head&gt;<br/>  &lt;body&gt;<br/>    &lt;div id="game_container"&gt;</span><span id="41a3" class="ll lm hu lg b fv lr lo l lp lq">    &lt;/div&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="b09f" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在根目录下再创建一个文件夹<strong class="jb hv"> app </strong>。在app内创建一个名为<strong class="jb hv"> index.js </strong>的文件，并编写我们的第一个JavaScript代码，如下所示</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="f5fe" class="ll lm hu lg b fv ln lo l lp lq">let fun = ()=&gt; {<br/>  console.log("We are ready for Tic-Tac-Toe");<br/>}<br/>fun();</span></pre><p id="75fb" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在，在设置webpack之前，让我们在这里安装一些东西</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="8398" class="ll lm hu lg b fv ln lo l lp lq">$ npm install babel-core babel-loader babel-preset-es2015 webpack-dev-server babel-polyfill --save-dev</span></pre><p id="44d1" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">这里<strong class="jb hv"> babel-loader </strong>将实际转换ES6代码，<strong class="jb hv"> babel-preset-es2015 </strong>允许我们指定一个允许ES6转换的预设，<strong class="jb hv"> webpack-dev-server </strong>允许我们进行自动实时代码更新。要了解<a class="ae jx" href="https://babeljs.io/docs/usage/polyfill/" rel="noopener ugc nofollow" target="_blank"> <strong class="jb hv">巴别塔-聚宝盆</strong> </a>，看看这些伟大的文章<a class="ae jx" href="https://remysharp.com/2010/10/08/what-is-a-polyfill" rel="noopener ugc nofollow" target="_blank">什么是聚宝盆</a>和<a class="ae jx" href="https://stackoverflow.com/questions/6599815/what-is-the-difference-between-a-shim-and-a-polyfill" rel="noopener ugc nofollow" target="_blank">垫片</a>，你就会对这些有具体的了解。</p><p id="04df" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在，为了让webpack工作，我们需要在根目录中添加一个名为<strong class="jb hv"> webpack.config.js </strong>的特定文件。将以下代码添加到该文件中</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="0741" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的配置文件中有一个名为<strong class="jb hv"> config </strong>的对象。它拥有5个属性。让我们逐一讨论</p><p id="5d87" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv">条目</strong>:'。/path/to/my/entry/file.js。在我们的例子中，条目文件是index.js，因为我们已经提到了相对路径。/app/index.js '</p><p id="9e7a" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv">输出</strong>:这里我们需要提到与webpack如何发出结果相关的选项。我们提到的最终编译文件(游戏库)的名称为<strong class="jb hv"> <em class="kp">文件名</em> </strong>属性，文件的位置在<strong class="jb hv"> <em class="kp">路径</em> </strong>属性。该值应该是一个<strong class="jb hv">绝对路径</strong>。这里<em class="kp"> __dirname </em>是当前模块范围内的全局变量，提供当前模块的父目录的绝对路径。</p><p id="f1ba" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv">模块</strong>:这里需要提一下关于模块的配置。我们已经给出了装载机的配置。我们已经使用babel-loader来移植我们的代码。<strong class="jb hv"> <em class="kp">测试</em> </strong>属性采用一个正则表达式来告诉哪种文件将通过这个加载程序运行，而<strong class="jb hv"> <em class="kp">排除</em> </strong>是模块应该排除的文件。我们添加了要排除的node_modules。</p><p id="9e8d" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv">预设</strong>:这让我们可以使用es2015(ES6)。如果我们想解析jsx代码，我们可以提到<a class="ae jx" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> react </a>。</p><p id="35d3" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv"> devserver </strong>:用于创建webpack开发服务器，允许我们在<a class="ae jx" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>运行web服务器。<strong class="jb hv"> inline </strong>属性为true允许我们运行自动实时代码更新。</p><p id="26e7" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在我们已经准备好了webpack。运行下面的命令，看看神奇之处</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="5e6d" class="ll lm hu lg b fv ln lo l lp lq">$ webpack</span></pre><p id="ceff" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">你将能够在build文件夹下看到一个名为<strong class="jb hv"> game-lib.js </strong>的新文件，这是我们在app文件夹下的index.js文件中编写的代码的编译版本</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="04b6" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">上面的代码不是一个缩小的版本，我们将在研讨会结束时通过引入一个webpack-production-config.js文件来创建一个缩小的版本。</p><blockquote class="km kn ko"><p id="26dd" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">如果您想了解更多关于webpack的信息，<a class="ae jx" href="https://webpack.js.org/configuration/" rel="noopener ugc nofollow" target="_blank">请点击此处</a>了解最新的webpack-4.0功能和配置</p></blockquote><p id="bce1" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在让我们运行下面的代码</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="ca50" class="ll lm hu lg b fv ln lo l lp lq">$ webpack-dev-server</span></pre><p id="6508" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">这将生成一个开发服务器。导航到<a class="ae jx" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000/ </a>并打开浏览器控制台。您将能够在浏览器控制台中看到消息“<em class="kp">我们准备好玩井字游戏了</em>”。</p><blockquote class="km kn ko"><p id="5921" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">如果您正在使用我的git库，那么运行下面的代码来查看到目前为止我们已经达到的代码版本</p><p id="1eb0" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">$ git克隆<a class="ae jx" href="https://github.com/debabrata100/tic-tac-toe.git" rel="noopener ugc nofollow" target="_blank">https://github.com/debabrata100/tic-tac-toe.git</a>T30】$ CD井字游戏<br/> $ git结帐b350603</p></blockquote><h2 id="6aa6" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">添加库模板</h2><p id="bb1f" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">现在在编辑器中打开index.js文件。我们应该创建一个<strong class="jb hv">游戏</strong>对象，并为其添加一个<strong class="jb hv">初始化</strong>方法</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="a4b0" class="ll lm hu lg b fv ln lo l lp lq">(function(window){<br/>let _init = ()=&gt;{};<br/>    window.Game = {<br/>       init:_init<br/>    }<br/>})(window)</span></pre><p id="e53b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的代码中，我们使用了IIFE(立即调用的函数表达式)。当试图避免污染全局名称空间时，经常使用这种模式，因为在life中使用的所有变量(像在任何其他普通函数中一样)在其作用域之外是不可见的。因此我们将<em class="kp">游戏对象</em>存储到<strong class="jb hv">窗口</strong>变量中，因为窗口变量是全局可用的。</p><p id="aacf" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">如果你对<strong class="jb hv">让</strong>感到困惑，请访问此<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let" rel="noopener ugc nofollow" target="_blank">链接</a>了解ES6魔法关键词<em class="kp">让</em>对抗<em class="kp"> var </em></p><p id="52b7" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">所以我们给init添加了一个Window对象和init方法。但是我们应该在游戏初始化时收到一些参数。让我们以ES6的方式在init方法中接收容器参数</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="a5ca" class="ll lm hu lg b fv ln lo l lp lq">(function(window){</span><span id="5641" class="ll lm hu lg b fv lr lo l lp lq"> const _init = ({container = ''})=&gt;{<br/>    let gameBody = document.getElementById(container);<br/>    if(gameBody === undefined)<br/>      gameBody = document.getElementsByTagName("body")[0];<br/>      console.log("Game Initialised");<br/>  }<br/>  window.Game = {<br/>    init:_init<br/>  }<br/>})(window)</span></pre><p id="43e6" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">您可能想知道在对象内接收param container= ' '而不是like container:' '。这就是Es6语法，又名<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" rel="noopener ugc nofollow" target="_blank"> <strong class="jb hv">析构</strong> </a>，它接受param作为变量。这里，我们将默认值指定为空字符串。</p><p id="f65d" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们将这个元素的DOM引用作为<em class="kp"> gameBody </em>并且我们也检查了在这个未定义的情况下，我们将document body作为我们可以推送游戏UI的引用。用上面的代码更新index.js。</p><h2 id="2f58" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">初始化游戏</h2><p id="4d8e" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">打开index.html，在主体部分初始化游戏</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="ea60" class="ll lm hu lg b fv ln lo l lp lq">&lt;script type="text/javascript"&gt;<br/>        Game.init({<br/>            container:"game_container"<br/>        });<br/>&lt;/script&gt;</span></pre><p id="6964" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">那就跑</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="aa3b" class="ll lm hu lg b fv ln lo l lp lq">$ webpack-dev-server</span></pre><p id="312e" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">导航到<a class="ae jx" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>，你会在控制台看到一条消息“游戏已初始化”</p><blockquote class="km kn ko"><p id="6144" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">此时，您的代码应该与my repository＄git check out 74c 3d AC的以下提交相匹配</p></blockquote><h2 id="cf74" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">准备一个带有html表格的游戏板</h2><p id="dc19" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">我们将使用document.createElement()方法创建一个html表格元素，并使用普通javascript向其添加tbody、行和列</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="c4ca" class="ll lm hu lg b fv ln lo l lp lq">const _init = ({container = '',cellHeight = 50, cellWidth = 50})=&gt;{<br/>    let gameBody = document.getElementById(container);<br/>      if(gameBody === undefined) // check whether element exist<br/>        gameBody = document.getElementsByTagName("body")[0];</span><span id="c911" class="ll lm hu lg b fv lr lo l lp lq">          const tbl = document.createElement("table");<br/>          const tblBody = document.createElement("tbody");<br/>          for (let i = 0; i &lt; 3; i++) {<br/>              var row = document.createElement("tr");<br/>              for (let j = 0; j &lt; 3; j++) {<br/>               let cell = document.createElement("td");<br/>                cell.setAttribute("width",cellHeight+"px");<br/>                cell.setAttribute("height",cellWidth+"px");</span><span id="990c" class="ll lm hu lg b fv lr lo l lp lq">                //setting styles for table cells<br/>                cell.style.textAlign = "center";<br/>                cell.style.cursor = "pointer";<br/>                cell.style.fontSize = (cellHeight*0.4) + 'px';</span><span id="15ab" class="ll lm hu lg b fv lr lo l lp lq">                row.appendChild(cell); // insert each cell to row<br/>              }<br/>              tblBody.appendChild(row);<br/>          }</span><span id="df6c" class="ll lm hu lg b fv lr lo l lp lq">        tbl.appendChild(tblBody);<br/>        gameBody.appendChild(tbl); // insert table to dom<br/>        tbl.setAttribute("border", "1");</span><span id="5778" class="ll lm hu lg b fv lr lo l lp lq">        // setting styles for table<br/>        tbl.style.borderCollapse = 'collapse';<br/>        tbl.style.border = '2px solid #000';<br/>        tbl.style.height = "auto";<br/>        tbl.style.width = "auto";<br/>        tbl.style.margin = "0 auto";<br/>  }</span></pre><p id="21c1" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的代码中，我们创建了9列，并对其应用了一些样式。我们在cellHeight和cellWidth变量中添加了每个单元格的高度和宽度，这是我们在游戏初始化过程中收到的另外两个参数。我们将字体大小设置为单元格高度的40%。</p><p id="be3e" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">打开index.html文件并更新初始化</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="c4fd" class="ll lm hu lg b fv ln lo l lp lq">  Game.init({<br/>         container:"game_container",<br/>         cellHeight: 100,<br/>         cellWidth: 100<br/>  });</span></pre><p id="8ba3" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在运行$ `webpack-dev-server `在浏览器窗口中，您会注意到创建了一个表</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff nr"><img src="../Images/c083c230f5d0aabae315edf5fd44cb6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:794/format:webp/1*hK1_8ZbXhwJoZ95hD0Gnxg.png"/></div><figcaption class="mz na fg fe ff nb nc bd b be z ek">table for tic-tac-toe game created by the game library</figcaption></figure><blockquote class="km kn ko"><p id="518f" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">此时，您的代码应该与my repository＄git check out 0 FDE BC 2的以下提交相匹配</p></blockquote><h2 id="aba4" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">使用npm创建webpack构建和开发服务器</h2><p id="5aab" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">NPM提供了一个优秀的工具来执行脚本。我们可以同时运行$ webpack和$ webpack-dev-server命令，用一个命令代替</p><p id="017e" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">打开package.json，在脚本属性下编写以下命令</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="b098" class="ll lm hu lg b fv ln lo l lp lq">"scripts": {<br/>    "start": "webpack &amp;&amp; webpack-dev-server"<br/> }</span></pre><p id="542f" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在快跑</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="f12e" class="ll lm hu lg b fv ln lo l lp lq">$ npm start</span></pre><p id="8632" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">您会注意到我们的构建已经创建好了，并且在<a class="ae jx" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>启动了一个web服务器</p><p id="e560" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">要了解更多关于npm脚本的信息，请访问<a class="ae jx" href="https://docs.npmjs.com/misc/scripts" rel="noopener ugc nofollow" target="_blank">https://docs.npmjs.com/misc/scripts</a></p><blockquote class="km kn ko"><p id="6fd7" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">此时，您的代码应该与my repository＄git check out c 7 D5 ca 7的以下提交相匹配</p></blockquote><h2 id="0eee" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">点击事件时更新纸板</h2><p id="ee41" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">让我们初始化三个变量</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="2d5a" class="ll lm hu lg b fv ln lo l lp lq">// Put this code above outer for loop<br/>let gameState = 0;<br/>let cellIndex = 0;<br/>let inputArray = [];</span></pre><p id="dd1c" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">每点击一次单元格，gameState 就会增加，这可以给我们关于哪个玩家(‘X’或‘0’)点击的信息。</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="a27e" class="ll lm hu lg b fv ln lo l lp lq">// Put this code inside inner 'for' loop<br/>cell.setAttribute("index",(cellIndex++));<br/>cell.addEventListener("click",()=&gt;{<br/>          let inputState = gameState % 2? 0: 1;<br/>          let cellText = inputState == 1? 'X':'0';<br/>          cell.innerHTML = cellText;<br/>          inputArray[index] = inputState;<br/>          gameState++;<br/>})</span></pre><p id="ab65" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在每个单元格中，我们存储每个单元格的索引作为属性，它等于当前单元格的游戏状态。<strong class="jb hv"> inputArray </strong>用于存储每个单元格被点击时的状态。<strong class="jb hv"> cellIndex </strong>和<strong class="jb hv"> inputArray </strong>都将用于确定获胜者。</p><p id="64a3" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">运行$ npm start，此时您应该能够在板上输入0或X</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/bd1723e335fee5af0a838c8d41c141f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:724/format:webp/1*7W05BbDYyfIP5NfLTB8AmQ.png"/></div></figure><p id="055b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">接下来我们将决定获胜者。</p><blockquote class="km kn ko"><p id="cc20" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">此时，您的代码应该与my repository＄git check out 5c 944 a 0的以下提交相匹配</p></blockquote><h2 id="a32b" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">宣布获胜者</h2><p id="e0f1" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">在app文件夹下新建一个名为winner.js的文件。这将是一个新的ES6模块。我们在这个模块中计算获胜者。我们将导出这个模块，以便在index.js中使用它，在这里我们可以创建这个模块的实例，并使用它来确定获胜者。</p><p id="cbe7" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们将利用ES6的另一个优秀特性，即类。</p><blockquote class="km kn ko"><p id="7c1e" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">为了在ES6中展示类的概念，我在这里使用了类，否则为了维护单例设计模式，我们应该避免使用类。这是一篇很好的文章。</p></blockquote><p id="92ae" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">让我们创建赢家类</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="772a" class="ll lm hu lg b fv ln lo l lp lq">class Winner {<br/>    constructor(){<br/>      this._name = null;<br/>      this._score = 0;<br/>    }<br/>}<br/>export default Winner</span></pre><p id="5c8b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的代码中，我们创建了一个名为Winner的类，并添加了两个属性_name和_score，它们最终将存储获胜者的名字(0或X)和分数</p><p id="cc95" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">ES6中有两种类型的导出</p><ul class=""><li id="a5c8" class="jy jz hu jb b jc jd jg jh jk ka jo kb js kc jw kd ke kf kg dt translated">默认导出</li><li id="f611" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated">命名出口</li></ul><blockquote class="km kn ko"><p id="a054" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">如果你想了解更多关于ES6导入，导出<a class="ae jx" href="https://developer.mozilla.org/en-US/docs/web/javascript/reference/statements/export" rel="noopener ugc nofollow" target="_blank">这里</a>是一篇<a class="ae jx" href="https://hackernoon.com/import-export-default-require-commandjs-javascript-nodejs-es6-vs-cheatsheet-different-tutorial-example-5a321738b50f" rel="noopener ugc nofollow" target="_blank">很棒的文章</a></p></blockquote><p id="8827" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">添加getters以访问名称和分数</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="f996" class="ll lm hu lg b fv ln lo l lp lq">get name(){<br/>    return this._name;<br/>}<br/>get score(){<br/>    return this._score;<br/>}</span></pre><p id="ae7b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在转到index.js文件，编写代码来声明winner</p><p id="6ef5" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">按如下方式导入顶部的模块<strong class="jb hv">获胜者</strong></p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="2fce" class="ll lm hu lg b fv ln lo l lp lq">import Winner from './winner';</span></pre><p id="0dbb" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在创建一个winner模块的实例</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="4bd5" class="ll lm hu lg b fv ln lo l lp lq">(function(window){</span><span id="b724" class="ll lm hu lg b fv lr lo l lp lq">let W = new Winner();</span><span id="e7b4" class="ll lm hu lg b fv lr lo l lp lq">---<br/>--- <br/>---</span><span id="9127" class="ll lm hu lg b fv lr lo l lp lq">cell.addEventListener("click",()=&gt;{<br/>    let index = cell.getAttribute("index");<br/>    if(inputArray[index] !== undefined || W.name)<br/>      return;<br/>    let inputState = gameState % 2? 0: 1;<br/>    let cellText = inputState == 1? 'X':'0';<br/>    cell.innerHTML = cellText;<br/>    inputArray[index] = inputState;<br/>    gameState++;<br/>    let winner = W.findWinner(inputArray);<br/>    if(winner.state == 0 || winner.state == 1){<br/>        console.log("Winner",W.name);<br/>    }<br/>})</span></pre><p id="90ac" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们正在决定这份声明的赢家</p><p id="695c" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">let winner = w . find winner(input array)；</p><p id="d60b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">这意味着，我们需要在Winner类中定义一个<em class="kp"> findWinner </em>方法，该方法将inputArray作为参数</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="48df" class="ll lm hu lg b fv ln lo l lp lq">findWinner(inputLines){<br/>      const winningLines = [<br/>        [0, 1, 2],<br/>        [3, 4, 5],<br/>        [6, 7, 8],<br/>        [0, 3, 6],<br/>        [1, 4, 7],<br/>        [2, 5, 8],<br/>        [0, 4, 8],<br/>        [2, 4, 6],<br/>      ];<br/>      for (let i = 0; i &lt; winningLines.length; i++) {<br/>        const [a, b, c] = winningLines[i];<br/>        // console.log(inputLines);<br/>        if (inputLines[a] !== undefined &amp;&amp; inputLines[a] ===      inputLines[b] &amp;&amp; inputLines[a] === inputLines[c]) {<br/>          this._name = inputLines[a] == 1 ? 'X': '0';<br/>          this.calculateScore(inputLines,inputLines[a]);<br/>          return {state:inputLines[a],lines:[a, b, c]};<br/>        }<br/>      }<br/>      return {state:null,lines:[]};<br/>    }<br/>    calculateScore(inputLines,player){<br/>      for(let i=0;i&lt;inputLines.length;i++){<br/>        if(inputLines[i] == player){<br/>          this._score++;<br/>        }<br/>      }<br/>    }</span></pre><p id="b951" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的代码中，winningLines存储了所有8种获胜单元格的组合。</p><p id="7927" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们已经遍历了赢线数组。对于每一次迭代，我们通过应用析构将每三个优胜行存储到a、b、c变量中</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="517b" class="ll lm hu lg b fv ln lo l lp lq">const [a, b, c] = winningLines[i];</span></pre><p id="95c5" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们已经定义了calculateScore()方法，该方法采用两个参数“inputLines”和“player ”,并在下面一行中更新玩家的分数</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="f443" class="ll lm hu lg b fv ln lo l lp lq">this._score++;</span></pre><p id="19da" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">findWinner()方法将在下面一行中更新获胜者的名字</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="807e" class="ll lm hu lg b fv ln lo l lp lq">this._name = inputLines[a] == 1 ? 'X': '0';</span></pre><p id="76f2" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">并返回获胜线的状态(0或1)和作为对象的获胜线，如下所示</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="8dbe" class="ll lm hu lg b fv ln lo l lp lq">return {state:inputLines[a],lines:[a, b, c]};</span></pre><p id="ebb4" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在运行$ npm start并玩游戏。您可以在控制台上看到获胜者</p><blockquote class="km kn ko"><p id="b2f6" class="iz ja kp jb b jc jd je jf jg jh ji jj kq jl jm jn kr jp jq jr ks jt ju jv jw hn dt translated">理想情况下，你不应该在入口模块<strong class="jb hv">index.html</strong>中放任何涉及游戏的代码。这个模块应该只包含公开游戏Api的代码(Game.init)。尝试将这段代码分离到一个名为<strong class="jb hv"> GameBoard </strong>的独立模块中，该模块最终将被导入用于确定获胜者的获胜者模块中。在这种情况下，不需要将<strong class="jb hv">输入数组</strong>参数传递给<strong class="jb hv"> findWinner </strong>方法，因为这可以通过<strong class="jb hv"> GameBoard </strong>模块获得。我把这项工作留给你。</p></blockquote><p id="f4f3" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们现在只剩下一个任务，那就是更新分数板，因为我们应该在网页上看到分数，而不是在浏览器控制台上</p><h2 id="9e73" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">更新评分板</h2><p id="dc0b" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">创建一个名为score-board.js的新文件，并在其中编写一个<strong class="jb hv">记分牌</strong>模块，如下所示</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="9161" class="ll lm hu lg b fv ln lo l lp lq">const ScoreBoard = {<br/>      drawScore: ()=&gt; {<br/>        <br/>      },<br/>      declareWinner: ()=&gt; {<br/>        <br/>      }<br/>};<br/>export default ScoreBoard;</span></pre><p id="0c13" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">这将有两个方法drawScore和declareWinner。人们应该告诉哪些细胞是优胜线，后者应该打印一个网页的分数</p><p id="e988" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">检查以下代码中的方法定义</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="e126" class="ll lm hu lg b fv ln lo l lp lq">drawScore: (table, inputArray, winner)=&gt;{<br/>        table.style.opacity = "0.5";<br/>        let cells = table.getElementsByTagName("td");<br/>        let cellIndex;<br/>        for(let c = 0;c &lt; cells.length;c++){<br/>            cellIndex = parseInt(cells[c].getAttribute("index"));<br/>            if(inputArray[cellIndex] == winner.state &amp;&amp; winner.lines.indexOf(cellIndex)!=-1 ){<br/>                cells[c].style.backgroundColor = "#eee";<br/>            }<br/>        }<br/>      },<br/>      declareWinner: (W)=&gt;{<br/>        let scoreboard = document.createElement("div");<br/>        scoreboard.style.margin = "auto";<br/>        scoreboard.style.height = '100px';<br/>        scoreboard.style.lineHeight = '110px';<br/>        scoreboard.style.border = 'dotted';<br/>        scoreboard.style.marginTop = '10px';<br/>        scoreboard.style.width = (window.innerWidth-window.innerWidth*0.02)+'px';<br/>        scoreboard.style.backgroundColor = "transparent";<br/>        scoreboard.style.textAlign = "center";<br/>        scoreboard.innerHTML = "Winner: "+W.name +", Score: "+W.score;<br/>        document.body.appendChild(scoreboard);<br/>      }</span></pre><p id="f8c2" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">上面的代码不言自明。在index.js模块中导入此模块，并更新评分板，如下所示</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="962b" class="ll lm hu lg b fv ln lo l lp lq">let winner = W.findWinner(inputArray);<br/>if(winner.state == 0 || winner.state == 1){<br/> ScoreBoard.declareWinner(W);<br/> ScoreBoard.drawScore(tbl, inputArray, winner);<br/>}</span></pre><p id="6e1b" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">至此，我们已经成功创建了井字游戏库。还剩一个任务。我们需要创建一个缩小版的图书馆。让我们创造它。</p><h2 id="14bb" class="ll lm hu bd lt ne nf ng lx nh ni nj mb jk nk nl mf jo nm nn mj js no np mn nq dt translated">创建一个小型库</h2><p id="9aec" class="pw-post-body-paragraph iz ja hu jb b jc mp je jf jg mq ji jj jk mr jm jn jo ms jq jr js mt ju jv jw hn dt translated">打开您的终端并安装这两个依赖项</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="326d" class="ll lm hu lg b fv ln lo l lp lq">$ npm install yargs strip-loader --save-dev</span></pre><p id="3791" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv"> Yargs </strong>通过解析参数和生成优雅的用户界面，帮助您构建交互式命令行工具。</p><p id="cc9c" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated"><strong class="jb hv"> strip-loader </strong>是一个webpack加载器，可以帮助你剥离定制函数或调试语句</p><p id="3f76" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">现在，在名为webpack-production.config.js的根文件夹中创建一个新文件，并添加以下代码</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="f7cb" class="ll lm hu lg b fv ln lo l lp lq">var WebpackStripLoader = require('strip-loader');<br/>var devConfig = require('./webpack.config.js');<br/>var stripLoader = {<br/> test: [/\.js$/, /\.es6$/],<br/> exclude: /node_modules/,<br/> loader: WebpackStripLoader.loader('console.log')<br/>}<br/>devConfig.module.loaders.push(stripLoader);<br/>module.exports = devConfig;</span></pre><p id="65c3" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的代码中，我们已经编写了如何使用webpack strip loader从库中剥离console.log语句。</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="5b52" class="ll lm hu lg b fv ln lo l lp lq">devConfig = require('./webpack.config.js');</span></pre><p id="85f8" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">上述语句在production-config中包含webpack.config，这意味着在生产模式下，我们将使用webpack-production.config</p><p id="cba1" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">打开webpack.config.js文件，添加以下内容</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="lb lc l"/></div></figure><p id="7ce2" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">在上面的代码中，uglify插件帮助确定当前是否在生产模式下执行，如果是，那么uglify在webpack编译和捆绑期间负责缩小。</p><p id="cf75" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">让我们更新package.json以接受生产配置，如下所示</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="8fd3" class="ll lm hu lg b fv ln lo l lp lq">"scripts": {<br/>    "build": "webpack --config webpack-production.config.js --env dev &amp;&amp; webpack --config webpack-production.config.js --env build",<br/>    "serve": "webpack --env dev &amp;&amp; webpack --env build",<br/>    "start": "webpack-dev-server"<br/>  },</span></pre><p id="01a7" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们添加了另外两个脚本命令</p><ul class=""><li id="1e26" class="jy jz hu jb b jc jd jg jh jk ka jo kb js kc jw kd ke kf kg dt translated"><strong class="jb hv">构建</strong>:在生产模式下运行</li><li id="1421" class="jy jz hu jb b jc kh jg ki jk kj jo kk js kl jw kd ke kf kg dt translated"><strong class="jb hv">服务</strong>:以开发模式运行</li></ul><p id="6ac1" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我们可以按以下方式运行新的npm命令</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="a89d" class="ll lm hu lg b fv ln lo l lp lq">$ npm run build<br/>$ npm run serve</span></pre><p id="bbff" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">我希望现在，你已经准备好编写一个标准的javaScript插件了。</p><p id="3674" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">您可以克隆我的存储库来查看最终版本。</p><pre class="ku kv kw kx fq lh lg li lj aw lk dt"><span id="a7ff" class="ll lm hu lg b fv ln lo l lp lq">$ git clone <a class="ae jx" href="https://github.com/debabrata100/tic-tac-toe.git" rel="noopener ugc nofollow" target="_blank">https://github.com/debabrata100/tic-tac-toe.git</a></span></pre><p id="f0f9" class="pw-post-body-paragraph iz ja hu jb b jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw hn dt translated">谢谢:)</p><figure class="ku kv kw kx fq ky"><div class="bz el l di"><div class="nt lc l"/></div></figure></div></div>    
</body>
</html>