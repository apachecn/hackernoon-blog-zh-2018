<html>
<head>
<title>Managing Your Lambda Empire with Serverless</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用无服务器管理您的Lambda帝国</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/managing-your-lambda-empire-with-serverless-abb6a29c081e?source=collection_archive---------5-----------------------#2018-02-11">https://medium.com/hackernoon/managing-your-lambda-empire-with-serverless-abb6a29c081e?source=collection_archive---------5-----------------------#2018-02-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="355a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你关注我有一段时间了，你会知道我是新的<a class="ae jp" href="https://hackernoon.com/tagged/serverless" rel="noopener ugc nofollow" target="_blank">无服务器</a>模式概念的超级粉丝。然而，当涉及到管理一个<a class="ae jp" href="https://hackernoon.com/tagged/api" rel="noopener ugc nofollow" target="_blank"> API </a>网关背后的大量功能时，它开始变得有点负担。</p><p id="33da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">令人欣慰的是，在管理大量功能时，像<a class="ae jp" href="https://serverless.com" rel="noopener ugc nofollow" target="_blank">无服务器</a>这样的新工具被证明是非常有用的。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/df36bf3920b3e7977ea250d4feaee8f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHUWbb9Blj504Y_ou5dqyQ.png"/></div></div></figure><p id="c0a6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这篇文章中，我们将看看无服务器在处理跨多个环境的不同lambda函数的庞大帝国时提供的一些惊人的优势！</p><h1 id="8e47" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">主要优势</h1><p id="c985" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">无服务器允许您轻松开发和部署对多个AWS Lambda函数的大量更改。这是一个巨大的胜利。通过允许我们在一个<code class="eh lf lg lh li b">yml</code>文件中定义Lambda函数的所有内容，它将我们部署更改的时间减少到不到一分钟。</p><blockquote class="lj lk ll"><p id="0504" class="ir is lm it b iu iv iw ix iy iz ja jb ln jd je jf lo jh ji jj lp jl jm jn jo hn dt translated">当涉及到开发任何东西时，缩短反馈回路是至关重要的。您希望最大限度地减少一个简单的更改花费5-10分钟来部署和检查的次数。</p></blockquote><p id="9201" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们在使用像serverless这样的工具时所体验到的快速反馈循环确实使这种架构风格成为一种非常可行的选择，可以毫不费力地构建高度可伸缩的生产应用程序。</p><h1 id="2a08" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">跨平台</h1><p id="73d5" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">许多产品所有者的一个主要担忧是，他们越来越依赖单一云服务提供商的服务。这也被称为“供应商锁定”，是一个非常现实的问题。</p><p id="9983" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你不希望开发一个数百万美元的解决方案，完全依赖于一个云提供商，却发现在6个月后，你所依赖的特定服务将被弃用。</p><p id="ac72" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">无服务器解决这个问题的方法是不知道您使用的是哪一个底层云服务提供商。您不局限于AWS，您可以设计您的无服务器应用程序，使其可以跨多个云服务提供商部署。</p><h1 id="24e2" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">装置</h1><p id="c87d" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">安装无服务器工具需要npm。可以通过拨打以下电话进行安装:</p><pre class="jr js jt ju fq lq li lr ls aw lt dt"><span id="281f" class="lu kd hu li b fv lv lw l lx ly">npm install -g serverless</span></pre><p id="8977" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您已经在机器上设置了aws凭证文件，并为用户设置了正确的权限，那么您应该可以开始了！</p><h1 id="ebaa" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">构建您的功能</h1><blockquote class="lj lk ll"><p id="1034" class="ir is lm it b iu iv iw ix iy iz ja jb ln jd je jf lo jh ji jj lp jl jm jn jo hn dt translated">由于我目前正在编写一个完全基于AWS的类似imgur的网站，所以我将把这篇文章建立在我到目前为止为这个特定项目所做的工作的基础上！</p></blockquote><p id="5311" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">假设我想为我的新项目开发一系列不同的端点。我可以在一个<code class="eh lf lg lh li b">imgur/</code>目录下的不同python文件中定义所有这些单独的函数。</p><pre class="jr js jt ju fq lq li lr ls aw lt dt"><span id="1c71" class="lu kd hu li b fv lv lw l lx ly">.serverless/<br/>imgur/<br/>- list.py<br/>- upload.py<br/>- ...<br/>serverless.yml</span></pre><p id="56af" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在根目录下的我的<code class="eh lf lg lh li b">serverless.yml</code>文件中，我可以这样做:</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="lz ma l"/></div><figcaption class="mb mc fg fe ff md me bd b be z ek">This is an example serverless.yml file for another article I’m writing!</figcaption></figure><p id="72e0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，在上面的配置中，我基本上定义了两个不同的API端点，它们使用我在我的<code class="eh lf lg lh li b">imgur/</code>目录中定义的函数来驱动。</p><p id="0b7c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦我对我的函数做了更改，为了部署这些更改，我只需调用:</p><pre class="jr js jt ju fq lq li lr ls aw lt dt"><span id="55fb" class="lu kd hu li b fv lv lw l lx ly">serverless deploy</span></pre><p id="b084" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">剩下的就交给我了。</p><p id="9c0e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个。是。<strong class="it hv">惊艳！</strong></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mf"><img src="../Images/1947abe4d0f0e6b9ea5d55efb2875b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NxRvP2z8t3kWNRj2ydjYCA.png"/></div></div><figcaption class="mb mc fg fe ff md me bd b be z ek">An example of the serverless deploy command</figcaption></figure><p id="a2e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从上面的截图中可以看到，cli处理云形成文件的创建，它打包并上传工件，然后将它们推送到S3并进行部署。</p><p id="47f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，一旦一切完成，它就打印出“服务信息”。在这些信息中，您应该会看到所有已部署端点的列表，以及需要哪些<code class="eh lf lg lh li b">HTTP</code>动词来访问它们。对于我定义的两个端点，整个过程花费了大约20秒。</p><h1 id="4cdf" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">管理资源访问</h1><p id="b0a8" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">通常情况下，你会希望你的lambda函数能够与其他AWS资源对话，无服务器处理得非常好。在您的<code class="eh lf lg lh li b">serverless.yml</code>文件的范围内，您能够指定一个非常细粒度的级别，即您的函数的不同访问级别。</p><h1 id="60f2" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">开发、测试和生产</h1><p id="09dc" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">当谈到将开发环境与测试和生产环境隔离时，无服务器允许您通过<code class="eh lf lg lh li b">yml</code>文件或命令行参数来指定您想要部署到哪个阶段。</p><p id="ca51" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这意味着我可以在Jenkins这样的人中围绕这一点建立一个完整的部署管道，自动部署测试，执行集成测试，然后直接推向生产，没有任何额外的麻烦。这是理想的。</p><h1 id="1d4c" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">结论</h1><p id="e2f6" class="pw-post-body-paragraph ir is hu it b iu la iw ix iy lb ja jb jc lc je jf jg ld ji jj jk le jm jn jo hn dt translated">希望这篇文章对你有用！最近刚刚开始使用无服务器，我已经看到了这个框架的巨大潜力，我非常期待在未来用它做更多的开发。</p><p id="38ea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我目前正试图建立我的YouTube频道，并达到新的1k订户标志，以保持合作伙伴身份，如果你想支持我，请随时前往那里订阅:<a class="ae jp" href="https://www.youtube.com/tutorialedge" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/tutorialedge</a></p><p id="c9cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我真的很想听听那些已经在生产中使用了一段时间的人的想法！请在下面的评论区或者通过我的推特告诉我:<a class="mg mh gr" href="https://medium.com/u/eb71d34fbe09?source=post_page-----abb6a29c081e--------------------------------" rel="noopener" target="_blank">埃利奥特·福布斯</a></p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="mi ma l"/></div></figure></div></div>    
</body>
</html>