<html>
<head>
<title>Quality Assurance Toolkit: Using Android Studio IDE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">质量保证工具包:使用Android Studio IDE</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/quality-assurance-toolkit-using-android-studio-ide-58dd9216ac65?source=collection_archive---------14-----------------------#2018-02-13">https://medium.com/hackernoon/quality-assurance-toolkit-using-android-studio-ide-58dd9216ac65?source=collection_archive---------14-----------------------#2018-02-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/b8910f972376ee2dc7d1d283f355671f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mwrE-N3Xtdie_SyBnZebUw.jpeg"/></div></div></figure><div class=""/></div><div class="ab cl jc jd hc je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="hn ho hp hq hr"><p id="ac2d" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">质量保证工程师知道，选择正确的技术堆栈来测试Android应用程序是一件非常痛苦的事情。你选择的工具必须专门迎合特定应用程序的需求和功能，在找到最有效的工具之前，你可能必须浏览许多付费和开源工具。</p><p id="6302" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">在所有的工具中，有一个特别的工具我们想谈谈——Android Studio IDE。它主要是开发人员的工具，用作设计、开发和测试的本地环境。然而，它不仅仅是开发者的玩具。事实上，在SteelKiwi，我们相信每个质量保证工程师的工具箱中都应该有Android Studio IDE。</p><p id="0a91" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">这篇文章是一个简短的指南，介绍如何使用几个AS IDE特性来提高日常工作的质量。我们涵盖了创建Android虚拟设备配置、运行ADB命令、记录设备日志、监控硬件资源使用等基础知识。</p><h1 id="d601" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">什么是Android Studio IDE？</h1><p id="4def" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">Android Studio IDE是一个用于Android开发的集成环境。它于2013年5月16日在谷歌I/O活动期间宣布，并于2014年12月<a class="ae kh" href="https://www.jetbrains.com/" rel="noopener ugc nofollow" target="_blank"> JetBrains </a>推出了IDE 1.0版的首个官方版本。到2017年，该应用程序的第三个版本已经推出，并得到了全球数百万it专业人士的广泛使用和赞赏。</p><p id="f88c" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">Android Studio IDE可以安装<a class="ae kh" href="http://www.oracle.com/technetwork/java/javase/downloads/jdk9-downloads-3848520.html" rel="noopener ugc nofollow" target="_blank"> Java开发包</a> (JDK)。一旦它被正确安装，你可以简单地插入一个测试设备并开始工作。请注意，AS IDE对系统资源的要求很高，因此最好在安装之前确保您的计算机满足最低要求。</p><blockquote class="ll lm ln"><p id="32df" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:对于那些运行Windows的用户:在IDE之上，你还需要安装<a class="ae kh" href="https://adb.clockworkmod.com/" rel="noopener ugc nofollow" target="_blank"> ADB驱动</a>，这样你就可以通过USB线连接测试设备。</p></blockquote><h1 id="3619" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">探索界面</h1><p id="3578" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">AS IDE的主窗口由许多元素组成。一开始可能会有些吓人，但是一旦您意识到这些特性被整齐地打包到许多关键区域中，一切都会变得更好:</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/d656e26b6d4382beb0b1f5337733c74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8_8gRa8uuSXFwxsL.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Android studio main window interface</em></figcaption></figure><ol class=""><li id="06b2" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">工具栏用于处理从存储库中克隆源代码的应用程序。</li><li id="311d" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">导航栏(自然地)帮助您导航项目文件。</li><li id="ec09" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">编辑器窗口显示可以编辑的代码。</li><li id="a79c" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">工具窗口栏位于主AS IDE窗口之外，提供了许多用于打开其他工具的按钮。</li><li id="39fc" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">状态栏显示IDE中执行的最后一个操作的状态。</li></ol><blockquote class="ll lm ln"><p id="d9b2" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:Android Studio IDE提供了相当多的功能，需要一段时间来适应。你玩得越多，学得越快。</p></blockquote><h1 id="3e2b" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">作为质量保证的IDE</h1><p id="d89c" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">在SteelKiwi，我们使用许多Android Studio功能来帮助我们进行QA测试:</p><ul class=""><li id="df0c" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mq mi mj mk dt translated">具有不同API版本、设置和配置的模拟器</li><li id="cd44" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">用于记录日志的Android设备监视器</li><li id="28ea" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">管理构件和数据的终端ADB命令</li><li id="24d3" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">用于压力测试的UI猴子训练器</li><li id="3c05" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">Android Profiler可监控CPU、RAM和网络使用情况</li></ul><h1 id="b78a" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">模拟器</h1><p id="a689" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">当你没有运行你所需要的Android版本的物理设备时，模拟器可以成为你的救命稻草。然而，它们在检查各种设置和ui、模拟中断、伪造GPS坐标、旋转屏幕等方面也很棒。</p><p id="66af" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">请记住，有些硬件不能用仿真器复制:例如，蓝牙设备、SD卡插入/弹出、NFC模块、插入式耳机和USB电缆。&gt;具有更高级API的较新虚拟设备可以支持Wi-Fi仿真，并预装Google Play服务。</p><blockquote class="ll lm ln"><p id="60ef" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:具有更高级API的较新虚拟设备可以支持Wi-Fi的仿真，并预装Google Play服务。</p></blockquote><p id="0673" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">当然，你不应该认为虚拟设备是物理设备的成熟替代品，但它们对于某些类型的测试来说仍然很酷，尤其是考虑到Android平台碎片化是一件真实(并且相当痛苦)的事情。</p><p id="5de1" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">SteelKiwi QA团队经常在开发的早期阶段使用模拟器来检查旗舰手机的布局，因为我们需要确保每个细节都与多个屏幕分辨率的设计样本相对应。</p><p id="5207" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">下面是我们在AS IDE中设置仿真器的分步指南:</p><ol class=""><li id="7edc" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">启动Android Studio IDE。</li><li id="17fd" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">导航至工具-&gt; Android -&gt; AVD -&gt;管理器，启动Android虚拟设备(AVD)管理器。AVD主窗口显示之前创建的配置列表。在这里，您可以删除虚拟设备，还可以运行设备、克隆设备和擦除数据。</li></ol><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/48d18233165465598eb85b1accfc7e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iC5R41cHTGnlrKad.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Android Virtual Device manager main window interface</em></figcaption></figure><p id="85a3" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">3.要添加新配置，只需单击创建虚拟设备，这将打开选择硬件窗口。在这里，您可以从类别和型号列表中选择虚拟设备。如果您正在寻找标准集合中没有的特定设备，您可以导入现有的硬件配置文件或自己构建。选择设备后，单击“下一步”继续。</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/5fe6b785d72561b9e5b2d1ebdbf678ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c5VezswggCBVx6C3.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Select Hardware main window interface</em></figcaption></figure><p id="142d" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">4.在系统映像窗口中，选择您希望虚拟设备运行的Android版本。您可以从推荐的映像中选择，也可以使用x86映像。选择后，再次单击下一步。</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/2950e94b12c668d1c6a585c6c54922ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NayHH-SA59N3DiuF.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">System image main window interface</em></figcaption></figure><p id="22b4" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">5.验证选定的配置，然后单击完成创建虚拟设备。</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/2a7ce9b96f8d855591c416bf801a98e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*R08U5mHHsAYKfEGM.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Verify configuration main window interface</em></figcaption></figure><blockquote class="ll lm ln"><p id="12ec" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:Verify Configuration窗口允许您在运行仿真器之前进行一些配置。通过点按“显示高级设置”，您可以停用设备框架(当您的电脑没有足够的RAM时会很有用)，在纵向和横向模式之间进行选择，以及保留虚拟内存。还有一些其他的设置，所以你可以自己随意探索。</p></blockquote><p id="ab3a" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">现在，您可以开始测试了。启动模拟器并拖动您的。apk文件拖到空屏幕上。安装过程将自动开始，应用程序将添加到您的虚拟设备中。</p><p id="91f6" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">以下是您可以使用模拟器做的一些事情:</p><ul class=""><li id="6475" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mq mi mj mk dt translated">将屏幕从纵向旋转到横向，反之亦然</li><li id="884c" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">截图</li><li id="4336" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">设置GPS坐标</li><li id="5885" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">设置网络类型和信号强度</li><li id="bb8b" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">进行电池调整</li><li id="4ff0" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">模拟电话中断</li><li id="2a9e" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">配置虚拟传感器</li><li id="a2b5" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">用日志生成错误报告</li></ul><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/aa397ba644a6dca2e0377faeae70da41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1rzNl4p2qc71RV-N.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Emulator and Settings window interface</em></figcaption></figure><blockquote class="ll lm ln"><p id="11af" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi的建议:记住，只有当你不测试可用性、用户体验、手势、设备位置的变化、响应速度和类似的事情时，使用虚拟设备才是好的。我们的团队总是试图通过根据环境在物理设备和虚拟设备之间交替来结合两个世界的优点。</p></blockquote><h1 id="fe2d" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">记录设备日志</h1><p id="5a5a" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">日志是应用程序活动的记录，有助于识别崩溃并定位其根源。正确记录日志是测试不可或缺的一部分，尤其是当错误报告描述了严重的缺陷时。报告为开发人员节省了大量时间，使他们能够专注于修复问题，而不是重现问题。</p><p id="95c3" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">AS IDE有一个内置功能，可以帮助实时跟踪日志(通过Logcat窗口跟踪连接的设备)并将其记录到. txt文件中。Logcat窗口也可以用来运行应用程序通过麻烦的地方，并观察代码执行时发生了什么。作为QA工程师，我们的任务是记录必要的日志，并将包含它们的<code class="eh mr ms mt mu b"> .txt file</code>附加到我们的bug报告中，从而提供对问题的更深入的介绍。</p><blockquote class="ll lm ln"><p id="3cbd" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:在尝试从Android设备记录任何日志之前，您应该首先验证应用程序开发人员已经在您将要测试的开发版本中启用了日志可见性。除非他们这样做了，否则日志是不可见的，因此也不可能被记录。txt文件将只是空的)。</p></blockquote><p id="b5d0" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">请注意，设备可以在一秒钟内记录多种日志级别类型，但我们只关注给定应用程序内发生的错误(对此我们应用了过滤器)。在修复崩溃和确定崩溃发生的原因时，错误是最能说明问题的。</p><p id="f8c2" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">以下是我们的指南，帮助你开始通过Android设备监视器记录日志:</p><ol class=""><li id="a5ee" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">确保日志可见性已启用，并且日志可见。</li><li id="c8b9" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">通过Android Debug Bridge将测试设备连接到计算机，并验证连接是否已经建立。</li><li id="9424" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">导航到工具-&gt; Android -&gt; Android设备监视器。</li><li id="b3f9" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">启动Android设备监视器。如果已经正确地建立了与测试设备的连接，您将能够在Logcat选项卡中看到大量显示的日志，并跟踪每秒钟出现的新日志。你现在的目标是过滤它们，让窗口只显示应用程序日志(忽略系统进程和其他类似的东西)。</li><li id="1e52" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">单击添加新的Logcat过滤器。</li><li id="8d61" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">在过滤器名称字段中键入过滤器名称。</li><li id="3b8b" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">在按应用程序名称字段中键入包名称，然后单击确定。为了获得包名，您可以询问开发人员或者运行ADB命令。其他字段可以留空。</li><li id="1a44" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">选择误差过滤器。</li><li id="2729" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">在连接的设备上启动应用程序，并重新创建导致崩溃或意外行为的操作序列。</li><li id="750c" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">成功再现崩溃后，单击将所选项目导出到文本文件，将记录的日志保存为<code class="eh mr ms mt mu b">.txt file</code></li><li id="1f59" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">打开保存的文件，检查日志是否已被实际保存。</li><li id="9c53" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">将日志文件附加到您的错误报告中。</li></ol><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/d16424935154c5119cf7fdad81d52575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5HjTJVYZhgxycT1V.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Android Device Monitor main window interface</em></figcaption></figure><h1 id="61b1" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">ADB命令</h1><p id="0e36" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">Android Debug Bridge (ADB)是一种命令行工具，它在您的计算机和连接的测试设备(或其仿真器)之间创建一个虚拟层，允许您在Android设备上执行终端命令。这些命令可以帮助您管理构建、清除应用程序缓存、记录日志、重新启动设备等等。ADB是一个客户端-服务器程序，包含三个主要部分:</p><ul class=""><li id="20eb" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mq mi mj mk dt translated">客户端，在您的主机上运行，向连接的设备发送命令；</li><li id="a6fa" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">守护程序(adbd)，负责在连接的设备上运行命令；</li><li id="485c" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">控制客户端-守护程序通信的服务器。</li></ul><p id="c9cf" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">尽管有许多不同的ADB命令和参数，我们将只讨论那些对QA工程师有用的。所有这些都应该在所连接的测试设备本身(它启用了USB调试)或仿真器上执行。</p><blockquote class="ll lm ln"><p id="2914" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:如果你在执行ADB命令时遇到问题，仔细检查你是否正确安装了ADB驱动程序，然后再试一次。</p></blockquote><p id="af77" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">以下是SteelKiwi列出的有用命令:</p><ul class=""><li id="c4e1" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mq mi mj mk dt translated">adb设备—检查设备是否通过Android调试桥正确连接到您的计算机，并显示DEVICE_ID</li><li id="c86f" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">ADB devices DEVICE _ ID install appname . apk—允许您使用将程序从主机安装到连接的测试设备。apk文件名；在使用这个命令之前，确保您已经通过终端找到了包含您的_BUILD.apk文件的文件夹</li><li id="4c94" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">ADB devices DEVICE _ ID uninstall com . package . name—按软件包名称从连接的设备上卸载程序</li><li id="faf8" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">ADB install-r appname . apk-模拟应用程序。更新</li><li id="7f56" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">adb shell dumpsys窗口windows | grep Focus —帮助识别软件包名称。(注意，当您执行这个命令时，应该在连接的测试设备上启动您想要获得其名称的程序包。)</li></ul><blockquote class="ll lm ln"><p id="df6a" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:执行ADB shell dump sys window Windows | grep Focus on Windows，用findstr代替grep。</p></blockquote><p id="c3f2" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">下面是另一种获取包名的方法:</p><ul class=""><li id="398d" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mq mi mj mk dt translated">adb shell启用shell模式</li><li id="a6b1" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">pm list packages -f显示已连接设备上安装的软件包列表</li><li id="0f39" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">退出以退出shell模式</li><li id="015f" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">ADB shell screen cap/SD card/Download/Bluetooth/snapshot . png对连接的设备进行截图，并保存到任意文件夹</li><li id="c322" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">ADB shell am force-stop com . package . name关闭应用程序。(当应用程序冻结且没有响应时，此命令特别有用)。</li><li id="6e0e" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mq mi mj mk dt translated">ADB shell pm clear com . package . name删除应用程序的缓存及其之前收集的所有数据</li></ul><p id="9ce2" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">如果出于某种原因，你不能通过Android设备监视器记录日志，你总是可以用ADB命令来做。要使这种方法有效，您不需要作为IDE启动，但是您的计算机必须正确识别该设备。以下是使用ADB命令记录和保存日志的方法:</p><ol class=""><li id="c823" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">确保日志是可见的。</li><li id="4d39" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">通过Android调试桥将测试设备连接到您的计算机，并验证连接是否已正确建立。</li><li id="711d" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">打开AS IDE终端或其他终端。</li><li id="8b6f" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">在您的终端中键入以下命令:ADB-d logcat *:E | grep com . package . name &gt; name _ of _ log file . txt您应该写入应用程序包名称并指定日志文件的名称。</li></ol><blockquote class="ll lm ln"><p id="44d2" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:ADB命令非常灵活——可以设置不同的过滤器和参数来查看和记录日志。同样，对于Windows机器，使用findstr而不是grep。</p></blockquote><p id="a367" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">5.在您的测试设备上启动应用程序，并重新创建导致崩溃或意外行为的操作序列。</p><p id="583b" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">6.在终端中按Ctrl + c停止录制。</p><p id="b716" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">7.打开。并检查日志是否已被正确记录。</p><p id="d565" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">8.将此文件附加到您的错误报告中。</p><p id="f958" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">正如您所看到的，ADB命令可以使应用程序测试更加高效。</p><h1 id="02ee" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">用Monkey测试:创建简单的压力测试</h1><p id="2e85" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">猴子生成的场景具有随机数量的输入、触摸和手势，以模仿各种用户交互。一个这样的组合很容易导致崩溃或冻结。如果你只使用手动测试方法，很容易错过一些不太明显的情况，而且只有在应用程序正式发布后，你才能注意到这样的缺陷。这就是Monkey如此酷的原因——它允许我们识别bug，并防止来自现实生活用户的负面反馈。</p><p id="12c9" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">除此之外，自动化Monkey测试非常容易设置和执行:只需启动AS IDE，连接测试设备，输入命令，就可以开始了。</p><p id="302a" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">通过执行猴子测试，您可以验证应用程序的长期可靠性。Monkey是一种灵活的工具，提供了很多特性。例如，您可以在模拟器和物理设备上运行测试，改变代码执行的速度，记录命令序列，并重用您的测试。Monkey使得模拟长期使用变得更加容易，帮助你确保软件在持续负载下不会出现任何问题。</p><p id="fb44" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">这里有一个关于如何使用UI Monkey练习工具运行简单压力测试的指南。开始测试前，执行以下操作:</p><ol class=""><li id="575e" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">启动AS IDE。</li><li id="26c9" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">通过ADB连接您的测试设备或运行仿真器。</li><li id="56b0" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">打开集成命令行或终端。</li><li id="1e4f" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">启动您想要进行压力测试的应用程序，并保持其打开状态。</li></ol><p id="ec33" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">您可以直接从终端执行压力测试，而无需启动AS IDE。为此，只需启动终端，并确保设备已连接并被您的机器正确识别。要启动一个简单的测试，请执行以下命令:ADB shell monkey-p com . package . name-v 300</p><p id="f904" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">该测试将进行300次随机触摸和手势，包括使用系统键。如果你想做更多，只需增加手势的数量，然后再次启动测试。</p><p id="3844" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">对于该测试的更高级版本，添加— pct-syskeys 0键以使Monkey排除系统键。更新后的命令应该是这样的:db shell monkey—pct-syskeys 0-p com . package . name-v 300现在运行该命令并将您的结果与之前的命令进行比较—您将看到行为和操作顺序发生了变化。很酷，对吧？嗯，这只是开始。</p><p id="7985" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">要降低动作的执行速度，可以使用以下命令:ADB shell monkey—pct-syskeys 0—throttle 100-p com . package . name-v 300在这里，你可以设置任何你想要的throttle值，以毫秒为单位。每个动作之间会出现设定的延迟。</p><p id="f608" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">要记录该序列，请使用以下命令:</p><p id="ddc8" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">亚行壳猴—pct-syskeys 0—throttle 100-p com . package . name-s 1-v 300</p><blockquote class="ll lm ln"><p id="e0c0" class="jj jk lo jl b jm jn jo jp jq jr js jt lp jv jw jx lq jz ka kb lr kd ke kf kg hn dt translated">Steelkiwi建议:如果想再次应用相同的序列，只需添加-s 1。</p></blockquote><p id="f56b" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">当您在录制的序列中发现一个问题，并想要检查开发人员是否真正解决了它时，此命令特别有用。</p><p id="25ea" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">一旦某个序列导致崩溃，使用以下命令终止该进程:</p><p id="7a43" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">adb shell monkey —出错后终止进程— pct-syskeys 0 —节流100 -p com.package.name -s 1 -v 300</p><p id="aee4" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">您可以通过多种方式在Monkey UI应用程序练习器中指定压力。您可以通过键入adb shell monkey找到完整的命令列表。使用它们来创建适合您情况的测试。</p><p id="2a65" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">我们还强烈建议您使用— pct键。它们可以根据您的需要添加设置和配置测试。您可以在完成所有定义的测试活动后使用它们来进行一些额外的可靠性检查。使用这个工具的整个想法不是破坏应用程序，而是找到它的脆弱点，在那里代码中的异常可能会导致崩溃和给定特定输入组合的意外行为。</p><h1 id="d3ec" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">Android Profiler:监控CPU、内存和网络</h1><p id="12e9" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">Android Profiler允许我们查看测试设备的CPU、内存和网络的详细统计数据。我们经常在测量应用程序性能时使用分析器，特别是当一个应用程序在许多目标设备上冻结或响应不佳时。</p><p id="4f10" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">默认情况下，探查器显示带有高级图形的时间线。profiler还可以记录数据并获取更详细的信息，但是如果您使用的设备的API级别低于26，则需要在“设置”中启用它。</p><figure class="lt lu lv lw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/025e1a6ffc24c56e73a9617e081c4749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MbgTz1QeEGWet_k6.png"/></div></div><figcaption class="lx ly fg fe ff lz ma bd b be z ek"><em class="mb">Android Profiler main window interface</em></figcaption></figure><p id="7da8" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">要启用高级性能分析，请导航至运行-&gt;编辑配置-&gt;性能分析-&gt;启用高级性能分析。打开此选项后，您将能够单击高级图表并查看显示的设置的详细信息。</p><p id="9818" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">CPU监控允许您监控中央处理器，实时显示使用情况。高级监控提供了关于每种方法的跟踪的更多细节。优化CPU使用将提供流畅的用户体验并节省电池寿命，从而使应用程序更易于使用。因此，我们需要使用CPU监视器，并且能够向开发人员提供这种类型的信息。</p><p id="ee70" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">您可以通过执行以下步骤来记录跟踪:</p><ol class=""><li id="d7c8" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">将物理设备连接到您的计算机，并验证连接是否已正确建立。</li><li id="ef05" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">打开Android个人资料并选择您的应用程序的个人资料信息。</li><li id="cae0" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">单击CPU图表打开低级信息包。</li><li id="f32d" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">选择仪表配置或采样配置。</li><li id="5652" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">单击记录。</li><li id="219c" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">开始与您正在测试的应用程序进行交互，完成后点按“停止”。</li></ol><p id="60fb" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">内存监控提供了应用内存使用情况的实时图表，可以帮助识别内存泄漏，这是导致设备可用RAM不可控制地减少的过程。出现内存泄漏有几个原因。例如，代码可能写得很差，以至于应用程序不使用的对象继续占用设备内存，即使它们应该被垃圾收集器删除。当这样的事情发生时，你可能会得到OutOfMemoryError，看到应用程序崩溃。</p><h1 id="32d3" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">如何识别内存泄漏？</h1><p id="7e62" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">首先，通过内存监视器实时检查应用程序的内存:只需打开你正在测试的应用程序，重复同样的动作几次。如果您注意到内存消耗随着每次迭代而增加，那么您可能面临内存泄漏。</p><p id="5319" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">如何记录关于内存泄漏的信息？</p><ol class=""><li id="b63a" class="mc md if jl b jm jn jq jr ju me jy mf kc mg kg mh mi mj mk dt translated">连接物理设备，并验证连接是否已正确建立。</li><li id="6ffb" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">打开Android设备监视器。</li><li id="03d9" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">选择要测试的应用程序，然后单击更新堆。</li><li id="b755" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">多次执行任何可重复的动作序列。</li><li id="23e5" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">完成与应用程序的交互后，单击转储HPROF文件。</li><li id="bb5f" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated">保存生成的文件并交给Android开发人员。</li></ol><p id="1809" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">每当出现内存泄漏时，您都会看到分配的内存大小增加。</p><p id="48d2" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">网络监控显示实时网络活动，让您观察应用程序的发送和接收请求。你还可以跟踪应用程序在高功率状态下打开设备无线电发射机的频率。如果是这样，无线电不仅会浪费电池寿命来发送和接收请求，而且还会使用额外的功率来保持自身运行。</p><p id="c5c9" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">这个过程是不可能记录的，但是通过调查流量和服务器请求和响应的内容来分析是相当简单的。</p><h1 id="a2ed" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">结论</h1><p id="6028" class="pw-post-body-paragraph jj jk if jl b jm lg jo jp jq lh js jt ju li jw jx jy lj ka kb kc lk ke kf kg hn dt translated">在本文中，我们介绍了一些对QA工程师有用的【Android Studio IDE特性。因为IDE显然不仅仅是为开发人员设计的工具。</p><p id="4867" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">当然，它有许多缺点，但它们通常表现为探索应用程序的功能需要多少时间以及需要多少硬件资源。但是，AS IDE附带的功能完全证明了它的缺点。</p><p id="128e" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">每当测试Android应用程序时，都要实现Android Studio IDE，并且不要停止自己的探索，以不断提高自己的专业技能。</p><h1 id="752f" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">有用的链接:</h1><ol class=""><li id="6a56" class="mc md if jl b jm lg jq lh ju mv jy mw kc mx kg mh mi mj mk dt translated"><a class="ae kh" href="https://developer.android.com/studio/command-line/adb.html" rel="noopener ugc nofollow" target="_blank">什么是Android调试桥？</a></li><li id="fa12" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated"><a class="ae kh" href="https://developer.android.com/studio/run/emulator.html#runningapp" rel="noopener ugc nofollow" target="_blank">你如何建立一个模拟器？</a></li><li id="e7d9" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated"><a class="ae kh" href="https://developer.android.com/studio/debug/am-logcat.html" rel="noopener ugc nofollow" target="_blank">使用Logcat查看日志</a></li><li id="436a" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated"><a class="ae kh" href="https://developer.android.com/studio/profile/cpu-profiler.html" rel="noopener ugc nofollow" target="_blank">使用CPU监视器</a></li><li id="adb7" class="mc md if jl b jm ml jq mm ju mn jy mo kc mp kg mh mi mj mk dt translated"><a class="ae kh" href="https://developer.android.com/studio/profile/network-profiler.html" rel="noopener ugc nofollow" target="_blank">使用网络监视器</a></li></ol><p id="14e1" class="pw-post-body-paragraph jj jk if jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg hn dt translated">最初发表于<a class="ae kh" href="https://steelkiwi.com" rel="noopener ugc nofollow" target="_blank">steelkiwi.com</a></p></div></div>    
</body>
</html>