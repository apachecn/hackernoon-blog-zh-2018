<html>
<head>
<title>How to build an e-commerce website with Nuxt and Cosmic JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Nuxt和Cosmic JS搭建一个电子商务网站</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-an-e-commerce-website-with-nuxt-and-cosmic-js-292c94e37b41?source=collection_archive---------16-----------------------#2018-02-20">https://medium.com/hackernoon/how-to-build-an-e-commerce-website-with-nuxt-and-cosmic-js-292c94e37b41?source=collection_archive---------16-----------------------#2018-02-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ce77a7d2152d60f69d22f0c39e6aec13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*flJe_eb06oEyWQUUn8jHVA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">What we will be building.</figcaption></figure><p id="f297" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于简单的购物网站来说，使用Shopify或Woocommerce等成熟的解决方案可能有些矫枉过正。在本教程中，我们将使用<a class="ae ke" href="http://nuxtjs.org/" rel="noopener ugc nofollow" target="_blank"> Nuxt </a>和Cosmic JS构建一个电子商务网站。我们还将使用<a class="ae ke" href="http://buefy.github.io/" rel="noopener ugc nofollow" target="_blank"> Buefy </a>，它是基于广受喜爱的<a class="ae ke" href="http://bulma.io/" rel="noopener ugc nofollow" target="_blank">布尔玛</a>的Vue JS的UI组件库。</p><h1 id="1197" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="9b64" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated"><a class="ae ke" href="https://github.com/cosmicjs/vue-ecommerce" rel="noopener ugc nofollow" target="_blank">下载GitHub回购</a> <br/> <a class="ae ke" href="https://cosmicjs.com/apps/vue-ecommerce-app" rel="noopener ugc nofollow" target="_blank">查看演示</a></p><h1 id="8d41" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">先决条件</h1><p id="531f" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">您需要在您的计算机上已经安装了node和npm。如果没有，请访问<a class="ae ke" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> node js网站</a>并安装最新的稳定版本。</p><h1 id="0bc6" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">入门指南</h1><p id="35ed" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">对于我们的项目，首先构建我们的后端模型是有意义的。</p><p id="891c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">设置Cosmic JS后端<br/> </strong>登录你的Cosmic JS仪表盘，选择“添加新桶”。在下一个屏幕中，为您的存储桶提供一个名称，然后选择“从头开始”。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff li"><img src="../Images/5facf556ca9089cb1ff5c8b01a9c405e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tLJxPmKJSISNjJey.png"/></div></div></figure><p id="64f0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">导入Bucket数据<br/> </strong>从仓库下载<a class="ae ke" href="https://github.com/cosmicjs/vue-ecommerce/blob/master/bucket.json" rel="noopener ugc nofollow" target="_blank"> bucket.json </a>文件。然后从仪表板转到设置- &gt;导入/导出页面，导入下载的文件。现在，我们将在仪表板中显示可用的对象和对象类型。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ln"><img src="../Images/fc882a73c7b51755458b0002f3961f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aU8al--4KHrOkGAo.png"/></div></div></figure><h1 id="f175" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">设置条带</h1><p id="d3e9" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">对于任何电子商务网站来说，我们都必须在某个时候接受客户的付款。设置支付处理器曾经是一个困难的领域，但幸运的是，我们现在有很多方便的解决方案。</p><p id="f779" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于我们的网站，我们将使用条纹。首先，去他们的<a class="ae ke" href="http://stripe.com/" rel="noopener ugc nofollow" target="_blank">网站</a>创建一个账户。在您填写了详细信息并设置好一切之后，请转到API部分并获取您的公钥和私钥。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff li"><img src="../Images/8814e15a7f7d874b0df11d29397ba2f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gIYuaYmNlI9RKZlC.png"/></div></div></figure><p id="8f92" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将需要这些密钥来配置我们网站中的Stripe，使用更加方便的<a class="ae ke" href="https://stripe.com/checkout" rel="noopener ugc nofollow" target="_blank"> Stripe Checkout </a>元素。</p><h1 id="d391" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">安装演示</h1><p id="e4ad" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">通过下载或克隆位于<a class="ae ke" href="https://github.com/cosmicjs/vue-ecommerce" rel="noopener ugc nofollow" target="_blank">https://github.com/cosmicjs/vue-ecommerce</a>的repo，将源代码放入你的机器。然后跑，</p><pre class="lj lk ll lm fq lo lp lq lr aw ls dt"><span id="5e1c" class="lt kg hu lp b fv lu lv l lw lx">cd vue-ecommerce<br/>npm install</span></pre><p id="b44d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在运行应用程序之前，还有一个步骤。将<code class="eh ly lz ma lp b">.env.sample</code>文件重命名为<code class="eh ly lz ma lp b">.env</code>,并放入环境变量中。</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><p id="1274" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">由于生产的主机变量需要为0.0.0.0，NODE_ENV需要为“生产”,我们将在<code class="eh ly lz ma lp b">package.json</code>文件中设置它们，并且不需要在<code class="eh ly lz ma lp b">.env</code>文件中设置。</p><p id="fb3e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在运行<code class="eh ly lz ma lp b">npm run dev</code>在开发模式下运行应用程序。如果你想为生产而构建，运行<code class="eh ly lz ma lp b">npm run build</code>并用<code class="eh ly lz ma lp b">npm start</code>启动应用程序</p><h1 id="d01b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">理解源代码</h1><p id="dc41" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">使用Nuxt构建Vue.js应用程序的一个主要好处是Nuxt是固执己见的。所以你可以进入任何一个Nuxt项目，在那里找到一个熟悉的结构。</p><p id="465a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最重要的文件是<code class="eh ly lz ma lp b">nuxt.config.js</code>。你会发现从<code class="eh ly lz ma lp b">plugins/</code>文件夹中导入了Buefy、Stripe和Cosmic JS三个插件。</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><p id="edd7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们使用<a class="ae ke" href="https://www.npmjs.com/package/vue-stripe-checkout" rel="noopener ugc nofollow" target="_blank"> vue-stripe-checkout </a>作为stripe的checkout元素的包装器。访问<a class="ae ke" href="https://stripe.com/docs/checkout#integration-simple-options" rel="noopener ugc nofollow" target="_blank">条带文档</a>了解可用选项。</p><p id="2a4c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">需要在客户端使用的任何环境变量都需要在env部分定义，我们还将在scripts部分链接stripe脚本。</p><p id="59ab" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh ly lz ma lp b">pages/</code>文件夹包含主页和购物车页面。购物车页面中的结帐方法处理条带结帐。基本上，我们所做的是将结帐组件生成的令牌和其他标识细节发送到应用服务器。查看<a class="ae ke" href="https://www.npmjs.com/package/vue-stripe-checkout" rel="noopener ugc nofollow" target="_blank"> vue-stripe-checkout </a>包，了解更多用法。</p><p id="bdc5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于一个简单的Nuxt应用程序，我们可以只对SSR使用服务器，并将所有代码发送到客户端。但是在这种情况下，我们需要在服务器中单独处理条带检出。在<code class="eh ly lz ma lp b">server/</code>文件夹中，我们在<code class="eh ly lz ma lp b">index.js</code>文件中有快速服务器设置，在<code class="eh ly lz ma lp b">api/index.js</code>文件中有一个单独的路由处理器。我们将首先用<code class="eh ly lz ma lp b">stripe.customers.create</code>函数创建一个Stripe中的客户，然后用<code class="eh ly lz ma lp b">stripe.charges.create</code>函数收费。查看<a class="ae ke" href="https://stripe.com/docs/checkout/express" rel="noopener ugc nofollow" target="_blank">https://stripe.com/docs/checkout/express</a>了解更多关于实现的信息。</p><p id="6dc6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一旦支付成功，我们将把订单添加到“订单”对象类型下的宇宙JS桶中。</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><h1 id="642a" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">部署应用程序</h1><p id="f0d0" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">用Cosmic JS部署应用程序非常简单。只需转到您的存储桶，然后导航到设置-&gt;部署到Web。</p><p id="092c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">提供您的Github存储库url和要部署的分支。Cosmic使Bucket slug、read key和write key环境变量默认可用。</p><p id="ce85" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在那里选择要部署的存储库和分支(在大多数情况下是master)，然后单击“部署到Web”。这就是全部内容，一旦部署成功，您将会收到一封确认邮件。一旦成功，不要忘记通过“设置环境变量”部分提供条带密钥和环境变量，以防您尚未设置<code class="eh ly lz ma lp b">.env</code>文件。</p><p id="1701" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">PS:任何电商app都需要用https做安全保障。因此，上线时，请务必在部署部分的应用中启用SSL。</p></div></div>    
</body>
</html>