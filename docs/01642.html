<html>
<head>
<title>A cake for your cherry: what should go in the C++ standard library?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">樱桃蛋糕:C++标准库中应该放什么？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-cake-for-your-cherry-what-should-go-in-the-c-standard-library-804fcecccef8?source=collection_archive---------6-----------------------#2018-02-21">https://medium.com/hackernoon/a-cake-for-your-cherry-what-should-go-in-the-c-standard-library-804fcecccef8?source=collection_archive---------6-----------------------#2018-02-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="54ed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是对Guy Davidson的文章《不包括电池:C++标准库中应该包含什么？”。</p><p id="ab0c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在过去的几年里，一直在推动将图形库纳入C++标准。这有点像开罗。或者SDL。目前形式的提案在这里是<a class="ae jp" href="https://wg21.link/P0267" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="8ac5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在其当前状态下，库提案可以在预先分配的表面上绘制一些形状，对图像有一些支持，并且有一些课程项目可以添加文本，可能还有一些鼠标/键盘处理形式的输入。</p><p id="e30f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">图书馆的首要目标似乎是教学。提出的论点是，让孩子们在屏幕上看到漂亮的闪闪发光的小精灵很酷，也很滑稽。当然，已经有库可以做到这一点，但是你看，C++没有像样的、惯用的包管理器，所以，一些著名的委员会成员得出的结论是，C++标准应该提供一个开箱即用的2D图形库。</p><p id="f484" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我确实认为这是一条不应该走的路，这样做充其量是浪费时间。让我告诉你为什么。</p><h2 id="f767" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">但是，首先，有些问题需要澄清。</h2><p id="568f" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">从各方面来看，盖伊·戴维森和其他人在这个提案上投入了大量工作、时间和精力。推动这项提案尽快通过标准化的人比我更专业。</p><p id="0db9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我没有对C++做出任何贡献，所以接下来的只是一个人的观点。</p><p id="a1c1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我还想说明，我对那个特定的图书馆并没有负面的看法。我的问题是包括一个2D绘画库，任何C++标准的绘画库，在这个时候。</p><p id="549e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">希望不会被误解！</p><p id="040f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不管怎样，让我们开始吧。</p><h1 id="d658" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">C++标准库不是一个库。</h1><p id="562e" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">C++标准就是这样的:一个明确的文档，以最详细和明确的方式描述了C++是什么，以及它是如何工作的。目标是任何人都可以通过实现该规范来为自己实现C++编译器。然而，规范可能不够具体，或者实现得不太恰当，或者实现得过于武断，因此各种C++编译器最终会在不同的实现之间存在一些细微的行为差异。有时它根本无法实现，因为做实现的人和做规范的人忘记了互相交流。</p><p id="f963" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，该规范的很大一部分描述了标准模板库，这是每个符合规范的编译器都附带的一个库。</p><p id="1443" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">该规范至少有5个实现，由尽可能多的实体维护。有些是开源的，有些不是。他们每个人都在平台和系统的一个选择的子集中工作。即使它们位于任何C++程序的最底层，它们也像任何其他库一样，容易出现错误。</p><p id="3e75" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这种情况下，C++标准库中应该包含什么，或者不应该包含什么，这是一个非常重要的问题。编译器附带的标准应该是什么？大多数人需要什么来提高C++的工作效率？</p><p id="8462" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">盖伊的文章描述了一个人可以拥有的职位。也许我们什么都不需要？也许我们需要一些词汇类型？可能是集装箱？也许不是？我们需要文件系统支持吗？插座？json？xml？rpg制作工具？sql？html？javascript vm？2d图形？3d图形？肥皂？IPC？开窗？是否应该定义<code class="eh lh li lj lk b">pi</code>？websockets呢？ftp？宋承宪？VR？AR？密码？ssl？我们需要ssl而不需要其他加密吗？深度学习？声音？3d音效？视频解码？gif？</p><p id="12c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">显然我们需要划清界限。</p><p id="455e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">某处？</p><p id="bb58" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在哪里？</p><p id="0205" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们来看看. Net .或者Java。当提到STL时，比较C++和Java是惯例。Java很酷吧？基本上，它有套接字、HTTP、加密和所有的东西。</p><p id="33a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是Java大部分是由单个实体维护的。所以Oracle的一些人决定Java应该有套接字，他们实现了它，有内部审查，现在Java有了套接字。有时后来，谷歌想让套接字使用相同的API，在他们可以说“提前”之前，他们被起诉了90亿美元。</p><p id="d06c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与此同时，C++规范经历了一个漫长而痛苦的过程，直到进行投票，并且对每一个特性、每一个方法都达成了多数人的一致意见。那应该叫<code class="eh lh li lj lk b">data</code>吗？<code class="eh lh li lj lk b">get</code>？“在彭博，我们有在200万行代码库上使用<code class="eh lh li lj lk b">data</code>的经验，”在彭博工作的家伙会说。“我们注意到在EBCDIC键盘上使用<code class="eh lh li lj lk b">get</code>更快”，IBM的那个家伙会反对。“我们有300万行代码库”。</p><p id="a59b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我不认为哪种模式是最好的。仁慈的独裁显然只有在独裁者仁慈的情况下才会起作用。</p><p id="7c41" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，我认为民主不适合一个好的图形库的诞生。</p><h1 id="a0fd" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">委员会的资源有限。</h1><p id="01db" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">即使睡眠不足的提案作者拼命工作，但很大一部分工作和投票是在为期一周的季度会议上进行的，人们在会上审阅越来越多的提案。随着委员会变得越来越透明，越来越多的人参与进来，从而为与会者带来更多的工作。那项工作几乎没有钱。最好的情况是，你可以希望有人支付你去佛罗里达海滩、瑞士青山或夏威夷泳池的机票，在那里开会。据说你将永远看不到海滩、山丘和池塘。</p><p id="a955" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于资源和时间有限，因此需要对提案进行分类、优先排序，甚至放弃提案。<a class="ae jp" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0939r0.pdf" rel="noopener ugc nofollow" target="_blank">ISO c++</a>试图描述排序和优先级排序应该如何发生。</p><p id="577a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么问题就变成了:委员会能抽出时间来建立一个2D图形图书馆吗？这是一个优先事项吗？</p><p id="7228" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在目前的形式下，该提案仅限于绘制形状，大约有150页长。这是提交下次会议的最大提案之一。</p><p id="7cc2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它只会变得更大。“小而简单的图形库”的复杂性是没有止境的。花在提案上的每一秒钟都不会花在其他工作上。当然，人们会讨论他们感兴趣的提议，而且讨论是同时进行的。还是。每200，000个c++开发人员中可能就有一个人参加这些会议。</p><h1 id="9bc7" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">让我们画一个三角形</h1><p id="e56b" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">2D图形与标准化过程所擅长的完全相反。标准化是关于形式主义的，所以它最适合描述正式的东西，数学，算法。现实变得越混乱，就越难以描述，把它写在纸上，让这张纸成为几十年的真理来源。</p><p id="554a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个人需要做的第一件事就是得到一个“表面”。画像素的画布。</p><p id="f6ea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以希望你有一个<code class="eh lh li lj lk b">surface</code>类，你给它维度，它给你一个画布来画画。</p><p id="f13e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是等等。在大多数桌面系统中，如果你想要一个表面，你需要把它放在一个窗口中。windows习惯上有标题，所以图形API应该可以处理，对吗？</p><p id="5553" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可能还希望窗口有一个图标。图标是大多数系统中的一个文件，其格式是系统特定的。但有时它不是路径，而是对应于路径的名称。</p><p id="7208" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在一些桌面操作系统上，在程序执行期间，窗口的大小可以改变。</p><p id="fd6c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有时，窗口可以移动到另一个具有不同分辨率的屏幕上。还有这种奇怪的新屏幕，虚拟像素比真实像素大？除非你正在渲染一个图像或其他东西，否则你应该确保你使用了所有小的脆像素的能力，因为客户因为吹嘘他的屏幕有多脆而支付了额外的费用。</p><p id="ac0b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那边的那个女人很嫉妒，所以她买了一台40像素的电视。你真的看不出区别，但是你会告诉她她浪费了5000美元吗？</p><p id="8ba7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后在你的口袋里有一个屏幕，它向各个方向旋转，现在表面都是不稳定的。但是它没有窗口，所以没有标题或图标。</p><p id="ef84" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在几点了？哦，天哪，那个东西也有屏幕，但它是如此之小…最好去读一本书WTF电子墨水，你应该尽可能少刷新，只有黑色？</p><p id="a290" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">世界很疯狂，对吧？让我们坚持Linux，好吗？所以在Linux上有一个叫X11的东西，你需要一个surface来…哦，不好意思，当你在写论文的时候，X11已经被弃用了，现在你应该使用Wayland…除非你有一个帧缓冲区？可以用opengl加速。或者嵌入式opengl。完全不同的事情。但是真的，Vulkan比这两个东西都快。哦，在这个系统上，我们更喜欢你自己画窗口，有一场关于CSD和SSD的战争已经持续了多年，你不能偏袒任何一方。</p><p id="c175" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您有CSD，请确保我可以正确拖动窗口，并且我已经设置了粘角，以便窗口可以很好地对齐。一定要处理好。完全正确。当你拖动窗口时，它应该有点透明，你知道窗口合成吧？</p><p id="14c7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好吧，所以，你开始告诉自己，也许画东西是复杂的。让实现者、编译器、编写者和库供应商来处理这些垃圾吧。所以你提供了一个可以在任何地方工作的API，所以它完全不处理任何东西，也就是说它在任何地方都不能工作。</p><p id="6ef2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在编译器的作者有点生气了。他们生活中想要的就是写编译器，他们在那里，试图理解GDI是如何工作的。另外，微软可能对提供一个绘图框架并不感兴趣，他们宁愿让他们的用户使用基于WinRT xml的工具。与此同时，GCC的人仍在努力让windows工作。</p><p id="c828" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Clang人得到的bug报告是“不工作”。人们期望STL能够完美、一致地工作，<em class="ll">在任何地方</em></p><p id="3863" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">没问题。我们将使图形库成为可选的。所以现在标准库中有一些不是标准的。如果实现了它们，它们在每个平台上的行为并不完全相同。所以现在用标准工具写的代码是不可移植的。所以我们需要在存储库中有一个STL的副本，以及混乱的构建脚本。回到起点。</p><p id="792c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">也许我们在什么地方搞砸了？让我们看看互联网上有什么。人们有显示器，所以他们肯定会为显示器写库，对吗？</p><p id="99ae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">原来Qt挺受欢迎的。虽然它不仅仅是显示三角形。它于1995年发行。它有线，线，很多东西。人们真的没有想出更好的办法吗？</p><p id="0668" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">wxWidgets甚至更老。它也有字符串和线程，还有很多图形库中没有的东西。GTK是完全一样的东西。</p><p id="82e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是C++的目标更符合像SDL这样的东西。1995年发行，有线绳和奇怪的东西。快板，1990年发行。同样的事情</p><p id="a474" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你看看其他语言。Rust社区肯定有一个很棒的绘画框架，对吧？还是去的人？原来他们围绕Qt或SDL或其他东西编写包装器，就像他们认为从零开始很复杂一样。</p><p id="286c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以20年后，你可以在所有的平台上画一个三角形。对于所有的一些定义。</p><p id="b4e2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是相当大的成就，所以你想与世界分享你的快乐。人们大多使用语言交流[需要引用],所以你要在屏幕上显示一些单词，从三角形到三角形有多难？</p><h2 id="e309" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">void draw_text(std::point2d，STD::string)；</h2><p id="c773" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">您了解到有一种称为“Unicode”的标准，它描述了世界各地人们使用的所有字母。这么多信。Unicode标准的规模大约是你做了5年的提案的10倍。幸运的是，大多数编程语言至少支持部分Unicode。除了C++。好吧，好吧，让我们暂时把它放在一边。</p><p id="758f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以文本是用字体呈现的。字体通常安装在系统上。有一个叫做字体数据库的东西可以告诉你字体是什么。除非系统没有字体数据库。或者没有字体。或者没有系统。人们也喜欢使用自己的字体。</p><p id="37ca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">字体是一种文件，其格式是标准的。大约有5个相互竞争的标准。</p><p id="49fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">字体文件可以包含字形表、png、SVG、在虚拟机中执行的脚本，以及所有这些的混合。有些字体是有颜色的，但不是所有人都喜欢颜色。你的孩子喜欢颜色。他们给你发了一封🐈。你会增加对猫的支持吧？</p><p id="7b60" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你学习子像素着色。你因为专利侵权在监狱呆了几个月。你认为你可以利用这段时间在百科全书中学习连字。你开始后悔成为一名开发人员，并考虑一个新的职业作为修道院的抄写员。</p><p id="57a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">字体渲染涉及到很多数学，所以你拿起一本数学书，是一个叫阿尔-赫瓦里兹米的死人写的。你意识到所有东西都是从右向左写的。这是怎么回事？</p><p id="3859" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以也许可选的2D图形库应该有可选的文本支持？</p><p id="962a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在多伦多举行的下一次委员会会议上(夏威夷很久以前就沉入了海洋)，有人试图编写一个复杂的图形应用程序，其中包含网络和大量输入，为了避免意大利面条式的代码，他们喜欢用一些线程实现某种事件循环。这显然是一个理论问题，因为没有输入支持。如何命名键盘按键从来没有达成共识。</p><p id="8ad0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">回想一下所有现有的框架，比如Qt，现在是8.0版本，它提供了事件循环、消息传递系统和Unicode字符串类型。也许他们在策划什么。</p><p id="4ac1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这段时间里，人们继续使用Qt。人们因为知道Qt而被雇佣。他们在学校项目中使用它。当然，Qt仍然很糟糕，因为标准中增加的C++反射特性还不足以取代它们的代码生成器。但是人们不在乎这有多糟糕。使用QML的人。或者电子。</p><p id="67b0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">没有显示🐅，让我们回到2018年。</p><h1 id="c4e3" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">委员会还有什么更好的事可做吗？</h1><p id="b4f2" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">要被考虑，一个提议必须被写出来并被提出，而图书馆的提议之所以存在，是因为有人在里面投入了大量的工作。</p><p id="9d2f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，目前C++已经</p><ul class=""><li id="79c8" class="lm ln hu it b iu iv iy iz jc lo jg lp jk lq jo lr ls lt lu dt translated">较差的线程支持(没有使用协程的执行器或工具)</li><li id="cac7" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">不支持启动流程</li><li id="c991" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">不支持Unicode</li><li id="02f6" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">较差的输入/输出设施</li><li id="5b2f" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">恶劣的现场设施</li><li id="1c5f" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">不支持动态加载的库</li><li id="9324" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">不支持HTTP</li><li id="c4a5" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">与密码无关</li></ul><p id="8601" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当然，这个清单还在继续。我不知道什么是C++库的好候选，但是，根据委员会本身，一个库提案应该</p><ul class=""><li id="eb61" class="lm ln hu it b iu iv iy iz jc lo jg lp jk lq jo lr ls lt lu dt translated">对大多数人有用</li><li id="8c85" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">有一个稳定的API，不要经常改变</li><li id="a8d5" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">有真实世界的经验和反馈。这就是为什么大多数C++库都是从boost库开始。</li></ul><p id="24e5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">提案经常因为不够有用或者没有经过足够的实战检验而被拒绝。考虑到人们对STL稳定性的期望，这是合理的，但是这些标准应该始终如一地适用。</p><p id="24e1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当然，经过多年的努力，仍有许多语言特性在开发中，它们应该优先于库特性，因为纯粹的库添加可以通过boost或其他方式来填充。</p><h1 id="fbb2" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">教学论证</h1><p id="646d" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">支持包含该库的一个论点是，它将使C++更容易教，并且人们对基于图形的项目更感兴趣。我同情并完全赞同让C++更可教的目标。然而，确保一个给定的特征是可教的和添加一个主要特征到语言中，主要目标是在课堂上使用，这是有区别的。</p><p id="9b8f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">可教性意味着易于使用，难以误用，以及概念和实现之间的合理映射，并且通常表现得符合大多数用户的期望。任何新特性都应该具备的品质。</p><p id="6f8f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">还可以预期，一些特性是针对高级用户、库作者和专家的。</p><p id="016f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，C++的“教学友好部分”应该是专业设置中使用的功能的子集，而不是不同的设置。</p><p id="8d2a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我更希望人们学会使用Qt(举例来说),因为这是一种他们可以在职业生涯中使用的技能，而不是专门用于教学目的的东西。</p><p id="cc1b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我还认为，一个范围过于有限的库可能会给语言带来不好的形象。如果人们被告知他们不能绘制表情符号或gif或使用游戏手柄，他们可能最终会认为C++不够强大，并转向另一种语言，如C#，java，javascript，swift……但如果他们开始使用现有的，经过战斗测试的框架，这种框架足够强大，即使代码不是“现代的”，他们也可以实现他们的设计(Qt，SDL ),他们会更好地理解c++可以做什么。</p><p id="cd64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">换句话说，恐怕如果把人介绍给一个玩具库，他们会认为C++是一种玩具语言。</p><p id="5e1f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，“教学”需要更好地界定。</p><p id="978f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们是在谈论中学生吗？如果是的话，教他们C++是个好主意吗？有些情况下Python、Javascript、Lua更适合，更容易把握选择。我觉得没关系。</p><p id="8ee3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们说的是大学CS 101吗？在这种情况下，可能需要向学生介绍构建系统、库和包管理。工具很重要。根据我的经验，许多初级开发人员不知道如何使用他们的工具，这和懂语言一样重要。同样重要的是，人们知道并被教导生态系统。Qt，boost，wxwidgets，SDL…</p><h1 id="c3d1" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">“我们需要一个标准库，因为使用第三方库很难”的论点</h1><p id="00d3" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">我想大多数人都同意这一点。在一个C++项目中包含一个库是一种糟糕的、经常是痛苦的经历。在2d图形库上投入大量资源并不能解决这个问题。除非每一个已经存在或将要存在的库都被纳入标准，那么，我们在哪里停下来呢？</p><p id="b564" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我很抱歉地说，事情不会自己改善，这是不可能的。对于任何类型的包管理器来说，首要的要求就是要有权威性。甚至不一定要好。但是，直到个别实体被留下来处理这个问题，我们将继续有无数不兼容的，半途而废的工具。我理解委员会的特权不一定延伸到语言定义之外，因此包管理的问题可能无法解决。但是工具，而不是UI，是C++必须解决的最大挑战。</p><p id="31fb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，委员会可以在不扩大其特权的情况下帮助改进工具，特别是:</p><ul class=""><li id="a46e" class="lm ln hu it b iu iv iy iz jc lo jg lp jk lq jo lr ls lt lu dt translated">寻找替代所有合理使用预处理器的方法(反射/代码注入方面的工作对此非常重要)</li><li id="bd8c" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">定义可移植的C++ ABI (N4028)</li><li id="6175" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">定义可移植模块表示</li></ul><p id="2e75" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当然，这些工作可能不像2D API那样迷人，但它们更基本，更重要的是，它们不能独立于委员会之外发生。</p><h1 id="ece1" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">不管怎样，事情应该向前发展。</h1><p id="7de0" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">在看了P0939和P0267之后，我想分享我对相关领域工作的希望。当然，除了希望之外，我不能做更多的事情，我只能希望能激励一些人！但是我感兴趣的是你认为在那些领域什么是重要的！</p><h2 id="841a" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">抓住Unicode公牛的角</h2><p id="7f74" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">我不建议这样做，因为我理解为什么C++缺少Unicode，但是如果我们认真考虑2D图形，那么我们绝对需要适当的Unicode支持。</p><ul class=""><li id="53f1" class="lm ln hu it b iu iv iy iz jc lo jg lp jk lq jo lr ls lt lu dt translated">第一步是<code class="eh lh li lj lk b">char8_t</code>论文<a class="ae jp" href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p0482r1.html" rel="noopener ugc nofollow" target="_blank">http://www . open-STD . org/JT C1/sc22/wg21/docs/papers/2018/p 0482 r 1 . html</a>。当然，这还不够，但却是必要的。</li><li id="f517" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">我们需要一套算法来规范，比较，净化和转换Unicode字符串，计算字符。基于范围的东西可能会很好地工作</li><li id="9746" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">字符类，正则表达式…我们可能不需要ICU那么多的特性，但我们确实需要一些。这可能是一个<code class="eh lh li lj lk b">&lt;unicode&gt;</code>标题。我不确定正确的Unicode支持是否与P0939中概述的约束一致，但是它将有益于任何处理用户输入/输出的应用程序，包括GUI、数据库、(web)服务器、控制台应用程序...</li></ul><p id="03f4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我不知道我们是否可以限定词汇类型的Unicode字符串，但是处理世界语言肯定是每个人都需要的，如果有一个通用的、惯用的工具来做这件事，那会更容易。</p><h2 id="8700" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">将几何图元添加到标准中</h2><p id="bd76" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">提取p0267中介绍的词汇类型并独立于图形对它们进行标准化可能会很有意思。像<code class="eh lh li lj lk b">point_2d</code>、<code class="eh lh li lj lk b">matrix_2d</code>(最终还有<code class="eh lh li lj lk b">point_3d</code>、<code class="eh lh li lj lk b">matrix_3d</code>)这样的类型对图形很有用，但也可能有其他用途，例如科学计算、情节操纵。它们可以伴随着一套方法来执行广泛使用的解析几何计算。所有这些都可以放在一个<code class="eh lh li lj lk b">&lt;geometry&gt;</code>头中。</p><p id="a435" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有多种原因可以解释为什么这是有益的</p><ul class=""><li id="3189" class="lm ln hu it b iu iv iy iz jc lo jg lp jk lq jo lr ls lt lu dt translated">这是每个处理绘画或表面的图书馆都需要的东西<code class="eh lh li lj lk b">SDL_Point</code>、<code class="eh lh li lj lk b">QPoint</code>、<code class="eh lh li lj lk b">wxPoint</code>。从一种类型转换到另一种类型很麻烦，容易出错。所有这些框架都可以受益于在相同的坐标系中使用相同的语言。这是词汇类型的定义。</li><li id="ebcb" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">这是经得起时间考验的保证。数学不受新技术趋势的影响，因此API将在几十年内保持稳定。</li><li id="4dc6" class="lm ln hu it b iu lv iy lw jc lx jg ly jk lz jo lr ls lt lu dt translated">出于同样的原因，可能很容易达成共识，但很难放弃基础数学。</li></ul><h2 id="7733" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">帮助改进现有图形库</h2><p id="1531" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">委员会可以做些什么来改进Qt、wxWwidgets SDL和其他图形框架？事实证明，很多框架都依赖于boiler plate代码，这些代码要么是通过大量侵入性地使用宏生成的，要么是通过代码生成器生成的。反射和代码注入是这些框架现代化和改进的基础，从根本上说，这是一个应该优先于纯粹的库工作的语言特性。</p><h1 id="903f" class="kq jr hu bd js kr ks kt jw ku kv kw ka kx ky kz kd la lb lc kg ld le lf kj lg dt translated">让我们自己开发图形提案。</h1><p id="8082" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">也许我们确实需要另一个图形框架。我有什么资格说不是呢？但是现有框架已经经受了20年的战斗考验。我认为，在未来几年，2D图形可以作为一个独立的或增强的图书馆蓬勃发展。最重要的是，它可以提供在多种平台上工作的单一实现，而不是同一事物有5个或更多的实现。</p><p id="b209" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它可以自由地试验文本渲染、输入、事件、后端、线程模型…</p><p id="d067" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我觉得这个提议以及软件包管理问题需要<em class="ll">一些权威的</em>而不是ISO，我不知道可以或者应该是什么样的<em class="ll">。</em></p><figure class="mb mc md me fq mf fe ff paragraph-image"><div class="fe ff ma"><img src="../Images/35596fc428622681334192a8d79a7a51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*qvzUNZUGrfG8pbgBLRlRnw.png"/></div></figure><p id="9fb2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与此同时，Visual Studio和Xcode可能会附带更多的第三方库，这将解决该提案试图解决的至少一半问题。</p></div></div>    
</body>
</html>