<html>
<head>
<title>Instagram authentication with Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Flutter进行Instagram认证</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/instagram-authentication-with-flutter-df6424d2d56c?source=collection_archive---------3-----------------------#2018-02-23">https://medium.com/hackernoon/instagram-authentication-with-flutter-df6424d2d56c?source=collection_archive---------3-----------------------#2018-02-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/9317e0c0f7e5a7021ca4c925b0e3812d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/0*KcPEWa06RBI8PX8_."/></div></figure><p id="c3d0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我决定通过构建一个移动应用来探索<a class="ae jw" href="https://hackernoon.com/tagged/flutter" rel="noopener ugc nofollow" target="_blank"> flutter </a>，因为我真的很喜欢边做边学的方法。</p><p id="5d5a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您不熟悉flutter，它是一个跨移动开发框架，可以为Android和iOS构建丰富的UI移动应用程序。目前它是一个alfa版本，并且是开源的。如果你需要更详细的介绍，我在这里写了一篇关于它的<a class="ae jw" href="http://developer-journey.com/2018/02/08/introduction-to-flutter/" rel="noopener ugc nofollow" target="_blank">帖子</a>。</p><p id="c064" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在本文中，我们将构建一个带有<a class="ae jw" href="https://hackernoon.com/tagged/instragram" rel="noopener ugc nofollow" target="_blank"> Instagram </a>认证的简单应用。对于这个应用程序，我们将使用<a class="ae jw" rel="noopener" href="/@develodroid/flutter-iv-mvp-architecture-e4a979d9f47e">模型视图呈现器</a>模式。</p><p id="c830" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">让我们来构建我们的UI。</p><h1 id="49c3" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">登录屏幕</h1><figure class="kw kx ky kz fq iv fe ff paragraph-image"><div class="fe ff kv"><img src="../Images/1261cfd53aa7fc8c53046d674e6d2a1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/0*mfwqgbZEk3eJAS-v."/></div></figure><figure class="kw kx ky kz fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><figure class="kw kx ky kz fq iv fe ff paragraph-image"><div class="fe ff kv"><img src="../Images/6cd104bbf438cf3744f49399cf221258.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/0*HtlIQntJS3V9UtnD."/></div></figure><p id="4a42" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">UI由一列3个元素构成:2个文本小部件和一个包含2个元素的行小部件(一个图像小部件和一个文本小部件)。关于建筑布局的更多细节，可以阅读<a class="ae jw" href="https://flutter.io/tutorials/layout" rel="noopener ugc nofollow" target="_blank">本</a>。</p><h1 id="2660" class="jx jy hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">商业逻辑</h1><p id="a440" class="pw-post-body-paragraph iy iz hu ja b jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv hn dt translated">如果用户点击登录按钮会发生什么？presenter类将负责登录操作。</p><figure class="kw kx ky kz fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="df10" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">insta是一个使用OAuth处理Instagram授权的类，如API文档<a class="ae jw" href="https://www.instagram.com/developer/authentication/" rel="noopener ugc nofollow" target="_blank">中所述。</a></p><p id="90d3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们来看看Instagram类。</p><figure class="kw kx ky kz fq iv"><div class="bz el l di"><div class="la lb l"/></div></figure><p id="2a6f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这个课程的灵感来自于<a class="lh li gr" href="https://medium.com/u/f8fc0ac87056?source=post_page-----df6424d2d56c--------------------------------" rel="noopener" target="_blank"> Kevin Segaud </a>关于<a class="ae jw" rel="noopener" href="/@segaud.kevin/facebook-oauth-login-flow-with-flutter-9adb717c9f2e">脸书认证</a>的帖子。</p><p id="eab9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们有3个组件:getToken函数、_server函数和令牌类。</p><p id="7757" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">getToken函数遵循<a class="ae jw" href="https://oauth.net/2/" rel="noopener ugc nofollow" target="_blank"> oauth认证标准</a>的3个步骤:</p><p id="0f54" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">1.将用户定向到授权页面，用户可以使用其凭据登录。</p><p id="f915" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">2.用户批准授权请求，我们在重定向url上获得授权代码。</p><p id="82d8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">3.用访问令牌交换授权码。</p><p id="ae26" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了将用户引导到授权页面，我们使用了Flutter Web View插件。</p><p id="751c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">函数<em class="lj"> _server </em>创建一个等待重定向uri的服务器。当客户端发送一个带有参数“<em class="lj"> code </em>的请求时，服务器接收并返回这个参数。</p><p id="77e0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">Token类只是一个普通的dart对象，包含在访问令牌中收到的信息。</p><p id="6eea" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">你可以在github 上找到整个项目。</p><p id="7e12" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">就是这样:Instagram认证现在是真实的了！</p><figure class="kw kx ky kz fq iv fe ff paragraph-image"><div class="fe ff kv"><img src="../Images/07ea5aad309ddf6a0d2f7b4f6ee9ecfe.png" data-original-src="https://miro.medium.com/v2/resize:fit:338/0*KpvAol_eKUpupMK_."/></div></figure><p id="a470" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">希望你喜欢这篇文章，在此之前，我的朋友，愿{code}与你同在！</p></div><div class="ab cl lk ll hc lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hn ho hp hq hr"><p id="44c0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果你想尝试Flutter，我邀请你在官方<a class="ae jw" href="http://flutter.io" rel="noopener ugc nofollow" target="_blank">网站</a>了解更多信息。</p><p id="eeb2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我也邀请你加入flutter社区:</p><ul class=""><li id="2094" class="lr ls hu ja b jb jc jf jg jj lt jn lu jr lv jv lw lx ly lz dt translated"><a class="ae jw" href="https://gitter.im/flutter/flutter" rel="noopener ugc nofollow" target="_blank">与颤振工程师和用户实时聊天</a></li><li id="0523" class="lr ls hu ja b jb ma jf mb jj mc jn md jr me jv lw lx ly lz dt translated"><a class="ae jw" href="https://groups.google.com/d/forum/flutter-dev" rel="noopener ugc nofollow" target="_blank">在我们的邮件列表中讨论Flutter、最佳实践、应用程序设计以及更多内容</a></li></ul><p id="6a3d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">资源</strong></p><p id="8672" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><a class="ae jw" href="http://flutter.io" rel="noopener ugc nofollow" target="_blank"> flutter.io </a></p><p id="afe0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><a class="ae jw" href="https://www.instagram.com/developer" rel="noopener ugc nofollow" target="_blank">https://www.instagram.com/developer</a></p></div><div class="ab cl lk ll hc lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hn ho hp hq hr"><p id="ac48" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="lj">原载于2018年2月23日</em><a class="ae jw" href="http://developer-journey.com/2018/02/23/instagram-authentication-with-flutter/" rel="noopener ugc nofollow" target="_blank"><em class="lj">developer-journey.com</em></a><em class="lj">。</em></p><figure class="kw kx ky kz fq iv"><div class="bz el l di"><div class="mf lb l"/></div></figure></div></div>    
</body>
</html>