<html>
<head>
<title>Fundamentals of System Design — Part 5</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">系统设计基础——第五部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/fundamentals-of-system-design-part-5-c27b617cd532?source=collection_archive---------5-----------------------#2018-02-24">https://medium.com/hackernoon/fundamentals-of-system-design-part-5-c27b617cd532?source=collection_archive---------5-----------------------#2018-02-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="471c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以在这里阅读本系列<a class="ae jp" rel="noopener" href="/@v_aparimit/fundamentals-of-system-design-part-4-d6a62f3fa779">的上一篇帖子。在这篇文章中，我将介绍分区。</a></p><p id="92b9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">分区或分片是一种分解大型数据集并将其分布在多个磁盘上的技术。分区后，读取/写入可以在许多节点上并行执行。<a class="ae jp" href="https://hackernoon.com/tagged/partitioning" rel="noopener ugc nofollow" target="_blank">分区</a>与复制相结合，以实现可扩展性。</p><p id="b59e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">实现分区的一个简单方法是根据一些固定的标准划分整个数据集。例如，对于一个电子商务网站，您可以将手机的所有交易放在节点1上，将鞋子放在节点2上，等等。这种方法的问题是，这会导致分布不均匀。如果手机是最受欢迎的物品，处理手机交易的节点就会一直超负荷。一个简单的解决方法是随机分配分区。这确保了所有数据在节点间均匀分布，但是您肯定已经猜到了这种方法的问题。当您发出读取查询时，需要将它发送到所有节点，这使得读取成本更高。</p><p id="fbbc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">处理这个问题的另一个方法是<a class="ae jp" href="https://hackernoon.com/tagged/design" rel="noopener ugc nofollow" target="_blank">设计</a>基于键的范围分区。您可以首先创建一个键散列，然后将一系列结果散列值分配给某些分区。如果您使用32位散列函数，您的密钥可以映射到2^32-1散列值之一。然后，您可以选择将键1-10分配给分区1，依此类推。可以随机或手动选择分区边界。</p><p id="896d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然基于散列的分区范围有助于减少非对称负载，但是至少在数据库级别，没有简单的方法来完全解决这个问题。如果对于上述电子商务网站，iPhone X是一个月内收入最高的产品，则托管iPhone X交易的节点分区将受到压力。在这种情况下，应用程序开发人员可以将一个2位数的随机密钥添加到原始密钥哈希中，从而将一个密钥的负载分布到100个分区上。挑战将再次是读取，因为现在需要启动100个并行读取来找到iPhone X的一个交易。因此，向少数几个“热”键添加随机数字是有意义的。</p><p id="6845" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是我在这篇文章中要写的全部内容。我将在一两周之后发布本系列的下一篇文章。在那之前，我希望听到你的评论和反馈。</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="jv jw l"/></div></figure></div></div>    
</body>
</html>