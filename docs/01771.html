<html>
<head>
<title>“I am having nightmares that pull (request) 17 is never going to get merged”</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">“我做噩梦，觉得pull (request) 17永远不会被合并”</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/i-am-having-nightmares-that-pull-request-17-is-never-going-to-get-merged-27b7d33307f5?source=collection_archive---------14-----------------------#2018-02-25">https://medium.com/hackernoon/i-am-having-nightmares-that-pull-request-17-is-never-going-to-get-merged-27b7d33307f5?source=collection_archive---------14-----------------------#2018-02-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="4a01" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">一个关于打地鼠公关评论的故事</h2></div><p id="43b3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">访问https://www.mikenikles.com<a class="ae kf" href="https://www.mikenikles.com" rel="noopener ugc nofollow" target="_blank"><strong class="jl hv"/></a><strong class="jl hv">获取我的最新博文。</strong></p><p id="8921" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">几分钟前，我在美丽、寒冷的天气里结束了在<a class="kg kh gr" href="https://medium.com/u/a5226958133a?source=post_page-----27b7d33307f5--------------------------------" rel="noopener" target="_blank"> Assert(js) Testing Conf </a>的美好一天后，回到了酒店房间🌧圣安东尼奥。如果2018年你不在，我强烈推荐你明年去！</p><p id="a14d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">会议有几个主题:模仿(或不模仿)，单元测试与集成测试或它们是否相同，减少循环和认知复杂性，以及其他伟大的内容。</p><p id="c445" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我的头有点晕晕乎乎的(主要是因为一天中大量的知识堆积在我们身上，其次是因为参加会议后派对的后果……)，我坐下来浏览我的闲置通知。</p><p id="2720" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">其中一个立刻引起了我的注意:</p><figure class="kj kk kl km fq kn fe ff paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="fe ff ki"><img src="../Images/42b842592afa74b043cfab347c5ebb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4BomFYR-7Q6SZixREUWg1w.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">😴 👻</figcaption></figure><h1 id="9ae7" class="ky kz hu bd la lb lc ld le lf lg lh li ja lj jb lk jd ll je lm jg ln jh lo lp dt translated">什么是“拉(请求)17”？</h1><p id="8ad6" class="pw-post-body-paragraph jj jk hu jl b jm lq iv jo jp lr iy jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">我喜欢把这种情况称为黑洞。这就像几年前某人写的一段代码，没有人理解，你不会想接近它。</p><p id="a1e4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">嗯，PR 17变成了黑洞。这一切都始于2017年11月1日——也就是113天前。</p><figure class="kj kk kl km fq kn fe ff paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="fe ff ki"><img src="../Images/d5b52a0f250472544e74aa348ffacd6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uvgu0M-rkvl0m4tKxcfSNQ.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">The beginning</figcaption></figure><p id="fe92" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">出于各种原因，我们正在向一个更小的、独立的服务架构发展，每个服务负责整个平台的特定功能。<br/>所以这个<code class="eh lv lw lx ly b">profile-variables</code>服务就是这样一个服务，它意味着被开发和部署成小块，直到它的功能完成。</p><h1 id="d405" class="ky kz hu bd la lb lc ld le lf lg lh li ja lj jb lk jd ll je lm jg ln jh lo lp dt translated">发生了什么事？</h1><p id="5fa1" class="pw-post-body-paragraph jj jk hu jl b jm lq iv jo jp lr iy jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">两个字:不可思议。<br/>最初，该服务是由一个承包商开发的，以Docker为部署环境，用标准Node.js / Express编写。在最初的几次提交后不久，我们决定部署到Google Cloud Functions (GCF)并改用PubSub(<em class="lz">此处插入一个不相关的长故事</em>)。<code class="eh lv lw lx ly b">profile-variables</code>服务被选为在GCF上运行的第一个服务。</p><p id="fc21" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一个团队成员(让我们称他为虚构的Jimmy)接管了现有的代码，并开始向GCF迁移。遵循最佳实践，他定期向Github推送新代码，评论者留下评论。新的团队成员加入了公司，也留下了笔记、建议、想法等。</p><p id="2925" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">虚构的吉米勤奋地回答问题，回复评论和应用评论家提出的建议。</p><blockquote class="ma"><p id="94e4" class="mb mc hu bd md me mf mg mh mi mj ke ek translated">“我可以解决所有这些问题，但每次我解决问题时，都会有10个问题冒出来。”—虚构的吉米，今天</p></blockquote><p id="ffac" class="pw-post-body-paragraph jj jk hu jl b jm mk iv jo jp ml iy jr js mm ju jv jw mn jy jz ka mo kc kd ke hn dt translated">截至今天，PR 17有6个贡献者，总体统计如下:</p><figure class="kj kk kl km fq kn fe ff paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="fe ff mp"><img src="../Images/42067f52efa086c648403ac5cf7ae7f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zXkf6Pe-tLpmkr_WjmwvaA.png"/></div></div><figcaption class="ku kv fg fe ff kw kx bd b be z ek">The end (?)</figcaption></figure><h1 id="c85f" class="ky kz hu bd la lb lc ld le lf lg lh li ja lj jb lk jd ll je lm jg ln jh lo lp dt translated">怎么会这样？</h1><p id="6dc2" class="pw-post-body-paragraph jj jk hu jl b jm lq iv jo jp lr iy jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">大多数事故都是多件事情出错的结果。PR 17也是。</p><ul class=""><li id="4a51" class="mq mr hu jl b jm jn jp jq js ms jw mt ka mu ke mv mw mx my dt translated">我们过于关注微观，而没有关注宏观。</li><li id="4ebb" class="mq mr hu jl b jm mz jp na js nb jw nc ka nd ke mv mw mx my dt translated">遵循了流程，但是它们要么没有很好地定义，要么可能遵循得太严格。</li><li id="43e5" class="mq mr hu jl b jm mz jp na js nb jw nc ka nd ke mv mw mx my dt translated">当PR 17超过一定数量的评论、提交或文件更改时，没有敲响警钟。</li><li id="e0de" class="mq mr hu jl b jm mz jp na js nb jw nc ka nd ke mv mw mx my dt translated">工具、自动化、CI/CD一切都按预期运行，但是我们没有计划像我们在这次公关中遇到的情况。</li><li id="e524" class="mq mr hu jl b jm mz jp na js nb jw nc ka nd ke mv mw mx my dt translated">我们不应该允许关于整个GCF部署的对话成为拉取请求的一部分。</li></ul><h1 id="a60b" class="ky kz hu bd la lb lc ld le lf lg lh li ja lj jb lk jd ll je lm jg ln jh lo lp dt translated">我们从中学到了什么？</h1><p id="6bef" class="pw-post-body-paragraph jj jk hu jl b jm lq iv jo jp lr iy jr js ls ju jv jw lt jy jz ka lu kc kd ke hn dt translated">这让我回到了今天的AssertJS大会和我之前提到的主题。</p><p id="169b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">演讲者还提到了像拉式请求审查、自动化测试、使用工具来帮助流程等主题。当我记笔记时，我一直在想:</p><ul class=""><li id="b4b8" class="mq mr hu jl b jm jn jp jq js ms jw mt ka mu ke mv mw mx my dt translated">“拉式请求审查，没有强制推动”:✅，我们已经明白了。</li><li id="a5e5" class="mq mr hu jl b jm mz jp na js nb jw nc ka nd ke mv mw mx my dt translated">“孤立测试”:✅:是的，完全同意。</li><li id="cb7b" class="mq mr hu jl b jm mz jp na js nb jw nc ka nd ke mv mw mx my dt translated">“使用工具和机器人来扮演坏警察”:✅做到了这一点。</li></ul><p id="65b9" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我觉得，考虑到所有的事情，我们的团队在保持代码高质量方面做得很好。</p><p id="f0e5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，我读了虚构的吉米的懈怠信息，它击中了我:</p><blockquote class="ma"><p id="8f7c" class="mb mc hu bd md me mf mg mh mi mj ke ek translated">工具、流程、自动化测试套件等。如果我们忘记了看到全局，这些都不重要。</p></blockquote><p id="5fa7" class="pw-post-body-paragraph jj jk hu jl b jm mk iv jo jp ml iy jr js mm ju jv jw mn jy jz ka mo kc kd ke hn dt translated">我从会议中得到的许多收获都集中在提高代码质量、减少错误、交付运行良好的软件上。这些都是每个团队必须考虑的超级重要的事情。</p><p id="8d51" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但最重要的是，我们的PR 17情况告诉我，作为一个团队，我们必须偶尔后退一步，讨论日常流程，要求每个团队成员分享他们认为可以改进的地方。专注于工作的最佳工具或编写集成测试的最优雅方式很容易被冲昏头脑。</p><p id="182d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">考虑到这一点，我鼓励你出去走走，思考一下你的流程，并列出你可以在工作流程中改进的三件事，以避免“PR 17”(是“黑洞”、“你最糟糕的噩梦”或类似说法的同义词)。</p><p id="4736" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">PS:感谢虚构的吉米为这篇博文提供灵感🙏！</p></div></div>    
</body>
</html>