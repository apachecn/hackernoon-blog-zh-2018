<html>
<head>
<title>Using React-Redux-Forms</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React-Redux形式</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-react-redux-forms-1244cf8a4a71?source=collection_archive---------17-----------------------#2018-02-26">https://medium.com/hackernoon/using-react-redux-forms-1244cf8a4a71?source=collection_archive---------17-----------------------#2018-02-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/498c6861cb5ceb89d369527625e4b976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LURHJERgvbIf8zwE-Na_ww.jpeg"/></div></div></figure><p id="5ceb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以说我们转向Redux的主要原因是验证。我们不想在页面组件中添加大量代码来验证每个子组件。在一些组件中，我们有多达十个字段，并且所有的字段都必须经过验证。你能想象验证所有这些的组件的大小吗？几百行长。对你们中的一些人来说，这没什么。我是说，为什么一个组件不能很长？对我们来说，这是关于可维护性，拥有一个大的组件是很难导航和看到它看起来像什么。</p><h1 id="b90e" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">出现了<a class="ae ky" href="https://github.com/davidkpiano/react-redux-form" rel="noopener ugc nofollow" target="_blank">反应还原形式</a></h1><p id="b406" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">从之前的帖子中，你可能已经看到我们在<a class="ae ky" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank">反应</a>中使用了<a class="ae ky" href="https://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/agilehttps://hackernoon.com/tagged/bootstrap" rel="noopener ugc nofollow" target="_blank">引导</a>。这是事实。我们需要一种方法，能够在不增加太多代码的情况下验证引导组件。React-Redux-Form使这变得非常容易。它只是你的组件(在这种情况下是引导组件)的包装器，封装了你在验证时需要的所有东西。它可以处理所有的东西，比如脏的，碰过的等等。给你的。</p><p id="060d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我在下面为你创建了一个非常基本的例子。你必须总是用一个表单标签包围你的表单。这很重要，因为这是你提交的地方。从。首先，我创建了一个包含三个按钮的组件。两个创建有效值，我们希望第三个触发无效值。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="b5f2" class="ln kb hu lj b fv lo lp l lq lr">import * as React from 'react';<br/>import { Button } from 'react-bootstrap';<br/> <br/>interface MyProps {<br/>    onChange: (name: string) =&gt; void;<br/>    value: string;<br/>}<br/> <br/>export const MyComponent: React.StatelessComponent&lt;MyProps&gt; = (props) =&gt; {<br/>    <br/>    const onButtonClickJohn = () =&gt; {<br/>        props.onChange('John');<br/>    };<br/>    <br/>    const onButtonClickJacob = () =&gt; {<br/>        props.onChange('Jacob');<br/>    };<br/>    <br/>    const onButtonClickMichael = () =&gt; {<br/>        props.onChange('Michael');<br/>    };<br/>    <br/>    return (<br/>        &lt;div&gt;<br/>           &lt;span&gt;{props.value}&lt;/span&gt;<br/>           &lt;Button onClick={onButtonClickJohn}&gt;John&lt;/Button&gt;<br/>           &lt;Button onClick={onButtonClickJacob}&gt;Jacob&lt;/Button&gt;<br/>           &lt;Button onClick={onButtonClickMichael}&gt;Michael&lt;/Button&gt;<br/>        &lt;/div&gt;<br/>    );<br/>};</span></pre><p id="2c2e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是表单中的组件。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="ee10" class="ln kb hu lj b fv lo lp l lq lr">import * as React from 'react';<br/>import MyComponent from './MyComponent';<br/>import { Control, Form } from 'react-redux-form';</span><span id="e38f" class="ln kb hu lj b fv ls lp l lq lr">export interface MyComponentFormProps {<br/>    viewModel: {<br/>        myComponent: string;<br/>    };<br/>}</span><span id="d094" class="ln kb hu lj b fv ls lp l lq lr">export default class MyComponentForm extends React.Component&lt;MyComponentFormProps, {}&gt;{<br/>    constructor(props: MyComponentFormProps) {<br/>        super(props);<br/>    }<br/>    <br/>    handleSubmit() {<br/>        console.log('submitted');<br/>    }<br/>    <br/>    render() {<br/>        const mapProps = {<br/>            value: (props: MapPropsProps) =&gt; props.viewValue,<br/>        };<br/>        const validators = () =&gt; ({<br/>            isNotMichael: (val: any): boolean =&gt; {<br/>                if (val === 'Michael') {<br/>                    return false;<br/>                }<br/>                return true;<br/>            },<br/>        });<br/>    <br/>        return (<br/>            &lt;Form className="myComponentForm" model="myComponentForm" onSubmit={this.handleSubmit}&gt;<br/>                &lt;Control.text<br/>                    component={MyComponent}<br/>                    model={'myComponentForm.myComponent'}<br/>                    mapProps={mapProps}<br/>                    validators={validators}<br/>                    updateOn="change"<br/>                /&gt;<br/>                &lt;Errors<br/>                  model="myComponentForm.myComponent"<br/>                  messages={{<br/>                    isNotMichael: 'Please don't choose michael.',<br/>                  }}<br/>                /&gt;<br/>            &lt;/Form&gt;<br/>        );<br/>    }<br/>}</span></pre><p id="50d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你需要给你的减速器加点东西。现在有一个表单部分—如果您需要访问有效/无效等。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="69ee" class="ln kb hu lj b fv lo lp l lq lr">import React from 'react';<br/>import { createStore } from 'redux';<br/>import { combineForms } from 'react-redux-form';</span><span id="449f" class="ln kb hu lj b fv ls lp l lq lr">const initialMyComponentForm = { myComponent: '' };</span><span id="34f0" class="ln kb hu lj b fv ls lp l lq lr">const store = createStore(combineForms({<br/>  myComponentForm: initialMyComponentForm,<br/>}));</span></pre><h1 id="5799" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">你的不会那么容易</h1><p id="6b1d" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">上面的例子是一个相对良性的例子，说明了如何在React-Redux代码中引入React-Redux表单。我也没有测试它是否能编译，所以让我知道它是否能工作。可惜，生活没那么容易。你会发现你的表格会变得更加复杂。您将拥有需要重用的组件。您将拥有需要重用的验证器。一切都应该被测试，并且是可测试的。而且，最重要的是，您可能想要干净的代码，不要让验证逻辑或所有这些表单之类的东西污染您的组件。</p></div><div class="ab cl lt lu hc lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="hn ho hp hq hr"><p id="0b98" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ma">原载于2018年2月26日</em><a class="ae ky" href="https://www.alexaitken.nz/blog/using-react-redux-forms/" rel="noopener ugc nofollow" target="_blank"><em class="ma">www . alexaitken . NZ</em></a><em class="ma">。</em></p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure></div></div>    
</body>
</html>