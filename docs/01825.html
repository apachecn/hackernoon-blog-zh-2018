<html>
<head>
<title>Building An E-commerce Search App with React Native 🔰</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React Native构建电子商务搜索应用🔰</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-an-e-commerce-search-app-with-react-native-2c87760a2315?source=collection_archive---------0-----------------------#2018-02-27">https://medium.com/hackernoon/building-an-e-commerce-search-app-with-react-native-2c87760a2315?source=collection_archive---------0-----------------------#2018-02-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/9248909f4a88f7f1a4089826877a1d2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NfPUYmXKR-duZ2vu9F6-Nw.png"/></div></div></figure><p id="e7ac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将回顾使用React native构建一个初级电子商务移动应用程序来搜索图书数据库的过程。如果你以前从未使用过React Native，这可以作为你使用<a class="ae ka" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> Javascript </a>进行移动应用开发之旅的起点！🎉</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="03fe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt ki translated"><span class="l kj kk kl bm km kn ko kp kq di"> S </span>先来点背景知识！现在是2018年，JavaScript的发展速度比以往任何时候都快。整个社区都在努力让网络变得越来越容易访问。从库和框架开始，到构建应用程序所需的开发工具，一切都已经成熟。当然，在这些改进中有一些混乱。但令人着迷的是，如果你今天了解JS，你可以构建一个web应用程序、一个后端服务器甚至移动应用程序。</p><p id="590f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">React Native支持使用JavaScript和React构建原生移动应用。与Cordova/Ionic/Phonegap不同，React Native也允许您使用JavaScript和WebViews构建移动应用程序，它完全编译成本地应用程序，并允许在需要时编写本机(Swift、Objective-C、Android)代码。</p><h1 id="3c8d" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">开始之前需要知道的事情👶</h1><p id="9bb3" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">你应该有一些(如果不是很多)写React的经验。这很容易上手，网上有<a class="ae ka" href="https://github.com/enaqx/awesome-react#react-tutorials" rel="noopener ugc nofollow" target="_blank">好的资源</a>可以提供帮助。如果是初学这门学科，可以<a class="ae ka" href="https://reactjs.org/tutorial/tutorial.html" rel="noopener ugc nofollow" target="_blank">从官方教程</a>入手。而且，如果你喜欢视频而不是文本，我强烈推荐<a class="lu lv gr" href="https://medium.com/u/db72389e89d8?source=post_page-----2c87760a2315--------------------------------" rel="noopener" target="_blank"> Kent C. Dodds </a>关于Egghead的免费课程—<a class="ae ka" href="https://egghead.io/courses/the-beginner-s-guide-to-reactjs" rel="noopener ugc nofollow" target="_blank">react js的初学者指南</a>。</p><blockquote class="lw"><p id="1f2b" class="lx ly hu bd lz ma mb mc md me mf jz ek translated">如果你对ES6+也有一定的了解，那是最好的。我已经帮你搞定了。我写了一个<a class="ae ka" href="https://github.com/metagrover/ES6-for-humans" rel="noopener ugc nofollow" target="_blank"> kickstarter指南来编写ES6 </a>，这应该会让你马上步入正轨。💪</p></blockquote><p id="f7bd" class="pw-post-body-paragraph jc jd hu je b jf mg jh ji jj mh jl jm jn mi jp jq jr mj jt ju jv mk jx jy jz hn dt translated">你不必花很多时间学习react和构建web应用。<em class="ml">(虽然我建议你这么做)</em>。但是，如果你想快速开始使用React Native，请熟悉React的基本原理，因为React Native和React在构建应用程序方面有相同的核心原则。他们只是针对两种不同的客户——web和本地。</p><p id="dc71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这里，我想强调一个事实，如果你在生产中使用React和React Native，你最终可以在所有平台(web、iOS和Android)之间共享大量代码。这将使您能够用更少的开发时间和成本维护更大的项目😉。这也是React Native开始被行业广泛采用的原因之一:Airbnb、脸书、Instagram、沃尔玛、特斯拉都使用RN构建了他们的移动应用。</p><h1 id="3785" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">基本概念👩‍🎓</h1><p id="0276" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">让我们首先简单讨论一下React Native是如何工作的，以及JavaScript代码是如何实际转化为一个kickass原生移动应用程序的。</p><p id="af6f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">任何React本机应用程序都在两个线程中运行:</p><p id="26c9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 1。主线程</strong></p><p id="36ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该线程管理您的应用程序的用户界面，并处理所有本机交互，包括手势和触摸。由于React Native还允许您添加用Android Java、Objective C或Swift编写的本机代码，这些代码块在这个线程上执行。</p><p id="397c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 2。JavaScript线程</strong></p><p id="236e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将执行您在单独的<em class="ml"> JavaScript引擎</em>中编写的JavaScript代码(默认情况下，该引擎存在于iOS中，并随版本一起提供给Android设备)。</p><p id="24ad" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了让应用程序工作，这两个线程需要相互通信，这就是<strong class="je hv">桥</strong>的作用。</p><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/503870c2b79543f37d036412114868fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1070/format:webp/1*QnLgyt1KLUy-X2pL2yBzbA.jpeg"/></div><figcaption class="mr ms fg fe ff mt mu bd b be z ek">React Native core architecture</figcaption></figure><p id="9c34" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">顾名思义，Bridge有助于JavaScript线程和主要本机线程之间的数据(消息)事务。这些消息可以是异步的，也可以是批处理的。Bridge使JavaScript代码能够与本机模块对话，并与设备API交互。</p><p id="cedd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们已经对react原生架构有了基本的了解，让我们进入实现细节。</p><h1 id="7f4b" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">设置开发环境💻</h1><p id="44c8" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated"><em class="ml">如果您已经安装了React Native并且熟悉开发生态系统，您可以跳到</em> <a class="ae ka" href="#0bd2" rel="noopener ugc nofollow"> <em class="ml">下一节</em> </a> <em class="ml">。</em></p><p id="7c7e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于那些刚刚入门的人来说，你可以<a class="ae ka" href="https://facebook.github.io/react-native/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">在这里</a>跟随官方的设置指南(更详细)，或者跟随我在这里:</p><blockquote class="mv mw mx"><p id="4872" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">确保您的系统中安装了<code class="eh nb nc nd ne b"><em class="hu">node</em></code> <em class="hu">和</em> <code class="eh nb nc nd ne b"><em class="hu">yarn</em></code> <em class="hu"> </em>。</p></blockquote><p id="88c5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将使用<code class="eh nb nc nd ne b">create-react-native-app</code> (CRNA)工具来设置样板文件。</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="a603" class="nj ks hu ne b fv nk nl l nm nn">yarn global add create-react-native-app</span></pre><p id="f2e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后运行下面的命令来创建一个新的React本地项目，比如说<code class="eh nb nc nd ne b">HelloNative</code>:</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="d592" class="nj ks hu ne b fv nk nl l nm nn">create-react-native-app HelloNative</span><span id="e304" class="nj ks hu ne b fv no nl l nm nn">cd HelloNative<br/>npm start</span></pre><p id="450c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将为您启动一个开发服务器，并在您的终端中打印一个QR码。</p><blockquote class="mv mw mx"><p id="c463" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">在这里使用<code class="eh nb nc nd ne b"><em class="hu">create-react-native-app</em></code>的唯一警告是，它可能不会使用react-native的最新版本。如果你对此感到困扰，你可以使用<a class="ae ka" href="https://expo.io/tools#cli" rel="noopener ugc nofollow" target="_blank"> Expo CLI </a>或<a class="ae ka" href="https://expo.io/tools#xde" rel="noopener ugc nofollow" target="_blank"> Expo XDE </a>，这两个网站也很容易上手。</p></blockquote><p id="4ed0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一步是在您的iOS或Android手机上安装<a class="ae ka" href="https://expo.io/" rel="noopener ugc nofollow" target="_blank"> Expo </a>客户端应用程序，并连接到与您的电脑相同的无线网络。使用Expo应用程序，您可以从您的终端扫描上面生成的二维码，并直接在手机中打开您的项目。多酷啊！</p><p id="c510" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此时，您的应用程序应该如下所示:</p><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff np"><img src="../Images/375e12cb84c5d499fe5067ca5c12f778.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*olehiS8kZWhblqYyXF8oRg.jpeg"/></div></div><figcaption class="mr ms fg fe ff mt mu bd b be z ek">React Native app</figcaption></figure><p id="e409" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您希望在模拟器上运行此应用程序，您可以运行:</p><p id="34a6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh nb nc nd ne b">yarn ios</code>对于iOS和，</p><p id="f2bd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh nb nc nd ne b">yarn android</code>用于Android模拟器。</p><p id="608b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将在模拟器上安装Expo客户端，并运行您的react-native应用程序。</p><p id="cc38" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你现在打开应用程序中的开发者菜单，你会看到启用<em class="ml">热重装和实时重装</em>的选项。这些允许你立即重新加载你的应用程序，如果你来自Android开发背景，这是一个很大的优势，因为gradle需要很长时间才能完成构建。</p><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nq"><img src="../Images/d796dfe6ec465644ed54cf800f7dacc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g4O20Dr5F8RXIXFiP3-rYg.jpeg"/></div></div><figcaption class="mr ms fg fe ff mt mu bd b be z ek">A closer look at the developer options</figcaption></figure><p id="bf0a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">开发人员选项也与调试特性捆绑在一起。我们将在下一节讨论它的细节。</p><h1 id="f531" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">⚒的调试和故障排除</h1><p id="837c" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">开发人员菜单中的调试远程JS特性允许我们在浏览器中浏览任何控制台消息或错误。这在你构建应用程序时非常方便。</p><p id="fe1b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此外，你可能想安装<a class="ae ka" href="https://github.com/jhen0409/react-native-debugger" rel="noopener ugc nofollow" target="_blank"> React本机调试器</a>。</p><figure class="mn mo mp mq fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nr"><img src="../Images/2ec9a93111241d74578d42dea4a3e5fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Clv1jBIEoTaEkaX1p0lJQ.png"/></div></div><figcaption class="mr ms fg fe ff mt mu bd b be z ek">React Native Debugger in action</figcaption></figure><p id="0195" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是一个漂亮的工具，允许我们在React本地应用程序中浏览组件状态和属性树。它还可以让你浏览和编辑应用于你的应用程序中的组件的样式，作为chrome-dev-tools的替代品。</p><h1 id="0bd2" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">🔋含电池</h1><p id="2f4e" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">React Native附带了一系列内置组件，您可以使用它们来构建应用程序。您可以在这里浏览可用组件的<a class="ae ka" href="https://facebook.github.io/react-native/docs/components-and-apis.html" rel="noopener ugc nofollow" target="_blank">列表，在这里您会发现其中一些组件是特定于平台的——在</a><a class="ae ka" href="https://facebook.github.io/react-native/docs/components-and-apis.html#android-components-and-apis" rel="noopener ugc nofollow" target="_blank"> Android特定的</a>和<a class="ae ka" href="https://facebook.github.io/react-native/docs/components-and-apis.html#ios-components-and-apis" rel="noopener ugc nofollow" target="_blank"> iOS特定的</a>部分。</p><p id="9be7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些组件将帮助你为你的应用程序组装简单的用户界面。与web类似，React Native支持<code class="eh nb nc nd ne b">fetch</code>，使您能够发出http请求并从您的服务器获取数据。</p><p id="3765" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了我们的📗booksearch应用程序，我们将使用Elasticsearch，这是一个<a class="ae ka" href="https://en.wikipedia.org/wiki/NoSQL" rel="noopener ugc nofollow" target="_blank"> NoSQL </a>数据库，可以在短时间内搜索大量数据。它通过检查每个文档中的所有单词，对以文档形式存储的数据(是JSON对象)执行<a class="ae ka" href="https://en.wikipedia.org/wiki/Full-text_search" rel="noopener ugc nofollow" target="_blank">全文搜索</a>。</p><p id="47be" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">即使你以前从未使用过Elasticsearch，你也应该能够理解这篇教程。</p><p id="d452" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Elasticsearch似乎不是一件容易上手的事情。如果您是初学者，那么设置、添加或查看数据以及生成查询可能会显得有些力不从心。这就是为什么，我们在<a class="ae ka" href="https://appbase.io" rel="noopener ugc nofollow" target="_blank"> Appbase </a>已经建立了一些开源工具来帮助你做所有这些事情，只需要点击几下鼠标😉</p><ul class=""><li id="acff" class="ns nt hu je b jf jg jj jk jn nu jr nv jv nw jz nx ny nz oa dt translated">用于<strong class="je hv">将数据</strong>添加到弹性搜索中的工具— <a class="ae ka" href="https://opensource.appbase.io/dejavu/importer/index.html" rel="noopener ugc nofollow" target="_blank">进口商</a> 🗃</li><li id="377d" class="ns nt hu je b jf ob jj oc jn od jr oe jv of jz nx ny nz oa dt translated">像excel表格一样查看弹性搜索数据的工具<strong class="je hv">—<a class="ae ka" href="https://opensource.appbase.io/dejavu/" rel="noopener ugc nofollow" target="_blank">数据浏览器</a>👀</strong></li><li id="b9dd" class="ns nt hu je b jf ob jj oc jn od jr oe jv of jz nx ny nz oa dt translated">用于<strong class="je hv">生成相关弹性搜索查询的工具</strong> — <a class="ae ka" href="https://opensource.appbase.io/mirage/" rel="noopener ugc nofollow" target="_blank">查询构建器</a>🔨</li></ul><p id="8c16" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这篇博文中，借助这些工具，我们将利用elasticsearch和React Native的优势来构建一个丰富的移动书店应用程序。</p><p id="87b3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以按照<a class="ae ka" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/_installation.html" rel="noopener ugc nofollow" target="_blank">官方安装指南</a>来设置和安装Elasticsearch服务器，或者您可以在<a class="ae ka" href="https://appbase.io" rel="noopener ugc nofollow" target="_blank"> appbase.io </a>创建一个免费帐户，该帐户提供Elasticsearch托管服务，并且易于使用。为简单起见，我们将使用appbase.io服务开始。</p><p id="0266" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了简单起见，我已经用图书数据集创建了一个appbase应用程序。你可以在这里查看数据集<a class="ae ka" href="https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAAKJAQAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsyzhBoa6J5YHVVPvvStg3duFL_9lBQxNAUEiS2LxrmQIi48IYsLycilGizdEqIf-Z3FUOIdIqHULMVrBqKtL5qUJx1gsOpt0WbuAhQS8qMoK8IdlqoG0tr-8UHi3sau8zMqY64fzpXCehrrPI4SNk8VTbiMsIZhduWAX4hCATwCBWfvrJqfAoiqKGt9zyTfsxLU7CbxGxE6__je7GeiC7UaPdD8YDeYC7eRxv-8JF1j3ysqY_Lkqc6hZAtUm9dN1Mg7O2uJ1MJxZyZWCmnz3ovLxz81T3C6KJZXI0OFjB5ll22UJm0iEaxN9NgY8yT9XOuK1k_90Fp4A&amp;editable=false" rel="noopener ugc nofollow" target="_blank"/>。</p><figure class="mn mo mp mq fq iv fe ff paragraph-image"><a href="https://opensource.appbase.io/dejavu/live/#?input_state=XQAAAAKJAQAAAAAAAAA9iIqnY-B2BnTZGEQz6wkFsyzhBoa6J5YHVVPvvStg3duFL_9lBQxNAUEiS2LxrmQIi48IYsLycilGizdEqIf-Z3FUOIdIqHULMVrBqKtL5qUJx1gsOpt0WbuAhQS8qMoK8IdlqoG0tr-8UHi3sau8zMqY64fzpXCehrrPI4SNk8VTbiMsIZhduWAX4hCATwCBWfvrJqfAoiqKGt9zyTfsxLU7CbxGxE6__je7GeiC7UaPdD8YDeYC7eRxv-8JF1j3ysqY_Lkqc6hZAtUm9dN1Mg7O2uJ1MJxZyZWCmnz3ovLxz81T3C6KJZXI0OFjB5ll22UJm0iEaxN9NgY8yT9XOuK1k_90Fp4A&amp;editable=false"><div class="fe ff og"><img src="../Images/c52bb2981b046386612ac55378b3d9d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rlPyWZhH7O0k5jRINyjYhA.png"/></div></a><figcaption class="mr ms fg fe ff mt mu bd b be z ek">Dataset of books</figcaption></figure><p id="7886" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以通过点击左下角的<strong class="je hv"> <em class="ml">克隆此应用</em> </strong>按钮来克隆此数据集并为您自己的应用生成凭证。</p><p id="c2ed" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些凭据将用于将我们的用户界面与此应用程序连接。我们将在本教程中使用的上述应用程序的凭据是:</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="25f7" class="nj ks hu ne b fv nk nl l nm nn">{<br/>    app: "good-books-ds",<br/>    credentials: "nY6NNTZZ6:27b76b9f-18ea-456c-bc5e-3a5263ebc63d",<br/>    type: "good-books-ds"<br/>}</span></pre><h1 id="d07c" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">打招呼👋反应搜索🔍</h1><p id="1444" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">我们将使用<a class="ae ka" href="https://github.com/appbaseio/reactivesearch" rel="noopener ugc nofollow" target="_blank"><strong class="je hv">React search</strong></a>，这是一个开源的React和React原生UI组件库，用于我参与的Elasticsearch。它提供了一系列高度可定制的丰富UI组件，可以连接任何Elasticsearch服务器，并为捆绑到这些组件中的所有通用用例(如电子商务、Yelp、Meetups等)提供适当的默认配置。</p><blockquote class="mv mw mx"><p id="002f" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated"><strong class="je hv">等等，为什么我现在需要ReactiveSearch？</strong></p><p id="0df5" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">ReactiveSearch简化了连接到Elasticsearch索引、进行查询、获取和在光滑的UI中呈现结果的整个过程，不仅如此，它还允许您使您的组件相互对话，即，如果组件A得到更新，组件B会知道，并且它可以更新自己，而不需要任何手动交互。</p><p id="76db" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">当您的屏幕上出现动态过滤器时，这种整个组件到组件的订阅就很方便，例如在电子商务应用程序中，选择一个电器类别，也会改变可用的子类别、价格等等。</p><p id="39ac" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">ReactiveSearch帮助你以一种声明式的方式轻松地创建更加智能的应用。</p></blockquote><blockquote class="lw"><p id="400c" class="lx ly hu bd lz ma oh oi oj ok ol jz ek translated">Reactivesearch-native捆绑了一系列原生UI组件，使您能够无缝地构建Airbnb、meetups等UI。您可以在这里找到<a class="ae ka" href="https://opensource.appbase.io/reactive-manual/native/getting-started/componentsindex.html" rel="noopener ugc nofollow" target="_blank">可用组件的完整列表</a>。</p></blockquote><figure class="on oo op oq or iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff om"><img src="../Images/992783fd19aaf032d638ec97c2d409b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tukhgLDbW8-i-oRKw_XQvQ.png"/></div></div><figcaption class="mr ms fg fe ff mt mu bd b be z ek">Reactivesearch Native Components</figcaption></figure><h1 id="a1a0" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo dt translated">构建📚图书搜索应用</h1><p id="acad" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">首先，我们需要通过运行以下命令在React本地项目中安装<code class="eh nb nc nd ne b">reactivesearch-native</code>:</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="5cac" class="nj ks hu ne b fv nk nl l nm nn">yarn add @appbaseio/reactivesearch-native</span></pre><p id="fc2c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所有的ReactiveSearch组件都包装在一个名为<a class="ae ka" href="https://opensource.appbase.io/reactive-manual/native/getting-started/reactivebase.html" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> ReactiveBase </strong> </a>的容器组件中，该容器组件将我们的UI组件与Elasticsearch集群连接起来。</p><p id="7f32" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将在<code class="eh nb nc nd ne b">App.js</code>中使用它:</p><figure class="mn mo mp mq fq iv"><div class="bz el l di"><div class="os ot l"/></div><figcaption class="mr ms fg fe ff mt mu bd b be z ek">Adding ReactiveBase component</figcaption></figure><blockquote class="mv mw mx"><p id="759f" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">注意我们在这里是如何使用基于Flex的样式的。React Native中的样式非常类似于web中的样式。如果你没有使用flex的经验，我强烈推荐从<a class="ae ka" href="http://flexboxfroggy.com/" rel="noopener ugc nofollow" target="_blank"> FlexBox Froggy </a>开始。</p></blockquote><p id="e8ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">除了<strong class="je hv">样式表</strong>，我们还在代码片段中使用了React Native的另外两个组件:</p><ul class=""><li id="5969" class="ns nt hu je b jf jg jj jk jn nu jr nv jv nw jz nx ny nz oa dt translated"><strong class="je hv">视图</strong>——这类似于React Native生态系统中的一个<code class="eh nb nc nd ne b">div</code> html元素。它是一个容器，支持带有<a class="ae ka" href="https://facebook.github.io/react-native/docs/flexbox.html" rel="noopener ugc nofollow" target="_blank"> flexbox </a>、<a class="ae ka" href="https://facebook.github.io/react-native/docs/style.html" rel="noopener ugc nofollow" target="_blank"> style </a>、<a class="ae ka" href="https://facebook.github.io/react-native/docs/handling-touches.html" rel="noopener ugc nofollow" target="_blank"> some touch handling </a>和<a class="ae ka" href="https://facebook.github.io/react-native/docs/accessibility.html" rel="noopener ugc nofollow" target="_blank"> accessibility </a>控件的布局。</li><li id="e079" class="ns nt hu je b jf ob jj oc jn od jr oe jv of jz nx ny nz oa dt translated">这是一个简单的本地组件，用于显示文本。你可以在这里阅读更多关于它的信息。</li></ul><p id="3899" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于我们的BookSearch应用程序，我们需要reactivesearch-native中的两个组件:</p><h2 id="839f" class="nj ks hu bd kt ou ov ow kx ox oy oz lb jn pa pb lf jr pc pd lj jv pe pf ln pg dt translated">1.用于搜索书籍的搜索框:</h2><p id="c7fb" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">这里，我们将使用来自<code class="eh nb nc nd ne b">reactivesearch-native</code>的<code class="eh nb nc nd ne b">DataSearch</code>组件。它创建了一个搜索UI组件，使我们能够轻松地在数据集中搜索一个或多个字段。看起来是这样的:</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="d11d" class="nj ks hu ne b fv nk nl l nm nn">&lt;DataSearch<br/>    componentId="searchbox"<br/>    dataField={[<br/>        'original_title',<br/>        'original_title.search',<br/>        'authors',<br/>        'authors.search',<br/>    ]}<br/>    placeholder="Search for books"<br/>    autosuggest={false}<br/>/&gt;</span></pre><p id="9b41" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个<a class="ae ka" href="https://opensource.appbase.io/reactive-manual/native/components/datasearch.html" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">数据搜索</strong> </a>组件查询数据集中给定的<code class="eh nb nc nd ne b">dataField</code> (s)。该组件位于<code class="eh nb nc nd ne b">ReactiveBase</code>组件内部，并从中接收所有必要的数据，因此我们不必自己编写Elasticsearch查询。</p><blockquote class="mv mw mx"><p id="fa0c" class="jc jd ml je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">注意我们是如何在数据字段属性中使用<code class="eh nb nc nd ne b">.search</code>字段的。<code class="eh nb nc nd ne b">authors.search</code>是<code class="eh nb nc nd ne b">authors</code>字段的一个<a class="ae ka" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/multi-fields.html" rel="noopener ugc nofollow" target="_blank">多字段</a>。Elasticsearch可以针对不同的目的以不同的方式索引相同的数据，我们可以使用这些数据来获得更好的搜索结果。</p></blockquote><h2 id="2f61" class="nj ks hu bd kt ou ov ow kx ox oy oz lb jn pa pb lf jr pc pd lj jv pe pf ln pg dt translated">2.用于显示搜索结果的结果列表视图:</h2><p id="8856" class="pw-post-body-paragraph jc jd hu je b jf lp jh ji jj lq jl jm jn lr jp jq jr ls jt ju jv lt jx jy jz hn dt translated">为了显示结果，我们将使用来自<code class="eh nb nc nd ne b">reactivesearch-native</code>的<code class="eh nb nc nd ne b">ReactiveList</code>组件。它看起来是这样的:</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="1c76" class="nj ks hu ne b fv nk nl l nm nn">&lt;ReactiveList<br/>    componentId="results"<br/>    dataField="original_title"<br/>    size={7}<br/>    showResultStats={false}<br/>    pagination={true}<br/>    react={{<br/>        and: "searchbox"<br/>    }}<br/>    onData={(res) =&gt; (<br/>        &lt;View style={styles.result}&gt;<br/>        &lt;Image source={{ uri: res.image }} style={styles.image} /&gt;<br/>        &lt;View style={styles.item}&gt;<br/>            &lt;Text style={styles.title}&gt;{res.original_title}&lt;/Text&gt;<br/>            &lt;Text&gt;{res.authors}&lt;/Text&gt;<br/>        &lt;/View&gt;<br/>        &lt;/View&gt;<br/>    )}<br/>/&gt;</span></pre><p id="b44b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它的道具是这样工作的:</p><ul class=""><li id="5a89" class="ns nt hu je b jf jg jj jk jn nu jr nv jv nw jz nx ny nz oa dt translated"><code class="eh nb nc nd ne b">dataField</code>:在此使用<code class="eh nb nc nd ne b">name</code>字段对结果进行排序。</li><li id="abfc" class="ns nt hu je b jf ob jj oc jn od jr oe jv of jz nx ny nz oa dt translated"><code class="eh nb nc nd ne b">react</code>:指定应该基于<code class="eh nb nc nd ne b">searchbox</code>组件的当前选定值构建查询。每当用户改变搜索框中的输入值时，就会触发一个新的查询——您不需要为这里的任何UI组件编写手动查询，它们已经预设了默认配置以满足所有通用用例，但是如果您愿意，您可以通过<code class="eh nb nc nd ne b">customQuery</code> prop覆盖它。</li><li id="1f1e" class="ns nt hu je b jf ob jj oc jn od jr oe jv of jz nx ny nz oa dt translated"><code class="eh nb nc nd ne b">onData</code>:接受一个函数，该函数应返回一个有效的<a class="ae ka" href="https://reactjs.org/docs/glossary.html#jsx" rel="noopener ugc nofollow" target="_blank"> JSX </a>，表示结果列表中的列表项。这个属性将用于呈现结果列表。</li></ul><p id="0f48" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在这里阅读所有关于它正确用法<a class="ae ka" href="https://opensource.appbase.io/reactive-manual/native/components/reactivelist.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="6341" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Reactivesearch建立在<a class="ae ka" href="https://docs.nativebase.io/docs/GetStarted.html" rel="noopener ugc nofollow" target="_blank">原生基础</a>之上💯它使用一些字体，可以通过添加:</p><pre class="mn mo mp mq fq nf ne ng nh aw ni dt"><span id="a5a5" class="nj ks hu ne b fv nk nl l nm nn">async componentWillMount() {<br/>  await Expo.Font.loadAsync({<br/>    Roboto: require('native-base/Fonts/Roboto.ttf'),<br/>    Roboto_medium: require('native-base/Fonts/Roboto_medium.ttf'),<br/>    Ionicons: require('@expo/vector-icons/fonts/Ionicons.ttf'),<br/>  });<br/>}</span></pre><p id="5bed" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有了这些组件和一些样式💅神奇的是，我们的应用看起来是这样的:</p><figure class="mn mo mp mq fq iv"><div class="bz el l di"><div class="os ot l"/></div></figure><blockquote class="lw"><p id="2daf" class="lx ly hu bd lz ma oh oi oj ok ol jz ek translated">瞧啊。你有一个在安卓和iOS上运行的图书搜索应用</p></blockquote><figure class="on oo op oq or iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ph"><img src="../Images/44362c2c76a1e63a90f2f0b5f7c9d424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBPZuczlQWtps9BMx6E3cw.jpeg"/></div></div></figure><blockquote class="lw"><p id="9e03" class="lx ly hu bd lz ma oh oi oj ok ol jz ek translated">如果你想在飞行中玩这个应用程序，<a class="ae ka" href="https://snack.expo.io/@metagrover/booksearch" rel="noopener ugc nofollow" target="_blank">试试这里的小吃</a>🎉</p></blockquote><h1 id="411e" class="kr ks hu bd kt ku kv kw kx ky kz la lb lc pi le lf lg pj li lj lk pk lm ln lo dt translated">有用的链接</h1><ol class=""><li id="5509" class="ns nt hu je b jf lp jj lq jn pl jr pm jv pn jz po ny nz oa dt translated"><a class="ae ka" href="https://github.com/appbaseio/reactivesearch" rel="noopener ugc nofollow" target="_blank">反应搜索GitHub报告</a>🌟</li><li id="4d65" class="ns nt hu je b jf ob jj oc jn od jr oe jv of jz po ny nz oa dt translated"><a class="ae ka" href="https://opensource.appbase.io/reactive-manual/native/" rel="noopener ugc nofollow" target="_blank">反应搜索文档</a></li></ol><p id="5ce2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">希望你喜欢这个教程。如果你有任何想法或建议，请告诉我，并在评论中分享你的应用版本😉</p><figure class="mn mo mp mq fq iv"><div class="bz el l di"><div class="pp ot l"/></div></figure></div></div>    
</body>
</html>