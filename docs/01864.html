<html>
<head>
<title>Hacking a $30 IoT camera to do more than it’s worth.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑了一个30美元的物联网摄像头来做更多的事情。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hacking-a-25-iot-camera-to-do-more-than-its-worth-41a8d4dc805c?source=collection_archive---------1-----------------------#2018-02-28">https://medium.com/hackernoon/hacking-a-25-iot-camera-to-do-more-than-its-worth-41a8d4dc805c?source=collection_archive---------1-----------------------#2018-02-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="09e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="http://bit.ly/2EwpHR1" rel="noopener ugc nofollow" target="_blank">小米大方IP </a>相机是一款室内机动WiFi相机，具有1080P分辨率和良好的夜视能力，价格便宜，但作为交换，你可以绑定到小米的Mi Home应用&amp;云。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/ef645a522782f4c8051eb80e1ff8de53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sLWwlFmBCASvwq9lrCOABQ.png"/></div></div></figure><p id="3c69" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">小米大方IP相机是<a class="ae jp" rel="noopener" href="/@tomac/rtsp-hack-for-a-15-xiaomi-wifi-ip-camera-453690396691">15美元小米小方</a>相机的继任者，并延续了小米一系列质优价廉的IP相机。新型号具有一系列新功能:更好的图像质量，MicroSD端口，旋转万向节，背面的USB端口可用于为其他设备充电，以及各种报警传感器等。在这篇文章中，我们仔细看看相机CFW替代开源固件安装。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kc"><img src="../Images/c041d1608595c7055dbd84701d0968b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-lFQeDK8O-Bk1wsBKN4TIw.jpeg"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Mainboard (Ingenic XBurst <strong class="bd kh">T20</strong> SoC) and motor assembly.</figcaption></figure><p id="c0d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于最低价格(从中国发货)，请查看常见的零售商，如<a class="ae jp" href="https://www.gearbest.com/ip-cameras/pp_693217.html?lkid=11893441" rel="noopener ugc nofollow" target="_blank"> Gearbest小米大方</a>或<a class="ae jp" href="http://bit.ly/2EwpHR1" rel="noopener ugc nofollow" target="_blank"> Dealextreme小米大方</a>(额外5%的优惠券代码以获得更好的价格，DX优惠券:APRBRAND)。</p><h1 id="5866" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">开箱即用的限制</h1><p id="5f51" class="pw-post-body-paragraph ir is hu it b iu lg iw ix iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo hn dt translated">小米对这款开箱即用的相机进行了一些限制，因为相机镜头只能通过MiHome应用程序查看，并且需要MiHome帐户。</p><h1 id="6b29" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">修正局限性</h1><p id="98f7" class="pw-post-body-paragraph ir is hu it b iu lg iw ix iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo hn dt translated">GitHub上的EliasKotlyar发布了一组相机的修改(CFW):<a class="ae jp" href="https://github.com/EliasKotlyar/Xiaomi-Dafang-Hacks" rel="noopener ugc nofollow" target="_blank">https://github.com/EliasKotlyar/Xiaomi-Dafang-Hacks</a></p><p id="6c26" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">CFW由两部分组成:</p><p id="6be5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">自定义固件，改变原来的固件从microsd启动。需要刷新而不是原来的固件。这部分不包含任何定制软件，它只允许你从microsd启动。您只需这样做一次。</p><p id="2d5d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">CFW文件，其中包含自定义软件。完成之前的步骤后，您必须将它们安装到您的microsd卡上。您可以通过更改microsd上的文件来轻松修改这一部分。</p><p id="b1cd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我可以将固件恢复到原来的版本吗？是的，你可以。但是，没有必要将其恢复。如果你的SD卡不包含CFW文件，你将只启动原来的软件。</p><h1 id="c0ac" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">如何闪现CFW？</h1><p id="36d0" class="pw-post-body-paragraph ir is hu it b iu lg iw ix iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo hn dt translated">下载CFW二进制。<a class="ae jp" href="https://github.com/EliasKotlyar/Xiaomi-Dafang-Hacks/blob/master/hacks/cfw/cfw-1.3.bin" rel="noopener ugc nofollow" target="_blank">https://github . com/EliasKotlyar/Xiaomi-Dafang-Hacks/blob/master/Hacks/cfw/cfw-1.3 . bin</a></p><p id="82f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确保下载的文件大小约为11.1MB。</p><pre class="jr js jt ju fq ll lm ln lo aw lp dt"><span id="667b" class="lq kj hu lm b fv lr ls l lt lu"><strong class="lm hv">Steps to flash the hacked loader firmware:</strong></span><span id="8d00" class="lq kj hu lm b fv lv ls l lt lu">Turn off the camera</span><span id="4e8d" class="lq kj hu lm b fv lv ls l lt lu">Get a firmware binay and rename it to "demo.bin". There should be a FAT filesystem and no more files in the sdcard.</span><span id="b453" class="lq kj hu lm b fv lv ls l lt lu">Insert the sdcard containing the firmware into the camera. </span><span id="1d3e" class="lq kj hu lm b fv lv ls l lt lu">Press and hold the reset camera (setup button), then turn on the camera. Wait until the light get blue, you can release the reset button.</span><span id="bdcb" class="lq kj hu lm b fv lv ls l lt lu">Wait until the firmware has finished flashing (like 5 minutes). Disconnect the power as soon as the base starts moving.</span><span id="52f4" class="lq kj hu lm b fv lv ls l lt lu"><strong class="lm hv">Steps to install CFW files:</strong></span><span id="f815" class="lq kj hu lm b fv lv ls l lt lu">Clone the repository from github. If you are on windows download the repository as zip file.</span><span id="4858" class="lq kj hu lm b fv lv ls l lt lu">Copy everything from "firmware_mod" folder into the root of the microSD</span><span id="5300" class="lq kj hu lm b fv lv ls l lt lu">It should look like this:</span><span id="3d30" class="lq kj hu lm b fv lv ls l lt lu">E:/<br/>├── bin<br/>├── config<br/>├── run.sh<br/>├── scripts<br/>└── www</span><span id="4566" class="lq kj hu lm b fv lv ls l lt lu">Modify the file config/wpa_supplicant.conf on the microSD to match your wifi-settings<br/>Insert the microSD and start the camera.</span></pre><p id="1154" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样。</p><h1 id="e3b0" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">CFW包含哪些特征？</h1><ul class=""><li id="e992" class="lw lx hu it b iu lg iy lh jc ly jg lz jk ma jo mb mc md me dt translated">H264/MJPEG全工作RTSP。基于<a class="ae jp" href="https://github.com/mpromonet/v4l2rtspserver" rel="noopener ugc nofollow" target="_blank">https://github.com/mpromonet/v4l2rtspserver</a></li><li id="f707" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">SSH-服务器(dropbear)</li><li id="4571" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">FTP服务器(bftpd)</li><li id="8df8" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">网络服务器</li><li id="3427" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">图像捕捉(获取Jpeg图像)</li><li id="a6a1" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">水平/垂直电机旋转/移动到中间</li><li id="9696" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">打开/关闭蓝色/黄色/红外发光二极管/红外截止</li><li id="c3b3" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">可以进行本地h264录制</li><li id="8d0f" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">远程音频播放和录制</li><li id="6bb6" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">MQTT</li><li id="1621" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">家庭助理集成</li></ul><h1 id="0ff2" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">连接到CFW</h1><p id="0b3a" class="pw-post-body-paragraph ir is hu it b iu lg iw ix iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo hn dt translated">按照说明进行安装和设置后，打开网络浏览器，在地址栏中输入摄像机的IP地址</p><p id="1042" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">选择您要运行的服务:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/9c867509da5d3448cc9221f724490127.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*c9wqehD781j0nA246qy_AA.png"/></div></figure><ul class=""><li id="479b" class="lw lx hu it b iu iv iy iz jc ml jg mm jk mn jo mb mc md me dt translated">RTSP流(使用MJPEG RTSP的样本):</li></ul><pre class="jr js jt ju fq ll lm ln lo aw lp dt"><span id="2620" class="lq kj hu lm b fv lr ls l lt lu">Once the RTSP stream is up and running at rtsp://ip-address:8554/unicast, you can to connecting to it with VLC (File &gt; Media &gt; Open Network Stream)</span></pre><ul class=""><li id="c3a6" class="lw lx hu it b iu iv iy iz jc ml jg mm jk mn jo mb mc md me dt translated">可能进行本地h264录制:</li></ul><pre class="jr js jt ju fq ll lm ln lo aw lp dt"><span id="cbe6" class="lq kj hu lm b fv lr ls l lt lu">/system/sdcard/bin/h264Snap &gt; /system/sdcard/video.h264</span></pre><ul class=""><li id="cb23" class="lw lx hu it b iu iv iy iz jc ml jg mm jk mn jo mb mc md me dt translated">音频录制/播放也是可能的:</li></ul><pre class="jr js jt ju fq ll lm ln lo aw lp dt"><span id="092d" class="lq kj hu lm b fv lr ls l lt lu">Playing Audio:<br/>/system/sdcard/bin/ossplay /usr/share/notify/CN/init_ok.wav</span><span id="b84b" class="lq kj hu lm b fv lv ls l lt lu">Recording Audio:<br/>/system/sdcard/bin/ossrecord /system/sdcard/test.wav</span></pre><p id="805e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，您可以直接从GPIOS控制相机的一些功能，如蓝色/黄色LED、红外滤光器和红外LED、X和y电机运动等</p><p id="ba61" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我用Android上的TinyCam在本地观看我的RTSP视频。你可以在TinyCam里找到基本的PTZ素材。查看MasterPIC在此帖子中的说明:<a class="ae jp" href="https://github.com/EliasKotlyar/Xiaomi-Dafang-Hacks/issues/41" rel="noopener ugc nofollow" target="_blank">https://github . com/EliasKotlyar/Xiaomi-Dafang-Hacks/issues/41</a></p><p id="f1ae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我用iSpy测试了CFW，但在互联网上，我是通过在我的<a class="ae jp" href="https://hackernoon.com/from-tv-box-to-high-performance-single-board-computer-running-linux-on-the-khadas-vim2-max-5c00f6e95aa4" rel="noopener ugc nofollow" target="_blank"> VIM2 </a>上运行的MotionEye来观看视频流的。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mo"><img src="../Images/5ef08d676c1f72885d85fcca72595109.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FjFGosB6FnSx6q_yjq2iLA.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Sample night vision mode of Hanizzo</figcaption></figure><p id="115f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我会向所有人推荐这款相机！你再也找不到比这款看起来更棒的了，它以如此低廉的价格拥有如此多的额外功能！</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="mp mq l"/></div></figure></div></div>    
</body>
</html>