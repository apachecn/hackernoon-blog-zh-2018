<html>
<head>
<title>webpack for Angular Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向Angular开发者的webpack</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/webpack-for-angular-developers-c8584a60e627?source=collection_archive---------3-----------------------#2018-02-28">https://medium.com/hackernoon/webpack-for-angular-developers-c8584a60e627?source=collection_archive---------3-----------------------#2018-02-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="cdee" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">理解webpack与Angular CLI的关系</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff jj"><img src="../Images/cefb5090332ed0dfda949968a668af34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/format:webp/1*hnYVxTcA6-pDlCcHIdqlkQ.jpeg"/></div></figure><p id="6a4f" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">首先，<a class="ae kn" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack </a>的人会用小写字母拼写，我也会。</p><p id="2173" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在这个故事中，我们将探索:</p><ol class=""><li id="fce4" class="ko kp hu jt b ju jv jx jy ka kq ke kr ki ks km kt ku kv kw dt translated"><strong class="jt hv"> Angular CLI </strong>和<strong class="jt hv"> webpack </strong>之间的“秘密”关系</li><li id="e9f3" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km kt ku kv kw dt translated">一些webpack基础知识</li><li id="cda4" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km kt ku kv kw dt translated">使用<strong class="jt hv"> Angular CLI </strong>创建Angular seed应用程序，允许我们配置<strong class="jt hv"> webpack </strong></li></ol><h1 id="8c0b" class="lc ld hu bd le lf lg lh li lj lk ll lm ja ln jb lo jd lp je lq jg lr jh ls lt dt translated">入门指南</h1><p id="0416" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">我假设你对<a class="ae kn" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>和<a class="ae kn" href="https://cli.angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular CLI </a>有所了解。你不需要成为一名专家，但是你至少应该具备如何使用npm 安装包的<a class="ae kn" href="https://docs.npmjs.com/getting-started/installing-npm-packages-globally" rel="noopener ugc nofollow" target="_blank">工作知识。另外，你至少应该熟悉</a><a class="ae kn" href="https://angular.io/guide/quickstart" rel="noopener ugc nofollow" target="_blank">角度快速入门</a>。</p><p id="66f2" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在我们开始之前，请确保您已经在全球范围内安装了Angular CLI。您可以通过在命令行中键入以下命令来进行检查:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="5e39" class="me ld hu ma b fv mf mg l mh mi">ng -v</span></pre><p id="d25b" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在撰写本文时，最新版本是1.7.1。如果你需要安装<strong class="jt hv">角度控制器</strong>，你可以这样做:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="30e5" class="me ld hu ma b fv mf mg l mh mi">npm install -g @angular/cli</span></pre><p id="772c" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">让我们创建一个新的Angular项目，名为:<strong class="jt hv"> ngcli-webpack </strong></p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="2e97" class="me ld hu ma b fv mf mg l mh mi">ng new ngcli-webpack</span></pre><p id="3e94" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">要运行您的应用程序:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="ae14" class="me ld hu ma b fv mf mg l mh mi">cd ngcli-webpack<br/>ng serve</span></pre><p id="6642" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">将浏览器指向:<code class="eh mj mk ml ma b">http:\\localhost:4200</code>以查看其工作情况。</p><p id="54d2" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated"><strong class="jt hv">注意</strong>:如果您使用的是Internet Explorer，您需要在<strong class="jt hv"> src/polyfills.ts </strong>中取消对导入的注释。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/a7710daa3feb2d0648026ad93ae2767f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*wzD9RsSKKGXycRkIJI90bw.png"/></div></figure><h1 id="56dc" class="lc ld hu bd le lf lg lh li lj lk ll lm ja ln jb lo jd lp je lq jg lr jh ls lt dt translated">Angular CLI和webpack</h1><p id="88b3" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">webpack 功能强大。它是<a class="ae kn" href="https://webpack.js.org/configuration/" rel="noopener ugc nofollow" target="_blank">难以置信的可配置</a>。然而，这种能力和灵活性可能会导致一个相当陡峭的学习曲线。</p><p id="f9f3" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">了解<strong class="jt hv"> webpack </strong>是使用现代JavaScript框架(如<a class="ae kn" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>和<a class="ae kn" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> Angular </a>)的主要障碍之一。Angular团队中的好人希望让人们更容易开始使用Angular。</p><p id="33b9" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">他们通过在<strong class="jt hv"> Angular CLI </strong>中嵌入<strong class="jt hv"> webpack </strong>来做到这一点。现在，作为Angular开发人员，你不需要了解任何关于webpack的知识。Angular CLI隐藏了所有webpack复杂性。然而，这种简单性是以灵活性为代价的。通过使用Angular CLI，您将失去配置和定制webpack的能力。</p><h1 id="9fcd" class="lc ld hu bd le lf lg lh li lj lk ll lm ja ln jb lo jd lp je lq jg lr jh ls lt dt translated">webpack基础知识</h1><p id="c2a9" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">根据<a class="ae kn" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> webpack网站</a>:</p><blockquote class="mn"><p id="1f02" class="mo mp hu bd mq mr ms mt mu mv mw km ek translated"><em class="mx"> webpack </em>是一个用于现代JavaScript应用的<em class="mx">静态模块捆绑器</em></p></blockquote><p id="9545" class="pw-post-body-paragraph jr js hu jt b ju my iv jw jx mz iy jz ka na kc kd ke nb kg kh ki nc kk kl km hn dt translated">在webpack中，您可以配置以下内容:</p><ul class=""><li id="0408" class="ko kp hu jt b ju jv jx jy ka kq ke kr ki ks km nd ku kv kw dt translated"><strong class="jt hv">条目【webpack应该启动的模块</strong></li><li id="f8f0" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km nd ku kv kw dt translated"><strong class="jt hv">输出【webpack发出它创建的<em class="ne">包</em></strong></li><li id="8e0c" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km nd ku kv kw dt translated">加载器:让webpack不仅仅处理JavaScript文件</li><li id="1d37" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km nd ku kv kw dt translated">插件:执行各种各样的任务，比如缩小</li></ul><p id="071e" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">您可以在webpack配置文件中设置所有这些，该文件通常命名为:<strong class="jt hv"> webpack.config.js </strong></p><h2 id="4f7b" class="me ld hu bd le nf ng nh li ni nj nk lm ka nl nm lo ke nn no lq ki np nq ls nr dt translated">那么webpack.config.js在哪里呢？</h2><p id="3681" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">“但是等等Todd，我刚刚搜索了我的整个Angular项目，没有webpack.config.js。你确定Angular CLI仍然使用webpack吗？”</p><p id="0dd6" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">好吧，你说的没错，我们Angular项目里没有<strong class="jt hv"> webpack.config.js </strong>。并且，一些健康的怀疑是一件好事。但是，让我们快速看一下，并验证Angular确实依赖于webpack。</p><p id="5f7f" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在我们的项目中，我们可以在这里找到Angular CLI的本地副本:<code class="eh mj mk ml ma b">node_modules\@angular\cli</code></p><p id="b020" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在该目录中，您应该看到Angular CLI的<strong class="jt hv"> package.json </strong>文件。打开它，看看依赖项，你会看到<strong class="jt hv"> webpack </strong>、<strong class="jt hv"> webpack-dev-server </strong>等等。例如:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ns nt l"/></div></figure><p id="1587" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">此外，在node_modules中，您可以看到这些基于webpack的依赖项确实被安装了。比如:<code class="eh mj mk ml ma b">node_modules/webpack</code></p><p id="d35a" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">因此，我们看到Angular CLI实际上正在使用<strong class="jt hv"> webpack </strong>，但它对我们来说只是一个黑盒。如果你不是webpack专家，这是很棒的。但是，如果你已经花时间来提高你的网络包技能，这可能是你无法接受的。别担心，Angular CLI为我们提供了一个解决方案。</p><h1 id="1140" class="lc ld hu bd le lf lg lh li lj lk ll lm ja ln jb lo jd lp je lq jg lr jh ls lt dt translated">使用ng弹出功能访问webpack配置</h1><p id="1b6c" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">一旦我们使用Angular CLI生成了种子应用程序，我们就可以使用<code class="eh mj mk ml ma b">ng eject</code>切换到本地webpack方法</p><p id="73c3" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">在我们的应用程序运行的根目录中:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="8deb" class="me ld hu ma b fv mf mg l mh mi">ng eject</span></pre><p id="b285" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">这将执行以下操作:</p><ol class=""><li id="7f31" class="ko kp hu jt b ju jv jx jy ka kq ke kr ki ks km kt ku kv kw dt translated">基于当前构建，在项目的根目录下生成一个webpack.config.js文件。</li><li id="511b" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km kt ku kv kw dt translated">在<strong class="jt hv">中将<code class="eh mj mk ml ma b">ejected</code>标志设置为真。angular-cli.json </strong>。</li><li id="7192" class="ko kp hu jt b ju kx jx ky ka kz ke la ki lb km kt ku kv kw dt translated">更新package.json中的脚本以基于webpack而不是Angular CLI运行。</li></ol><h1 id="4e12" class="lc ld hu bd le lf lg lh li lj lk ll lm ja ln jb lo jd lp je lq jg lr jh ls lt dt translated">弹出后运行</h1><p id="70e4" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">您应该在弹出后进行npm安装:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="d28a" class="me ld hu ma b fv mf mg l mh mi">npm install</span></pre><p id="763b" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">现在，如果我们想看到我们的应用程序运行，我们不能再使用<strong class="jt hv"> ng serve </strong>。我们需要使用:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="e0f0" class="me ld hu ma b fv mf mg l mh mi">npm run start</span></pre><p id="86ef" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果我们查看我们的package.json，我们可以看到这个脚本实际上转换为:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="83b4" class="me ld hu ma b fv mf mg l mh mi">webpack-dev-server --port=4200</span></pre><p id="b77c" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">所以我们仍然可以去<code class="eh mj mk ml ma b">http:\\localhost:4200</code>查看我们的应用程序在开发服务器上运行。</p><p id="c7f9" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">如果我们尝试使用ng serve或ng build或任何特定于ng项目的东西，我们会得到一个错误:</p><pre class="jk jl jm jn fq lz ma mb mc aw md dt"><span id="9d06" class="me ld hu ma b fv mf mg l mh mi">ng build<br/>An ejected project cannot use the build command anymore.</span></pre><p id="e3eb" class="pw-post-body-paragraph jr js hu jt b ju jv iv jw jx jy iy jz ka kb kc kd ke kf kg kh ki kj kk kl km hn dt translated">警告:一旦使用ng eject，就无法取消弹出，也没有简单的方法来返回使用Angular CLI进行类似于<code class="eh mj mk ml ma b">ng generate</code>的操作。你必须做一些事情，比如创建一个新的Angular项目，然后将所有的源代码复制到其中。</p><h1 id="49a8" class="lc ld hu bd le lf lg lh li lj lk ll lm ja ln jb lo jd lp je lq jg lr jh ls lt dt translated">摘要</h1><p id="d5b2" class="pw-post-body-paragraph jr js hu jt b ju lu iv jw jx lv iy jz ka lw kc kd ke lx kg kh ki ly kk kl km hn dt translated">使用Angular CLI，您现在能够轻松创建由Angular CLI构建的种子应用程序，该应用程序具有您一直想要的完全可配置的webpack.config.js。但是请记住:</p><blockquote class="mn"><p id="689c" class="mo mp hu bd mq mr ms mt mu mv mw km ek translated">权力越大，责任越大。<br/>——斯坦·李</p></blockquote></div></div>    
</body>
</html>