<html>
<head>
<title>The Architecture of nderground:
a social network built for privacy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">地下建筑:为隐私而建的社交网络</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-architecture-of-nderground-www-nderground-net-a-social-network-built-for-privacy-cbd19c9d64e8?source=collection_archive---------17-----------------------#2018-03-01">https://medium.com/hackernoon/the-architecture-of-nderground-www-nderground-net-a-social-network-built-for-privacy-cbd19c9d64e8?source=collection_archive---------17-----------------------#2018-03-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/f16932f6c5f21e29fd610143f39e716f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hluf4cIZoGlbDLTCLvbevQ.jpeg"/></div></div></figure><div class=""/><h1 id="f803" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">地下建筑的设计理念</h1><blockquote class="ka kb kc"><p id="9f6d" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">社交媒体的蜜月期已经结束。对那些会失去任何东西的人来说没有任何好处。<br/>  <a class="ae lc" rel="noopener" href="/cuepoint/social-media-is-dead-to-donald-glover-and-action-bronson-bf3d59de68f2">社交媒体对唐纳德·格洛弗来说已经死了，Action Bronson和伊吉·阿德利亚</a>Paul Cantor，Medium，2015年2月25日</p></blockquote><p id="ccd3" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">人类是群居动物。我们渴望得到他人的联系、认可和关爱。像脸书这样的社交网络旨在将我们对人际关系的渴望货币化。事实上，社交网络被设计成将我们对联系的渴望变成一种强迫。</p><p id="c757" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">支付社交网络访问的货币是我们的个人信息，这些信息成为复杂软件分析的输入，这些软件分析将这些信息作为各种广告商的素材。</p><p id="daa1" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">社交网络上呈现的生活形象通常是完美生活、人际关系和美食的合成虚假形象。学术研究表明，当用户将他们的实际生活与他们在社交网络上看到的精心策划的生活进行比较时，人们在看社交网络帖子时会感觉更糟。</p><p id="7abb" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">地下世界是一个为隐私而设计的社交网络。贴在地下的东西在网上是看不到的。贴在地下的文字和照片只能被一群精选的朋友和家人看到。地下世界被设计成一个更真实的环境。</p><blockquote class="ka kb kc"><p id="69b0" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">截至目前，我在脸书的所有信息都是由图片、评论、生活事件和更多我从未听说过的人组成的——几乎都是我从未听说过或见过的人。这似乎是一个实验，我的所有帖子都是由我不认识但我的脸书朋友喜欢或评论过的人发布的。</p><p id="4ceb" class="kd ke kf kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">糟透了。但更重要的是，这让我大开眼界，也让我感到有些不安和不快。萨特说，地狱是别人的；实际上，它是你不认识的人的生活事件。<br/> <a class="ae lc" href="https://talkingpointsmemo.com/edblog/facebook-in-hell" rel="noopener ugc nofollow" target="_blank">乔希·马歇尔，谈话要点备忘录</a>，2015年7月1日</p></blockquote><p id="6ab7" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">在脸书，一个常见的(也是令人不安的)经历是，你发表了一条针对朋友的评论，却被朋友社交圈里的陌生人打包了。在最糟糕的情况下，一个不小心的评论可能会被陌生人发现，传播开来，给你的生活带来混乱。</p><p id="4b4e" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">地下的帖子和照片只能在你的社交圈里看到。我们称这个社交圈为<em class="kf">卡拉斯</em>，这个术语来自库尔特·冯内古特的小说<em class="kf">猫的摇篮</em>。除非他们也是你的朋友，否则你朋友的朋友永远不会看到你在地下发布的任何内容。</p><h1 id="a6b3" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">卡拉斯与地下隐私</h1><p id="ffef" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">在地下，卡拉斯是你生活中的一部分。你的朋友，你的家人或者任何你想邀请进入你的地下世界的人。您在地下发布的内容只有您的卡拉斯在登录地下后才能看到。</p><p id="3c58" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">在下图中，鲍勃、爱丽丝和泰德在同一个卡拉斯。他们都可以看到他们每个人在地下张贴的材料。</p><figure class="lm ln lo lp fq hw fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/1f7745634a503b90c4fd4a6533b03cfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/format:webp/0*xhjL9Qj3PV0Tp_L2.jpg"/></div></figure><p id="07a8" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">莎拉在鲍勃的《卡拉斯》中，但不在爱丽丝的《卡拉斯》中，简在爱丽丝的《卡拉斯》中，但不在鲍勃的《》中。这意味着Bob和Sarah可以看到他们各自张贴的材料，但是Alice看不到Sarah张贴的任何材料。同样，Jane在Alice的卡拉斯中，可以看到Alice发布的内容，但是Jane看不到Bob或ted发布的任何内容。</p><h1 id="6010" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">地下工程目标</h1><h2 id="b49a" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">安全性和隐私</h2><p id="98a0" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">地下社交网络的核心是隐私。为了保护隐私，nderground必须是一个“硬目标”web应用程序，使用最新的web安全功能。</p><h2 id="78e3" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">可量测性</h2><p id="2bd9" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">nderground旨在支持成千上万的用户。当用户在地下提出要求时，应该平稳地添加资源来处理负载。</p><h2 id="e7ed" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">费用</h2><p id="c4de" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">nderground是一家bootstrap创业公司。没有风险投资资金可以烧钱。地下工程的创始人支付所有的费用，所以尽可能降低成本的设计是很重要的。</p><h1 id="0010" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">地下董事会和照片画廊</h1><figure class="lm ln lo lp fq hw fe ff paragraph-image"><div class="fe ff me"><img src="../Images/85fc950bde70319eb253f37f1a6aa180.png" data-original-src="https://miro.medium.com/v2/resize:fit:974/format:webp/1*TVYTlEOQkpWkXATMIkqr3g.jpeg"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek"><em class="mj">The nderground board for one of the test accounts</em></figcaption></figure><figure class="lm ln lo lp fq hw fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/5d9f45810b439197c475cf43fcae34b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/format:webp/1*colualR27SovKEDSmO87BQ.jpeg"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek"><em class="mj">The nderground photo galleries for the authors nderground account</em></figcaption></figure><p id="d390" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">地下世界的两个基本特征是属于地下世界用户的图板和图片库。该板允许地下用户张贴文字和照片。用户卡拉斯的其他成员可以看到并评论论坛帖子。地下用户也可以访问他们的卡拉斯成员的董事会，并发表帖子或评论。</p><p id="b5cb" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">一些社交网络用户喜欢通过张贴照片来与他们的社区互动，也许还附有简短的说明。地下世界支持命名图片库，允许地下世界用户发布他们想要与他们的卡拉斯共享的照片。</p><h1 id="7e1c" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">亚马逊网络服务的地下世界</h1><p id="d764" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">利用亚马逊网络服务的机会让nderground以更低的成本更快地为用户做好准备。地下世界使用的所有服务都是“零维护”的，这样就可以将时间集中在开发地下世界上，而不是维护网络和数据库服务器。</p><p id="5169" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">下图概述了地下组织使用的自动气象站服务。</p><figure class="lm ln lo lp fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ml"><img src="../Images/f45be8d7ca31b623e5f0854b8e5af0cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GIYHEZ0xczoMxAq6sEFj8w.jpeg"/></div></div></figure><h2 id="ff70" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">路由53 DNS解析</h2><p id="19ed" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">满足Web请求的第一步是域名服务(DNS)解析，它将域名(如nderground.net)映射到实际的IP地址。Route 53服务使得为AWS上托管的域设置DNS解析变得容易。</p><h2 id="169b" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">弹性豆茎</h2><p id="1cf4" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">Elastic Beanstalk是一个负载平衡的web服务器环境。可以配置一个或多个web服务器来运行web应用程序。随着需求的增加，Elastic Beanstalk将增加额外的web服务器来处理负载。当需求再次下降时，分配来处理需求的web服务器将会缩减。</p><p id="36e7" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">是一个Java虚拟机(JVM) web应用程序。为了运行nderground，Elastic Beanstalk被配置为运行<a class="ae lc" href="http://tomcat.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Tomcat </a> JVM应用程序web服务器。AWS提供了最新版本的Apache Tomcat和JVM环境。升级到新版本只需点击一个按钮。</p><h2 id="a438" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">弹性计算云(EC2) Linux实例</h2><p id="c45f" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">当为web应用程序配置了Elastic Beanstalk环境时，会选择一个或多个EC2实例。在Tomcat应用服务器的情况下，这些实例将运行Amazon版本的Linux。为了省钱，亚马逊可以购买<a class="ae lc" href="https://aws.amazon.com/ec2/pricing/reserved-instances/" rel="noopener ugc nofollow" target="_blank">预约实例</a>。这些实例将自动用于弹性Beanstalk配置中。</p><p id="0ed4" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">与任何EC2 Linux实例一样，用户可以使用ssh登录并检查web日志，这在跟踪与执行相关的问题时非常有用。</p><h2 id="ad35" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">RDS/Postgres</h2><p id="0909" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">亚马逊的<a class="ae lc" href="https://aws.amazon.com/rds/" rel="noopener ugc nofollow" target="_blank">关系数据库服务(RDS) </a>提供“托管的”(例如，零维护)数据库实例。在交易更新很重要的情况下，nderground使用RDS/Postgres数据库存储关键信息。这包括地下加密的登录信息和卡拉斯会员信息。</p><p id="8456" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">Postgres数据库很少使用，因为它只包含相对少量的关键信息。尽管数据库很少使用，但必须分配一个24/7运行的RDS服务器。</p><p id="210c" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">2017年11月，亚马逊宣布了<a class="ae lc" href="https://aws.amazon.com/blogs/aws/in-the-works-amazon-aurora-serverless/" rel="noopener ugc nofollow" target="_blank">无服务器极光服务</a>。Aurora是亚马逊的可扩展关系数据库。Aurora同时支持MySQL和Postgres版本。MySQL版本的Aurora于2018年初上市。Postgres版本计划于2018年下半年推出。</p><p id="34af" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">对于像nderground这样需要相对低频率访问关系数据库的web应用程序来说，Severless Aurora是一个非常有吸引力的服务。无服务器的Aurora应该会大大降低关系数据库服务的成本。</p><p id="688d" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">在未来，目前由nderground使用的保留RDS/Postgres实例可能会被无服务器Aurora所取代。Topstone软件咨询公司也将在未来的web应用程序中使用这种无服务器的Aurora。</p><h2 id="4058" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">简单存储服务(S3)</h2><p id="66a4" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">S3是亚马逊高度可靠的网络存储服务。可以通过类似于存储路径的目录(例如，“我的目录/照片/我的照片. jpg”)来逻辑地引用在S3存储的照片和文本。每个地下用户被分配一个随机命名的顶层“目录”,该目录存储他们在地下存储的图像和文本。随机顶级“目录”名称用于使S3访问更有效，因为S3引用将随机分布。</p><h2 id="1310" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">DynamoDB</h2><p id="4d35" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">DynamoDB是亚马逊的“NoSQL”服务。DynamoDB是nderground使用的核心数据库服务。DynamoDB存储地下论坛帖子、论坛帖子上的线程评论、照片元数据和“内务管理”信息，如地下IP访问跟踪(出于安全目的维护该信息，以帮助识别地下帐户泄露)。</p><p id="c608" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">精心设计的DynamoDB表和键可以支持非常快速和廉价的DynamoDB访问。DynamoDB的成本是基于查询的。与RDS/Postgres服务不同，在不使用DynamoDB时是没有成本的。</p><p id="bca7" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">DynamoDB不仅是一项极具吸引力的地下服务，也可以用于其他Topstone软件咨询移动和网络应用程序。</p><h2 id="e175" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">希腊字母的第11个</h2><p id="9b58" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">创建下载到地下的照片的缩略图和缩放版本是一项内存和计算密集型操作。在Lambda可用之前，nderground配置了额外的EC2资源，以避免通过弹性Beanstalk伸缩添加新的EC2实例时的延迟。当Lambda可用时，照片处理转移到Lambda，可以快速扩展。这使得nderground可以使用更少的预分配EC2资源运行。</p><p id="d416" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">Lambda服务附带了<a class="ae lc" href="https://aws.amazon.com/lambda/pricing/" rel="noopener ugc nofollow" target="_blank">自由层“处理</a>。这包括100万个请求和3，200，00秒的处理时间。这是37天的连续处理时间。这意味着对于地下，λ处理本质上是免费的。</p><p id="9eca" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">关于Lambda照片处理的讨论可以在【Topstone软件出版物中找到。</p><h2 id="f048" class="lq jd if bd je lr ls lt ji lu lv lw jm ld lx ly jq le lz ma ju lf mb mc jy md dt translated">简单电子邮件服务</h2><p id="0182" class="pw-post-body-paragraph kd ke if kg b kh lg kj kk kl lh kn ko ld li kr ks le lj kv kw lf lk kz la lb hn dt translated">地下世界为各种活动生成电子邮件，包括邀请地下世界和通知卡拉斯成员关于董事会和画廊的帖子。SES是一种托管电子邮件服务，允许在不配置电子邮件服务器的情况下发送电子邮件。</p><p id="4308" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated">和Amazon Lambda一样，SES的价格对nderground来说极具吸引力。目前，亚马逊EC2应用程序每月发送的前62，000封电子邮件是免费的。额外邮件0.10美元/1000。这意味着，即使大量使用地下资源，电子邮件服务的成本也将远远低于部署电子邮件服务器的成本。</p><p id="162b" class="pw-post-body-paragraph kd ke if kg b kh ki kj kk kl km kn ko ld kq kr ks le ku kv kw lf ky kz la lb hn dt translated"><em class="kf">这篇文章的早期版本最初发表在</em> <a class="ae lc" href="http://www.topstonesoftware.com" rel="noopener ugc nofollow" target="_blank"> <em class="kf">托普斯通软件</em> </a> <em class="kf">的网页上。</em></p></div></div>    
</body>
</html>