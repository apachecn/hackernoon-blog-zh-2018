<html>
<head>
<title>Going Serverless with Amazon Web Services (AWS) — The Modern Approach</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用亚马逊网络服务(AWS)实现无服务器化——现代方法</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/going-serverless-with-amazon-web-services-aws-the-modern-approach-245fa9203f47?source=collection_archive---------9-----------------------#2018-03-07">https://medium.com/hackernoon/going-serverless-with-amazon-web-services-aws-the-modern-approach-245fa9203f47?source=collection_archive---------9-----------------------#2018-03-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="874d" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">这是两个博客系列中的第二个博客，使用亚马逊网络服务(AWS)</p><p id="1973" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated"><a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2"> 1。传统方法<em class="hu">🚶</em> </a></p><p id="857b" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">2.现代方法<em class="hu">🚴</em></p></blockquote><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ju"><img src="../Images/43cc4aa613a4afd9d0039d2f997d43fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9frjLC-8ztLC0AlDin5-JA.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Jump out, Think Serverless!</figcaption></figure><p id="9b2e" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">在本系列的第一篇博客<a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2">使用Amazon Web Services (AWS)实现无服务器—传统方法</a>中，我讨论并演示了通过AWS控制台手动部署一个非常基本的无服务器应用程序<em class="iw">的过程。如果您浏览过那个博客，或者您曾经这样部署过您自己的无服务器应用程序，您可能已经知道在传统途径中这样做的痛苦。</em></p><p id="1bc5" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">让我快速回顾一下，我们到目前为止所做的工作。</p><p id="6d63" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">我们正在为一个简单的<em class="iw">联系我们</em>的静态网站构建后端。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="ab fr cl kn"><img src="../Images/8ee71eba5ef90898f2116e0a3426b191.png" data-original-src="https://miro.medium.com/v2/format:webp/1*vtrQxvoUJFkRLfKWpfGvkQ.png"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Contact Us form</figcaption></figure><h2 id="d95a" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated"><strong class="ak">痛苦的故事</strong></h2><p id="9ef9" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">我们首先尝试在AWS控制台中编写一个简单的lambda函数，它由API网关事件触发。后来，我们想在我的函数中使用一些第三方NodeJS库，我们必须在我的本地计算机中编写lambda函数，并通过AWS控制台以zip格式上传。</p><p id="9773" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">通过遵循最佳实践，我们甚至为我的lambda函数创建了一个AWS IAM角色，该角色只为该函数启用必要的权限。</p><p id="257a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">我们可以从lambda控制台本身创建一个API网关端点，但是必须重新访问APIG控制台来应用一些技术。</p><p id="b975" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">听起来已经很痛苦了，对吧？🤕</p><p id="f88d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">这只是故事的开始。</p><p id="eaaf" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">额外痛苦1:更改现有代码</strong></p><p id="8b59" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">让我们假设我们想要更改我的函数的代码，以包含更多的验证。</p><p id="5273" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">在AWS控制台中完成这一更新非常容易！😉</p><p id="dd9f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">一旦你上传了这个函数，Lambda console就会解压缩它，并在仪表盘中向我们展示一个可编辑的代码。我们只需编辑我们的代码，然后点击大橙色的<strong class="ix hv">保存</strong>按钮。🤠</p><p id="1b77" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">额外的痛苦2:添加新的第三方库/依赖关系</strong></p><p id="54c3" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">假设，我们想要添加一个新的第三方库来为我们的lambda函数添加更多的功能。(我们想在我们的示例用例中添加<a class="ae jt" href="https://validatejs.org/" rel="noopener ugc nofollow" target="_blank"> <em class="iw">验证js </em> </a>)</p><p id="c182" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">真扫兴。你不能在Lambda控制台中这样做。😦</p><p id="7f54" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">现在，我正退回到本地计算机中的代码。我必须手动安装我的节点模块，并用依赖项重新打包代码。</p><p id="88f8" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">不对不对！！因为我以前在AWS控制台中编辑过这段代码，所以现在我在本地有一个过时的版本。必须回到Lambda控制台来复制或下载最新的代码。😣</p><p id="8686" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">额外的痛苦3:将lambda与更少的AWS资源相关联</strong></p><p id="0d3c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">到目前为止，我们的lambda只想与DynamoDB对话。现在，我们希望我们的lambda也能与S3对话(假设我们为联系我们表单添加了文件上传功能)。现在过程如下，</p><ul class=""><li id="1337" class="lo lp hu ix b iy iz jc jd kk lq kl lr km ls js lt lu lv lw dt translated">导航到S3控制台并创建一个存储桶</li><li id="85b5" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js lt lu lv lw dt translated"><strong class="ix hv">阅读S3的javascript SDK文档，因为我们不知道它是API。</strong></li><li id="44e3" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js lt lu lv lw dt translated">向现有代码添加必要的补丁以处理文件上传。</li><li id="07a7" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js lt lu lv lw dt translated">通过AWS lambda控制台上传代码，点击大橙色<strong class="ix hv">保存</strong>按钮。</li></ul><p id="c618" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">好吧！😫。现在我的lambda可以上传到S3了！！</p><p id="06dc" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">但是当我测试我的设置时，当我试图将我的内容上传到S3时，我遇到了一个大错误。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mc"><img src="../Images/0e01b65bb2d48dea557cfa1e5e486028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1HRBrz4-rkTI5U3c.jpg"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Lambda fails to access S3</figcaption></figure><p id="95ed" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">原因？</strong></p><p id="fd1b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">我遵循我的旧编程书籍中的最佳实践，最初只给Lambda必要的权限。现在我的拉姆达不能和S3说话了。</p><p id="366b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">所以我必须编辑分配给lambda的IAM角色，通过添加新的权限来与S3对话。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="md me l"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">This is someone who just started Serverless development on traditional approach</figcaption></figure><p id="09a4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">在这篇博客中，让我向您展示一种更方便的方法来开发无服务器应用程序，而无需经历如此痛苦的过程。我想把这个过程作为<strong class="ix hv">无服务器开发的现代方法来介绍。</strong></p><h1 id="4488" class="mf kp hu bd kq mg mh mi ku mj mk ml ky mm mn mo lb mp mq mr le ms mt mu lh mv dt translated">🚴<em class="mw">现代方法—适马</em></h1><p id="6cf1" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated"><a class="ae jt" href="https://sigma.slappforge.com/" rel="noopener ugc nofollow" target="_blank">适马</a>是一个现代的、功能丰富的基于浏览器的IDE，由来自<a class="ae jt" href="http://srilanka.travel/" rel="noopener ugc nofollow" target="_blank">斯里兰卡</a>的<a class="ae jt" href="https://www.slappforge.com/" rel="noopener ugc nofollow" target="_blank">工程师团队</a>开发，他们在<a class="ae jt" href="https://www.adroitlogic.com/" rel="noopener ugc nofollow" target="_blank">开发企业集成解决方案</a>的过程中经历了上述痛苦的过程。我想介绍一下作为无服务器开发的现代方法的<a class="ae jt" href="https://sigma.slappforge.com/" rel="noopener ugc nofollow" target="_blank">适马</a>，因为它解决了开发人员在开发无服务器应用程序时必须面对的大部分棘手问题。</p><p id="56a7" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">只需通过以下步骤来实现我们在<em class="iw"> </em> <a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2"> <em class="iw">中遇到的使用亚马逊网络服务(AWS)实现无服务器的相同用例——传统方法</em> </a>和<strong class="ix hv">亲自体验打造SLApps(无服务器应用)</strong>的简化流程。</p><h2 id="2221" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">步骤1 —创建新项目</h2><p id="5402" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">通过给出名称、描述和AWS位置来创建项目，以部署资源。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/fd9dc01f1b9a30fd64884d26d770f1a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:732/format:webp/1*5InwObyj-qyEiuubved_mQ.png"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Creating a new Project in Sigma</figcaption></figure><p id="0f44" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">一旦你创建了一个新项目，适马将向你展示主编辑器视图。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff my"><img src="../Images/d7dc62a08e7b3494a689d483ff552117.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WTT8R5d7CDRwzUJMhpwddw.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Sigma main editor view</figcaption></figure><p id="c4f5" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">当您第一次加载编辑器视图时，您会注意到一些在其他编辑器中看不到的东西。</p><ol class=""><li id="ec60" class="lo lp hu ix b iy iz jc jd kk lq kl lr km ls js mz lu lv lw dt translated">前面带有数字标记的AWS资源列表。</li><li id="ae18" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js mz lu lv lw dt translated">Lambda函数处理程序中的红色警告</li></ol><h2 id="7c18" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">前面带有数字标记的AWS资源列表。</h2><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff na"><img src="../Images/36dcc601c0327cfc43fbce6d629a9940.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*pt3e46Mr5XDo_7WePvy6Mg.png"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Currently supported AWS resources in SIgma</figcaption></figure><p id="eef0" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">这是适马目前支持的AWS资源列表。然而，这并不意味着你不能在适马代码中使用其他AWS资源。这些只是目前支持的超级资源，我们正在努力增加这个列表。</p><p id="b010" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">这些资源有什么特别的？</strong></p><p id="9503" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">您可以将这些资源拖放到您的编辑器中！是的，你没看错。</p><blockquote class="nb"><p id="45e3" class="nc nd hu bd ne nf ng nh ni nj nk js ek translated">拖放！！拖放！！拖放！！</p></blockquote><figure class="nm nn no np nq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nl"><img src="../Images/6a19e1ba58f88c4e6e550d51358b0456.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*csA_OvhCDSTdGkmQxSa84Q.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Drag and Drop resources to editor</figcaption></figure><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="md me l"/></div></figure><p id="5f5e" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">数字标记表示当前项目中已经使用的同一类型的唯一资源的数量。一旦您在项目中创建了一个资源，这个计数将会增加，并且这些资源将会显示在一个子列表中，在这个子列表中，您可以在需要时直接使用相同的资源(无需重新配置)。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nr"><img src="../Images/fac3e9a42a629759f8e5a2cdf08f7ec6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q4fSQuwLdOEKPbWZhdoFPg.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Resource List with usage</figcaption></figure><p id="4a87" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">哦！非常糟糕，我打错了<a class="ae jt" href="http://srilanka.travel/" rel="noopener ugc nofollow" target="_blank">斯里兰卡</a>的名字。</p><p id="63ae" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">我可以用两种方法纠正这个错别字。</p><ol class=""><li id="6904" class="lo lp hu ix b iy iz jc jd kk lq kl lr km ls js mz lu lv lw dt translated">点击左上角的蓝色DynamoDB图标，在UI中进行修改。</li></ol><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nl"><img src="../Images/07c7dc1e3645639ccae3b68dc4a14dd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zHp6aAOYG5siz32uXDnTng.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Editing the generated Code by UI</figcaption></figure><p id="a4fb" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">2.就像我们通常做的那样。代码中的变化会自动反映在UI中！！</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nl"><img src="../Images/f561ff3c13fc005dfb109c3d5cec3099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*quz0m9dhIABcl3d_EsYo4g.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Editing the generated code in the editor</figcaption></figure><h2 id="a6a3" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">步骤2 —创建DynamoDB表</h2><p id="e7ab" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">对于我们在本系列的第一篇博客中详细解释的用例，<a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2">使用Amazon Web Services (AWS)实现无服务器—传统方法</a>，我们想要创建一个名为<em class="iw"> contact_us </em>的新DynamoDB表，使用<em class="iw"> email </em>作为分区键，使用<em class="iw"> date </em>作为排序键。</p><p id="8678" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">因为我们希望保存每个contact_us条目日期，所以让我先在代码中声明该变量。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nl"><img src="../Images/cf5c10955d87b5a362850fcca811fd05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*M7bineK3-3YvwTxJnMthEA.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Declaring date variable</figcaption></figure><p id="2156" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">你注意到了，对吗😎。我们在适马IDE中内置了智能代码建议。</p><p id="0e2b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">让我继续创建新的DynamoDB表。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ns"><img src="../Images/15c48f11c2fb6b61a1f5d13adcae4b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IhotPfUgTWSRbJD5ULHXEQ.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Creating a new DynamoDB table</figcaption></figure><p id="c2f5" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">搞定！！！</strong>我们已经创建了一个表，甚至我们已经<strong class="ix hv">生成了代码</strong>来在同一个表上执行<em class="iw"> put操作</em>。我们不会像你在传统方法中所做的那样，强迫你离开你的代码，从而扰乱你的编码节奏。我们简化了创建和使用资源的流程！</p><p id="0a6c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">你又注意到了，对吗😎。智能代码建议甚至可以在资源弹出窗口中使用！！</p><h2 id="735f" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">Lambda函数处理程序中的红色警告</h2><p id="73dd" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">在Lambda函数处理程序中，我们仍然有所谓的红色警告。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff nt"><img src="../Images/99b06fe155e982debcfd11c65ff2b14c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*x6LVaW9mBsOCh6w5z3Qbkg.png"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Warning in the lambda handler</figcaption></figure><p id="f5bd" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">正如我们所知，为了执行一个lambda函数，我们必须用一个事件来触发它。通过这个红色警告，<a class="ae jt" href="https://sigma.slappforge.com/" rel="noopener ugc nofollow" target="_blank"> sigma </a>提醒我们，我们的lambda仍然没有附加事件。</p><p id="1f19" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">让我们继续解决这个问题吧。在我们的用例中，我们将使用API网关事件(POST请求)来触发这个lambda。</p><h2 id="debc" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">步骤3 —创建一个API网关端点并将其添加为触发器</h2><p id="2d40" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">这样做与我们对DynamoDB所做的非常相似。继续拖拽就好！</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ns"><img src="../Images/90049ab4634600db725131cf9820c7e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*X6aWKNxYecn0n75rcg_zuA.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Creating an API gateway trigger</figcaption></figure><p id="0361" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">只需点击几下鼠标和键盘，我就完成了下面的任务列表。</p><ol class=""><li id="7fbd" class="lo lp hu ix b iy iz jc jd kk lq kl lr km ls js mz lu lv lw dt translated">创建了一个名为<em class="iw">的API联系我们端点。</em></li><li id="bc2b" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js mz lu lv lw dt translated">向接受POST请求的端点(/contact)添加了资源。</li><li id="2b8d" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js mz lu lv lw dt translated">在该端点上启用CORS。(记住，我们必须在传统方法<a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2">中导航回API Gatway控制台</a>，才能做到这一点)</li><li id="083a" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js mz lu lv lw dt translated">用阶段名<em class="iw"> prod部署我的API。</em></li><li id="4043" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js mz lu lv lw dt translated">添加我新创建的API作为lambda函数的触发器。</li></ol><p id="7cf5" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">通过这一步，我刚刚完成了我的联系我们表单后端的第一个<strong class="ix hv">版本</strong>！！</p><p id="e29d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">等等…我们刚刚碰到关键词<strong class="ix hv"> <em class="iw">版本</em>。</strong>我来给你介绍一下<a class="ae jt" href="https://sigma.slappforge.com/" rel="noopener ugc nofollow" target="_blank">适马</a>的下一大特色。</p><p id="3986" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">版本控制内置于适马IDE中。适马与Github(T21)紧密集成，Github是最流行的基于网络的托管服务，使用git进行版本控制。你可以直接将你的项目提交给github，只需点击几下鼠标。</strong></p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="md me l"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">A person who never expected this much of features from a browser based IDE which is still in beta</figcaption></figure><p id="919b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated"><strong class="ix hv">第四步——将第一个版本提交给github </strong></p><p id="34a6" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">我们有所有必要的工具来操作我们的项目，整合到一个单一的工具栏在适马。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nu"><img src="../Images/d4d58a5f34360e7e4feb48a42421bb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:846/format:webp/1*vYOg9_QwDNdkgY6hRsbxjQ.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Sigma toolbar</figcaption></figure><p id="0009" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">让我们点击保存按钮，将我们的项目提交给Github。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nv"><img src="../Images/3dd55062a65dd99f7eca7dc22ce33a44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*153wqp6suWpS23kmyjPi-g.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Committing the code to Github</figcaption></figure><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nv"><img src="../Images/a8f71519bb6193e3d2dccb2c08f6c65f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*FEAz3m543I0Q4bJGOG_1iw.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Sigma, silently doing it’s job for you</figcaption></figure><p id="725f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">到目前为止，我们通过虚拟创建资源(DynamoDB表、API端点、Lambda函数)在浏览器中构建无服务器应用程序。现在是时候在AWS中部署我们的项目了。</p><h2 id="c04d" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">步骤4——在AWS中部署项目</h2><p id="f8f5" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">为了将项目部署到AWS，我们只需单击工具栏中的deploy按钮。</p><p id="6164" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">然后，适马将向您显示一个更改列表，这些更改将在您的AWS帐户上执行。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff nw"><img src="../Images/20c84623424f4096274c2c08268e27d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*ggdIBxbvlUXEF1W5buxPaw.png"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">List of changes that are going to be done by Sigma on your AWS account</figcaption></figure><p id="919f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">您甚至可以在执行部署时查看详细的日志。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nx"><img src="../Images/397ad4d90185391e296cf4b33bcd2242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*7lXQAa19ScfJc3efb8LkwQ.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Deployment Logs</figcaption></figure><p id="e55c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">部署完成后，适马将向您展示该过程的摘要。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ny"><img src="../Images/0a236c37ce6b7f100417e325c2115213.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lwzED26h7zsWddTG8PmMhg.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Sigma deployment summary</figcaption></figure><p id="64ad" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">适马的部署摘要甚至包括部署的API网关端点的URL！！</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff nz"><img src="../Images/256fca8bc50f514889b6e2f8192800a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r1ZBljVC0r977Qi97QE45Q.png"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">URL of the deployed API gateway endpoint</figcaption></figure><p id="8a70" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">所以我们已经完成了无服务器应用程序的第一个版本。我们的应用程序现在在云上运行！！</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/424628199b6306362311738f72615229.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/0*vIsp59qaWSgMq_Jp.gif"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">They just deployed a serverless application developed by modern approach (Sigma)</figcaption></figure><p id="4490" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">让我给你看看更多关于适马的有趣的事情。</p><h2 id="33f6" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">自动导入/注入AWS库。</h2><p id="8a29" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">让我们仔细看看我们的代码。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff ob"><img src="../Images/be0b819e88327b6271357a40e0632645.png" data-original-src="https://miro.medium.com/v2/resize:fit:968/format:webp/1*GrRV-1BTiTw6tA0VvoH8xg.png"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">A close look at your code!</figcaption></figure><p id="18fe" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">好的，等等…我们从来没有输入代码的前两行。</p><p id="44ce" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">谁干的？😳</p><p id="f7aa" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">谁为AWS库添加了imports并为我创建了DynamoDB文档客户端？</p><p id="c6e5" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">适马为你做了这一切！！每当您将资源拖放到代码编辑器时，适马会自动导入所需的AWS库并创建相应资源的实例。</p><h2 id="b2c0" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">添加第三方库</h2><p id="2a26" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">根据我在<a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2">用亚马逊网络服务(AWS)实现无服务器化——传统方法</a>中解释的用例，我们希望在借助名为<a class="ae jt" href="https://validatejs.org/" rel="noopener ugc nofollow" target="_blank"> <em class="iw"> validate js </em> </a>的第三方库持久化之前验证传入的请求。</p><p id="e75c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">只需点击几下鼠标，您就可以轻松地将依赖项添加到适马项目中。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff oc"><img src="../Images/8f149e7324c547f5e4426cb0d0d6f671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Cji2P5wU6UytWplLUVpVoA.gif"/></div></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Adding dependencies in SIgma</figcaption></figure><p id="f44a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">就是这样。现在，您可以在项目的任何JS文件中使用新添加的依赖项了！！！</p><p id="0a03" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">这只是对无服务器开发的<strong class="ix hv">现代方法</strong>的简单介绍。</p><h1 id="0479" class="mf kp hu bd kq mg mh mi ku mj mk ml ky mm mn mo lb mp mq mr le ms mt mu lh mv dt translated">让我们回过头来，看看我们用现代方法实际上解决了哪些痛点。</h1><h2 id="8cdc" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">更改现有的lambda代码</h2><p id="3b3a" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">与传统方法<a class="ae jt" rel="noopener" href="/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2">不同，在传统方法</a>中，您必须编辑本地代码并将代码包重新上传到AWS，而在现代方法中，您只需在浏览器中完成所有工作，并在需要时单击鼠标即可重新部署。</p><h2 id="cc8a" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">添加第三方依赖关系</h2><p id="4bc3" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">只需点击<strong class="ix hv">搜索点击</strong>向您的项目添加新的依赖项。不再需要，<em class="iw"> </em> <strong class="ix hv">下载解压缩<em class="iw"> npm安装</em>重新压缩上传点击保存</strong>添加库。</p><h2 id="914b" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated"><strong class="ak">与更多AWS资源关联</strong></h2><p id="bbdb" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">还记得当我们想要连接新的AWS资源时，我们必须如何更新Lambda角色吗？<strong class="ix hv">现代方法</strong>为您实现自动化！。适马保证只给你的lambda附加必要的权限。适马了解最佳实践，并会为您提供最佳实践😊。</p><h2 id="579f" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">没有更多宝贵的时间花费在AWS文档上</h2><p id="d108" class="pw-post-body-paragraph iu iv hu ix b iy lj ja jb jc lk je jf kk ll ji jj kl lm jm jn km ln jq jr js hn dt translated">适马自动为你生成API调用。适马甚至为你进口附属品！只需在UI中填充一些字段，其余的就不用管了。只需担心您的应用程序逻辑！</p><p id="6fec" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">所以这是我在帖子结尾对传统方法的承诺。</p><blockquote class="ir is it"><p id="65c8" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">忘记<strong class="ix hv">资源供应</strong>和<strong class="ix hv">代码</strong>，只关注<strong class="ix hv">应用逻辑</strong>。</p></blockquote></div><div class="ab cl od oe hc of" role="separator"><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi oj"/><span class="og bw bk oh oi"/></div><div class="hn ho hp hq hr"><h2 id="742c" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kk kz la lb kl lc ld le km lf lg lh li dt translated">了解更多关于适马的信息</h2><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="ok me l"/></div><figcaption class="kg kh fg fe ff ki kj bd b be z ek">Think Serverless!</figcaption></figure><h1 id="5e64" class="mf kp hu bd kq mg mh mi ku mj mk ml ky mm mn mo lb mp mq mr le ms mt mu lh mv dt translated">行动呼吁</h1><ul class=""><li id="ad6b" class="lo lp hu ix b iy lj jc lk kk ol kl om km on js lt lu lv lw dt translated"><strong class="ix hv">拍手。</strong>欣赏并让别人发现这篇文章。</li><li id="28e6" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js lt lu lv lw dt translated"><strong class="ix hv">评论。</strong>分享一下你对这篇文章的看法。</li><li id="3daa" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js lt lu lv lw dt translated">跟我来。<a class="ae jt" rel="noopener" href="/@cwidanage">chat hura wid anage</a><strong class="ix hv"/>接收类似文章的更新。</li><li id="5b87" class="lo lp hu ix b iy lx jc ly kk lz kl ma km mb js lt lu lv lw dt translated"><strong class="ix hv">保持联系。</strong> <a class="ae jt" href="https://www.linkedin.com/in/cwidanage/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>，<a class="ae jt" href="https://twitter.com/cwidanage" rel="noopener ugc nofollow" target="_blank"> Twitter </a></li></ul></div></div>    
</body>
</html>