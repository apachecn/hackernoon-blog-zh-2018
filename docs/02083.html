<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/hackernoon/11000-1-ethereum-query-to-transaction-ratio-whats-going-on-fb12382fd0c6?source=collection_archive---------10-----------------------#2018-03-07">https://medium.com/hackernoon/11000-1-ethereum-query-to-transaction-ratio-whats-going-on-fb12382fd0c6?source=collection_archive---------10-----------------------#2018-03-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><p id="ddf2" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated"><strong class="hv ir"> 11000:1以太坊查询交易比！这是怎么回事？</strong></p><p id="f064" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">在<a class="ae is" href="https://www.meetup.com/SF-Ethereum-Developers/events/245739974/" rel="noopener ugc nofollow" target="_blank">2018年2月20日由<a class="ae is" href="https://www.meetup.com/SF-Ethereum-Developers/" rel="noopener ugc nofollow" target="_blank"> SF以太坊开发者</a>举办的</a>活动中，由<a class="ae is" href="https://twitter.com/granthummer" rel="noopener ugc nofollow" target="_blank">格兰特悍马</a>和<a class="ae is" href="https://www.linkedin.com/in/kenfromm/" rel="noopener ugc nofollow" target="_blank">肯弗洛姆</a>担任主持人，<a class="ae is" href="https://www.linkedin.com/in/eric-tu-61602850/" rel="noopener ugc nofollow" target="_blank">ConsenSys</a>的<a class="ae is" href="https://www.linkedin.com/in/eric-tu-61602850/" rel="noopener ugc nofollow" target="_blank"> Eric Tu </a>做了关于<a class="ae is" href="https://infura.io/" rel="noopener ugc nofollow" target="_blank"> Infura </a>的演讲。Infura是ConsenSys的一个项目，它的作用就像一个以太坊超级节点，让成千上万个分散的应用程序访问以太坊。它开始支持ConsenSys的内部项目，然后在上海的Devcon2上公开发布。</p><p id="a302" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">Eric在演讲中分享的一个数据点让我印象深刻，也让我很惊讶。Infura每天处理<a class="ae is" href="https://blog.infura.io/infura-debuts-new-visual-identity-as-daily-requests-top-6-billion-644c6e8f389a" rel="noopener ugc nofollow" target="_blank"> 6B个查询</a> (QPD)，并继续快速增长。与谷歌相比，我对这个查询量感到特别惊讶，谷歌<a class="ae is" href="http://www.internetlivestats.com/google-search-statistics/" rel="noopener ugc nofollow" target="_blank">做了3.5亿QPD </a>。不可否认，Google和Infura的查询用例是不同的，但在处理大量查询所需的技术能力方面肯定有相似之处。Infura已经成为这一领域的市场领导者，所以我相信一个合理的估计是Infura处理了70-90%的以太坊查询和10-20%的以太坊交易。</p><p id="a03e" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">让我们进一步分析这些数据，试图理解其中的含义。如果您计算一下，在90%的查询量下，Infura的6B QPD代表6.7亿QPD的总查询量，这相当于大约77，000 QPS(每秒查询)。根据Fred Ehrsam的说法，以太坊上大约有<a class="ae is" rel="noopener" href="/@FEhrsam/scaling-ethereum-to-billions-of-users-f37d9f487db1"> 7 TPS(每秒交易量)。所以以太坊上的查询与交易比率是:</a></p><figure class="iu iv iw ix fq iy fe ff paragraph-image"><div role="button" tabindex="0" class="iz ja di jb bf jc"><div class="fe ff it"><img src="../Images/b172c8156091adf70e4f6d38c81e9943.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mkilRHNe2Ua00YZ0eYAzYQ.png"/></div></div></figure><p id="0f90" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">如果Infura接近查询量的70%,这个比率甚至会更糟，达到14000:1。由于Infura仅处理其6B QPD 10-20%的以太坊交易，因此Infura的比率在50，000:1到100，000:1之间。</p><p id="e09a" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">那么我们能从这个比率中得到什么呢？</p><p id="298f" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">首先，我们都应该为令人敬畏的Infura团队鼓掌！凭借这样一个10人的小团队，Infura在支持6B QPD方面做了出色的工作。作为一名前谷歌人，我知道支持搜索的谷歌团队至少比Infura团队大10倍，并且需要相当数量的硬件。处理大量查询能力证明了Infura的技术能力。你能想象没有Infura以太坊会是什么样子吗？！</p><p id="eeee" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">第二，为什么查询与事务的比率高得不合理？Dapp实现是怎么回事？Dapp没有理由在进行交易之前查询以太坊区块链11000次，但是也没有强制功能来鼓励更好的比率。该比率是否是由Dapp实施不佳引起的，由于大多数数据不是动态的，因此可以通过缓存数据来改善？或者，该比率是由糟糕的当前以太坊架构设计导致的，该设计迫使Dapp每秒都要查询以太坊，即使一个事务可能要到下一个块才被挖掘？是否有特定的dapp或dapp类型会产生最多的查询流量？为了确保查询量不会成为更大的瓶颈，这似乎是一个已经成熟的优化领域。</p><p id="0b26" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">第三，为什么以太坊仅在三年内就有如此高的查询流量？这是否会影响以太坊的可扩展性？Fred Ehrsam在他的<a class="ae is" rel="noopener" href="/@FEhrsam/scaling-ethereum-to-billions-of-users-f37d9f487db1">文章</a>中对脸书请求和以太坊交易的比较代表了苹果和橘子的比较，因为大多数脸书请求是“读”而不是“写”。Infura已经证明，以太坊的查询(例如读取)端是可扩展的，尽管Infura可以通过开源代码并鼓励其他人提供类似的服务来使其更加分散化。(据Infura的Michael Wuehler称，他们已经有了这样做的计划。)对于以太坊的交易(如写)端，像ConsenSys的启动Infura的做法，Dapps能否在以太坊解决交易的可扩展性问题时，先分叉以太坊并运行自己的链，将数据迁移到以太坊主链？事实是，目前消费者并不真正关心去中心化应用程序的后端是去中心化的还是集中的。他们只是想让Dapp发挥作用。</p><p id="44d5" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">第四，Infura的优势有助于我们评估这个查询与事务的比率。正如谷歌在搜索领域的主导市场份额为其提供了足够的数据来生成有用的预测，如<a class="ae is" href="https://en.wikipedia.org/wiki/Google_Flu_Trends" rel="noopener ugc nofollow" target="_blank">谷歌流感趋势</a>，Infura的市场领导地位让我们能够更好地理解Dapp在以太坊区块链的行为。虽然我们不知道总共有多少查询发生，只能估计Infura在这些查询中的市场份额，但它提出了一个问题，即像Infura这样的集中式服务所提供的价值是完全分散式服务所不能提供的。</p><p id="bd2e" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">我相信整个以太坊社区会因为拥有更多数据而受益匪浅。今天，似乎没有人对以太坊的查询总量有一个很好的估计，因此它使得弄清楚网络上到底发生了什么变得更加困难。所以如果你想让以太坊社区变得更好，请<a class="ae is" href="https://docs.google.com/forms/d/e/1FAIpQLSeFWAzhZJvGaUgveKAierNU7T8XO6iGaI3fDAFgSxUtyFJKhQ/viewform" rel="noopener ugc nofollow" target="_blank">通过这个表格</a>提交你的数据。我将把它们汇编起来，与社区分享。</p><p id="025a" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">我不能回答上面所有的问题，但是我相信让人们意识到这些数据并开始讨论是值得的。希望整个以太坊社区都能从对话中受益。</p><p id="7876" class="pw-post-body-paragraph hs ht hu hv b hw hx hy hz ia ib ic id ie if ig ih ii ij ik il im in io ip iq hn dt translated">感谢Michael Wuehler、Eric Tu、Daniela Osorio、Joseph Chow、Chris Peel、Ken Fromm和Brandon Bidlack的评论、意见和建议。</p></div></div>    
</body>
</html>