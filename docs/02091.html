<html>
<head>
<title>Demysti-py: “==“ vs “is“</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Demysti-py: "==" vs "is "</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/demysti-py-vs-is-dbf51d76df08?source=collection_archive---------18-----------------------#2018-03-07">https://medium.com/hackernoon/demysti-py-vs-is-dbf51d76df08?source=collection_archive---------18-----------------------#2018-03-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/f043841412744f576743f51dbfc4a185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xTXZ1HC0tyo42g7qGXKsYA.png"/></div></div></figure><p id="659a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">大多数程序员新手在使用这些比较操作符时都认为它们是一回事。你可能会发现在大多数情况下他们会给出相同的答案，但总有一天会不是这样，你会感到抓耳挠腮。今天我想澄清这个误解。</p><p id="f9e2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">看看这些运营商哪里会给出相同的答案，哪里不会。</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="c5b2" class="kj kk hu kf b fv kl km l kn ko">&gt;&gt;&gt; a = [1, 2, 3, 4]<br/>&gt;&gt;&gt; b = a<br/>&gt;&gt;&gt; a == b<br/>True<br/>&gt;&gt;&gt; a is b<br/>True</span></pre><p id="f2c4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那么有什么区别呢？让我们看另一个例子:</p><pre class="ka kb kc kd fq ke kf kg kh aw ki dt"><span id="6c66" class="kj kk hu kf b fv kl km l kn ko">&gt;&gt;&gt; a = [1, 2, 3, 4]<br/>&gt;&gt;&gt; b = [1, 2, 3, 4]<br/>&gt;&gt;&gt; a == b<br/>True<br/>&gt;&gt;&gt; a is b<br/>False</span></pre><p id="1964" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那是一些有趣的行为。让我们仔细看看引擎盖下发生了什么。我想指出的是，Python列表比数组复杂得多，但我不会在这里讨论它们的CPython实现。然而，如果你有兴趣了解它们是如何实现的，我强烈推荐你看看劳伦特·卢斯的这篇文章<a class="ae kp" href="https://www.laurentluce.com/posts/python-list-implementation/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv"><em class="kq"/></strong></a>。</p><p id="7b49" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当你给一个变量赋值一个链表时，就像上面的例子一样，Python为这个链表分配内存，但是实际的链表并不存储在我们的变量中。相反，Python创建了一个列表对象，并将对该对象的引用存储在变量中。本质上，我们的变量现在<strong class="je hv">指向</strong>列表，如下所示:</p><figure class="ka kb kc kd fq iv fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/742d159141ae5f7e5b313ceb1b425132.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Ie7aPo0vbMm4oFYK8FrEbg.png"/></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">‘a’ references (points to) a list</figcaption></figure><p id="f676" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们的第一个例子中，我们说<strong class="je hv"> b = a. </strong>这意味着<strong class="je hv"> b </strong>正在引用<strong class="je hv"> a </strong>，后者引用了我们的列表对象。它们现在引用同一个对象。</p><figure class="ka kb kc kd fq iv fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/f0c196064172ae0b02a472e5f4a89de0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*8JTUab6RIxoZPvQJocVFVw.png"/></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">‘a’ and ‘b’ reference (point to) the same list</figcaption></figure><p id="b105" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在来区分<strong class="je hv"> '==' </strong>和<strong class="je hv">'是'。</strong></p><p id="4287" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> '== '检查相等</strong>。比方说，我们有一个生产t恤的工厂。如果生产两件t恤，并把它们放在一起，我们无法区分它们。所以我们会说这两件t恤是<strong class="je hv"> '== '。</strong></p><p id="9768" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">‘是’身份检查</strong>。通过我们的两件t恤，我们知道它们不是一回事。所以我们会说t恤1是t恤2是假的。</p><p id="d204" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在python中，除了使用‘is’操作符检查引用之外，基本上是一样的。</p><p id="9926" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们的第一个例子中，'<strong class="je hv"> a == b </strong>'返回<strong class="je hv"> true </strong>，因为ever <strong class="je hv"> a </strong>引用的内容与<strong class="je hv"> b </strong>引用的内容完全相同，并且'<strong class="je hv"> a is b </strong>返回<strong class="je hv"> true </strong>，因为<strong class="je hv"> a </strong>和<strong class="je hv"> b </strong>引用的是同一个列表对象。</p><p id="0cfd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，在我们的第二个例子中，我们说a = [1，2，3，4]和b = [1，2，3，4]</p><p id="137f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将创建一个列表对象，并将对它的引用存储在a中，然后创建第二个列表对象，并将对它的引用存储在b中。</p><p id="a787" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 'a == b' </strong>依然是<strong class="je hv">真</strong>。然而，<strong class="je hv">‘a是b’</strong>现在是<strong class="je hv">假</strong>。这是因为<strong class="je hv"> a </strong>和<strong class="je hv"> b </strong>现在引用<strong class="je hv">不同的对象</strong>。这可以从下面观察到:</p><figure class="ka kb kc kd fq iv fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/79abb20908006168231566d0bff521a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*odBq-mbcu3svly8AmI_gGg.png"/></div><figcaption class="ks kt fg fe ff ku kv bd b be z ek">‘a’ and ‘b’ reference (point to) different list objects.</figcaption></figure><h1 id="15b2" class="kw kk hu bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls dt translated">概括起来</h1><ul class=""><li id="8f57" class="lt lu hu je b jf lv jj lw jn lx jr ly jv lz jz ma mb mc md dt translated"><strong class="je hv">如果操作数引用同一个对象，则“is”返回True。</strong></li><li id="4da0" class="lt lu hu je b jf me jj mf jn mg jr mh jv mi jz ma mb mc md dt translated"><strong class="je hv"> '== '如果操作数引用的对象内容相等，则返回True。</strong></li></ul></div></div>    
</body>
</html>