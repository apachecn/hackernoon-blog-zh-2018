<html>
<head>
<title>Why using AngularJs’s global objects instead of native ?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么用AngularJs的全局对象而不是native？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/angularjss-global-objects-instead-of-native-c360f014f96b?source=collection_archive---------22-----------------------#2018-03-07">https://medium.com/hackernoon/angularjss-global-objects-instead-of-native-c360f014f96b?source=collection_archive---------22-----------------------#2018-03-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/5ceda7faf9246a4d2e16f45a97b351f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ESWyGAirVZvjWMiBfOCfMQ.png"/></div></div></figure><blockquote class="jc jd je"><p id="d2d9" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">关于<a class="ae ke" href="https://hackernoon.com/tagged/angularjs" rel="noopener ugc nofollow" target="_blank"> AngularJs </a>包装的更多信息。本文原帖<a class="ae ke" href="http://www.dassiorleando.xyz/angularjs-global-objects-instead-native" rel="noopener ugc nofollow" target="_blank">此处</a>。完整的源代码可以在GitHub 的<a class="ae ke" href="https://github.com/dassiorleando/angular-timeout-digest" rel="noopener ugc nofollow" target="_blank">上找到。</a></p></blockquote><h1 id="039b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">概观</h1><p id="534b" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">AngularJs 是广泛使用的开源前端框架之一，因为它具有良好的架构、可扩展性、许多有趣的特性以及庞大的社区。</p><p id="fcd9" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">在这篇短文中，我们将通过一个简单的例子来展示为什么有时使用AngularJS内置的全局对象和服务比使用本地对象和服务更好。</p></div><div class="ab cl ll lm hc ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hn ho hp hq hr"><h1 id="695d" class="kf kg hu bd kh ki ls kk kl km lt ko kp kq lu ks kt ku lv kw kx ky lw la lb lc dt translated">为什么使用有棱角的包装？</h1><p id="ba74" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">AngularJs应用程序受益于一些强大的功能，而不是仅仅使用前端架构所必需的功能。作为AngularJs爱好者，我强烈建议也利用其他全局对象和服务。</p><p id="9189" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">要举例说明的案例是著名的<a class="ae ke" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> javascript </a> window对象的<strong class="ji hv"> setTimeout </strong>函数，该函数在AngularJs世界中有其对应的<strong class="ji hv"> $timeout </strong>服务。</p><p id="6ea5" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">简而言之，AngularJs包装器和服务已经与AngularJs应用程序同步，因此无需任何技巧即可使用。</p></div><div class="ab cl ll lm hc ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hn ho hp hq hr"><h1 id="248c" class="kf kg hu bd kh ki ls kk kl km lt ko kp kq lu ks kt ku lv kw kx ky lw la lb lc dt translated">超时情况</h1><p id="1c9c" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated"><strong class="ji hv"> setTimeout </strong>是window对象的一部分，有助于在以毫秒为单位的特定延迟后执行一次函数或计算一次表达式。</p><p id="eb81" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">让我们设置一个带有控制器的基本AngularJS应用程序:</p><figure class="lx ly lz ma fq iv"><div class="bz el l di"><div class="mb mc l"/></div></figure><p id="f5b2" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">在本例中，2秒钟后第<strong class="ji hv">条消息</strong>将被更新，但第<strong class="ji hv">条消息</strong>不会更新，如下页所示:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff md"><img src="../Images/f82fed05b6945292ac8a8715ceb66983.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k_d2s39n4JJshSLa9kwDcw.png"/></div></div></figure><h1 id="6afc" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">设置超时:</h1><p id="f422" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">这里用两个参数调用，我们想要调用的函数和它发生的延迟。</p><p id="97e2" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">当我们在AngularJs应用程序中使用它时，我们还需要将最终的范围更改应用到angular digest，因为默认超时运行在AngularJs生命周期之外，这也意味着我们的双向绑定不会呈现更新。</p><p id="8d94" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">这就是为什么这里需要通过调用<strong class="ji hv"> $rootScope来刷新AngularJs范围。$apply() </strong>或<strong class="ji hv"> $rootScope。$applyAsync() </strong>。</p><p id="bf12" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><strong class="ji hv"> $apply </strong>和<strong class="ji hv"> $applyAsync </strong>的作用相同，但第二个有延迟差异。</p><h1 id="d190" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">$timeout:</h1><p id="51c0" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">与前面的语法几乎相同，但是这里有更多的参数可以传递给它的调用。</p><p id="dfd1" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">例如，我们也可以决定在生命周期之外调用它:</p><pre class="lx ly lz ma fq me mf mg mh aw mi dt"><span id="c478" class="mj kg hu mf b fv mk ml l mm mn">$timeout(<strong class="mf hv">function</strong>() {</span><span id="5ac4" class="mj kg hu mf b fv mo ml l mm mn">    $scope.firstMessage = 'First message updated';</span><span id="dc99" class="mj kg hu mf b fv mo ml l mm mn">    alert($scope.firstMessage);</span><span id="ce45" class="mj kg hu mf b fv mo ml l mm mn">}, 2000, <strong class="mf hv">false</strong>);</span></pre><p id="354a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">在这里，我们看到可以向该服务添加一个参数，这是一个布尔值，表示我们希望<strong class="ji hv">应用</strong>在2秒钟后跟随我们的函数调用。</p><p id="bb21" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><strong class="ji hv">简单来说，用false作为第三个参数调用它将调用我们在AngularJS框架之外的函数。</strong></p><p id="fb4b" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><strong class="ji hv">注意</strong>:默认情况下，第三个参数为真。</p><p id="8d09" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">文档里写的很清楚<a class="ae ke" href="https://docs.angularjs.org/api/ng/service/$timeout" rel="noopener ugc nofollow" target="_blank">这里</a>。</p></div><div class="ab cl ll lm hc ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hn ho hp hq hr"><h1 id="8149" class="kf kg hu bd kh ki ls kk kl km lt ko kp kq lu ks kt ku lv kw kx ky lw la lb lc dt translated">其他包装器和实用程序函数</h1><p id="43e6" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">对于相应的Javascript对象，还有一些其他的角度包装器服务，使用起来可能会很有趣，而不是本地的，有时是因为简单性/语法，或者是因为上面描述的效果。</p><h1 id="c49c" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">功能</h1><p id="def3" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">让我们看另一个例子，这里的目的是知道一个变量是否还没有被声明或者是否有未定义的值<strong class="ji hv"/>。</p><p id="3e68" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">在这里我更有信心使用填充:</p><pre class="lx ly lz ma fq me mf mg mh aw mi dt"><span id="ec1a" class="mj kg hu mf b fv mk ml l mm mn"><strong class="mf hv">if</strong>(angular.isDefined(variable)) {</span><span id="88cd" class="mj kg hu mf b fv mo ml l mm mn">}</span></pre><p id="2636" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">而不是:</p><pre class="lx ly lz ma fq me mf mg mh aw mi dt"><span id="5d32" class="mj kg hu mf b fv mk ml l mm mn"><strong class="mf hv">if</strong>(<strong class="mf hv">typeof</strong> <!-- -->variable != 'undefined') {</span><span id="f490" class="mj kg hu mf b fv mo ml l mm mn">}</span></pre><p id="42cb" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">其他可能对你有好处的:</p><ul class=""><li id="e90e" class="mp mq hu ji b jj jk jn jo lf mr lh ms lj mt kd mu mv mw mx dt translated"><strong class="ji hv"> angular.isDate </strong>:了解变量是否为日期</li><li id="9c6e" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> angular.isArray </strong>:判断是否是数组</li><li id="bc86" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> angular.copy </strong>:深度复制一个对象</li><li id="2be9" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> angular.isObject </strong>:测试对象类型</li><li id="2f72" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> angular.toJson </strong>:将一个对象序列化成Json</li><li id="79d8" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> angular.fromJson </strong>:将一个Json字符串反序列化为一个对象</li></ul><p id="257f" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">其他的在这里列出<a class="ae ke" href="https://docs.angularjs.org/api/ng/function" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="8732" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">服务</h1><p id="7646" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">一些AngularJs服务:</p><ul class=""><li id="936e" class="mp mq hu ji b jj jk jn jo lf mr lh ms lj mt kd mu mv mw mx dt translated"><strong class="ji hv"> $document </strong>:浏览器窗口. document对象的包装器</li><li id="9402" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv">$ interval</strong>for window . setinterval，setTimeout的重复版本</li><li id="1f8d" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> $http </strong>使用XMLHttpRequest对象或通过JSONP进行远程http调用</li><li id="942a" class="mp mq hu ji b jj my jn mz lf na lh nb lj nc kd mu mv mw mx dt translated"><strong class="ji hv"> $log </strong>用于登录浏览器控制台</li></ul><p id="840d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">更多服务可在<a class="ae ke" href="https://docs.angularjs.org/api/ng/service" rel="noopener ugc nofollow" target="_blank">文档</a>中找到。</p><h1 id="70d0" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论</h1><p id="81af" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">首先，在本文中，我们已经看到了为什么有时使用AngularJs包装器比使用本机实现更好，同时强调了超时的情况。</p><p id="fb89" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">GitHub 上的<a class="ae ke" href="https://github.com/dassiorleando/angular-timeout-digest" rel="noopener ugc nofollow" target="_blank">提供了完整的源代码。</a></p><h2 id="228c" class="mj kg hu bd kh nd ne nf kl ng nh ni kp lf nj nk kt lh nl nm kx lj nn no lb np dt translated">感谢你阅读这篇文章，如果你喜欢，请推荐并分享。<br/>在<a class="ae ke" href="https://www.facebook.com/dassiorleando" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae ke" href="https://twitter.com/sajouguetdassi" rel="noopener ugc nofollow" target="_blank">推特</a>、<a class="ae ke" href="https://www.linkedin.com/in/dassi-orleando-257b04ab/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我，并访问我的<a class="ae ke" href="http://www.dassiorleando.xyz/" rel="noopener ugc nofollow" target="_blank">博客</a>。</h2><p id="49c0" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated"><strong class="ji hv">干杯！</strong></p></div></div>    
</body>
</html>