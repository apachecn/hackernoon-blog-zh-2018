<html>
<head>
<title>Crypto Trading App with GDAX and Azure Functions — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">具有GDAX和Azure功能的加密交易应用程序—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/crypto-trading-app-with-gdax-and-azure-functions-part-1-2f86bfeac697?source=collection_archive---------25-----------------------#2018-03-07">https://medium.com/hackernoon/crypto-trading-app-with-gdax-and-azure-functions-part-1-2f86bfeac697?source=collection_archive---------25-----------------------#2018-03-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/8119ec2ea5e9229748aae54a7116e3de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iJzcNgXM9fSF4gbM0Sm8cA.jpeg"/></div></div></figure><div class=""/><p id="704a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本文中，我们将回顾如何设置能够系统执行<a class="ae ka" href="https://hackernoon.com/tagged/cryptocurrency" rel="noopener ugc nofollow" target="_blank">加密货币</a>交易的应用程序的基础知识。</p><p id="3672" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在开始之前有几点，这将不包括algo交易模型，并且实现假设您可以访问Azure cloud实例，并且理解JavaScript和。Net或其他一些面向对象的编程语言。</p><p id="9b81" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的最终目标是能够使用azure功能来执行和管理GDAX加密货币交易所的交易。代码会有点多余，因为我们正在创建利用<a class="ae ka" href="https://hackernoon.com/tagged/nodejs" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>包装现有GDAX API的函数。这样做的原因是为了利用Azure函数的强大功能，这些功能非常适合与非本地JavaScript编码的企业软件挂钩。例如，如果我们有一个机构客户在使用前台交易系统。我们希望扩展这个平台，以在GDAX中执行交易，或者如果我们有其他一些基于云的系统，需要能够自动进行加密外汇交易。此外，我们可以利用Azure Functions的强大功能，它允许我们托管单个功能或代码块，这些功能或代码块在执行时只会产生托管费用，因此没有必要托管一些会消耗您的托管预算的始终在线的服务或虚拟机。</p><p id="8986" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig">先决条件和安装</strong>提前为所有这些安装道歉，它们是必需的。</p><p id="4b3e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">*注意——如果你只想在本地测试，而不想在azure中部署，你可以使用本地azure函数，不需要github帐户或Azure帐户/环境。</p><ol class=""><li id="f404" class="kb kc if je b jf jg jj jk jn kd jr ke jv kf jz kg kh ki kj dt translated">Github——确保你有一个活动的github帐户，在这个例子中，我们将使用一个涉及到同步到github项目的部署方法。</li><li id="8e4d" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">Azure环境——确保你有一个活跃的Azure环境。</li><li id="5f95" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">安装<a class="ae ka" href="https://www.microsoft.com/net/core" rel="noopener ugc nofollow" target="_blank">。网芯2.0 </a></li><li id="6439" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">安装<a class="ae ka" href="https://en.wikipedia.org/wiki/Visual_Studio_Code" rel="noopener ugc nofollow" target="_blank">vs code</a>——这是一个相对较新的源代码编辑器，它是轻量级的，免费的，尽管它是微软的产品，但它可以很好地与非微软技术一起工作。</li><li id="41bc" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">Install <a class="ae ka" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> NodeJS </a> —这用于生成服务器端JavaScript环境，这是一个架构矛盾，但我们需要它来支持GDAX API和其他Azure工具。总的来说，接受新的技术概念是一个好主意，所以如果您还不熟悉Node，我建议您尝试一下。我们还将使用节点NPM安装其他项目。</li><li id="f06a" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">安装<a class="ae ka" href="https://www.npmjs.com/package/azure-functions-core-tools" rel="noopener ugc nofollow" target="_blank"> Azure Functions核心工具</a> —这可以用来本地调试Azure函数。在我们的例子中，因为我们将运行一个JavaScript Azure函数，所以本地调试是查看函数内部工作情况的好方法。</li><li id="e168" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">安装<a class="ae ka" href="https://docs.microsoft.com/en-us/cli/azure/?view=azure-cli-latest" rel="noopener ugc nofollow" target="_blank"> Azure CLI </a></li><li id="7fe3" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">安装<a class="ae ka" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a> — App调用我们的功能。</li><li id="812b" class="kb kc if je b jf kk jj kl jn km jr kn jv ko jz kg kh ki kj dt translated">安装最新的<a class="ae ka" href="https://www.npmjs.com/package/gdax" rel="noopener ugc nofollow" target="_blank"> GDAX API </a></li></ol><p id="c08d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig">Hello World—Azure函数的本地调试</strong>好了，让我们设置一个返回“Hello World”的本地Azure函数</p><p id="9593" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你基本上想导航到你的本地目录，它应该类似于<code class="eh kp kq kr ks b">C:\Users\Joe\AppData\Local\Azure.Functions.Cli\1.0.0</code>并添加一个文件夹<code class="eh kp kq kr ks b">TestFunctions</code>，然后再添加一个子文件夹到那个<code class="eh kp kq kr ks b">HelloWorld</code>。</p><p id="22cb" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来添加一个文件<code class="eh kp kq kr ks b">function.json</code>，并将下面的JSON代码放入其中:</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="1eb7" class="lb lc if ks b fv ld le l lf lg">{ "disabled": false, "bindings": [ { "authLevel": "function", "type": "httpTrigger", "direction": "in", "name": "req" }, { "type": "http", "direction": "out", "name": "res" } ] }</span></pre><p id="cd41" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后添加一个文件<code class="eh kp kq kr ks b">index.js</code> <br/>然后添加这段JavaScript代码到里面:</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="449d" class="lb lc if ks b fv ld le l lf lg">module.exports = function (context, req) { context.log('JavaScript HTTP trigger function processed a request.'); context.res = { body: "Hello World!!!", status: 200 }; context.done(); };</span></pre><p id="7f9a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在父目录<code class="eh kp kq kr ks b">TestFunctions</code>中添加一个文件<code class="eh kp kq kr ks b">debug.cmd</code>并添加一行命令:</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="7a7d" class="lb lc if ks b fv ld le l lf lg">"C:\Users\Joe\AppData\Local\Azure.Functions.Cli\1.0.0\func.exe" host start --debug vscode</span></pre><p id="9614" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，在同一个目录中添加一个文件<code class="eh kp kq kr ks b">host.json</code>,并添加开括号和闭括号</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="e1df" class="lb lc if ks b fv ld le l lf lg">{}</span></pre><p id="ae8f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，Azure Functions CLI可以在本地托管一个JavaScript函数。在test functions下运行debug.cmd命令文件来启动您的新函数，然后您会看到这个非常酷的ASCII艺术和Azure CLI在localhost上启动该函数。</p><figure class="kt ku kv kw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lh"><img src="../Images/d1749a847f03fc8e794dbf10e72a0f7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*D_qUlXIg6yp1T7NI.png"/></div></div></figure><p id="e276" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在打开Postman使用地址<code class="eh kp kq kr ks b">http://localhost:7071/api/HelloWorld</code>设置一个POST调用并按回车键，在响应消息中你会看到“Hello World”</p><figure class="kt ku kv kw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lh"><img src="../Images/bde451a8e607c8284464d13d18379434.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O0lsTF50s65m_f2u.png"/></div></div></figure><p id="dfa5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好，让我们再做一次，但现在让我们调试。打开VS代码打开文件<code class="eh kp kq kr ks b">index.js</code>点击调试/开始调试，然后在上下文对象的第2行和第7行添加一个断点，再次用postman调用函数。您将看到在VS代码中输入了断点，现在您有了一个合适的调试环境。到目前为止做得很好！</p><figure class="kt ku kv kw fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lh"><img src="../Images/ca24f3b21484481033040dfaa3cbb826.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0efr_uS0LMmviFy2.png"/></div></div></figure><p id="8c3a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig">将GDAX API整合到你的Azure函数中</strong> <br/>好了，让我们设置一个本地Azure函数，从GDAX获取GDAX帐户信息。您可以将下面的代码复制粘贴到一个<code class="eh kp kq kr ks b">index.js</code>文件中，并将其放在我们之前创建的<code class="eh kp kq kr ks b">TestFunctions</code>文件夹下的子文件夹<code class="eh kp kq kr ks b">GetAccounts</code>中。</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="106b" class="lb lc if ks b fv ld le l lf lg">const Gdax = require('gdax'); const publicClient = new Gdax.PublicClient(); module.exports = function (context, req) { context.log('JavaScript HTTP trigger function processed a request.'); var tempErr = ""; try { var gdaxURI = process.env["GdaxURI"]; var b64secret = process.env["b64secret"]; var passphrase = process.env["passphrase"]; var ApiKey = process.env["ApiKey"]; var authedClient = new Gdax.AuthenticatedClient( ApiKey, b64secret, passphrase, gdaxURI); var callback = function(err, response, data) { try { context.res = { body: response.body, status: response.statusCode }; context.done(); } catch(err) { tempErr = err.message; context.res = { status: 400, body: tempErr }; context.done(); } }; authedClient.getAccounts(callback); } catch(err) { tempErr = err.message; context.res = { status: 400, body: tempErr }; context.done(); } };</span></pre><p id="85dd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您将需要在TestFunctions根目录下创建一个<code class="eh kp kq kr ks b">local.settings.json</code>文件，并在这里添加您的密码短语、APIKey和b64代码，并确保使用GDAX的沙盒url。要获取API密钥详细信息，请登录GDAX sandobx URL并生成新的API密钥。</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="83ed" class="lb lc if ks b fv ld le l lf lg">{ "IsEncrypted": false, "Values": { "AzureWebJobsStorage": "", "GdaxURI" : "https://api-public.sandbox.gdax.com", "b64secret" : "abc64", "passphrase" : "aaaa", "APIKey" : "" } }</span></pre><p id="da3f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在打开Postman使用地址<code class="eh kp kq kr ks b">http://localhost:7071/api/GetAccounts</code>设置一个POST调用并按回车键，在响应消息中您会看到类似如下的帐户信息:</p><pre class="kt ku kv kw fq kx ks ky kz aw la dt"><span id="b562" class="lb lc if ks b fv ld le l lf lg">[ { "id": "71452118-efc7-4cc4-8780-a5e22d4baa53", "currency": "BTC", "balance": "0.0000000000000000", "available": "0.0000000000000000", "hold": "0.0000000000000000", "profile_id": "75da88c5-05bf-4f54-bc85-5c775bd68254" }, { "id": "e316cb9a-0808-4fd7-8914-97829c1925de", "currency": "USD", "balance": "80.2301373066930000", "available": "79.2266348066930000", "hold": "1.0035025000000000", "profile_id": "75da88c5-05bf-4f54-bc85-5c775bd68254" } ]</span></pre><p id="4cec" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">干得好！现在您有了一个本地GDAX函数，它可以认证到GDAX并在GDAX API上命中函数。在第2部分，我们将介绍如何将订单功能部署到Azure，并从用c#编写的自动化交易应用程序中调用它。</p><p id="0d48" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> Autera的技术团队可以轻松承担任何加密货币、区块链和交易开发，请立即联系我们。</strong></p><p id="16a9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="mailto:info@auterasolutions.com?Subject=BI%20Consulting" rel="noopener ugc nofollow" target="_blank">一键联系</a></p></div><div class="ab cl li lj hc lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="hn ho hp hq hr"><p id="a6b3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lp">原载于2018年3月7日</em><a class="ae ka" href="http://blog.auterasolutions.com/crypto-trading-app-with-gdax-and-azure-functions-part-1/" rel="noopener ugc nofollow" target="_blank"><em class="lp">blog.auterasolutions.com</em></a><em class="lp">。</em></p><figure class="kt ku kv kw fq hw"><div class="bz el l di"><div class="lq lr l"/></div></figure></div></div>    
</body>
</html>