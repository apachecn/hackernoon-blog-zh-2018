<html>
<head>
<title>Get an isomorphic web app up and running in 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨5åˆ†é’Ÿå†…å¯åŠ¨å¹¶è¿è¡ŒåŒæ„webåº”ç”¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/get-an-isomorphic-web-app-up-and-running-in-5-minutes-72da028c15dd?source=collection_archive---------1-----------------------#2018-03-08">https://medium.com/hackernoon/get-an-isomorphic-web-app-up-and-running-in-5-minutes-72da028c15dd?source=collection_archive---------1-----------------------#2018-03-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="67ae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä¸€ä¸ªåŒæ„çš„webåº”ç”¨ç¨‹åºç»™ä½ æä¾›äº†æœåŠ¡å™¨ç«¯æ¸²æŸ“å’Œå•é¡µåº”ç”¨ç¨‹åº(SPA)çš„ä¼˜ç‚¹ã€‚</p><h2 id="2c8a" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">TLï¼›é€Ÿåº¦ä¸‰è§’å½¢å®šä½æ³•(dead reckoning)</h2><p id="0079" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">è®©ä»£ç åœ¨localhostä¸Šè¿è¡Œ:3000</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="9ad8" class="jp jq hu ku b fv ky kz l la lb">$ git clone <a class="ae lc" href="https://github.com/xiaoyunyang/isomorphic-router-demo.git" rel="noopener ugc nofollow" target="_blank">https://github.com/xiaoyunyang/isomorphic-router-demo.git</a><br/>$ cd isomorphic-router-demo<br/>$ npm install<br/>$ npm start</span></pre><p id="54f7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™æ˜¯æ£€æŸ¥ä»£ç çš„ä»“åº“:<a class="ae lc" href="https://github.com/xiaoyunyang/isomorphic-router-demo" rel="noopener ugc nofollow" target="_blank">https://github.com/xiaoyunyang/isomorphic-router-demo</a></p></div><div class="ab cl ld le hc lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hn ho hp hq hr"><h1 id="80b3" class="lk jq hu bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma dt translated">åŠ¨æœº</h1><p id="0607" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">å·²ç»æœ‰å¾ˆå¤šæ–‡ç« å†™äº†åŒæ„web appçš„å¥½å¤„ï¼Œåƒ<a class="ae lc" rel="noopener" href="/@ghengeveld/isomorphism-vs-universal-javascript-4b47fb481beb">è¿™ä¸ª</a>ã€<a class="ae lc" href="https://writing.pupius.co.uk/beyond-pushstate-building-single-page-applications-4353246f4480" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ã€<a class="ae lc" rel="noopener" href="/airbnb-engineering/isomorphic-javascript-the-future-of-web-apps-10882b7a2ebc">è¿™ä¸ª</a>ï¼Œè¿˜æœ‰<a class="ae lc" href="https://ponyfoo.com/articles/stop-breaking-the-web" rel="noopener ugc nofollow" target="_blank">è¿™ä¸ª</a>ã€‚æœ‰ä¸€æœ¬å…³äºå®ƒçš„ä¹¦æ­£åœ¨å†™ã€‚æˆ‘å–œæ¬¢æŠŠåŒæ„çš„webåº”ç”¨ç¨‹åºæƒ³è±¡æˆSPA 2.0ã€‚å®ƒæ˜¯å¸¦æœ‰æœåŠ¡å™¨ç«¯æ¸²æŸ“çš„SPAã€‚</p><p id="bb95" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">SPAæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯(æµè§ˆå™¨æ¸²æŸ“)åº”ç”¨ç¨‹åºï¼Œåœ¨åˆå§‹åŠ è½½åå¯åŠ¨æ•´ä¸ªç½‘ç«™ã€‚è¿™æ„å‘³ç€å½“ä½ ä½¿ç”¨æµè§ˆå™¨è®¿é—®example.comæ—¶ï¼Œexample . comçš„æœåŠ¡å™¨ä¼šå‘é€ä¸€ä¸ªHTMLæ¨¡æ¿å’Œä¸€äº›javascriptä»£ç ï¼Œä¾›ä½ çš„æµè§ˆå™¨æ‰§è¡Œä»£ç ï¼Œå‘ˆç°ç½‘é¡µçš„å®é™…å†…å®¹ã€‚å› ä¸ºåˆ›å»ºDOMçš„ä»£ç å’ŒDOMä¹‹é—´çš„ç´§å¯†è€¦åˆï¼Œspaå¯ä»¥å¤„ç†å¤æ‚çš„DOMæ“ä½œã€‚</p><p id="5f1d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘ä»¬éƒ½å¾ˆç†Ÿæ‚‰SPAçš„ç‰¹ç‚¹:å¯¹ç”¨æˆ·è¾“å…¥çš„å¿«é€Ÿå“åº”ï¼Œé«˜åº¦äº’åŠ¨çš„ç½‘é¡µ(æƒ³æƒ³google docs)ï¼Œä»¥åŠåœ¨é¡µé¢åŠ è½½åç¦»çº¿ä½¿ç”¨çš„èƒ½åŠ›ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå¯¹äºåƒæˆ‘è¿™æ ·è¯•å›¾ç”¨ä¸€äº›è™šæ‹Ÿæ•°æ®å¿«é€Ÿåˆ›å»ºç½‘ç«™åŸå‹çš„åˆåˆ›å…¬å¸åˆ›å§‹äººæ¥è¯´ï¼ŒSPAå¯ä»¥è®©ä½ ç‹¬ç«‹äºæœåŠ¡å™¨åº”ç”¨ç¨‹åºæ„å»ºç½‘ç«™ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ä¸€ä¸ªå¤æ‚çš„å‰ç«¯åº“ï¼Œå¦‚<a class="ae lc" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> React </a>ã€äºšé©¬é€ŠS3æ¥æ‰˜ç®¡ï¼Œå¹¶ä¸”å°†æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªCSVæ–‡ä»¶ä¸­ï¼Œé‚£ä¹ˆæ‚¨æ ¹æœ¬ä¸ç”¨æ„å»ºæœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚è¿™æ­£æ˜¯æˆ‘ä¸º<a class="ae lc" href="http://looseleafapp.com/" rel="noopener ugc nofollow" target="_blank">æ´»é¡µ</a>æ‰€åšçš„ã€‚</p><p id="cf88" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å½“æ‚¨ä¸ºæ‚¨çš„ç½‘ç«™æ„å»ºMVPåŸå‹æ—¶ï¼Œè¿™ç§å…³æ³¨ç‚¹çš„åˆ†ç¦»æœ€åˆä¼šæé«˜ç”Ÿäº§ç‡ï¼Œä½†æ˜¯å¯¹äºéƒ¨ç½²ä¸ºSPAçš„ç½‘ç«™æ¥è¯´ï¼Œä¼šæœ‰ä¸€ä¸ªæ”¶ç›Šé€’å‡ç‚¹ï¼Œè¯¥SPAé€šè¿‡APIä¸æœåŠ¡å™¨è¿›è¡Œæ•°æ®é€šä¿¡ã€‚è¿™ç§æ–¹æ³•çš„ä¸»è¦ç¼ºç‚¹æ˜¯:</p><h2 id="b3f8" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated"><strong class="ak">åŠ è½½æ—¶é—´é•¿(åUX) </strong></h2><p id="eb18" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">å› ä¸ºç½‘ç«™æ˜¯å¼•å¯¼å¼çš„ï¼Œæ‰€ä»¥é¡µé¢å†…å®¹åœ¨åˆå§‹åŠ è½½åéœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½æ˜¾ç¤ºå‡ºæ¥ã€‚å½“æ‚¨åœ¨æµè§ˆå™¨ä¸­é”®å…¥example.comå¹¶æŒ‰enteré”®æ—¶ï¼Œä¼šå‡ºç°åˆå§‹åŠ è½½ã€‚æµè§ˆå™¨ä»åˆå§‹åŠ è½½ä¸­è·å¾—çš„å†…å®¹å°±æ˜¯æœåŠ¡å™¨å‘é€çš„å†…å®¹ã€‚</p><p id="143c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¦‚æœæœåŠ¡å™¨å‘é€ä¸€ä¸ªç©ºç™½çš„HTMLæ¨¡æ¿å’Œjavascriptæ¥å‘ˆç°æ¨¡æ¿ä¸­çš„å†…å®¹ï¼Œé‚£ä¹ˆç”¨æˆ·å°†ä¼šçœ‹åˆ°ä¸€ä¸ªç©ºç™½çš„é¡µé¢å’Œä¸€ä¸ªé¡µé¢åŠ è½½åŠ¨ç”»ã€‚ç”¨æˆ·éœ€è¦ç­‰å¾…å¤šé•¿æ—¶é—´æ‰èƒ½çœ‹åˆ°å†…å®¹ï¼Œè¿™å–å†³äºç½‘é¡µçš„å¤æ‚ç¨‹åº¦ä»¥åŠç§»åŠ¨è®¾å¤‡ä¸Šçš„äº’è”ç½‘æœåŠ¡é€Ÿåº¦ï¼Œå› æ­¤ç½‘é¡µåŠ è½½é€Ÿåº¦å¾€å¾€ä¼šæ…¢å¾—å¤šã€‚</p><h2 id="9f75" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated"><strong class="ak">ç³Ÿç³•çš„SEO(ä¸åˆ©äºå•†ä¸š)</strong></h2><p id="dd24" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">æœç´¢å¼•æ“å’Œç¤¾äº¤åˆ†äº«æ˜¯è·å–æ–°ç”¨æˆ·çš„ä¸¤ä¸ªæœ€é‡è¦çš„æ‰‹æ®µã€‚</p><p id="adae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¯ä»¥æŠŠæœç´¢å¼•æ“ä¼˜åŒ–(SEO)çœ‹ä½œæ˜¯è®©è°·æ­Œå°†ä½ çš„ç½‘é¡µåœ¨ç›¸å…³æŸ¥è¯¢æœç´¢åˆ—è¡¨ä¸­æ’åé å‰çš„æ–¹æ³•ã€‚ä¸ºäº†è®©è°·æ­Œå¯¹ä½ çš„ç½‘é¡µå†…å®¹è¿›è¡Œæ’åï¼Œå®ƒéœ€è¦çŸ¥é“ä½ çš„ç½‘é¡µä¸Šæœ‰ä»€ä¹ˆå†…å®¹ã€‚è°·æ­Œéƒ¨ç½²äº†ä¸€å¤§æ‰¹çˆ¬è™«ï¼Œå®ƒä»¬åªæ˜¯ä¸€äº›ç¨‹åºï¼Œå‘ç½‘é¡µå‘å‡ºè¯·æ±‚ï¼ŒæŸ¥çœ‹å“åº”ï¼Œä»HTMLä¸­åˆ é™¤å†…å®¹ï¼Œå¹¶æŸ¥çœ‹å¦‚ä½•æ ¹æ®ç›¸å…³æ€§åœ¨äº’è”ç½‘ä¸Šçš„å…¶ä»–ç½‘é¡µä¸­å¯¹è¯¥ç½‘é¡µè¿›è¡Œæ’åã€‚è¿™äº›çˆ¬è™«ä¸€èˆ¬ä¸ä¼šè¿è¡ŒJavaScriptï¼Œä¹Ÿä¸ä¼šç­‰å¾…å¾ˆé•¿æ—¶é—´è®©é¡µé¢è‡ªåŠ¨å‘ˆç°ã€‚å¦‚æœä½ çš„ç½‘é¡µåœ¨åˆæ¬¡åŠ è½½æ—¶ç»™çˆ¬è™«ç•™ä¸‹ç©ºç™½é¡µé¢ï¼Œé‚£ä¹ˆå½“åœ¨google.comä¸Šè¾“å…¥ç›¸å…³æœç´¢æŸ¥è¯¢æ—¶ï¼Œè°·æ­Œå°†ä¸ä¼šçŸ¥é“ä½ çš„é¡µé¢å°†ä¼šå‡†ç¡®åœ°æŠŠä½ çš„ç½‘é¡µæ”¾åœ¨å‘½ä¸­åˆ—è¡¨çš„è¾ƒé«˜ä½ç½®ã€‚</p><p id="8aa7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åŒæ ·çš„äº‹æƒ…ä¹Ÿå‘ç”Ÿåœ¨ç¤¾äº¤åª’ä½“ç½‘ç«™ä¸Šï¼Œæ¯”å¦‚è„¸ä¹¦å’ŒTwitter sharingï¼Œä»–ä»¬æœ‰è‡ªå·±çš„çˆ¬è™«å¤§å†›ï¼Œæ ¹æ®HTMLæ ‡é¢˜ä¸­çš„metaæ ‡ç­¾æ¥å‘ˆç°é¡µé¢é¢„è§ˆã€‚å½“ç½‘é¡µåœ¨æµè§ˆå™¨ä¸­å¼•å¯¼æ—¶ï¼Œæ ‡é¢˜åœ¨æœåŠ¡å™¨ç«¯å‘ˆç°ï¼Œå¹¶ä¸”å½“å†…å®¹åŸºäºåŠ¨æ€åŠ è½½è€Œæ”¹å˜æ—¶ä¸ä¼šæ”¹å˜ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªé”€å”®ä¹¦ç±çš„ç½‘ç«™å’Œä¸€ä¸ªSPAï¼Œå®ƒä½¿ç”¨ç›¸åŒçš„HTMLæ¨¡æ¿ä¸ºä¸åŒçš„ä¹¦ç±å‘ˆç°ä¸åŒçš„é¡µé¢ï¼Œé‚£ä¹ˆå½“ä½ åœ¨è„¸ä¹¦ä¸Šåˆ†äº«æŸæœ¬ä¹¦çš„é¡µé¢é“¾æ¥æ—¶ï¼Œé¢„è§ˆå°†æ˜¾ç¤ºå…³äºä½ çš„ç½‘ç«™çš„é€šç”¨é¢„è§ˆï¼Œå®ƒè¯´è¿™æ˜¯ä¸€ä¸ªé”€å”®æˆåƒä¸Šä¸‡æœ¬ä¹¦çš„åœ°æ–¹ï¼Œä½†ä¸ä¼šæ˜¾ç¤ºç‰¹å®šä¹¦ç±çš„ä»»ä½•ç‹¬ç‰¹ä¿¡æ¯ã€‚<a class="ae lc" rel="noopener" href="/@cereallarceny/server-side-rendering-with-create-react-app-fiber-react-router-v4-helmet-redux-and-thunk-275cb25ca972">è¿™ç¯‡æ–‡ç« </a>å¾ˆå¥½åœ°å±•ç¤ºäº†SPAåœ¨ä¸ºç¤¾äº¤åˆ†äº«ç”Ÿæˆç‹¬ç‰¹æ ‡é¢˜çš„èƒ½åŠ›æ–¹é¢çš„å±€é™æ€§ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨æœåŠ¡å™¨æ¸²æŸ“æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p><h2 id="dad9" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated"><strong class="ak">çº¯æœåŠ¡å™¨æ¸²æŸ“è§£å†³æ–¹æ¡ˆæ€ä¹ˆæ ·ï¼Ÿ</strong></h2><p id="3b2f" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">å¦‚æœä½ æ­£åœ¨è¯»è¿™ç¯‡æ–‡ç« ï¼Œé‚£æ„å‘³ç€æˆ‘å·²ç»è¯´æœä½ ï¼Œç®€å•çš„æ°´ç–—ä¸æ˜¯ä¸€ä¸ªå¥½åŠæ³•ã€‚çº¯ç²¹çš„æœåŠ¡å™¨ç«¯åº”ç”¨ç¨‹åºä¹Ÿä¸åˆé€‚ï¼Œå› ä¸ºä»å¼€å‘çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåˆ†åˆ«æ„å»ºæˆ‘ä»¬çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚ä»ç”¨æˆ·ä½“éªŒçš„è§’åº¦æ¥çœ‹ï¼Œä¸€æ—¦SPAå®Œå…¨åŠ è½½ï¼Œç”¨æˆ·ä½“éªŒå¯èƒ½ä¼šå¤§å¤§è¶…è¿‡æœåŠ¡å™¨å‘ˆç°çš„ç½‘é¡µã€‚æ­¤å¤–ï¼Œæˆ‘ä¸å¸Œæœ›æ¯æ¬¡å•å‡»æŒ‰é’®æ—¶éƒ½è¦é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢ã€‚</p><p id="5810" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å› æ­¤ï¼Œçº¯SPAçš„ç¼ºç‚¹åœ¨äºåˆå§‹è´Ÿè½½ã€‚çº¯æœåŠ¡å™¨æ¸²æŸ“è§£å†³æ–¹æ¡ˆçš„ç¼ºç‚¹æ˜¯åˆå§‹åŠ è½½åä¼šå‘ç”Ÿä»€ä¹ˆã€‚æˆ‘ä»¬æ€æ ·åšæ‰èƒ½ä¸¤å…¨å…¶ç¾ï¼ŸğŸ¤”</p></div><div class="ab cl ld le hc lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hn ho hp hq hr"><h1 id="0403" class="lk jq hu bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma dt translated">è®¾ç½®åŒæ„çš„webåº”ç”¨ç¨‹åº</h1><p id="c8da" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">å®¢æˆ·ç«¯æ¸²æŸ“å’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“äº’ä¸ºè¡¥å……ã€‚æˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªåŒæ„çš„webåº”ç”¨ç¨‹åºï¼Œç”¨SPAå¢å¼ºæœåŠ¡å™¨å‘ˆç°é¡µé¢çš„èƒ½åŠ›ã€‚æˆ‘å°†è¦ä»‹ç»çš„åŒæ„web app starteré¡¹ç›®åˆ©ç”¨äº†JavaScriptç”¨äºæ„å»ºå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºå’ŒæœåŠ¡å™¨åº”ç”¨ç¨‹åºè¿™ä¸€äº‹å®ã€‚è¿™ä¿ƒè¿›äº†ä»£ç çš„å¯é‡ç”¨æ€§ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç›¸åŒçš„ä»£ç æ¥å‘ˆç°SPAä»¥åŠæœåŠ¡å™¨ä¸ºåˆå§‹åŠ è½½å‘é€çš„HTMLã€‚</p><p id="e844" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æ‰€æœ‰çš„ä»£ç éƒ½åŒ…å«åœ¨è¿™ä¸ªåº“ä¸­ã€‚åœ¨æœ¬æ–‡çš„å‰©ä½™éƒ¨åˆ†ï¼Œæˆ‘å°†é€ä¸€ä»‹ç»å…¶ä¸­çš„ä»£ç ç‰‡æ®µã€‚</p><div class="mb mc fm fo md me"><a href="https://github.com/xiaoyunyang/isomorphic-router-demo" rel="noopener  ugc nofollow" target="_blank"><div class="mf ab ej"><div class="mg ab mh cl cj mi"><h2 class="bd hv fv z el mj eo ep mk er et ht dt translated">æ¨æ™“äº‘/åŒæ„è·¯ç”±å™¨æ¼”ç¤º</h2><div class="ml l"><h3 class="bd b fv z el mj eo ep mk er et ek translated">è¿™ä¸ªé¡¹ç›®å‘ä½ å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨React Router 4å’ŒReact Router 4å»ºç«‹ä¸€ä¸ªåŒæ„çš„webapp</h3></div><div class="mm l"><p class="bd b gc z el mj eo ep mk er et ek translated">github.com</p></div></div><div class="mn l"><div class="mo l mp mq mr mn ms mt me"/></div></div></a></div><h2 id="a7fd" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated"><strong class="ak">å †æ ˆ</strong></h2><p id="73eb" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">è¿™ä¸ªstarteré¡¹ç›®çš„æ ˆåŒ…æ‹¬<a class="ae lc" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">èŠ‚ç‚¹</a>ã€<a class="ae lc" href="http://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Express </a>ã€<a class="ae lc" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>ã€<a class="ae lc" href="https://github.com/ReactTraining/react-router" rel="noopener ugc nofollow" target="_blank"> React Router 4 </a>å’Œ<a class="ae lc" href="https://github.com/ReactTraining/react-router/tree/master/packages/react-router-config" rel="noopener ugc nofollow" target="_blank"> react-router-config </a>ï¼Œbabelå’Œ<a class="ae lc" rel="noopener" href="/webpack/webpack-4-mode-and-optimization-5423a6bc597a"> Webpack 4 </a>ã€‚æˆ‘æ²¡æœ‰ä½¿ç”¨ä»»ä½•ç¬¬ä¸‰æ–¹é€šç”¨åº”ç”¨ä¸­é—´ä»¶æˆ–æ¡†æ¶ï¼Œå¦‚<a class="ae lc" href="https://github.com/faceyspacey/react-universal-component" rel="noopener ugc nofollow" target="_blank">React Universal Component</a>æˆ–<a class="ae lc" href="https://github.com/smooth-code/loadable-components" rel="noopener ugc nofollow" target="_blank"> Loadable Component </a>ã€‚</p><h2 id="f93d" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">æ–‡ä»¶ç»“æ„</h2><p id="04cb" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">è¯¥é¡¹ç›®åˆ†ä¸ºç‰¹å®šäºæœåŠ¡å™¨çš„ä»£ç ã€ç”¨äºå‘ˆç°SPAçš„ç‰¹å®šäºå®¢æˆ·ç«¯çš„ä»£ç ï¼Œä»¥åŠæ”¯æŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å‘ˆç°çš„å…±äº«ä»£ç ã€‚</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="d01a" class="jp jq hu ku b fv ky kz l la lb">~/isomorphic-router-demo$ tree -l 3 --ignore 'node_modules'</span><span id="9c6f" class="jp jq hu ku b fv mu kz l la lb">/isomorphic-router-demo</span><span id="d34e" class="jp jq hu ku b fv mu kz l la lb">â”œâ”€â”€ build<br/>|  â””â”€â”€ main.bundle.js<br/>â”œâ”€â”€ client<br/>|  â””â”€â”€ main.js<br/>â”œâ”€â”€ iso-middleware<br/>|  â””â”€â”€ renderRoute.js<br/>â”œâ”€â”€ package.json<br/>â”œâ”€â”€ .babelrc<br/>â”œâ”€â”€ .env<br/>â”œâ”€â”€ server<br/>|  â”œâ”€â”€ run.js<br/>|  â””â”€â”€ server.js<br/>â”œâ”€â”€ shared<br/>|  â”œâ”€â”€ App.js<br/>|  â”œâ”€â”€ components<br/>|  |  â”œâ”€â”€ About.js<br/>|  |  â”œâ”€â”€ HTML.js<br/>|  |  â”œâ”€â”€ TopNav.js<br/>|  |  â”œâ”€â”€ Home.js<br/>|  |  â”œâ”€â”€ Main.js<br/>|  |  â””â”€â”€ NotFound.js<br/>|  â””â”€â”€ routes.js<br/>â””â”€â”€ webpack.config.js</span></pre><h2 id="c3b4" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated"><strong class="ak">å…±äº«ä»£ç </strong></h2><p id="73f6" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">å…±äº«ä»£ç çš„ä¸»è¦å…¥å£ç‚¹æ˜¯<code class="eh mv mw mx ku b">&lt;App&gt;</code>ç»„ä»¶:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="faf7" class="jp jq hu ku b fv ky kz l la lb">// shared/App.js</span><span id="c21f" class="jp jq hu ku b fv mu kz l la lb">import React from 'react';<br/>import TopNav from './components/TopNav';<br/>import Main from './components/Main';</span><span id="ad9c" class="jp jq hu ku b fv mu kz l la lb">const App = () =&gt; (<br/>  &lt;div&gt;<br/>    &lt;TopNav /&gt;<br/>    &lt;Main /&gt;<br/>  &lt;/div&gt;<br/>);</span><span id="9bec" class="jp jq hu ku b fv mu kz l la lb">export default App;</span></pre><p id="c625" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™æ˜¯ä¸€ä¸ªéå¸¸æ ‡å‡†çš„top Reactç»„ä»¶ï¼Œå®ƒä½¿ç”¨å­ç»„ä»¶æ¥å‘ˆç°ä¸åŒçš„é¡µé¢ã€‚</p><p id="0a65" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mv mw mx ku b">&lt;TopNav&gt;</code>ä½¿ç”¨Reactè·¯ç”±å™¨çš„<code class="eh mv mw mx ku b">&lt;Link&gt;</code>ç»„ä»¶å®šä¹‰åº”ç”¨å¯¼èˆª:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="f491" class="jp jq hu ku b fv ky kz l la lb">// shared/components/TopNav.js</span><span id="9c91" class="jp jq hu ku b fv mu kz l la lb">import React from 'react';<br/>import { Link } from 'react-router-dom';</span><span id="e766" class="jp jq hu ku b fv mu kz l la lb">export default () =&gt; (<br/>  &lt;nav&gt;<br/>    &lt;div className="nav-wrapper"&gt;<br/>      &lt;a href="/" className="brand-logo"&gt;Demo&lt;/a&gt;<br/>      &lt;ul id="nav-mobile" className="right"&gt;<br/>        &lt;li&gt;&lt;Link to="/"&gt;Home&lt;/Link&gt;&lt;/li&gt;<br/>        &lt;li&gt;&lt;Link to="/about"&gt;About&lt;/Link&gt;&lt;/li&gt;<br/>        &lt;li&gt;&lt;Link to="/foo"&gt;Foo&lt;/Link&gt;&lt;/li&gt;<br/>      &lt;/ul&gt;<br/>    &lt;/div&gt;<br/>  &lt;/nav&gt;<br/>);</span></pre><p id="c0b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åŸºäºè·¯ç”±ä¸ºå“ªä¸ªé¡µé¢æä¾›æœåŠ¡çš„æ˜ å°„åŒ…å«åœ¨<code class="eh mv mw mx ku b">routes.js</code>ä¸­ï¼Œå®ƒè¢«å¯¼å…¥åˆ°<code class="eh mv mw mx ku b">&lt;Main&gt;</code>ç»„ä»¶ä¸­ã€‚</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="4937" class="jp jq hu ku b fv ky kz l la lb">// shared/routes.js<br/>import Home from './components/Home';<br/>import About from './components/About';<br/>import NotFound from './components/NotFound';</span><span id="9f61" class="jp jq hu ku b fv mu kz l la lb">const routes = [<br/>  {<br/>    path: '/',<br/>    exact: true,<br/>    component: Home<br/>  },<br/>  {<br/>    path: '/about',<br/>    component: About<br/>  },<br/>  {<br/>    path: '*',<br/>    restricted: false,<br/>    component: NotFound<br/>  }<br/>];</span><span id="8c7a" class="jp jq hu ku b fv mu kz l la lb">export default routes;</span></pre><p id="6d5c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åœ¨<code class="eh mv mw mx ku b">&lt;Main&gt;</code>ç»„ä»¶ä¸­ï¼Œ<code class="eh mv mw mx ku b"><a class="ae lc" href="https://github.com/ReactTraining/react-router/tree/master/packages/react-router-config" rel="noopener ugc nofollow" target="_blank">react-router-config</a></code> renderRouteså‡½æ•°ç”¨äºæ ¹æ®<code class="eh mv mw mx ku b">routes</code>ä¸­å®šä¹‰çš„ç»„ä»¶æ˜ å°„è·¯å¾„ç”Ÿæˆ<code class="eh mv mw mx ku b">&lt;Route&gt;</code>ç»„ä»¶ã€‚</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="3466" class="jp jq hu ku b fv ky kz l la lb">import React from 'react';<br/>import { Switch } from 'react-router-dom';<br/>import { renderRoutes } from 'react-router-config';</span><span id="9d55" class="jp jq hu ku b fv mu kz l la lb">import routes from '../routes';</span><span id="473b" class="jp jq hu ku b fv mu kz l la lb">const Main = () =&gt; (<br/>  &lt;Switch&gt;<br/>    {renderRoutes(routes)}<br/>  &lt;/Switch&gt;<br/>);</span><span id="96d3" class="jp jq hu ku b fv mu kz l la lb">export default Main;</span></pre><p id="2aac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¦‚<code class="eh mv mw mx ku b">routes</code>ä¸­æ‰€å®šä¹‰ï¼Œæ‚¨å¯ä»¥å‘ˆç°çš„é¡µé¢æœ‰Homeã€Aboutå’ŒNotFoundï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><figure class="kp kq kr ks fq mz fe ff paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="fe ff my"><img src="../Images/613642d91228b377e8d9cf5ce7846bff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQ2o8XaiQqbyZvcApbDg9w.png"/></div></div><figcaption class="nf ng fg fe ff nh ni bd b be z ek">Home Page</figcaption></figure><figure class="kp kq kr ks fq mz fe ff paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="fe ff nj"><img src="../Images/2825abc683b482df8903f1de0ca308bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ber268-teOhRYoJGN1hwYQ.png"/></div></div><figcaption class="nf ng fg fe ff nh ni bd b be z ek">About page</figcaption></figure><figure class="kp kq kr ks fq mz fe ff paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="fe ff nk"><img src="../Images/b26fbbe0ea0d9e5d69b7490902dcc99d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kQvyPtUCONOxDUVPOhy6xw.png"/></div></div><figcaption class="nf ng fg fe ff nh ni bd b be z ek">NotFound page</figcaption></figure><h2 id="b59b" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">æœåŠ¡å™¨æ¸²æŸ“</h2><p id="1ea3" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">æˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­é”®å…¥<code class="eh mv mw mx ku b">localhost:3000</code>å¹¶æŒ‰enteré”®æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›æœåŠ¡å™¨å‘é€ä¸»é¡µçš„HTMLã€‚</p><p id="6fb3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘ä»¬ä»å®‰è£…ä¸­é—´ä»¶åŠŸèƒ½å¼€å§‹ï¼Œç”¨äºå°†åº”ç”¨ç¨‹åºæ¸²æŸ“åˆ°æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œå¦‚ä¸‹é¢çš„<code class="eh mv mw mx ku b">server.js</code>æ‰€ç¤º:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="09c0" class="jp jq hu ku b fv ky kz l la lb">// server/server.js</span><span id="bccf" class="jp jq hu ku b fv mu kz l la lb">import express from 'express';<br/>import renderRouterMiddleware from '../iso-middleware/renderRoute';</span><span id="4069" class="jp jq hu ku b fv mu kz l la lb">// ...</span><span id="262f" class="jp jq hu ku b fv mu kz l la lb">app.get('*', renderRouterMiddleware);</span><span id="e9be" class="jp jq hu ku b fv mu kz l la lb">// ...</span></pre><p id="1e41" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mv mw mx ku b">renderRouterMiddleware</code>åŒ…å«ä½¿ç”¨<code class="eh mv mw mx ku b">shared</code>æ–‡ä»¶å¤¹ä¸­çš„ç»„ä»¶åˆ›å»ºHTMLå­—ç¬¦ä¸²çš„æ‰€æœ‰é€»è¾‘ã€‚</p><p id="44af" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mv mw mx ku b">renderRouterMiddleware</code>æ˜¯æˆ‘ä»¬é¡¹ç›®ä¸­æœ€é‡è¦çš„æ–‡ä»¶ä¹‹ä¸€ï¼Œå› ä¸ºå®ƒå…·æœ‰ä½¿åº”ç”¨ç¨‹åºåŒæ„çš„é€»è¾‘ã€‚</p><figure class="kp kq kr ks fq mz"><div class="bz el l di"><div class="nl nm l"/></div></figure><p id="5fdf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šï¼Œä»£ç çš„æœåŠ¡å™¨ç«¯å‘ˆç°éƒ¨åˆ†æ˜¯éå¸¸æ ·æ¿åŒ–çš„ï¼Œä½†æ˜¯å…·æœ‰HTMLçš„æœåŠ¡å™¨ç«¯å‘ˆç°çš„ç§˜å¯†æˆåˆ†ï¼Œè¿™ä½¿å¾—å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºåœ¨åˆå§‹åŠ è½½ä¹‹åæ¥ç®¡æˆä¸ºå¯èƒ½ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™é‡Œä¸ºæœåŠ¡å™¨ç«¯å‘ˆç°å¯¼å…¥çš„<code class="eh mv mw mx ku b">&lt;HTML&gt;</code>ç»„ä»¶åŒ…å«ä¸å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºçš„è”ç³»ã€‚ä½†æ˜¯åœ¨æˆ‘ç»™ä½ çœ‹ä»£ç ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æ£€æŸ¥ä¸€äº›å…¶ä»–çš„ä¸œè¥¿ã€‚</p><p id="f0db" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">è¾¹æ³¨:</strong>å¦ä¸€ä»¶å€¼å¾—æ³¨æ„çš„äº‹æƒ…æ˜¯ï¼Œå¯¹äºæœåŠ¡å™¨æ¸²æŸ“ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ä½¿ç”¨Reactçš„<code class="eh mv mw mx ku b">renderToString</code>å‡½æ•°è½¬æ¢ä¸€åˆ‡ä¹‹å‰ï¼Œå°†æˆ‘ä»¬çš„<code class="eh mv mw mx ku b">&lt;App&gt;</code>åŒ…è£…åœ¨Reactè·¯ç”±å™¨çš„<code class="eh mv mw mx ku b">&lt;StaticRouter&gt;</code>ç»„ä»¶ä¸­ã€‚å¯¹äºæˆ‘ä»¬æ¥ä¸‹æ¥å°†è¦è®¨è®ºçš„å®¢æˆ·ç«¯æ¸²æŸ“ï¼Œæˆ‘ä»¬æƒ³è¦ä½¿ç”¨<code class="eh mv mw mx ku b">&lt;BrowserRouter&gt;</code>ã€‚</p><h2 id="33a0" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">å®¢æˆ·ç«¯æ¸²æŸ“</h2><p id="5acd" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">ä¸‹é¢çš„æœåŠ¡å™¨ä»£ç ä¸ºæµè§ˆå™¨æä¾›äº†å‘ˆç°SPAæ‰€éœ€çš„æ‰€æœ‰ä»£ç :</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="8518" class="jp jq hu ku b fv ky kz l la lb">// server/server.js</span><span id="70c5" class="jp jq hu ku b fv mu kz l la lb">// ...</span><span id="9751" class="jp jq hu ku b fv mu kz l la lb">const buildPath = path.join(__dirname, '../', 'build');<br/>app.use('/', express.static(buildPath));<br/>app.use(express.static(__dirname));</span><span id="f3ca" class="jp jq hu ku b fv mu kz l la lb">// ...</span></pre><p id="1b64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™æ®µä»£ç å‘Šè¯‰æœåŠ¡å™¨ä»æ„å»ºæ–‡ä»¶å¤¹å‘<code class="eh mv mw mx ku b">localhost:3000/</code>æä¾›é™æ€èµ„äº§ã€‚</p><p id="ac8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¦‚ä¸Šé¢çš„æ–‡ä»¶ç»“æ„æ‰€ç¤ºï¼Œåœ¨æ„å»ºæ–‡ä»¶å¤¹ä¸­åªæœ‰ä¸€ä¸ªæ–‡ä»¶â€” <code class="eh mv mw mx ku b">main.bundle.js</code>ã€‚å¦‚æœä½ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<code class="eh mv mw mx ku b">localhost:3000/main.bundle.js</code>,ä½ ä¼šçœ‹åˆ°ä¸€å †JavaScriptï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªæˆ‘ä»¬çš„<code class="eh mv mw mx ku b">shared</code>æ–‡ä»¶å¤¹çš„ä»£ç ï¼Œè¿™äº›ä»£ç å·²ç»ä»ES6è½¬åˆ°äº†JavaScriptçš„æ—©æœŸç‰ˆæœ¬ã€‚</p><p id="2267" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mv mw mx ku b">main.bundle.js</code>æ˜¯ç”±Webpackåˆ›å»ºçš„ã€‚åœ¨<code class="eh mv mw mx ku b"><a class="ae lc" href="https://github.com/xiaoyunyang/isomorphic-router-demo/blob/master/package.json" rel="noopener ugc nofollow" target="_blank">package.json</a></code>ä¸­ï¼Œè„šæœ¬å·²ç»è¢«è®¾ç½®ä¸ºåœ¨å¯åŠ¨æœåŠ¡å™¨ä¹‹å‰æ‰§è¡Œæ„å»ºï¼Œå› æ­¤<code class="eh mv mw mx ku b">main.bundle.js</code>åœ¨æˆ‘ä»¬æ¯æ¬¡å¯åŠ¨æœåŠ¡å™¨æ—¶éƒ½ä¼šè¢«é‡æ–°æ„å»ºã€‚</p><p id="3816" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æ„å»ºå®šä¹‰åœ¨æˆ‘ä»¬çš„<code class="eh mv mw mx ku b">webpack.config.js</code>æ–‡ä»¶ä¸­ï¼Œå®ƒå°†<code class="eh mv mw mx ku b">./client/main.js</code>å®šä¹‰ä¸ºæ„å»ºçš„æ¡ç›®ã€‚</p><p id="b084" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mv mw mx ku b">main.js</code>è€Œå®ƒæ‰€ä½¿ç”¨çš„ä¸€åˆ‡éƒ½è¢«æ†ç»‘æˆ<code class="eh mv mw mx ku b">main.bundle.js</code>ã€‚ä»¥ä¸‹æ˜¯<code class="eh mv mw mx ku b">main.js</code>çš„ä»£ç :</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="e178" class="jp jq hu ku b fv ky kz l la lb">// client/main.js</span><span id="8ef5" class="jp jq hu ku b fv mu kz l la lb">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import { BrowserRouter } from 'react-router-dom';<br/>import App from '../shared/App';</span><span id="73cc" class="jp jq hu ku b fv mu kz l la lb">const renderRouter = Component =&gt; {<br/>  ReactDOM.hydrate(<br/>    &lt;BrowserRouter&gt;<br/>      &lt;Component /&gt;<br/>    &lt;/BrowserRouter&gt;, document.getElementById('root')<br/>  );<br/>};</span><span id="399f" class="jp jq hu ku b fv mu kz l la lb">renderRouter(App);</span></pre><p id="ea2a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä½ å¯èƒ½æ³¨æ„åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä½¿ç”¨äº†<code class="eh mv mw mx ku b">ReactDOM.hydrate</code>è€Œä¸æ˜¯<code class="eh mv mw mx ku b">ReactDOM.render</code>ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬å¸Œæœ›å°†å®¢æˆ·ç«¯å‘ˆç°çš„åº”ç”¨ç¨‹åºé™„åŠ åˆ°æœåŠ¡å™¨å‘ˆç°çš„HTMLçš„<code class="eh mv mw mx ku b">root</code> divã€‚è™½ç„¶æˆ‘ä»¬ä½¿ç”¨React v16çš„åº”ç”¨ç¨‹åºå°†ä¸<code class="eh mv mw mx ku b">ReactDOM.render</code>ä¸€èµ·å·¥ä½œï¼Œä½†Reactä¼šç»™ä½ ä¸€ä¸ªè­¦å‘Šï¼Œå‘Šè¯‰ä½ :â€œ<em class="nn"> ReactDOM.render()å°†åœ¨React v17ä¸­åœæ­¢å·¥ä½œã€‚å¦‚æœæ‚¨å¸Œæœ›Reacté™„åŠ åˆ°æœåŠ¡å™¨HTML </em>ï¼Œè¯·ç”¨ReactDOM.hydrate()æ›¿æ¢ReactDOM.render()è°ƒç”¨</p><p id="c777" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿˜è®°å¾—æˆ‘ä¹‹å‰è¯´è¿‡çš„<code class="eh mv mw mx ku b">&lt;HTML&gt;</code>ç»„ä»¶æ˜¯æœåŠ¡å™¨ç«¯å‘ˆç°çš„HTMLå’Œå®¢æˆ·ç«¯å‘ˆç°çš„åº”ç”¨ç¨‹åºä¹‹é—´çš„çº½å¸¦å—ï¼Ÿ</p><p id="d98d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æœåŠ¡å™¨ä½¿ç”¨<code class="eh mv mw mx ku b">&lt;HTML&gt;</code>æ¥å‘ˆç°åˆå§‹åŠ è½½çš„HTMLï¼Œå®ƒåˆ›å»ºä¸€ä¸ª<code class="eh mv mw mx ku b">root</code> divå¹¶åœ¨è„šæœ¬æ ‡ç­¾ä¸­åŠ¨æ€åŠ è½½<code class="eh mv mw mx ku b">main.bundle.js</code>ã€‚<strong class="it hv">è¿™å°±æ˜¯è¿™ä¸ªåŒæ„appçš„å·¥ä½œåŸç†ï¼</strong></p><figure class="kp kq kr ks fq mz"><div class="bz el l di"><div class="nl nm l"/></div></figure><h2 id="f464" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">è¿è¡Œä¸­çš„åŒæ„åº”ç”¨</h2><p id="d10a" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">ä½¿ç”¨<code class="eh mv mw mx ku b">npm start</code>å¯åŠ¨åº”ç”¨ç¨‹åºåï¼Œåœ¨æµè§ˆå™¨åœ°å€æ ä¸­é”®å…¥<code class="eh mv mw mx ku b">localhost:3000</code>ï¼ŒæŒ‰enteré”®ï¼Œåœ¨æµè§ˆå™¨æ ‡ç­¾ä¸­é¡µé¢åŠ è½½è½®æ—‹è½¬ä¸€ç‚¹åï¼Œæ‚¨å°†çœ‹åˆ°ä¸»é¡µè¢«æ¸²æŸ“ã€‚</p><p id="7f29" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">é¡µé¢åŠ è½½è½®æ—‹è½¬è¡¨æ˜æœåŠ¡å™¨å·²ç»åšäº†ä¸€äº›å·¥ä½œæ¥ä¼ é€’è¿™ä¸ªé¡µé¢ç»™ä½ ã€‚å¦‚æœä½ ç‚¹å‡»äº†å¯¼èˆªæ ä¸Šçš„<strong class="it hv">å…³äº</strong>å’Œ<strong class="it hv"> Foo </strong>ï¼Œä½ ä¼šçœ‹åˆ°â€œå…³äºâ€é¡µé¢å’Œâ€œæœªæ‰¾åˆ°â€é¡µé¢åŠ è½½ï¼Œè€Œæµè§ˆå™¨æ ‡ç­¾ä¸­æ²¡æœ‰ä»»ä½•é¡µé¢åŠ è½½è½®æ—‹è½¬ã€‚è¿™å‘Šè¯‰æ‚¨SPAæ¨¡å¼å·²ç»å¯åŠ¨ï¼Œå¹¶ä¸”æ­£åœ¨å¤„ç†åŸºäºç‚¹å‡»äº‹ä»¶çš„é¡µé¢å¯¼èˆªã€‚äº‹å®ä¸Šï¼Œå½“æ‚¨åœæ­¢æœåŠ¡å™¨æ—¶ï¼Œåº”ç”¨ç¨‹åºç”šè‡³å¯ä»¥è¿è¡Œã€‚ç»§ç»­ä»ç»ˆç«¯åœæ­¢æœåŠ¡å™¨ï¼Œçœ‹çœ‹æ‚¨ä»ç„¶å¯ä»¥åƒä»¥å‰ä¸€æ ·ç‚¹å‡»åŠ è½½é¡µé¢â€¦ä½†æ˜¯æœ‰ä¸€ç‚¹ä¸åŒ:</p><figure class="kp kq kr ks fq mz fe ff paragraph-image"><div role="button" tabindex="0" class="na nb di nc bf nd"><div class="fe ff no"><img src="../Images/d44afbfda62c9a76998a9c2d26dcc8c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A9cPA3m3UcebFalloBJ0vQ.png"/></div></div><figcaption class="nf ng fg fe ff nh ni bd b be z ek">Home Page with Server Stopped</figcaption></figure><p id="eea5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æ‚¨çœ‹åˆ°çš„ä¸æ˜¯æ¥è‡ªæœåŠ¡å™¨çš„æ¶ˆæ¯å’Œéšæœºå¼•ç”¨ï¼Œè€Œæ˜¯â€œæ­£åœ¨åŠ è½½â€è¿™ä¸ªè¯ã€‚</p><p id="8521" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™æ˜¯æ•…æ„çš„ã€‚æˆ‘è¯•å›¾è®©è¿™æ¬¾åº”ç”¨å˜å¾—æ›´æœ‰è¶£ï¼Œæ¯å½“ä½ é€šè¿‡å®¢æˆ·ç«¯åº”ç”¨TopNavå¯¼èˆªåˆ°ä¸»é¡µï¼Œæˆ–è€…ç›´æ¥ä»æœåŠ¡å™¨åŠ è½½æ—¶ï¼Œå®ƒéƒ½ä¼šå‘ä¸»é¡µå‘é€ä¸€æ®µéšæœºçš„åŠ±å¿—åè¨€ã€‚</p><p id="1975" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™ä¹Ÿæ˜¯ä¸ºäº†æ¼”ç¤ºç°ä»£webåº”ç”¨ç¨‹åºä¸­çš„ä¸€ç§å¸¸è§è®¾è®¡æ¨¡å¼ï¼Œé€šè¿‡è¿™ç§æ¨¡å¼ï¼Œé¡µé¢å†…å®¹çš„ä¸€éƒ¨åˆ†æ˜¯åœ¨é¡µé¢é€šè¿‡ä»APIçš„å¼‚æ­¥è·å–åŠ è½½ä¹‹ååŠ è½½çš„ã€‚</p><p id="4bad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh mv mw mx ku b">&lt;Home&gt;</code>ç»„ä»¶åœ¨æŒ‚è½½åç«‹å³ä»ä¸¤ä¸ªAPIç«¯ç‚¹è·å–ä¸€äº›æ•°æ®ã€‚</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="2e89" class="jp jq hu ku b fv ky kz l la lb">// shared/components/Home.js</span><span id="c848" class="jp jq hu ku b fv mu kz l la lb">import React from 'react';<br/>import fetch from 'isomorphic-fetch';</span><span id="852f" class="jp jq hu ku b fv mu kz l la lb">class Home extends React.Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = {<br/>      resHello: 'Loading...',<br/>      resQuote: 'Loading...'<br/>    };<br/>  }<br/>  componentDidMount() {<br/>    // Get hello message<br/>    this.callApi('<a class="ae lc" href="http://localhost:3000/api/hello'" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/api/hello'</a>)<br/>      .then(res =&gt; this.setState({ resHello: res.express }))<br/>      .catch(err =&gt; console.log(err));</span><span id="c483" class="jp jq hu ku b fv mu kz l la lb">    // Get random quote<br/>    const rand = Math.random();<br/>    this.callApi(`<a class="ae lc" href="http://localhost:3000/api/quote/${rand}`" rel="noopener ugc nofollow" target="_blank">http://localhost:3000/api/quote/${rand}`</a>)<br/>      .then(res =&gt; this.setState({ resQuote: res.express }))<br/>      .catch(err =&gt; console.log(err));<br/>    }<br/>    callApi = async function (endpoint) {<br/>      const response = await fetch(endpoint);<br/>      const body = await response.json();<br/>      <br/>      if (response.status !== 200) throw Error(body.message);<br/>      return body;<br/>  }<br/>  render() {<br/>    console.log('rendering: Home');<br/>    return (<br/>      &lt;div className="container"&gt;<br/>        &lt;h1&gt;Home page&lt;/h1&gt;<br/>        &lt;h6&gt;<br/>          {`Message from the server: ${this.state.resHello}`}<br/>        &lt;/h6&gt;<br/>        &lt;h5&gt;Random Quote&lt;/h5&gt;<br/>        &lt;blockquote&gt;<br/>          {this.state.resQuote}<br/>        &lt;/blockquote&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="dcbf" class="jp jq hu ku b fv mu kz l la lb">export default Home;</span></pre><p id="0ec9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è´Ÿè´£å‘è¿™äº›APIç«¯ç‚¹äº¤ä»˜æ•°æ®çš„æœåŠ¡å™¨ä»£ç å¦‚ä¸‹æ‰€ç¤º:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="7e20" class="jp jq hu ku b fv ky kz l la lb">// server/server.js</span><span id="3eff" class="jp jq hu ku b fv mu kz l la lb">import apiVersion1 from './api/api1';</span><span id="598f" class="jp jq hu ku b fv mu kz l la lb">// ... <br/>app.use('/api', apiVersion1);</span><span id="b4e0" class="jp jq hu ku b fv mu kz l la lb">// ...</span></pre><p id="06f1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿˜æœ‰è¿™é‡Œ:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="f889" class="jp jq hu ku b fv ky kz l la lb">// server/api/api1.js</span><span id="e95a" class="jp jq hu ku b fv mu kz l la lb">import express from 'express';</span><span id="b0b8" class="jp jq hu ku b fv mu kz l la lb">const api = express.Router();</span><span id="dd40" class="jp jq hu ku b fv mu kz l la lb">// const quotes = ... too long to write it out here</span><span id="5ea9" class="jp jq hu ku b fv mu kz l la lb">api.get('/quote/:rand', (req, res) =&gt; {<br/>  const rand = parseFloat(req.params.rand);<br/>  if (Number.isNaN(rand)) {<br/>    res.send({ express: 'Bad request.' });<br/>    return;<br/>  }<br/>  const randomQuote = quotes[randomInd(rand)];<br/>  res.send({ express: `${randomQuote}` });<br/>});</span><span id="79cc" class="jp jq hu ku b fv mu kz l la lb">module.exports = api;</span></pre><p id="1d03" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘å°†<code class="eh mv mw mx ku b">quotes</code> JSONç›´æ¥ç¡¬ç¼–ç åœ¨apiä»£ç ä¸­ï¼Œä½†æ˜¯æ‚¨å¯ä»¥å°†å¼•å·æ”¾åœ¨<code class="eh mv mw mx ku b">quotes.json</code>æ–‡ä»¶ä¸­æˆ–å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ï¼Œå¹¶ä½¿ç”¨expressä¸­é—´ä»¶åœ¨ä½¿ç”¨å‰è·å–å®ƒä»¬ã€‚</p></div><div class="ab cl ld le hc lf" role="separator"><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li lj"/><span class="lg bw bk lh li"/></div><div class="hn ho hp hq hr"><h1 id="9b0e" class="lk jq hu bd jr ll lm ln jv lo lp lq jz lr ls lt kc lu lv lw kf lx ly lz ki ma dt translated">åº•çº¿</h1><p id="1861" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">åŒæ„çš„webåº”ç”¨ç¨‹åºæ”¯æŒç½‘é¡µçš„æœåŠ¡å™¨ç«¯æ¸²æŸ“å’ŒåŠ¨æ€æ¸²æŸ“ã€‚è¿™ä¸ºå¼€å‘æ‚¨çš„webåº”ç”¨ç¨‹åºæä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ï¼Œå¹¶è·å¾—äº†å¾ˆå¥½çš„ç”¨æˆ·ç•Œé¢ä»¥åŠè‰¯å¥½çš„SEOå’Œå¿«é€Ÿçš„åŠ è½½æ—¶é—´ã€‚ä½†æ˜¯æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚ä½œä¸ºwebå¼€å‘äººå‘˜ï¼Œæˆ‘ä»¬å¿…é¡»å†³å®šå¦‚ä½•å°†æˆ‘ä»¬çš„webåº”ç”¨ç¨‹åºåˆ’åˆ†æˆæ›´å°çš„åŒæ„åº”ç”¨ç¨‹åºã€spaæˆ–æœåŠ¡å™¨å‘ˆç°é¡µé¢ã€‚æˆ‘ä»¬å¿…é¡»å†³å®šåœ¨æµè§ˆå™¨ä¸­åŠ¨æ€å‘ˆç°ä»€ä¹ˆï¼Œä»¥åŠåªåœ¨æœåŠ¡å™¨ç«¯åšä»€ä¹ˆï¼Œè¿™å–å†³äºä»€ä¹ˆå¯¹æˆ‘ä»¬æ­£åœ¨æ„å»ºçš„åº”ç”¨ç¨‹åºæ›´æœ‰æ„ä¹‰ã€‚</p><h2 id="afc1" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">æ„Ÿè°¢é˜…è¯»ï¼</h2><p id="710d" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">åŒæ ·ï¼Œè¿™æ˜¯åŒæ„å¯åŠ¨é¡¹ç›®çš„å›è´­:</p><pre class="kp kq kr ks fq kt ku kv kw aw kx dt"><span id="4deb" class="jp jq hu ku b fv ky kz l la lb"><a class="ae lc" href="https://github.com/xiaoyunyang/isomorphic-router-demo.git" rel="noopener ugc nofollow" target="_blank">https://github.com/xiaoyunyang/isomorphic-router-demo</a></span></pre><p id="2fbb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘é˜…è¯»äº†è®¸å¤šæ•™ç¨‹æ¥è®¾ç½®è¿™ä¸ªé¡¹ç›®çš„æœ€æ–°å’Œæœ€å¤§çš„å †æ ˆã€‚repoçš„è‡ªè¿°æ–‡ä»¶ä¸­æä¾›äº†å±æ€§ã€‚</p><p id="3cb8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« å’Œstarter projectå¯ä»¥å¸®åŠ©æ›´å¤šçš„äººç†è§£ä¸€ä¸ªåŒæ„web appèƒŒåçš„åŠ¨æœºå’Œæ¦‚å¿µï¼Œå¹¶å¼€å§‹ä½¿ç”¨å®ƒã€‚</p><figure class="kp kq kr ks fq mz"><div class="bz el l di"><div class="np nm l"/></div></figure></div></div>    
</body>
</html>