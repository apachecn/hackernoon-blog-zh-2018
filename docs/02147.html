<html>
<head>
<title>React Native: Getting Started with Lottie and Expo</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">反应本土:洛蒂和博览会入门</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/react-native-getting-started-with-lottie-and-expo-8b2105fbb496?source=collection_archive---------12-----------------------#2018-03-09">https://medium.com/hackernoon/react-native-getting-started-with-lottie-and-expo-8b2105fbb496?source=collection_archive---------12-----------------------#2018-03-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/360fc48651fe69b09a5c706d87bfe07a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1XY5UrlrTzTxOR6hgx7jnQ.jpeg"/></div></div></figure><p id="9989" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我们将使用<a class="ae ka" href="https://www.lottiefiles.com/" rel="noopener ugc nofollow" target="_blank">洛蒂</a>与反应原生。Lottie是一个开源库，通过提供像静态图像一样易于使用的动画来呈现Adobe效果。这些动画很美。Lottie是AirBnB开发的移动图书馆。使用<a class="ae ka" href="https://github.com/airbnb/lottie-web" rel="noopener ugc nofollow" target="_blank"> Bodymovin </a>将这些动画导出为JSON文件，以在移动设备和web应用程序中进行本地渲染。</p><blockquote class="kb"><p id="7a02" class="kc kd hu bd ke kf kg kh ki kj kk jz ek translated"><em class="kl">👍对于那些把时间花在LottieFiles上的设计师来说。</em></p></blockquote><h1 id="021b" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">要求</h1><p id="1d9f" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">为了简洁和快速开始，我将使用XDE世博会。使用它创建一个新项目。我要打电话给<code class="eh lp lq lr ls b">rn-lottie-example</code>,但是你可以随便打电话。</p><figure class="lu lv lw lx fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lt"><img src="../Images/2fba4e9575e4c6028f78db910a3b7441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*POyT_Icv07TuPXTE.png"/></div></div></figure><p id="92c7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当XDE完成运行反应式软件包管理器并构建项目时，您可以进入右侧的<code class="eh lp lq lr ls b">Device</code>下拉菜单，并根据您使用的操作系统点击您安装的模拟器。Windows用户请确保您安装了android studio和必要的文件，MacOS用户请安装XCode或更新XCode。</p><figure class="lu lv lw lx fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ly"><img src="../Images/2d49061bac5855063c2a6a65ed1ded77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fX2Q-CxR1HRTvJA-.png"/></div></div></figure><p id="aaf2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您也可以通过在移动设备上使用Expo客户端运行应用程序来查看它。请注意，根据您的互联网连接，这可能会很慢，您的移动设备和开发机器必须在同一个wifi上。扫描<code class="eh lp lq lr ls b">Share</code>版块二维码，你就可以出发了。一旦应用程序被渲染，你将受到默认屏幕的欢迎:</p><figure class="lu lv lw lx fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/53358dede9dd30c2cf26924bbb2f8f83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MiGY3Fi2WDSbBXvP.png"/></div></div></figure><p id="c152" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在打开您最喜欢的文本编辑器/IDE，因为我们将在下一节开始编写代码。</p><h1 id="c8ca" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ma kz la lb mb ld le lf mc lh li lj dt translated">入门指南</h1><p id="08d2" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">将Lottie作为一个依赖项安装在一个项目中可能有点棘手，但幸运的是，Expo提供了对它的支持。我们不需要安装任何东西，因为我们用的是Expo。我们在<code class="eh lp lq lr ls b">App.js</code>中直接导入依赖关系:</p><figure class="lu lv lw lx fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><p id="c3d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">世博会项目中的Sine Lottie处于Alpha模式，不要担心<code class="eh lp lq lr ls b">DangerZone</code>这个词。</p><p id="cca8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们的应用程序中包含一个名为<code class="eh lp lq lr ls b">animation</code>的本地状态。我们称之为帮助播放和重启动画本身。我用<a class="ae ka" href="https://www.lottiefiles.com/110-location" rel="noopener ugc nofollow" target="_blank">这个文件</a>来制作我们来自<a class="ae ka" href="https://gist.github.com/www.lottiefiles.com" rel="noopener ugc nofollow" target="_blank">LottieFiles.com</a>的动画，所以你可以下载它。当然，你可以自由选择其他的。网站上列出的动画是开源的。</p><figure class="lu lv lw lx fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><p id="87c7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">稍后，我们将使用<code class="eh lp lq lr ls b">state.animation</code>直接从<code class="eh lp lq lr ls b">Lottie</code>组件中获取动画文件。</p><h1 id="1e08" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ma kz la lb mb ld le lf mc lh li lj dt translated">定义动画</h1><p id="86c7" class="pw-post-body-paragraph jc jd hu je b jf lk jh ji jj ll jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">我们将定义两个自定义函数:<code class="eh lp lq lr ls b">_playAnimation</code>和<code class="eh lp lq lr ls b">_loadAnimationAsync</code>，它们执行动画并使用<code class="eh lp lq lr ls b">fetch</code> API从互联网加载动画。我们还将使用core React提供的<code class="eh lp lq lr ls b">componentWillMount()</code>方法预装我们的动画。在这种生命周期方法中，当状态被设置时，它可以在初始渲染之前被调用。</p><p id="cddb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通常，它用于准备第一次渲染或在渲染前更新状态。这就是我们使用它的原因。我们需要更新我们定义的状态。</p><figure class="lu lv lw lx fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><p id="a085" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在里面，<code class="eh lp lq lr ls b">_loadAnimationAsync()</code>我们使用JavaScript的<code class="eh lp lq lr ls b">fetch</code> API从它的源头获取动画。这确实意味着动画来自互联网，所以如果你在你的移动设备上测试，确保你可以访问互联网。</p><p id="aa7c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的渲染函数看起来是这样的:</p><figure class="lu lv lw lx fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><p id="991e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们分别为整个容器和动画定义样式。为了加载动画，我们将把它的<code class="eh lp lq lr ls b">backgroundColor</code>设置为<code class="eh lp lq lr ls b">transparent</code>,以去除它默认的背景颜色。</p><figure class="lu lv lw lx fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><p id="18c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以看到应用程序正在工作</p><figure class="lu lv lw lx fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mf"><img src="../Images/c2f402bd49914c0fbe2032991a375439.png" data-original-src="https://miro.medium.com/v2/resize:fit:636/0*ojXTyWvdJ70ut1Yl.gif"/></div></div></figure><p id="8427" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">本教程展示了如何使用React Native和Expo开始使用Lottie动画库。还有其他方法来定义动画，你可以想深入多少就深入多少。这篇文章是以一个初学者的角度写的。</p><p id="b76c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为洛蒂的替代品，你可以查看脸书的关键帧，它也使用Adobe After Effects来创建一个。</p></div><div class="ab cl mg mh hc mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hn ho hp hq hr"><p id="bad5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们演示应用程序的完整代码:</p><figure class="lu lv lw lx fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><h1 id="2823" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ma kz la lb mb ld le lf mc lh li lj dt translated">你也可以在这个<a class="ae ka" href="https://github.com/amandeepmittal/rn-lottie-example" rel="noopener ugc nofollow" target="_blank"><strong class="ak">Github repo</strong></a><strong class="ak">，</strong>找到完整的代码，以防你只是想玩玩这个概念。</h1><h2 id="b7bb" class="mn kn hu bd ko mo mp mq ks mr ms mt kw jn mu mv la jr mw mx le jv my mz li na dt translated">你可以在<a class="ae ka" href="https://twitter.com/amanhimself" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">推特</strong> </a>找到我🙏</h2></div></div>    
</body>
</html>