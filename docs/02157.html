<html>
<head>
<title>The Quickest Way To Have Real-Time Analytics Using PubNub EON</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PubNub EON进行实时分析的最快方法</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-quickest-way-to-have-real-time-analytics-using-pubnub-eon-f7f9a11d9ea2?source=collection_archive---------22-----------------------#2018-03-09">https://medium.com/hackernoon/the-quickest-way-to-have-real-time-analytics-using-pubnub-eon-f7f9a11d9ea2?source=collection_archive---------22-----------------------#2018-03-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="b54b" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">我花了不到一天的时间创建了一个非常基本的实时平台，并允许我以易于理解的格式查看加密货币价格的实时分析。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/6831acab9003602984d26848e437d102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Owa2rsDG6Rwv1IM_RdsL3A.gif"/></div></div></figure><p id="3a0b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">似乎无论你走到哪里，都有一些大公司试图用复杂的环境来获取你的数据，这些环境需要花费大量的时间来设置，但不像宣传的那样可扩展😫。</p><blockquote class="kr ks kt"><p id="3dbf" class="jv jw ku jx b jy jz iv ka kb kc iy kd kv kf kg kh kw kj kk kl kx kn ko kp kq hn dt translated">看在上帝的份上😤我只想快速构建一些东西，并在需要时添加功能。</p></blockquote><p id="9442" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我最近发现了<a class="ae ky" href="https://www.pubnub.com/" rel="noopener ugc nofollow" target="_blank"> PubNub </a>，并认为它值得一篇过于复杂的文章来巩固我自己的理解，然而它也有易于使用的额外好处。所以也许这不会太复杂。</p><h1 id="8b96" class="kz la hu bd lb lc ld le lf lg lh li lj ja lk jb ll jd lm je ln jg lo jh lp lq dt translated">让我们点燃并编码😌🔥</h1><p id="a2b2" class="pw-post-body-paragraph jv jw hu jx b jy lr iv ka kb ls iy kd ke lt kg kh ki lu kk kl km lv ko kp kq hn dt translated">首先，确保你有所有这些东西的最新版本:</p><ul class=""><li id="3106" class="lw lx hu jx b jy jz kb kc ke ly ki lz km ma kq mb mc md me dt translated">勇气🦁</li><li id="66b5" class="lw lx hu jx b jy mf kb mg ke mh ki mi km mj kq mb mc md me dt translated">固执🐯</li><li id="ac1a" class="lw lx hu jx b jy mf kb mg ke mh ki mi km mj kq mb mc md me dt translated">精神💃🕺</li><li id="461d" class="lw lx hu jx b jy mf kb mg ke mh ki mi km mj kq mb mc md me dt translated"><a class="ae ky" href="https://httpd.apache.org/" rel="noopener ugc nofollow" target="_blank">阿帕奇🚁</a>(或其他网络服务器)</li></ul><p id="db02" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在进入您的IDE开始编码。就我个人而言，我将使用<a class="ae ky" href="http://c9.io" rel="noopener ugc nofollow" target="_blank"> c9 </a>，因为它建立了一个快速的环境，我不必担心在线保存我的代码，因为IDE已经托管在<a class="ae ky" href="https://www.howtogeek.com/howto/32016/what-is-cloud-computing-and-what-does-this-stupid-buzzword-mean/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> <em class="ku">云</em> </strong> ☁ <strong class="jx hv"> <em class="ku">中。</em> </strong> </a></p><p id="a4dd" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">很好，现在创建两个名为<code class="eh mk ml mm mn b">js</code>和<code class="eh mk ml mm mn b">css</code>的文件夹。这些将包含我们的不同文件，将在我们的index.html(主页)使用。</p><p id="8298" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我选择的武器是终端，所以我将<em class="ku">输入</em>以下命令来让我的环境运行起来。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="840e" class="ms la hu mn b fv mt mu l mv mw">$ mkdir punhub &amp;&amp; cd punhub<br/>$ mkdir js<br/>$ mkdir css</span></pre><p id="d1e6" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在是创造我们的index.html的最佳时机。这个文件将是我们的页面结构的位置。</p><p id="79d8" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在这个文件中，你需要添加你想要显示数据的图表类型。我们将专注于建立一个网站，向我展示我正在关注的不同加密货币的价格，所以我将使用<a class="ae ky" href="https://www.pubnub.com/developers/eon/chart/spline/" rel="noopener ugc nofollow" target="_blank">样条图</a>。</p><p id="df1b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">为了让不同的组件在PubNub上工作，我们需要添加它们的javascript标签。当使用普通的HTML/JSS/CSS时，我倾向于把我所有的javascript文件放在结束的<code class="eh mk ml mm mn b">&lt;/body&gt;</code>标签的底部，因为它允许网页在抓取插入所有的javascript之前可视化地加载。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="0916" class="ms la hu mn b fv mt mu l mv mw">&lt;!-- PubNub Eon --&gt;<br/>    &lt;script type="text/javascript" src="//pubnub.github.io/eon/v/eon/1.0.0/eon.js"&gt;&lt;/script&gt;<br/>    &lt;link type="text/css" rel="stylesheet" href="//pubnub.github.io/eon/v/eon/1.0.0/eon.css"/&gt; </span></pre><p id="ee80" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">接下来，我们需要导航到我们的<code class="eh mk ml mm mn b">js</code>文件夹并创建一个名为<code class="eh mk ml mm mn b">eon.js</code>的文件。在该文件中，我们将添加所有与PubNub相关的javascript。</p><p id="640a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">PubNub的javascript流从创建一个新的PubNub对象开始。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="92c5" class="ms la hu mn b fv mt mu l mv mw">let pubnub = new PubNub({<br/>      publishKey: 'your unique key',<br/>      subscribeKey: 'your other unique key '<br/>});</span></pre><p id="3d2e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">该对象需要两个密钥。第一个键是向PubNub发送数据，第二个键是侦听来自PubNub的数据。要获得这两个密钥，我们需要创建一个新帐户，然后在PubNub仪表板中创建一个新应用程序。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mx"><img src="../Images/0cf3e423fa20d2f29f3c0037e5a2250f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RG8BU-GgWbZRzDHJuKIuVw.png"/></div></div></figure><p id="71af" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">一旦创建了新的应用程序，我们就会看到我们获得了发布密钥和订阅密钥。</p></div><div class="ab cl my mz hc na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hn ho hp hq hr"><h1 id="9cf4" class="kz la hu bd lb lc nf le lf lg ng li lj ja nh jb ll jd ni je ln jg nj jh lp lq dt translated">图表图表图表</h1><p id="c272" class="pw-post-body-paragraph jv jw hu jx b jy lr iv ka kb ls iy kd ke lt kg kh ki lu kk kl km lv ko kp kq hn dt translated">现在让我们把<em class="ku">插入</em>😌我们的图表。我们可以通过在我们的<code class="eh mk ml mm mn b">eon.js</code>文件中<a class="ae ky" href="https://en.wikipedia.org/wiki/Initialization_(programming)" rel="noopener ugc nofollow" target="_blank">初始化</a>来做到这一点。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="1782" class="ms la hu mn b fv mt mu l mv mw">eon.chart({<br/>  channels: ['crypto-chart'], //Where the data will be received from<br/>  history: true, // maintains data<br/>  flow: true,<br/>  pubnub: pubnub, //pubnub object with keys<br/>  generate: {<br/>    bindto: '#chart', // tag in html where chart will be inserted<br/>    data: {<br/>      labels: false<br/>    }<br/>  }<br/>});</span></pre><p id="eba9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当我们初始化时，我们还需要在我们的<code class="eh mk ml mm mn b">index.html</code>中创建一个连接标签，它与我们的<code class="eh mk ml mm mn b">bindto</code>中的名称具有相同的<code class="eh mk ml mm mn b">id</code>。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="a16f" class="ms la hu mn b fv mt mu l mv mw">&lt;div id='chart'&gt;<br/>    Spline chart<br/>&lt;/div&gt;</span></pre><p id="9ee3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">好了，我们的图表运行了，但是没有数据。</p><p id="e0d7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这就是我们的publish键发挥作用的地方，因为我们可以开始将数据发布到我们的PubNub通道。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="c6c7" class="ms la hu mn b fv mt mu l mv mw">$.getJSON( "<a class="ae ky" href="https://min-api.cryptocompare.com/data/price?fsym=USD&amp;tsyms=XVG,TRON,ZIL,DGB" rel="noopener ugc nofollow" target="_blank">https://min-api.cryptocompare.com/data/price?fsym=USD&amp;tsyms=XVG,TRON,ZIL,DGB</a>", function( json ) {<br/>      var dateCurrent = new Date();<br/>      var dateMilli = dateCurrent.getTime();<br/>      <br/>      pubnub.publish({<br/>        channel: 'crypto-chart',<br/>        message: <br/>          {"eon":{<br/>            "XVG": json.XVG,<br/>            "TRON": json.TRON,<br/>            "ZIL": json.ZIL,<br/>            "DGB": json.DGB,<br/>            "_eonDatetime": dateMilli<br/>            }<br/>          }<br/>        });<br/>    })</span></pre><p id="e88f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在，正在从一个<a class="ae ky" href="http://searchmicroservices.techtarget.com/definition/RESTful-API" rel="noopener ugc nofollow" target="_blank"> REST api </a>中获取数据，并以可读格式(由PubNub定义)将数据发送到我们的通道。但是它只发送一次数据，我们想要实时的、不断更新的数据，所以在同一个<code class="eh mk ml mm mn b">eon.js</code>文件中，我们可以添加一个间隔，继续无限期地获取数据。</p><pre class="jk jl jm jn fq mo mn mp mq aw mr dt"><span id="c470" class="ms la hu mn b fv mt mu l mv mw">setInterval(() =&gt; {<br/>    $.getJSON( "<a class="ae ky" href="https://min-api.cryptocompare.com/data/price?fsym=USD&amp;tsyms=XVG,TRON,ZIL,DGB" rel="noopener ugc nofollow" target="_blank">https://min-api.cryptocompare.com/data/price?fsym=USD&amp;tsyms=XVG,TRON,ZIL,DGB</a>", function( json ) {<br/>      var dateCurrent = new Date();<br/>      var dateMilli = dateCurrent.getTime();<br/>      <br/>      pubnub.publish({<br/>        channel: 'crypto-chart',<br/>        message: <br/>          {"eon":{<br/>            "XVG": json.XVG,<br/>            "TRON": json.TRON,<br/>            "ZIL": json.ZIL,<br/>            "DGB": json.DGB,<br/>            "_eonDatetime": dateMilli<br/>            }<br/>          }<br/>        });<br/>    })<br/>},2000)</span></pre><p id="1404" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">你有它！我们以极低的延迟运行完全实时的图表。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nk"><img src="../Images/10be377b3ae46d16d4137b8fadfadc1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_NZp7bVy4R7TRdsJhuOJUw.gif"/></div></div><figcaption class="nl nm fg fe ff nn no bd b be z ek">Goodboy!!!</figcaption></figure><h1 id="0e7c" class="kz la hu bd lb lc ld le lf lg lh li lj ja lk jb ll jd lm je ln jg lo jh lp lq dt translated">展望未来👀</h1><p id="a844" class="pw-post-body-paragraph jv jw hu jx b jy lr iv ka kb ls iy kd ke lt kg kh ki lu kk kl km lv ko kp kq hn dt translated">我正在我的<a class="ae ky" href="https://hackernoon.com/tagged/github" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上发布代码，所以请随意添加到这个项目中并改进它。您可以添加的一些点可能是连接到一个api，该API提供了一个更新的数字，或者允许用户选择他们可以查看的货币。</p><p id="5824" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">还有其他来自<a class="ae ky" href="https://hackernoon.com/tagged/pubnub" rel="noopener ugc nofollow" target="_blank"> PubNub </a>的制作图表的选项，你可以在这里查看<a class="ae ky" href="https://www.pubnub.com/developers/eon/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="dd97" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这里可以看到我的<a class="ae ky" href="https://punhub-analytics-stackezz.c9users.io/index.html" rel="noopener ugc nofollow" target="_blank">PunHub</a>。</p><p id="1a65" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你有任何问题，欢迎来信。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="np nq l"/></div></figure></div></div>    
</body>
</html>