<html>
<head>
<title>The Fibonacci Sequence to the nᵗʰ number (Python &amp; JavaScript)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">nᵗʰ数的斐波纳契数列(Python和JavaScript)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-fibonacci-sequence-to-the-n%E1%B5%97%CA%B0-number-python-javascript-b77f591b210b?source=collection_archive---------3-----------------------#2018-03-10">https://medium.com/hackernoon/the-fibonacci-sequence-to-the-n%E1%B5%97%CA%B0-number-python-javascript-b77f591b210b?source=collection_archive---------3-----------------------#2018-03-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/96d0aa2d670dbc5d562bf976d13fd568.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JlTnls5KdRj0ALAO.jpg"/></div></div></figure><div class=""/><p id="9e79" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">程序员经常使用编码问题来提高他们的技能，测试他们的知识，或者为技术面试做准备。这些问题中有许多是基于数学的，而基于数学的最常见的技术挑战之一就是处理斐波纳契数列。</p><p id="e119" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">斐波纳契数列中的每一个新项都是通过将前两项相加而生成的。例如，从1和2开始，序列中的前10个数字是:</p><p id="b879" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt">1, 2, 3, 5, 8, 13, 21, 34, 55, 89…</p><p id="1e87" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我最喜欢的处理斐波纳契数列的挑战之一是，要求数列中某个任意高的数字的索引值。例如，假设我们想要获取包含1000个数字的第一个斐波纳契数的索引值。</p><p id="792f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通常，一个简单的方法是把所有的数字放在一个数组中，然后用for循环遍历它们。在for循环中，一旦我们到达一个有1000位的数字，我们将简单地获取那个索引或数字。我们的代码可能如下所示:</p><figure class="kb kc kd ke fq hw fe ff paragraph-image"><div class="fe ff ka"><img src="../Images/e96d98d6787d9c7e6866a634626c3203.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*DCmmr2gq_XUlV-e_elgMYA.png"/></div></figure><p id="9a52" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，这不是一个特别好的主意，有几个原因。首先，它需要两种不同的功能。一个生成斐波纳契数列的函数。第二个函数循环遍历我们生成的所有数字。此外，这样做可能会占用大量内存。作为一个稍微好一点的选择，我们可以使用while循环，并在while循环中生成序列，但是如果我们到达一个长度为1000的数字，就结束循环。此外，如果我们想要的只是一个数字或它的索引，那么我们实际上不需要创建任何其他数字的数组。</p><p id="4950" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下面是我们如何在Python和JavaScript中使用这种类型的解决方案:</p><h1 id="eda1" class="kf kg if bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">Python:</h1><p id="5dd4" class="pw-post-body-paragraph jc jd if je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">我们将从创建变量开始，这些变量将代表斐波那契数列中的数字:</p><pre class="kb kc kd ke fq li lj lk ll aw lm dt"><span id="c557" class="ln kg if lj b fv lo lp l lq lr">a = 1<br/>b = 1<br/>c = a + b</span></pre><p id="1e6d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我们将再创建两个变量，一个用于<code class="eh ls lt lu lj b">count</code>，另一个用于<code class="eh ls lt lu lj b">length</code>。由于我们实际上并不想创建一个列表或数组，我将使用<code class="eh ls lt lu lj b">count</code>来递增每个值。这样，我存储的是一个数字，它代表索引值，而不是一个数组，我必须通过循环来获得索引值。<code class="eh ls lt lu lj b">length</code>变量是我用来结束for循环的。我将初始值设为长度3。然后我会找到每个新的斐波纳契数的值，如果该数的当前值大于<code class="eh ls lt lu lj b">length</code>变量，那么我会将长度<code class="eh ls lt lu lj b">variable</code>的值设置为新的数。我的while循环条件是<code class="eh ls lt lu lj b">length</code>变量将小于或等于<code class="eh ls lt lu lj b">999</code>。这是我的两个变量:</p><pre class="kb kc kd ke fq li lj lk ll aw lm dt"><span id="77e7" class="ln kg if lj b fv lo lp l lq lr">count = 0<br/>length = 'aaa'</span></pre><p id="4608" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里是while循环:</p><pre class="kb kc kd ke fq li lj lk ll aw lm dt"><span id="6768" class="ln kg if lj b fv lo lp l lq lr">while len(length) &lt;= 999:<br/>    a = b<br/>    b = c<br/>    c = a + b<br/>    count = count + 1<br/>    str1 = str(c)<br/>    if len(str1) &gt; len(length):<br/>        length = str1</span></pre><p id="7d85" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此时，当我找到第一个1000位数时，while循环将结束。如果我想要那个数字的索引，那么我可以打印变量<code class="eh ls lt lu lj b">count</code>。或者，如果我想要<code class="eh ls lt lu lj b">number</code>本身，我可以打印<code class="eh ls lt lu lj b">length</code>，它将那个<code class="eh ls lt lu lj b">number</code>存储为一个<code class="eh ls lt lu lj b">string</code>。</p><pre class="kb kc kd ke fq li lj lk ll aw lm dt"><span id="ba9c" class="ln kg if lj b fv lo lp l lq lr">print length<br/>print count<br/>[Finished in 0.09s]</span></pre><p id="b34b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">很酷吧？</p><h1 id="4edf" class="kf kg if bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">JavaScript:</h1><p id="6686" class="pw-post-body-paragraph jc jd if je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">现在你完蛋了。从技术上讲，我们可以使用第一个例子中使用的相同代码。或者，我们可以改变它，做一些类似于我之前描述的不要做的事情。该代码可能如下所示:</p><pre class="kb kc kd ke fq li lj lk ll aw lm dt"><span id="1d13" class="ln kg if lj b fv lo lp l lq lr">let x = [];<br/>let a = 1;<br/>let b = 1;<br/>let c = a + b;<br/>while (x.length &lt; 5000){<br/>  a = b;<br/>  b = c;<br/>  c = a + b;<br/>  x.push(c);<br/>  }<br/>let val = [];<br/>for (var i = 0; i &lt; x.length; i++) {<br/>  let str1 = x[i].length;<br/>  if (x[i].length == 1000){<br/>    val.push([x[i], i])<br/>  }<br/>}<br/>console.log(val);</span></pre><p id="037c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，无论哪种方式，你都会很快遇到问题。任何长于15或16位的数字，JavaScript通常不会正确处理它。这是因为JavaScript使用IEEE-754 双精度(64位)格式表示数字。据我所知，这给你53位精度，或15至16位十进制数字。JavaScript中的所有数字都是浮点数，这意味着整数总是表示为</p><blockquote class="lw lx ly"><p id="e62d" class="jc jd lz je b jf jg jh ji jj jk jl jm ma jo jp jq mb js jt ju mc jw jx jy jz hn dt translated"><em class="if">符号×尾数×2指数</em></p></blockquote><p id="f9c3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">尾数有53位。您可以使用指数来获得更高的整数，但是它们将不再是连续的。例如，您通常需要将尾数乘以2(指数1)才能达到第54位。但是，如果乘以2，则只能表示每隔一个整数:</p><pre class="kb kc kd ke fq li lj lk ll aw lm dt"><span id="d51d" class="ln kg if lj b fv lo lp l lq lr">&gt; Math.pow(2, 53)  // 54 bits<br/>    9007199254740992<br/>    &gt; Math.pow(2, 53) + 1<br/>    9007199254740992<br/>    &gt; Math.pow(2, 53) + 2<br/>    9007199254740994<br/>    &gt; Math.pow(2, 53) + 3<br/>    9007199254740996<br/>    &gt; Math.pow(2, 53) + 4<br/>    9007199254740996</span></pre><p id="ee81" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">加法过程中的舍入效应使得奇数增量(+1对+3)变得不可预测。实际的表示有点复杂[1]，但是这个解释应该有助于你理解基本问题。</p><h1 id="2a1d" class="kf kg if bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论:</h1><p id="57d0" class="pw-post-body-paragraph jc jd if je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">如果你遇到类似的问题，尤其是在技术面试中，你最好尝试用JavaScript之外的东西来解决这个问题。为了让你听起来更聪明，你可以用Python来解决，然后解释JavaScript如何处理整数。</p></div></div>    
</body>
</html>