<html>
<head>
<title>Upgrade to Webpack 4 🎉</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">升级到Webpack 4🎉</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/upgrade-to-webpack-4-3ebb199aa9bf?source=collection_archive---------16-----------------------#2018-03-12">https://medium.com/hackernoon/upgrade-to-webpack-4-3ebb199aa9bf?source=collection_archive---------16-----------------------#2018-03-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/8df06c1227b1869a7d9b7f008f24c2b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pZPz5jEJwtwPiY13.png"/></div></div></figure><p id="da5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Webpack 4  <em class="ka">(代号连奏)</em>发布于两周前。它包含了许多闪亮的特性。与Webpack 3不同的是，Webpack 4有一系列引人注目的功能，web pack 3并没有对其前身进行重大升级。</p><p id="f4c1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">需要注意的主要变化-</p><p id="f2fc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 1。缩短构建时间</strong> <br/>构建时间大幅减少(超过60%)</p><p id="d6b3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 2。零配置</strong></p><p id="8690" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我最近将我的<a class="ae kb" href="https://github.com/flexdinesh/react-redux-boilerplate" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> React-Redux样板文件</strong> </a>升级为<strong class="je hv"> Webpack 4 </strong>。目前还没有明确的迁移文档，所以我花了相当多的时间和精力来完成升级。我写下我想出的一切，这样可以帮助任何想升级的人。</p><p id="b8c1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是需要完成的配置更改。</p><ul class=""><li id="35a8" class="kc kd hu je b jf jg jj jk jn ke jr kf jv kg jz kh ki kj kk dt translated">方式</li><li id="65b9" class="kc kd hu je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">插件</li><li id="5e7d" class="kc kd hu je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">属国</li></ul><h1 id="4ae5" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">方式</h1><p id="2822" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">Webpack 4有两种模式——<em class="ka">开发</em>和<em class="ka">生产</em>。</p><p id="5aea" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">之前，我们将标志<code class="eh lt lu lv lw b">-p</code>传递给webpack命令来运行生产构建。对于Webpack 4，您应该总是传入<code class="eh lt lu lv lw b">mode</code>选项。你有两种方法通过mode，</p><h1 id="d615" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">1.通过npm脚本</h1><p id="5426" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">在你的<code class="eh lt lu lv lw b">package.json</code>—</p><pre class="lx ly lz ma fq mb lw mc md aw me dt"><span id="841a" class="mf kr hu lw b fv mg mh l mi mj">"build": "webpack --config config/webpack.dev.config.js --mode development" "build:prod": "webpack --config config/webpack.prod.config.js --mode production"</span></pre><h1 id="f1f6" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">2.传递配置文件</h1><p id="f73f" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">在你的<code class="eh lt lu lv lw b">webpack.dev.config.js</code></p><pre class="lx ly lz ma fq mb lw mc md aw me dt"><span id="cda2" class="mf kr hu lw b fv mg mh l mi mj">mode: 'development'</span></pre><p id="03a0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在你的<code class="eh lt lu lv lw b">webpack.prod.config.js</code></p><pre class="lx ly lz ma fq mb lw mc md aw me dt"><span id="02b5" class="mf kr hu lw b fv mg mh l mi mj">mode: 'production'</span></pre><h1 id="625a" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">插件</h1><p id="b0cf" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">以下插件已从Webpack 4中删除，这些插件在以前的版本中广泛使用。</p><ul class=""><li id="8d64" class="kc kd hu je b jf jg jj jk jn ke jr kf jv kg jz kh ki kj kk dt translated">NoEmitOnErrorsPlugin</li><li id="0f3d" class="kc kd hu je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">ModuleConcatenationPlugin</li><li id="ff03" class="kc kd hu je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">命名模块插件</li><li id="9b54" class="kc kd hu je b jf kl jj km jn kn jr ko jv kp jz kh ki kj kk dt translated">CommonsChunkPlugin</li></ul><p id="4f78" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，这些插件的配置应该放在<code class="eh lt lu lv lw b">config file</code>中的键<code class="eh lt lu lv lw b">optimization</code>内，并带有相应的选项。</p><p id="4f6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个片段可能会给你更多的信息</p><pre class="lx ly lz ma fq mb lw mc md aw me dt"><span id="66dc" class="mf kr hu lw b fv mg mh l mi mj">plugins: [</span><span id="7604" class="mf kr hu lw b fv mk mh l mi mj">// Not used like this anymore</span><span id="7a3c" class="mf kr hu lw b fv mk mh l mi mj">new webpack.NamedModulesPlugin(),<br/>  new webpack.NoEmitOnErrorsPlugin(),<br/>  new webpack.optimize.CommonsChunkPlugin({<br/>    name: 'vendor',<br/>      children: true,<br/>      minChunks: 2,<br/>      async: true, <br/>    }),<br/>  new webpack.optimize.ModuleConcatenationPlugin()</span><span id="c0dd" class="mf kr hu lw b fv mk mh l mi mj">],</span><span id="7b52" class="mf kr hu lw b fv mk mh l mi mj">Instead, the above plugins are used like this</span><span id="fe1d" class="mf kr hu lw b fv mk mh l mi mj">optimization: {<br/>  <br/>  namedModules: true, // NamedModulesPlugin()</span><span id="3299" class="mf kr hu lw b fv mk mh l mi mj">splitChunks: { // CommonsChunkPlugin()<br/>    name: 'vendor',<br/>    minChunks: 2<br/>  },</span><span id="05c4" class="mf kr hu lw b fv mk mh l mi mj">noEmitOnErrors: true, // NoEmitOnErrorsPlugin</span><span id="461a" class="mf kr hu lw b fv mk mh l mi mj">concatenateModules: true //ModuleConcatenationPlugin<br/>}</span></pre><h1 id="e6e6" class="kq kr hu bd ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln dt translated">属国</h1><p id="97de" class="pw-post-body-paragraph jc jd hu je b jf lo jh ji jj lp jl jm jn lq jp jq jr lr jt ju jv ls jx jy jz hn dt translated">如果您正在使用像<code class="eh lt lu lv lw b">webpack-hot-middleware</code>和<code class="eh lt lu lv lw b">image-webpack-loader</code>这样的依赖项，请确保您也升级了它们。我在使用<code class="eh lt lu lv lw b">webpack-hot-middleware</code>时遇到了一个奇怪的问题，但是当我把它升级到最新版本时，它就自动解决了。</p><p id="c679" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">可以参考<a class="ae kb" href="https://github.com/flexdinesh/react-redux-boilerplate" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> React-Redux样板</strong> </a>中的这个<a class="ae kb" href="https://github.com/flexdinesh/react-redux-boilerplate/commit/69dc839ad84c37b170e4c3d6f1f8ecb735fc2791" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> commit </strong> </a>进行参考。</p><p id="7d84" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Webpack 4在很多方面都很棒。但是缺少升级文件是一件令人沮丧的事情。但是，我们都是了不起的问题解决者，所以我们不介意。</p><p id="7a74" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您计划升级到Webpack 4，不要犹豫，您的开发体验肯定会成倍增加。上帝速度！</p><p id="8b6e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">祝您愉快！✨</p></div><div class="ab cl ml mm hc mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hn ho hp hq hr"><p id="b878" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">原载于</em> <a class="ae kb" href="https://dev.to/flexdinesh/upgrade-to-webpack-4---5bc5" rel="noopener ugc nofollow" target="_blank"> <em class="ka"> dev.to </em> </a> <em class="ka">。</em></p></div></div>    
</body>
</html>