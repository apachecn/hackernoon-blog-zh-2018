<html>
<head>
<title>💊Deep Learning in medicine: advancing medical image analysis with Supervisely</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">💊医学中的深度学习:在监督下推进医学图像分析</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deep-learning-in-medicine-advancing-medical-image-analysis-with-supervisely-33e936159206?source=collection_archive---------8-----------------------#2018-03-14">https://medium.com/hackernoon/deep-learning-in-medicine-advancing-medical-image-analysis-with-supervisely-33e936159206?source=collection_archive---------8-----------------------#2018-03-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="ca9c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你好世界！</p><p id="4285" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">1895年12月，威廉·伦琴在第一张x光照片中展示了他妻子的手骨。“我已经看到了我的死亡，”她说。这一突破对20世纪的医疗产生了不可思议的影响。最新的深度学习进展为该领域开辟了新的可能性。</p><p id="93b7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">深度学习在计算机视觉和其他领域取得了巨大成功。现在，它正在积极改变医学界。人工智能帮助医生更快地做出更准确的诊断。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff jq"><img src="../Images/181e8da46e59a690064ee6c830e93f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*LbimdjozE1-BjVQkHSHYag.jpeg"/></div></figure><p id="202d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">今天，我们想分享我们对一个非常有前途的方向的思考和研究:在单一环境中进行医学图像分析的人在回路人工智能— <a class="ae jp" href="https://supervise.ly" rel="noopener ugc nofollow" target="_blank">监督</a>。</p><p id="4796" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的平台允许管理和注释数据，训练神经网络，应用它们进行自动预注释，然后将它们部署为API。</p><h1 id="28f4" class="jy jz hu bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">医学影像面临的挑战</h1><p id="8477" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">IBM的研究人员<a class="ae jp" href="https://www.healthcare-informatics.com/news-item/analytics/ibm-unveils-watson-powered-imaging-solutions-rsna" rel="noopener ugc nofollow" target="_blank">估计</a>医学图像作为医疗保健行业中最大和增长最快的数据源，至少占所有医学数据的90%。</p><p id="bb59" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">挑战1:数据隐私</strong></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lb"><img src="../Images/1af6bf0c19f8843a2e7c4fca04c7391f.png" data-original-src="https://miro.medium.com/v2/resize:fit:850/1*rsvHJW61nzSDbgazGgKiOg.gif"/></div></figure><blockquote class="lc ld le"><p id="8eaf" class="ir is lf it b iu iv iw ix iy iz ja jb lg jd je jf lh jh ji jj li jl jm jn jo hn dt translated">医疗数据仍然是个人的，不容易获得。由于数据隐私问题，大多数公共卫生中心不愿意共享数据。</p></blockquote><p id="466f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">挑战2:注释数据的大小</strong></p><p id="b7a5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注释过程很难外包，只有专业医师才能分析医学图像。这种限制导致高成本和缺乏注释数据。</p><p id="2f7e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">挑战3:注释工具的质量</strong></p><p id="ff67" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">可用于从医学图像中提取见解的注释工具仍然有限，在大多数情况下无法公开获得，并且需要手动完成大多数分析。</p><p id="082b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">挑战4(1和2的结果):分段挑战</strong></p><p id="87a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与常见图像(COCO、PascalVoc等)的大型公共数据集相比，用于分割任务的数据集通常非常小。由于数据集的大小，很难训练非常深的神经网络架构。感兴趣的对象可以在大小、形状和位置上变化。与“软”边界相结合，它产生了额外的问题。</p><h1 id="cdef" class="jy jz hu bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">我们的目标</h1><p id="79f7" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">我们将克服挑战3和挑战4:为行业提供端到端的解决方案，使人类专家更加高效，并利用强大的人工智能技术自动化日常任务。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lj"><img src="../Images/0a49a67e26a0c3db6f32447d406b8d88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gi5bLXKQ3cE-Bn044_37Mg.png"/></div></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">Supervisely: user interfaces</figcaption></figure><p id="d83b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们意识到还有很多工作要做:增加方便的注释工具的数量，增加对DICOM格式、三维图像、图像序列等的支持。但这些只是技术问题，初步措施已经完成，并取得了可喜的成果。</p><p id="ef8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们热衷于加速医学发展，并很高兴成为推动医疗保健深度学习革命的全球研究社区的一员。</p><blockquote class="ls"><p id="9f1f" class="lt lu hu bd lv lw lx ly lz ma mb jo ek translated">这种新能力(深度学习)最重要的应用莫过于改善病人护理</p><p id="b2d7" class="lt lu hu bd lv lw lx ly lz ma mb jo ek translated">—英伟达首席执行官兼联合创始人黄仁勋</p></blockquote><h1 id="b7e6" class="jy jz hu bd ka kb kc kd ke kf kg kh ki kj mc kl km kn md kp kq kr me kt ku kv dt translated">案例研究:视网膜图像中的血管分割</h1><p id="299e" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">在成像领域有很多深度学习医疗应用:肿瘤检测、跟踪肿瘤发展、血流量化和可视化、牙科放射学等等。</p><p id="cc1b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因为我们不是医生，所以我们寻找我们或多或少了解的数据。这就是我们决定对血管分割进行研究的原因。让我们来看看这个领域最流行的公共数据集之一:<a class="ae jp" href="http://cecas.clemson.edu/~ahoover/stare/" rel="noopener ugc nofollow" target="_blank"> STARE </a>(视网膜的结构化分析)。</p><p id="72e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">数据集包含28幅带注释的图像，分辨率为999 × 960。我们考虑在训练数据集中只有<strong class="it hv"> 6幅注释图像的情况。其他图像将用于质量的最终评估。所有训练图像如下:</strong></p><div class="jr js jt ju fq ab cb"><figure class="mf jv mg mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/bf477b59dda7a7155b8e7bbf6f08a0dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*wblmMMwEtkFt3tv4KcRMmA.png"/></div></figure><figure class="mf jv mg mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/a7878e6bc60c06f8b3560341febba4f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*HeKPsNVobghc02gc_E4T4Q.png"/></div></figure><figure class="mf jv mg mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/3300171065dcab8bb0d0f00d4c92aae6.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/format:webp/1*ExrDMz6Fs-kBJ-fyJGcojQ.png"/></div></figure></div><div class="ab cb"><figure class="mf jv ml mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/dc84066857ac5bf455a3b19955672570.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*HFc_Gc2InknUuTEuxbpK4A.png"/></div></figure><figure class="mf jv ml mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/c4279e016b3301f3473719440f152a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/format:webp/1*Ly5S7dV0Y-g002gsA_t5sg.png"/></div></figure><figure class="mf jv mm mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/3146d6db9fbb07645e522ebf1f88bd80.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*gKxQv-2I3BQg1h2qw24m5Q.png"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek mn di mo mp">Here is the whole training dataset we use.</figcaption></figure></div><p id="d8d3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个场景非常接近真实世界:医生注释一些图像，然后神经网络根据这些数据进行训练，并应用于其他图像进行预分割。然后医生只是纠正神经网络的预测。</p><p id="49c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这种方法被称为人工智能中的人。其目的是显著提高人类专家的效率。</p><p id="a5c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">PS。感谢监督，整个研究花了两个小时，没有匆忙☕.</p><h2 id="ffc4" class="mq jz hu bd ka mr ms mt ke mu mv mw ki jc mx my km jg mz na kq jk nb nc ku nd dt translated">步骤1:训练数据扩充</h2><p id="29d7" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">我们只有6张带注释的图片。为了训练神经网络，我们必须自动增加数据集的大小。超级有特殊的模块来执行扩充:DTL(数据转换语言)。它允许以一种简单的基于json的格式配置整个增强过程，并且只需点击几下鼠标就可以完成。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff ne"><img src="../Images/1641d0f99bb95132234b7e45b326e76f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sJc-ew5d80IE-R3UGeTYig.png"/></div></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">How DTL query interface looks like</figcaption></figure><p id="7c12" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这个用例中，我们做了水平/垂直翻转和相对较大的随机裁剪。我们仅从6幅带注释的图像中获得了264个训练样本。这是我们应用于数据的计算图的可视化:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff nf"><img src="../Images/7da8846e0558ef9867570615cb0b7919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rzjcqTky7ANzcG5T9pgr0A.png"/></div></div></figure><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/ce1ef4d8ed806e0b9a88be6ab17affcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1240/format:webp/1*f6zT4iSVggX8M32kYHNGFA.jpeg"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">Resulted crops after augmentation</figcaption></figure><h2 id="87de" class="mq jz hu bd ka mr ms mt ke mu mv mw ki jc mx my km jg mz na kq jk nb nc ku nd dt translated">第二步:训练神经网络</h2><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff nh"><img src="../Images/9dfde4b822b706d55a59b32275642f17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_XPUdMsSrtz-K9cgAicAMA.png"/></div></div></figure><p id="9ba4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">目前用于监督语义分割的神经网络很少。其中之一是我们的定制UNet式建筑。之所以选择它，是因为:我们的训练数据集很小，训练起来既准确又快速。此外，由于类别不平衡问题，我们使用二元交叉熵和骰子损失的组合。与背景像素相比，血管像素只占图像区域的很小一部分。</p><p id="b599" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们训练了NN 50个纪元。在训练期间可视化神经网络预测是有趣的。我们采取看不见的图像，并在每个时期后应用神经网络。在这里，您可以看到我们的神经网络如何随着时间的推移变得更加智能。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff ni"><img src="../Images/b0d6855111702654edeede0202284ecd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*d9m3ku5vEnemSCxbD29iFA.gif"/></div></div></figure><p id="961e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">超级支持多GPU训练。每个历元在四个GPU上花费大约20秒。总训练时间——大约17分钟。</p><h2 id="1cb7" class="mq jz hu bd ka mr ms mt ke mu mv mw ki jc mx my km jg mz na kq jk nb nc ku nd dt translated">第三步:自动预分割</h2><p id="6a3e" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">我们将神经网络应用于新图像。让我们将预测与现实进行比较。</p><div class="jr js jt ju fq ab cb"><figure class="mf jv nj mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/dac289e9358ed090f22f1becf6a35a56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*8aQM9B3XgT0IiR7-kt0FZA.png"/></div></figure><figure class="mf jv nj mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/85016371c5f9ed1fd7b9fb3d658d44a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*9V09xyOotCPARcupMbwiOA.png"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek nk di nl mp"><strong class="bd nm">Left</strong>: NN predictions, <strong class="bd nm">Right</strong>: ground truth</figcaption></figure></div><p id="a026" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从这个比较中可以看出，每一个相对粗的血管都是分段的。没有噪音。这意味着人类只需要用“折线”工具画几条细线。</p><p id="3153" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，据我们所知，真实数据比我们在这个实验中使用的公开数据具有更高的分辨率。我们认为这个事实对于发际线分割的质量是至关重要的。公开图像的分辨率是不够的。看看这个例子:你看到医生标注的血管了吗？</p><div class="jr js jt ju fq ab cb"><figure class="mf jv nn mh mi mj mk paragraph-image"><img src="../Images/bf29b4cc802906aee2151af1cdcd55e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/1*y0vj9JQW2e_kJQurYxzh-Q.gif"/></figure><figure class="mf jv no mh mi mj mk paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><img src="../Images/0dad773a59617629acc1e1201068fc5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*GLNkSeHFHSJy0cq5ySM4Fw.png"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek np di nq mp">Left: meme, Middle: original image, Right: doctor’s annotation</figcaption></figure></div><h2 id="ed82" class="mq jz hu bd ka mr ms mt ke mu mv mw ki jc mx my km jg mz na kq jk nb nc ku nd dt translated">第四步:手动校正</h2><p id="f664" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">正如你从上面的图片中看到的，自动预注释的质量非常好。这是更容易和更快地纠正神经网络预测比从零开始手工注释。</p><p id="cb3c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们并不懒惰，并做了时间测量:从零开始手工注释和校正神经网络预测需要多少时间。从零开始手动标注:<strong class="it hv"> 36分钟/图</strong>。NN预测的修正:<strong class="it hv"> 4分钟/张</strong>。</p><p id="05be" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">结论很明显。</p><h1 id="6b9b" class="jy jz hu bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">最后的想法</h1><p id="c8d3" class="pw-post-body-paragraph ir is hu it b iu kw iw ix iy kx ja jb jc ky je jf jg kz ji jj jk la jm jn jo hn dt translated">深度学习在医学图像分析方面潜力巨大。人工智能正在改变医生诊断疾病的方式。</p><p id="8304" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">医生和深度学习算法之间的主要重要区别是医生必须睡觉。神经网络可以处理数百万幅图像，并且可以不断改进。</p><p id="e5d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">“人在回路”的方法和有监督的自动分段将让我们更快地创建大型数据集。所有步骤无需编码即可完成。这意味着没有人工智能背景的用户可以接触到最先进的人工智能。所以ML社区将建立更多的服务来帮助医生提供更好更快的治疗。</p><p id="3d5c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们一起创造未来。</p></div><div class="ab cl nr ns hc nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hn ho hp hq hr"><p id="85ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你觉得这篇文章很有趣，那么让我们也来帮助别人吧。如果你给它一些，更多的人会看到它👏。</p></div></div>    
</body>
</html>