<html>
<head>
<title>Supercharge your ARKit Interior Design App with a “Resume Session” feature.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用“恢复会话”功能增强ARKit室内设计应用程序的性能。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/supercharge-your-arkit-interior-design-app-with-a-resume-session-feature-9da31252a266?source=collection_archive---------13-----------------------#2018-03-14">https://medium.com/hackernoon/supercharge-your-arkit-interior-design-app-with-a-resume-session-feature-9da31252a266?source=collection_archive---------13-----------------------#2018-03-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="37a6" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">如何为持续会话重新设计AR应用程序？</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/cf694c62a9b27e5605651347e2c545d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MURAmVO9rDPM3Fr48tHmSA.jpeg"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">IKEA Place was one of the first ARKit app on the iOS app store</figcaption></figure><p id="429c" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">App Store上发布的第一批ARKit应用程序之一是<a class="ae kv" href="https://itunes.apple.com/ca/app/ikea-place/id1279244498?mt=8" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv"/><em class="kw">IKEA Place</em></a>，这是一款家具购物应用程序，让人们在购买之前用宜家的家具目录虚拟设计自己的家。</p><p id="c569" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">从那时起，家具和家居装饰的产品可视化已经成为手机上最受欢迎的ar应用之一，甚至Lowe's和亚马逊等大型零售商也加入了实验，尝试AR的力量来影响消费者的家具购物行为。</p><p id="c9ef" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><em class="kw">如果你从未尝试过这些应用程序，请查看</em><strong class="kb hv"><em class="kw"/></strong><a class="ae kv" href="https://itunes.apple.com/ca/app/ikea-place/id1279244498?mt=8" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv"><em class="kw">宜家家居</em></strong></a><strong class="kb hv"><em class="kw"/></strong><em class="kw">或</em><a class="ae kv" href="https://itunes.apple.com/ca/app/housecraft/id1261483849?mt=8" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv"><em class="kw">house craft</em></strong></a><strong class="kb hv"><em class="kw">。</em> </strong></p><h1 id="ec0d" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">那么什么是“恢复会话”问题呢？</h1><p id="5b7f" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">“恢复会话”问题指的是当今市场上所有AR室内设计应用程序面临的一个共同问题——他们没有办法从一个应用程序会话到下一个应用程序会话保存放置在物理位置的虚拟家具的位置。这意味着每当用户意外或有意关闭应用程序时，他们就会失去所有进展，需要从头开始重新设计他们的空间！</p><p id="f5e2" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv">这篇文章是关于为什么这是当前应用程序的一个问题，以及你如何使用ARKit的一个新的SDK潜在地解决这个问题——</strong><a class="ae kv" href="https://placenote.com" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv">place note SDK</strong></a><strong class="kb hv">。</strong></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/8415e49cce9f3dd919a278074166f6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fFtXhmBgBZ-gD5n4zBisHQ.gif"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Placenote SDK enables the persistent placement of AR content in any physical space.</figcaption></figure><p id="ef32" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">首先，我们先来看看一个基础的AR室内设计app是如何搭建的。</p><h1 id="4c84" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">AR室内设计应用是如何工作的？</h1><p id="50ce" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">这些应用程序基本上是通过让你在AR中虚拟地将3D家具模型放在你周围的平面上来工作的。因此，如果你想买一张新沙发，你可以从不同的角度看看它会是什么样子，想象一下沙发的颜色和尺寸是否适合你的房间。</p><p id="db87" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">要了解这些应用在技术层面上是如何工作的，你需要了解如何构建一个简单的基于ARKit的iOS应用，该应用可以检测水平面并在其上放置3D对象。如果你是这方面的新手，<a class="ae kv" href="https://www.appcoda.com/arkit-horizontal-plane/" rel="noopener ugc nofollow" target="_blank">这里有一个很棒的教程</a>会告诉你如何构建它。</p><p id="36e5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">一旦你可以建立一个可以在平面上放置3D物体的应用程序，你就可以简单地用椅子的模型来代替3D物体，<a class="ae kv" href="https://poly.google.com/view/88nXdqyGV06" rel="noopener ugc nofollow" target="_blank">，就像这个</a>。</p><p id="4d24" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">现在，在一个非常基础的层面上，每个家具应用程序都有两个主要组件</p><p id="7ee6" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv"> 1。在平面上放置和移动3D模型的界面<br/> </strong> ARKit可以轻松检测平面，并让您在其上放置3D对象。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/6ef70d258a9472d84e9d6d0f7dff415a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*QtNWl0cgrT7XX_V-OsRuTw.gif"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Screen record of furniture placement in <a class="ae kv" href="http://www.housecraftapp.com/" rel="noopener ugc nofollow" target="_blank">Housecraft on the App Store</a></figcaption></figure><p id="c989" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb hv"> 2。家具零售商通常会提供一份3D模型目录，供您从<br/> </strong> 3D模型中选择。为了原型制作，你可以使用来自网站的免费3D模型，比如<a class="ae kv" href="http://sketchfab.com" rel="noopener ugc nofollow" target="_blank"> Sketchfab </a>、<a class="ae kv" href="http://poly.google.com" rel="noopener ugc nofollow" target="_blank"> Google Poly </a>或<a class="ae kv" href="http://turbosquid.com" rel="noopener ugc nofollow" target="_blank"> Turbosquid </a>。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff lv"><img src="../Images/4b261d4fa49835e8ed12ddf5d5d6b6d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-sDRBUChaMRTqjx4DaOZLw.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">3D models from <a class="ae kv" href="http://poly.google.com" rel="noopener ugc nofollow" target="_blank">Google Poly</a></figcaption></figure><p id="ddb8" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这些元素的结合是目前App Store上所有室内设计应用的基础，虽然其中许多设计精美，使用有趣，<strong class="kb hv">但目前所有这些应用都有一个大问题。</strong></p><h1 id="f6a1" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">房间里的大象</h1><p id="f4b9" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">如果你在iPhone或iPad上尝试过这些应用，你会觉得很熟悉。你煞费苦心地在房间周围添加各种家具，将它们正确排列，并选择与你的装饰相匹配的颜色。在虚拟装饰你的房间15分钟后，如果你不小心(或故意)关闭应用程序并再次打开它…然后<strong class="kb hv">噗</strong>，你的设计已经消失，你需要再次重做一切。不仅如此，你还不能把这些设计分享给任何人，除了拍一张AR场景的照片或视频。</p><p id="33fe" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">从UX的角度来看，这不是一个很好的体验，因为大多数视觉设计工具的两个主要功能是保存和恢复进度以及与他人合作。</p><p id="7233" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">所以，让我们从技术角度来探究一下问题是什么。</p><h1 id="497a" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">ARKit的问题是</h1><p id="b5c5" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">如果你使用过ARKit，你会知道每次打开AR应用程序时，ARKit都会在手机的当前位置设置一个任意的(0，0，0)点，并相对于该点将所有内容放置在场景中。这是因为，尽管ARKit可以检测环境中的视觉特征来跟踪手机的运动，但它没有能力“记住”这些特征。</p><p id="0ae9" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这意味着，如果对象相对于真实世界的位置很重要，则不能构建系统来保存和恢复设计会话。每次打开应用程序，你都需要重新摆放家具。在大多数用户流中，这是不必要的摩擦。</p><blockquote class="lw lx ly"><p id="e7a4" class="jz ka kw kb b kc kd iv ke kf kg iy kh lz kj kk kl ma kn ko kp mb kr ks kt ku hn dt translated">那么问题是什么呢？ARKit的问题在于，它用来跟踪运动的视觉特征不够“清晰”，不足以在每次观察一个区域时在同一个地方重复发现。</p></blockquote><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/ea8777ac4d21f56222d6763b9e3dd997.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*kP8X7Jzvqw-M1zCKcrnTEA.gif"/></div></figure><p id="c67c" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">为了在房子的特定区域保存数字内容，我们需要一种方法来永久固定AR内容在物理空间中的位置，以便每次打开应用程序时，场景的原点都会捕捉到它在现实世界中的正确绝对位置。我们姑且称这个特性为“<strong class="kb hv">持久性</strong>”。</p><blockquote class="mc"><p id="f1cc" class="md me hu bd mf mg mh mi mj mk ml ku ek translated">AR中的持久性是让数字对象在多个应用程序会话中永久保留其在现实世界中的位置的能力。</p></blockquote><p id="20ee" class="pw-post-body-paragraph jz ka hu kb b kc mm iv ke kf mn iy kh ki mo kk kl km mp ko kp kq mq ks kt ku hn dt translated"><strong class="kb hv">解决这个问题的一个办法，就是</strong><a class="ae kv" href="https://placenote.com" rel="noopener ugc nofollow" target="_blank"><strong class="kb hv"><em class="kw">Placenote SDK</em></strong></a><strong class="kb hv">。这篇文章的其余部分将教你如何构建一个室内设计应用程序，在其工作流程中加入持久会话。</strong></p><h1 id="a4c7" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">解决持久性问题</h1><p id="72f5" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">为了让数字对象在现实世界中有一个持久的位置，你的应用程序需要一些现实世界的表示(例如地图)和一种在地图上找到它的位置的方法。</p><p id="1a8b" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">像Pokemon GO这样的应用程序通过使用GPS来地理定位商店和公园等特定现实世界地标附近的Pokemon。这种地理定位足以进行粗略定位，但由于GPS非常不准确，每次打开应用程序时，内容的位置可能会偏离目标5到20米。此外，GPS不能在室内工作，而室内是大多数“室内”设计发生的地方。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff mr"><img src="../Images/cdd33fdb2aafa0083d3abad147412019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ii1EUfkQcoe6H6E1eA54OA.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Pokemon go uses GPS for geolocation with low accuracy.</figcaption></figure><p id="4323" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">Placenote SDK采用了不同的方法来解决这个问题。它不是使用GPS，而是使用一个摄像头来可视地扫描一个物理空间，并将其转化为一张地图，以供将来检索。它还使相机能够通过将当前图像与预先创建的地图进行比较，在地图中定位自己。通过这种方式，Placenote实现了一个自给自足的视觉定位系统(不需要外部信标)，最重要的是，<strong class="kb hv">可以在室内工作</strong>。</p><h1 id="04ac" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">Placenote如何进行视觉定位</h1><p id="d854" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">Placenote将定位过程分为两个主要步骤</p><ol class=""><li id="0ca0" class="ms mt hu kb b kc kd kf kg ki mu km mv kq mw ku mx my mz na dt translated"><strong class="kb hv">映射:</strong><strong class="kb hv"/>摄像机用于视觉扫描物理区域。地图绘制完成后，Placenote会将地图保存并上传到云中，并返回一个mapID，该mapID可用于重新加载地图或与多个设备共享地图。</li><li id="f524" class="ms mt hu kb b kc nb kf nc ki nd km ne kq nf ku mx my mz na dt translated"><strong class="kb hv">重新定位:</strong>使用mapID下载预先构建的地图，Placenote尝试将摄像机当前看到的图像与地图的一部分进行匹配。当找到匹配时，它会返回手机/平板电脑在该地图中的位置估计值。</li></ol><p id="6232" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><em class="kw">如果你像我一样是一个计算机视觉极客，这听起来会很熟悉。(SLAM)。</em></p><p id="41f5" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这个系统虽然基本上是无缝的，但可能会稍微改变用户工作流的设计。<strong class="kb hv">让我们来看看如何重新设计一个室内设计应用程序来融入视觉定位范例。</strong></p><h1 id="a0a0" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">为视觉定位重新设计你的应用</h1><p id="93b5" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">这是一个室内设计应用程序的潜在重新设计，将视觉定位工作流程纳入其UX。</p><h2 id="944b" class="ng ky hu bd kz nh ni nj ld nk nl nm lh ki nn no lj km np nq ll kq nr ns ln nt dt translated">1.设计房间(同时绘制地图)</h2><p id="f54e" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">使用Placenote，需要稍微修改设计阶段，以便在后台运行映射过程。这意味着，当用户在房间中放置家具时，Placenote可以通过在后台运行并行的特征提取和映射过程来开始构建环境的3D地图。好消息是，这不需要给用户任何额外的提示。它应该无缝地适应任何现有的工作流程。</p><p id="8388" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">如果你在Xcode 上用<strong class="kb hv"> Swift编码，你可以在你的视图控制器中的viewDidLoad()函数的末尾运行这一行。这将在用户打开应用程序时立即启动制图过程。</strong></p><pre class="jk jl jm jn fq nu nv nw nx aw ny dt"><span id="79dc" class="ng ky hu nv b fv nz oa l ob oc">LibPlacenote.instance.<strong class="nv hv">startSession()</strong></span></pre><p id="6b69" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">还增加了一个新功能，从ARKit发送图像帧到Placenote。</p><pre class="jk jl jm jn fq nu nv nw nx aw ny dt"><span id="c118" class="ng ky hu nv b fv nz oa l ob oc">func <strong class="nv hv">session</strong>(_ session: ARSession, didUpdate: ARFrame) {</span><span id="615b" class="ng ky hu nv b fv od oa l ob oc">let <strong class="nv hv">image</strong>: CVPixelBuffer = didUpdate.capturedImage<br/>    let <strong class="nv hv">pose</strong>: matrix_float4x4 = didUpdate.camera.transform</span><span id="274c" class="ng ky hu nv b fv od oa l ob oc">LibPlacenote.instance.<strong class="nv hv">setFrame</strong>(image: image, pose: pose)<br/>}</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/3559e3f932657ae7b0ca961c45536bc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*c2vpjkojModcTHCtFBk4gQ.gif"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">The design stage can run mapping in the background (green dots are feature points)</figcaption></figure><h2 id="d7a1" class="ng ky hu bd kz nh ni nj ld nk nl nm lh ki nn no lj km np nq ll kq nr ns ln nt dt translated">2.保存设计会话</h2><p id="b446" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">如果您的应用程序中没有“保存”或“共享”按钮，则“保存”会话可能是添加到您工作流程中的唯一额外步骤。由于目前没有室内设计应用程序可以真正将设计保存在一个特定的位置，所以并不真正需要“保存”按钮。但是，如果您有一个“共享”功能，允许您捕获设计空间的屏幕截图或视频，您可以使用以下代码片段将保存功能链接到此共享按钮:</p><pre class="jk jl jm jn fq nu nv nw nx aw ny dt"><span id="914a" class="ng ky hu nv b fv nz oa l ob oc">LibPlacenote.instance.<strong class="nv hv">saveMap</strong>(</span><span id="f838" class="ng ky hu nv b fv od oa l ob oc"><strong class="nv hv">savedCb</strong>: {(mapId: String?) -&gt; Void in</span><span id="ca50" class="ng ky hu nv b fv od oa l ob oc">   print("Saved Map ID: " + String(mapId))<br/>   LibPlacenote.instance.<strong class="nv hv">stopSession</strong>()<br/>},</span><span id="4b37" class="ng ky hu nv b fv od oa l ob oc"><strong class="nv hv">uploadProgressCb</strong>: {(completed: Bool, faulted: Bool, percentage: Float) -&gt; Void in</span><span id="7d0b" class="ng ky hu nv b fv od oa l ob oc"><strong class="nv hv">if</strong> (completed) {print("Uploaded map!")}<br/>})</span></pre><p id="5072" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">在Placenote的映射过程中，保存功能保存并上传在设计过程中创建的地图。地图上传后，您将收到一个<strong class="kb hv"> mapID </strong>，可用于重新加载地图或与其他设备共享地图，使您的应用程序更具社交性。</p><p id="e0d9" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">从开发的角度来看，您还需要保存应用程序中内容的位置。这可以在本地完成，也可以在您自己的云后端使用一个简单的JSON文件完成。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/bbaad714ac0eccdbde13746193de7844.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*A8nfzvx8yGffwoEG7C1luA.gif"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Save a design session by saving a map and the positions of content in the map.</figcaption></figure><h2 id="a54d" class="ng ky hu bd kz nh ni nj ld nk nl nm lh ki nn no lj km np nq ll kq nr ns ln nt dt translated">3.恢复设计会话</h2><p id="6d5c" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">一旦保存了地图，当您想要在该区域打开保存的设计时，您可以重新加载它。将此功能纳入UX的一种方法是，每次打开应用程序时检查是否存在之前保存的mapID(在viewDidLoad()函数中)。如果mapID存在，请加载最新的地图并尝试在该地图中定位设备。</p><p id="2088" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">一旦Placenote找到匹配，场景就可以准确地加载到它停止的地方，以便用户可以继续设计。您可以将这一行添加到视图控制器中的<strong class="kb hv"> viewDidLoad() </strong>函数中。</p><pre class="jk jl jm jn fq nu nv nw nx aw ny dt"><span id="4023" class="ng ky hu nv b fv nz oa l ob oc"><strong class="nv hv">// if you saved a mapID in user defaults, retrieve it like this</strong></span><span id="092c" class="ng ky hu nv b fv od oa l ob oc">guard let savedID = defaults.string(forKey: "MapID") <br/>   else { return false }</span><span id="066f" class="ng ky hu nv b fv od oa l ob oc">LibPlacenote.instance.<strong class="nv hv">loadMap</strong>(mapId: “Map ID”,</span><span id="99bb" class="ng ky hu nv b fv od oa l ob oc"><strong class="nv hv">downloadProgressCb</strong>: {(completed: Bool, faulted: Bool, percentage: Float) -&gt; Void in</span><span id="56bd" class="ng ky hu nv b fv od oa l ob oc">   if (completed) {</span><span id="044b" class="ng ky hu nv b fv od oa l ob oc">      LibPlacenote.instance.<strong class="nv hv">startSession</strong>()<br/>   }<br/>})</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/8415e49cce9f3dd919a278074166f6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*fFtXhmBgBZ-gD5n4zBisHQ.gif"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">The session can be resumed as soon as the app is reopened.</figcaption></figure><p id="9785" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">就是这样！通过一些小的改变，您可以为您的AR体验添加一个全新的维度，使其持久，更具社会性，并且总体上成为室内设计应用程序的更好解决方案。</p><p id="3125" class="pw-post-body-paragraph jz ka hu kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">上面的代码示例是在<strong class="kb hv"> Swift </strong>中为原生SceneKit开发的，但是Placenote SDK也可以作为<strong class="kb hv"> Unity </strong>插件使用。要了解更多关于Placenote的信息或尝试示例应用程序，请查看<a class="ae kv" href="https://placenote.com" rel="noopener ugc nofollow" target="_blank">Placenote.com</a>。</p><h1 id="f367" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">Placenote SDK入门</h1><p id="a02f" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">你可以在这里了解更多关于Placenote如何帮助构建v <a class="ae kv" href="https://placenote.com/virtual-furniture-design-staging/" rel="noopener ugc nofollow" target="_blank">虚拟家具设计和staging </a>应用的信息。在接下来的几天里，我将发布上述应用程序示例的示例代码，因此如果您感兴趣，请注册一个API密钥，并使用下面链接的安装指南尝试Placenote SDK for Unity或SceneKit。</p><div class="oe of fm fo og oh"><a href="https://placenote.com/install" rel="noopener  ugc nofollow" target="_blank"><div class="oi ab ej"><div class="oj ab ok cl cj ol"><h2 class="bd hv fv z el om eo ep on er et ht dt translated">获取API密钥并选择平台| Placenote</h2><div class="oo l"><h3 class="bd b fv z el om eo ep on er et ek translated">单击下面的链接打开您的开发者门户。注册一个帐户并创建一个新的API密钥。然后回到…</h3></div><div class="op l"><p class="bd b gc z el om eo ep on er et ek translated">placenote.com</p></div></div></div></a></div><h1 id="a73f" class="kx ky hu bd kz la lb lc ld le lf lg lh ja li jb lj jd lk je ll jg lm jh ln lo dt translated">怎么联系</h1><p id="823d" class="pw-post-body-paragraph jz ka hu kb b kc lp iv ke kf lq iy kh ki lr kk kl km ls ko kp kq lt ks kt ku hn dt translated">要就Placenote、ARKit或任何与AR/VR相关的内容与我联系，请随时联系:</p><ol class=""><li id="7a3d" class="ms mt hu kb b kc kd kf kg ki mu km mv kq mw ku mx my mz na dt translated">给我发邮件:neil [at] vertical.ai</li><li id="c7e5" class="ms mt hu kb b kc nb kf nc ki nd km ne kq nf ku mx my mz na dt translated">Placenote Slack社区:<a class="ae kv" href="https://join.slack.com/t/placenotedevs/shared_invite/enQtMjk5ODk2MzM0NDMzLTIzMjQwZTAxMzYxYWMyMjY1NzZmYTA2YjY0OGU5NzAzNjUxN2M1ZTQ1ZWZiYzI4ZDg4NGU1ZjQ0ZTA4NDY0OWI" rel="noopener ugc nofollow" target="_blank">加入我们的Slack群组</a></li></ol><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="oq or l"/></div></figure></div></div>    
</body>
</html>