<html>
<head>
<title>How to Add Keyboard Shortcuts to Your Web App.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在Web应用程序中添加键盘快捷键？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/add-keyboard-shortcuts-to-your-web-app-ba358016ff05?source=collection_archive---------6-----------------------#2018-03-15">https://medium.com/hackernoon/add-keyboard-shortcuts-to-your-web-app-ba358016ff05?source=collection_archive---------6-----------------------#2018-03-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/919f9f026bc73746bb454c0382676930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8kEJ0TtaePcMjRPJw7c33Q.jpeg"/></div></div></figure><div class=""/><div class=""><h2 id="5848" class="pw-subtitle-paragraph jc ie if bd b jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ek translated">反应过来，几行代码就行了！</h2></div><p id="ab64" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt kq translated">我想象了一个场景。你在一家名为Adob的大公司工作，你在一家名为Abode的初创公司工作，开发一款名为PhotoStore的照片编辑应用程序。这听起来像一个图像存储服务，但它不是！事实上，这是一个基于网络的流行桌面应用程序的替代品。</p><p id="dc8d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">有一天，你的产品经理宣布，因为你的竞争对手有键盘快捷键，你也需要它们来使他们现有的用户更容易切换。毕竟，这不应该推迟我们的发射。你只要添加<em class="kz">document . addevent listener(' keydown '，回调)；</em>你完成了，对吗？</p><p id="cfae" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">嗯，没那么快。为什么我们需要捷径？在我们的例子中，我们希望能够激活工具栏中的各种工具(比如画笔或选区)。但是，即使在我们简单的用例中，我们也可以合理地预期需要处理以下内容。</p><ul class=""><li id="944c" class="la lb if jw b jx jy ka kb kd lc kh ld kl le kp lf lg lh li dt translated">激活所选工具(状态管理)</li><li id="4084" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">突出显示选定的工具(CSS样式)</li><li id="9f84" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">仅在编辑器中执行上述所有操作(快捷方式不应在营销页面、指南等中使用。)</li></ul><p id="cb47" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在我们写一行代码之前，考虑一个特性在未来会如何发展总是好的。通过以一种支持这种理论功能的方式来设计我们的解决方案，我们可以避免以后的许多痛苦，即使我们决定现在不实现它。</p><h1 id="21d4" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">何必呢？</h1><p id="bb31" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated"><em class="kz">“这不适用于我，我不是在做照片编辑应用，”</em>你想。</p><p id="21dc" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">虽然这可能是真的，但每个应用程序的用户都会养成习惯，并采用特定的工作流程。这包括你的应用程序。为最常用的功能提供键盘快捷键可以让你的用户更快、更有效率、更快乐。</p><p id="01d4" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">有时，你的用户不能或不想使用他们的鼠标，这使得快捷方式几乎成为你产品的一个必要部分。在这种情况下，我甚至会把它们算作整体可访问性策略的一部分。而你<strong class="jw ig"/>在乎这个，对吗？我也是这么想的。所以让我们开始吧。</p><figure class="mm mn mo mp fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ml"><img src="../Images/a9b1345a9586eb11bc5f658b6c3a20e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BA37VtgTEzdGIkwWteKWoQ.jpeg"/></div></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">Meet your new friends, B and M.</figcaption></figure><h1 id="97c3" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">先决条件。</h1><p id="5255" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">我们需要什么来传递这种愉快的体验？对于本文，我将使用“only”<a class="ae mu" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">React</a>和<a class="ae mu" href="https://reactjs.org/docs/introducing-jsx.html" rel="noopener ugc nofollow" target="_blank"> JSX </a>，这样我就可以编写紧凑的代码。我只将<em class="kz">放在引号中，因为如果你以前从未使用过React，那么设置React可能会令人生畏。</em></p><p id="958b" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">然而，如果你正在给你的应用程序添加快捷方式，很可能你已经使用了一些<a class="ae mu" href="https://en.wikipedia.org/wiki/Single-page_application" rel="noopener ugc nofollow" target="_blank"> SPA </a>框架。我们需要的是<em class="kz"> onCreate() </em>和<em class="kz"> onDestroy() </em>生命周期方法，所以如果你的框架提供了一个等效的方法，这个指南将很容易理解。在React中，这些方法被称为<a class="ae mu" href="https://reactjs.org/docs/react-component.html#componentdidmount" rel="noopener ugc nofollow" target="_blank"><em class="kz">componentDidMount()</em></a>和<a class="ae mu" href="https://reactjs.org/docs/react-component.html#componentwillunmount" rel="noopener ugc nofollow" target="_blank"><em class="kz">componentWillUnmount()</em></a>。</p><p id="4518" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">如果您使用普通的JavaScript，不要惊慌，您仍然可以继续使用。我们将关注概念，而不是特定的实现。但是你应该能够阅读<a class="ae mu" href="http://exploringjs.com/es6/" rel="noopener ugc nofollow" target="_blank"> ES6 </a>，因为我不关心冗长的代码生命。</p><h1 id="897e" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">项目设置。</h1><p id="9c89" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">我设法得到了这个应用程序，并把它发布到了<a class="ae mu" href="https://codepen.io/lmenus/pen/QmwXxb" rel="noopener ugc nofollow" target="_blank"> CodePen </a>上，这样你就可以快速开始并跟进了。(但愿，欧德不会因为泄露他们的产品而起诉我们。)</p><p id="1f7f" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">如你所见，我得到了他们系统的早期版本。他们还没有进行设计招聘，只有两个工具可供选择——笔刷和选择。我们还可以在页面之间切换。这很方便，因为我们想确保我们的快捷方式只在编辑器中工作。所以对于我们的需求来说，这就足够了。</p><figure class="mm mn mo mp fq hw"><div class="bz el l di"><div class="mv mw l"/></div></figure><h1 id="9310" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">概念。</h1><p id="bdb3" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">这项功能将如何工作？我们将需要创建以下内容。</p><ol class=""><li id="b7ad" class="la lb if jw b jx jy ka kb kd lc kh ld kl le kp mx lg lh li dt translated"><strong class="jw ig">可用快捷键。这将是我们可以调用的快捷方式列表。它们将映射到包含所有应用程序快捷方式的对象。</strong></li><li id="4122" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp mx lg lh li dt translated"><strong class="jw ig">听众。</strong>我们想确保快捷方式只在编辑器中有效。我们框架的生命周期方法在这里会很方便。</li><li id="cbde" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp mx lg lh li dt translated"><strong class="jw ig">经手人。</strong>处理键盘事件和实际快捷键执行的功能。</li></ol><h1 id="a481" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">实施。</h1><p id="71dc" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">让我们从定义应用程序快捷方式开始。这将是应用程序中可以执行的所有快捷方式的对象。目前，我们只能从工具栏中选择工具。每个快捷处理程序都是一个函数，接受一个<a class="ae mu" href="https://developer.mozilla.org/docs/Web/API/KeyboardEvent" rel="noopener ugc nofollow" target="_blank"> KeyboardEvent </a>对象作为单个参数。它在执行其主体之前检查事件是否与触发模式匹配。</p><pre class="mm mn mo mp fq my mz na nb aw nc dt"><span id="c9c6" class="nd lp if mz b fv ne nf l ng nh">const shortcuts = {</span><span id="1b48" class="nd lp if mz b fv ni nf l ng nh">  toolBrush(event) {</span><span id="f735" class="nd lp if mz b fv ni nf l ng nh">    if (event.key !== ‘b’) return false;</span><span id="0cb3" class="nd lp if mz b fv ni nf l ng nh">    useTool(‘brush’);</span><span id="01a2" class="nd lp if mz b fv ni nf l ng nh">    return true;</span><span id="7595" class="nd lp if mz b fv ni nf l ng nh">  },</span><span id="2408" class="nd lp if mz b fv ni nf l ng nh">  toolSelect(event) {</span><span id="089f" class="nd lp if mz b fv ni nf l ng nh">    if (event.key !== ‘m’) return false;</span><span id="7a45" class="nd lp if mz b fv ni nf l ng nh">    useTool(‘select’);</span><span id="5e30" class="nd lp if mz b fv ni nf l ng nh">    return true;</span><span id="863a" class="nd lp if mz b fv ni nf l ng nh">  },</span><span id="d36b" class="nd lp if mz b fv ni nf l ng nh">};</span></pre><p id="85db" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">为了满足我们只能在某些页面上执行某些快捷方式的要求，我们将有一个当前注册的快捷方式列表。</p><pre class="mm mn mo mp fq my mz na nb aw nc dt"><span id="0273" class="nd lp if mz b fv ne nf l ng nh">let registeredShortcuts = [];</span></pre><p id="7ff1" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">当用户按下一个键时，我们将遍历这个列表，看看这个键事件是否执行了任何快捷方式，此时我们停止迭代。如果我们循环使用<em class="kz">快捷键</em>键，将会很难将快捷键的执行限制在特定的页面上。</p><pre class="mm mn mo mp fq my mz na nb aw nc dt"><span id="2173" class="nd lp if mz b fv ne nf l ng nh">const handleKeyDown = event =&gt; {</span><span id="0159" class="nd lp if mz b fv ni nf l ng nh">  for (let i = 0; i &lt; registeredShortcuts.length; i += 1) {</span><span id="7c12" class="nd lp if mz b fv ni nf l ng nh">    const shortcut = registeredShortcuts[i];</span><span id="d5ab" class="nd lp if mz b fv ni nf l ng nh">    if (shortcuts[shortcut](event)) {</span><span id="7557" class="nd lp if mz b fv ni nf l ng nh">      event.preventDefault();</span><span id="2977" class="nd lp if mz b fv ni nf l ng nh">      break;</span><span id="2f73" class="nd lp if mz b fv ni nf l ng nh">    }</span><span id="c4b0" class="nd lp if mz b fv ni nf l ng nh">  }</span><span id="e167" class="nd lp if mz b fv ni nf l ng nh">};</span></pre><p id="88fe" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">为了开始监听按键，我们注册了一个全局监听器。</p><pre class="mm mn mo mp fq my mz na nb aw nc dt"><span id="cda0" class="nd lp if mz b fv ne nf l ng nh">document.addEventListener(‘keydown’, handleKeyDown);</span></pre><p id="5dfb" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">你现在可以在<em class="kz"> registeredShortcuts </em>数组中添加<em class="kz">‘tool brush’</em>和<em class="kz">‘tool select’</em>来查看我们的快捷方式确实被调用了。</p><figure class="mm mn mo mp fq hw"><div class="bz el l di"><div class="mv mw l"/></div></figure><p id="ad12" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">现在我们已经验证了快捷方式的工作，我们可以清除数组并编写一个合适的<em class="kz"> &lt;快捷方式/ &gt; </em>组件来为我们处理快捷方式注册。我们将把工具栏按钮包装在这个组件中。</p><pre class="mm mn mo mp fq my mz na nb aw nc dt"><span id="f320" class="nd lp if mz b fv ne nf l ng nh">&lt;Shortcut name=”toolBrush”&gt;</span><span id="a9c4" class="nd lp if mz b fv ni nf l ng nh">  &lt;Button</span><span id="3146" class="nd lp if mz b fv ni nf l ng nh">    label=”Brush”</span><span id="33b6" class="nd lp if mz b fv ni nf l ng nh">    onClick={useTool}</span><span id="2434" class="nd lp if mz b fv ni nf l ng nh">    to=”brush” /&gt;</span><span id="9073" class="nd lp if mz b fv ni nf l ng nh">&lt;/Shortcut&gt;</span><span id="8e4f" class="nd lp if mz b fv ni nf l ng nh">&lt;Shortcut name=”toolSelect”&gt;</span><span id="5c6e" class="nd lp if mz b fv ni nf l ng nh">  &lt;Button</span><span id="5e95" class="nd lp if mz b fv ni nf l ng nh">    label=”Select”</span><span id="94a1" class="nd lp if mz b fv ni nf l ng nh">    onClick={useTool}</span><span id="1a7b" class="nd lp if mz b fv ni nf l ng nh">    to=”select” /&gt;</span><span id="1ab5" class="nd lp if mz b fv ni nf l ng nh">&lt;/Shortcut&gt;</span></pre><p id="51bd" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这有一系列的好处。首先，当我们稍后查看代码时，这个快捷方式影响了应用程序的哪些部分是显而易见的。通过键入<em class="kz">&lt;Shortcut name = " searched _ name _ here "&gt;</em>，也可以很容易地在我们的项目中搜索特定的快捷方式。</p><p id="31b6" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">通过将每个快捷方式嵌入到视图的呈现方法中，可以将其生命周期长度绑定到父组件。使用组件生命周期方法注册和取消注册快捷方式使得状态管理变得轻而易举。当组件被创建时，我们注册快捷方式。相反，我们在destroy上取消注册相同的快捷方式。</p><p id="2c54" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我和其他人一样喜欢纯JavaScript，但这将是一场噩梦。这是我们的组件。</p><pre class="mm mn mo mp fq my mz na nb aw nc dt"><span id="a083" class="nd lp if mz b fv ne nf l ng nh">class Shortcut extends React.Component {</span><span id="5bbb" class="nd lp if mz b fv ni nf l ng nh">  componentDidMount() {</span><span id="cd81" class="nd lp if mz b fv ni nf l ng nh">    if (!registeredShortcuts.includes(this.props.name)) {</span><span id="bd76" class="nd lp if mz b fv ni nf l ng nh">      registeredShortcuts = [</span><span id="3f7f" class="nd lp if mz b fv ni nf l ng nh">        …registeredShortcuts,</span><span id="2c31" class="nd lp if mz b fv ni nf l ng nh">        this.props.name,</span><span id="957e" class="nd lp if mz b fv ni nf l ng nh">      ];</span><span id="68a8" class="nd lp if mz b fv ni nf l ng nh">    }</span><span id="3fdc" class="nd lp if mz b fv ni nf l ng nh">  }</span><span id="8cd1" class="nd lp if mz b fv ni nf l ng nh">  componentWillUnmount() {</span><span id="d48c" class="nd lp if mz b fv ni nf l ng nh">    registeredShortcuts = [</span><span id="71c8" class="nd lp if mz b fv ni nf l ng nh">      …registeredShortcuts.filter(x =&gt; x !== this.props.name),</span><span id="5055" class="nd lp if mz b fv ni nf l ng nh">    ];</span><span id="c3d9" class="nd lp if mz b fv ni nf l ng nh">  }</span><span id="9ef6" class="nd lp if mz b fv ni nf l ng nh">  render() {</span><span id="c89e" class="nd lp if mz b fv ni nf l ng nh">    return this.props.children || null;</span><span id="3201" class="nd lp if mz b fv ni nf l ng nh">  }</span><span id="d76d" class="nd lp if mz b fv ni nf l ng nh">}</span></pre><p id="c27d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">现在我们需要改变工具栏，使其只出现在编辑器视图中。让我们也为它添加样式，并删除控制台信息。就是这样！</p><figure class="mm mn mo mp fq hw"><div class="bz el l di"><div class="mv mw l"/></div></figure><h1 id="4037" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">附录。</h1><p id="73fc" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">很管用，对吧？我们已经成功地为我们的应用程序添加了键盘快捷键支持。我们现在准备好和我们的对手竞争了吗？完全同意。营销团队可以开始推广💩这个新的闪亮的功能。</p><p id="10f5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">但是作为一个工程团队，我们的工作还没有结束。也就是说，除非你打算明天辞职，让你的继任者在这个代码崩溃的美好一天处理它。为了简单起见，我在本文中使用了一些快捷方式。继续阅读进一步讨论。</p><ul class=""><li id="8f74" class="la lb if jw b jx jy ka kb kd lc kh ld kl le kp lf lg lh li dt translated">捆绑优化</li><li id="35e2" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">跨浏览器支持</li><li id="123a" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">开发工具</li><li id="a1db" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">边缘案例</li><li id="4259" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">模式匹配</li><li id="1e5c" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">快捷选择</li><li id="1d39" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">状态管理</li><li id="015d" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">支持多个快捷方式</li><li id="ad0f" class="la lb if jw b jx lj ka lk kd ll kh lm kl ln kp lf lg lh li dt translated">测试</li></ul><h2 id="899b" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">捆绑包优化。</h2><p id="4b77" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">有两件事需要考虑。我们可以用一个变量代替多个相同值的字符串。在我们的构建过程中，这个变量可能会被缩小，从而从最终的包中去掉一些部分。</p><p id="3816" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">第二点是弄清楚我们是否需要发布这个功能？毕竟这些叫<em class="kz">键盘</em>快捷键是有原因的。您可能不希望将这些代码提供给没有键盘的移动用户。然而，截至2018年3月，还没有可靠的API来检测键盘的存在。</p><h2 id="38ac" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">跨浏览器支持。</h2><p id="80a5" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">本指南使用了一组现代的JavaScript特性。如果你支持旧的浏览器，你需要确保你的代码是可移植的，并且使用旧的浏览器API来检测事件。</p><h2 id="67d4" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">开发工具。</h2><p id="ee49" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">对于您的内部调试工具，如果出现问题，您可能想要查看当前注册了哪些快捷方式。这非常简单，你可以直接转储<em class="kz"> registeredShortcuts </em>的内容。</p><h2 id="d484" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">边缘案例。</h2><p id="0507" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">假设有一天，我们在应用程序中添加了一个输入字段，允许用户搜索图层。现在，如果他们想搜索“背景”层，他们可以开始输入<em class="kz"> b </em>，但哦，là là，画笔工具被选中。这还不是最坏的情况，我们可以切换一些窗口或对话框，但它说明了问题。</p><p id="f206" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">对于这种错误，您需要检查<em class="kz"> event.target </em>以确保它不是可写的DOM节点。</p><h2 id="94b2" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">模式匹配。</h2><p id="db50" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">是的，我们的捷径行得通。但是尝试按下ctrl/⌘+b——画笔工具仍然被选中！这显然不是我们想要的。因此，我们需要添加一个精确的模式匹配函数，而不是简单地检查<em class="kz"> event.key </em>。</p><h2 id="a00a" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">快捷选择。</h2><p id="86be" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated"><a class="ae mu" href="https://twitter.com/sashika" rel="noopener ugc nofollow" target="_blank"> Sasha Maximova </a>写了一篇关于为应用程序选择快捷方式的<a class="ae mu" rel="noopener" href="/@sashika/j-k-or-how-to-choose-keyboard-shortcuts-for-web-applications-a7c3b7b408ee">好文章，所以我不会重复她的观点。就我个人而言，我更喜欢使用单键快捷键，并使用双组合键，因为这大大降低了与任何浏览器/操作系统命令冲突的几率。例外情况是格式化函数，如<strong class="jw ig"> bold </strong>除了Ctrl/⌘ + B没有理由使用其他，因为你的用户已经习惯了。</a></p><h2 id="30fb" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">国家管理。</h2><p id="1478" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">为了使教程简短，我已经克制住不把像<a class="ae mu" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a>这样的整个状态管理库扔进我们的教程，但是你可能想在你的应用中重复管理一个状态。我们无意中创建了一些全局变量，这些变量很容易被Redux之类的工具所包含。</p><h2 id="1b8a" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">支持多种快捷方式。</h2><p id="8e0e" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">现在，我们的函数只接受一个字符串参数，但是可能会有这样的情况，你想一次注册多个快捷方式。例如，如果您喜欢在视图顶部声明所有快捷方式。</p><h2 id="e67f" class="nd lp if bd lq nj nk nl lu nm nn no ly kd np nq ma kh nr ns mc kl nt nu me nv dt translated">测试。</h2><p id="fa5b" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">不要发布没有测试的代码。在现有功能的基础上开发测试和捕捉潜在的bug会容易得多。如果您使用SPA框架(我知道您会这样做)，您还会想要记录您的组件，以便很容易看到它们支持哪些参数。</p><h1 id="8755" class="lo lp if bd lq lr ls lt lu lv lw lx ly jl lz jm ma jo mb jp mc jr md js me mf dt translated">结论。</h1><p id="aa7c" class="pw-post-body-paragraph ju jv if jw b jx mg jg jz ka mh jj kc kd mi kf kg kh mj kj kk kl mk kn ko kp hn dt translated">在你的应用程序中添加快捷键是一个立竿见影的效果，它可以改善你的用户体验，而不会让你付出太多的代价。仔细选择最常用的功能，让用户加快工作流程，让他们高兴。</p><p id="ff14" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">感谢您的阅读。</p></div><div class="ab cl nw nx hc ny" role="separator"><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob oc"/><span class="nz bw bk oa ob"/></div><div class="hn ho hp hq hr"><p id="e0bc" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">感谢<a class="ae mu" href="https://scrimba.com" rel="noopener ugc nofollow" target="_blank"> Scrimba </a>的朋友们阅读本文的草稿。请访问它们，了解学习代码的最简单方法。你可以在我的<a class="ae mu" href="https://lmen.us" rel="noopener ugc nofollow" target="_blank">网站</a>上读到更多我的信息。</p></div></div>    
</body>
</html>