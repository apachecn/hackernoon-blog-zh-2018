<html>
<head>
<title>From Rails to Clojure, then to Java, then back to Rails</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Rails到Clojure，再到Java，再回到Rails</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/from-rails-to-clojure-then-to-java-then-back-to-rails-bd4b418f3cfb?source=collection_archive---------14-----------------------#2018-03-18">https://medium.com/hackernoon/from-rails-to-clojure-then-to-java-then-back-to-rails-bd4b418f3cfb?source=collection_archive---------14-----------------------#2018-03-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/76451fa646dbeed54f5510ef84d0079b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*UVC60wA4_ivnMKK5.png"/></div></div></figure><p id="bbcf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在过去的6年里，我一直在用Rails、Clojure、<a class="ae ka" href="https://hackernoon.com/tagged/java" rel="noopener ugc nofollow" target="_blank"> Java </a>和back to Rails开发web应用程序。这是对过去几年的概述，介绍了使用如此不同的技术堆栈的好处，以及它的缺点。</p><h1 id="6ff5" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">我从事的语言和项目概述</h1><p id="40ad" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这是Rails 2.3中的一个大项目。这是典型的已经失控的Rails。它有+1K的端点，并使用了大量的宝石。由于依赖性，升级实际上是不可能的。在某种程度上，它有几个可维护性和性能问题，正如我们从快速上市方法中所期望的那样。</p><p id="0c85" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是团队专注于扭转局面。我们开始遵循清洁建筑的指导方针。我们使用主持人、互动者和知识库。在某种程度上，我相信代码库的一部分实际上是令人愉快的，并且是正确构建的。错误和性能问题的数量大幅下降，我们对此感到自豪。但是我们只接触了应用程序的40%。</p><p id="0bce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这一点上，我开始寻找其他工具。我去寻找更适合我想要的东西:生产率、代码质量和性能。</p><h1 id="b605" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">Clojure</h1><p id="895d" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我有机会引导一个新产品，并且很幸运地在Clojure中这样做了。这是一个巨大的转变，走向一种新的<a class="ae ka" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>范式，一种拥有<em class="le">外星</em>语法的语言。毫无疑问，Clojure是我最喜欢的编程语言。我学到了很多，甚至今天我还在关注这个社区，因为那里有大量的创新。</p><p id="9324" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们实现了一个带有几个有界上下文服务的web api。我们对数据库使用异步HTTP和异步通信，使服务器端到端完全异步。一切都很快，我们非常有效率，并且在不断地学习。</p><p id="3dcd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">并非一切都很好。招聘是个问题。很难找到了解Clojure甚至愿意学习的人。从其他堆栈带来的人总是有一个大的斜坡。</p><p id="3d27" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但我对该产品的主要问题是业务没有扩大。在那里，我们有我们认为是好的架构和好的实现，但是它没有被测试。</p><p id="4648" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以我开始四处寻找。这次我想要一个大规模的项目。使用大数据，无论使用何种语言。</p><h1 id="9b03" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">Java 语言(一种计算机语言，尤用于创建网站)</h1><p id="828f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我发现一家公司有大规模的项目，他们使用Java。当时我并不在乎，我认为我将使用Java entreprise-ish工具，这将是来自两种动态语言的巨大冲击。但我愿意学习，公司也对我下了赌注。</p><p id="fd9a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">幸运的是，Java项目不是企业化的。他们非常精干，实际上与我以前工作过的建筑非常相似。他们有一个专门用于HTTP处理“控制器”和JSON序列化器的层。他们有一个专门用于业务逻辑等的层。使用Java 8实际上很好，因为我可以使用从Clojure学到的几个构造。</p><p id="1c3c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">事实上，一切都更加严格。必须为所有概念定义POJOs是很麻烦的。但是我实际上并没有感觉到我在Rails和Clojure社区中多次听到的效率低下。我实际上速度很快，效率很高，而且我喜欢用Java 8编程。的确，它要冗长得多，但是一个好的IDE在这方面很有帮助。</p><p id="5062" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有时我认为Rails社区实际上可以从Java社区学到很多东西。反之亦然。例如，在Java中，你花时间来定义你的模型并记录它们。Java开发人员会以此为荣，并对我说:<em class="le">“你的动态语言中没有这一点，你怎么能进行重构并知道一切正常呢？”</em>。</p><p id="6747" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是真的。我做了一些产品范围的重构。IDE帮了很大的忙，当一切都编译好了(这并不总是容易完成的)，我实际上确信一切都没问题。</p><p id="7a78" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但有趣的是:对我来说,<em class="le">很少需要对动态语言进行这种大规模的重构。虽然动态语言确实可以获得更多关于所用数据和模型的定义，但事实是，当你在这种环境下编程时，你构建的代码<strong class="je hv">更容易更改</strong>。</em></p><h1 id="4403" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">Rails 4.2</h1><p id="2596" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">现在我又在进行一个Rails项目，这次使用的是Rails 4.2。几周之后，我有一种感觉:用Rails 4.2编程和用Rails 2.3编程是一样的。我不是说没有改进。我要说的是，从我的角度来看，从一个不太记得Rails 2.3旧日时光的人的角度来看，在Rails 4.2中编写rest API实际上感觉是一样的。</p><p id="7c71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这让我想知道:如果我没有看到巨大的变化，为什么做升级这么难？为什么会有这么多突破性的变化？这与Java和Clojure的生态系统相冲突，它们非常注重向后兼容性。</p><p id="3df7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我得到的另一件事是，新来的孩子不会喜欢rails，这是更难雇用。现在酷孩子更喜欢Go或Elixir，对Rails不以为然。老实说，我没想到会这样。</p><p id="c154" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无论如何，我相信拥有一个好的团队和一个要解决的好问题是优秀编程的主要前提。我渴望对Rails进行测试，并尝试充分利用它。</p><h1 id="14f7" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">那么，使用这么多种语言，我收获了什么？</h1><p id="8679" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在几个生态系统上工作真的让我大开眼界，让我考虑了几种做事的方法。这一切都是关于权衡，作为一名工程经理，我必须从能够审查任意堆栈中的代码中获益。我可能不是最好的低级审查者，但从我所学到的来看，我确实有很多可以提供的意见。</p><ul class=""><li id="0361" class="lf lg hu je b jf jg jj jk jn lh jr li jv lj jz lk ll lm ln dt translated"><strong class="je hv">来自Ruby: </strong>专注于易于更改的软件，追求小功能和小类。让你的代码易于阅读和理解。关注强大的面向对象编程。让我们试着做默认情况下容易修改的代码。</li><li id="2575" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">考虑到容易和简单的区别。明确数据和改变数据的逻辑之间的区别。纯功能和有副作用功能的区分，尽量分开。我们试着默认做简单的代码。</li><li id="4b6c" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated"><strong class="je hv"> Java: </strong>性能，并发，严格。不要忘记您的日志记录和异常处理。让我们试着默认快速编码。</li></ul><p id="cad9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于一个工程经理的职位，我相信这是必须的，我觉得我有更多的见解，因为所有这些不同的经验，我有。</p><h1 id="1e4d" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">缺点是什么？</h1><p id="526f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">掌握几种语言的确使我更加多才多艺。但也让我在某一门语言上变得不那么精通和熟练。高级工程师的工作对我来说比较复杂。几个月前，我确实申请了一个高级职位，虽然我为自己的挑战感到自豪，但公司选择不在我身上下注。但是经过考虑，我意识到我没有通过<em class="le">“这是高级开发人员吗”</em>测试。</p><p id="2b2b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">公司希望在特定语言方面经验丰富的开发人员具备某种特质、技能和知识。例如:</p><ul class=""><li id="dcc3" class="lf lg hu je b jf jg jj jk jn lh jr li jv lj jz lk ll lm ln dt translated"><strong class="je hv"> Java </strong>:日志记录和异常处理很重要，不要用原始字符串当常量，写好文档。熟悉Java中的并发性、Java内存模型以及GC是如何工作的。</li><li id="241a" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated"><strong class="je hv"> Ruby/Rails </strong>:了解内部Rails的细节，了解干净的架构，编写容易修改的代码。编写快速测试。</li><li id="d81e" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated"><strong class="je hv">clo jure:</strong>clo jure中的高级功能编程、高级并发编程:通道、传感器等…</li><li id="9aa0" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated"><strong class="je hv">游戏编程</strong>:矩阵乘法可能比<code class="eh lt lu lv lw b">if</code>快。使用因缓存、线性代数而彼此靠近的内存块。</li></ul><p id="49a0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一家公司不想押注于一个经验丰富但会有上升空间的人，这是可以理解的。因此，如果你想换个领域或堆栈，我的建议是去找一个中级开发人员的角色。从后面开始，快速加速。</p><p id="39cb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我记得我曾经是一名游戏程序员。我已经是一名经验丰富的开发人员，但我只是一名初级游戏程序员。我的代码中有一个关于物体旋转的bug。一个队友刚刚给我指了一下，给了我解决的办法。但我就是没有<em class="le">“大脑肌肉记忆”</em>来快速处理那些信息。</p><p id="4a0d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">成为专家需要很多时间做同样的事情。没有捷径可走。</p><p id="c438" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在一个项目中，我们需要几个层次的知识。虽然<a class="ae ka" href="https://www.youtube.com/watch?v=6Oi8_eCaBGY" rel="noopener ugc nofollow" target="_blank">学习语言很难</a>，但我们需要知道的东西还多得多。</p><ul class=""><li id="a46a" class="lf lg hu je b jf jg jj jk jn lh jr li jv lj jz lk ll lm ln dt translated">了解所使用的语言</li><li id="b4a7" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">了解使用的构建工具(maven、npm、lein、bundle等等)</li><li id="3506" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">了解所使用的数据存储库(postgres、mongo、elastic、cassandra等等)</li><li id="23e2" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">知道如何将项目投入生产，以及最佳配置是什么</li><li id="43b8" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">了解项目的结构，在哪里以及如何实现</li><li id="f77c" class="lf lg hu je b jf lo jj lp jn lq jr lr jv ls jz lk ll lm ln dt translated">了解应用程序的业务逻辑</li></ul><p id="ae64" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以，语言只是一小部分。实际上，我认为工具和整个生态系统需要更多的时间来学习。</p></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="e257" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="le">原载于2018年3月18日</em><a class="ae ka" href="https://engineering-management.space/post/from-rails-to-clojure-to-java-to-rails/" rel="noopener ugc nofollow" target="_blank"><em class="le">engineering-management . space</em></a><em class="le">。</em></p><figure class="me mf mg mh fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure></div></div>    
</body>
</html>