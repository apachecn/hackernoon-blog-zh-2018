<html>
<head>
<title>How to receive crypto payments in a secure way with Hierarchical Deterministic (HD) keys?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用分级确定性(HD)密钥以安全的方式接收加密支付？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-receive-crypto-payments-in-a-secure-way-with-hierarchical-deterministic-hd-keys-89a8028f3d9?source=collection_archive---------18-----------------------#2018-03-19">https://medium.com/hackernoon/how-to-receive-crypto-payments-in-a-secure-way-with-hierarchical-deterministic-hd-keys-89a8028f3d9?source=collection_archive---------18-----------------------#2018-03-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/4aa25959e0acae00c2af393ec77031d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jLwCVY82Um9kMRrU5pE5zg.jpeg"/></div></div></figure><p id="f087" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我们希望从客户那里接收付款时，我们面临一个问题，如何提供一个安全而简单的支付网关？在这篇文章中，我将分析解决这个问题的流行方法。</p><p id="b610" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有两种主要方法:建立自己的服务或使用外部服务。</p><h2 id="d1b7" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">使用外部支付服务</h2><p id="542f" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">这样的服务很容易集成，因为它们有很好的文档，它们通常是负担得起的，但是你不知道里面有什么。大多数加密支付网关都有一个封闭的专有代码。所以使用这些服务风险自担。</p><h2 id="2e0e" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">部署您自己的支付服务</h2><p id="29a2" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">这种方法的主要好处是你知道它是如何工作的。通常，您拥有服务的源代码，并且可以根据需要对其进行多次审计。</p><p id="c910" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有两种类型的服务:有完整节点的和没有完整节点的。当您使用完整节点(比特币核心、Go以太坊、奇偶校验等)时，您可以使用它们的API来执行新客户地址生成、检查交易状态、检查余额、将资金转移到冷钱包等任务。此外，完整节点有一个很好的API文档，可以简化开发。但是这个选择至少有两个问题。</p><p id="212a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，满节点需要大量资源。比如2018年3月18日，比特币核心约200 GB，Go以太坊(geth)约700 GB。以太坊完整节点也需要大约32 GB的内存。</p><p id="397a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">其次，您需要在这些节点上保存您的私钥。因为当一个完整的节点生成一个新地址时，它会将一个私钥保存到wallet文件中。任何有权访问服务器的人都可以窃取密钥。我们不会谈论钱包密码，因为无论如何这种类型的服务是不够安全的。</p><p id="e197" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">综上所述，全节点服务易于开发但资源密集且不太安全。</p><p id="7ebb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第二种类型是没有完整节点的服务。要检查交易或将资金转移到冷钱包(广播交易)，您可以使用已经故障转移的块浏览器，并且您不需要大量资源来使节点全天候可用。要生成新客户的地址，最好使用分层确定性(HD)密钥。</p><h2 id="d110" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">用简单的话来说就是分层确定性(HD)密钥</h2><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff la"><img src="../Images/1975fb6ba67705fc85cfd66bbdf0bd02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PhHJSKZSzh5namqk7yvv_Q.jpeg"/></div></div></figure><p id="d638" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">什么是高清键？这是一种算法，它允许你分割公钥和私钥存储。</p><p id="c14a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">传统上，当您生成一个新地址时，首先生成一个私钥，存储它，然后从公钥生成一个公钥和地址，也存储它。因此，要创建一个新地址，您需要存储它的私钥。</p><p id="b9ba" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们回到HD keys。想象一下，我们有一个算法，允许我们分别生成一些私有种子和一些公共种子。然后我们可以从一个地方的私有种子生成一个新的私有密钥，从另一个地方的公共种子生成一个新的公共密钥。这个算法是这样工作的，如果我们从私有种子生成第五个私有密钥，它将是从公共种子生成的第五个公共密钥的私有密钥。</p><p id="1692" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在这里阅读一篇关于HD键如何工作的详细文章<a class="ae lf" href="https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki" rel="noopener ugc nofollow" target="_blank">。但主要结论是，我们可以将公钥和私钥的生成分开。所以我们只能在您的服务器上生成公钥，并在安全的地方为它们生成私钥。</a></p><p id="1b6d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们回到没有完整节点的自有服务。现在我们知道HD keys是一种收集资金的安全方式，但是我们需要一个实现来在我们的服务中使用它。不同语言的库并不多，但它们都有很多依赖项。明确地说，在使用这些库之前，您需要审核大量的代码。</p><p id="47c4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们在HashEx通过用Java自实现HD库解决了这个问题。我们图书馆的主要特点是:</p><ol class=""><li id="f3be" class="lg lh hu je b jf jg jj jk jn li jr lj jv lk jz ll lm ln lo dt translated">高清按键支持(bip 32)；</li><li id="aa99" class="lg lh hu je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">助记符种子支持(BIP39)。如果你愿意，你可以在任何高清兼容的钱包里使用我们的钥匙；</li><li id="726a" class="lg lh hu je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">REST API接口；</li><li id="7ab0" class="lg lh hu je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">没有不可信依赖的Java应用程序。您可以审核代码；</li><li id="9d95" class="lg lh hu je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">任何货币的新地址生成(bip 44)；</li><li id="6a2f" class="lg lh hu je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">使用block explorer进行余额和交易检查；</li><li id="8f21" class="lg lh hu je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">资金收集机制发送收集的资金到一个冷钱包与费用优化。用我们的图书馆寄钱比以往任何时候都便宜。</li></ol><p id="7956" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们总结一下，没有带有HD密钥的完整节点的自有服务是资源有效且安全的。但是它在实现上比第一个更复杂。</p><p id="6e06" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你想用我们的图书馆，给我留言。</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lu"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure><p id="a8de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">HashEx网站:【https://hashex.org T2】</p><p id="ab7a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过LinkedIn与我联系【https://www.linkedin.com/in/dmitrymishunin/ T4】</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lu"><img src="../Images/731acf26f5d44fdc58d99a6388fe935d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6gfnVvkMRFtjVsWF7vkClA.png"/></div></div></figure></div></div>    
</body>
</html>