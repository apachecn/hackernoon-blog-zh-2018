<html>
<head>
<title>Zero to something with solidity</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">零到坚实的东西</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/zero-to-something-with-solidity-f9ad0c137447?source=collection_archive---------25-----------------------#2018-03-21">https://medium.com/hackernoon/zero-to-something-with-solidity-f9ad0c137447?source=collection_archive---------25-----------------------#2018-03-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="97e0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">渴望开始一个可靠的兼职项目，但不知道如何开始？几周前我也在同样的地方。在这篇文章中，我将指导您从开发前端到上传智能合同的整个过程。该项目的演示可以在这里找到<a class="ae jp" href="https://steve-ng.github.io/" rel="noopener ugc nofollow" target="_blank">https://steve-ng.github.io/</a>(尝试应用程序需要元掩码)</p><p id="ec85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">本教程需要编程经验，你应该有一个私人的ETH钱包(可能来自myEtherWallet) </em></p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff jr"><img src="../Images/303c1b741d2089aac560ec49935dfb79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VWTl6Naruu2E61HX1InHIg.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Example app that we will be building</figcaption></figure></div><div class="ab cl kh ki hc kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hn ho hp hq hr"><h1 id="5647" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">开始(预计:20分钟)</h1><p id="f7ce" class="pw-post-body-paragraph ir is hu it b iu lm iw ix iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo hn dt translated">您必须安装以下软件，这需要一些时间</p><ol class=""><li id="58c6" class="lr ls hu it b iu iv iy iz jc lt jg lu jk lv jo lw lx ly lz dt translated"><strong class="it hv">节点</strong>与<strong class="it hv"> npm </strong>，遵循此快速指南:<a class="ae jp" href="https://docs.npmjs.com/getting-started/installing-node" rel="noopener ugc nofollow" target="_blank">https://docs.npmjs.com/getting-started/installing-node</a></li><li id="fbda" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated"><strong class="it hv">加纳切。</strong>它允许你运行本地以太坊网络，从<a class="ae jp" href="http://truffleframework.com/ganache/" rel="noopener ugc nofollow" target="_blank">http://truffleframework.com/ganache/</a>下载</li><li id="2f58" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">谷歌chrome的meta mask:这是一个chrome插件，你可以从中创建你的eth账户。这是一个关于metamask的快速指南:<a class="ae jp" href="https://www.cryptocompare.com/wallets/guides/how-to-use-metamask/" rel="noopener ugc nofollow" target="_blank">https://www . crypto compare . com/wallets/guides/how-to-use-meta mask/</a></li><li id="5af2" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">一个文本编辑器如<strong class="it hv">崇高的文本</strong></li></ol></div><div class="ab cl kh ki hc kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="hn ho hp hq hr"><h1 id="9f6d" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll dt translated">运行本地连接到生产以太网的前端(10分钟)</h1><p id="a8fb" class="pw-post-body-paragraph ir is hu it b iu lm iw ix iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo hn dt translated">首先，我们将尝试运行连接到以太坊主网络的本地演示应用程序。在终端中运行以下命令</p><pre class="js jt ju jv fq mf mg mh mi aw mj dt"><span id="7b8a" class="mk kp hu mg b fv ml mm l mn mo"><em class="jq">&gt; git clone </em><a class="ae jp" href="https://github.com/steve-ng/verify-file" rel="noopener ugc nofollow" target="_blank"><em class="jq">https://github.com/steve-ng/verify-file</em></a></span><span id="3334" class="mk kp hu mg b fv mp mm l mn mo"><em class="jq">Next, we have to ensure you have the right node version, try the following command and you should get 6.0 and above.<br/>&gt; node -v</em> <em class="jq"><br/>&gt; cd verify-file/verify-frontend<br/>&gt; npm install</em></span><span id="a753" class="mk kp hu mg b fv mp mm l mn mo"><em class="jq">We are going to copy the production config into dev config <br/>&gt; cp properties/prod.json properties/dev.json</em></span><span id="e64e" class="mk kp hu mg b fv mp mm l mn mo">&gt; npm start -s</span></pre><p id="36d3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在最后一个命令<code class="eh mq mr ms mg b">npm start -s</code>之后，您应该会看到<code class="eh mq mr ms mg b">localhost:3000</code>启动了。如果你运行了元蒙版，你应该会看到你之前在<a class="ae jp" href="https://steve-ng.github.io/" rel="noopener ugc nofollow" target="_blank">https://steve-ng.github.io/</a>看到的。否则，如果您看到“<em class="jq">元掩码未连接，该网站要求设置元掩码”，</em>尝试在ur chrome中单击ur元掩码图标，然后单击解锁，然后在<code class="eh mq mr ms mg b">localhost:3000</code>刷新您的浏览器，它应该可以工作。</p><p id="c90c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢尝试这个应用程序，试着上传一个文件散列并查看你的上传。使用<strong class="it hv"> 1或2 gwei </strong>将交易费用降至最低。我们将很快解释代码是如何工作的。</p><h1 id="b973" class="ko kp hu bd kq kr mt kt ku kv mu kx ky kz mv lb lc ld mw lf lg lh mx lj lk ll dt translated">在本地以太网上部署智能合约(15分钟)</h1><p id="5f89" class="pw-post-body-paragraph ir is hu it b iu lm iw ix iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo hn dt translated">接下来，我们将尝试运行本地以太坊网络并上传智能合同。打开之前下载的<strong class="it hv"> Ganache </strong>。您应该会看到如下内容。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff my"><img src="../Images/ad1db13761cb9f492ace3ff50e823e97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R8Gl4DaEn5UrI_yIfNyJGA.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">Ganche screen when booted up. 10 Ethereum wallet will be preloaded with 100 ETH for you. You can click on the key icon on each row to view its private key.</figcaption></figure><p id="70f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">进入设置(windows -&gt;设置)，记下你的<strong class="it hv">端口号</strong>和<strong class="it hv">主机名</strong>。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="fe ff mz"><img src="../Images/8ff2fa2a3c9c110a459d363e73a06a7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5D3dnmw6IzoIePwFTOiFPA.png"/></div></div><figcaption class="kd ke fg fe ff kf kg bd b be z ek">In this screenshot, my hostname is localhost and port number is 8545. I’ll be using this config setting.</figcaption></figure><p id="2465" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，我们将上传智能合同。</p><ol class=""><li id="e250" class="lr ls hu it b iu iv iy iz jc lt jg lu jk lv jo lw lx ly lz dt translated">访问<a class="ae jp" href="http://remix.ethereum.org" rel="noopener ugc nofollow" target="_blank"> Remix — Solidity IDE </a>，将<a class="ae jp" href="https://github.com/steve-ng/verify-file/blob/master/contract/Hashfile.sol" rel="noopener ugc nofollow" target="_blank">https://github . com/Steve-ng/verify-file/blob/master/contract/hash file . sol</a>中的智能合约复制到那里。</li><li id="c775" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo lw lx ly lz dt translated">接下来，点击选择<strong class="it hv">运行</strong>选项卡，在环境下选择<strong class="it hv"> Web3提供者</strong>。将会弹出一个窗口，询问您的web3提供者端点。键入您的主机名和端口号。如果你有和我一样的端口号和主机名，它将是<em class="jq"> http://localhost:8545 </em></li></ol><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff na"><img src="../Images/82025514198bfedfd40459e1dbd8bdf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*1Maq5EtVgG86tCpLmgyM3w.png"/></div></figure><p id="5fb5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.最后在同一个<strong class="it hv">运行</strong>选项卡下，点击粉色<strong class="it hv">创建</strong>按钮。点击后，按照下面的截图，点击图标复制合同地址。</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/8af358140bfb1d109bb2bf4c03c7822c.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*nx7Ow-ITpY3ZKBEU6KUFUA.png"/></div></figure><blockquote class="nc nd ne"><p id="7447" class="ir is jq it b iu iv iw ix iy iz ja jb nf jd je jf ng jh ji jj nh jl jm jn jo hn dt translated">如果您打开Ganache，在事务选项卡下，您还应该看到1 <strong class="it hv">合同创建</strong>事务。</p></blockquote><p id="a153" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.最后回到前端应用，用你复制的地址替换<code class="eh mq mr ms mg b">properties/dev.json</code>的<code class="eh mq mr ms mg b">hashContractAddress</code>，用<code class="eh mq mr ms mg b">npm start -s</code>重新启动应用</p><p id="6ee7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.在进入<a class="ae jp" href="http://localhost:3000" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>之前，您还必须将元掩码连接到本地以太网。(参考见下图截图)。此外，这是你回到Ganche，复制一个以太坊钱包私钥，并导入到MetaMask(预装100 ETH)的时候</p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/52af007908b53e68c2ca5faf6add904f.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*ItQbdbPEwbRJxdlcBMlgRQ.png"/></div></figure><p id="6c84" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！在这一阶段，您将使本地前端应用程序连接到您的本地以太网，并且元掩码也连接到本地网络！</p><h1 id="4f7c" class="ko kp hu bd kq kr mt kt ku kv mu kx ky kz mv lb lc ld mw lf lg lh mx lj lk ll dt translated">从前端调用智能合同(10分钟)</h1><p id="544e" class="pw-post-body-paragraph ir is hu it b iu lm iw ix iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo hn dt translated">本节介绍前端应用程序如何与以太坊网络上传的智能合约对话。我们使用了一个名为<a class="ae jp" href="http://web3js.readthedocs.io/en/1.0/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> web3JS </strong> </a> <strong class="it hv">的库。</strong>我们将在<code class="eh mq mr ms mg b">src/utils/hashContract.js</code>引用该文件</p><p id="477b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与智能合约交互的所有应用程序共有3个共同步骤</p><h2 id="0b12" class="mk kp hu bd kq nj nk nl ku nm nn no ky jc np nq lc jg nr ns lg jk nt nu lk nv dt translated">1)初始化web3提供者环境</h2><p id="1fc6" class="pw-post-body-paragraph ir is hu it b iu lm iw ix iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo hn dt translated">您会在文件的前几行注意到这一点:</p><pre class="js jt ju jv fq mf mg mh mi aw mj dt"><span id="3b6e" class="mk kp hu mg b fv ml mm l mn mo">if (typeof web3 !== 'undefined') {<br/>  myWeb3 = new Web3(web3.currentProvider);<br/>} else {<br/>  // set the provider you want from Web3.providers<br/>  console.log('No Web3 Detected... using HTTP Provider');<br/>  return null;<br/>}</span></pre><p id="8bd5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它所做的是获得你的元掩码实例，并把它赋给变量<code class="eh mq mr ms mg b">myWeb3</code></p><h2 id="9146" class="mk kp hu bd kq nj nk nl ku nm nn no ky jc np nq lc jg nr ns lg jk nt nu lk nv dt translated">2)初始化智能合同</h2><pre class="js jt ju jv fq mf mg mh mi aw mj dt"><span id="bd15" class="mk kp hu mg b fv ml mm l mn mo">hashContract = new myWeb3.eth.Contract([<br/>      {<br/>        "constant": true,<br/>        "inputs": [],<br/>        "name": "getUserHashFile",<br/>        "outputs": [<br/>          {<br/>            "name": "",<br/>            "type": "uint256[]"<br/>          },<br/>          {<br/>            "name": "",<br/>            "type": "bytes32[]"<br/>          },<br/>          {<br/>            "name": "",<br/>            "type": "bytes32[]"<br/>          }<br/>        ],<br/>        "payable": false,<br/>        "stateMutability": "view",<br/>        "type": "function"<br/>      },<br/>      {<br/>        "constant": false,<br/>        "inputs": [<br/>          {<br/>            "name": "name",<br/>            "type": "bytes32"<br/>          },<br/>          {<br/>            "name": "md5Hash",<br/>            "type": "bytes32"<br/>          }<br/>        ],<br/>        "name": "addHashFile",<br/>        "outputs": [],<br/>        "payable": false,<br/>        "stateMutability": "nonpayable",<br/>        "type": "function"<br/>      }<br/>    ],<br/>    hashContractAddress,<br/>    );</span></pre><h2 id="78bd" class="mk kp hu bd kq nj nk nl ku nm nn no ky jc np nq lc jg nr ns lg jk nt nu lk nv dt translated">3)最后，调用智能合同</h2><p id="d790" class="pw-post-body-paragraph ir is hu it b iu lm iw ix iy ln ja jb jc lo je jf jg lp ji jj jk lq jm jn jo hn dt translated">注意上面你已经声明了你的契约为<code class="eh mq mr ms mg b">hashContract</code>，通过这样做，你允许web3JS知道你的智能契约中可用的方法。</p><p id="5a5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以使用以下方法调用您的智能合约<code class="eh mq mr ms mg b">hashContract.methods.xxx</code></p><pre class="js jt ju jv fq mf mg mh mi aw mj dt"><span id="fc6c" class="mk kp hu mg b fv ml mm l mn mo">hashContract.methods.getUserHashFile().call({from: address});</span><span id="64d0" class="mk kp hu mg b fv mp mm l mn mo">hashContract.methods.addHashFile(nameHash, hexHash).send({from: address})</span></pre><p id="fc65" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！我希望您对如何开发一个与以太坊网络交互的前端应用程序有所了解。</p><p id="4225" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jq">如果你喜欢这个帖子或者认为它对你有帮助，你可以使用我的推荐链接加入一个交流(如果你加入并交易，我会得到一些佣金):</em></p><ul class=""><li id="90e4" class="lr ls hu it b iu iv iy iz jc lt jg lu jk lv jo nw lx ly lz dt translated">【https://hitbtc.com/?ref_id=59f3f03a31222 T4】</li><li id="6404" class="lr ls hu it b iu ma iy mb jc mc jg md jk me jo nw lx ly lz dt translated"><a class="ae jp" href="https://www.binance.com/register.html?ref=10050322" rel="noopener ugc nofollow" target="_blank">https://www.binance.com/register.html?ref=10050322</a></li></ul><p id="0e04" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者，试试coinbase，你每交易100美元价值<a class="ae jp" href="https://www.coinbase.com/join/58e399c5641b9462a2ee6410" rel="noopener ugc nofollow" target="_blank">https://www.coinbase.com/join/58e399c5641b9462a2ee6410</a>的比特币，我们就能获得价值10美元的比特币</p></div></div>    
</body>
</html>