<html>
<head>
<title>How to use linbo-remote to manage school computers with little to no effort</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用linbo-remote轻松管理学校电脑</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-use-linbo-remote-to-manage-school-computers-with-little-to-no-effort-bf0c7d0cecab?source=collection_archive---------26-----------------------#2018-03-23">https://medium.com/hackernoon/how-to-use-linbo-remote-to-manage-school-computers-with-little-to-no-effort-bf0c7d0cecab?source=collection_archive---------26-----------------------#2018-03-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/9b40795155fc139df885e8ae615e3f87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1hZhpiGDgClKdBreodkqIQ.jpeg"/></div></div></figure><div class=""/><p id="9681" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Linbo是<a class="ae ka" href="http://www.linuxmuster.net/en/start" rel="noopener ugc nofollow" target="_blank">linuxmuster.net</a>最好的功能之一——一个免费的<a class="ae ka" href="https://openschoolsolutions.org/4-linux-school-server-comparison/" rel="noopener ugc nofollow" target="_blank">学校服务器解决方案</a>。我已经在我的最后一篇文章的<a class="ae ka" href="https://openschoolsolutions.org/linbo-one-best-features-linuxmuster-net/" rel="noopener ugc nofollow" target="_blank">中概述了Linbo的可能性。在那里我提到了一个简单的超级命令行程序，用于管理学校的计算机:<code class="eh kb kc kd ke b">linbo-remote</code>。你可以做任何你想用Linbo GUI做的事情，例如</a></p><ul class=""><li id="56fc" class="kf kg if je b jf jg jj jk jn kh jr ki jv kj jz kk kl km kn dt translated">对计算机进行分区和格式化，启动、关机等。</li><li id="13e4" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated">在一个房间或整个学校分发新图像(结合局域网唤醒)</li><li id="28b4" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated">随时同步计算机，让您选择的操作系统启动</li><li id="d84f" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated">在计算机上创建图像并将它们上传到服务器</li><li id="a426" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated">将<code class="eh kb kc kd ke b">linbo-remote</code>与其他脚本结合</li></ul><p id="8008" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">今天我想描述一下我们在学校是如何使用<code class="eh kb kc kd ke b">linbo-remote</code>的，并展示一下你可以用它做什么。</p><h1 id="c06f" class="kt ku if bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">使用linbo-remote部署新映像</h1><p id="4680" class="pw-post-body-paragraph jc jd if je b jf lr jh ji jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz hn dt translated">我们定期更新我们的Ubuntu映像，我们在学校的所有电脑上都使用它。我们通常在节假日或有新的重大更新时这样做(例如Firefox、LibreOffice、重要的安全更新)。使用以下命令，我们将映像部署到房间中的所有计算机:</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="d7a7" class="me ku if ke b fv mf mg l mh mi">$ linbo-remote -r room1 -p sync:1,halt -w 0</span></pre><p id="4f2e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">或者</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="cb62" class="me ku if ke b fv mf mg l mh mi">$ linbo-remote -r room1 -c sync:1,halt -w 60</span></pre><p id="8c1c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">单个参数含义的简短解释。</p><ul class=""><li id="8201" class="kf kg if je b jf jg jj jk jn kh jr ki jv kj jz kk kl km kn dt translated"><code class="eh kb kc kd ke b">-r</code>表示房间。用<code class="eh kb kc kd ke b">-g</code>你也可以指定一个组，用<code class="eh kb kc kd ke b">-i</code>指定一个IP或主机名。</li><li id="b39b" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated"><code class="eh kb kc kd ke b">-w</code>代表网络唤醒，即<code class="eh kb kc kd ke b">linbo-remote</code>唤醒电脑。局域网唤醒必须在BIOS中激活，并且只能通过插入的网线工作(例如，对于笔记本电脑)。<code class="eh kb kc kd ke b">-w</code>后面的数字指定等待Linbo执行命令的秒数。</li><li id="b1cd" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated"><code class="eh kb kc kd ke b">-p</code>和<code class="eh kb kc kd ke b">-c</code>的区别在于<code class="eh kb kc kd ke b">-p</code> Linbo在服务器上用命令创建一个文件。计算机一启动到Linbo就能得到这个文件。<code class="eh kb kc kd ke b">-c</code>尝试通过SSH将命令直接发送到电脑。这就是为什么我输入了60秒的等待时间，以便有足够的时间唤醒和引导所有的计算机。</li><li id="b512" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated">在<code class="eh kb kc kd ke b">-c</code>和<code class="eh kb kc kd ke b">-p</code>之后，您可以指定不同的命令。输入<code class="eh kb kc kd ke b">linbo-remote -h</code>获得所有可能性。几乎所有的命令后面都有一个冒号，后面是操作系统的编号。例如，如果你有一个Windows和Ubuntu的双引导系统，Windows得到数字1，Ubuntu得到数字2。</li><li id="ced2" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated"><code class="eh kb kc kd ke b">sync:1</code>，halt表示<code class="eh kb kc kd ke b">linbo-remote</code>同步电脑上的第一个操作系统，然后关闭电脑。</li><li id="afca" class="kf kg if je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn dt translated"><code class="eh kb kc kd ke b">format:1,sync:1,sync:2,start:2</code>指Linbo格式化并同步第一个操作系统的分区，然后同步第二个操作系统并启动。同步时，Linbo会检查服务器上是否有新的映像，如果有必要就下载它，并将其复制到相应的分区。</li></ul><h1 id="a9ff" class="kt ku if bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">学校计算机自动化管理</h1><p id="6e18" class="pw-post-body-paragraph jc jd if je b jf lr jh ji jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz hn dt translated">我们已经在上面看到了<code class="eh kb kc kd ke b">linbo-remote</code>的可能性。比如连接一个cronjob，我们可以每天早上同步启动学校或者某个房间的所有电脑，让所有电脑都“新鲜”起来上课用。</p><p id="e37c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为root用户，您可以创建一个新的cronjob</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="b830" class="me ku if ke b fv mf mg l mh mi">root@server$ crontab -e</span></pre><p id="bb1a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">并输入以下cronjob:</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="af02" class="me ku if ke b fv mf mg l mh mi">30 6 * * * * /usr/sbin/linbo-remote -r room1 -w 0 -p format:1,sync:1,sync:2,start:2 &gt; /dev/null 2&gt;&amp;1</span></pre><p id="d719" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每天早上6:30，一年中的每一天，Linbo现在都在1号房间照顾我们的电脑，同步两个操作系统，并启动第二个操作系统，这样学生就可以直接登录。</p><p id="7242" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你也可以使用<code class="eh kb kc kd ke b">linbo-remote</code>关闭所有引导到Linbo的电脑。</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="1409" class="me ku if ke b fv mf mg l mh mi">0 13,15,17,20 * * * * /usr/sbin/linbo-remote -r room1 -c halt &gt; /dev/null 2&gt;&amp;1</span></pre><p id="ab83" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下午1点、3点、5点和8点，1号房间里所有启动过Linbo的电脑都会被关闭。</p><p id="4f57" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些cronjobs非常有助于每天早上在学校的计算机上创建一个可靠的状态。这种解决方案的缺点是cronjobs每天都在执行，甚至在周末或假期也是如此。但是我们可以解决这个问题🙂</p><h1 id="b102" class="kt ku if bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">将linbo-remote与其他程序相结合</h1><p id="3365" class="pw-post-body-paragraph jc jd if je b jf lr jh ji jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz hn dt translated">Linuxmuster社区的一名成员编写了一个脚本来检查今天是否是上学日。因为<a class="ae ka" href="https://github.com/anschuetz/linuxmuster/tree/master/schultag" rel="noopener ugc nofollow" target="_blank">的原剧本</a>是用德语写的，所以我翻译了它。您可以<a class="ae ka" href="https://github.com/cdscacth/linuxmuster-scripts/tree/master/school-day" rel="noopener ugc nofollow" target="_blank">在Github </a>上找到它，并将其安装在服务器上，如下所示:</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="aea9" class="me ku if ke b fv mf mg l mh mi">$ git clone <a class="ae ka" href="https://github.com/cdscacth/linuxmuster-scripts.git" rel="noopener ugc nofollow" target="_blank">https://github.com/cdscacth/linuxmuster-scripts.git</a> $ $ cd linuxmuster-scripts/school-day</span></pre><p id="ed94" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在文件<code class="eh kb kc kd ke b">holidays.conf</code>和<code class="eh kb kc kd ke b">exceptions.conf</code>中，你必须输入公众假期和学校假期的日期，如下所示:</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="6322" class="me ku if ke b fv mf mg l mh mi"># Public Holiday<br/>20180301 Public Holiday 1<br/>20181015 Public Holiday 2</span><span id="42dc" class="me ku if ke b fv mj mg l mh mi"># School Holidays<br/>20171223–20180112 Christmas Break<br/>20180319–20180417 Easter Break<br/>20180625–20180813 Summer Break</span></pre><p id="4e9a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，您安装脚本与</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="4cd1" class="me ku if ke b fv mf mg l mh mi">$ sudo make install</span></pre><p id="b31f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果是学校日，脚本返回返回值“0”，否则，例如“99”(表示假期)。</p><p id="e851" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们可以调整上面的cronjobs，使它们只在一个上学日执行:</p><pre class="lw lx ly lz fq ma ke mb mc aw md dt"><span id="6252" class="me ku if ke b fv mf mg l mh mi">30 6 * * * * is-today-school-day &amp;&amp; /usr/sbin/linbo-remote -r room1 -w 0 -p format:1,sync:1,sync:2,start:2 &gt; /dev/null 2&gt;&amp;1</span><span id="c03d" class="me ku if ke b fv mj mg l mh mi">0 13,15,17,20 * * * * is-today-school-day &amp;&amp; /usr/sbin/linbo-remote -r room1 -c halt &gt; /dev/null 2&gt;&amp;1</span></pre><h1 id="4f2b" class="kt ku if bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">结论</h1><p id="1d50" class="pw-post-body-paragraph jc jd if je b jf lr jh ji jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz hn dt translated">Linbo，尤其是<code class="eh kb kc kd ke b">linbo-remote</code>帮我们做了很多工作。虽然我们在第一年做了很多“运动鞋管理”，但现在linbo-remote为我们做了。我们在学校里从一台电脑跑到另一台电脑，为他们提供新形象的日子已经一去不复返了。对我来说，Linbo是linuxmuster.net最好的功能，我还不知道任何其他软件可以帮助我们每天自动创建一个定义好的状态。一旦映像在计算机上，它也可以离线工作，也就是说，如果有东西“坏了”，学生可以自己重置他们的计算机。</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="95e1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="mr">最初发表于</em><a class="ae ka" href="https://openschoolsolutions.org/linbo-remote-manage-school-computers/" rel="noopener ugc nofollow" target="_blank"><em class="mr">openschoolsolutions.org</em></a><em class="mr">。</em> <strong class="je ig"> <em class="mr">注册</em> </strong> <em class="mr">订阅我们的时事通讯，获取免费的PDF格式的开源应用程序，供您的课堂使用，或者在Twitter上关注</em><a class="ae ka" href="https://twitter.com/OpenSchoolZ" rel="noopener ugc nofollow" target="_blank"><em class="mr">@ OpenSchoolZ</em></a><em class="mr">。</em></p></div></div>    
</body>
</html>