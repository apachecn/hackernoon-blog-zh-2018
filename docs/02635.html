<html>
<head>
<title>Making of a component library for React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React组件库的制作</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/making-of-a-component-library-for-react-e6421ea4e6c7?source=collection_archive---------0-----------------------#2018-03-24">https://medium.com/hackernoon/making-of-a-component-library-for-react-e6421ea4e6c7?source=collection_archive---------0-----------------------#2018-03-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir"><p id="5ad4" class="is it hu bd iu iv iw ix iy iz ja jb ek translated"><a class="ae jc" href="https://github.com/sasha240100/react-rectangle-popup-menu" rel="noopener ugc nofollow" target="_blank">Github</a>|<a class="ae jc" href="https://www.npmjs.com/package/react-rectangle-popup-menu" rel="noopener ugc nofollow" target="_blank">NPM</a>|<a class="ae jc" href="https://sasha240100.github.io/react-rectangle-popup-menu/examples/" rel="noopener ugc nofollow" target="_blank">Demo</a></p></blockquote><figure class="je jf jg jh ji jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff jd"><img src="../Images/514b8268464fe9fc82fa038b7073a70d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3WmLJLqm1IfeFyXmaRHaFQ.png"/></div></div><figcaption class="jq jr fg fe ff js jt bd b be z ek"><a class="ae jc" href="https://github.com/sasha240100/react-rectangle-popup-menu" rel="noopener ugc nofollow" target="_blank">https://github.com/sasha240100/react-rectangle-popup-menu</a></figcaption></figure><blockquote class="ju jv jw"><p id="b6ff" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated">最初发表于<a class="ae jc" href="https://www.zeolearn.com/magazine/making-a-component-library-for-react" rel="noopener ugc nofollow" target="_blank"> ZeoLearn </a>。</p></blockquote><p id="d48a" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">前一段时间，我决定写一篇文章，主题包括发布到NPM、API架构。最好的教程是react组件库开发。</p><p id="891e" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">对我来说，React组件库的一个很好的例子是<a class="ae jc" href="https://casesandberg.github.io/react-color/" rel="noopener ugc nofollow" target="_blank"> react-color </a>。它有一个简洁的文档网站，有简单的一步一步的指导，还有很多为React应用程序制作颜色选择器的不同变化。</p><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff ky"><img src="../Images/ffa62e15a0b3a9a4f19c99ce4e21ba3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hRIQSTmwHurF6SaDaqiQpA.png"/></div></div><figcaption class="jq jr fg fe ff js jt bd b be z ek"><a class="ae jc" href="https://casesandberg.github.io/react-color/" rel="noopener ugc nofollow" target="_blank">https://casesandberg.github.io/react-color/</a></figcaption></figure><p id="5137" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">所以我决定像谷歌一样制作一个<strong class="ka hv">矩形弹出菜单</strong>:</p><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff ld"><img src="../Images/2c489ccfd0a19466339eca2f21958a2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRGBA1m7hflC7gFTDj5TUw.png"/></div></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">This is from google.com website (an example of what I plan to make)</figcaption></figure><h2 id="a32c" class="le lf hu bd lg lh li lj lk ll lm ln lo kv lp lq lr kw ls lt lu kx lv lw lx ly dt translated">第一部分。准备项目(设置)</h2><p id="15f4" class="pw-post-body-paragraph jx jy hu ka b kb lz kd ke kf ma kh ki kv mb kl km kw mc kp kq kx md kt ku jb hn dt translated">让我们编造一些现代图书馆应该符合的要求。</p><ul class=""><li id="3a2d" class="me mf hu ka b kb kc kf kg kv mg kw mh kx mi jb mj mk ml mm dt translated">摇树</li><li id="2395" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated">UMD模式</li><li id="93b1" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated">构建输出是es5</li><li id="6200" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated">清除文档</li><li id="e671" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated">示例(演示)</li><li id="a600" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated">单元测试</li></ul><p id="9b86" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated"><strong class="ka hv">汇总&amp; Webpack </strong> =模块捆绑</p><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff ms"><img src="../Images/82d8b275dd85e6f803c7eb45648dc7f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GXH8DtF012998tJVrJahdg.png"/></div></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">Rollup &amp; Webpack</figcaption></figure><p id="1dbd" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">对于捆绑库，我选择了rollup(你可以在Rich Harris 的<a class="ae jc" rel="noopener" href="/webpack/webpack-and-rollup-the-same-but-different-a41ad427058c">“web pack和rollup:相同但不同”</a>中阅读更详细的文章，解释为什么Rollup更适合库)。</p><blockquote class="ju jv jw"><p id="b078" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated">上卷:<a class="ae jc" href="https://rollupjs.org/guide/en" rel="noopener ugc nofollow" target="_blank">https://rollupjs.org/guide/en</a></p></blockquote><p id="8a03" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">另外，我使用了<em class="jz"> webpack </em>(和<em class="jz"> webpack-dev-server </em>)来提供示例文件夹。它处理css包装、字体加载和es6 - &gt; es5翻译(在babel的帮助下)。</p><blockquote class="ju jv jw"><p id="62e4" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated">https://webpack.js.org/</p></blockquote><p id="3071" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">Jest =单元测试</p><p id="a776" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">脸书开发的单元测试工具，非常适合我们比较react组件快照的需要。</p><blockquote class="ju jv jw"><p id="62c3" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated">链接:<a class="ae jc" href="https://facebook.github.io/jest/" rel="noopener ugc nofollow" target="_blank">https://facebook.github.io/jest/</a></p></blockquote><p id="2b74" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated"><strong class="ka hv">快递</strong> =上菜实例</p><p id="8366" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">在项目中有一个次要的位置，但是帮助我们正确地配置适当的例子(因为<em class="jz"> webpack-dev-server </em>正在使用它)。</p><figure class="kz la lb lc fq jj"><div class="bz el l di"><div class="mt mu l"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">Sample of code, where we use express to serve static files for development mode</figcaption></figure><p id="9684" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated"><strong class="ka hv">巴别塔</strong> =写es6，提供es5</p><p id="c2dd" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">如今<strong class="ka hv"> ES6 </strong>已经被大多数知名浏览器广泛支持，但是<strong class="ka hv"> Babel </strong>不仅仅是与es5一起工作，它还是将javascript子集转换成浏览器兼容实现的全球标准。</p><p id="e689" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">在这个项目中，我们使用<strong class="ka hv"> Babel </strong>主要是为了使用最新的ES特性，如<em class="jz"> async/await </em>并支持JSX子集。</p><blockquote class="ju jv jw"><p id="4cc1" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated">链接:<a class="ae jc" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank">https://babeljs.io/</a></p></blockquote></div><div class="ab cl mv mw hc mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hn ho hp hq hr"><h2 id="6a21" class="le lf hu bd lg lh li lj lk ll lm ln lo kv lp lq lr kw ls lt lu kx lv lw lx ly dt translated">第二部分。发展</h2><p id="4d1d" class="pw-post-body-paragraph jx jy hu ka b kb lz kd ke kf ma kh ki kv mb kl km kw mc kp kq kx md kt ku jb hn dt translated">现在，一旦我们安装了所有需要的devDependencies，我们就可以继续进行开发过程了。</p><p id="68b1" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">第一步是决定项目文件夹的结构。对于这个库，这是我最后得到的:</p><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff nc"><img src="../Images/72cdffc053b4c5aae6e6e05d49cf716c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K4WYVVhou1yKW-yEW8rE8A.png"/></div></div></figure><ul class=""><li id="24a4" class="me mf hu ka b kb kc kf kg kv mg kw mh kx mi jb mj mk ml mm dt translated"><code class="eh nd ne nf ng b">assets/</code> —跳过此文件夹，这只是我在API文档中的图像</li><li id="cc71" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated"><code class="eh nd ne nf ng b">build/</code> — UMD和ES模块构建文件+ sourcemaps。</li></ul><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff nh"><img src="../Images/ded56dd3ba64e835abe0589f5d6076af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qK1u8KdOHVMkGdD65Jg5dw.png"/></div></div></figure><ul class=""><li id="e7e5" class="me mf hu ka b kb kc kf kg kv mg kw mh kx mi jb mj mk ml mm dt translated"><code class="eh nd ne nf ng b">examples/</code> —这个文件夹包含了我在不同情况下用来测试库的测试<code class="eh nd ne nf ng b">.html</code>例子。</li><li id="63bc" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated"><code class="eh nd ne nf ng b">src/</code> —包含在JSX编写的库源代码和用于文件夹内巴别塔配置的<code class="eh nd ne nf ng b">.babelrc</code>文件</li><li id="fd2a" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated"><code class="eh nd ne nf ng b">test/</code> — JEST测试</li></ul><p id="3d8a" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">完成项目配置需要其他文件。我强烈推荐你使用<code class="eh nd ne nf ng b">travis.yml</code>进行持续集成(现代项目的必备，尤其是比如组件库)。</p><blockquote class="ju jv jw"><p id="1252" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated"><strong class="ka hv">重要的</strong>:不要忘记在rollup中将<code class="eh nd ne nf ng b">react</code>和<code class="eh nd ne nf ng b">react-dom</code>从内部依赖关系中排除，否则，你会得到客户端的兼容性错误和不好的副作用，比如大的包大小和不好的性能。</p></blockquote><pre class="kz la lb lc fq ni ng nj nk aw nl dt"><span id="69ee" class="le lf hu ng b fv nm nn l no np"><strong class="ng hv">// rollup.config.babel.js</strong><br/>{</span><span id="7a32" class="le lf hu ng b fv nq nn l no np">  // ...<br/>  external: <strong class="ng hv">['react', 'react-dom']</strong>,</span><span id="a4d3" class="le lf hu ng b fv nq nn l no np">  globals: {<br/>    <strong class="ng hv">react: 'React',<br/>    'react-dom': 'ReactDOM'</strong><br/>  }<br/>}</span></pre><h2 id="f2e3" class="le lf hu bd lg lh li lj lk ll lm ln lo kv lp lq lr kw ls lt lu kx lv lw lx ly dt translated">源文件/代码</h2><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff nr"><img src="../Images/fe7f97d2cd022ccc8a50146b5d21f038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9rGcMD0e7gJqk-9ggVGB0Q.png"/></div></div></figure><p id="f60a" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">在<code class="eh nd ne nf ng b">index.js</code>文件中，我链接了每一个导出类的文件(实际上是React组件):</p><pre class="kz la lb lc fq ni ng nj nk aw nl dt"><span id="6b2f" class="le lf hu ng b fv nm nn l no np"><strong class="ng hv">// index.js</strong><br/>export * from './PopupMenu';<br/>export * from './PopupTable';<br/>export * from './PopupText';</span></pre><p id="fd76" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">我们不会涵盖为这个库编写的所有代码，因为它更多的是针对特定主题的，而不是有帮助的，所以让我们仅以解释我们在项目组织中的需求的代码的几个部分为例。</p><figure class="kz la lb lc fq jj"><div class="bz el l di"><div class="mt mu l"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek"><strong class="ak">PopupMenu</strong> header part</figcaption></figure><p id="4bb9" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">当我们为UI构建组件时，我们包含了样式文件，rollup允许我们像webpack一样用样式和图像进行捆绑。在我的例子中，我选择了<code class="eh nd ne nf ng b">sass</code>语法，因为它是我所熟悉的。这意味着<code class="eh nd ne nf ng b">./PopupMenu.scss</code>文件将从<code class="eh nd ne nf ng b">sass</code>编译到<code class="eh nd ne nf ng b">css</code>，然后作为javascript代码插入到html <code class="eh nd ne nf ng b">&lt;head&gt;</code>标签中。</p><figure class="kz la lb lc fq jj"><div class="bz el l di"><div class="mt mu l"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek"><strong class="ak">rollup-plugin-postcss</strong> module used in rollup config file.</figcaption></figure><p id="be52" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">考虑到我们启用了<code class="eh nd ne nf ng b">"modules": true</code>特性，即启用CSS模块特性:</p><pre class="kz la lb lc fq ni ng nj nk aw nl dt"><span id="d0cb" class="le lf hu ng b fv nm nn l no np">import <strong class="ng hv">style</strong> from './PopupMenu.scss';</span><span id="192a" class="le lf hu ng b fv nq nn l no np">// Somewhere in JSX<br/>// ...</span><span id="8a5b" class="le lf hu ng b fv nq nn l no np">  render() {<br/>    return (&lt;div className={<strong class="ng hv">style.myClassName</strong>} /&gt;)<br/>  }</span><span id="cc68" class="le lf hu ng b fv nq nn l no np">// ...</span></pre><p id="aee7" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">每当我们在ES6模块中使用JSX语法时，我们都需要包含react依赖，否则会导致构建错误。</p><pre class="kz la lb lc fq ni ng nj nk aw nl dt"><span id="1ee4" class="le lf hu ng b fv nm nn l no np">import <strong class="ng hv">React</strong>, {Component} from 'react';</span></pre><p id="fc7f" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">在我的例子中，我甚至需要使用React以这种旧的方式向子组件提供上下文:<em class="jz">(旧的是因为React最近引入了</em> <a class="ae jc" rel="noopener" href="/dailyjs/reacts-️-new-context-api-70c9fe01596b"> <em class="jz">新的上下文API </em> </a> <em class="jz"> ) </em>。我有<code class="eh nd ne nf ng b">PopupTable</code>，它取父<code class="eh nd ne nf ng b">PopupMenu</code>的<code class="eh nd ne nf ng b">popupWidth</code></p><figure class="kz la lb lc fq jj"><div class="bz el l di"><div class="mt mu l"/></div><figcaption class="jq jr fg fe ff js jt bd b be z ek">React context in PopupMenu class</figcaption></figure><p id="70e3" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">我还想强调一下<code class="eh nd ne nf ng b">classnames</code> npm模块，它很好地结合了CSS模块中的多个类:</p><figure class="kz la lb lc fq jj fe ff paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="fe ff ns"><img src="../Images/f8c1001b5640e1b9a9f072de2a8b0a11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hzqtg8ofGh7OwTKTmng68Q.png"/></div></div><figcaption class="jq jr fg fe ff js jt bd b be z ek"><strong class="bd nt">classnames </strong>module<strong class="bd nt"> </strong>example</figcaption></figure><p id="8bcd" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated"><strong class="ka hv">用法:</strong></p><figure class="kz la lb lc fq jj"><div class="bz el l di"><div class="mt mu l"/></div></figure><h2 id="5aed" class="le lf hu bd lg lh li lj lk ll lm ln lo kv lp lq lr kw ls lt lu kx lv lw lx ly dt translated">单元测试</h2><p id="a9f2" class="pw-post-body-paragraph jx jy hu ka b kb lz kd ke kf ma kh ki kv mb kl km kw mc kp kq kx md kt ku jb hn dt translated">首先，您需要决定您想要选择哪个单元测试框架。我使用了一些流行的单元测试框架，并建议您进行测试:</p><ul class=""><li id="71fa" class="me mf hu ka b kb kc kf kg kv mg kw mh kx mi jb mj mk ml mm dt translated"><a class="ae jc" href="https://mochajs.org/" rel="noopener ugc nofollow" target="_blank">莫卡吉斯</a></li><li id="dfc1" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated"><a class="ae jc" href="https://github.com/avajs/ava" rel="noopener ugc nofollow" target="_blank"> AVA </a></li><li id="e8c6" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated"><a class="ae jc" href="https://facebook.github.io/jest/" rel="noopener ugc nofollow" target="_blank">笑话</a></li></ul><p id="92af" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">对于这个组件库，我选择了Jest。因为它是由脸书(与React相同)开发的，并且支持开箱即用的React组件快照测试。</p><blockquote class="ju jv jw"><p id="5d8d" class="jx jy jz ka b kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku jb hn dt translated"><em class="hu">捕获React树或其他可序列化值的快照，以简化测试并分析状态如何随时间变化。</em>(来自JEST网站)</p></blockquote><figure class="kz la lb lc fq jj"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="f514" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">这非常简单，您可以呈现一个想要测试的react组件，然后调用<code class="eh nd ne nf ng b">component.toJSON()</code>将它转换成一个呈现的html树。示例:</p><pre class="kz la lb lc fq ni ng nj nk aw nl dt"><span id="5bd2" class="le lf hu ng b fv nm nn l no np">// Jest Snapshot v1, <a class="ae jc" href="https://goo.gl/fbAQLP" rel="noopener ugc nofollow" target="_blank">https://goo.gl/fbAQLP</a></span><span id="8eef" class="le lf hu ng b fv nq nn l no np"><strong class="ng hv">exports[`PopupMenu should render correctly 1`]</strong> = `<br/>&lt;div<br/>  className="PopupMenu_PopupMenu__8TfA4"<br/>&gt;<br/>  &lt;div<br/>    className="PopupMenu_button__20m_Y"<br/>    onMouseOut={[Function]}<br/>    onMouseOver={[Function]}<br/>  /&gt;<br/>  &lt;div<br/>    className="PopupMenu_popover__3hd_Z"<br/>    onMouseOut={[Function]}<br/>    onMouseOver={[Function]}<br/>    style={<br/>      Object {<br/>        "height": "auto",<br/>        "left": "calc(-100px + 50%)",<br/>        "visibility": "hidden",<br/>        "width": "calc(200px - 10px)",<br/>      }<br/>    }<br/>  /&gt;<br/>&lt;/div&gt;<br/>`;</span></pre><p id="1b22" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">一旦你第一次这样做了，它就被保存到一个<code class="eh nd ne nf ng b">*.test.js.snap</code>文件中，这个文件基本上是一个模块，它导出几个渲染的DOM树字符串来与每个新的渲染进行比较。如果DOM树发生了变化，它会告诉你。如果树被积极的改变所改变(意味着这是预期的)，您必须运行<code class="eh nd ne nf ng b">jest -u</code>来保存新的快照。</p></div><div class="ab cl mv mw hc mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hn ho hp hq hr"><h1 id="0803" class="nu lf hu bd lg nv nw nx lk ny nz oa lo ob oc od lr oe of og lu oh oi oj lx ok dt translated">结论</h1><p id="7cf7" class="pw-post-body-paragraph jx jy hu ka b kb lz kd ke kf ma kh ki kv mb kl km kw mc kp kq kx md kt ku jb hn dt translated">让我们强调一下这篇文章中最相关的提示:</p><ul class=""><li id="c427" class="me mf hu ka b kb kc kf kg kv mg kw mh kx mi jb mj mk ml mm dt translated"><strong class="ka hv"> <em class="jz"> Rollup </em> </strong> <em class="jz">比Webpack更适合组件库</em></li><li id="d901" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated"><em class="jz">包含</em><strong class="ka hv"><em class="jz">postscs</em></strong><em class="jz">插件，将css捆绑成同一个js文件</em></li><li id="bd09" class="me mf hu ka b kb mn kf mo kv mp kw mq kx mr jb mj mk ml mm dt translated">使用单元测试和持续集成向他人展示您关心稳定性并防止意外错误。</li></ul><p id="1de2" class="pw-post-body-paragraph jx jy hu ka b kb kc kd ke kf kg kh ki kv kk kl km kw ko kp kq kx ks kt ku jb hn dt translated">我还建议你将构建分成两步，<code class="eh nd ne nf ng b">development</code>和<code class="eh nd ne nf ng b"><strong class="ka hv">production</strong></code>(包括<em class="jz">缩小</em>和进一步优化)。</p><blockquote class="ir"><p id="6186" class="is it hu bd iu iv ol om on oo op jb ek translated">所有的源码都可以在<a class="ae jc" href="https://github.com/sasha240100/react-rectangle-popup-menu" rel="noopener ugc nofollow" target="_blank"> <strong class="ak"> Github页面</strong> </a>找到。并且生成的<a class="ae jc" href="https://sasha240100.github.io/react-rectangle-popup-menu/examples/" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">演示</strong> </a>也是可用的。</p></blockquote><blockquote class="ju jv jw"><p id="3abe" class="jx jy jz ka b kb oq kd ke kf or kh ki kj os kl km kn ot kp kq kr ou kt ku jb hn dt translated">最初发表于<a class="ae jc" href="https://www.zeolearn.com/magazine/making-a-component-library-for-react" rel="noopener ugc nofollow" target="_blank"> ZeoLearn </a>。</p></blockquote><blockquote class="ir"><p id="e521" class="is it hu bd iu iv iw ix iy iz ja jb ek translated">最近我为Skillshare做了一个<a class="ae jc" href="https://skl.sh/2shhq00" rel="noopener ugc nofollow" target="_blank">“WebGL世界介绍”</a>课程，你可能会在那里找到一些有趣的web GL秘密！<a class="ae jc" href="https://skl.sh/2shhq00" rel="noopener ugc nofollow" target="_blank">点击这里。</a></p></blockquote></div></div>    
</body>
</html>