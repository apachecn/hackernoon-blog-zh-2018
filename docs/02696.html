<html>
<head>
<title>Build a Serverless Production-Ready Blog</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个无服务器的生产就绪型博客</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-serverless-production-ready-blog-b1583c0a5ac2?source=collection_archive---------8-----------------------#2018-03-26">https://medium.com/hackernoon/build-a-serverless-production-ready-blog-b1583c0a5ac2?source=collection_archive---------8-----------------------#2018-03-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/d71897783360ce2f4284dcc2aeb125a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:924/format:webp/1*LnVkpxJgIzB_58DAHrg8-w.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">http://www.slowcoder.com</figcaption></figure><p id="635c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你是否厌倦了维护你的<strong class="je hv"> CMS </strong> (WordPress，Drupal等)？支付昂贵的托管费？每天修复安全问题？</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div class="fe ff ka"><img src="../Images/2b1184ac3a004a066c1faa464dce8f57.png" data-original-src="https://miro.medium.com/v2/resize:fit:952/0*epQp_10DEgGvI33A."/></div></figure><p id="fbc6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不久前，我发现了一个名为<a class="ae kf" href="https://hexo.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> Hexo </strong> </a> <strong class="je hv"> </strong>的新博客框架，它可以让你以博客文章的形式发布<strong class="je hv"> Markdown </strong>文档。所以像往常一样，我亲自动手写了这篇文章，向你展示如何用Hexo构建一个生产就绪的博客，并使用AWS S3让你的博客变得无服务器化。在这个过程中，我将向您展示如何通过建立一个<strong class="je hv"> CI/CD </strong>管道来自动化新帖子的部署。</p><p id="bcf4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要开始使用<strong class="je hv">，Hexo </strong>需要<strong class="je hv">节点。JS </strong> &amp; <strong class="je hv"> Git </strong>待安装。一旦安装了所有需求，发出以下命令来安装<strong class="je hv"> Hexo CLI </strong>:</p><blockquote class="kg kh ki"><p id="c22d" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">npm安装-g hexo-cli</p></blockquote><p id="2180" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，创建一个新的空项目:</p><blockquote class="kg kh ki"><p id="7930" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">hexo初始化slowcoder.com</p></blockquote><p id="da4b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">修改<em class="kj"> _config.yml </em>文件中的博客全局设置:</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="ddab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">用“<strong class="je hv"> hexo server </strong>”启动一个本地服务器。默认情况下，这是在<a class="ae kf" href="http://localhost:4000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:4000 </a>。你会看到Hexo预定义的“<strong class="je hv"> Hello World </strong>”测试帖:</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="fe ff kp"><img src="../Images/fca0127045bec7dcc73946ba37f0b38e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M97KDwf3ulIxdZqy."/></div></div></figure><p id="759f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你想改变默认主题，你只需要去<a class="ae kf" href="https://hexo.io/themes/" rel="noopener ugc nofollow" target="_blank">这里</a>找一个你喜欢的新主题。</p><p id="4df6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我选择<a class="ae kf" href="https://github.com/klugjo/hexo-theme-magnetic" rel="noopener ugc nofollow" target="_blank">磁性主题</a>，因为它包含许多功能:</p><ul class=""><li id="99ac" class="ku kv hu je b jf jg jj jk jn kw jr kx jv ky jz kz la lb lc dt translated">迪斯克斯和脸书的评论</li><li id="cafc" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">谷歌分析</li><li id="4311" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">帖子和页面的封面图像</li><li id="56f7" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">标签支持</li><li id="a6a9" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">响应图像</li><li id="6f3f" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">图像库</li><li id="d8ae" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">社交账户配置</li><li id="5f2b" class="ku kv hu je b jf ld jj le jn lf jr lg jv lh jz kz la lb lc dt translated">页码</li></ul><p id="8664" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如下克隆主题<strong class="je hv"> GitHub </strong>仓库:</p><blockquote class="kg kh ki"><p id="9120" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">https://github.com/klugjo/hexo-theme-magnetic主题/磁性</p></blockquote><p id="624a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后更新你博客的主<em class="kj"> _config.yml </em>设置主题为<em class="kj">磁性</em>。一旦完成，重启服务器<em class="kj"> : </em></p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="fe ff li"><img src="../Images/a7f85e9155b553715f8bde155d116ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*seGeOToeSEOaEGHh."/></div></div></figure><p id="ffb8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在你差不多完成了你的博客设置。是时候写你的第一篇文章了。要生成新的文章文件，请使用以下命令:</p><blockquote class="kg kh ki"><p id="6cb4" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">hexo新帖子_标题</p></blockquote><p id="467f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，登录到<strong class="je hv"> AWS管理控制台</strong>，导航到<strong class="je hv"> S3仪表盘</strong>并创建一个<strong class="je hv"> S3桶</strong>或使用<strong class="je hv"> AWS CLI </strong>创建一个新桶:</p><blockquote class="kg kh ki"><p id="72a4" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">aws s3 mb s3://slowcoder.com</p></blockquote><p id="9ea1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将下面的<strong class="je hv">策略</strong>添加到<strong class="je hv"> S3桶</strong>中，使所有对象默认为公共的:</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="1e96" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，在S3桶上启用<strong class="je hv">静态网站托管</strong>:</p><blockquote class="kg kh ki"><p id="0c64" class="jc jd kj je b jf jg jh ji jj jk jl jm kk jo jp jq kl js jt ju km jw jx jy jz hn dt translated">aws s3网站S3://slow coder . com-索引-文档index.html</p></blockquote><p id="924e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以便在每次发布新文章时将博客部署到产品中的过程自动化。我们将使用<strong class="je hv"> CircleCI </strong>设置一个<strong class="je hv"> CI/CD </strong>管道。</p><p id="4910" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用您的<strong class="je hv"> GitHub </strong>帐户登录<a class="ae kf" href="https://circleci.com/" rel="noopener ugc nofollow" target="_blank"> CircleCI </a>，然后将<em class="kj"> circle.yml </em>文件添加到您的项目中:</p><figure class="kb kc kd ke fq iv"><div class="bz el l di"><div class="kn ko l"/></div></figure><p id="4c56" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意:请务必在<strong class="je hv"> CircleCI </strong>上的项目设置页面中设置<strong class="je hv"> AWS访问密钥ID </strong>和<strong class="je hv"> Secret访问密钥</strong>(<em class="kj">S3:PutObject</em>permission)。</p><p id="ed76" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，每次您将更改推送到您的<strong class="je hv"> GitHub </strong> repo时，<strong class="je hv"> CircleCI </strong>会自动将更改部署到<strong class="je hv"> S3 </strong>。这是一个临时构建:</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="fe ff lj"><img src="../Images/f2e06bccc176a6f5ad333a054f98857e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dkTJjHSTQAGENEl0."/></div></div></figure><p id="3cde" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，为了让我们的博客更方便用户，我们将在<strong class="je hv"> Route53 </strong>中设置一个自定义域名，如下所示:</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="fe ff lk"><img src="../Images/4b185c7c42a0e3551f92efd6e5949a5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EbePGgVR7oD6TP_A."/></div></div></figure><p id="405d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意:你可以更进一步，在<strong class="je hv"> S3 </strong>桶的前面设置一个<strong class="je hv"> CloudFront分布</strong>来优化博客资产的交付。</p><p id="87fb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你现在可以输入以下地址来测试你的全新博客:<a class="ae kf" href="http://slowcoder.com/" rel="noopener ugc nofollow" target="_blank">http://slowcoder.com</a>:</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kq kr di ks bf kt"><div class="fe ff li"><img src="../Images/ad9945b1914cf65205ea5e110eef8e1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ebPs7tKhxtUcqCkt."/></div></div></figure></div></div>    
</body>
</html>