<html>
<head>
<title>UIView Extension</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">UIView扩展</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/uiview-extension-c1d3bfe33ecf?source=collection_archive---------14-----------------------#2018-03-26">https://medium.com/hackernoon/uiview-extension-c1d3bfe33ecf?source=collection_archive---------14-----------------------#2018-03-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/></div><div class="ab cl ir is hc it" role="separator"><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw"/></div><div class="hn ho hp hq hr"><p id="6060" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">随着swift的进步及其为扩展提供强大功能所带来的变化。开发人员已经开始把更多的注意力放在扩展上，而不是在大多数情况下用<a class="ae jw" href="https://hackernoon.com/tagged/subclassing" rel="noopener ugc nofollow" target="_blank">子类化</a>。</p><p id="21d2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">本教程不是为了讨论什么时候使用扩展或子类，或者它们的优缺点。这个博客更侧重于UIView扩展，并展示它如何通过不同类型的用例帮助我们并使我们的生活变得简单。</p><h2 id="5b6d" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated"><strong class="ak"> 1。添加IBInspectable </strong></h2><p id="8d75" class="pw-post-body-paragraph iy iz hu ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">如果你不熟悉“IBInspectable ”,你可以浏览一下这个WWDC视频，它展示了这个关键词<a class="ae jw" href="https://developer.apple.com/videos/play/wwdc2015/407/" rel="noopener ugc nofollow" target="_blank">https://developer.apple.com/videos/play/wwdc2015/407/</a>的用法和威力</p><p id="67c7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">也就是说，现在我们知道了什么是IBInspectable，以及如何使用它，但是我们不会将任何<a class="ae jw" href="https://hackernoon.com/tagged/uiview" rel="noopener ugc nofollow" target="_blank"> UIView </a>子类化并在其中添加该属性，相反，我们将看到如何将它添加到扩展中，以便能够在任何UIView子类实例中使用，而无需任何额外的代码行。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff kx"><img src="../Images/010922e8a15b87bacf4a16264129b67a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6KG4uobjh6z8BK63ir5JDQ.png"/></div></div></figure><p id="e058" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如你所看到的，这段代码显示了我们通过将视图的层属性包装在IBInspectable中对它们所做的更改。</p><p id="e3b0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">将它添加到我们的UIView扩展之后，我们可以很容易地从storyboard/Nib本身将它们用于UIView的任何子类。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lj"><img src="../Images/350b89827a64d54254a3ca2530ebff34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kw-Y_okw6IjGsBEVLP7qeA.png"/></div></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek">This is how it will look in your storyboard/nib files.</figcaption></figure><p id="fdc0" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">因此，简而言之，我们在一个地方将它添加到UIView扩展中，不再需要处理代码中的层交互。</p><h2 id="b27b" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated"><strong class="ak"> 2。可重复使用的用户界面参数</strong></h2><p id="2d37" class="pw-post-body-paragraph iy iz hu ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">几乎每个应用程序都有一些共同的用户界面风格，通过确保相同的主题，用户熟悉，可以在应用程序的大部分地方使用。<br/>这些变化可以是圆角半径、应用阴影、应用边框以及所有这些的组合。<br/>我有这种类型的需求，但不想复制/粘贴或创建任何子类来处理这种情况，这似乎也是一个很好的扩展用法。</p><p id="a7ed" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">接下来，你可以看到扩展中增加了一些方法，把所有的改变都打包在一起，同样，在代码中，我们不必处理层级别的改变，也不必一次又一次地添加boiler plate代码。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lo"><img src="../Images/629da6c5195633abb1bc19ecad2387f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jYCsqOf4ZbsFfgIgPHHVCg.png"/></div></div></figure><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lp"><img src="../Images/903c783f4a6289e8e1a8cdaa9ecfd131.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NYgbwJLqnEfxR7mpwkOG5w.png"/></div></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek">Applying shadow function to UIButton and UIView instance.</figcaption></figure><p id="f990" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如您在上面看到的，现在这可以以一种方便的方式轻松地用于任何UIView实例。(如果你的大多数视图都有相同的属性，你可以进一步将它包装在另一个帮助器方法中，这就是上面的<code class="eh lq lr ls lt b">applyGlow</code>所做的。同样，这是根据使用案例)</p><p id="acd5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv"> 3。其他帮助方法</strong></p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lu"><img src="../Images/5cbc57940552b6214d1810cbdd368f40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hc-kQ52Myr_oAfuEhAGSNA.png"/></div></div></figure><h2 id="1e4c" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated"><strong class="ak"> 4。通用实用方法</strong></h2><p id="8710" class="pw-post-body-paragraph iy iz hu ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">除了更新/呈现视图元素的方法，扩展还可以处理如下实用方法:</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lv"><img src="../Images/2873f1ead052fa375585e3b3adbadbb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mwiNcoxdKLI6EFsJxmxffA.png"/></div></div></figure><h2 id="f23b" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated"><strong class="ak"> 5。无障碍方法</strong></h2><p id="befb" class="pw-post-body-paragraph iy iz hu ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">拥有带有单独xib的定制视图的标准方法是为它们取相同的名字。这种耦合可以用来容易地提取视图。下面您可以看到添加了自定义方法来返回特定UIView子类的视图。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff lw"><img src="../Images/f79c43b5a226e8fea10cf0e6d6b2b32d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZzLCmSkDU8JB_Di_R2A9pQ.png"/></div></div></figure><p id="c232" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">假设我们有一个名为<code class="eh lq lr ls lt b">InputView</code>的UIView子类，它有一个单独的xib，第一个视图的类是<code class="eh lq lr ls lt b">InputView</code>。现在，如果我们在扩展中添加了上述方法，我们只需使用下面的代码来获得所需的视图。</p><pre class="ky kz la lb fq lx lt ly lz aw ma dt"><span id="553a" class="jx jy hu lt b fv mb mc l md me">let view = <!-- -->InputView().loadNib()</span></pre><h2 id="0e0f" class="jx jy hu bd jz ka kb kc kd ke kf kg kh jj ki kj kk jn kl km kn jr ko kp kq kr dt translated"><strong class="ak"> 6。保存状态:</strong></h2><p id="d82e" class="pw-post-body-paragraph iy iz hu ja b jb ks jd je jf kt jh ji jj ku jl jm jn kv jp jq jr kw jt ju jv hn dt translated">让我们看看在扩展中保存一些状态如何帮助我们提供一些强大的功能。</p><p id="d604" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">有些人可能不同意这种实现，但只是添加它，以便您可以检查并向我提供您的反馈(它的工作很好，对我非常有用，直到现在)。以下代码可用于在UIView的任何子类上切换加载器的可见性。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="fe ff mf"><img src="../Images/172995f3bffc7d2272548173551fa365.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6RRJITNtRmU7cPA23-Dy-Q.png"/></div></div></figure><p id="3d97" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如你在上面看到的，MBProgressHUD被用于通过应用程序显示加载器。这两个方法是在UIView扩展中添加的。这里需要注意的一点是，我们不能在扩展中保存属性，所以这里使用了“objc_getAssociatedObject”。</p><p id="7c0b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">上述方法的好处是:</p><ul class=""><li id="af48" class="mg mh hu ja b jb jc jf jg jj mi jn mj jr mk jv ml mm mn mo dt translated">由于装载机处理只在一个地方完成，如果需要，装载机可以很容易地更新。</li><li id="ed3a" class="mg mh hu ja b jb mp jf mq jj mr jn ms jr mt jv ml mm mn mo dt translated">所有UIView子类中都有切换加载器的方法，无论它是UIButton、UIView还是UILabel等。</li></ul><pre class="ky kz la lb fq lx lt ly lz aw ma dt"><span id="babb" class="jx jy hu lt b fv mb mc l md me">closeButton.showLoader()<br/>closeButton.hideLoader()</span></pre></div><div class="ab cl ir is hc it" role="separator"><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw ix"/><span class="iu bw bk iv iw"/></div><div class="hn ho hp hq hr"><p id="9591" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如在开始中提到的，这是为了展示UIView扩展的不同使用方式，并给出一些我使用的例子。您可以根据需要添加更多的方法。</p><p id="2b83" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">以上代码的要点可以在<a class="ae jw" href="https://gist.github.com/Ankit-Aggarwal/7010a822bb2df2a594110d85b8f1a500" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="98be" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您发现更多的用例，以及它如何帮助您定义UIView扩展，请告诉我:)</p><p id="b4d7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果您有任何问题，或者想要对代码进行一些添加/修改，或者您有任何反馈，请在下面的评论中提出。</p><p id="acea" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">感谢阅读！</strong></p><figure class="ky kz la lb fq lc"><div class="bz el l di"><div class="mu mv l"/></div></figure></div></div>    
</body>
</html>