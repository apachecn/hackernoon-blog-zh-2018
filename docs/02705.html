<html>
<head>
<title>Securing APIS with JSON Web Tokens and an API Gateway</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用JSON Web令牌和API网关保护API</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/securing-apis-with-json-web-tokens-and-an-api-gateway-b9b589149616?source=collection_archive---------17-----------------------#2018-03-26">https://medium.com/hackernoon/securing-apis-with-json-web-tokens-and-an-api-gateway-b9b589149616?source=collection_archive---------17-----------------------#2018-03-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="fef8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">什么是JSON Web令牌？为什么它们在微服务架构风格的上下文中很重要？</p><p id="b7df" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很高兴你问了。谈到JSON Web令牌，有很多东西需要讨论，但是让我们从API网关的概述开始，然后我们将深入研究JSON Web令牌以及如何开始(包括一个很棒的新视频教程)。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/28b631ece8356fc6da8327d620df5855.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P5HsUQhPdg7_qXFc4Mv-Qg.png"/></div></div></figure><h1 id="135c" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">简介:API网关是微服务的核心</h1><p id="94ba" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">您可能想知道什么是API网关，为什么它很重要。</p><p id="7661" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">TLDR:这是件大事。</p><p id="421e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里有一个小秘密:它跨越了你的业务的业务方面和技术方面。根据定义，API网关被认为是“中间件”，因为它位于后端服务、web和其他外部客户端之间。API网关通过一组协议和一组RESTful APIs来执行这个任务。</p><p id="4dcf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，它将几乎所有必需的逻辑从客户端移至网关，这使得开发、保护、管理和扩展终端变得更加简单。</p><p id="b347" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你像网飞或谷歌一样，转向微服务可能并不容易，但你可以认识到将整体架构分解为更小、更易管理的部分的好处。您的架构看起来有点像这样:</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff lf"><img src="../Images/e2c1735dc298d1a961ff692bf30d7cd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BLBGmZZwvzqr6pQPh_bkeA.png"/></div></div></figure><p id="661d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如您可能已经注意到的那样，它已经很乱了，而且(至少在纸面上)看起来更不安全，而且考虑到如此多不同的接触点和复杂的信息路由，连接到外部资源也更加困难。</p><p id="318a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="le">此外，当</em> <strong class="it hv"> <em class="le">迁移到微服务的主要好处是让生活更轻松</em> </strong> <em class="le">更灵活，同时又更安全时，谁还想处理所有这些呢？</em></p><p id="4274" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个问题触及了企业规模增长战略的一个非常重要的问题。在每个接触点连接大量微服务不符合以安全方式构建的典型企业标准。更多接触点，更多监控。需要监控的内容越多，就有越多的资源花费在本应简单明了的重复性工作上。那现在怎么办？</p><p id="1877" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过添加API网关，您可以重新组织与外部接触点、应用和API的关系。本质上，保护您的微服务，使您能够在构建业务逻辑的同时，让工程师的工作更轻松。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/bf663b94fec953897d73d9cc40c68232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Zha1mkimMXNH_7F0.png"/></div></div></figure><p id="a3d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这种新的关系通过单一接触点得到强调，您可以保护、监控和扩展这种接触点。作为一个基本的行业标准，API网关处理来自外部API的认证和授权。</p><p id="6369" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="le">可扩展、高效——JSON Web Tokens(JWT)和OAuth有什么不让人喜欢的呢？</em></p><p id="9053" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而；有不止一种方法来协调这一点。</p><p id="ebbc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">JSON Web令牌(JWT)的另一个重要方面是您计划如何初始化它们。一方面是支持由其他身份服务器发起的JSON Web令牌，比如Auth0。另一方面是通过我们的身份服务器实际启动和管理jwt。这不仅与您的技术方法有关，也与您的安全策略有关。</p><p id="e5e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然没有灵丹妙药，但是集成方法有一些优势。使用Auth0设置身份并接入Express Gateway 有一个很好的<a class="ae lg" href="https://auth0.com/blog/apigateway-microservices-superglue/" rel="noopener ugc nofollow" target="_blank">入门故事。</a></p><h1 id="d50a" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">为什么管理自己的身份服务器会失败</h1><p id="13ea" class="pw-post-body-paragraph ir is hu it b iu kz iw ix iy la ja jb jc lb je jf jg lc ji jj jk ld jm jn jo hn dt translated">这就是为什么我们从一开始就在Express Gateway中加入了一个。因此，有更多的机会立即开始，而不必注册额外的服务。此外，Express Gateway还可以与您现有的JWT提供商连接。</p><p id="8514" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们面对一些冷酷的事实吧。首先，没有业务需求文档会说“建立一个支持JWT的身份服务器”我们从开发人员社区得到的反馈是，大多数时候，我们都只是想象它已经存在。所以，如果你正在做一个项目，却没有一个…开发者不得不争先恐后地创造一些奇迹。</p><p id="a72a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，值得注意的是阅读OAuth2规范是…困难的。这也意味着获得所有正确的细节是一个惊人的壮举，这不是不可克服的，但需要时间。当速度和敏捷很重要时，放慢速度会让它看起来更糟。</p><p id="9cac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是为什么有一个完整的产品部分围绕这一点。</p><p id="f574" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不，说真的。有一整套产品和公司会让你大吃一惊，比如<a class="ae lg" href="https://www.pingidentity.com/" rel="noopener ugc nofollow" target="_blank">平身份</a>、<a class="ae lg" href="https://www.okta.com/" rel="noopener ugc nofollow" target="_blank"> Okta </a>和(我们最喜欢的)<a class="ae lg" href="https://auth0.com/" rel="noopener ugc nofollow" target="_blank"> Auth0 </a>。<a class="ae lg" href="https://auth0.com/blog/apigateway-microservices-superglue/" rel="noopener ugc nofollow" target="_blank">了解有关Auth0和Express Gateway的更多信息。</a></p><p id="f67f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="le">还没感觉吗？</em></p><p id="9900" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们有过这样的中间时刻，你只需要完成它。这就是JSON Web令牌(JWT)的内部支持派上用场的地方。为了帮助您入门，我们制作了一个视频教程，介绍如何设置由其他身份服务器(如Auth0)启动的JSON Web令牌，以及何时通过身份服务器启动和管理jwt。</p><p id="59c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">观看此简单易懂的操作视频，开始了解Express Gateway中的JSON Web Token支持:</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="lh li l"/></div></figure><p id="f8a8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者:您也可以在详细介绍最新更新的发布帖子中查看更多的<a class="ae lg" href="https://www.express-gateway.io/express-gateway-release-1-5-0-with-jwt-support/" rel="noopener ugc nofollow" target="_blank">技术入门指南</a>。</p></div><div class="ab cl lj lk hc ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="hn ho hp hq hr"><p id="2e9d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="le">最初发表于</em><a class="ae lg" href="https://www.express-gateway.io/getting-started-with-json-web-tokens-and-express-gateway/" rel="noopener ugc nofollow" target="_blank"><em class="le">www . express-gateway . io</em></a><em class="le">，但在这里分享了额外的注释、图表和特殊媒体编辑评论。</em></p></div></div>    
</body>
</html>