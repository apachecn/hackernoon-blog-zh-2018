<html>
<head>
<title>The Non-Secret Formula for Writing Better Code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写更好代码的非秘密公式</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-non-secret-formula-for-writing-better-code-e41d1ff38682?source=collection_archive---------3-----------------------#2018-03-29">https://medium.com/hackernoon/the-non-secret-formula-for-writing-better-code-e41d1ff38682?source=collection_archive---------3-----------------------#2018-03-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/691f7c5c51a0580820bf56a1b27eb0d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOVGtVFRVHp6wqrYlcPFAw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://www.youtube.com/watch?v=aAwJlD-m_hE" rel="noopener ugc nofollow" target="_blank">There’s no such thing as two</a></figcaption></figure><p id="9977" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv"> <em class="kf">免责声明</em> </strong> <em class="kf">:本帖所有内容均为本人观点。然而，这是100%真实的，你不应该质疑它。让我们开始吧。</em></p><p id="8d95" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我喜欢写干净的代码。我希望我在Torii的团队也能写出好的、干净的代码。问题是每个人对“干净代码”的定义都不一样。下面是我写干净代码的非秘密公式，它导致更少的错误，更容易改变，让我更开心。</p><h1 id="9941" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">什么是“更好的代码”？</h1><p id="a3ab" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">我喜欢从事专注于以下方面的代码库工作:</p><p id="e40d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">可读性</strong>。代码应该易于阅读和理解。代码中应明确<strong class="jj hv">为什么</strong>和<strong class="jj hv">如何</strong>。</p><p id="b0d9" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">简约</strong>。<strong class="jj hv"> </strong>代码简单。它不应该依赖于你在代码中无法理解的假设。当很难以错误的方式使用代码时，代码就是简单的。添加功能时很难打破它。</p><p id="fc38" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">一致</strong>。<strong class="jj hv"> </strong>一致缩进。一致的命名。一致的文件结构。采取什么样的风格、模式和决策并不重要，要保持一致。</p><blockquote class="lj"><p id="f264" class="lk ll hu bd lm ln lo lp lq lr ls ke ek translated">我不关心的事情:<em class="lt">使代码通用化，强制设计模式，已知的“正确方法”和不需要的性能优化。</em></p></blockquote><h1 id="ac58" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr lu kt ku kv lv kx ky kz lw lb lc ld dt translated">如何写出更好的代码？</h1><p id="a726" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">以下是我今天的编码方式和原因。</p><h2 id="150f" class="lx kh hu bd ki ly lz ma km mb mc md kq js me mf ku jw mg mh ky ka mi mj lc mk dt translated">零评论政策</h2><p id="6efc" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">注释变得陈旧，并且倾向于告诉你关于代码的错误的东西。此外，注释允许补偿不应该存在的神秘代码。取代注释，关注代码的可读性。</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="4383" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>if (x &gt; 5) { // 5 is a special point where we must run away<br/>   runAway()<br/>}</span><span id="8365" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>const runAwayThreshold = 5<br/>const shouldRunAway = (x &gt; runAwayThreshold)<br/>if (shouldRunAway) {<br/>   runAway()<br/>}</span></pre><h2 id="e41d" class="lx kh hu bd ki ly lz ma km mb mc md kq js me mf ku jw mg mh ky ka mi mj lc mk dt translated">零待办事项策略</h2><p id="619a" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">你的代码库不是一个项目管理系统。JIRA、特雷罗、阿萨纳(以及其他人)更适合记录未来的工作。是的，甚至那个“我们必须让这个功能更快”的TODOs。如果它是必须的，把它放在每个人都能看到的地方。</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="e48b" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>while (true) {} // TODO: make this code faster when we have time</span><span id="9149" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>while (true) {}</span></pre><h2 id="cd33" class="lx kh hu bd ki ly lz ma km mb mc md kq js me mf ku jw mg mh ky ka mi mj lc mk dt translated">自我记录代码</h2><p id="173f" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">使用变量可以帮助代码变得不言自明。我们可以使用这些变量来更好地表达我们的意图:变量名是<strong class="jj hv"> why </strong>，赋值是<strong class="jj hv"> how </strong>。</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="0f73" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>if (x &gt; 2 &amp;&amp; x &lt; 5) {<br/>   fireMissiles()<br/>}</span><span id="b509" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>const enemyInRange = (x &gt; 2 &amp;&amp; x &lt; 5)<br/>if (enemyInRange) {<br/>   fireMissiles()<br/>}</span></pre><h2 id="3ddf" class="lx kh hu bd ki ly lz ma km mb mc md kq js me mf ku jw mg mh ky ka mi mj lc mk dt translated">早点休息</h2><p id="9c3a" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">缩进的第一行是留给“好路径”的。所以我总是早早休息，把代码最重要的部分放在函数的“根”里。</p><p id="b2c7" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一般来说，<strong class="jj hv">少缩进→可读代码</strong>。</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="666f" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>const fetchData = (id) =&gt; {<br/>  if (id) {<br/>    fetch('/data/' + id)<br/>  }<br/>}</span><span id="017c" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>const fetchData = (id) =&gt; {<br/>  if (!id) {<br/>    return<br/>  }</span><span id="2771" class="lx kh hu mq b fv my mv l mw mx">  fetch('/data/' + id)<br/>}</span></pre><h2 id="9d33" class="lx kh hu bd ki ly lz ma km mb mc md kq js me mf ku jw mg mh ky ka mi mj lc mk dt translated">不变的</h2><p id="d298" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">比起可变引用，我更喜欢<code class="eh mz na nb mq b">const</code>引用(JavaScript中的<code class="eh mz na nb mq b">let</code>或<code class="eh mz na nb mq b">var</code>)。主要是因为我一旦明白了什么是变量之后，就不用再去想了。我发现支持这一点的小语言特性(不管是什么语言)。</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="2a11" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>let mul = x * y<br/>if (mul &gt; 70) {<br/>  mul = 70<br/>}</span><span id="a467" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>const mul = Math.min(x * y, 70)</span></pre><p id="8bb3" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">另一个例子:</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="582b" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>let x<br/>if (str === 'one') {<br/>  x = 1<br/>} else if (str === 'two') {<br/>  x = 2<br/>} else if (str === 'three') {<br/>  x = 3<br/>}</span><span id="318e" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>const x = {<br/>  one: 1,<br/>  two: 2,<br/>  three: 3<br/>}[str]</span></pre><h2 id="1801" class="lx kh hu bd ki ly lz ma km mb mc md kq js me mf ku jw mg mh ky ka mi mj lc mk dt translated">每个想法一个LOC</h2><p id="7b5b" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">阅读复杂的代码需要大量的注意力。保持你的“编码句子”简短，把复杂的想法分解成简单的想法。</p><pre class="ml mm mn mo fq mp mq mr ms aw mt dt"><span id="ff88" class="lx kh hu mq b fv mu mv l mw mx">// 😞<br/>people<br/>  .filter(person =&gt; person.age &gt; 10 &amp;&amp; person.firstName.length &gt; 2 &amp;&amp; person.lastName.length &gt; 4)</span><span id="6edf" class="lx kh hu mq b fv my mv l mw mx">// 👍<br/>people<br/>  .filter(person =&gt; person.age &gt; 10)<br/>  .filter(person =&gt; person.firstName.length &gt; 2)<br/>  .filter(person =&gt; person.lastName.length &gt; 4)</span></pre><p id="5681" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="kf">“等等！业绩变化呢？”。我不在乎。我真的不知道。除非有一个现实世界的问题，应用程序变得比预期慢。</em></p><h1 id="2838" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">同意吗？不同意？</h1><p id="5065" class="pw-post-body-paragraph jh ji hu jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">我肯定一些开发者会不同意提出的每一点。</p><p id="71c9" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这很好，但是如果你的公司使用SaaS运营，请在评论或推特(<a class="ae jg" href="https://twitter.com/ketacode" rel="noopener ugc nofollow" target="_blank"> @ketacode </a>)上告诉我为什么。</p><blockquote class="nc nd ne"><p id="b1c7" class="jh ji kf jj b jk jl jm jn jo jp jq jr nf jt ju jv ng jx jy jz nh kb kc kd ke hn dt translated">如果你喜欢这篇文章，请鼓掌并分享给你的网络。</p></blockquote></div></div>    
</body>
</html>