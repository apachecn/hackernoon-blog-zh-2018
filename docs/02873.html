<html>
<head>
<title>Deconstructing a confirmed bitcoin transaction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">解构已确认的比特币交易</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deconstructing-a-confirmed-bitcoin-transaction-12fe84169100?source=collection_archive---------4-----------------------#2018-03-31">https://medium.com/hackernoon/deconstructing-a-confirmed-bitcoin-transaction-12fe84169100?source=collection_archive---------4-----------------------#2018-03-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="81b6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">本文讨论了比特币交易的内容。我可能不完全正确，但这是基于对bitcoinjs库的修补。如果我错了，请随时纠正我。</p><p id="167c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我用于测试的存储库在这里<a class="ae jp" href="https://github.com/prahaladbelavadi/bitcoin-js-testing/tree/master/myTest" rel="noopener ugc nofollow" target="_blank">可用。如果你正在尝试这篇文章中的东西，请使用这个版本。</a></p><p id="fc8b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我只是记录下一些我认为可以解释这个系统如何运作的东西。与实际的<a class="ae jp" href="https://github.com/bitcoinjs/bitcoinjs-lib/" rel="noopener ugc nofollow" target="_blank"> bitcoinjs-lib </a>没有太大的区别，但是对于所有生产案例，使用<a class="ae jp" href="https://github.com/bitcoinjs/bitcoinjs-lib/releases" rel="noopener ugc nofollow" target="_blank"> bitcoinjs-lib repo </a>并且也只有<a class="ae jp" href="https://github.com/bitcoinjs/bitcoinjs-lib/releases" rel="noopener ugc nofollow" target="_blank">稳定版本</a>，因为主分支用于开发。</p></div><div class="ab cl jq jr hc js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hn ho hp hq hr"><p id="ded8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Blockchain.info的mempool中可用的未确认交易的列表可以在这里查看<a class="ae jp" href="https://blockchain.info/unconfirmed-transactions" rel="noopener ugc nofollow" target="_blank">。每秒钟都有更新和更多的事务添加进来。</a></p><p id="9fc3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了本文的所有目的，除非另有说明，我们将检查<a class="ae jp" href="https://blockchain.info/tx/1d2dffbfde01eaa01d40bee0d2ec4bbc92c92930984aea8aa4fb65f84f74d6c2" rel="noopener ugc nofollow" target="_blank">该交易</a>。</p><p id="a431" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">本文的目的是向您介绍验证块中事务的存在、事务的内容，然后创建一个类似的事务的过程。</p><p id="e995" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">先决条件:</p><ul class=""><li id="173a" class="jx jy hu it b iu iv iy iz jc jz jg ka jk kb jo kc kd ke kf dt translated">安装<a class="ae jp" href="https://nodejs.org/en/download/" rel="noopener ugc nofollow" target="_blank"> Nodejs </a>、<a class="ae jp" href="https://git-scm.com/downloads" rel="noopener ugc nofollow" target="_blank"> Git Bash </a>和任何文本编辑器(<a class="ae jp" href="http://atom.io/" rel="noopener ugc nofollow" target="_blank"> Atom </a>)</li><li id="5ec9" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">克隆此存储库</li><li id="eb0b" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">更改目录并安装软件包</li></ul><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="8344" class="ku kv hu kq b fv kw kx l ky kz">$ git clone github.com/prahaladbelavadi/bitcoin-js-testing<br/>$ cd ./bitcoin-js-testing<br/>$ npm install</span></pre><ul class=""><li id="9115" class="jx jy hu it b iu iv iy iz jc jz jg ka jk kb jo kc kd ke kf dt translated">在此导航到blocks目录，并运行以下命令</li></ul><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="f960" class="ku kv hu kq b fv kw kx l ky kz">$ cd ./myTest/blocks<br/>$ node blocks.js</span></pre><p id="d128" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它以十六进制格式记录事务、输入脚本和块的高度。未确认的交易没有块高度，因为它们还没有包括在块中。</p><figure class="kl km kn ko fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff la"><img src="../Images/bde0f9760de80e9e50b16b9c18943c23.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dplRsapS9-bhQbLri6zyKQ.png"/></div></div></figure><p id="0117" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在块<a class="ae jp" href="https://blockchain.info/block-height/498303" rel="noopener ugc nofollow" target="_blank"> 498303 </a>的十六进制格式中，我们可以确认交易存在。</p><figure class="kl km kn ko fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff la"><img src="../Images/923a000ad3a237dcb376748a8963d9e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ok4UBNBz90GQYBauLQnwvA.png"/></div></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">Block <a class="ae jp" href="https://blockchain.info/block-height/498303" rel="noopener ugc nofollow" target="_blank">498303</a> in Hex</figcaption></figure><p id="9a85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将剖析这笔交易。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="6f2f" class="ku kv hu kq b fv kw kx l ky kz">Transaction Hex: 010000000001010000000000000000000000000000000000000000000000000000000000000000ffffffff50037f9a07174d696e656420627920416e74506f6f6c685b205a2b1f7bfabe6d6d36afe1910eca9405b66f97750940a656e38e2c0312958190ff8e98fd16761d220400000000000000aa340000d49f0000ffffffff02b07fc366000000001976a9148349212dc27ce3ab4c5b29b85c4dec643d764b1788ac0000000000000000266a24aa21a9ed72d9432948505e3d3062f1307a3f027a5dea846ff85e47159680919c12bf1e400120000000000000000000000000000000000000000000000000000000000000000000000000</span></pre><p id="689a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将使用<a class="ae jp" href="https://live.blockcypher.com/btc/decodetx/" rel="noopener ugc nofollow" target="_blank">密码器</a>对交易进行解码。</p><p id="fe07" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将交易十六进制数粘贴到解码器中。</p><figure class="kl km kn ko fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lm"><img src="../Images/3e6a9ffbe055b7a7b4a404b8c0b3a486.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7vzuM3IJ5JauWAMtKTR3og.png"/></div></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">Coinbase Transaction decoder</figcaption></figure><p id="2053" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">事务解码器显示，转发到网络的事务十六进制包含以下内容:</p><ul class=""><li id="9b95" class="jx jy hu it b iu iv iy iz jc jz jg ka jk kb jo kc kd ke kf dt translated">十六进制交易输入脚本</li><li id="3e67" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">输出地址</li><li id="b97d" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">输出脚本和类型</li></ul><p id="f8e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">PS:这不包含输入地址，因为它是一个coinbase事务。</p><p id="de24" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果我们从块<a class="ae jp" href="https://blockchain.info/block-index/1649492" rel="noopener ugc nofollow" target="_blank"> 498303 </a>中查看<a class="ae jp" href="https://live.blockcypher.com/btc/tx/ff5b8b78df5ffae5ed9ca68ab748dc360f277f548b69eac7010d087802ae18fe/" rel="noopener ugc nofollow" target="_blank">这个</a>解码的<a class="ae jp" href="https://live.blockcypher.com/btc/tx/ff5b8b78df5ffae5ed9ca68ab748dc360f277f548b69eac7010d087802ae18fe/" rel="noopener ugc nofollow" target="_blank">事务</a></p><figure class="kl km kn ko fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff ln"><img src="../Images/3466f9ced13d1eb12cfce3f3e51bbdb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gtLFpk3R8RQQkjLMkM2JXA.png"/></div></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">Valid spend transaction decoded</figcaption></figure><p id="82fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可以看到它有一个先前的输入地址，链接到区块链上先前记录的事务的事务散列。</p><p id="1b0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每个输出需要有一个相应的输入及其签名，以证明它确实可以花费比特币，除非它是一个coinbase交易。</p><p id="172c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每个资源管理器基于它们的本地节点或它们选择跟踪的任何内容，以自己不同的方式显示和跟踪指标。</p><figure class="kl km kn ko fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff lo"><img src="../Images/4df9256226a7e007ed9c7ef833b186b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZuExwwgn_47-jQcT60VIvA.png"/></div></div><figcaption class="li lj fg fe ff lk ll bd b be z ek">Random bitcoin transaction decoded on blockchain.info decoder</figcaption></figure><p id="bd58" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们可以在<a class="ae jp" href="https://blockchain.info/decode-tx" rel="noopener ugc nofollow" target="_blank"> blockchain.info </a>的<a class="ae jp" href="https://blockchain.info/decode-tx" rel="noopener ugc nofollow" target="_blank">解码器</a>中观察到，它也显示了对其执行的不同操作。</p><p id="d63a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在接下来的文章中，我打算展示如何编写自己的事务并将其转发给网络。</p><p id="f6b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于我将不断地在bitcoinjs测试存储库的分支上尝试新的东西，这可能会与您的实验冲突，所以我为本文的唯一目的打包了一个版本。</p><p id="5eeb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此处<a class="ae jp" href="https://github.com/prahaladbelavadi/bitcoin-js-testing/releases/tag/0.01" rel="noopener ugc nofollow" target="_blank">可用</a>。它应该包含发布本文时的代码。</p><p id="3eed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请随意使用它，尝试新的东西。</p></div><div class="ab cl jq jr hc js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hn ho hp hq hr"><p id="428b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">参考资料:</p><ul class=""><li id="dc1e" class="jx jy hu it b iu iv iy iz jc jz jg ka jk kb jo kc kd ke kf dt translated"><a class="ae jp" href="https://github.com/prahaladbelavadi/bitcoin-js-testing/releases/tag/0.01" rel="noopener ugc nofollow" target="_blank">https://github . com/prahaladbelavadi/bit coin-js-testing/releases/tag/0.01</a></li></ul><p id="be78" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">干杯！</p></div></div>    
</body>
</html>