<html>
<head>
<title>wn your Identity in Blockchain</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在区块链中打造你的身份</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/own-your-identity-in-blockchain-747a91100b39?source=collection_archive---------11-----------------------#2018-04-01">https://medium.com/hackernoon/own-your-identity-in-blockchain-747a91100b39?source=collection_archive---------11-----------------------#2018-04-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/2e479b6b06826806bd3ef26281b9352b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g0o2mu50_dTSq8VmcOK7iw.png"/></div></div></figure><p id="3d1e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你试过在<a class="ae ka" href="https://hackernoon.com/tagged/ethereum" rel="noopener ugc nofollow" target="_blank">以太坊</a>上转移面团(乙醚)吗？</p><p id="c494" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果是的话，那么你就会知道记住你的债权人的钱包地址是多么痛苦。如果你能用她的名字转移以太，那该有多酷。</p><p id="4059" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你能做这样的事情</p><p id="e820" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">dnscontractinstace . sendethertoname(" Hitesh "，10 Ether)，无论Hitesh的所有者是哪个地址，都将获得记入其钱包的10 Ether。</p><p id="533f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以在这篇文章中，我们将在以太坊中构建命名服务的同时，尝试学习solidity和<a class="ae ka" href="https://hackernoon.com/tagged/dapp-development" rel="noopener ugc nofollow" target="_blank"> DApp开发</a>的构建模块。</p><p id="98ef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们今天要写一些智能合同，允许我们在以太坊中保留我们的名字作为我们的身份，然后使用这些名字进行交易。也就是说，这篇文章不是以太坊或固体或松露入门介绍。</p><h2 id="8da7" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">就这样？不…我们还会做以下事情-</h2><blockquote class="kw kx ky"><p id="a7a9" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">看看你如何能在一个你喜欢的名字上出价。</p><p id="5521" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">对一个名字出价最高。投标存储在合同中。</p><p id="2421" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">如果您是域名所有者，请接受出价。</p><p id="b96c" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">撤回你的出价—撤回模式</p><p id="5639" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">发送以太到一个名字而不是一个地址。</p></blockquote><h2 id="71b3" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">就这样吗？？？</h2><p id="e801" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">不，还没有，我们还会做很多外围功能，即-</p><blockquote class="kw kx ky"><p id="994d" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">向合同创建者发送初始预订费。</p><p id="cfb5" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">检查名称字符并限制您可以保留的名称大小。</p><p id="643f" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">检查恶意契约代码不能一遍又一遍地调用你的撤销函数来清空你的契约余额。</p></blockquote><p id="8557" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，我们会-</p><blockquote class="kw kx ky"><p id="6238" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">用truffle写JS测试用例，测试契约代码。</p><p id="da38" class="jc jd kz je b jf jg jh ji jj jk jl jm la jo jp jq lb js jt ju lc jw jx jy jz hn dt translated">编写一个有角度的4 <a class="ae ka" href="https://hackernoon.com/tagged/dapp" rel="noopener ugc nofollow" target="_blank"> DApp </a>，它与Metamask集成在一起，以使用我们编写的契约代码。</p></blockquote><p id="01c1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">高水平拱形图</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff li"><img src="../Images/d61a179638bba240e3c7784808e4a29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A97XOI9p4L0kmxtRylYgmw.png"/></div></div><figcaption class="ln lo fg fe ff lp lq bd b be z ek">Architecture Diagram</figcaption></figure><p id="3007" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你需要什么来开始-</p><p id="c5c2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您自己的私有Geth节点或Ganache或连接到Ropsten的能力</p><p id="377b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">节点Js</p><p id="406a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">角度cli</p><p id="78de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">松露</p><p id="07d4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Remix或以太坊钱包，用于快速和肮脏的测试</p><h1 id="a8fd" class="lr kc hu bd kd ls lt lu kh lv lw lx kl ly lz ma ko mb mc md kr me mf mg ku mh dt translated">足够的前奏，让我们进入代码…</h1><p id="5f04" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">首先是一个带有状态枚举和基本结构的库，我们将在我们的合同中使用</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="4226" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在出现了<a class="ae ka" href="https://hackernoon.com/tagged/design" rel="noopener ugc nofollow" target="_blank">设计</a>问题，你将如何在一个合同中存储所有的投标。使用一个阵列是有限制的，而且汽油的花费是疯狂的。我们将为每个名称创建一个投标容器，它将保存为名称和所有者提交的所有投标的映射。</p><p id="47af" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将代表一个出价</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="370d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">并持有针对特定名称(容器)的所有投标</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="57f6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该代码在Github中被大量评论，请查看，我已经在gist中删除了大部分内容。</p><p id="63b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们还有一个util契约，它允许你把一个字符串转换成字节。我们还有ProtectReentry契约，它试图阻止契约代码一遍又一遍地调用您的代码。为了简洁起见，我在本文中省略了它们。</p><p id="a91c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，主合同本身。</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><h2 id="e2fd" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">现在让我们写一个测试用例，测试所有这些…</h2><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mi mj l"/></div></figure><p id="4886" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这只是测试案例中的一个，你会在资源库中找到很多。</p><p id="94a8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它基本上保留了披头士使用帐户[2](nameOwner)。然后，一号叫牌者和二号叫牌者之间发生了一场竞价战。最后，投标人让步，撤回了他的投标。我们最后检查在测试执行的这一点上合同中设置的总以太网。您可以轻松地检查个人余额或接受出价，并在名称所有权转移后查看结果。</p><p id="a0c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，我们还构建了一个非常基本的Angular Dapp来与部署的智能契约进行交互。Dapp与Metamask集成在一起，允许您对进入以太坊网络的交易进行签名。任何操作，如保留一个名字，对名字投标等，都必须得到钱包的批准。</p><figure class="lj lk ll lm fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/68079396f44c39cab5c6984869d08a12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xInc2Rx7o01b8SfHhwoSDw.png"/></div></div></figure><p id="56ca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您需要在Metamask中创建或导入您的帐户才能使用此功能。另外，如果你像我一样使用私有节点，你需要用一个特殊的标志来启动它</p><pre class="lj lk ll lm fq ml mm mn mo aw mp dt"><span id="a003" class="kb kc hu mm b fv mq mr l ms mt"> --rpccorsdomain="chrome-extension://nkbihfbeogaeaoehlefnkodbefgpgknn</span></pre><p id="14a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">守则中的一个未决问题是，到目前为止，投标还没有结束。因此，任何被出价超过的竞标者都可以从合同中提取资金，但如果你是某个名称的最高出价者，而所有者没有接受你的出价，你的资金就被锁定在合同中:(</p><p id="7ced" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将在下一篇文章中尝试解决这个问题。我正在考虑在投标中增加一个投标周期。在投标期结束时，即使出价最高的投标人也可以取出他的资金。所以会有一个锁定，但是一旦你被出价超过或者出价期限到期，你就可以自由地把以太拿出来。</p><p id="6961" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">完整的源代码存放在我的github repo <a class="ae ka" href="https://github.com/hiteshjoshi1/dns-dapp" rel="noopener ugc nofollow" target="_blank">这里</a>。请检查一下，玩玩它。喜欢就开始吧。干杯！</p><p id="eeec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">考虑到人们已经按照这些思路开发了商业软件，请看<a class="ae ka" href="https://ens.domains/" rel="noopener ugc nofollow" target="_blank">这个</a>。如果你想更进一步，拉取请求和协作请求总是受欢迎的。</p><p id="efd6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">就是这样，伙计们！</p><p id="dc91" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<a class="ae ka" href="https://www.linkedin.com/in/hitesh-joshi-a9928613/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上联系我，或者在<a class="ae ka" href="https://twitter.com/joshi_ji" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我。</p><figure class="lj lk ll lm fq iv"><div class="bz el l di"><div class="mu mj l"/></div></figure></div></div>    
</body>
</html>