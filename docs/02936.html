<html>
<head>
<title>Understanding Expo for React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解React Native世博会</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/understanding-expo-for-react-native-7bf23054bbcd?source=collection_archive---------2-----------------------#2018-04-03">https://medium.com/hackernoon/understanding-expo-for-react-native-7bf23054bbcd?source=collection_archive---------2-----------------------#2018-04-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div class="fe ff hs"><img src="../Images/dc57f0e65ae9c33f8c7bad716a2fee28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*RropyHscL6QRbPlUxlIrAA.png"/></div></figure><div class=""/><div class=""><h2 id="cd11" class="pw-subtitle-paragraph iy ia ib bd b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp ek translated">关于它的作用以及为什么它如此受欢迎的快速指南。</h2></div><p id="d950" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">当创建一个新的React原生应用时，通常会考虑两种选择。利用博览会。或者不用Expo。甚至官方反应本地<a class="ae km" href="https://facebook.github.io/react-native/docs/getting-started.html" rel="noopener ugc nofollow" target="_blank">入门</a>文档也是这样描述的。</p><p id="55ed" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">世博会变得异常受欢迎有几个原因:</p><ol class=""><li id="c2a9" class="kn ko ib js b jt ju jw jx jz kp kd kq kh kr kl ks kt ku kv dt translated">不需要苹果开发者账号(99美元/年)也可以在真实设备上测试。这是通过他们在Google Play和应用商店中的免费Expo应用程序实现的。在世博app里面，你可以运行自己的app。这不完全像在设备上安装应用程序，因为你实际上只是在Expo应用程序中。但还是挺酷的。</li><li id="cf13" class="kn ko ib js b jt kw jw kx jz ky kd kz kh la kl ks kt ku kv dt translated">Expo处理一系列配置步骤来部署你的应用程序。许多学习React Native的人都不是来自移动开发背景，因此自己进行这种配置似乎令人生畏。</li><li id="036d" class="kn ko ib js b jt kw jw kx jz ky kd kz kh la kl ks kt ku kv dt translated">Expo有一个SDK来处理各种事情，如使用相机、加速度计、地图、位置跟踪、分析等。当然，这些特性中的大部分都可以使用开源包来实现，但是Expo在一个地方提供这么多这样的特性是很好的。</li></ol><h2 id="930b" class="lb lc ib bd ld le lf lg lh li lj lk ll jz lm ln lo kd lp lq lr kh ls lt lu lv dt translated">世博会如何运作</h2><p id="df6f" class="pw-post-body-paragraph jq jr ib js b jt lw jc jv jw lx jf jy jz ly kb kc kd lz kf kg kh ma kj kk kl hn dt translated">先别管世博会，让我们只讨论本土反应。</p><p id="ca25" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">React原生应用是运行一些Javascript的编译应用。每当您构建并运行React本地项目时，一个名为<a class="ae km" href="https://facebook.github.io/metro/" rel="noopener ugc nofollow" target="_blank"> Metro </a>的打包程序就会启动。您可能以前在您的终端中看到过这个输出，它让您知道打包程序正在运行。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="mg mh di mi bf mj"><div class="fe ff mb"><img src="../Images/191cdaf02979544bef5fbf0fb1269eed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tppatDpMzpoM8mJjkGnL8Q.png"/></div></div></figure><p id="b307" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">打包者做一些事情:</p><ol class=""><li id="3a19" class="kn ko ib js b jt ju jw jx jz kp kd kq kh kr kl ks kt ku kv dt translated">将您所有的Javascript代码合并到一个文件中，并翻译您的设备无法理解的任何Javascript代码(如JSX或一些较新的JS语法)。</li><li id="91eb" class="kn ko ib js b jt kw jw kx jz ky kd kz kh la kl ks kt ku kv dt translated">将资产(如PNG文件)转换成可由<code class="eh mk ml mm mn b">Image</code>组件显示的对象。</li></ol><p id="4c69" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">当你不使用Expo时，你可以这样运行你的应用程序。</p><pre class="mc md me mf fq mo mn mp mq aw mr dt"><span id="c4ad" class="lb lc ib mn b fv ms mt l mu mv">react-native start</span></pre><p id="d28b" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">但是对于Expo，您可以像这样运行它(使用他们的CLI工具)。</p><pre class="mc md me mf fq mo mn mp mq aw mr dt"><span id="9ff9" class="lb lc ib mn b fv ms mt l mu mv">exp start</span></pre><p id="277a" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">这两个命令启动我们刚刚讨论过的同一个打包程序。不同的是<code class="eh mk ml mm mn b">exp start</code>还启动了一个叫做Expo开发服务器的东西。该服务器运行一个进程，该进程获取由React Native packager (Metro)创建的Javascript包，并在模拟器上的Expo应用程序中运行它。</p><h2 id="30f1" class="lb lc ib bd ld le lf lg lh li lj lk ll jz lm ln lo kd lp lq lr kh ls lt lu lv dt translated">通过Expo分发您的应用程序</h2><p id="da4e" class="pw-post-body-paragraph jq jr ib js b jt lw jc jv jw lx jf jy jz ly kb kc kd lz kf kg kh ma kj kk kl hn dt translated">有两种方法可以通过Expo分发您的应用程序。最简单的方法是让人们从Google Play或应用商店下载Expo应用程序。这个Expo应用程序可以在其中运行您的应用程序。它通过你提供的网址加载应用程序。您需要将您的Javascript代码推送到这个URL访问的远程位置。</p><pre class="mc md me mf fq mo mn mp mq aw mr dt"><span id="ed5d" class="lb lc ib mn b fv ms mt l mu mv">exp publish</span></pre><p id="20d9" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">这样就可以了，还可以在终端中打印你的URL。将该URL提供给其他人，以便他们可以将其输入Expo并运行您的应用程序。</p><p id="4fa5" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">在Expo应用程序中运行您的应用程序可以开始使用。但在某些时候，你会想把你的应用程序直接放到人们的设备上。比如放到Hockeyapp上分发给测试人员，或者放到Google Play或者App Store上。为此，你需要创建一个“独立的应用程序”。</p><p id="edaf" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">独立应用是Expo对在Expo应用之外运行的应用的术语。这就像你从应用商店下载的应用程序一样。要创建iOS应用程序，您需要运行以下命令。</p><pre class="mc md me mf fq mo mn mp mq aw mr dt"><span id="ef02" class="lb lc ib mn b fv ms mt l mu mv">exp build:ios</span></pre><p id="749d" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">最终产品是一个IPA文件，您可以提交给Apple。对于Android，你运行<code class="eh mk ml mm mn b">exp build:android</code>并获得谷歌Play商店的APK文件。</p><p id="0a43" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">创建独立应用程序时，Expo将Javascript放在两个地方:</p><ol class=""><li id="688c" class="kn ko ib js b jt ju jw jx jz kp kd kq kh kr kl ks kt ku kv dt translated">IPA或APK文件中包含一个本地副本。</li><li id="acc2" class="kn ko ib js b jt kw jw kx jz ky kd kz kh la kl ks kt ku kv dt translated">一份拷贝由亚马逊Cloudfront(T4)远程托管，这是一个超快的CDN。</li></ol><p id="6ec0" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">当你的应用程序启动时，它会检查CDN中对你的Javascript的更改，如果有任何更改，就把它们删除。如果没有更改，它将使用本地副本。Expo SDK 26.0(2018年3月发布)中发布了对该流程的大量<a class="ae km" href="https://docs.expo.io/versions/latest/guides/offline-support.html" rel="noopener ugc nofollow" target="_blank">改进</a>。</p><h2 id="69e0" class="lb lc ib bd ld le lf lg lh li lj lk ll jz lm ln lo kd lp lq lr kh ls lt lu lv dt translated">更新你的应用</h2><p id="a826" class="pw-post-body-paragraph jq jr ib js b jt lw jc jv jw lx jf jy jz ly kb kc kd lz kf kg kh ma kj kk kl hn dt translated">传统上，iOS和Android应用在发布新版本时会重新提交到Google Play或App Store。这包括创建一个新的IPA或APK文件，然后重新提交到相关商店。</p><p id="bd60" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">然而，使用Expo，您的Javascript代码是远程托管的，您的应用程序将下载对此远程Javascript的任何更改。因此，如果你的更新只是Javascript的变化，那么简单地重新发布它们。</p><pre class="mc md me mf fq mo mn mp mq aw mr dt"><span id="27b4" class="lb lc ib mn b fv ms mt l mu mv">exp publish</span></pre><p id="7d95" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">这通常被称为“空中”更新。请记住，并非所有更新都可以通过无线方式进行。例如，项目级别的设置(如应用程序的名称)并不存储在Javascript包中。所以如果你改变了它们，它们不会通过<code class="eh mk ml mm mn b">exp publish</code>更新。要使用项目级别的更改更新您的应用程序，您需要生成一个新的IPA/APK文件，然后将您的应用程序重新提交到Google Play或App Store。</p><h2 id="86f7" class="lb lc ib bd ld le lf lg lh li lj lk ll jz lm ln lo kd lp lq lr kh ls lt lu lv dt translated">世博会的缺点</h2><p id="7302" class="pw-post-body-paragraph jq jr ib js b jt lw jc jv jw lx jf jy jz ly kb kc kd lz kf kg kh ma kj kk kl hn dt translated">当您通过Expo创建应用程序时，它会为您创建一个不包含iOS和Android项目文件的文件结构。但是有些特性要求你调整这些文件。一个例子是添加第三方推送通知库。为此，您必须在该项目文件中执行以下操作:</p><ul class=""><li id="e81c" class="kn ko ib js b jt ju jw jx jz kp kd kq kh kr kl mw kt ku kv dt translated">打开推送通知功能。</li><li id="0173" class="kn ko ib js b jt kw jw kx jz ky kd kz kh la kl mw kt ku kv dt translated">将推送通知库链接到你的应用包(这是<code class="eh mk ml mm mn b">react-native link</code>可能会为你做的，取决于你正在实现的推送库)。</li></ul><p id="c764" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">使用Expo，您不能执行这些步骤，因为没有项目文件来执行它们。因此，这就是通向“脱离”世博会的道路。分离将产生这些项目文件，以便您可以配置它们。</p><p id="4db4" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">从Expo分离时有两种选择。</p><ol class=""><li id="6ef5" class="kn ko ib js b jt ju jw jx jz kp kd kq kh kr kl ks kt ku kv dt translated">彻底清除Expo。这给了你一个类似于用<code class="eh mk ml mm mn b">react-native init</code>得到的项目。</li><li id="1ec6" class="kn ko ib js b jt kw jw kx jz ky kd kz kh la kl ks kt ku kv dt translated">部分移除Expo(通常称为ExpoKit)。这允许你仍然使用Expo SDK。您的Javascript继续通过<code class="eh mk ml mm mn b">exp publish</code>远程托管和更新。</li></ol><p id="e91f" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">这两个选项都为您提供了iOS和Android项目文件，因此您可以自己配置它们。</p><h2 id="8ede" class="lb lc ib bd ld le lf lg lh li lj lk ll jz lm ln lo kd lp lq lr kh ls lt lu lv dt translated">概括起来</h2><p id="bffd" class="pw-post-body-paragraph jq jr ib js b jt lw jc jv jw lx jf jy jz ly kb kc kd lz kf kg kh ma kj kk kl hn dt translated">Expo是快速入门React Native的一个很好的工具。然而，它并不总是能让你到达终点。在我看来，世博团队在产品路线图方面做出了很多重大决策。但是他们的快速发展经常导致新功能的缺陷。</p><p id="63ac" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">我敢说许多有经验的React本地开发者并不使用Expo。一旦您熟悉了自己配置项目和部署应用程序所需的所有步骤，Expo的好处就会大打折扣。此外，如果你正在寻找一种方法来处理空中部署，微软的CodePush仍然是同类最佳的。</p><p id="18d1" class="pw-post-body-paragraph jq jr ib js b jt ju jc jv jw jx jf jy jz ka kb kc kd ke kf kg kh ki kj kk kl hn dt translated">对于React本地开发人员来说，这是一个激动人心的时刻，Expo无疑通过使其对新来者更加平易近人而增加了它的受欢迎程度。出于这个原因，我认为他们绝对应该得到他们所得到的赞誉。我期待着看到他们的产品随着时间的推移而发展。</p></div></div>    
</body>
</html>