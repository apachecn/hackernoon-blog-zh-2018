<html>
<head>
<title>Safely toString a Java object</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安全地转换Java对象的字符串</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/safely-tostring-a-java-object-a3d6ea3c404?source=collection_archive---------12-----------------------#2018-04-03">https://medium.com/hackernoon/safely-tostring-a-java-object-a3d6ea3c404?source=collection_archive---------12-----------------------#2018-04-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="bd0f" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">避开NPE</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/fb5ac8be677aad1c74ecb897beed9387.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-SH4zH9hhBW7nZacpJ0KA.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Safely toString a Java object</figcaption></figure><blockquote class="jz ka kb"><p id="97a9" class="kc kd ke kf b kg kh iv ki kj kk iy kl km kn ko kp kq kr ks kt ku kv kw kx ky hn dt translated">本文原帖<a class="ae kz" href="http://www.dassiorleando.xyz/safely-tostring-a-java-object" rel="noopener ugc nofollow" target="_blank">此处</a>。</p></blockquote><h1 id="7b1b" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">概观</h1><p id="9b7f" class="pw-post-body-paragraph kc kd hu kf b kg ls iv ki kj lt iy kl lu lv ko kp lw lx ks kt ly lz kw kx ky hn dt translated">在这篇小文章中，我们将看到如何谨慎地获取对象的字符串表示(tostring ),这意味着避免NullPointerException。</p><h1 id="bf3b" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">语境</h1><p id="a0c2" class="pw-post-body-paragraph kc kd hu kf b kg ls iv ki kj lt iy kl lu lv ko kp lw lx ks kt ly lz kw kx ky hn dt translated">获取一个<a class="ae kz" href="https://hackernoon.com/tagged/java" rel="noopener ugc nofollow" target="_blank"> Java </a>对象的<strong class="kf hv">字符串</strong>表示是我们经常做的事情，用于日志记录、调试，或者仅仅是为了概览的目的。</p><p id="a1c0" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">对于空对象，我们将被定向到NullPointerException，因为toString正在使用对象的字段。</p><p id="824d" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">在之前甚至没有检查null值的情况下，只需使用<strong class="kf hv"> String.valueOf(object) </strong>方法，而不是直接使用object.toString()。</p><p id="fa1b" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">下面是IntelliJ生成的String.valueOf的内容:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ma mb l"/></div></figure><p id="4497" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">这里清楚地描述了空值是如何在toString之前捕获的。</p><p id="d440" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">这个函数还被包装成Objects实用函数，可通过:<strong class="kf hv">Objects . tostring(Object o)</strong>访问，可读性更好。</p><h1 id="8952" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">一个真实的例子</h1><p id="9013" class="pw-post-body-paragraph kc kd hu kf b kg ls iv ki kj lt iy kl lu lv ko kp lw lx ks kt ly lz kw kx ky hn dt translated">让我们假设您的应用程序逻辑使用两个具有某些属性的模型，其中一个依赖于另一个:</p><ul class=""><li id="348b" class="mc md hu kf b kg kh kj kk lu me lw mf ly mg ky mh mi mj mk dt translated">ObjectB: propB</li><li id="1775" class="mc md hu kf b kg ml kj mm lu mn lw mo ly mp ky mh mi mj mk dt translated">对象A: propA、对象B1和对象B2</li></ul><p id="4ab4" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">考虑到依赖项objectB2是可选的，在代码中的某个地方，您可能希望将ObjectA的每个属性(甚至是可选的属性)转换成字符串。</p><p id="2ff8" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">这里有一种不需要检查无效性的方法:</p><p id="1aef" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated"><strong class="kf hv"> ObjectB </strong>类:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ma mb l"/></div></figure><p id="b00f" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated"><strong class="kf hv"> ObjectA </strong>类将objectB2作为可选属性:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ma mb l"/></div></figure><p id="0851" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">下面的<strong class="kf hv"> JUnit </strong>测试说明了我们现在如何得到ObjectA实例的<a class="ae kz" href="https://hackernoon.com/tagged/safe" rel="noopener ugc nofollow" target="_blank">安全</a>字符串表示:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="ma mb l"/></div></figure><p id="37d8" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">我们在控制台中输出的ObjectA字符串是:</p><pre class="jk jl jm jn fq mq mr ms mt aw mu dt"><span id="55cb" class="mv lb hu mr b fv mw mx l my mz">ObjectA{propA=’Fake propA’, objectB1=ObjectB{propB=’Fake propB’}, objectB2=null}</span></pre><p id="f4f0" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">在这个<a class="ae kz" href="http://www.dassiorleando.xyz/jdk-7-objects-class-check-nullity-throw-npe" rel="noopener ugc nofollow" target="_blank">页面</a>上可以找到<strong class="kf hv">对象</strong>类的更多用法。</p><h1 id="75ca" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">结论</h1><p id="68d0" class="pw-post-body-paragraph kc kd hu kf b kg ls iv ki kj lt iy kl lu lv ko kp lw lx ks kt ly lz kw kx ky hn dt translated">总之，我们在这里已经看到了一种安全地用嵌入属性来字符串化一个对象的适当方法。</p><p id="25f7" class="pw-post-body-paragraph kc kd hu kf b kg kh iv ki kj kk iy kl lu kn ko kp lw kr ks kt ly kv kw kx ky hn dt translated">像往常一样，代码可以在<a class="ae kz" href="https://github.com/dassiorleando/jse" rel="noopener ugc nofollow" target="_blank"> GitHub repo </a>中获得。</p><h2 id="482d" class="mv lb hu bd lc na nb nc lg nd ne nf lk lu ng nh lm lw ni nj lo ly nk nl lq nm dt translated">感谢你阅读这篇文章，如果你喜欢，请推荐并分享。<br/>在<a class="ae kz" href="https://www.facebook.com/dassiorleando" rel="noopener ugc nofollow" target="_blank">脸书</a>、<a class="ae kz" href="https://twitter.com/sajouguetdassi" rel="noopener ugc nofollow" target="_blank">推特</a>、<a class="ae kz" href="https://www.linkedin.com/in/dassi-orleando-257b04ab/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上关注我，并访问我的<a class="ae kz" href="http://www.dassiorleando.xyz/" rel="noopener ugc nofollow" target="_blank">博客</a>。</h2><p id="49c0" class="pw-post-body-paragraph kc kd hu kf b kg ls iv ki kj lt iy kl lu lv ko kp lw lx ks kt ly lz kw kx ky hn dt translated"><strong class="kf hv">干杯！</strong></p></div></div>    
</body>
</html>