<html>
<head>
<title>Should you go hybrid?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你应该选择混合动力车吗？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/should-you-go-hybrid-138e9810a9db?source=collection_archive---------22-----------------------#2018-04-04">https://medium.com/hackernoon/should-you-go-hybrid-138e9810a9db?source=collection_archive---------22-----------------------#2018-04-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="0dfb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，我想说，在基于html/web的移动应用程序流行之前，我是它的支持者。当这甚至不是一个好主意时，我想重新做一遍——工具太笨重了。我告诉我的(移动)经理，我们应该只做基于网络的移动应用，他开玩笑地问我为什么要质疑他做过的每一个决定。</p><p id="91ae" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我更有经验了，我仍然认为与你的移动应用混合是一个好主意，但我认为大多数人被说服做错了，和/或出于错误的原因。人们犯的错误是，这与流行语无关。这不是要切换到Cordova或Flutter或React Native或Xamarin或任何特定的框架。</p><p id="8451" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在不同的客户机之间共享代码的正确方法是将它们分成小块，以减少层叠破坏。您需要使用组件化的架构，并使用版本化的包来导入代码，这样客户端就不必一前一后地更新。</p><h2 id="ae88" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">背景</h2><p id="0711" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">我曾经在一家企业产品公司工作，那里有一个非常大的软件套件，该套件基于内部部署(也有云托管选项，这使得它成为一种“混合”产品。)25年来，产品代码库变得大得离谱。在花费数百万美元的开发和测试时间后，新版本的软件大约每年都会发布。新版本通常只包括少量标题项目，捆绑了一些其他维护工作和边际改进。</p><p id="8145" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于所有的共享代码和共享基础设施，维护大型产品可能是一场噩梦。简单的改变可能需要和复杂的新功能一样长的时间来完成。这是因为新功能可以作为微服务或单独的回购分离出来，以避免过去的错误。对旧功能的升级会导致交叉测试的雪崩。需要一个大型的QA团队来测试一大堆模块中的小变化，其中一些没有人真正了解，甚至没有开发人员负责。</p><p id="3306" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">每当你把“代码共享”作为主要优先事项时，都会发生同样的权衡。如果你试图通过包装你的web应用程序来创建你的移动应用程序，对网站的简单改变现在就可以破坏移动应用程序，反之亦然。</p><p id="e458" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">自动化测试能解决这个问题吗？不完全是。如果您为您的所有客户端编写自动化测试，并在CI中运行它们，您将知道什么时候进行了无效的代码更改。这将有助于防止由此产生的错误(会有很多)进入生产环境。但是作为交换，你仍然会因为做出通过所有测试的改变而损失大量的工作时间。自动化测试帮助了你的客户，但并没有真正帮助你的工程师。你还会浪费时间来编写测试。请记住，对于一个web/mobile混合应用程序，我们谈论的是UI测试，这通常是维护起来最昂贵和最麻烦的。</p><h2 id="8941" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">理解流行语</h2><p id="a0eb" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">在评估最新技术时，你必须设法弄清楚这项技术实际上是为谁服务的，以及它与你目前的职位相比如何。</p><p id="b501" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">新潮的技术往往有利于创业文化。他们喜欢能够让你快速创建概念验证工作的工具。快速迭代，快速失败。自然，从长远来看，这些技术往往会导致更高的维护成本。它们是债务融资的一种形式。这个想法是，如果产品出现故障，无论如何你都不必支付长期维护费用。</p><p id="ee4b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以阿帕奇·科尔多瓦为例。科尔多瓦可以让你把你的网站打包到一个移动应用程序中。这项技术可以让你制作一个网站，然后去找你的老板或客户或投资者，说“我们有一个移动应用程序。”但是，由于本文前面描述的原因，从长远来看，这将会降低您的速度。您试图一次共享所有代码，所以现在您需要开始将不同平台的更改塞进同一个代码库。你需要各种各样的动态开关、触发器、表格等。科尔多瓦是许多公司发现自己陷入最糟糕的共享代码地狱的最短路径。</p><p id="78d0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，有趣的是，你可能点击了这篇文章，因为你正在考虑“转向科尔多瓦”“切换”，也就是说，你已经有一个移动应用程序，但你想把它变成一个科尔多瓦应用程序，因为你认为这可能会降低你的成本。冒着听起来像破唱片的风险，我告诉你相反的事情会发生。与维护单独的应用程序相比，您的成本将会上升，而您的迭代速度将会下降，就像我的旧公司一样，该公司有数百名工程师，他们花了一年时间来发布边际升级。尝试两次使用相同的源代码可以降低短期成本，但会增加长期成本。也就是说，除非你用正确的方法。</p><h2 id="daaa" class="jp jq hu bd jr js jt ju jv jw jx jy jz jc ka kb kc jg kd ke kf jk kg kh ki kj dt translated">如何在21世纪共享代码</h2><p id="fe7a" class="pw-post-body-paragraph ir is hu it b iu kk iw ix iy kl ja jb jc km je jf jg kn ji jj jk ko jm jn jo hn dt translated">我已经在第一部分破坏了它——为您的共享前端代码使用组件架构远比选择任何特定的神奇工具更重要。</p><p id="549c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">组件架构并不是一个新的想法。旧的桌面和web表单框架总是有一个“控件”的概念，它是可重用的UI块。但是这些很少是真正的跨平台工具，所以它们没有太多存在的理由，除了可能给你的公司一个可以在两个不同的网页上使用的花哨的日期选择器。</p><p id="903f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">组件架构对于前端就像微服务对于后端一样。它是一种提高生产力的药物，用于消除重叠的依赖性，并允许您异步部署软件的不同部分，同时仍然最终共享基础设施。</p><p id="b24f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">React和Angular(新)都遵循高度组件化的设计原则。组件本身遵循面向对象的原则，具有不同的输入和输出正式机制。出于这些目的，Angular甚至内置了依赖注入。</p><p id="65f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">诀窍是构建这些组件，然后不要在不同的平台之间共享源代码。取而代之的是，将<em class="kp">版本化的</em>组件发布到私有的包管理器存储库中，然后将它们一部分一部分地集成到每个客户机中。当客户端需要新版本时，更新所需的组件版本，测试并交付。每个客户都可以通过这种方式独立对待。</p><p id="f2f7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你走这条路，你可以做混合应用，不需要任何特定的框架。您可以自由地逐块升级，甚至将基于web的UI与每个屏幕的原生UI混搭。你可以用webviews相当手动地做到这一点(这是Cordova最终使用的，但你可以一部分一部分地做，而不是全有或全无。)</p><p id="1ae0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这种方法的美妙之处在于，当您开始对一个组件进行更改时，您没有义务立即在所有不同的客户端平台上更新该组件的版本。可以允许不同的客户端落后于旧版本，直到它们准备好升级。当不同的客户端平台无法使用完全相同的代码时，您也可以开始进入不同的模型，如分叉代码库。</p></div></div>    
</body>
</html>