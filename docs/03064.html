<html>
<head>
<title>Intercepting HTTP requests from Electron apps with Postman</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Postman拦截来自电子应用程序的HTTP请求</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/intercepting-http-requests-from-electron-apps-with-postman-6edc011b0c12?source=collection_archive---------3-----------------------#2018-04-07">https://medium.com/hackernoon/intercepting-http-requests-from-electron-apps-with-postman-6edc011b0c12?source=collection_archive---------3-----------------------#2018-04-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/cf6aa869674960cd6cce563a4c5a932d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5M2sPkeaWNiPIz-lUgH4rg.png"/></div></div></figure><div class=""/><p id="db29" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">并非所有的API都有文档记录。在最近的一个项目——<a class="ae ka" href="https://vscodethemes.com/" rel="noopener ugc nofollow" target="_blank">VSCodeThemes，</a>中，我着手清理没有官方API的<a class="ae ka" href="https://marketplace.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio Marketplace </a>。</p><p id="ea09" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用Chrome的网络检查器并捕捉来自桌面应用程序的请求，我可以逆向设计市场应用程序。</p><p id="9c49" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这篇文章将讲述如何使用<a class="ae ka" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank"> Postman </a>只需点击几下鼠标就能拦截来自<a class="ae ka" href="https://electronjs.org/" rel="noopener ugc nofollow" target="_blank">electronic</a>应用程序的HTTP请求。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><h1 id="7a3e" class="ki kj if bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">启动邮递员代理</h1><p id="a063" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">你要做的第一件事是打开邮递员。如果你没有，你可以从<a class="ae ka" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">这里</a>下载。</p><p id="661d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦打开，配置Postman的<a class="ae ka" href="https://www.getpostman.com/docs/v6/postman/sending_api_requests/proxy" rel="noopener ugc nofollow" target="_blank">代理服务器</a>就像点击<em class="ll">卫星</em>图标一样简单。</p><figure class="ln lo lp lq fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lm"><img src="../Images/147702edcb5eac14b2dfa36abf6a562a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ok4dbqvMTMpb23p5LtBn9w.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Click the <strong class="bd lv">Satellite</strong> icon to configure the proxy server.</figcaption></figure><p id="050d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用默认值将在端口5555上启动代理服务器，并将所有输出记录到<a class="ae ka" href="https://www.getpostman.com/docs/v6/postman/sending_api_requests/history" rel="noopener ugc nofollow" target="_blank">历史</a>中。单击“连接”按钮启动代理服务器。</p><h1 id="01b3" class="ki kj if bd kk kl lw kn ko kp lx kr ks kt ly kv kw kx lz kz la lb ma ld le lf dt translated">打开电子应用程序</h1><p id="cff5" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">随着代理服务器的启动，对它的任何请求都将被记录下来，并允许您以后重放它们。下一步是配置电子应用程序通过代理发送请求。</p><p id="7e46" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">由于电子应用程序构建在chromium之上，我们可以使用几个命令行参数将应用程序内部的HTTP请求重定向到代理服务器。</p><p id="2597" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以VSCode为例，打开电子应用程序:</p><figure class="ln lo lp lq fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mb"><img src="../Images/51d5ab68694614262b65c5790d01fd35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PxcGBgcgjpGBpBctqm-i8g.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Open VSCode from Terminal (macOS). <a class="ae ka" href="https://gist.githubusercontent.com/jschr/7fbdbd41ef092a1282ffaa23c45bc2a1/raw/f6e2c7f6970a5db0ccd086a4455d6d33d73aff30/open.sh" rel="noopener ugc nofollow" target="_blank">Copy the command</a>.</figcaption></figure><p id="76cb" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh mc md me mf b">--args</code>之后的任何内容都作为参数传递给应用程序。我们将添加两个标志来将流量路由到代理服务器并启用HTTPS。</p><p id="2c8c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一个，<code class="eh mc md me mf b">--proxy-server</code>告诉chromium使用一个<a class="ae ka" href="https://www.chromium.org/developers/design-documents/network-settings#TOC-Command-line-options-for-proxy-settings" rel="noopener ugc nofollow" target="_blank">定制代理配置</a>。将此设置为<code class="eh mc md me mf b">localhost:5555</code>会将所有请求路由到Postman代理服务器。</p><p id="bfd2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第二个参数，<code class="eh mc md me mf b">--ignore-certificate-errors</code>将暂时禁用证书检查。没有它，电子应用程序将错误地通过HTTPS发送任何请求。</p><h1 id="0fba" class="ki kj if bd kk kl lw kn ko kp lx kr ks kt ly kv kw kx lz kz la lb ma ld le lf dt translated">向代理发送请求</h1><p id="e61a" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">现在，电子应用程序被配置为通过我们的代理路由HTTP请求，我们需要做的就是触发相关的API调用。</p><p id="b170" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这个例子中，我们搜索扩展来找出我们需要哪个端点来抓取Visual Studio市场。</p><figure class="ln lo lp lq fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mg"><img src="../Images/5138d76a5ed4ccb16a65e834e3c3a02b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*otwMmEVUZvntTD9Xld2frg.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Sending queries from VSCode to Postman Proxy.</figcaption></figure><h1 id="299d" class="ki kj if bd kk kl lw kn ko kp lx kr ks kt ly kv kw kx lz kz la lb ma ld le lf dt translated">浏览邮递员历史</h1><p id="5f8e" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">发出请求时，你会开始看到它们出现在Postman的历史记录标签中。您可以在这里浏览电子应用程序提出的请求。</p><figure class="ln lo lp lq fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/b2a6e31868f56cc9b5babfa6c5cbc990.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ERp_Ioj_a_sH3-zoUqtDkg.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Browsing requests made through Postman requests.</figcaption></figure><p id="b508" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击请求上的<em class="ll">发送</em>会让你看到完整的回复。由于没有文档，更改参数并查看它如何影响响应将有助于您对API进行逆向工程。</p><h1 id="3080" class="ki kj if bd kk kl lw kn ko kp lx kr ks kt ly kv kw kx lz kz la lb ma ld le lf dt translated">结论</h1><p id="9b09" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">用Postman拦截来自电子应用程序的HTTP请求很容易设置。这当然只适用于电子应用程序。查看<a class="ae ka" href="http://Charles proxy https://www.charlesproxy.com/" rel="noopener ugc nofollow" target="_blank"> Charles proxy </a>，它是一个全功能的工具，可以拦截来自你电脑的所有HTTP流量。</p><p id="f8d2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">黑客快乐！</p><figure class="ln lo lp lq fq hw"><div class="bz el l di"><div class="mi mj l"/></div></figure></div></div>    
</body>
</html>