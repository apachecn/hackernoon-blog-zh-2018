<html>
<head>
<title>Mapping Form Request to Eloquent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从请求到雄辩的映射</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/mapping-form-request-to-eloquent-6eb30ee9eb7d?source=collection_archive---------5-----------------------#2018-04-08">https://medium.com/hackernoon/mapping-form-request-to-eloquent-6eb30ee9eb7d?source=collection_archive---------5-----------------------#2018-04-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/093b857c88fc6169885d50aa19a9f118.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1GRo59cnTgGUAPdG_BStA.png"/></div></div></figure><div class=""/><p id="00df" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Laravel附带了API资源，用于将雄辩的对象映射到响应中。但是请求呢？纠结这个很久了，终于开心的介绍包包了！</p><h2 id="e8cf" class="ka kb if bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">1-测试</h2><p id="60bc" class="pw-post-body-paragraph jc jd if je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">在以前的帖子中，我已经说过我是一个多么热爱TDD的人。我觉得如果我知道如何与实现交互，那么讨论实现的问题会更容易。先说测试。</p><figure class="la lb lc ld fq hw"><div class="bz el l di"><div class="le lf l"/></div></figure><p id="b061" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">简单的创建过程，但是<code class="eh lg lh li lj b">$administrator-&gt;create($request-&gt;validated())</code>不能工作，因为a)我们想要散列密码，b)数据库列被称为<code class="eh lg lh li lj b">department_id</code>而不是<code class="eh lg lh li lj b">department</code>。</p><h2 id="bf80" class="ka kb if bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">2-将表单请求转换为包</h2><p id="09b1" class="pw-post-body-paragraph jc jd if je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">表单请求是验证输入数据的很好的类。在验证之后，我们可以用它将输入转换成雄辩者能够理解的东西。这里有一个片段。</p><figure class="la lb lc ld fq hw"><div class="bz el l di"><div class="le lf l"/></div></figure><p id="64a2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们现在可以通过调用<code class="eh lg lh li lj b">$request-&gt;toBag()</code>将请求转换成数据包，而不是使用控制器中的<code class="eh lg lh li lj b">$request-&gt;validated()</code>。<code class="eh lg lh li lj b">bag</code>将负责完成我们想要的各种输入转换。看看这个:</p><figure class="la lb lc ld fq hw"><div class="bz el l di"><div class="le lf l"/></div></figure><h2 id="1625" class="ka kb if bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">3-总结-处理程序</h2><p id="d06e" class="pw-post-body-paragraph jc jd if je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">和往常一样，请求处理程序将对Laravel的表单请求进行类型提示，以自动验证输入数据。如果一切顺利，我们可以将这些数据转换成一包经过验证的数据，并将其传递给口才。</p><figure class="la lb lc ld fq hw"><div class="bz el l di"><div class="le lf l"/></div></figure><h2 id="b87f" class="ka kb if bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">4-绿色测试！</h2><p id="eea8" class="pw-post-body-paragraph jc jd if je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">该实现满足步骤1中描述的测试。这最终满足了我保持一个干净、直观的API请求与数据库结构分离的愿望，就像API响应可以在不需要更改数据库的情况下进行转换一样。</p></div></div>    
</body>
</html>