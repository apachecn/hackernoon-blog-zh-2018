<html>
<head>
<title>Making a Platforming Game with React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React Native制作平台游戏</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/making-a-platforming-game-with-react-native-4682b4d4d209?source=collection_archive---------3-----------------------#2018-04-09">https://medium.com/hackernoon/making-a-platforming-game-with-react-native-4682b4d4d209?source=collection_archive---------3-----------------------#2018-04-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/324e04f67c71b397b4444089e262bbcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i1AHrykWlfAwRkgJNkjWVg.png"/></div></div></figure><div class=""/><p id="3325" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这一系列帖子中，我们将使用React Native和<a class="ae ka" href="https://github.com/bberak/react-native-game-engine" rel="noopener ugc nofollow" target="_blank"> React Native游戏引擎</a>开发经典的大金刚街机游戏的翻拍版。由于这将是一款仅支持移动设备的游戏，我们将大大简化原始游戏的控制——我们的游戏应该只需要一根手指就可以玩。</p><p id="7668" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是我们努力实现的目标的预览:</p><div class="kb kc kd ke fq ab cb"><figure class="kf hw kg kh ki kj kk paragraph-image"><img src="../Images/465fcc52245f241f07c63716dbd2d115.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/1*m_ZipjWLlmqmLTjLuQ2PVA.gif"/></figure><figure class="kf hw kg kh ki kj kk paragraph-image"><img src="../Images/21cc5630fa5b42f97f7f3ea0de985083.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/1*dEArjUdatshK951QpDlWhw.gif"/></figure><figure class="kf hw kg kh ki kj kk paragraph-image"><img src="../Images/4b83f75533c6303b4fdaa032f22f8e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:532/1*dMaRGBSpNaJAyJMUEenbig.gif"/><figcaption class="kl km fg fe ff kn ko bd b be z ek kp di kq kr">Our player needs to ascend a series of sloping ramps whilst avoiding barrels that are being thrown by Kong</figcaption></figure></div><p id="0f80" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你不熟悉原版游戏，我们的角色马里奥(最初被称为Jump Man)试图拯救公主(最初被称为Pauline)，同时躲避主要对手孔从一系列坡道上扔下的桶。前往<a class="ae ka" href="https://youtu.be/rIcbgMdxKdw" rel="noopener ugc nofollow" target="_blank"> Youtube观看我们正在开发的应用程序的游戏演示</a>。</p><p id="50b9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了保持良好的进度，这将不是一个逐行的教程，我们将涵盖一些重要的和有价值的主题。完整源代码见<a class="ae ka" href="https://github.com/bberak/react-native-donkey-kong" rel="noopener ugc nofollow" target="_blank"> React原生大金刚</a>。</p><h1 id="5dd4" class="ks kt if bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">项目设置</h1><p id="ae41" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">在您初始化了vanilla React Native或<a class="ae ka" href="https://expo.io/" rel="noopener ugc nofollow" target="_blank"> Expo项目</a>之后，安装以下先决条件:</p><h2 id="2a55" class="lv kt if bd ku lw lx ly ky lz ma mb lc jn mc md lg jr me mf lk jv mg mh lo mi dt translated"><a class="ae ka" href="https://github.com/bberak/react-native-game-engine" rel="noopener ugc nofollow" target="_blank"> React原生游戏引擎</a></h2><p id="2478" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">这个库将帮助我们循环运行我们的游戏，并管理/操纵我们的游戏实体(玩家；射弹；敌人；梯子；平台等。).特别是，我们将使用GameEngine组件，它是<a class="ae ka" href="https://github.com/bberak/react-native-game-engine#managing-complexity-with-component-entity-systems" rel="noopener ugc nofollow" target="_blank">组件-实体-系统</a>模式的松散实现。</p><pre class="kb kc kd ke fq mj mk ml mm aw mn dt"><span id="2a3a" class="lv kt if mk b fv mo mp l mq mr">npm install — save react-native-game-engine</span></pre><h2 id="2f08" class="lv kt if bd ku lw lx ly ky lz ma mb lc jn mc md lg jr me mf lk jv mg mh lo mi dt translated"><a class="ae ka" href="http://brm.io/matter-js/" rel="noopener ugc nofollow" target="_blank">事项JS </a></h2><p id="5db2" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">这是一个2D物理图书馆，它将帮助我们模拟从一系列斜坡上投掷物体的过程。这也将有助于我们移动我们的角色马里奥上斜坡走向公主。</p><pre class="kb kc kd ke fq mj mk ml mm aw mn dt"><span id="3a27" class="lv kt if mk b fv mo mp l mq mr">npm install --save matter-js</span></pre><h2 id="4972" class="lv kt if bd ku lw lx ly ky lz ma mb lc jn mc md lg jr me mf lk jv mg mh lo mi dt translated">其他NPM套餐</h2><pre class="kb kc kd ke fq mj mk ml mm aw mn dt"><span id="a7a3" class="lv kt if mk b fv mo mp l mq mr">npm install --save lodash # Always good to have<br/>npm install  --save d3-interpolate # Will help us create a nice jump curve</span></pre><h2 id="f3e5" class="lv kt if bd ku lw lx ly ky lz ma mb lc jn mc md lg jr me mf lk jv mg mh lo mi dt translated"><a class="ae ka" href="https://www.spriters-resource.com" rel="noopener ugc nofollow" target="_blank"> Spriters资源</a></h2><p id="5ba9" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">我从网站<a class="ae ka" href="https://www.spriters-resource.com" rel="noopener ugc nofollow" target="_blank"> Spriters Resource </a>上找到了一些很棒的艺术品和资产。我在这里找到了大金刚的原始雪碧床单。他们拥有大量其他游戏的资产。</p><p id="ebcd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">特别是，非常感谢Zeon的精彩的大金刚雪碧，我在整个游戏中广泛使用了它。</p><h2 id="5333" class="lv kt if bd ku lw lx ly ky lz ma mb lc jn mc md lg jr me mf lk jv mg mh lo mi dt translated"><a class="ae ka" href="https://www.aseprite.org" rel="noopener ugc nofollow" target="_blank">无菌纸</a></h2><p id="9c25" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">为了编辑、切割和缩放游戏中的精灵，我使用了一个叫做<a class="ae ka" href="https://www.aseprite.org" rel="noopener ugc nofollow" target="_blank"> Aseprite </a>的伟大的像素艺术工具。</p><p id="bceb" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我们不需要编辑任何插图——我们将简单地使用来自<a class="ae ka" href="https://github.com/bberak/react-native-donkey-kong" rel="noopener ugc nofollow" target="_blank">React Native Donkey Kong</a>repo的图像精灵。</p><h1 id="bdd7" class="ks kt if bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">启动游戏实体</h1><p id="dbdf" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">游戏实体是我们游戏世界中的所有游戏对象(它们也不一定是可见的)，我们可以随心所欲地添加和删除它们。在我们的游戏中，这将包括马里奥；平台；桶；公主；孔；梯子等。</p><p id="cb8d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，让我们为平台实体编写组件代码。创建以下文件<strong class="je ig"> <em class="ms"> platform.js </em> </strong>:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="3c97" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们跟着<strong class="je ig"> <em class="ms"> mario.js </em> </strong>(玩家控制的角色):</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="686d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可能已经注意到我们引用了一个<strong class="je ig"> <em class="ms"> constants.js </em> </strong>文件。它包含一个碰撞类别的地图，我们的物理引擎使用它来确定哪些游戏实体应该碰撞。</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="b593" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们创建我们的第一个(也是唯一的)关卡，创建一个名为<strong class="je ig"> <em class="ms">的文件entities.js </em> </strong>:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="fea0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来让我们更新我们的<strong class="je ig"> <em class="ms"> App.js </em> </strong>文件:</p><figure class="kb kc kd ke fq hw"><div class="bz el l di"><div class="mt mu l"/></div></figure><blockquote class="mv mw mx"><p id="5924" class="jc jd ms je b jf jg jh ji jj jk jl jm my jo jp jq mz js jt ju na jw jx jy jz hn dt translated">请注意，我们可以将孩子传递到我们的游戏引擎组件中，他们将在我们的实体之后呈现。</p></blockquote><figure class="kb kc kd ke fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nb"><img src="../Images/4b3cb02b07a4cfe9efa59874b0dae381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ui8TT0qCaBcvM8elT1y9OA.png"/></div></div></figure><h1 id="9143" class="ks kt if bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">运行我们的游戏</h1><p id="b8ff" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">现在我们可以启动我们的应用程序<strong class="je ig"><em class="ms">react-native run-IOs</em></strong>，希望我们能够看到我们的游戏引擎组件正在渲染我们的七个平台和马里奥</p><p id="fa73" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我应该指出，我们所做的一切也适用于Android——为了简洁起见，我还是坚持使用iOS。</p><h1 id="2dc6" class="ks kt if bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">接下来</h1><p id="f170" class="pw-post-body-paragraph jc jd if je b jf lq jh ji jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz hn dt translated">在下一篇文章中，我们将开始连接我们的系统，并用一些简单的手势移动我们的角色。</p><p id="fe93" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">关注我(<a class="nc nd gr" href="https://medium.com/u/f8b321946d25?source=post_page-----4682b4d4d209--------------------------------" rel="noopener" target="_blank"> bberak </a>)敬请关注。</p><h1 id="9e2a" class="ks kt if bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp dt translated">链接和资源</h1><div class="ht hu fm fo hv ne"><a href="https://github.com/bberak/react-native-game-engine" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab ej"><div class="ng ab nh cl cj ni"><h2 class="bd ig fv z el nj eo ep nk er et ie dt translated">bberak/react-本地游戏引擎</h2><div class="nl l"><h3 class="bd b fv z el nj eo ep nk er et ek translated">react-native-game-engine -一个轻量级游戏引擎，用于React Native 🕹⚡🎮</h3></div><div class="nm l"><p class="bd b gc z el nj eo ep nk er et ek translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ib ne"/></div></div></a></div><div class="ht hu fm fo hv ne"><a href="https://github.com/bberak/react-native-donkey-kong" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab ej"><div class="ng ab nh cl cj ni"><h2 class="bd ig fv z el nj eo ep nk er et ie dt translated">bber AK/react-原生-大金刚</h2><div class="nl l"><h3 class="bd b fv z el nj eo ep nk er et ek translated">使用react-native-game-engine重制大金刚🙉</h3></div><div class="nm l"><p class="bd b gc z el nj eo ep nk er et ek translated">github.com</p></div></div><div class="nn l"><div class="nt l np nq nr nn ns ib ne"/></div></div></a></div><div class="ht hu fm fo hv ne"><a href="https://github.com/liabru/matter-js" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab ej"><div class="ng ab nh cl cj ni"><h2 class="bd ig fv z el nj eo ep nk er et ie dt translated">利亚布鲁/matter-js</h2><div class="nl l"><h3 class="bd b fv z el nj eo ep nk er et ek translated">matter-js -一个2D刚体物理引擎</h3></div><div class="nm l"><p class="bd b gc z el nj eo ep nk er et ek translated">github.com</p></div></div><div class="nn l"><div class="nu l np nq nr nn ns ib ne"/></div></div></a></div><div class="ht hu fm fo hv ne"><a href="https://www.aseprite.org/" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab ej"><div class="ng ab nh cl cj ni"><h2 class="bd ig fv z el nj eo ep nk er et ie dt translated">无菌晶体</h2><div class="nl l"><h3 class="bd b fv z el nj eo ep nk er et ek translated">动画精灵编辑器和像素艺术工具</h3></div><div class="nm l"><p class="bd b gc z el nj eo ep nk er et ek translated">www.aseprite.or</p></div></div><div class="nn l"><div class="nv l np nq nr nn ns ib ne"/></div></div></a></div></div></div>    
</body>
</html>