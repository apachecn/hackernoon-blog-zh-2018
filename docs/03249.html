<html>
<head>
<title>What Makes Apache Flink the Best Choice for Streaming Applications?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">是什么让Apache Flink成为流媒体应用的最佳选择？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-makes-apache-flink-the-best-choice-for-streaming-applications-fc377858a53?source=collection_archive---------5-----------------------#2018-04-13">https://medium.com/hackernoon/what-makes-apache-flink-the-best-choice-for-streaming-applications-fc377858a53?source=collection_archive---------5-----------------------#2018-04-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/01a71840ce3b9ff597e7e24cf29def83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*d_tZRPKssQDvhNX3."/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">“Long lines of tiny speckles on light in a high-ceiling interior” by <a class="ae jg" href="https://unsplash.com/@sortino?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joshua Sortino</a> on <a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="faa2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><a class="ae jg" href="https://flink.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Flink </a>是一个<a class="ae jg" href="https://hackernoon.com/tagged/open-source" rel="noopener ugc nofollow" target="_blank">开源</a>流媒体平台，它为您提供了以容错方式运行实时数据处理管道的巨大能力，其规模为每秒数百万个事件。</p><p id="4d05" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">关键在于，它使用尽可能少的资源，以单毫秒的延迟完成所有这些工作。</p><p id="1703" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">那么，它是如何做到这一点的呢？是什么让它优于同一领域的其他解决方案呢？</p><h1 id="5550" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">在最少的资源上实现低延迟</h1><p id="db51" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Flink基于<a class="ae jg" href="https://research.google.com/pubs/pub43864.html" rel="noopener ugc nofollow" target="_blank">数据流模型</a>，即在元素到来时对其进行处理，而不是以小批量方式进行处理(这由<a class="ae jg" href="https://spark.apache.org/docs/2.2.0/streaming-programming-guide.html" rel="noopener ugc nofollow" target="_blank"> Spark streaming </a>完成)。</p><p id="08b4" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">微批次可以包含大量的元素，并且一次处理这些元素所需的资源可能是大量的。在稀疏数据流的情况下(在这种情况下，您只能以不规则的间隔获得突发数据)，这成为一个主要的棘手问题。</p><p id="c634" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您也不需要通过反复试验来配置微批量大小，以便批量的处理时间不会超过它的累积时间。如果发生这种情况，那么批处理就会开始排队，最终所有的处理都会停止。</p><p id="4712" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Dataflow允许flink在单台机器上以毫秒级的延迟每分钟处理数百万条记录(这也是因为Flink的托管内存和自定义序列化，但在下一篇文章中会有更多介绍)。下面是一些<a class="ae jg" href="https://data-artisans.com/blog/curious-case-broken-benchmark-revisiting-apache-flink-vs-databricks-runtime" rel="noopener ugc nofollow" target="_blank">基准</a>。</p><h1 id="ba7c" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">各种源和汇</h1><p id="855e" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Flink提供了到各种数据源和接收器的无缝连接。</p><p id="4855" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">其中包括:</p><ul class=""><li id="2017" class="li lj hu jj b jk jl jo jp js lk jw ll ka lm ke ln lo lp lq dt translated"><a class="ae jg" href="http://cassandra.apache.org/" rel="noopener ugc nofollow" target="_blank">阿帕奇卡珊德拉</a></li><li id="ecf3" class="li lj hu jj b jk lr jo ls js lt jw lu ka lv ke ln lo lp lq dt translated"><a class="ae jg" href="https://www.elastic.co/products/elasticsearch" rel="noopener ugc nofollow" target="_blank">弹性搜索</a></li><li id="9090" class="li lj hu jj b jk lr jo ls js lt jw lu ka lv ke ln lo lp lq dt translated"><a class="ae jg" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank">卡夫卡</a></li><li id="44bf" class="li lj hu jj b jk lr jo ls js lt jw lu ka lv ke ln lo lp lq dt translated"><a class="ae jg" href="https://www.rabbitmq.com/" rel="noopener ugc nofollow" target="_blank"> RabbitMQ </a></li><li id="608e" class="li lj hu jj b jk lr jo ls js lt jw lu ka lv ke ln lo lp lq dt translated"><a class="ae jg" href="https://hive.apache.org/" rel="noopener ugc nofollow" target="_blank">蜂巢</a></li></ul><h1 id="fc30" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">容错</h1><p id="5923" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Flink使用检查点(定期将内部状态保存到外部源，如HDFS)提供强大的容错能力。</p><p id="c237" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然而，Flink的检查点机制可以是增量的(只保存更改，而不是整个状态)，这确实减少了HDFS中的数据量和I/O持续时间。检查点开销几乎可以忽略不计，这使得用户可以在Flink应用程序中拥有大型状态。</p><p id="a784" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Flink还通过zookeeper提供了高可用性设置。这是为了在驱动程序(在Flink中称为JobManager)由于某种错误而崩溃的情况下重新生成作业。</p><h1 id="9b51" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">高级API</h1><p id="975a" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">与<a class="ae jg" href="https://hackernoon.com/tagged/apache" rel="noopener ugc nofollow" target="_blank"> Apache </a> Storm(也遵循数据流模型)不同，Flink以Map/Reduce、Filters、Window、GroupBy、Sort和Joins的形式提供了一个极其简单的高级api。</p><p id="35c5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这为开发人员提供了很大的灵活性，并在编写新作业时加快了开发速度。</p><h1 id="90d1" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">有状态处理</h1><p id="644b" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">有时一个操作需要来自其他来源的一些配置或数据来执行操作。一个简单的例子是计算流x中Y类型记录的数量，这个计数器就是操作的状态。</p><p id="f63e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Flink提供了一个简单的API来与状态交互，就像与java对象交互一样。状态可以由内存、文件系统或RocksDB支持，它们具有检查点，因此是容错的。例如，关于上面的例子，在应用程序重启的情况下，您的计数器值仍将被保留。</p><h1 id="7fc4" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">一次加工</h1><p id="d5bb" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Apache Flink像Kafka 0.11和更高版本一样，以最小的开销和零开发工作提供了一次处理。这在Spark Streaming和Storm等其他流媒体解决方案中是很重要的，并且在Apache Samza 中不支持<a class="ae jg" href="https://cwiki.apache.org/confluence/display/SAMZA/SEP-10+Exactly-once+Processing+in+Samza" rel="noopener ugc nofollow" target="_blank">。</a></p><div class="lw lx fm fo ly lz"><a href="https://www.confluent.io/blog/exactly-once-semantics-are-possible-heres-how-apache-kafka-does-it/" rel="noopener  ugc nofollow" target="_blank"><div class="ma ab ej"><div class="mb ab mc cl cj md"><h2 class="bd hv fv z el me eo ep mf er et ht dt translated">恰好一次语义是可能的:下面是阿帕奇卡夫卡如何做到这一点</h2><div class="mg l"><h3 class="bd b fv z el me eo ep mf er et ek translated">我很高兴我们达到了一个激动人心的里程碑，卡夫卡社区期待已久:我们已经…</h3></div><div class="mh l"><p class="bd b gc z el me eo ep mf er et ek translated">www.confluent.io</p></div></div><div class="mi l"><div class="mj l mk ml mm mi mn ja lz"/></div></div></a></div><h1 id="aed2" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">SQL支持</h1><p id="fdbe" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">像Spark streaming一样，Flink也提供了一个<a class="ae jg" href="https://ci.apache.org/projects/flink/flink-docs-release-1.4/dev/table/sql.html" rel="noopener ugc nofollow" target="_blank"> SQL API接口</a>，这使得没有编程背景的人编写工作变得更加容易。Flink SQL日益成熟，已经被优步和阿里巴巴等公司用于对实时数据进行分析。</p><figure class="mo mp mq mr fq iv"><div class="bz el l di"><div class="ms mt l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Flink SQL &amp; TableAPI in Large Scala Production at Alibaba</figcaption></figure><h1 id="38d5" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">环境支持</h1><p id="8fc3" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Flink作业可以在分布式系统或本地机器上运行。该程序可以在mesos、yarn、kubernetes以及独立模式下运行(例如在docker容器中)。从Flink 1.4开始，Hadoop不再是先决条件，这为运行Flink作业提供了许多可能性。</p><h1 id="2a83" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">令人敬畏的社区</h1><p id="c842" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Flink有一个很棒的开发社区，允许频繁的新功能和错误修复，以及很棒的工具来进一步减轻开发人员的工作。这些工具包括:</p><ul class=""><li id="b0fa" class="li lj hu jj b jk jl jo jp js lk jw ll ka lm ke ln lo lp lq dt translated"><a class="ae jg" href="https://github.com/FlinkML/flink-tensorflow" rel="noopener ugc nofollow" target="_blank"> Flink Tensorflow </a> —将Tensorflow图形作为Flink进程运行</li><li id="3080" class="li lj hu jj b jk lr jo ls js lt jw lu ka lv ke ln lo lp lq dt translated"><a class="ae jg" href="https://github.com/htm-community/flink-htm" rel="noopener ugc nofollow" target="_blank">弗林克HTM</a>—弗林克一条溪流中的异常检测</li><li id="5544" class="li lj hu jj b jk lr jo ls js lt jw lu ka lv ke ln lo lp lq dt translated"><a class="ae jg" href="https://github.com/otherwise777/Temporal_Graph_library" rel="noopener ugc nofollow" target="_blank">Tink</a>——构建在Flink之上的时态图形库</li></ul><p id="abf1" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Flink SQL和复杂事件处理(CEP)最初也是阿里巴巴开发的，并回馈给了Flink。</p></div><div class="ab cl mu mv hc mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hn ho hp hq hr"><p id="e2e5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">注意</strong> : Spark Streaming 2.3已经开始支持连续处理，而不是微批处理。点击查看<a class="ae jg" href="https://databricks.com/blog/2018/03/20/low-latency-continuous-processing-mode-in-structured-streaming-in-apache-spark-2-3-0.html" rel="noopener ugc nofollow" target="_blank">。我将使用yahoo-streaming-benchmarks运行一些基准测试，并在下一篇文章中发布结果。</a></p></div><div class="ab cl mu mv hc mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hn ho hp hq hr"><p id="a2a2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv"> <em class="nb">在</em></strong><a class="ae jg" href="http://www.linkedin.com/in/kartik-khare" rel="noopener ugc nofollow" target="_blank"><strong class="jj hv"><em class="nb">LinkedIn</em></strong></a><strong class="jj hv"><em class="nb">或</em> </strong> <a class="ae jg" href="https://www.facebook.com/KK.corps" rel="noopener ugc nofollow" target="_blank"> <strong class="jj hv"> <em class="nb">【脸书】</em> </strong> </a> <strong class="jj hv"> <em class="nb">上与我联系或发邮件至</em></strong><a class="ae jg" href="mailto:kharekartik@gmail.com" rel="noopener ugc nofollow" target="_blank"><strong class="jj hv"><em class="nb">【kharekartik@gmail.com</em></strong></a><strong class="jj hv"><em class="nb">分享反馈。</em> </strong></p><figure class="mo mp mq mr fq iv"><div class="bz el l di"><div class="nc mt l"/></div></figure></div></div>    
</body>
</html>