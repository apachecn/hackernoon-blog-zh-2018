<html>
<head>
<title>Create your own PubSub Client &amp; Server use WebSocket</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用WebSocket创建自己的PubSub客户端和服务器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/create-your-own-pubsub-client-server-use-websocket-65dd1820e997?source=collection_archive---------7-----------------------#2018-04-15">https://medium.com/hackernoon/create-your-own-pubsub-client-server-use-websocket-65dd1820e997?source=collection_archive---------7-----------------------#2018-04-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="0089" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">它是如何工作的？</h2></div><pre class="jj jk jl jm fq jn jo jp jq aw jr dt"><span id="8c1e" class="js jt hu jo b fv ju jv l jw jx">const pubSub = new PubSubClient('ws://localhost:3001', {<br/>      connect: true,<br/>      reconnect: true,<br/>    })<br/><br/>    const topicName = 'abc'<br/><br/>    pubSub.subscribe(topicName, (message) =&gt; {<br/>      console.log(`Got message from topic ${topicName}`, message)<br/>    })<br/><br/>    //publish a message to topic<br/>    pubSub.publish(topicName,<br/>      {title: 'Hello subscribers in the topic abc', body: 'How are you ?'})<br/><br/>    // Broadcast send message to subscribers but not me<br/>    pubSub.broadcast(topicName, {body: 'this is broadcast message'})</span><span id="5bbd" class="js jt hu jo b fv jy jv l jw jx">// Unsubscribe<br/>pubSub.unsubscribe(topicName)<br/></span></pre><h2 id="369c" class="js jt hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">Todo@</h2><ul class=""><li id="0702" class="kv kw hu kx b ky kz la lb ki lc km ld kq le lf lg lh li lj dt translated">如果看起来像垃圾邮件发送者，可能会限制发布者和发送消息的时间</li><li id="7b1d" class="kv kw hu kx b ky lk la ll ki lm km ln kq lo lf lg lh li lj dt translated">如果检测到多个发布的消息都指向同一个客户端，服务器可能需要等待一段时间(短时间)，然后发送一批消息，而不是发送一条消息。</li><li id="7ace" class="kv kw hu kx b ky lk la ll ki lm km ln kq lo lf lg lh li lj dt translated">添加加密客户端和服务器密钥共享，以便在连接时在客户端和服务器之间解密。WebSocket通信更安全。从客户端到服务器和服务器到客户端的消息是加密的。</li></ul><h2 id="d79c" class="js jt hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">第1部分:WebSocket客户端和WebSocket服务器</h2><figure class="jj jk jl jm fq lp"><div class="bz el l di"><div class="lq lr l"/></div></figure><h2 id="29a6" class="js jt hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">第2部分:订阅:发布、订阅、广播</h2><figure class="jj jk jl jm fq lp"><div class="bz el l di"><div class="ls lr l"/></div></figure><h2 id="4d98" class="js jt hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">第3部分:实现自动重新连接</h2><figure class="jj jk jl jm fq lp"><div class="bz el l di"><div class="lq lr l"/></div></figure><h2 id="e68c" class="js jt hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">第4部分:处理退订</h2><figure class="jj jk jl jm fq lp"><div class="bz el l di"><div class="lq lr l"/></div></figure><h2 id="3308" class="js jt hu bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">演示</h2><figure class="jj jk jl jm fq lp"><div class="bz el l di"><div class="ls lr l"/></div></figure><p id="30f7" class="pw-post-body-paragraph lt lu hu kx b ky lv iv lw la lx iy ly ki lz ma mb km mc md me kq mf mg mh lf hn dt translated">github:<a class="ae mi" href="https://github.com/tabvn/pubsub" rel="noopener ugc nofollow" target="_blank">https://github.com/tabvn/pubsub</a></p><p id="8fca" class="pw-post-body-paragraph lt lu hu kx b ky lv iv lw la lx iy ly ki lz ma mb km mc md me kq mf mg mh lf hn dt translated">视频播放列表<a class="ae mi" href="https://www.youtube.com/playlist?list=PLFaW_8zE4amNkFbpUVS3V0t_HrJSQdASD" rel="noopener ugc nofollow" target="_blank">这里</a></p></div></div>    
</body>
</html>