<html>
<head>
<title>Manipulating web application HTTP traffic with Fiddler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Fiddler操纵web应用程序HTTP流量</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/manipulating-web-application-http-traffic-with-fiddler-140d789d0a1c?source=collection_archive---------12-----------------------#2018-04-16">https://medium.com/hackernoon/manipulating-web-application-http-traffic-with-fiddler-140d789d0a1c?source=collection_archive---------12-----------------------#2018-04-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="2d2b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我在我正在开发的一个网络应用程序的前端偶然发现了一个奇怪的bug。这个应用程序向服务器执行一个ajax请求，并得到一个相对较大的JSON序列化对象，这是一个复杂计算的结果。当我使用浏览器开发工具调查响应时，一切似乎都很正常，所以看起来像是客户端问题。唯一的问题是，返回的对象是根据特定信息计算的结果，这种特定信息只能在除了浏览器本身之外没有任何工具的环境中找到，并且在开发<a class="ae jp" href="https://hackernoon.com/tagged/enviroment" rel="noopener ugc nofollow" target="_blank">环境</a>中不容易重现该bug。</p><p id="282b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了在我的本地机器上重现这个问题，我使用<a class="ae jp" href="https://www.telerik.com/fiddler" rel="noopener ugc nofollow" target="_blank"> Fiddler的</a>调试功能，执行了一个快速而肮脏的HTTP响应操作。</p><h2 id="2c32" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">关于提琴手</h2><p id="4e3d" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">Fiddler是一个HTTP调试代理，具有一些令人惊叹的功能，目前由Telerik开发(参见这篇<a class="ae jp" href="https://en.wikipedia.org/wiki/Fiddler_(software)" rel="noopener ugc nofollow" target="_blank">维基百科文章</a>了解完整历史)。对我来说，它是网络开发不可或缺的工具。尽管浏览器的开发工具<a class="ae jp" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>分析功能已经有了很大的进步，Fiddler还是提供了一些高级选项，就像这篇文章中描述的那样。</p><h2 id="15ec" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">用于演示的示例应用程序</h2><p id="b0e7" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">我写了一个超级简单的应用程序，从维基百科的公共API获取一些文章。该应用程序对以下URL执行ajax GET请求:</p><blockquote class="kq kr ks"><p id="bdfe" class="ir is kt it b iu iv iw ix iy iz ja jb ku jd je jf kv jh ji jj kw jl jm jn jo hn dt translated"><a class="ae jp" href="https://en.wikipedia.org/w/api.php?action=query&amp;list=categorymembers&amp;cmtitle=Category:Biology&amp;format=json&amp;origin=*" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/w/api.php?action=query&amp;list = Category members&amp;cm title =类别:生物学&amp;format = JSON&amp;origin = *</a></p></blockquote><p id="48da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">并返回一个JSON序列化对象，其中包含一些生物学类别的文章。我选择这个API进行演示，因为它是公共的、开放的(不需要认证)并且易于使用。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div class="fe ff kx"><img src="../Images/00ad72f2eafd4e69af11d3ee34d8fe19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1264/format:webp/1*hsEuySHhJGAfpTLNA4oN6w.png"/></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">The original response object from the Wikipedia API call. Screenshot was taken from <a class="ae jp" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">Postman</a></figcaption></figure><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lj"><img src="../Images/ec232246a2f2bb8a95d6a6b06be4e1d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SLb4MIAvWcNPFWBRFD3KuQ.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">The sample application normal flow, running in Google Chrome. The ajax request is pending (1), then completes and the results are displayed on the page (2)</figcaption></figure><h2 id="b7fe" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">操纵响应</h2><p id="bb54" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">默认情况下，Fiddler将监控浏览器HTTP请求(作为代理服务器)，但不会干涉它们。有两种调试模式:请求前和响应后。在“响应后”模式中，fiddler将从服务器获得响应，但不会将其转发回浏览器。在这一点上，我们有机会操纵反应。</p><p id="dcab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，我们来启用这个模式。从菜单栏中，选择规则-&gt;自动断点-&gt;响应后。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/c6a342d992b8ba374ff7395f0fefc0cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/1*_gN77eLZmK3_EF9LtUeEkQ.png"/></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Enable “After responses” debug mode</figcaption></figure><p id="d0f3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，我们将刷新浏览器页面，以便再次执行请求。发出了请求，得到了响应，但在Fiddler中暂停了。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lp"><img src="../Images/5689d0799e779cb2e9da0b470c8bec40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BsO1zP7nTfaxrA6DAoWNqg.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">The response is paused in the Fiddler proxy. The JSON serialized response payload is marked</figcaption></figure><p id="2e67" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下一步是操纵响应。这可以通过在响应检查面板中编辑响应文本来完成。下一个截图展示了这种操作。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lq"><img src="../Images/76671fba9eb7427e59dcb08bc7a2adde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NjDgaIWJAjYJ7Y4uhpqRyQ.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Manipulating a single value in the response. In this case, I changed “Biology” to “Math”. After editing, click the “Run to Completion” button on the top bar</figcaption></figure><p id="3c7c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">编辑完响应后，单击Fiddler响应面板上的“Run to Completion”按钮。被操纵的响应将继续它的旅程，到达它的最终目的地——浏览器。</p><figure class="ky kz la lb fq lc fe ff paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="fe ff lr"><img src="../Images/d088aa8229720c2a47bf34ed5ef40dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SGHzigZPaFuhTB5yXTlqjw.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">The final result: the altered value is displayed in the application (“Math” instead of “Biology”)</figcaption></figure></div><div class="ab cl ls lt hc lu" role="separator"><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx ly"/><span class="lv bw bk lw lx"/></div><div class="hn ho hp hq hr"><h2 id="87c1" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">用例</h2><p id="d43c" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">这个特性正是我快速解决我正在处理的客户问题所需要的。首先，我将整个JSON字符串从原始环境复制到我的开发环境中(使用browser developer tools network选项卡)。然后，我在本地机器上启动web应用程序，让它执行ajax请求。我在Fiddler中使用了“After Responses”调试模式，并用之前复制的数据替换了原始响应的JSON有效负载。这个问题又出现了，我很快就解决了。</p><h2 id="19ce" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">最后的话</h2><p id="8f1a" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">我确信许多开发人员不熟悉这种调试技术。在我最近使用它之后，我对它感到非常兴奋，并想与世界其他地方分享它。我希望你会发现它在类似的情况下是有用的。</p><figure class="ky kz la lb fq lc"><div class="bz el l di"><div class="lz ma l"/></div></figure></div></div>    
</body>
</html>