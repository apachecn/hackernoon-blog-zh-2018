<html>
<head>
<title>Deploy a business network on (free) IBM Blockchain Starter Plan</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在(免费)IBM区块链启动计划上部署业务网络</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploy-a-business-network-on-free-ibm-blockchain-starter-plan-93fafb3dd997?source=collection_archive---------2-----------------------#2018-04-17">https://medium.com/hackernoon/deploy-a-business-network-on-free-ibm-blockchain-starter-plan-93fafb3dd997?source=collection_archive---------2-----------------------#2018-04-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="0e70" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我今天庆祝我在IBM工作一周年。哇，我在脑子里念的时候听起来怪怪的。听起来好像我刚开始和我的女朋友约会什么的。还有什么比写一篇关于如何部署您的客户的帖子更好的方式来庆祝我的第一年呢🍌(.bna)文件到IBM <a class="ae jp" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">区块链</a>首发计划？但是在我们开始之前，让我先给你看一下你将要构建的东西。我想确定这个博客值得你花时间。附注:我从二月起就没写过博客了，所以请原谅我生疏的⌨️.</p><h1 id="9215" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">试映</h1><blockquote class="ko"><p id="0e3b" class="kp kq hu bd kr ks kt ku kv kw kx jo ek translated">目标是建立一个拍卖应用程序。这个应用程序将由一个composer-rest-server(即一个Swagger UI)控制。你将在这个应用程序中添加成员，提出报价，并最终结束竞标，用户界面将通过显示物品为“<strong class="ak">已售出</strong>”做出响应，如下所示:</p></blockquote><figure class="kz la lb lc ld le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/dbc20036b61e17102562d9805b54d59f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*lfkagutwWlMv--ax6SMwTQ.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">The final step in this app is to close the bidding. Commands are given using the (composer-rest-server) Swagger UI.</figcaption></figure><blockquote class="ko"><p id="435e" class="kp kq hu bd kr ks lp lq lr ls lt jo ek translated">对于您使用composer-rest-server发出的每个成功请求，将调用chaincode，您将能够在IBM Blockchain平台上看到chaincode日志，如下所示。只要您的区块链服务运行在云上，日志就会一直存在。</p></blockquote><figure class="kz la lb lc ld le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/a0859f626a547dcb8b557f2d6c96364f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QNJ8tpSceO-ouomtM_aMjw.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Checking chaincode logs after making requests with the composer-rest-server.</figcaption></figure><h1 id="3c47" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">语境</h1><p id="8400" class="pw-post-body-paragraph ir is hu it b iu lu iw ix iy lv ja jb jc lw je jf jg lx ji jj jk ly jm jn jo hn dt translated">像我的其他博文一样，焦点中的底层技术是Hyperledger Fabric框架。这是一个致力于推进跨行业区块链技术的框架。如果你不熟悉<a class="ae jp" href="https://www.hyperledger.org/about" rel="noopener ugc nofollow" target="_blank"> Hyperledger Fabric </a>，请在阅读这篇文章之前做一些研究。</p><blockquote class="ko"><p id="2fd4" class="kp kq hu bd kr ks kt ku kv kw kx jo ek translated">我今天将帮助您部署您客户🍌文件提交到IBM Cloud，并向您展示如何通过composer-rest-server向您的区块链网络提交事务。在博客的最后，您应该能够使用IBM Blockchain平台查看从composer-rest-server提交的chaincode日志。</p></blockquote><p id="7f17" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated"><strong class="it hv">另外，从现在开始，当我使用🍌表情符号，我指的是。bna文件。</strong></p></div><div class="ab cl me mf hc mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hn ho hp hq hr"><p id="c53c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你的🍌文件将您的所有业务逻辑(或智能合同，或链码)包含在一个文件中，该文件可以安装在组织的对等设备上。一旦您在对等体上安装了这个文件，您就可以启动<a class="ae jp" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>，并根据🍌文件。如果你想学习更多关于创造的知识。bna文件，看看这个<a class="ae jp" href="http://goo.gl/vZEJuF" rel="noopener ugc nofollow" target="_blank">教程</a>。</p><h1 id="82b7" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">先决条件</h1><ol class=""><li id="cffb" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">免费<a class="ae jp" href="https://ibm.biz/BdjLxy" rel="noopener ugc nofollow" target="_blank"> IBM云账户</a></li><li id="1bc9" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated"><a class="ae jp" href="http://goo.gl/hkUPRP" rel="noopener ugc nofollow" target="_blank"> NPM </a>和安装的节点(本博客用节点版本8.10.0测试)</li><li id="2710" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated">如果您使用过其他版本的composer-cli，或者以前部署过. bna文件，请运行以下命令:</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="98ac" class="ni jr hu ne b fv nj nk l nl nm">$ <!-- -->npm uninstall -g composer-rest-server</span><span id="8e00" class="ni jr hu ne b fv nn nk l nl nm">$ rm -rf ~/.composer</span><span id="7df9" class="ni jr hu ne b fv nn nk l nl nm">$ rm *.card</span><span id="745b" class="ni jr hu ne b fv nn nk l nl nm">$ rm -rf credentials/</span></pre><p id="3f43" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.(可选—如果由于docker容器已经运行而出现错误):</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="a7c0" class="ni jr hu ne b fv nj nk l nl nm">$ docker kill $(docker ps -q)</span><span id="ee4a" class="ni jr hu ne b fv nn nk l nl nm">$ docker rm $(docker ps -aq)</span><span id="c532" class="ni jr hu ne b fv nn nk l nl nm">$ docker rmi $(docker images -q)</span></pre><p id="73d7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.这一步极其重要。Starter Plan仅适用于Composer版本0.19.4。这个我在很多帖子里都回答过。所以我要再说一遍。<strong class="it hv">首发计划仅适用于</strong> <strong class="it hv">作曲</strong> <strong class="it hv">版本0.19.4。使用以下命令检查您的composer版本:</strong></p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="75be" class="ni jr hu ne b fv nj nk l nl nm">$ composer -v</span></pre><p id="5c50" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您看到“v0.19.4 ”,您就是👍🏼。否则，卸载Composer:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="569b" class="ni jr hu ne b fv nj nk l nl nm">$ npm uninstall -g composer-cli</span></pre><p id="3378" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后安装Composer版本0.19.4:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="5b08" class="ni jr hu ne b fv nj nk l nl nm">$ npm install -g composer-cli@0.19.4</span></pre><h1 id="a021" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤1:创建🍌文件</h1><p id="0f75" class="pw-post-body-paragraph ir is hu it b iu lu iw ix iy lv ja jb jc lw je jf jg lx ji jj jk ly jm jn jo hn dt translated">首先，我们需要克隆一个包含三个组件的repo，这三个组件是创建🍌文件:一个逻辑文件<strong class="it hv">(。js) </strong>，一个模型文件<strong class="it hv">(。cto) </strong>和访问控制<strong class="it hv">(。acl) </strong>文件。</p><ol class=""><li id="df60" class="ml mm hu it b iu iv iy iz jc no jg np jk nq jo mq mr ms mt dt translated">克隆包含这三个文件的回购协议，以及一个功能完整的业务网络</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="4646" class="ni jr hu ne b fv nj nk l nl nm">$ <!-- -->git clone https://github.com/IBM/BlockchainEvents-CompositeJourney.git</span></pre><p id="82aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.进入Composer目录，创建<strong class="it hv">。bna文件。</strong></p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="3389" class="ni jr hu ne b fv nj nk l nl nm">$ cd <!-- -->BlockchainEvents-CompositeJourney/Composer</span><span id="416b" class="ni jr hu ne b fv nn nk l nl nm">$ npm install</span></pre><p id="47c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果此命令失败，请检查您是否拥有正确的节点版本(应为8.10.0)和npm v 5.6.0。</p><p id="98da" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.现在你应该有一个🍌文件，(<strong class="it hv"> events.bna </strong>)，它位于您的<code class="eh nr ns nt ne b">BlockchainEvents-CompositeJourney/Composer/dist</code>目录中。</p><h1 id="4042" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤2:创建区块链服务</h1><ol class=""><li id="547d" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">在你的浏览器中，进入你闪亮的新IBM云账户:<a class="ae jp" href="https://console.bluemix.net/dashboard/apps" rel="noopener ugc nofollow" target="_blank">https://console.bluemix.net/dashboard/apps</a></li><li id="5977" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated">创建区块链服务:</li></ol><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/226961785f6b4d939fbdc533bf214200.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*OwZiPHH00uUO0ALStas1Ew.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Create a blockchain service on IBM Cloud.</figcaption></figure><h1 id="e861" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">第三步:获取秘密</h1><ol class=""><li id="e56e" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">启动您的区块链服务，点击连接配置文件，并查看原始JSON</li><li id="be8d" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated">一路向下滚动，直到你看到“注册”，然后在“注册”将是“注册秘密”。复制这个秘密，我们将需要它为下一步</li></ol><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/58f14c388fe53ca2d21e2b0fd7b0bc22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*5xSoM5S2KfJGf9T-tzYAzA.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Inside the blockchain platform, go to the connection profile, and get the enrollSecret and copy it.</figcaption></figure><h1 id="2881" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤4:使用secret从证书颁发机构(CA)获取证书</h1><ol class=""><li id="7b59" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">返回并下载连接概要文件，而不是查看原始JSON。</li><li id="8e9e" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated">将下载的JSON文件重命名为“connection-profile.json”</li><li id="a77f" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated">将connection-profile.json文件移动到<code class="eh nr ns nt ne b">BlockchainEvents-CompositeJourney</code>目录</li><li id="afae" class="ml mm hu it b iu mu iy mv jc mw jg mx jk my jo mq mr ms mt dt translated">使用上一步中的<strong class="it hv"> enrollSecret </strong>发出这个命令，为证书颁发机构(CA)创建一个业务网卡。这个命令假设我的<strong class="it hv"> enrollSecret </strong>是‘123456789’，<em class="nu">，但是你的可能不同。</em></li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="a73e" class="ni jr hu ne b fv nj nk l nl nm">$ composer card create -f ca.card -p connection-profile.json -u admin -s 123456789</span></pre><p id="0c8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.使用以下命令导入卡</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="af67" class="ni jr hu ne b fv nj nk l nl nm">$ composer card import -f ca.card -c ca</span></pre><p id="6b3b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">6.最后，我们使用导入的包含我们的<strong class="it hv"> enrollSecret </strong>的卡向CA请求证书。证书存储在完成此命令后创建的凭据目录中。</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="6180" class="ni jr hu ne b fv nj nk l nl nm">$   composer identity request --card ca --path ./credentials -u admin -s 123456789</span></pre><h1 id="b129" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤5:使用“admin-pub.pem”文件向对等方添加证书</h1><ol class=""><li id="1843" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">回到区块链服务，点击成员选项卡，然后添加证书。转到您的<code class="eh nr ns nt ne b">BlockchainEvents-CompositeJourney/credentials</code>目录，将“admin-pub.pem”文件的内容复制并粘贴到证书框中。提交证书并重新启动对等方。注意:重新启动对等机需要一分钟时间。</li></ol><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/72961ab10e133399b8443d4ec13f6f86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*A1pFB8WYmrE-xO0hM0xx8A.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Adding certificates to members and restarting the peers.</figcaption></figure><p id="7a61" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.接下来，我们需要同步通道的证书。从我们的区块链服务，在“我的网络”下点击“频道”,然后三点按钮。然后单击“同步证书”。</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/2caab68c1608d3d286e1ead94cc4df00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mzzxaPgwXOj39dS7jWYpDw.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Sync certificates of the channel.</figcaption></figure><h1 id="2740" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤6:创建管理业务网卡</h1><ol class=""><li id="90d4" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">既然我们已经与同行同步了证书，我们就可以安装Hyperledger Composer运行时，并通过创建管理卡来启动网络。使用以下命令创建具有渠道管理员和对等管理员角色的管理员卡:</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="a635" class="ni jr hu ne b fv nj nk l nl nm">$ composer card create -f adminCard.card -p connection-profile.json -u admin -c ./credentials/admin-pub.pem -k ./credentials/admin-priv.pem --role PeerAdmin --role ChannelAdmin</span></pre><p id="449c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.导入通过前面的命令创建的卡:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="86da" class="ni jr hu ne b fv nj nk l nl nm">$ composer card import -f adminCard.card -c adminCard</span></pre><h1 id="4e84" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤7:安装运行时并启动网络</h1><ol class=""><li id="525f" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">将events.bna文件复制并粘贴到<code class="eh nr ns nt ne b">BlockchainEvents-CompositeJourney</code>目录中。</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="47a3" class="ni jr hu ne b fv nj nk l nl nm">$ cp Composer/dist/events.bna .</span></pre><ol class=""><li id="30ed" class="ml mm hu it b iu iv iy iz jc no jg np jk nq jo mq mr ms mt dt translated">现在，我们将使用上一步中的管理卡，通过以下命令安装运行时:</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="b2a4" class="ni jr hu ne b fv nj nk l nl nm">$   composer network install -c adminCard -a events.bna</span></pre><p id="ce93" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果此时出现错误，请稍等片刻，然后重试。</p><p id="a8d8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.通过提供管理卡启动业务网络。bna文件，以及从CA收到的凭证。该命令将发出一张我们将删除的卡，名为“delete_me.card”。注意:<strong class="it hv">确保版本与上述composer网络安装命令输出的版本相匹配。</strong></p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff nv"><img src="../Images/a9c9093613400812cebd3e9e9dafd215.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tDkek6YD3UJoBdSiUuisw.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Version here is 0.0.1, so that is what version you need to use in the step below.</figcaption></figure><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="8338" class="ni jr hu ne b fv nj nk l nl nm">$ composer network start -c adminCard -n events -V 0.0.1 -A admin -C ./credentials/admin-pub.pem -f delete_me.card</span></pre><p id="d362" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果此时出现如下所示的错误，请等待几秒钟，然后重试。</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff nw"><img src="../Images/ed3aaaab398454ecc9fc60db19f2b2aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hnvLhtsn8EkLdUKH4dGy5w.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Docker build error.</figcaption></figure><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff nx"><img src="../Images/938fb2fb68b0f9bfdbc9e74c9bb9fc94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oOuDGjoy4SErf8tD2xziYQ.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">REQUEST_TIMEOUT error.</figcaption></figure><p id="bf54" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦命令生效，您应该会看到下面的输出:</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ny"><img src="../Images/22933d203c2a14bd7699bc8e53bfe2e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ui-MgiALFkd3dTjJyKFSaw.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Success!</figcaption></figure><p id="7ac9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，我们删除<code class="eh nr ns nt ne b">delete_me.card</code>:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="90a5" class="ni jr hu ne b fv nj nk l nl nm">$ rm delete_me.card</span></pre><h1 id="8425" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">第八步:创建一张新的名片</h1><ol class=""><li id="f772" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">在我们安装了运行时并启动了网络之后，我们需要创建一个卡，我们将把它部署到启动计划中:</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="7599" class="ni jr hu ne b fv nj nk l nl nm">$ composer card create -n events -p connection-profile.json -u admin -c ./credentials/admin-pub.pem -k ./credentials/admin-priv.pem</span></pre><p id="04d1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个命令应该已经创建了一个名为“adminCard.card”的卡。</p><p id="b269" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.导入业务网卡:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="6a16" class="ni jr hu ne b fv nj nk l nl nm">$ composer card import -f ./admin@events.card</span></pre><p id="3432" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很好。此时你应该感觉很好。我们差不多完成了…</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div class="fe ff nz"><img src="../Images/d351d46def75fb02ff473ed985ad064b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/1*AmI9wRbXrfIWGESx6eEiTw.gif"/></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">weeeee! Stuff works!!</figcaption></figure><h1 id="bbf9" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤9:创建composer-rest-server并启动web UI</h1><ol class=""><li id="5380" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">让我们安装composer-rest-server:</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="f7c2" class="ni jr hu ne b fv nj nk l nl nm">$ <!-- -->npm install -g composer-rest-server<!-- -->@0.19.4</span></pre><p id="0832" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.现在，让我们启动服务器。确保你和你的<code class="eh nr ns nt ne b">connection-profile.json</code>在同一个目录下</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="36fe" class="ni jr hu ne b fv nj nk l nl nm">$ composer-rest-server -c admin@events -n never -w true</span></pre><p id="a698" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.在您的浏览器中，转到<a class="ae jp" href="http://localhost:3000/explorer" rel="noopener ugc nofollow" target="_blank"><em class="nu">http://localhost:3000/explorer</em></a></p><p id="cedf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.打开一个新的终端窗口，进入<code class="eh nr ns nt ne b">BlockchainEvents-CompositeJourney/Web</code></p><p id="d3b9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.安装依赖项:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="0571" class="ni jr hu ne b fv nj nk l nl nm">$ npm install</span></pre><p id="b203" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">6.启动服务器:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="9098" class="ni jr hu ne b fv nj nk l nl nm">$ node server.js</span></pre><p id="d3e5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">7.在浏览器中进入<a class="ae jp" href="http://localhost:8000/buyer.html" rel="noopener ugc nofollow" target="_blank"><em class="nu">http://localhost:8000/buyer . html</em></a></p><h1 id="0f93" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">步骤10:测试网络并查看链码日志</h1><ol class=""><li id="d06a" class="ml mm hu it b iu lu iy lv jc mn jg mo jk mp jo mq mr ms mt dt translated">在端口3000上运行的composer-rest-server中，使用以下JSON在<strong class="it hv">‘Seller’</strong>上发出POST请求:</li></ol><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="2d0c" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="b15f" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.Seller",</span><span id="c285" class="ni jr hu ne b fv nn nk l nl nm">"organisation": "ACME",</span><span id="de3e" class="ni jr hu ne b fv nn nk l nl nm">"email": "auction@acme.org",</span><span id="ecb7" class="ni jr hu ne b fv nn nk l nl nm">"balance": 100,</span><span id="dea1" class="ni jr hu ne b fv nn nk l nl nm">"products": []</span><span id="d217" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="1d9a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.让我们检查一下链码日志。在您的区块链服务中，转到“频道”选项卡。点击“默认频道”。单击最新调用中的蓝色“&gt;”符号。然后，在“操作”下，单击三点符号。然后单击查看详细信息。日志将显示您已经用上面的JSON创建了一个卖家。</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/a0859f626a547dcb8b557f2d6c96364f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QNJ8tpSceO-ouomtM_aMjw.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Checking chaincode logs.</figcaption></figure><p id="301d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.接下来，让我们创建一个产品，并将其添加到拍卖中。让我们用以下JSON向“AddProduct”发布一个帖子:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="2220" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="9267" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.AddProduct",</span><span id="0b2e" class="ni jr hu ne b fv nn nk l nl nm">"description": "Sample Product",</span><span id="ac2b" class="ni jr hu ne b fv nn nk l nl nm">"owner": "resource:org.acme.product.auction.Seller#auction@acme.org"</span><span id="1281" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="600c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.现在我们需要获取我们刚刚创建的示例产品的productId。让我们做一个“产品”的GET。productId将出现在响应正文中，如下所示:</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff oa"><img src="../Images/5f94c7e7312ab465564fc08c404ed6dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Aas4xU2__I4BRiVx3VcVjA.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">GET for ‘Product’ gets us our productId that we need to start bidding.</figcaption></figure><p id="2935" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.开始竞价吧。让我们用下面的JSON发布到“StartBIdding ”,同时<strong class="it hv">用上一步的产品id替换&lt;产品Id &gt;。</strong></p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="0f8b" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="cb21" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.StartBidding",</span><span id="88c8" class="ni jr hu ne b fv nn nk l nl nm">"reservePrice": 50,</span><span id="3d5d" class="ni jr hu ne b fv nn nk l nl nm">"product": "resource:org.acme.product.auction.Product#&lt;productId&gt;"</span><span id="a5c4" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="b98a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">成功发布“开始竞价”后，用户界面将会更新，如下所示:</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/826d1630f6b605566c4b27ff5f74e7e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*y99sZiRWz-vKBlUytLDOXA.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">The UI is updated to show that our item is ready to be bid on.</figcaption></figure><blockquote class="ko"><p id="b22f" class="kp kq hu bd kr ks lp lq lr ls lt jo ek translated">在这一点上，你可以称自己为区块链开发者。太棒了。给自己一个鼓励。如果你想继续使用这个应用程序-提出几个报价，并关闭投标，然后继续与我联系。否则，你已经学到了很多，所以现在再见！👋🏼如果你喜欢这个，点击👏🏼以表明你觉得这很有用。</p></blockquote></div><div class="ab cl me mf hc mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hn ho hp hq hr"><p id="9261" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">继续磨吧！！再走几步，我们就完成了云中运行的区块链的拍卖。</p><p id="f768" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">6.让我们创建两个成员，他们可以对我们拍卖的产品出价，方法是用下面的JSON向“Member”发送帖子</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="4f24" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="9492" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.Member",</span><span id="bbbf" class="ni jr hu ne b fv nn nk l nl nm">"firstName": "Amy",</span><span id="407f" class="ni jr hu ne b fv nn nk l nl nm">"lastName": "Williams",</span><span id="6c05" class="ni jr hu ne b fv nn nk l nl nm">"email": "memberA@acme.org",</span><span id="40af" class="ni jr hu ne b fv nn nk l nl nm">"balance": 1000,</span><span id="bf2d" class="ni jr hu ne b fv nn nk l nl nm">"products": []</span><span id="2c6e" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="3f9c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们再贴一次，但是用稍微不同的JSON:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="3055" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="b15c" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.Member",</span><span id="da6c" class="ni jr hu ne b fv nn nk l nl nm">"firstName": "Billy",</span><span id="7dd6" class="ni jr hu ne b fv nn nk l nl nm">"lastName": "Thompson",</span><span id="107d" class="ni jr hu ne b fv nn nk l nl nm">"email": "memberB@acme.org",</span><span id="801b" class="ni jr hu ne b fv nn nk l nl nm">"balance": 1000,</span><span id="18df" class="ni jr hu ne b fv nn nk l nl nm">"products": []</span><span id="2dad" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="908a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">7.现在让我们进入“产品列表”并从那里复制“listingId ”,如下面我的截图所示:</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ob"><img src="../Images/74c39512b67cdc66c5cfab5d2964dcef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O280DSz6RhuHtOlXB6kcrQ.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">listingId that we need to make an offer.</figcaption></figure><p id="403e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">8.让我们通过如下所示的JSON POST ' to ' Offer '来提供两个报价，但是将<listingid>替换为<strong class="it hv">您唯一的listingId </strong>:</listingid></p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="e4ff" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="e69f" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.Offer",</span><span id="98b4" class="ni jr hu ne b fv nn nk l nl nm">"bidPrice": 50,</span><span id="fb14" class="ni jr hu ne b fv nn nk l nl nm">"listing": "resource:org.acme.product.auction.ProductListing#&lt;listingId&gt;",</span><span id="880a" class="ni jr hu ne b fv nn nk l nl nm">"member": "resource:org.acme.product.auction.Member#memberA@acme.org"</span><span id="3ba2" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="d9ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们再提一次价，这次比第一次高一点:</p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="aa46" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="8863" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.Offer",</span><span id="4754" class="ni jr hu ne b fv nn nk l nl nm">"bidPrice": 100,</span><span id="5b53" class="ni jr hu ne b fv nn nk l nl nm">"listing": "resource:org.acme.product.auction.ProductListing#&lt;listingId&gt;",</span><span id="d558" class="ni jr hu ne b fv nn nk l nl nm">"member": "resource:org.acme.product.auction.Member#memberB@acme.org"</span><span id="06cd" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff ky"><img src="../Images/55f26797d487cc8fca1610b4932d9c04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*RTwpeZZRIKtSoH2LU7aEcw.gif"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Making two offers, one from each member.</figcaption></figure><p id="3092" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此时，您的UI应该如下所示:</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff oc"><img src="../Images/9cdcdb7ca805634b4bc344dd6d1fa2b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aikWo7QixM-BYIVl8japIg.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Updated UI.</figcaption></figure><p id="c8b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">9.让我们用以下JSON将<listingid>替换为<strong class="it hv">您的唯一列表Id </strong>，然后发布“CloseBidding”来结束拍卖:</listingid></p><pre class="mz na nb nc fq nd ne nf ng aw nh dt"><span id="3532" class="ni jr hu ne b fv nj nk l nl nm">{</span><span id="ca62" class="ni jr hu ne b fv nn nk l nl nm">"$class": "org.acme.product.auction.CloseBidding",</span><span id="1fbb" class="ni jr hu ne b fv nn nk l nl nm">"listing": "resource:org.acme.product.auction.ProductListing#&lt;listingId&gt;"</span><span id="b949" class="ni jr hu ne b fv nn nk l nl nm">}</span></pre><p id="50d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">10.你们都完了！您的列表状态应该是“已售出”，如果您向会员发出“GET ”,您应该会看到会员b的余额减少了100英镑，并且在产品[]中还列出了“样品产品”。</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff od"><img src="../Images/9487914acb8c7914f10608fa4c72840e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-qSo7kBcpscnkUJPlrTxrA.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">Member b won the auction, so he has a new product, but has a smaller balance.</figcaption></figure><p id="ad2d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">卖家以100英镑开始，现在又有100英镑，来自成员B，所以如果我们访问“卖家”，我们将看到他的总额现在是200英镑。</p><figure class="mz na nb nc fq le fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff oe"><img src="../Images/dd03f69f99f2387f6ea001c1295eb219.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KxBL5UehDFz4Ch9Bb3Lu9w.png"/></div></div><figcaption class="ll lm fg fe ff ln lo bd b be z ek">The seller has a balance of 200 now.</figcaption></figure></div><div class="ab cl me mf hc mg" role="separator"><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj mk"/><span class="mh bw bk mi mj"/></div><div class="hn ho hp hq hr"><p id="e0e4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">'//;/你完了！您已经成功地基于我们的。bna文件，并通过Swagger UI发出请求与我们的应用程序进行交互。我们所有的请求都成功地记录在我们的通道中，我们可以看到每个链代码调用的细节。感谢你的阅读，如果你喜欢它，请保持下去👏🏼按钮！</p><p id="1b0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你有任何问题，你可以联系horeaporutiu@gmail.com，通过<a class="ae jp" href="https://www.linkedin.com/in/hporutiu" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>联系我，或者通过<a class="ae jp" href="https://twitter.com/horeaporutiu/" rel="noopener ugc nofollow" target="_blank"> Twitter </a>和<a class="ae jp" rel="noopener" href="/@horeaporutiu"> Medium </a>关注我。干杯！</p><figure class="mz na nb nc fq le"><div class="bz el l di"><div class="of og l"/></div></figure></div></div>    
</body>
</html>