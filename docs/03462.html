<html>
<head>
<title>BlackJack Application with JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">带有JavaScript的21点应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/blackjack-application-with-javascript-2c76db51dea7?source=collection_archive---------2-----------------------#2018-04-20">https://medium.com/hackernoon/blackjack-application-with-javascript-2c76db51dea7?source=collection_archive---------2-----------------------#2018-04-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/f8a955cb44b9506bfb208fe352f6bb2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*J7etKPplNgZgyIRN.jpg"/></div></div></figure><div class=""/><p id="c82d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">几周前，我写了一篇关于使用Python计算21点中某些结果的概率的文章。如果你想读那篇文章，请自便。<a class="ae ka" href="https://hackernoon.com/gambling-probability-python-dfd3e301b1ad" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/gambling-probability-python-DFD 3 e 301 B1 ad</a>。</p><p id="de3f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个想法是你可以通过创建一个模拟游戏在21点中设置一个场景。然后模拟那个游戏的结果一百万次，算出某些结果的概率是多少。</p><p id="34dd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这让我想到，如果我创造一个真实的游戏来实时计算这些概率，这样的东西会有多有用。所以，我开始这样做。在这篇文章中，我将谈论如何创建这样一个应用程序的一些想法，如果你曾经对此感兴趣的话，以及我如何使我的工作背后的一些逻辑。</p><p id="80ca" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你想在进一步阅读之前看到我的应用程序的最终产品，这里是我目前所拥有的:</p><p id="2c56" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">https://safe-springs-65895.herokuapp.com/<a class="ae ka" href="https://safe-springs-65895.herokuapp.com/" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="63e9" class="kb kc if bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">API</h1><p id="ce68" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">首先，我找到了这个奇妙的扑克牌API:【https://deckofcardsapi.com/<a class="ae ka" href="https://deckofcardsapi.com/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="1de9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是一个很好的入门工具，允许您根据自己的需要进行多种类型的API调用。例如，您可以获得一副全新的牌，或者使用一副牌ID#洗牌。无论哪种方式，拿到这副牌后，你都可以从这副牌中抽一张牌。理论上，当游戏中的玩家每次点击按钮抽一张牌时，提出一个抽一两张牌的请求是有意义的。例如，洗牌的url如下所示:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="cd61" class="ln kc if lj b fv lo lp l lq lr">https://deckofcardsapi.com/api/deck/new/shuffle/?deck_count=1</span></pre><p id="ebf5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，如果你想抽一张牌，你可以用:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="3de0" class="ln kc if lj b fv lo lp l lq lr">https://deckofcardsapi.com/api/deck/&lt;&lt;deck_id&gt;&gt;/draw/?count=2</span></pre><p id="c38e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，我发现，出于我的目的，我想一次抽完所有52张牌，并使用该副牌的剩余值来计算我以后要使用的概率。所以当一个玩家开始一个新游戏时，我会这样做:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="85af" class="ln kc if lj b fv lo lp l lq lr">https://deckofcardsapi.com/api/deck/&lt;&lt;deck_id&gt;&gt;/draw/?count=52</span></pre><p id="437f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后使用JavaScript，我将从该数组中取出2张牌给庄家，2张牌给玩家。</p><p id="7e8e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">抽牌时来自API的响应如下所示:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="d1c4" class="ln kc if lj b fv lo lp l lq lr">{<br/>    "success": true,<br/>    "cards": [<br/>        {<br/>            "image": "https://deckofcardsapi.com/static/img/KH.png",<br/>            "value": "KING",<br/>            "suit": "HEARTS",<br/>            "code": "KH"<br/>        },<br/>        {<br/>            "image": "https://deckofcardsapi.com/static/img/8C.png",<br/>            "value": "8",<br/>            "suit": "CLUBS",<br/>            "code": "8C"<br/>        }<br/>    ],<br/>    "deck_id":"3p40paa87x90",<br/>    "remaining": 50<br/>}</span></pre><p id="34c3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以很自然地，在玩21点的时候，我就忽略了套房，因为它们无关紧要。然后，我检查并更改了所有的国王，皇后和杰克值为10。最后，对于a，我的想法是，你总是希望a的值为11，除非你的总手牌值超过21，那么你会希望a为1，因为你可以选择a的任何一个值。最初，当我循环我的初始牌时，我想把所有的ACE值都变成11。</p><p id="8eba" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">考虑到这一点，我需要考虑我的游戏的结构。我真的只需要3个按钮。一个是新游戏，它将重置所有的值，除了每个玩家的总输赢。一个是HIT，它会为玩家抽一张牌。另一个是STAND，它将检查数值，如果需要，为庄家抽一张牌。至少，这是我真正需要的。我是这样看待我的游戏流程的:</p><figure class="le lf lg lh fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/0a93693c15ad347edc55a9feeea9bae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WcQVqvlw7YrpXjtBORY-Mg.png"/></div></div></figure><h2 id="ddff" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">初始值和数组:</h2><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="5ec4" class="ln kc if lj b fv lo lp l lq lr">      let allCards = [];<br/>      let iterations = 1000000;<br/>      let player = [];<br/>      let dealer = [];<br/>      let dealerValues = [];<br/>      let playerValues = [];<br/>      var playerSum ;<br/>      var dealerSum ;<br/>      let winsPlayer = 0;<br/>      let winsDealer = 0;<br/>      let testDeck = [2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11];</span></pre><p id="fff9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些都是我将在游戏中运用的价值观。</p><p id="327c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我的想法是，每次卡片被绘制或更新时，我将使用<code class="eh mg mh mi lj b">testDeck</code>在后台创建一个场景。通过testDeck，我将重新创建当前的卡牌值场景，并确定某些游戏结果。<code class="eh mg mh mi lj b">iterations</code>值将决定我测试每个场景的次数，目前设置为100万次。<code class="eh mg mh mi lj b">player</code>和<code class="eh mg mh mi lj b">dealer</code>将包含每个玩家的所有卡片信息。<code class="eh mg mh mi lj b">playerValues</code>和<code class="eh mg mh mi lj b">dealerValues</code>是一个数组，我将把每个玩家当前所有的牌值都放入其中，只是为了方便我以后循环。<code class="eh mg mh mi lj b">playerSum</code>和<code class="eh mg mh mi lj b">dealerSum</code>是我将用来确定每个玩家的当前总数，并确定赢家。<code class="eh mg mh mi lj b">winsPlayer</code>和<code class="eh mg mh mi lj b">winsDealer</code>是我用来记录每位玩家当前获胜次数的工具。最后，一旦我获取了我的卡，我将把这个值设置为<code class="eh mg mh mi lj b">allCards</code>值。由于获取的卡片将存在于newGame函数中，我需要在该函数之外访问它们。</p><h2 id="36af" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">超文本标记语言</h2><p id="71fd" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我的HTML看起来非常简单，但是我将使用<code class="eh mg mh mi lj b">newGame</code>、<code class="eh mg mh mi lj b">hit</code>和<code class="eh mg mh mi lj b">stand</code>id来创建我的onclick函数:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="80c2" class="ln kc if lj b fv lo lp l lq lr">&lt;body&gt;<br/>&lt;div class="navContainer"&gt;<br/>  &lt;div class="title8" id="newGame"&gt;new game&lt;/div&gt;<br/>  &lt;div class="title11" id="hit"&gt;hit&lt;/div&gt;<br/>  &lt;div class="title12" id="stand"&gt;stand&lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;div class="title3"&gt;Dealer&lt;/div&gt;<br/>  &lt;div id="dealerCards"&gt;&lt;/div&gt;<br/>&lt;div class="title2"&gt;Player&lt;/div&gt;<br/>  &lt;div id="playerCards"&gt;&lt;/div&gt;<br/>  &lt;div class="title4" id="dealerSum"&gt;&lt;/div&gt;<br/>  &lt;div class="title5" id="playerSum"&gt;&lt;/div&gt;<br/>  <br/>  &lt;div id="currentPercent"&gt;&lt;/div&gt;<br/>  <br/>  &lt;div id="currentBust"&gt;&lt;/div&gt;<br/>  <br/>  &lt;div class="dealerWins"&gt;<br/>    &lt;h1&gt;Dealer Wins&lt;/h1&gt;<br/>  &lt;div id="dealerWins"&gt;&lt;/div&gt;<br/>&lt;/div&gt;<br/>&lt;div class="playerWins"&gt;<br/>  &lt;h1&gt;Player Wins&lt;/h1&gt;<br/>  &lt;div id="playerWins"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span><span id="5536" class="ln kc if lj b fv mj lp l lq lr">&lt;/body&gt;</span></pre><h2 id="3b87" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">回到JavaScript</h2><p id="0660" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这里是我真正需要的三个onclick函数，我将在设置所有初始值后创建它们。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="6ead" class="ln kc if lj b fv lo lp l lq lr">$('#newGame').click(function(){</span><span id="b953" class="ln kc if lj b fv mj lp l lq lr">})</span><span id="89f7" class="ln kc if lj b fv mj lp l lq lr">$('#hit').click(function(){</span><span id="2f20" class="ln kc if lj b fv mj lp l lq lr">})</span><span id="6063" class="ln kc if lj b fv mj lp l lq lr">$('#stand').click(function(){</span><span id="f59b" class="ln kc if lj b fv mj lp l lq lr">})</span></pre><h2 id="e1ea" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">新游戏</h2><p id="b99d" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在声明了所有的初始变量后，现在我需要将它们设置为0或空。这是因为在新游戏中，当我把数据推给这些变量时，它们就会有值了。我还需要清除innerHTML中的HTML元素，因为这将是新一轮的开始。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="f923" class="ln kc if lj b fv lo lp l lq lr">document.getElementById('dealerWins').innerHTML = winsDealer;<br/>document.getElementById('playerWins').innerHTML = winsPlayer;<br/>      document.getElementById('dealerWins').innerHTML = '';<br/>document.getElementById('playerWins').innerHTML = '';<br/>      let hit = document.getElementById('hit');<br/>      hit.disabled = false;<br/>         player = [];<br/>         dealer = [];<br/>         dealerValues = [];<br/>         playerValues = [];<br/>         playerSum = 0;<br/>         dealerSum = 0;<br/>document.getElementById('dealerCards').innerHTML = "";<br/>      document.getElementById('playerCards').innerHTML = "";<br/>      document.getElementById('playerSum').innerHTML = "";<br/>      document.getElementById('dealerSum').innerHTML = "";</span></pre><h2 id="b500" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">进行我的API调用</h2><p id="b5cd" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">接下来，我将请求一副牌和卡片:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="620f" class="ln kc if lj b fv lo lp l lq lr">fetch('<a class="ae ka" href="https://deckofcardsapi.com/api/deck/bbz3hqp3kgoo/shuffle/').then(function(response)" rel="noopener ugc nofollow" target="_blank">https://deckofcardsapi.com/api/deck/&lt;&lt;deckID&gt;&gt;/shuffle/').then(function(response)</a> {<br/>      if (response.status != 200) {<br/>        window.alert("Oh dangit");<br/>        return;<br/>      }</span><span id="da47" class="ln kc if lj b fv mj lp l lq lr">response.json().then(function(data) {<br/>        let api = data;<br/>        let deckID = api.deck_id;</span><span id="9aaf" class="ln kc if lj b fv mj lp l lq lr">fetch('<a class="ae ka" href="https://deckofcardsapi.com/api/deck/'+deckID+'/draw/?count=52').then(function(response)" rel="noopener ugc nofollow" target="_blank">https://deckofcardsapi.com/api/deck/'+deckID+'/draw/?count=52').then(function(response)</a> {<br/>            if (response.status != 200) {<br/>              window.alert("You done messed up");<br/>              return;<br/>            }</span><span id="7bc8" class="ln kc if lj b fv mj lp l lq lr">response.json().then(function(data) {<br/>              let firstDeal = data.cards;</span></pre><p id="b326" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，正如我前面谈到的，我需要重置包含“国王”、“王后”、“杰克”和“王牌”的牌的值。同时，我会将这些值推送到我的<code class="eh mg mh mi lj b">playerValues</code>和<code class="eh mg mh mi lj b">dealerValues</code>数组中。然后，有了正确值的卡片，我将把<code class="eh mg mh mi lj b">allCards</code>变量设置为<code class="eh mg mh mi lj b">firstDeal</code>变量的值，因为它位于我的<code class="eh mg mh mi lj b">newGame</code>函数之外。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="533f" class="ln kc if lj b fv lo lp l lq lr">for (var i = 0; i &lt; firstDeal.length; i++) {<br/>              if(firstDeal[i].value == "KING" || firstDeal[i].value == "QUEEN" || firstDeal[i].value == "JACK"){<br/>                firstDeal[i].value = 10;<br/>              }<br/>              if(firstDeal[i].value == "ACE"){<br/>                firstDeal[i].value = 11;<br/>              }<br/>              if(firstDeal[i].value != "KING" &amp;&amp; firstDeal[i].value != "QUEEN" &amp;&amp; firstDeal[i].value != "JACK" &amp;&amp; firstDeal[i].value != "ACE"){<br/>                firstDeal[i].value = parseInt(firstDeal[i].value);<br/>              }<br/>              }<br/>allCards = firstDeal;</span></pre><h2 id="d6de" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">为每位玩家抽牌</h2><p id="a7cf" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">接下来，我需要为每个玩家抽牌。我将从<code class="eh mg mh mi lj b">allCards</code>数组中选择一张卡片，将其推入<code class="eh mg mh mi lj b">dealer</code>或<code class="eh mg mh mi lj b">player</code>数组，并更新<code class="eh mg mh mi lj b">playerValues</code>和<code class="eh mg mh mi lj b">dealerValues</code>。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="ee66" class="ln kc if lj b fv lo lp l lq lr">var card1 = allCards[Math.floor(Math.random()*allCards.length)];<br/>              <br/>              let index1 = allCards.indexOf(card1);<br/>              <br/>              allCards.splice(index1,1);<br/>              <br/>              player.push(card1);<br/>              <br/>              <br/>              var card2 = allCards[Math.floor(Math.random()*allCards.length)];<br/>              <br/>              let index2 = allCards.indexOf(card2);<br/>              <br/>              allCards.splice(index2,1);<br/>              <br/>              player.push(card2);<br/>              <br/>              <br/>              var card3 = allCards[Math.floor(Math.random()*allCards.length)];<br/>              <br/>              let index3 = allCards.indexOf(card3);<br/>              <br/>              allCards.splice(index3,1);<br/>              <br/>              dealer.push(card3);<br/>              <br/>              <br/>              var card4 = allCards[Math.floor(Math.random()*allCards.length)];<br/>              <br/>              let index4 = allCards.indexOf(card4);<br/>              <br/>              allCards.splice(index4,1);<br/>              <br/>              dealer.push(card4);</span></pre><p id="2606" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在下面的函数中，我将遍历玩家的牌，用他们当前的手牌更新DOM，并用当前的牌值更新playerValues。有了forLoop，我可以在整个代码中重用这个函数，因为玩家手中目前有多少张牌并不重要。它只是获取所有的卡并更新DOM和playerValues。然而，这里要记住的一件事是，在运行这个函数之前，你需要清除当前的playerValues并清除DOM上的玩家卡。否则，它将简单地添加到当前总数中。如果你已经有3张牌，而你的价值是15。然后你加一张卡重新算，它会把新卡加到现在的三张卡上。例如，如果您的新卡是2，而不是总共17，您的总数将是32 (15 + 15 + 2)。</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="7117" class="ln kc if lj b fv lo lp l lq lr">for (var i = 0; i &lt; player.length; i++) {<br/>                card = `&lt;img style="transform: rotate(${randomIntFromInterval(140,180)}deg);-webkit-box-shadow: 3px 2px 32px 4px rgba(0,0,0,0.88);width:100px;height:120px;" src="${player[i].images.png}" /&gt;`;<br/>                playerValues.push(player[i].value);<br/>                document.getElementById('playerCards').innerHTML += card;<br/>              }</span></pre><p id="47f5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个完全相同的功能也可以为庄家互换，但是用当前玩家变量替换庄家变量。因为我们在newGame函数中，我们不需要清除当前值，因为它们已经是空的了。但是当在hit或stand函数中运行函数时，我们需要首先清除这些值。例如，我们会这样做:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="7711" class="ln kc if lj b fv lo lp l lq lr">      document.getElementById('playerCards').innerHTML = "";<br/>      playerValues = [];<br/>      </span><span id="0760" class="ln kc if lj b fv mj lp l lq lr">for (var i = 0; i &lt; player.length; i++) {<br/>        card = `&lt;img style="transform: rotate(${randomIntFromInterval(140,180)}deg);-webkit-box-shadow: 3px 2px 32px 4px rgba(0,0,0,0.88);width:100px;height:120px;" src="${player[i].images.png}" /&gt;`;<br/>        playerValues.push(player[i].value);<br/>        document.getElementById('playerCards').innerHTML += card;<br/>      }</span></pre><p id="77ae" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，这几乎是我游戏的支柱。我还添加了计算百分比、当前胜率等的函数，但这确实是这里的基本格式。在hit和stand函数中，我们只需要在运行该函数时添加条件语句。例如，在更新玩家卡、庄家卡和值之后，我们将检查并查看是否有玩家失败，或者是否有玩家赢得了游戏。我的大多数条件都很简单，比如:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="3bd3" class="ln kc if lj b fv lo lp l lq lr">if (playerSum &gt; 21 &amp;&amp; playerValues.includes(11)==true){</span><span id="3a35" class="ln kc if lj b fv mj lp l lq lr">// do something</span><span id="dc60" class="ln kc if lj b fv mj lp l lq lr">}</span></pre><p id="6d53" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这个例子中，当一个玩家抽牌，并且他当前的总点数超过21时，我们将检查该玩家是否包含任何11(这将是我们设置的ACE牌的值)。如果是真的，我们将得到那张卡的索引，将值重置为1而不是11，并重新更新当前值、总和以及DOM。</p><p id="5d7c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然还有条件语句来决定赢家:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="2ebe" class="ln kc if lj b fv lo lp l lq lr">if(playerSum &gt; dealerSum &amp;&amp; playerSum &lt;= 21){</span><span id="daf8" class="ln kc if lj b fv mj lp l lq lr">}</span></pre><p id="e6e2" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这个例子中，如果玩家总和高于庄家总和，我们将确定玩家是赢家，只要玩家总和也在21岁以下。</p><p id="3e5f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">整个游戏中最耗时的部分可能是确定胜负，因为玩家和庄家的价值、总和以及百分比需要在每种情况下进行更新。</p><p id="120d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我也有我喜欢的这个条件:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="b368" class="ln kc if lj b fv lo lp l lq lr">while(playerSum &gt; dealerSum &amp;&amp; playerSum &lt;= 21){<br/>}</span></pre><p id="cd4c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里，我使用while循环，而不是for循环或if语句。这在我的stand函数中。基本上，当玩家站立时，我要检查值，如果庄家的值小于玩家的值，我们将继续为庄家击球，直到他赢或输，因为玩家在该点不能再击球。</p><h2 id="bf92" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">计算百分比:</h2><p id="c00b" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">对我来说，最后一部分是我开始做这件事的第一步:确定某些结果的概率。例如，我想确定庄家的牌比玩家的牌高的概率。</p><figure class="le lf lg lh fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mk"><img src="../Images/aef83b1837cb411f359e6e618b2ab43f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*umTLOWcMkEpcpdEFpF8eDg.png"/></div></div></figure><p id="ce89" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因为我知道最初发牌后的三张牌。基本上，这将是一个多部分功能:</p><h2 id="02ce" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">1创建一个模拟甲板。</h2><h2 id="d4f3" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">2从这副牌中取出已知的牌。</h2><h2 id="5fdb" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">3抽一张新卡，替换未知卡。</h2><h2 id="1bca" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">4如果新卡加上已知庄家卡的总和高于玩家总和，则变量加1。</h2><h2 id="1738" class="ln kc if bd kd lt lu lv kh lw lx ly kl jn lz ma kp jr mb mc kt jv md me kx mf dt translated">5如果测试运行了一百万次，确定结果使庄家的牌比玩家的牌高的次数。</h2><p id="5513" class="pw-post-body-paragraph jc jd if je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">下面是我的函数的样子，把伪代码变成实际代码:</p><pre class="le lf lg lh fq li lj lk ll aw lm dt"><span id="e680" class="ln kc if lj b fv lo lp l lq lr">function determinePercent(p,d){<br/>      let percentageOne = 0;<br/>      let testDeck2 = testDeck;<br/>      let valP = [];<br/>      let valD = [];<br/>      for (var i = 0; i &lt; player.length; i++) {<br/>        valP.push(player[i].value);<br/>      }<br/>      for (var i = 0; i &lt; dealer.length; i++) {<br/>        valD.push(dealer[i].value);<br/>      }<br/>      p = valP;<br/>      d = valD;<br/>      <br/>      for (var i = 0; i &lt; p.length; i++) {<br/>        if(testDeck2.includes(p[i])==true){<br/>          let index1 = testDeck2.indexOf(p[i]);<br/>          testDeck2.splice(index1,1);<br/>        }<br/>      }<br/>      for (var i = 0; i &lt; d.length; i++) {<br/>        if(testDeck2.includes(d[i])==true &amp;&amp; i!=0){<br/>          let index1 = testDeck2.indexOf(d[i]);<br/>          testDeck2.splice(index1,1);<br/>        }<br/>      }<br/>      <br/>      let dealerValues2 = [d.pop()];<br/>      function getSum(total, num) {<br/>        return total + num;<br/>      }<br/>      let playerSum2 = p.reduce(getSum);<br/>   let dealerSum2 = dealerValues2.reduce(getSum);<br/>console.log(dealerSum2);<br/>      <br/>      for (var i = 0; i &lt; iterations; i++) {<br/>        let dealerCard1 = testDeck2[Math.floor(Math.random()*testDeck2.length)];<br/>      <br/>        if(dealerSum2+dealerCard1 &gt; playerSum2){<br/>          percentageOne = percentageOne + 1<br/>        }<br/>      }<br/>      <br/>      let percentageTwo = Math.round((percentageOne/iterations)*100);<br/>      <br/>      return percentageTwo;<br/>    }</span></pre><p id="210d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我可以在代码的任何地方运行这个函数，并更新它，确定一个新的概率。无论如何，希望这是有意义的，至少有一点点帮助和娱乐。很明显，我还可以更详细地讨论这些，但是为了避免这篇文章变得更加无聊，我就在这里把它结束了。如果我犯了一些错误，请随时联系我，或者我可以回答任何问题。</p><p id="32d0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我知道你喜欢这个游戏，或者如果你有任何反馈或建议。谢谢！</p><p id="508a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://www.linkedin.com/in/ethanjarrell/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/ethanjarrell/</a></p></div></div>    
</body>
</html>