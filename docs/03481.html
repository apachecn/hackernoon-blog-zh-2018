<html>
<head>
<title>Build a connected food dispenser with Raspberry Pi</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用树莓派构建一个连接的食物分发器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-connected-food-dispenser-with-raspberry-pi-19f5cdcc1541?source=collection_archive---------1-----------------------#2018-04-21">https://medium.com/hackernoon/build-a-connected-food-dispenser-with-raspberry-pi-19f5cdcc1541?source=collection_archive---------1-----------------------#2018-04-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/6a8615913024f42545298c122742df75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1vyjMvXSck2Y4pxVi4uBDw.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">My bunny food dispenser</figcaption></figure><p id="e8fc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这篇文章是关于如何用树莓派窥探你的宠物的系列文章的一部分，不要错过第一步！</p><ul class=""><li id="03cf" class="ke kf hu ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated"><a class="ae kn" href="https://hackernoon.com/spy-your-pet-with-a-raspberry-pi-camera-server-e71bb74f79ea" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">用树莓派相机服务器窥探你的宠物</strong> </a> <strong class="ji hv"> </strong>我在这里描述如何设置树莓派和相机流服务器！</li><li id="269c" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd kj kk kl km dt translated"><a class="ae kn" rel="noopener" href="/@michelparreno/how-to-access-your-raspberry-pi-camera-from-anywhere-544ab9e5bacc"> <strong class="ji hv">如何从任何地方访问您的Raspberry Pi相机</strong> </a> <strong class="ji hv"> </strong>在这里，您将学习如何配置一切以进行远程控制。</li></ul><p id="dafe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在之前的文章中，我们学习了如何构建一个摄像机服务器并从任何地方访问它。但是现在有一台照相机是非常基本的东西，对吗？为你家里的同伴启动食物分发器该有多酷啊！</p><h1 id="31d0" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">所需材料</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lr"><img src="../Images/ee575f3de1119487246d34a7f00fc226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8iU86AeW_8b3VD-R1cTr1g.jpeg"/></div></div></figure><p id="4609" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们来总结一下你必须要买的材料。</p><ol class=""><li id="fef5" class="ke kf hu ji b jj jk jn jo jr kg jv kh jz ki kd lw kk kl km dt translated">一个树莓派和一个配置好的无线加密狗</li><li id="62e4" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd lw kk kl km dt translated">当然是食物自动售货机。在法国找到一个这样的人是一个相当大的挑战。我建议买一个小的，有硬塑料刀片的。不要忘记，你将不得不大力粘贴或螺丝旋转电机。所以你可能不想要金属的！</li><li id="37a0" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd lw kk kl km dt translated">一个足够强的电机来旋转旋转器，但不是为了与Raspberry Pi电压(5V)自然兼容。</li></ol><blockquote class="lx ly lz"><p id="acf8" class="jg jh ma ji b jj jk jl jm jn jo jp jq mb js jt ju mc jw jx jy md ka kb kc kd hn dt translated">关于马达:马达有很多种。简单的旋转汽车被称为DC汽车。然后，步进电机可以停在特定的位置。最后，伺服电机的位置一般可以精确地设置在0°和180°之间。(但是，360伺服电机也存在)。更多详情，请查看<a class="ae kn" href="https://www.modmypi.com/blog/whats-the-difference-between-dc-servo-stepper-motors" rel="noopener ugc nofollow" target="_blank">这篇精彩的摘要</a>。</p></blockquote><p id="6a06" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因为我想有可能触发我的兔子不同的食物剂量，我决定去伺服电机。我选择了<a class="ae kn" href="https://thepihut.com/products/adafruit-continuous-rotation-servo-feetech-fs5103r?variant=27739449425" rel="noopener ugc nofollow" target="_blank">Adafruit连续旋转伺服</a>，因为它非常适合树莓Pi GPIO电压。</p><p id="07bf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">为了习惯</strong> <a class="ae kn" href="https://www.raspberrypi.org/documentation/usage/gpio/" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">树莓派电子引脚</strong> </a>，我强烈推荐你购买一个教程套件，它会让你很舒服地使用GPIO引脚！CamJam套件非常适合这种情况！</p><h1 id="db3a" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">把所有东西都插上！</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ab8352ec1c986af0384b9c54e0cb8a87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YwmU2cHwq6pbieoPxU0gYQ.jpeg"/></div></div></figure><p id="462e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">很好！我们都准备好插入一切，并开始编写我们的第一个python脚本来激活伺服电机。让我们首先按照这个方案正确地插入所有东西。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff me"><img src="../Images/c50e7b25bf9efd8941ad4ea9e21b7eed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s44NC_OuDK8aYm-WwglL_g.jpeg"/></div></div></figure><p id="193c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">很直接，对吧？让我们总结一下</p><ul class=""><li id="7b7f" class="ke kf hu ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated">将伺服正极红线插入Pi 5V引脚</li><li id="b583" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd kj kk kl km dt translated">将伺服负极黑线插入其中一个Pi接地</li><li id="3349" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd kj kk kl km dt translated">将橙色控制线插入其中一个Pi GPIO(例如:图中的BCM18)。</li></ul><p id="fd17" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如何识别引脚名称？转到<a class="ae kn" href="https://pinout.xyz/" rel="noopener ugc nofollow" target="_blank">书签这一页</a></p><h1 id="90ba" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">(可选)配置您的开发环境</h1><p id="ab90" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated">在下一章中，我们将编写脚本并启动许多命令。知道每次从我们的计算机切换到我们的Pi会很累。如果你想配置你的电脑，这样你就可以<strong class="ji hv">使用你最喜欢的代码编辑器在你的Pi上远程开发和启动命令</strong>，我强烈推荐你遵循这个伟大的教程:<a class="ae kn" href="https://blog.theodo.fr/2017/03/getting-started-headless-on-raspberry-pi-in-10-minutes/" rel="noopener ugc nofollow" target="_blank">在不到10分钟的时间内开始使用raspberry Pi</a></p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><h1 id="e639" class="kt ku hu bd kv kw mr ky kz la ms lc ld le mt lg lh li mu lk ll lm mv lo lp lq dt translated">用Python创建旋转脚本</h1><p id="3342" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated">现在让我们回到我们的伺服！我们需要构建触发它的脚本。当RaspberryPi (&amp; Raspian)开箱即用地运行Python时，您需要安装<strong class="ji hv"> pip </strong>来轻松安装/移除包。在您的raspberry Pi上，键入:</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="90b9" class="nb ku hu mx b fv nc nd l ne nf"># Install python pip package manager <br/>curl <a class="ae kn" href="https://bootstrap.pypa.io/get-pip.py" rel="noopener ugc nofollow" target="_blank">https://bootstrap.pypa.io/get-pip.py</a> -o get-pip.py</span></pre><p id="6c52" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">多亏了pip，我们现在能够下载并使用一个超级有用的库，通过编码来操作raspberry PI电子pin。</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="309f" class="nb ku hu mx b fv nc nd l ne nf">pip install RPi.GPIO</span></pre><p id="ea71" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在让我们创建我们的伺服脚本！</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="9851" class="nb ku hu mx b fv nc nd l ne nf"># Create the directory<br/>mkdir pet-feeder<br/>cd pet-feeder</span><span id="ddb3" class="nb ku hu mx b fv ng nd l ne nf"># Create the file with execution rights<br/>touch feed.py<br/>chmod +x feed.py</span></pre><h2 id="7fd7" class="nb ku hu bd kv nh ni nj kz nk nl nm ld jr nn no lh jv np nq ll jz nr ns lp nt dt translated">如何使用伺服控制器</h2><p id="a730" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated">一切准备就绪，我们可以开始编码了。我们想做的是通过向伺服系统的控制线发送电脉冲来控制伺服系统。这就是工作的方式。参考Adafruit文档，我们有以下内容:</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="7aa3" class="nb ku hu mx b fv nc nd l ne nf">Position "90" (1.5ms pulse) is stop, "180" (2ms pulse) is full speed forward, "0" (1ms pulse) is full speed backwards</span></pre><p id="eee2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这意味着，只要控制线正在接收电脉冲(每个脉冲持续时间为2毫秒)，伺服系统将继续全速前进。</p><blockquote class="lx ly lz"><p id="4e97" class="jg jh ma ji b jj jk jl jm jn jo jp jq mb js jt ju mc jw jx jy md ka kb kc kd hn dt translated">但是..Pi只能通过GPIOs提供3V的恒定电流，我要如何产生脉冲？</p></blockquote><p id="80a1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">图书馆RPi。我们之前安装的GPIO拥有我们需要的一切！我们要用的叫做“<a class="ae kn" href="https://sourceforge.net/p/raspberry-gpio-python/wiki/PWM/" rel="noopener ugc nofollow" target="_blank">脉波调制</a>”。您可以像这样将其导入Python脚本中。</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="73d6" class="nb ku hu mx b fv nc nd l ne nf">##!/usr/bin/env python<br/>import RPi.GPIO as GPIO</span></pre><p id="6463" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，让我们用插上的伺服配置库。首先，将模式设置为BCM，以使您的管脚匹配<a class="ae kn" href="https://pinout.xyz/" rel="noopener ugc nofollow" target="_blank"> GPIO名称</a>而不是物理位置。</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="1eb3" class="nb ku hu mx b fv nc nd l ne nf">GPIO.setmode(GPIO.BCM)</span></pre><p id="d6a6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">接下来，让我们设置哪个引脚在我们的控制之下。如果你拿的是BCM18，如上图所示，那么:</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="3a7f" class="nb ku hu mx b fv nc nd l ne nf">FEED_SERVO_CONTROL_PIN = 18<br/>GPIO.setup(FEED_SERVO_CONTROL_PIN, GPIO.OUT)</span></pre><p id="e419" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，让我们启动脉冲波调制来激活伺服向前运动。要做到这一点，你必须考虑两个变量:<strong class="ji hv">频率</strong>和<strong class="ji hv">占空比</strong>以达到所需的脉冲。(1.5毫秒脉冲停止，2毫秒脉冲向前，1毫秒脉冲向后)</p><p id="4faf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">频率</strong>是每秒钟的脉冲数量。它总是用赫兹表示。示例:</p><ul class=""><li id="95ed" class="ke kf hu ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated">1赫兹= 1脉冲/秒→ 1脉冲= 1秒</li><li id="3b9a" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd kj kk kl km dt translated">100赫兹=每秒100个脉冲→ 1个脉冲= 10毫秒</li></ul><p id="16b8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">占空比</strong>是信号有效的一个周期的一部分。简单地说，就是一个脉冲中有效信号的百分比。示例:</p><ul class=""><li id="ffa0" class="ke kf hu ji b jj jk jn jo jr kg jv kh jz ki kd kj kk kl km dt translated">占空比为10%的10ms脉冲是1ms的有效信号</li><li id="24e2" class="ke kf hu ji b jj ko jn kp jr kq jv kr jz ks kd kj kk kl km dt translated">占空比为20%的10ms脉冲是2ms的有效信号</li></ul><blockquote class="lx ly lz"><p id="a3e5" class="jg jh ma ji b jj jk jl jm jn jo jp jq mb js jt ju mc jw jx jy md ka kb kc kd hn dt translated">等等…这不正是我们要找的脉冲吗？是啊！！我们已经设置好变量了！</p></blockquote><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="8513" class="nb ku hu mx b fv nc nd l ne nf"># Import time to manage servo activation duration<br/>import time</span><span id="58de" class="nb ku hu mx b fv ng nd l ne nf"># Let's set the frequency and dutycycle<br/>PWM_FREQUENCY = 100<br/>FULL_SPEED_FORWARD_DC = 20<br/>FULL_SPEED_BACKWARD_DC = 10</span><span id="91d0" class="nb ku hu mx b fv ng nd l ne nf"># Activate the servo !<br/>pwm = GPIO.PWM(FEED_SERVO_CONTROL_PIN, PWM_FREQUENCY)<br/>pwm.start(FULL_SPEED_FORWARD_DC)</span><span id="c4ca" class="nb ku hu mx b fv ng nd l ne nf"># Let it run for 3 seconds<br/>time.sleep(3)</span><span id="6ebf" class="nb ku hu mx b fv ng nd l ne nf"># Let's go backward now !<br/>pwm.ChangeDutyCycle(FULL_SPEED_BACKWARD_DC)<br/>time.sleep(3)</span><span id="fd4c" class="nb ku hu mx b fv ng nd l ne nf"># Stop and Clean everything<br/>pwm.stop()<br/>time.sleep(0.5)<br/>GPIO.cleanup() # Very important !</span></pre><p id="9027" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">准备好尝试你的剧本了吗？保存您的代码并使用以下命令启动它:</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="2f05" class="nb ku hu mx b fv nc nd l ne nf"># and the magic appears<br/>python feed.py</span></pre><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nu nv l"/></div></figure><h2 id="54fb" class="nb ku hu bd kv nh ni nj kz nk nl nm ld jr nn no lh jv np nq ll jz nr ns lp nt dt translated">脚本摘要</h2><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nw nv l"/></div></figure><h1 id="60fd" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">从浏览器启动您的脚本</h1><p id="d6cf" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated">让我们进一步通过浏览器启动我们的脚本，而不是在终端中键入命令行。首先，我们需要在我们的Pi上有一个本地服务器，能够运行python脚本。</p><h2 id="5dff" class="nb ku hu bd kv nh ni nj kz nk nl nm ld jr nn no lh jv np nq ll jz nr ns lp nt dt translated">在Raspberry Pi上下载并安装Apache</h2><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="a23d" class="nb ku hu mx b fv nc nd l ne nf"># Install apache<br/>sudo apt-get install apache2<br/># Make it Python friendly<br/>sudo a2enmod cgid</span></pre><p id="55d5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">默认情况下，Apache将在/var/www/html/index.html下创建一个测试文件。</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="75c5" class="nb ku hu mx b fv nc nd l ne nf">mv ~/pet-feeder /var/www/html</span></pre><p id="103c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后，让Apache能够读取这个特定文件夹中的脚本。</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="bfec" class="nb ku hu mx b fv nc nd l ne nf"># open the file as root<br/>sudo vim /etc/apache2/sites-enabled/000-default</span></pre><p id="6b62" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">向其中添加python cgi脚本处理程序。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nw nv l"/></div></figure><p id="5e43" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后重启apache，直接测试你电脑浏览器里的一切！</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="0c37" class="nb ku hu mx b fv nc nd l ne nf"># Restart Apache<br/>sudo service apache2 reload</span><span id="22a1" class="nb ku hu mx b fv ng nd l ne nf"># Find out your Pi IP address<br/>ip addr show wlan0 | grep inet</span><span id="1d3a" class="nb ku hu mx b fv ng nd l ne nf"># Go to your computer browser<br/>http:&lt;IP_ADDR&gt;/pet-feeder/feed.py</span></pre><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nu nv l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Launching the script through my browser</figcaption></figure><h1 id="2cd3" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">从互联网启动脚本(路由器和服务器配置)</h1><p id="1deb" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated">如果你没有按照<a class="ae kn" rel="noopener" href="/@michelparreno/how-to-access-your-raspberry-pi-camera-from-anywhere-544ab9e5bacc">之前的教程</a>，强烈推荐你去看看。你必须做完全一样的事情！但是这一次，我们将更改重定向端口。以前，我们处理来自端口8081的请求，因为它是摄像机流服务器。现在，我们还想处理来自端口80的请求，因为它是apache的默认端口。</p><p id="a53d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为此，我们只需向路由器添加另一个<strong class="ji hv">端口转发</strong>规则。请在<a class="ae kn" rel="noopener" href="/@michelparreno/how-to-access-your-raspberry-pi-camera-from-anywhere-544ab9e5bacc">“配置到您的PI的端口转发”</a>部分找到所有解释。最后，它应该是这样的。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/4688d35f520c61398cd1a784d4eb8620.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GJlu8nBODlCunE57yKjM3A.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">The important part here is the redirecting rule 80:80</figcaption></figure><blockquote class="lx ly lz"><p id="1380" class="jg jh ma ji b jj jk jl jm jn jo jp jq mb js jt ju mc jw jx jy md ka kb kc kd hn dt translated">我们实际上是在告诉我们的路由器:请将所有通过端口80进入的外界请求重定向到端口80上的raspberry Pi。</p></blockquote><p id="7240" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">重新启动路由器以考虑新的端口转发规则。让我们看看它是否有效！</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="f394" class="nb ku hu mx b fv nc nd l ne nf">https://<strong class="mx hv">&lt;your_ddns_name&gt;</strong>.dyndns.com:<strong class="mx hv">80/pet-feeder/feed.py</strong></span></pre><p id="600a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">就像上一个教程一样，尝试使用不同于您家的连接。比如在你的智能手机4G上。当在本地网络中时，尝试使用DDNS可能不起作用。这是<strong class="ji hv">路由器</strong>的一个限制。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ny"><img src="../Images/62579618b3dca671be8b083c9db55901.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*csFNfrPfDwYoxeAy_3uTUg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">VICTORY !</figcaption></figure><h1 id="ab5b" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">(可选)想要一点额外的吗？</h1><p id="ea0d" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated">每天做一件事，每隔几个小时给我们的宠物一次款待，怎么样？听起来很酷吗🐇？给你！</p><h2 id="4f14" class="nb ku hu bd kv nh ni nj kz nk nl nm ld jr nn no lh jv np nq ll jz nr ns lp nt dt translated">Crontasks</h2><p id="099b" class="pw-post-body-paragraph jg jh hu ji b jj mf jl jm jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd hn dt translated"><a class="ae kn" href="https://help.ubuntu.com/community/CronHowto" rel="noopener ugc nofollow" target="_blank"> Crontasks </a>是一些指令，您可以配置它们在指定的时间执行所需的任务(在后台)。</p><pre class="ls lt lu lv fq mw mx my mz aw na dt"><span id="c226" class="nb ku hu mx b fv nc nd l ne nf"># Open the crontab panel<br/>crontab -e</span><span id="88ad" class="nb ku hu mx b fv ng nd l ne nf"># Add your feeding task<br/># FEED PET EVERY DAY AT 9AM AND 6PM<br/>0 9,18 * * * python /var/www/html/pet-feeder/feed.py &gt;/dev/null 2&gt;&amp;1</span></pre><p id="9113" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">五个时间和日期字段如下:分钟(0–59)、小时(0–23，0 =午夜)、天(1–31)、月(1–12)、工作日(0–6，0 =星期日)。</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="nu nv l"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Mochi chilling in deluxe cage</figcaption></figure><p id="c51f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">OMG！终于来了！我们终于有办法通过一个相连的笼子看到并喂养我们的小伙伴了！</p><p id="7ece" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为什么不更进一步呢？<a class="ae kn" rel="noopener" href="/@michelparreno/pimp-your-pet-cage-with-raspberry-pi-716945e3f9a4">在下一个教程中，我们将学习如何通过在笼子上添加按钮来整合更多的电子设备。</a>看看吧🙌！</p></div></div>    
</body>
</html>