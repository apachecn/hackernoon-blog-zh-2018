<html>
<head>
<title>[Tutorial — Guide] Installing GitLab, GitLab CI on AWS EC2 from Zero</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[教程—指南]从零开始在AWS EC2上安装GitLab、GitLab CI</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/tutorial-guide-installing-gitlab-gitlab-ci-on-aws-ec2-from-zero-751927e5ae5?source=collection_archive---------2-----------------------#2018-04-23">https://medium.com/hackernoon/tutorial-guide-installing-gitlab-gitlab-ci-on-aws-ec2-from-zero-751927e5ae5?source=collection_archive---------2-----------------------#2018-04-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/921e8036f914e14edc1a73dc5dc9ad1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LgMnyHVnzp-TXUvhf0Dmbw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">How to setup GitLab on an Amazon EC2 Instance</figcaption></figure><p id="f691" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在你用桌子砸自己，诅咒你周围的一切，从桥上跳下去之前…停下来！请原谅我。这将是一篇很长的文章，我希望这能为你节省无数的时间。这不是一条你需要遵循的神圣道路，这是我如何让它工作的。是的，你可能会在安装过程中遇到问题，因为没有两个相等的<a class="ae ke" href="https://hackernoon.com/tagged/computing" rel="noopener ugc nofollow" target="_blank">计算</a>系统。</p><p id="95c5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">你将从本教程中获得什么:</strong></p><ol class=""><li id="f89b" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">在AWS EC2实例上有一个正常运行的<a class="ae ke" href="https://hackernoon.com/tagged/gitlab" rel="noopener ugc nofollow" target="_blank"> GitLab </a>实例。</li><li id="8510" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">为您的项目使用GitLab CI，以及如何配置它。</li></ol><p id="4d74" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">帖子:</strong></p><ol class=""><li id="498d" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">【教程—指南】从零开始在AWS EC2上安装GitLab、GitLab CI。(本指南)</li><li id="b94e" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" rel="noopener" href="/@josjaviasilis/configuring-gitlab-ci-on-aws-ec2-using-docker-7c359d513a46">使用Docker </a>在AWS EC2上配置GitLab CI</li><li id="6e92" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" rel="noopener" href="/@josjaviasilis/configuring-gitlab-ci-yml-150a98e9765d">正在配置。gitlab-ci.yml </a></li><li id="f28b" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" rel="noopener" href="/@josjaviasilis/troubleshooting-gitlab-and-gitlab-ci-79d3b71ad79f">git lab和GitLab CI故障排除</a></li></ol></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="59ba" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">#1 —安装</h1><p id="8684" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">GitLab是<strong class="ji hv">免费</strong>的，至少是它的社区版。<strong class="ji hv">但是</strong> <strong class="ji hv">托管它不是，</strong>除非你是开源的，打算直接在<a class="ae ke" href="https://about.gitlab.com/pricing/" rel="noopener ugc nofollow" target="_blank"> GitLab的网站</a>上使用。我们将使用GitLab CE(社区版)。</p><p id="4dce" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="md">注意，您可以选择手动安装GitLab，而不是通过AWS进行配置。如果有，就按照GitLab网站</em>  <em class="md">的</em> <a class="ae ke" href="https://about.gitlab.com/installation/#ubuntu" rel="noopener ugc nofollow" target="_blank"> <em class="md">这些步骤来。如果你正在这样做，跳到第二步。</em></a></p><p id="4781" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我假设您已经创建了一个AWS帐户。你想做的第一件事，就是前往<a class="ae ke" href="https://aws.amazon.com/marketplace/pp/B071RFCJZK" rel="noopener ugc nofollow" target="_blank">亚马逊的市场，并获得GitLab社区版</a>。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff me"><img src="../Images/8865f69c6699f710578ddd5f72669e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cjgrbtnitxQ-nXprwMR8bQ.png"/></div></div></figure><p id="ddff" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你要点击“继续订阅”</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/9392644202069093143e674d154ee4d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c0eaehmfz-6IT8yqFcYMoA.png"/></div></div></figure><p id="3136" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="md">有一点:我不打算在这里讨论如何生成密钥对或。ppk文件。你可以跟随bluehost </em>  <em class="md">的</em> <a class="ae ke" href="https://my.bluehost.com/hosting/help/putty#puttygen" rel="noopener ugc nofollow" target="_blank"> <em class="md">这篇优秀教程。</em></a></p><p id="ef89" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">需要注意的几件事:</p><ol class=""><li id="a5e2" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">它要安装的GitLab版本，已经过时了。</li><li id="82e8" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">预定义的EC2实例类型是t2.medium</li><li id="a80a" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">运行该实例的潜在成本约为每月33.41美元。</li></ol><p id="d64e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我建议不要使用比t2.medium更小的东西，即使你是一个单独的开发者。GitLab会<strong class="ji hv">而不是</strong>正确执行，如果它没有<a class="ae ke" href="https://docs.gitlab.com/ee/install/requirements.html#memory" rel="noopener ugc nofollow" target="_blank"> 4 GB的RAM(相信我，它会使用它)它会抱怨。</a>你<em class="md">可以</em>实现所谓的<a class="ae ke" href="https://docs.gitlab.com/ee/install/requirements.html#memory" rel="noopener ugc nofollow" target="_blank">内存交换，如果你选择一个t2.micro </a>，但是从个人经验来看<strong class="ji hv">不要这么做。它会像垃圾一样跑。</strong></p><p id="44e8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了降低成本，我建议停止不使用的GitLab实例(如果你是一个超小型开发团队)。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/c491a9ace8de04eba8711b02ba74d8cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*uLYCJq9qEVckLI-5noGt9Q.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Scroll down the page, and you’ll see the Security Group</figcaption></figure><p id="dec8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这很重要，超出了本教程的范围。我总是建议根据你的需要来设置IP。一开始，你可以“根据卖家设置新建”，然后调整。</p><p id="daa5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">点击“继续订阅”，您将看到下面的确认页面:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ml"><img src="../Images/98014b0cf540876cd7e072a8291c50fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4-HjYEnr6FJ6xva5iXABSg.png"/></div></div></figure><p id="22bb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">单击EC2控制台，它会将您从EC2实例转到主页。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/23541de0b6199c51686e23f0faadb444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kCE8beHgQWxrgDYN73u8rA.png"/></div></div></figure><p id="9c67" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您决定继续设置安全组，那么，一直向右滚动，直到您看到“安全组”，并从实例中选择一个。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/9ecfd1869419fb0a4668fe79c3f71559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cS4xpyesRbkWwZFBA6Ofqw.png"/></div></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff mo"><img src="../Images/a0765491dbb9f5839183cd0bf8fab6fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:296/format:webp/1*x0-_n-ugXbqadEodcy9xZA.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Example of the Security Groups. Click the one corresponding to your GitLab isntance.</figcaption></figure><p id="dfd5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您要做的是“编辑入站规则”，然后为SSH分配您自己的IP。对于HTTP，您可以应用相同的限制来提高安全性，或者让它保持打开并从任何地方访问它。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/87c2921ee5294ccc7f8a534dc4177f07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ul8PBSethhrvsDlL2Lyy5A.png"/></div></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mq"><img src="../Images/4b3b52d00c41ebaaa6139bddf651a750.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M4XXzoLK3gzj9oFFjFjFCA.png"/></div></div></figure></div><div class="ab cl kt ku hc kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="hn ho hp hq hr"><h1 id="3188" class="la lb hu bd lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx dt translated">#2 —分配弹性IP。</h1><p id="a400" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">这是它自己的一部分，它可能感觉不合适(这显示了一个已经设置好的GitLab实例的插图),原因是我把这个搞砸了，我不得不深入GitLab来修复它。您可以看到，当您通过IPV4连接时，每次您停止和恢复实例时，<strong class="ji hv"> IP地址都会发生变化</strong>(在AWS上)</p><p id="ee1a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">乍一看，这似乎没有什么不好，但是有一个大问题。GitLab <strong class="ji hv">将当前URL </strong>硬编码到项目中。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/405d0d576e7f208cf80376608f943626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GSdLXxuAqOEXofG9UONtHw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Screen when you’re creating a project</figcaption></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ms"><img src="../Images/233095e26fbdc39d83ae35e41ce15a13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SdxUzIrcMefppFryX1AePw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Pay attention to the Project Path. It becomes hardcoded. If you stop and bring back up the instance, there <strong class="bd mt">will be </strong>a mismatch of the URL and the repo, and this is <strong class="bd mt">going to </strong>cause issues.</figcaption></figure><p id="bdd1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就带来了一个问题，当你试图从回购中推或拉时，它会出现错误，如未找到，或权限被拒绝。在你做任何事情之前建立一个弹性IP(T18)会让你免于死亡。不是所有的东西都丢了，如果你搞砸了，有一个方法可以弥补。</p><p id="6986" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">转到顶部的“服务”,点击“EC2 ”,进入EC2主页。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/66e1e4ddf145194df0eb12c809898411.png" data-original-src="https://miro.medium.com/v2/resize:fit:1032/format:webp/1*fZZ0K9PAquA1b8tpvZN4xQ.png"/></div></figure><p id="6401" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">点击“弹性IPs”。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mv"><img src="../Images/f66b03243adbd7839c5027ba74693140.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OHtsZUHdY_bwqzp9wtT0pQ.png"/></div></div></figure><p id="dd6d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后点击“分配新地址”</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff mw"><img src="../Images/0d32ba37486edd23c5a92e20d1277432.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*IXb-pCQRcigF6P6D64W1VA.png"/></div></figure><p id="f794" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">按“分配”，您将收到一条确认消息:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mx"><img src="../Images/5522aac223c6f370873c8b306a9be48b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwflKvmGSUBLTdolhmkPTw.png"/></div></div></figure><p id="ddfe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">选择新的IP地址后，单击“操作”，然后单击“关联地址”。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="ab fr cl my"><img src="../Images/b19b0255b634c6d6659d431f996280df.png" data-original-src="https://miro.medium.com/v2/format:webp/1*2RyabEbX55_2jIaXbU3YWw.png"/></div></figure><p id="329c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后，选择GitLab实例并分配私有IP。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/61fcbb4c9822f06acb36b0db1822cdff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SeTHT4eD7NWfpA9qL42iNA.png"/></div></div></figure><p id="64ab" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">就是这样！那会让你省去很多头疼的事！</p><h1 id="1106" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated"><strong class="ak"> #3—连接到GitLab实例</strong></h1><p id="1df0" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">为此，你将需要<a class="ae ke" href="https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html" rel="noopener ugc nofollow" target="_blank"> PuTTy </a>或者一个类似的可以给你shell访问权限(sh访问)的程序。<em class="md">我假设你将在本教程中使用PuTTy。</em></p><p id="7374" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">从您刚刚打开的aws页面(EC2 Instances页面)，您将单击新创建的实例(它将显示为空白)。上图第二个)，你要找IPv4地址。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nf"><img src="../Images/82e6293ae7ab60aaa6b719218b719206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K_zsYXY-sULcNiSAt_nBAA.png"/></div></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ng"><img src="../Images/9c429e80dbf0c8e2f6b5806ab203d96a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0c3ZiCmt2K7YiFeEhYmHg.png"/></div></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/e6d78b12e757a8e8c239230dc0cd95e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*lvgZpgV4_A_Gsd59KnW0zQ.png"/></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff nh"><img src="../Images/5e0920b419cd3e79dfe3b10f06aa0783.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*cs18RkDjqfXaf_-RRmLkMg.png"/></div></figure><p id="354e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">单击打开</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ng"><img src="../Images/065b6b91dc7b3f7551642ef7d04325f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JZpr8zBUf0DYq189DZpwyQ.png"/></div></div></figure><p id="42dd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">单击“是”</p><p id="7750" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在显示“登录身份:”的地方，输入“ubuntu”，如果你有密码(你应该有)，输入密码或者复制粘贴。<em class="md">注意:它不会出现在终端</em>中。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/23e56fe1c87a77a01e2484001fb55439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*LiZewVYuZ2SeA8HZi2Z5uQ.png"/></div></figure><h1 id="7237" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated">#4-更新Ubuntu</h1><p id="8726" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">当前安装的Ubuntu已经过时，需要更新。</p><p id="9b47" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" href="https://gregrickaby.com/2013/05/safely-update-an-ubuntu-ec2-instance-on-amazon-aws/" rel="noopener ugc nofollow" target="_blank">首先，创建一个备份映像(以防服务器不是新的)</a></p><p id="6ff8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后，从<a class="ae ke" href="https://askubuntu.com/a/777177" rel="noopener ugc nofollow" target="_blank">这里开始</a>:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="1e16" class="no lb hu nk b fv np nq l nr ns">sudo apt update</span><span id="d264" class="no lb hu nk b fv nt nq l nr ns">sudo apt dist-upgrade</span><span id="5210" class="no lb hu nk b fv nt nq l nr ns">sudo do-release-upgrade -d</span></pre><p id="d38c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="md">注:这是</em> <strong class="ji hv"> <em class="md">打算</em> </strong> <em class="md">花一段时间。</em></p><p id="ed58" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果这不起作用(您看不到任何事情发生)，尝试这样做:(注意我们省略了-d标志)</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="a83a" class="no lb hu nk b fv np nq l nr ns">sudo do-release-upgrade</span></pre><p id="946d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">请注意升级过程，因为它会要求您确认一系列的安装和升级。您可以用“-y”标志省略它。</p><p id="7eee" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这样的屏幕看起来像这样:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/82946a84444cca4fe24039cd3e977f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*mab26UPkGEtBRWFuQrwNlg.png"/></div></figure><p id="6672" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">选择“是”</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/8df7ddcd21b196fddd46ef229ae8c172.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*rxhOpUoQmBfRUvaCZHeAfg.png"/></div></figure><p id="ccb2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">键入“Y”并按回车键。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/4228e98f17e98e298efd02f36fedee0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*QU0EcY5tAra_kBj6C1qN7g.png"/></div></figure><p id="7d9d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">“安装软件包维护者的版本”，并点击回车</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/de3446f7b45fc84e036b74536f81b7d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*EnVIizEnSRviKnO9ZgajIg.png"/></div></figure><p id="e5aa" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">键入“y”并按“Enter”键</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/449f0ffa4c889dbb20258c63715638ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*XKuDUKcROmhVTcEBkbXKrw.png"/></div></figure><p id="58fe" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后一个窗口将重启服务器，并将其从控制台断开。您必须关闭并再次打开PuTTY。</p><p id="f739" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">运行以下命令，检查是否安装了最新版本:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="879e" class="no lb hu nk b fv np nq l nr ns">lsb_release -a</span></pre><p id="9ad7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在撰写本文时，最新版本是16.0.4.4:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff nu"><img src="../Images/27408142e59fbe745a4b868760a74ed0.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/format:webp/1*nn0sEkpYROpy-Lu6OWHLeQ.png"/></div></figure><h1 id="9d7f" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated"># 5-首次配置GitLab</h1><p id="68e8" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">一旦你升级了Ubuntu，那么你需要配置GitLab:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="2ac2" class="no lb hu nk b fv np nq l nr ns">sudo gitlab-ctl reconfigure</span></pre><p id="d1cc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个过程需要一段时间。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/c09495f13324f3855107cc8736adeffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*0G-XqH4digm0efWtfsnaYQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Once it has finished, you will see “gitlab Reconfigured!”</figcaption></figure><p id="e0c0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">更新和升级软件包:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="9f48" class="no lb hu nk b fv np nq l nr ns">sudo apt-get update</span><span id="451c" class="no lb hu nk b fv nt nq l nr ns">sudo apt-get upgrade</span></pre><p id="d6b9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">之后，为了确保安全，重启gitlab-ctl:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="58d9" class="no lb hu nk b fv np nq l nr ns">sudo gitlab-ctl restart</span></pre><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/d22a2b287a95b4066ae9b7081be79472.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*mc7lgIRlRaf3FbJDOr20yQ.png"/></div></figure><p id="8e0e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，从AWS的IPv4地址访问项目(与PuTTY使用的URL相同)。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nv"><img src="../Images/45d325d9cfba1a350f32ae2f1e0507e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RHHrysbiVGUH7_KYYek6Ow.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Navigate with your browser to the same IPv4 URL Address</figcaption></figure><p id="c16b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">例如:导航到:http://ec2–20–156–206–47.us-east-2.compute.amazonaws.com/</p><p id="073d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">使用</strong>访问默认帐户(如果它询问您)</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="6f09" class="no lb hu nk b fv np nq l nr ns">Username: root</span><span id="bca6" class="no lb hu nk b fv nt nq l nr ns">Password: 5iveL!fe </span></pre><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/2504eb5295117d2841f08a7d15099d42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cj2NtFBOPNqZg63TJqAkxA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">In this case, it didn’t ask us for the default credentials, but immediately prompted us with changing the password.</figcaption></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/c08888aeee77efd485228423d5b1150b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A8Dfs1BW3tUEcGqf_EuwoA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">This is going to be the default page</figcaption></figure><p id="6059" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">加载主页后，通过在URL末尾添加“/admin”导航到管理区域。</p><p id="1b72" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这样做:(首先是你的IP地址，然后是/admin)</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="9590" class="no lb hu nk b fv np nq l nr ns">http://ec2–20–156–206–47.us-east-2.compute.amazonaws.com/admin</span></pre><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nw"><img src="../Images/ab1523f5cbd5e83c279af0ce82cd3bfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vviSxGtYpBonVnPIqL9l3A.png"/></div></div></figure><p id="4ec3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可能已经注意到以下内容:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ny"><img src="../Images/7047263e2dd3ae6768fa9e6cd429d359.png" data-original-src="https://miro.medium.com/v2/resize:fit:944/format:webp/1*9P-HcwCWiTVM481zJAKQLQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">GitLab needs update.</figcaption></figure><p id="3a44" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就是我们接下来要做的！</p><h1 id="19b5" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated">#6 —更新GitLab</h1><p id="0fad" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">让我们回到PuTTY，运行一些命令:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="17cb" class="no lb hu nk b fv np nq l nr ns">sudo apt-get update &amp;&amp; sudo apt-get install gitlab-ce</span></pre><p id="197f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这将检查我们是否拥有最新的一切。</p><p id="2778" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后，我们需要在下面的URL 中手动查找<a class="ae ke" href="https://packages.gitlab.com/gitlab/gitlab-ce?filter" rel="noopener ugc nofollow" target="_blank">上的GitLab:</a></p><div class="nz oa fm fo ob oc"><a href="https://packages.gitlab.com/gitlab/gitlab-ce?filter" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">gitlab/gitlab-ce -包packages.gitlab.com</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">GitLab社区版包的APT/YUM存储库</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">packages.gitlab.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq ja oc"/></div></div></a></div><p id="4f35" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您将会看到最新的版本，现在是:10.6.4。</p><p id="7ec8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">请注意，您需要将其与所使用的Linux版本相匹配。在我们的例子中，它是Ubuntu Xenial版本。</p><p id="930a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在Ubuntu机器上了解它的一个方法是运行:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="6c4e" class="no lb hu nk b fv np nq l nr ns">lsb_release -a</span></pre><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/61825eff7bb75213b61aa398ff0e589a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*mMvJDqjU7ODyyhMlg-oF9Q.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Running lsb_release -a will give us the Ubuntu version.</figcaption></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff or"><img src="../Images/e76be5e9ce2a61d89153ded1ae12e5a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kk68vtO6l2WYzmyEQxbTOQ.png"/></div></div></figure><p id="3a48" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">确定你的分布。在我们的例子中，我们使用的是Ubuntu Xenial Release。我们点击并跟随链接。</p><p id="cf22" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将看到GitLab为我们提供了一些如何安装它的说明:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff os"><img src="../Images/8205f87938fbf4168a50449f5aa56930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VZBkA7e1XFKakjLVlnCZOw.png"/></div></div></figure><p id="b3f4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们完全按照它说的去做；我们转到PuTTY并执行:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="52a1" class="no lb hu nk b fv np nq l nr ns">curl -s <a class="ae ke" href="https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh" rel="noopener ugc nofollow" target="_blank">https://packages.gitlab.com/install/repositories/gitlab/gitlab-ce/script.deb.sh</a> | sudo bash</span><span id="1b76" class="no lb hu nk b fv nt nq l nr ns">sudo apt-get install gitlab-ce=10.6.4-ce.0</span></pre><p id="64d2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">|意味着您获得了curl到bash的标准输出。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/691f39f53e75cbec8e358bf33ec56c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*x1pYGupTtS1w1CKbjFG1pw.png"/></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/22fa6f5ff0f943d5687a7d6db58e70d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*kCA7dnFz4wkpGr60sXB6xQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Let the beauty unfold! See how it installs!</figcaption></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ni"><img src="../Images/566e7bfbdffa405986ede268c0c72c13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*HepQD98_7JOqbfs84rEt-w.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">You shall be greeted with this awesome message!</figcaption></figure><p id="dd41" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">导航到您的新实例位置！</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/65a3a5c1ec84b020a4c66ac4e780ee70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lI5zDB-Hi4ana5gLpdpzRw.png"/></div></div></figure><h1 id="94bf" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated"># 7——战争还没有结束。—连接到GitLab</h1><p id="d869" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">每当您连接到GitHub时，它会自动创建一个我们称之为SSH的密钥(安全Shell密钥)。这是一种不需要密码就能直接与你的回购协议沟通的方式。GitLab没有什么不同，只是我们需要<strong class="ji hv">自己手动生成</strong>，然后把它们粘贴到我们的GitLab账户中。如果做不到这一点，我们<strong class="ji hv">将无法</strong>在回购中进行任何操作。</p><p id="14c2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为此，我们需要Bash，我们可以从Git中使用它。如果没有，下载<a class="ae ke" href="https://git-scm.com/download/win" rel="noopener ugc nofollow" target="_blank"> Git </a>安装。开放Bash:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ot"><img src="../Images/9ccbdc1d2401864d88fd82c376de0eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NL76v8sAk25imbNYlVxQhg.png"/></div></div></figure><p id="8f58" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们要做的是使用Git Bash为我们生成SSH密钥，并将其复制粘贴到GitLab中。</p><p id="9847" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在Bash命令中，运行:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="a30d" class="no lb hu nk b fv np nq l nr ns">ssh-keygen -t rsa -C “your_name@your_email.com”</span></pre><p id="b4ed" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后，它会询问您要将它保存在哪个文件中。你可以按回车键。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ou"><img src="../Images/00ff581e30ff7290f792268271377086.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*RdPkP3zWPWvAqu-7sHXGng.png"/></div></figure><p id="3a63" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您有或者想要创建多个RSA密钥，那么您需要指定一个不同的名称。</p><p id="29b0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">注意，不幸的是，您需要将完整的路径附加到新名称中，所以它会将路径存储到该位置。否则，它将把它存储在。ssh文件夹(没什么大不了的，记得移入就行。ssh)</p><p id="cf7e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在英语中，我的意思是:在文本框中，如果你想把它命名为id_rsa_gitlab，你会这样写:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="6d34" class="no lb hu nk b fv np nq l nr ns">/c/Users/asili/.ssh/id_rsa_gitlab</span></pre><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ou"><img src="../Images/b16c85fc4807d2765638c336eca7f6d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/format:webp/1*OuWuVVxUD3vsMrNzB4vlSQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Then, it’s going to ask you for some passphrase in case you want to protect it. After it finishes, it should show something like the image above.</figcaption></figure><p id="9dfa" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将文件添加到SSH:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="cbd6" class="no lb hu nk b fv np nq l nr ns">ssh-add ~/.ssh/id_rsa<br/>ssh-add ~/.ssh/id_rsa_any_other_file_I_could_have_created</span></pre><p id="4663" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">完成后，您需要复制id_rsa_gitlab.pub或id_rsa_的内容。pub(您指定的文件名)，并将它们粘贴到GitLab中。</p><p id="8026" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以:</p><p id="3658" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在GitBash命令中键入以下内容:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="9679" class="no lb hu nk b fv np nq l nr ns">$ cat ~/.ssh/id_rsa.pub | clip</span></pre><p id="dc23" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这将把内容复制到你的剪贴板。</p><p id="6e1d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">或者:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ov"><img src="../Images/c4564a611d23f12cd8bd294587917836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*pnQxZwz6VQ3YweKBoqQKTA.png"/></div></figure><p id="5b43" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">找到文件，用文本编辑器打开它。<em class="md">对不起发行商，你打不开</em>。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ow"><img src="../Images/ec814fd76737625adcd16987c00092e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eIVH5OvlsJAbiswtE7UiqQ.png"/></div></div></figure><p id="5b4f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，转到您的GitLab实例(通过浏览器)，单击右上角的图标，并选择“设置”:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/a7c0b22d08e4cad5f52e35f156a46284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGiFz8MdjL1VlTMWj11Dhw.png"/></div></div></figure><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div class="fe ff ox"><img src="../Images/e6a6c0f675bf005af843a45d40a2bafe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/format:webp/1*3F5yOb13tFOfqHoNSGw-Ww.png"/></div></figure><p id="bec7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">转到左侧的“SSH密钥”，然后将密钥的内容粘贴到文本框中。<strong class="ji hv">注意:您将为您连接的每台机器执行此操作。</strong>每个用户都必须完成生成SSH密钥并将其粘贴到自己的配置文件中的过程。</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/26da1cbe577adeafb8a8515135f02c4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YA2kT9OzE2ojWBaX4ExWOA.png"/></div></div></figure><p id="554d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">点击“添加密钥”，你会得到这样的东西:</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff oy"><img src="../Images/9c9ef1815f4a14a643474b5367437f13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JidFG3goXoaaclnvtpFXRA.png"/></div></div></figure><p id="3e16" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">有了这个，你就可以从回购中拉和推(只要你在GitLab 中有<a class="ae ke" href="https://docs.gitlab.com/ee/user/permissions.html" rel="noopener ugc nofollow" target="_blank">权限)。</a></p><p id="1d15" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">如果你只打算使用一个_rsa密钥，你可以安全地跳到下一节。如果您使用多个，您需要添加额外的配置步骤。</strong></p><p id="0e80" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您有多个RSA密钥(SSH密钥)，您必须创建一个配置文件:</p><p id="1c19" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">回到。ssh目录(在我的例子中是:C:\Users\asili\。ssh)，并创建一个空的<strong class="ji hv">无扩展名的</strong>配置文件。</p><p id="6fed" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以:</p><p id="43a9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">通过Git Bash来实现:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="a8ea" class="no lb hu nk b fv np nq l nr ns">touch ~/.ssh/config</span></pre><p id="0b0b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">或者右键，新建= &gt;文本文档，并删除"。txt "扩展名。</p><p id="a11d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">用任何文本编辑器打开文件。</p><p id="fc19" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在其中，复制并粘贴以下内容:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="57b4" class="no lb hu nk b fv np nq l nr ns"># Root account<br/>Host ec2–12–211–32–14.us-east-2.compute.amazonaws.com<br/> HostName ec2–12–211–32–14.us-east-2.compute.amazonaws.com<br/> PreferredAuthentications publickey<br/> IdentityFile ~/.ssh/id_rsa</span><span id="fbb9" class="no lb hu nk b fv nt nq l nr ns"># superjose account<br/>Host ec2–18–211–14–41.us-east-2.compute.amazonaws.com<br/> HostName ec2–18–211–14–41.us-east-2.compute.amazonaws.com<br/> PreferredAuthentications publickey<br/> IdentityFile ~/.ssh/id_rsa_superjose<br/> <br/>Host other_gitlab_repo.com<br/> Hostname other_gitlab_repo.com<br/> PreferredAuthentications publickey<br/> IdentityFile ~/.ssh/id_rsa_rat</span></pre><p id="b6e4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这里，您将替换您正在使用的IPv4地址的主机和主机名值。这个配置文件<strong class="ji hv">是最重要的</strong>。如果没有这个，您将无法与多个主机通信，因为它将只使用id_rsa文件。</p><p id="ddef" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">注意:您放置的是私钥(无扩展名文件)，而不是。酒吧一号。</strong></p><p id="afb2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一些附加资源:</p><ul class=""><li id="7640" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd oz kl km kn dt translated"><a class="ae ke" href="https://coderwall.com/p/7smjkq/multiple-ssh-keys-for-different-accounts-on-github-or-gitlab" rel="noopener ugc nofollow" target="_blank">https://coder wall . com/p/7 smjkq/multiple-ssh-keys-for-different-accounts-on-github-or-git lab</a></li><li id="775d" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd oz kl km kn dt translated"><a class="ae ke" href="https://docs.gitlab.com/ce/ssh/README.html" rel="noopener ugc nofollow" target="_blank">https://docs.gitlab.com/ce/ssh/README.html</a></li></ul><h1 id="2017" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated">为GitLab配置现有Repo</h1><p id="cd13" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">如果您从其他存储库迁移到GitLab，您需要配置<a class="ae ke" href="https://stackoverflow.com/a/2432799/1057052" rel="noopener ugc nofollow" target="_blank"> URL端点以指向正确的位置</a>。您可以通过以下方式做到这一点:</p><pre class="mf mg mh mi fq nj nk nl nm aw nn dt"><span id="39c4" class="no lb hu nk b fv np nq l nr ns">git remote set-url origin <!-- -->git@ec2-31-412-44-15.us-east-2.compute.amazonaws.com:project/my-project.git</span></pre><p id="5431" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">或者，只需编辑配置文件:。git/config</p><figure class="mf mg mh mi fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff pa"><img src="../Images/e31e37897410aa111825f492138f5052.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x2KiXd-c10qg_ZVFa4Rhsw.png"/></div></div></figure><h1 id="c7a0" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated">如果回购网址和你实际网址不一样怎么办？</h1><p id="cc8b" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">如果repo不同(您的IP地址发生了变化，或者您在设置GitLab后添加了一个域)，请转到以下链接，步骤#1:</p><p id="66d8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" href="https://hackernoon.com/troubleshooting-gitlab-and-gitlab-ci-79d3b71ad79f#374e" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/trouble shooting-git lab-and-git lab-ci-79 D3 b 71 ad 79 f # 374 e</a></p><h1 id="40de" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt translated">终于！GitLab已经启动并运行</h1><p id="d729" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">但是…CI呢？</p><h1 id="528c" class="la lb hu bd lc ld na lf lg lh nb lj lk ll nc ln lo lp nd lr ls lt ne lv lw lx dt">💀💀💀💀💀💀💀💀💀💀💀💀💀💀💀</h1><p id="b0e0" class="pw-post-body-paragraph jg jh hu ji b jj ly jl jm jn lz jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd hn dt translated">是的，我知道，你想死。想一想，人们要花多少时间进行研究才能实现这一目标。或者想想GitLab团队为了实现这一目标付出了多少努力？！(为他们这个神奇的工具喝彩😉)</p><p id="52bc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们在另一篇文章中继续讨论CI:</p><p id="c6ee" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" rel="noopener" href="/@josjaviasilis/configuring-gitlab-ci-on-aws-ec2-using-docker-7c359d513a46">使用Docker </a>在AWS EC2上配置GitLab CI</p><p id="9fa9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">变更日志:</strong></p><p id="cd36" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">2018年5月24日:</p><ul class=""><li id="beba" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd oz kl km kn dt translated">添加了“如果回购URL与您的实际URL不同怎么办？”</li><li id="c8ac" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd oz kl km kn dt translated">修复了故事中的一个错别字。</li><li id="b784" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd oz kl km kn dt translated">添加了GitLab完成自身配置后导航到URL的说明。</li></ul><figure class="mf mg mh mi fq iv"><div class="bz el l di"><div class="pb pc l"/></div></figure></div></div>    
</body>
</html>