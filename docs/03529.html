<html>
<head>
<title>Five Lessons From 3,650 Days of Web Performance Work</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">来自3650天网络表演工作的五个教训</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/five-lessons-from-3-650-days-of-web-performance-work-6ec3a262fa88?source=collection_archive---------15-----------------------#2018-04-23">https://medium.com/hackernoon/five-lessons-from-3-650-days-of-web-performance-work-6ec3a262fa88?source=collection_archive---------15-----------------------#2018-04-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/38a9be340e8bf848f79f653f24c666ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYdtWoItO92DxNF5-xYZbQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Moscow Olympics Team Pursuit. <a class="ae jg" href="https://www.flickr.com/photos/40365317@N06/4830395488/in/photolist-8mR3hQ-VK5gdg-VWw6gt-4Zgb7y-eiZAf9-ToaZxR-ggVW8u-obdee9-bBDCoK-YZm1P7-ejE4Mi-pQVTnu-8V3jio-qKugvv-auWcfw-kf49t5-eip2ck-4J7KaW-4GhD7g-bSTDrF-kf2tF6-gigEsc-cWw2F-kkrnXf-nypDAr-ei5MG2-8vydqG-byZwhP-6QSVZF-kf2tCv-8MPcLE-8F1Adr-cWw2g-byZvwV-6TLakr-dmTFbX-dcuE7X-cE9DYW-cC5Wf5-7EZNKg-UBN9fV-6Uwnt4-8vuiDZ-djQ1Dz-ivX65c-crj4YC-8vv83p-cWw1e-8ML4MZ-8vuowe" rel="noopener ugc nofollow" target="_blank">Via Anders on Flickr</a>.</figcaption></figure><blockquote class="jh ji jj"><p id="b9de" class="jk jl jm jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated"><em class="hu">披露:</em> <a class="ae jg" href="https://hackernoon.com/r/?url=https%3A%2F%2Fgoo.gl%2FcF8TcH" rel="noopener ugc nofollow" target="_blank"> Manifold </a>，独立开发者服务市场<em class="hu">，之前赞助过黑客正午。</em> <a class="ae jg" href="https://hackernoon.com/r/?url=https%3A%2F%2Fgoo.gl%2FcF8TcH" rel="noopener ugc nofollow" target="_blank">使用code HACKERNOON2018获得任何服务10美元优惠。</a></p></blockquote><p id="103a" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">在我职业生涯的最后十年，我一直专注于让<a class="ae jg" href="https://scoutapp.com/ruby-monitoring" rel="noopener ugc nofollow" target="_blank"> Rails </a>、<a class="ae jg" href="https://scoutapp.com/elixir-monitoring" rel="noopener ugc nofollow" target="_blank"> Elixir </a>和<a class="ae jg" href="https://scoutapp.com/elixir-monitoring" rel="noopener ugc nofollow" target="_blank"> Python </a>应用程序运行得更快、更平静。以下是我从惨痛的教训中学到的五个语言不可知论者的教训。</p><h2 id="7aa6" class="km kn hu bd ko kp kq kr ks kt ku kv kw kj kx ky kz kk la lb lc kl ld le lf lg dt translated">1.不要通过案例研究来激励，要用潜伏的情感代价来激励</h2><figure class="li lj lk ll fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lh"><img src="../Images/c184c065b3b6db02da85768d979642f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hKpzqn9D-1jlVxUXXBfumA.jpeg"/></div></div></figure><p id="6e51" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">每<a class="ae jg" href="https://www.digitalrealty.com/blog/the-cost-of-latency/" rel="noopener ugc nofollow" target="_blank"> 100毫秒的延迟</a>会让亚马逊损失1%的销售额！多500毫秒的页面加载时间会让谷歌的流量下降20%!比竞争对手慢<a class="ae jg" href="https://www.slideshare.net/EquinixUK/the-centre-of-performance-infographic" rel="noopener ugc nofollow" target="_blank"> 5毫秒</a>的电子交易平台会导致每毫秒400万美元的收入损失！</p><p id="8bcb" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">网络表演公司喜欢制造恐慌。这种宣传经常是从案例研究中摘录极端场景。作为应用性能管理(APM)公司<a class="ae jg" href="https://scoutapp.com" rel="noopener ugc nofollow" target="_blank"> Scout </a>的联合创始人，你可能希望我制作信息图，展示你的缓慢的、无索引的SQL查询是如何拖累你的业务的。不装Scout你就要为雇主的早逝负责！</p><p id="03be" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">现实是，我们黑客正午社区中的大多数人并不对亚马逊或谷歌这样规模的应用负责。我们无法做出科学合理的研究，将我们应用的延迟与收入联系起来。对每个团队来说，真正的问题是——无论是谷歌规模的还是99%的非谷歌规模的应用——一连串不可预测的稳定性问题传播着不信任。当随叫随到的开发人员筋疲力尽，销售和支持团队无法信任技术团队时，有害的工作环境和客户关系就会形成。</p><p id="6e3c" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">你需要一个可靠的网络应用程序，就像你不想强调你的汽车在一周的公路旅行中会如何停滞不前一样。一个可靠的应用程序是一个健康公司的核心情感需求。</p><h2 id="d2bf" class="km kn hu bd ko kp kq kr ks kt ku kv kw kj kx ky kz kk la lb lc kl ld le lf lg dt translated">2.更少关注平均值，更多关注异常值</h2><p id="e318" class="pw-post-body-paragraph jk jl hu jn b jo lm jq jr js ln ju jv kj lo jy jz kk lp kc kd kl lq kg kh ki hn dt translated">十年后，仍然很难不把web应用程序请求的响应时间分布看作一条钟形曲线。感觉很自然的事情与现实生活中实际发生的事情:</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lr"><img src="../Images/58c84ba1aef43b5119e5000bd259d503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7X5jz_3QfJV9g-scbOiEug.jpeg"/></div></div></figure><p id="3ee0" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">这意味着<strong class="jn hv">如果你基于聚合数据优化你的应用，你就是在优化一个不存在的场景</strong>。为了更好地理解最慢的请求发生了什么，<strong class="jn hv">您需要访问未过滤的事件</strong>。例如，对于系统中有大量数据的高级用户来说，请求可能比较慢。</p><p id="abc2" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">工具仍在努力处理这些高维事件。Scout是一种工具，允许您通过跟踪资源管理器研究从原始事务跟踪中收集的数据:</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/b3997b2a9171af4dcecf8e56268b23a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ZP8ODPlsDn7BGE09YeMnnw.gif"/></div></figure><p id="f9b9" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">向LogDNA和Honeycomb这样的系统发送结构化日志和事件也是探索更一般的多维数据的好方法。</p><h2 id="61c8" class="km kn hu bd ko kp kq kr ks kt ku kv kw kj kx ky kz kk la lb lc kl ld le lf lg dt translated">3.暂存环境几乎毫无用处</h2><figure class="li lj lk ll fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lt"><img src="../Images/b0ebc49b594f8da63c0018586da68026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KSNmGmtfnBxBz8oJi0nHdA.jpeg"/></div></div></figure><p id="2446" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">除了为开发中无法模拟的主要变化进行实践之外，我发现阶段环境是一片荒地。在转移环境中精确复制生产环境通常成本高昂，转移环境的负载远低于生产环境。阶段化最终成为开发和产品之间的一个奇怪的中间阶段。</p><h2 id="46e5" class="km kn hu bd ko kp kq kr ks kt ku kv kw kj kx ky kz kk la lb lc kl ld le lf lg dt translated">4.为数据库帮助付费并不可耻</h2><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/aa9bcc567d96835eace01ecad816ba10.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/format:webp/1*hm7K3gR3Hmq3Lv1-iMyj3Q.jpeg"/></div></figure><p id="a984" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated"><strong class="jn hv">对于web应用程序，数据库是最常见的瓶颈。</strong>扩展数据库涉及很多内容。我们在Scout花的一些最划算的钱是在我们成长的时候请来了Percona来帮助我们配置数据库。知道自己没有DBA超能力也没关系。</p><h2 id="c054" class="km kn hu bd ko kp kq kr ks kt ku kv kw kj kx ky kz kk la lb lc kl ld le lf lg dt translated">5.伐木很便宜。使用它。</h2><figure class="li lj lk ll fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lv"><img src="../Images/5fa19360e00aab3cf04da54abc56a2af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*QLF1qP2l5oirtp7NDKHPYw.jpeg"/></div></div></figure><p id="70ff" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv kj jx jy jz kk kb kc kd kl kf kg kh ki hn dt translated">当客户报告问题时，我只能说“对我有效”，我觉得自己很无能。如今，我比十年前更加积极地记录代码的敏感区域。一个健壮的测试套件不能代替产品中可能出现的所有奇怪的边缘情况。</p><h2 id="1ebc" class="km kn hu bd ko kp kq kr ks kt ku kv kw kj kx ky kz kk la lb lc kl ld le lf lg dt translated">摘要</h2><p id="0fed" class="pw-post-body-paragraph jk jl hu jn b jo lm jq jr js ln ju jv kj lo jy jz kk lp kc kd kl lq kg kh ki hn dt translated">当你创建一个更冷静的web应用程序时，你会把这些相同的特征灌输到你公司的DNA中。</p></div></div>    
</body>
</html>