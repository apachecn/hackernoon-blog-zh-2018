<html>
<head>
<title>Troubleshooting GitLab and GitLab CI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GitLab和GitLab CI故障排除</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/troubleshooting-gitlab-and-gitlab-ci-79d3b71ad79f?source=collection_archive---------19-----------------------#2018-04-23">https://medium.com/hackernoon/troubleshooting-gitlab-and-gitlab-ci-79d3b71ad79f?source=collection_archive---------19-----------------------#2018-04-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="8641" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是最后一篇帖子，以防你的<a class="ae jp" href="https://hackernoon.com/tagged/gitlab" rel="noopener ugc nofollow" target="_blank"> GitLab </a>安装出现问题:</p><p id="0e73" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">岗位:</strong></p><ol class=""><li id="498d" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@josjaviasilis/tutorial-guide-installing-gitlab-gitlab-ci-on-aws-ec2-from-zero-751927e5ae5">【教程—指南】从零开始在AWS EC2上安装GitLab，GitLab CI。</a></li><li id="b94e" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@josjaviasilis/configuring-gitlab-ci-on-aws-ec2-using-docker-7c359d513a46">使用Docker </a>在AWS EC2上配置GitLab CI</li><li id="6e92" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@josjaviasilis/configuring-gitlab-ci-yml-150a98e9765d">正在配置。gitlab-ci.yml </a></li><li id="f28b" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo jv jw jx jy dt translated"><a class="ae jp" rel="noopener" href="/@josjaviasilis/troubleshooting-gitlab-and-gitlab-ci-79d3b71ad79f">排除GitLab和GitLab CI的故障</a>(本文)</li></ol><h1 id="374e" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated"># 1-git lab Repo上的IP已更改-显示错误的URL</h1><p id="4e03" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">你忘了设置一个弹性IP，IP变了现在你的项目变了，现在GitLab不知道怎么算出来。</p><p id="bcf8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们需要从<code class="eh lh li lj lk b">/etc/gitlab/gitlab.rb</code>文件中<a class="ae jp" href="https://gitlab.com/gitlab-org/omnibus-gitlab/blob/master/doc/settings/configuration.md#configuring-the-external-url-for-gitlab" rel="noopener ugc nofollow" target="_blank">改变外部URL </a>:</p><p id="ed52" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">#备选方案1 —使用Vim进行更改</strong></p><p id="1fa4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">(转到PuTTY终端，运行:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="cee9" class="lt kf hu lk b fv lu lv l lw lx">sudo vim /etc/gitlab/gitlab.rb</span></pre><p id="27f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">按字母“I”开始编辑。</p><figure class="ll lm ln lo fq lz fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/fab27eb6ca4678f92b881bbfb86ed1bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*-yJ6htJdk7voPgPJPVizjQ.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek"><em class="mg">Check line 13. That’s our culprit</em>.</figcaption></figure><p id="143f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成编辑后，按下<code class="eh lh li lj lk b">esc</code>并键入<code class="eh lh li lj lk b">:wq</code>这将编写并退出程序。</p><p id="8708" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">#备选方案2—下载文件并更改其内容。</strong></p><p id="753e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者，你可以通过<a class="ae jp" href="https://filezilla-project.org/" rel="noopener ugc nofollow" target="_blank"> Filezilla </a>或<a class="ae jp" href="https://winscp.net/eng/download.php" rel="noopener ugc nofollow" target="_blank"> WinSCP </a>直接通过FTP访问文件。但是您必须暂时启用对文件的访问:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="6854" class="lt kf hu lk b fv lu lv l lw lx">sudo chmod 777 /etc/gitlab/gitlab.rb</span></pre><p id="6544" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">出自&lt;<a class="ae jp" href="https://forum.filezilla-project.org/viewtopic.php?t=22618" rel="noopener ugc nofollow" target="_blank">https://forum.filezilla-project.org/viewtopic.php?t=22618</a>T31】</p><p id="8be5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">之后，我们可以下载并编辑该文件:</p><figure class="ll lm ln lo fq lz fe ff paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="fe ff mh"><img src="../Images/8fda3387483e6799eed5623ad158c6ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q9KZ9A8uYRLTdnd6C5D-Ew.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Change Line 13. Reupload the file to save the changes.</figcaption></figure><p id="4886" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">别忘了跑步:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="899b" class="lt kf hu lk b fv lu lv l lw lx">sudo chmod 600 /etc/gitlab/gitlab.rb</span></pre><p id="fc9a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">对于所有备选方案，运行:</strong></p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="4627" class="lt kf hu lk b fv lu lv l lw lx"><strong class="lk hv">sudo gitlab-ctl reconfigure</strong></span></pre><p id="1134" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以使更改生效。</p><p id="04db" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">记得在AWS中设置一个弹性IP，这样这种情况就不会再发生了！</p><h1 id="76a1" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">#2-如果项目构建或任何其他阶段失败，该怎么办:</h1><ol class=""><li id="9698" class="jq jr hu it b iu lc iy ld jc mm jg mn jk mo jo jv jw jx jy dt translated">如果您收到没有任务运行器正在运行。那么，这可能意味着:</li></ol><ul class=""><li id="cd33" class="jq jr hu it b iu iv iy iz jc js jg jt jk ju jo mp jw jx jy dt translated">任务运行程序没有运行。使用sudo gitlab-runner start或sudo gitlab-runner run使其工作。</li><li id="ad74" class="jq jr hu it b iu jz iy ka jc kb jg kc jk kd jo mp jw jx jy dt translated">任务运行器被配置为使用标签运行，而您的作业没有标签！标签不是在项目级别设置的，而是在。gitlab-ci.yml文件！</li></ul><p id="2f88" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.如果您收到连接超时问题</p><figure class="ll lm ln lo fq lz fe ff paragraph-image"><div class="fe ff mq"><img src="../Images/30d4f1ae9eee9967a88f412f95b97ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*r1yqvg0stkqDU6CiI4ggLg.png"/></div></figure><p id="fb57" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这个具体的例子中，问题在于缺乏弹性IP，并且服务器地址发生了变化。通过不使用弹性IP，您的服务器地址被释放，并完全改变。</p><figure class="ll lm ln lo fq lz"><div class="bz el l di"><div class="mr ms l"/></div></figure></div></div>    
</body>
</html>