<html>
<head>
<title>Microservices for Startups: An Interview with Steven Czerwinski of Scalyr</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初创公司的微服务:斯卡尔的史蒂文·切尔温斯基访谈</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/microservices-for-startups-an-interview-with-steven-czerwinski-of-scalyr-98b46306115b?source=collection_archive---------19-----------------------#2018-04-24">https://medium.com/hackernoon/microservices-for-startups-an-interview-with-steven-czerwinski-of-scalyr-98b46306115b?source=collection_archive---------19-----------------------#2018-04-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="2fe8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">本次采访是为我们的</em> <a class="ae jq" href="https://buttercms.com/books/microservices-for-startups/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">初创公司微服务</em> </a> <em class="jp">电子书完成的。请一定查看它，了解关于微服务的实用建议。感谢史蒂文的时间和投入！</em></p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff jr"><img src="../Images/65b85c4c25125eb4a4aa4d60c1e46e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:566/0*K2VI9jVC9RchsgpE."/></div></figure><p id="eecd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp"> Steven Czerwinski是</em><a class="ae jq" href="https://www.scalyr.com/company" rel="noopener ugc nofollow" target="_blank"><em class="jp">Scalyr</em></a><em class="jp">的联合创始人兼工程负责人。Scalyr是一项提供可扩展的日志监控和分析SaaS产品的服务。在共同创建Sclayr之前，Steven在谷歌工作了八年，专门为消费者应用程序构建分布式数据库系统。</em></p><p id="1e35" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">根据上下文，您的工程团队有多大？</strong></p><p id="8fa7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们还是一个相当小的初创公司。我们大约有23名全职员工；其中11人是工程师。我是工程主管，所以我会注意我们工程方面的不同团队。我们从2011年就开始合作了，但是在公司成立的前三年，只有我和公司的创始人在公司工作，建立公司，将产品推向MVP，获得用户的初步体验。实际上，我们已经在这一点上向付费客户推出了它，等等。但直到2015年，我们才真正开始尝试积极发展该公司，这也是我们获得第一轮种子资金的时候。从那时起，我们一直在招聘员工，培养工程团队，以及所有这些好东西。我们都来自谷歌。我在谷歌工作了大约八年。史蒂夫本人在那里呆了四个小时。他是一家名为“光明”的公司的创始人，该公司基本上是谷歌收购来生产谷歌文档的。因此，我们都负责在当时被称为谷歌应用部门的地方运行大量存储层服务。</p><p id="16fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">您是否使用微服务？如果是，您如何使用它们？</strong></p><p id="0ee0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我的一些微服务经历被我在谷歌的经历所着色。他们绝对是微服务的忠实信徒，这可能是我第一次看到他们被广泛使用的地方。这种体验决定了我们在Scalyr使用和选择微服务的方式。就我们现在如何使用微服务而言，让我向您介绍一下我们的设置和基础架构的背景。我们是日志管理产品。该服务的核心部分是接收日志。我们是SaaS。因此，我们所有的客户都在实时上传他们的日志给我们，我们有一个接收管道来接收这些日志。当然，我们还提供搜索服务以及一些分析服务，以便能够从日志文件中提取某些指标，制作图表。例如，告诉我状态为200的H3请求的平均响应时间。同样，您也可以使用它来构建仪表板和警报等所有好东西。事实上，我们与市场上其他竞争对手的主要区别在于，我们实际上从零开始构建了自己的定制NoSQL数据库。</p><p id="bb2b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">你是从单体开始，后来采用微服务的吗？</strong></p><p id="7615" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当只有史蒂夫和我的时候，这个服务的第一个版本只是一个单一的服务器。我们有一个基于Java的服务做所有的事情:实现NoSQL数据库，实现我们的前端用户界面，提供Javascript，所有这些好东西。尽管我们在谷歌使用微服务时有过这些积极的体验，但我们还是走了这条路——只有一个整体服务器——因为我们两个工程师维护和部署的工作量较少。</p><p id="fb24" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以我们从整体式方法开始，然后我想大概两年前我们出于特殊的原因开始从Linux服务器的挂载上取下一些部分。</p><p id="3a60" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">如果是，采用微服务的动机是什么？你是如何评估权衡的？</strong></p><p id="b7b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我将谈论我们正在向微服务迁移的三件事，以及我们迁移的不同方式。第一个是我们的前端代理层。这是传入的HP请求被映射到我们的数据库服务器的特定碎片以便被处理的层。我的意思是，我们的NoSQL数据库当然是碎片化的，这并不奇怪。行空间的每个部分都由一个特定的主节点拥有，在它后面有两个副本。主服务器中的这两个副本构成了该行空间的碎片。因此，当我们有一个传入的请求时，我们必须找出该请求来自哪个帐户，然后将它映射到shard，它们在行空间中的位置。在此之前，仅由单片服务器完成。我们在AWS上。因此，所有AWS ELBs只会向随机的整体服务器发送一个请求，而整体服务器会转过身来，然后将该请求重新路由到正确的位置。很明显那没那么有效率。这是微服务的正当理由。所以我们完成了代理服务的这一部分。</p><p id="03b2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们创建的第二个微服务是我们所说的队列服务器。队列服务器实际上提供了日志接收的可靠性和可用性。对我们来说非常重要的是，我们接受这些日志文件的每一秒钟都是由我们的客户不间断地上传的。我刚刚提到过我们的后端服务器——整体服务器——是有状态的。当他们不得不重新启动并返回时，会出现一些服务中断，因为他们从磁盘中读取他们的状态。队列服务器是我们的客户和数据库服务器之间的一种缓冲。这也是基于数据状态的微服务选择。</p><p id="e0f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，我们可以更轻松地清空单个队列服务器，以便在不中断服务的情况下提供软件更新。我们也可以改变它们的大小。我的意思是，这是单片服务器对磁盘和CPU有这种要求的事情之一，但队列服务器，他们需要的只是足够的磁盘来充当服务中正常预期中断的缓冲。</p><p id="9a48" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们知道在计算方面最重要的是资源。我们知道这是我们的平均日志摄取量。我们知道我们要计划45分钟，这决定了我们要留给它的磁盘量。因此，你可以说，将这些东西分解成微服务可以更容易地估算资源使用量。然而，对于单块服务器，它可以做很多不同的事情，就您必须投入的资源量而言，它实际上更像是一个黑匣子。</p><p id="a2ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为一个团队/工程组织，你是如何处理微服务这个话题的？是否围绕微服务的定义进行了讨论？</p><p id="9c85" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当只有史蒂夫和我的时候，我们都有在谷歌的经历，所以在一定程度上，我们没有太多的决策过程。我们都同意微服务是好的，如果我们有足够的工程资源，理想情况下是正确的事情。当我们开始这个新的微服务时，我们有更多的初级团队成员在这个项目上工作，并且接受了一些培训。比如为什么这样好？为什么我们需要将它从整体式服务器中移出？这是一个工人微服务。我的意思是，你当然会尽量以数据为导向。非常注重事实。对我们来说，我们有清晰的监控数据，显示了这些S3归档作业对数据库服务器的影响。所以你可以指着仪表盘说，“看看这些延迟的增加。这可不好。我们需要以某种方式解决这个问题。”实际上，我们与团队一起完成了这项工作，我们进行了论证，例如，我们可以通过尝试更多地限制CPU来解决单片服务器中的这一问题。但这将是一场非常艰难的比赛。你不会抓住所有的案例，所以你仍然会有一些影响。因此，这确实是一个机会，我们可以将它转移到一个完全独立的过程，一个完全独立的节点，我们将获得我们想要的隔离。我们经历的其他事情是度假村，调整会议中的论点。如果我们将此转移到其他地方，那么我们可能能够减少数据库服务器上的JVM大小，因为它们不会腾出额外的RAM来读取数TB的数据，以便将它们归档到S3。因此，我们展示的不仅仅是实时数据，还有各种指标。</p><p id="bb12" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个团队成员的反对意见是，我们为什么不使用现成的队列服务器，工人队列模型，因为那里有现成的。这是关于微服务的一个有趣的点。一旦你有了有意义的API边界，你可能会找到满足这些边界的开源替代品，你可以用它们来交换，这样也许可以节省你自己的时间。我们简单讨论了一下。对于像这样简单的事情，我们决定用非常特殊的方式让服务表现出来。我们想监控它。我们希望能够控制它。所以我们认为建造它的工程努力是值得的，而不是使用现成的东西。但这绝对是一个讨论点。</p><p id="a088" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了应对采用微服务，您是否改变了团队的组织或运营方式？</p><p id="ce50" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们已经在解散团队的路上了。也许两年前，每个人都是全栈工程师。每个人都在触摸堆栈的每个部分。我们现在处于这样一个阶段，你必须具备专业技能，尤其是对我们来说，我们已经实现了这个NoSQL数据库。</p><p id="c18e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在过去的一年里，我们已经走上了分离工程学科的道路。我们有一个前端团队，[和]一个后端团队。我们有一个开发运营团队，还有一个集成团队。因此，在某些方面，如果我们还没有这样做，我认为开发微服务会将我们推向那个界限。我确实在谷歌看到了这一点。微服务有明确的团队所有者。我记得在谷歌，我们实际上组建了新的团队来拥有特定的微服务:现在这是你的宝贝了。你要照顾好它。对我们来说，我们的后端团队大约有三到四名工程师，这取决于你如何计算一半时间的承诺，因为人们戴着不同的帽子等等。对我们来说，后端团队显然将拥有这一点。</p><p id="b275" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">技术选择的自由度有多大？你们是否都同意坚持使用一个堆栈，或者是否有尝试新堆栈的灵活性？你是如何做出那个决定的？</p><p id="7757" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在某种程度上，我们的筹码是固定的。我们是一家以Java为主的商店，所以我们将使用Java。但是在我们的整体服务器中，我们实际上使用Tomcat作为Java容器。我们其实不喜欢Tomcat。我们很想远离它。实际上，我们确实给了自己自由，让我们可以使用这种新的工作者微服务来进行某种程度的重置。我向你提到过我们正在为RPC框架做GRPC。这是我们第一个完全从GRPC构建服务的例子。所以我们给自己一点自由，去探索。这是因为我们强烈认为这是我们将在整个生态系统中采用的方法。</p><p id="8665" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">你有没有把一个单一的应用程序分解成更小的微服务？如果是的话，你能给我们介绍一下这个过程吗？你是如何完成这项任务的？有哪些不可预见的问题和经验教训？</strong></p><p id="b0f7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们做monolithic是因为它一开始对我们来说更快。我们不需要考虑一般化的东西，我们不需要编写通用的库和所有好的东西。但是我们知道在某个时候我们将会剥离一些东西。所以你必须知道什么时候是剥去这层皮的最佳时机。这意味着你必须，当你构建你的整体服务器或构建你的服务时，你必须有正确的监控或正确的信息来帮助你在接近悬崖时警告自己。</p><p id="1389" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这种方法中，我们采用现有的代码库，然后关闭我们不需要的各种部分——它确实暴露了一些错误，我们没有意识到代码的特定部分依赖于特定的全局状态。因为当你开始剥离微服务时，你当然会看到你的全局状态，你会说，好吧，这个服务不需要这个状态，它不需要这个状态，它不需要那个状态。但是你使用的是同一个库，所以有时我们会有意外的发现，因为某些原因，这个库确实希望被传递一个数据库句柄，尽管因为我们在代理层，所以我们没有这样的数据库。所以我们必须找到那些地方，修复它们。理想情况下，我们应该从一开始就考虑到这一点。我们将在不同层之间有正确的边界，并且不会有串扰。但在实践中，这是行不通的。</p><p id="d720" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这可能是显而易见的，但无论何时部署新的微服务，您都需要确保微服务在这两个地方都得到真实的呈现。我们不能在暂存实例中作弊，使用生产代理层或类似的东西。如果我回到Google，我不会在两个实例之间使用相同的图像解析器。因为您真的需要能够发现和测试每个服务的新版本。因此，每当我们对前端代理服务器进行更改时，我们都会尽最大努力，首先将这些服务器推向试运行，并在那里烘烤一段时间，然后再将它们推向生产环境。</p><p id="bac5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你如何确定服务边界？</p><p id="8bff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">[我们考虑服务是无状态的还是有状态的]，但它也是数据的类型。它将对客户产生什么样的影响。你有一些全球性的数据。例如，我们必须有一个从客户到他们所在的行空间部分的全局映射。因此，我们需要该特定数据的高可用性，因为如果它消失了，我们就无法为任何请求提供服务。所以我们把它保存在一个单独的地方，用不同的方式复制它，因为它非常重要。而每个分片的信息，在它自己的小分区里。如果宕机，那就糟了，因为这部分客户将无法使用他们的日志，但这只会影响5%的客户，而不是100%的客户。所以，无状态对有状态。我认为还有资源规模。这是另一个重要的考虑因素。</p><p id="7e20" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">你们团队内部的讨论是怎样的？你能举些例子吗？</strong></p><p id="8012" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我们看到传入请求的数量增加时，我们知道我们已经开始耗尽我们必须进行代理的线程池，我们知道为了处理这些额外的代理而增加更多的整体服务器是没有意义的。所以我们有了一点跑道。我们会说，好吧，我们可以通过增加更多的数据库服务器来满足这种需求，从而增加我们的成本。但是我们知道这不是一个好主意。因此，我们所做的是给自己足够的时间来启动代理层，这样我们就可以用不同的方式启动网站。</p><p id="8e8a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，我们要找出为什么要做微服务的动机。对我们来说，另外两个原因是操作的隔离。有时，为了确保一个操作的资源利用或资源使用不会影响其他更关键的操作，您需要进行隔离。还有就是孤立的冒险。决定使用微服务的部分原因是这种安全隐患以及与您正在使用的任何东西集成的危险性。</p><p id="0bb6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">您从规模估算服务中学到了什么？</strong></p><p id="cd8e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在开始的时候，我们确实玩了一些旋钮，这部分取决于我们将为这些类型的人使用的EC2实例类型。因此，对于我们的代理服务器，我们当然使用不同的EC2实例类型，而不是我们用于数据库搜索的类型。因此，有人提出，好吧，让我们购买这种C2负载、网络负载类型的保留实例，然后进行基准测试，看看代理服务器每秒可以处理多少请求。有一个学习曲线。我们不得不玩这个。但是从那以后，我们不会在每个实例或每个服务器的基础上对单个资源集进行更改。更多的是我们只是旋转更多的碎片。当我们看到每秒来自客户的请求数量超过了基于代理数量的最大上限时，我们就会增加更多的代理。我们只是添加了更多的EC2实例。你可以提出一个论点，我们可以做AWSS自动缩放，但我们是一群保守的人，我们不太相信。我们更希望有个人参与进来。而且很多时候，我们看到这种事情发生，所以我们可以做出反应。</p><p id="f996" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">微服务对你的开发过程有什么影响？</strong></p><p id="1086" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">实际上，当我们添加队列服务器时会很有趣，因为对于我们采用的队列服务器和前端服务器方法，这是整体服务器的一部分，并且这些代码库仍然是共享的。因此，当我们在本地开发时，我们仍然只是启动整体服务器，而没有真正打开单独的前端或单独的队列服务，因为代码已经在那里了。我们只是配置使用该代码，而不是依赖外部微服务。你是对的，当我们加入新的工人服务时，这将不得不有所改变。这是其中一项功能，即S3归档和它将要做的其他事情，它对我们的运营并不重要。就像前端开发人员为了测试他们构建的新UI而构建本地版本一样，S3归档程序不在他们的本地服务上运行对他们来说并不重要。因此，我们可能会将它设置为无需微服务、无需工作人员服务即可运行。因此，我们只需要在有具体测试的功能或问题时提出来。这将意味着，虽然现在我们使用詹金斯为我们的持续建设系统，这将意味着我们将不得不修改。我们已经使用Docker来加速微服务。</p><p id="378a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">您的运营和部署流程如何？出现了哪些挑战，你是如何解决的？你能举些例子吗？</strong></p><p id="4645" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我们开始拥有微服务时，我们必须开始推广我们的开发运营脚本。我们希望有相同的核心开发操作库来完成这些推送。但是现在我们正在推动不同类型的事情。队列服务器，前端代理，单片服务器。所以我们必须重构代码。因此，我们经历了一个过程，剔除了常见的东西，增加了针对特定服务器类型进行定制的能力，等等。对我们来说，这也影响了我们如何发出警报。如我所说，我们使用自己的服务来监控和警告服务器上的性能问题或可用性问题。因此，对于整体式服务器，我们只有一个大的警报集，适用于NoSQL数据库中的每台服务器。但是现在我们有了更多的服务器类型，我们必须考虑警报因素。有一组基本的警报应该适用于任何情况:CPU是否被锁定，磁盘是否已满，诸如此类。但是，还有针对数据库的特定于服务器类型的警报，数据库无法打开，因为它看到了代理的错误。它试图向你发送请求的后端是否不可用。因此，毫无疑问，重构迈出了一大步，并使之更加通用。没有我们不断壮大的开发运营团队，我们不可能做到这一点。我们有一个完全专注于开发运营的人，但我们有很多人一半时间戴着那顶帽子或类似的东西。我们需要人力来做那件事。</p><p id="1da2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">微服务对您的测试方式有何影响？在这方面有什么经验教训或建议？你能举些例子吗？</strong></p><p id="d2f4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我们的环境中，我们有几个不同的领域，我们称它们为实例。我们有生产实例。当然，这是为了服务我们客户的数据而使用的所有服务。然后我们有一个转移实例，其中是我们用来测试的服务器，我们也吃我们自己的狗粮，所以这是其中之一，转移服务器使用Scalyr系统监控生产服务器，然后生产服务器监控转移服务器，所以它们有点互相指向对方。这可能是显而易见的，但无论何时部署新的微服务，您都需要确保微服务在这两个地方都得到真实的呈现。我们不能在暂存实例中作弊，使用生产代理层或类似的东西。如果我回到Google，我不会在两个实例之间使用相同的图像解析器。因为您真的需要能够发现和测试每个服务的新版本。因此，每当我们对前端代理服务器进行更改时，我们都会尽最大努力，首先将这些服务器推向试运行，并在那里烘烤一段时间，然后再将它们推向生产环境。</p><p id="e8b2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">关于测试的另一件事，是到目前为止所有的代码都在单片服务器中。因此，对于集成测试、自动化测试，我们只是通过单片前端来测试这些不同的部分。我们不必仅仅为了测试那些代码包而启动单独的前端或单独的队列服务器，因为它们在单块服务器中表示。</p><p id="1fde" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">微服务对安全性和控制数据访问有何影响？在这方面有什么经验教训或建议？你能举些例子吗？</strong></p><p id="4e51" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就安全性而言，我的意思是我们讨论了图像处理，或者Steve也提到了这样一个事实，即我们集成的一些第三方库，我们不一定那么信任它们。因此，最好在微服务中运行它们，在那里我们没有关键信息，它们不一定会产生影响或以某种方式…没有后门可以让其他人访问我们的数据或类似的东西。但除此之外，微服务对我们的影响并不大。这部分是因为我们的规模。我们已经到了开发运营团队掌握王国钥匙的地步。他们需要通往数据库服务器的钥匙。所有这些微服务、排队服务器、前端代理层、工作人员，对我们来说都是较低的安全问题。因此，我们认为没有必要限制那些已经可以访问数据库服务器的人的访问权限。还没那么需要。</p><p id="d37c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在谷歌，他们肯定会使用微服务作为服务边界。大约在2006年和2007年，他们为RPC机制添加了一个非常强大的身份验证和加密层，以确保请求来自经过身份验证的服务。然后，他们以此作为团队之间的界限，在保护信息等方面，将责任分配给核心人员，然后保护非常关键的微服务及其代表的数据。</p><p id="e571" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">再次感谢Steven的时间和投入！这次采访是为我们的 <a class="ae jq" href="https://buttercms.com/books/microservices-for-startups/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">创业微服务</em> </a> <em class="jp">电子书做的。一定要去看看关于微服务的实用建议。</em></p></div><div class="ab cl jz ka hc kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hn ho hp hq hr"><p id="e6ab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">本文原载于</em><a class="ae jq" href="https://buttercms.com/blog/microservices-for-startups-an-interview-with-steven-czerwinski-of-scalyr" rel="noopener ugc nofollow" target="_blank"><em class="jp">buttercms.com</em></a><em class="jp">。这是《创业公司的微服务》一书</em> <a class="ae jq" href="https://buttercms.com/books/microservices-for-startups/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">采访系列的一部分。新章节一发布，你就可以通过电子邮件收到。</em></a></p><p id="2d28" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢这篇文章，请在下面鼓掌帮助它传播！更多类似内容，请关注我们的<a class="ae jq" href="https://twitter.com/ButterCMS" rel="noopener ugc nofollow" target="_blank"><em class="jp">Twitter</em></a><em class="jp">和</em> <a class="ae jq" href="https://buttercms.com/blog/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">订阅我们的博客</em> </a> <em class="jp">。</em></p><p id="c9f2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想在你的网站上添加一个博客或者内容管理系统，而不是用Wordpress， <a class="ae jq" href="https://buttercms.com/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">你应该试试黄油内容管理系统</em> </a> <em class="jp">。</em></p></div></div>    
</body>
</html>