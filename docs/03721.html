<html>
<head>
<title>Distributed ledger consensus explained</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分布式分类帐共识解释</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/distributed-ledger-consensus-explained-b0968d1ba087?source=collection_archive---------5-----------------------#2018-04-30">https://medium.com/hackernoon/distributed-ledger-consensus-explained-b0968d1ba087?source=collection_archive---------5-----------------------#2018-04-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/801c418401d0aff53e380afa2bf09e5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vWdD55gW8LD5Hut5H8CEUQ.jpeg"/></div></div></figure><blockquote class="jc jd je"><p id="9ec9" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">安东尼的一句话:</strong>如果你还没有，请阅读文章<a class="ae ke" href="https://hackernoon.com/gaining-clarity-on-key-terminology-bitcoin-versus-blockchain-versus-distributed-ledger-technology-7b43978a64f2" rel="noopener ugc nofollow" target="_blank">弄清楚关键术语:比特币对区块链对分布式账本技术</a>。如果您是这个领域的新手，本文将提供一些有用的背景知识。</p></blockquote><h1 id="dcb1" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">从集中式到分布式</h1><p id="bb24" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">分布式账本<a class="ae ke" href="https://hackernoon.com/tagged/technologies" rel="noopener ugc nofollow" target="_blank">技术</a> (DLTs)的核心是分布式账本，它包含一个系统中所有交易的记录。</p><p id="f5f5" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">顾名思义，分布式分类账之所以叫分布式分类账，是因为数据是通过称为节点的计算机网络存储的。</p><p id="b801" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">这种分布式数据库操作的关键是一种机制，以确保网络上的节点验证交易，并同意它们在分类帐上的顺序和存在，这种机制称为共识。对于像加密货币这样的应用程序，这一过程对于防止重复消费或其他无效数据被写入底层分类账至关重要，简而言之，底层分类账是所有交易的数据库。</p><p id="21f0" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">今天，世界上大多数信息系统都是集中的，我们不得不信任控制它们的公司。因为一个大型的中央系统不需要处理一致意见，所以它们是高效的，并且扩展性很好。</p><p id="4c3e" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">另一方面，去中心化的系统很有吸引力，因为它消除了单一组织控制数据的必要性。正确执行的DLT消除了系统用户信任第三方或相互信任的需要，这就是为什么他们经常被描述为“不可信”的原因。</p><p id="5543" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">为了让这个不可信的系统发挥作用，人们设计了许多不同的共识机制，各有利弊。它们通常服务于与上述相同的核心目的，但在方法上有所不同。共识机制之间的主要区别在于它们授权和奖励交易验证的方式。</p><h1 id="2b1b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">坚持住。共识有什么意义？</h1><p id="6bb5" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">在我们继续之前，让我们稍微回顾一下，考虑一下DLT之前的时代，并讨论一下传统数据库。当你有一个数据库时，应用程序可以向数据库写入事务，也可以从数据库读取事务，这个数据库被称为主数据库。这些已经存在几十年了。</p><p id="213f" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">市场随后发生了变化，为了满足灾难恢复、故障转移和冗余的需求，我们引入了第二个数据库，即主数据库的副本。</p><p id="4921" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">每个写操作都写入主机，但事务也写入从机。然后，应用程序可以读取主机和从机，但不能写入从机。如果主设备突然出现问题，从设备可以被提升为主设备。</p><p id="753d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">市场再次发展，应用程序可以写入网络中的两个数据库——一个<strong class="ji hv">多主数据库</strong>场景。这是向前迈出的重要一步，但也带来了其他问题。</p><p id="d1b4" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">这种多主方法的问题是，当多个数据库中的同一个位置有多个应用程序时，这些应用程序偶尔会写入每个数据库中的同一个位置。</p><p id="fc8d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">然后，数据库需要以某种方式解决这种冲突，以确保数据库保持同步。随着您添加更多的主机和用户，这些写冲突的可能性会增加，保持同步和确保一致的努力会变得更加困难。</p><p id="4243" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">直到最近，人们还认为一个法律实体控制着主数据库。例如，亚马逊绝不会考虑将支持亚马逊在线购物网站的主数据库控制权交给谷歌。</p><p id="b47d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">使用分布式共识，不同的法律实体可以有一个主实体，但保持共识。支持这种情况的三个条件至关重要:</p><ol class=""><li id="f7fd" class="ll lm hu ji b jj jk jn jo lf ln lh lo lj lp kd lq lr ls lt dt translated">控制数据库实例的所有各方需要就事务的顺序达成一致，并按照该顺序将事务提交给数据库。</li><li id="ae36" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd lq lr ls lt dt translated">任何一方都不能改变或影响交易的顺序。这是一个叫做不变性的概念。</li><li id="846f" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd lq lr ls lt dt translated">停止整个社区的交易是不可能的。</li></ol><p id="ce36" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">下图说明了计算的发展，包括从集中式数据库到分布式数据库的转变。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/fe5f4a0e3692ea79f03c4acf78023ebf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2oYXXp2NmCeUvXBY."/></div></div></figure><h1 id="07e8" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">共识是一个过程</h1><p id="c703" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">所以，我们已经讨论了为什么我们需要共识，共识是什么。让我们看看它是如何工作的。</p><p id="fa33" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">如前所述，共识是一个过程。从广义上来说，它是一种确保写入网络中节点的事务保持同步、不变，并防止网络遭受多种(但不是所有)攻击的手段。</p><p id="d99c" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">为了实现这些目标，达成共识的过程遵循四个步骤:</p><ol class=""><li id="b169" class="ll lm hu ji b jj jk jn jo lf ln lh lo lj lp kd lq lr ls lt dt translated">每个节点创建它想要记录的事务。</li><li id="54a5" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd lq lr ls lt dt translated">数据在节点之间共享(一个明显且关键的步骤)。</li><li id="6a83" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd lq lr ls lt dt translated">对有效交易的顺序达成共识。</li><li id="96e9" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd lq lr ls lt dt translated">节点更新它们的事务以反映共识结果。</li></ol><p id="260c" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">在现实中，这些步骤可以在几秒或几分钟内完成；比特币大概需要10分钟。目标是在不破坏共识的情况下尽快进入第四步。</p><h1 id="4a09" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">共识算法和协议</h1><p id="a01c" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">现在你对共识有了一个大致的了解，让我进一步定义两个与共识相关的概念——协议和算法。这两个概念将帮助您理解如何达成共识，以及任何DLT实现的组成部分。</p><p id="57e7" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><strong class="ji hv">共识协议</strong></p><p id="fba1" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">协议是管理系统如何运行的一组规则。这些规则确定了不同部分的基本功能、它们如何相互作用，以及健壮实现所必需的条件。</p><p id="6e3a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">协议的不同部分对顺序或时间顺序并不敏感——哪个部分先开始并不重要。方案也没有告诉系统如何产生结果。它没有目标，也没有产出。</p><p id="538d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">就其工作原理而言，它就像一个汽车发动机。</p><p id="c24e" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><strong class="ji hv">共识算法</strong></p><p id="cd73" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">共识算法与每个节点为达成共识而遵循的规则(数学)相关。这些算法描述了需要执行的步骤。例如，赌注证明算法可以定义规则，使得通过随机选择、赌注或年龄的各种组合来选择下一个块的创建者。</p><p id="c70f" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">共识协议是一组确定系统如何达成共识的规则，与此不同，算法是一组产生输出或结果的指令。它可以是简单的脚本，也可以是复杂的程序。</p><p id="8060" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">指令的顺序是至关重要的，算法规定了这个顺序。它告诉系统做什么来达到预期的结果。它可能事先不知道结果是什么，但它知道自己想要一个。</p><p id="bb4a" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">如果共识协议可以比作汽车引擎，那么共识算法可以比作汽车驾驶员的动作。</p><p id="b909" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">正如<a class="ae ke" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">区块链</a>和加密货币专家诺埃尔·艾奇逊在2016年的一篇文章中解释的那样:</p><ul class=""><li id="b39c" class="ll lm hu ji b jj jk jn jo lf ln lh lo lj lp kd me lr ls lt dt translated">协议是决定系统如何运行的一组规则。</li><li id="355e" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd me lr ls lt dt translated">算法告诉系统该做什么。</li><li id="1e32" class="ll lm hu ji b jj lu jn lv lf lw lh lx lj ly kd me lr ls lt dt translated">协议是。算法可以。</li></ul><h1 id="7b6d" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">为什么共识对您的业务至关重要</h1><p id="1f33" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated">用以太坊创始人Vitalik Buterin的话说，共识算法的目的是“允许根据一些特定的状态转换规则安全地更新状态，其中执行状态转换的权利在一些经济集合中分配”。</p><p id="825d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">人们也经常声称一种共识比另一种要好。但是你现在知道了，不同的情况有不同的解决方案。</p><p id="749b" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">总的来说，共识是一个在不可信节点的分布式网络中促进同步的过程。在未来，这将允许我们构建去中心化的应用——无论是私有的(即企业使用)还是公共的。</p><p id="06b7" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated">在以后的文章中，我将解释和比较不同类型的共识(算法)。</p><h1 id="481b" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">有用的参考资料</h1><p id="3e13" class="pw-post-body-paragraph jf jg hu ji b jj ld jl jm jn le jp jq lf lg jt ju lh li jx jy lj lk kb kc kd hn dt translated"><a class="ae ke" rel="noopener" href="/hashgraph/i-want-your-vote-oh-wait-i-already-know-it-e1faa50b31ad">我需要你的投票！(哦等等我已经知道了)</a></p><p id="924d" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" rel="noopener" href="/@pavelkravchenko/consensus-explained-396fe8dac263">共识解释</a></p><p id="a6a3" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" href="https://hackernoon.com/consensus-mechanisms-explained-pow-vs-pos-89951c66ae10" rel="noopener ugc nofollow" target="_blank">解释共识机制:PoW vs. PoS </a></p><p id="099b" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" href="https://media.consensys.net/blockchain-vs-distributed-ledger-technologies-1e0289a87b16" rel="noopener ugc nofollow" target="_blank">区块链与分布式账本技术</a></p><p id="a443" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" href="https://www.cs.cornell.edu/home/rvr/papers/icdcn08.pdf" rel="noopener ugc nofollow" target="_blank">共识的基石</a></p><p id="81aa" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" href="http://www.fintechblue.com/2016/08/difference-algorithm-protocol-matter/" rel="noopener ugc nofollow" target="_blank">算法和协议有什么区别，为什么有关系？</a></p><p id="a664" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" href="http://poseidon.it.usyd.edu.au/~gramoli/web/doc/pubs2/Blockchain2Byzantine.pdf" rel="noopener ugc nofollow" target="_blank">从区块链共识回到拜占庭共识</a></p><p id="903b" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq lf js jt ju lh jw jx jy lj ka kb kc kd hn dt translated"><a class="ae ke" rel="noopener" href="/all-things-ledger/the-byzantine-generals-problem-168553f31480">拜占庭将军的问题</a></p><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="mf mg l"/></div></figure></div></div>    
</body>
</html>