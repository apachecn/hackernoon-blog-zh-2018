<html>
<head>
<title>Why you need Null Object Pattern and how to implement it</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么需要空对象模式以及如何实现它</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/why-you-need-null-object-pattern-and-how-to-implement-it-16a96b04125f?source=collection_archive---------7-----------------------#2018-05-02">https://medium.com/hackernoon/why-you-need-null-object-pattern-and-how-to-implement-it-16a96b04125f?source=collection_archive---------7-----------------------#2018-05-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/d3d0228d8ae26e2369326a430184f21b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rTOh7RQOMTkyeyJHIuTG1Q.jpeg"/></div></div></figure><p id="cf16" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">合著:</em> <a class="ae kb" href="https://www.linkedin.com/in/rexhepkqiku/" rel="noopener ugc nofollow" target="_blank"> <em class="ka">雷杰普</em> </a></p><p id="df1e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">外面有许多编程语言和框架，准备用来解决问题。尽管我们可能被要求解决数十亿个问题，但其中通常有一些共同的主题。正如我们通常试图解决业务问题一样，我们也希望提高工作质量。这样，我们就有了<em class="ka">设计模式</em>，它们是处理特定情况的一些最佳方式的抽象。</p><p id="ab4f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过唯一标识符查找表的元素是我们经常做的事情，为此我们可能需要考虑实现<em class="ka">空对象模式</em>。</p><p id="0d28" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这种模式通过提供一个指示缺少对象的替换来处理缺少对象的情况。在大多数面向对象的语言中，比如Java或C#，引用可能根本不指向任何对象。这样，我们需要检查我们是否有空引用，在那之后我们面对主要的错误之前。</p><p id="b9ab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们举一些例子来进一步说明这种模式。我们将通过一个非常简单的例子来使用C#:</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="kg kh l"/></div></figure><p id="29ce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">根据定义，我们总是期望接待一个<em class="ka">人</em>。实际上，我们可能经常遇到这种情况:这个<em class="ka"> personId </em>不是我们的<em class="ka"> Persons </em>表中任何元素的Id。在这种情况下，许多开发人员的<em class="ka">解决方案可能是:</em></p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="kg kh l"/></div></figure><p id="6898" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这不是一个好的实现。当我们找不到一个<em class="ka">人</em>时，我们将得到一个<em class="ka">空值</em>，但我们实际上是在寻找一个<em class="ka">人</em>。</p><p id="4238" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个<em class="ka"> null </em>结果与我们方法的名称不匹配。如果我们有一个特例，我们还想返回空值，那么我们必须将该方法重命名为<em class="ka">GetPersonByIdOrReturnNull</em>，这对调用该方法的客户端来说更有意义。</p><p id="6ea1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这种情况下可能发生的另一个问题是，当我们必须获得返回对象的属性时，例如:<em class="ka"> person。名称</em>。这是<em class="ka">的一个著名错误。NET </em>开发者:<em class="ka">对象引用未设置为对象</em>的实例，或者<em class="ka"> NullPointerException </em>，如果类似的语法将在Java中实现。</p><p id="5efe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于上述情况，更好的解决方案可能是:</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="kg kh l"/></div></figure><p id="17de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这种情况下，我们使用了<em class="ka">空对象模式</em>，它允许您返回一个<em class="ka"> Person </em>对象，但是它的属性故意保留为空，例如:</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="kg kh l"/></div></figure><p id="e03c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这种模式的另一个好的实现如下:</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="kg kh l"/></div></figure><p id="6b54" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这种情况下，我们使用用户定义的异常。我们抛出并捕捉特定的异常，以此来更好地控制我们的应用程序，并尽可能避免出现<em class="ka"> NullReferenceException </em>的情况。</p><p id="a00c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">抛出我们自己的特定异常可以帮助我们有更多的描述性错误，这可以在我们试图调试和解决问题时节省我们大量的时间。我们很快就能对我们面临的问题有一个更好的了解。</p><p id="a73e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Ruby on Rails中的ActiveRecord模块已经包含了该模式的一个简单实现，它是Active Record模式的一个实现，Active Record模式本身是一个对象关系映射系统的描述。也就是说，当你通过一个主键搜索一个特定的对象时，你会得到一个异常。</p><p id="7675" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Ruby on Rails的创始人David Heinemeier Hansson在《用Rails进行敏捷Web开发<a class="ae kb" href="https://www.amazon.com/dp/1934356166/" rel="noopener ugc nofollow" target="_blank"><em class="ka"/></a>一书中解释了这一点:</p><p id="56df" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当你使用主键驱动的查找器时，你在寻找一个特定的记录。你希望它存在。对Person.find(5)的调用基于我们对people表的了解。我们需要id为5的行。如果这个调用不成功——如果id为5的记录被销毁了——我们就处于异常情况。这要求引发异常，所以Rails引发RecordNotFound。</p><p id="a640" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">另一方面，使用标准进行搜索的搜索者正在寻找匹配。因此，Person.find(:first，:conditions= &gt; "name='Dave ' ")相当于告诉数据库(作为一个黑盒)"给我第一个名为Dave的Person行。"这展示了一种截然不同的检索方法；我们不能预先确定我们会得到一个结果。结果集完全有可能是空的。因此，在查找一行的查找器返回nil，而在查找多行的查找器返回空数组的情况下，这是自然的、非异常的响应。</em></p><p id="e0ab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">既然你已经阅读了这篇关于这种模式的文章，记住不要让NULL使你的应用程序成为傻瓜！</p></div><div class="ab cl ki kj hc kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hn ho hp hq hr"><p id="c04d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">在</em><a class="ae kb" href="https://www.linkedin.com/in/rexhepkqiku/" rel="noopener ugc nofollow" target="_blank"><em class="ka">LinkedIn</em></a><em class="ka">上找到合著者。</em></p></div></div>    
</body>
</html>