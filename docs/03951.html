<html>
<head>
<title>Why it’s Important to Keep Your Containers Small and Simple</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么保持容器小而简单很重要</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/why-its-important-to-keep-your-containers-small-and-simple-618ced7343a5?source=collection_archive---------11-----------------------#2018-05-08">https://medium.com/hackernoon/why-its-important-to-keep-your-containers-small-and-simple-618ced7343a5?source=collection_archive---------11-----------------------#2018-05-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="4432" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用容器的一个很大的优点是便携性。一般来说，容器基图像的属性极大地影响了它的大小。然而，由于我们将容器映像与虚拟机映像进行比较，<a class="ae jp" href="https://www.aquasec.com/wiki" rel="noopener ugc nofollow" target="_blank">容器</a>成为了明显的赢家。这造成了容器大小无关紧要的错觉。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/c6ad14f5890b7b38d0cf9832a806f11d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tPzU3O1HHPz5Gus0."/></div></div></figure><p id="f74b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你有没有想过你的集装箱有多大，我们能通过几个因素把它们变小吗？你可能会争论这样做有什么大不了的。让我们找出答案。</p><blockquote class="kc kd ke"><p id="db29" class="ir is kf it b iu iv iw ix iy iz ja jb kg jd je jf kh jh ji jj ki jl jm jn jo hn dt translated">本文主要讨论减小容器尺寸的优势以及减小容器尺寸的可能方法。</p></blockquote><h1 id="096a" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">什么影响容器尺寸？</h1><p id="4647" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">容器尺寸增加的一个主要问题是我们使用默认的基本docker图像。这不仅使容器变得很大，而且还可能在容器映像和应用程序(如果应用程序在本地安装它们)中复制依赖项。</p><p id="67a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一个原因是，如果我们在运行的应用程序的容器中使用构建工具。这增加了容器的大小，并安装了应用程序运行时可能不需要的依赖项。如果你真的关心它的大小，这些容器图像中的一些可以通过几个因素缩小。</p><h1 id="4ec3" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">缩小尺寸</h1><p id="aaac" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">使用<a class="ae jp" href="https://en.wikipedia.org/wiki/Alpine_Linux" rel="noopener ugc nofollow" target="_blank"> Alpine Linux </a>作为基本映像使得容器比大多数发行版的基本映像更小(~5MB)，这通常导致更小的映像大小。从一个更小的基础映像(如Alpine)开始，构建只包含所需依赖项的基础映像，可以使应用程序容器的大小最小化，并使依赖项在您的注意范围之内。</p><p id="dde6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，在构建容器映像和编译代码时，您可以使用不同的容器，或者在运行的容器之外执行构建过程，并将编译/解释的代码复制到应用程序容器的所需目录中。这样就有可能用最少的工具来保存应用程序容器(不需要编译器等)。).</p><blockquote class="kc kd ke"><p id="90ae" class="ir is kf it b iu iv iw ix iy iz ja jb kg jd je jf kh jh ji jj ki jl jm jn jo hn dt translated">理论上，您可以使用功能丰富的容器映像作为基础，并删除不需要的依赖项。然而，这可能会导致许多挑战，特别是在为较新版本的安全和各种更新更新映像时，这可能会导致不稳定。</p></blockquote><h1 id="005f" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">为什么它很重要？</h1><p id="6b2f" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">减小容器的尺寸有几个优点。接下来的小节将讨论这些优点，总体来说，如果您正在构建一个容器集群，记住这些要点是很重要的。</p><h1 id="95b8" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">安全性</h1><p id="9da4" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">一般来说，使用较小的容器映像会带来较少数量的库。这减少了对容器的攻击面。此外，当我们使用这种方法构建图像时，我们对内部发生的事情更加透明。</p><blockquote class="kc kd ke"><p id="29d7" class="ir is kf it b iu iv iw ix iy iz ja jb kg jd je jf kh jh ji jj ki jl jm jn jo hn dt translated">当我们在Docker Hub中查看容器映像的<a class="ae jp" href="https://docs.docker.com/v17.12/docker-cloud/builds/image-scan/" rel="noopener ugc nofollow" target="_blank">扫描日志</a>时，很明显，由于更多的软件漏洞，更大的映像更容易生病。</p></blockquote><h1 id="8146" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">性能和效率</h1><p id="5c17" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">更小的集装箱，使他们移动更容易和更快。这提高了构建和部署过程的性能，因为需要将更少的容器映像数据拉至正在运行的容器集群。一般来说，较小的容器在利用大部分磁盘空间和内存方面也很有效。</p><h1 id="2507" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">可维护性</h1><p id="5bbf" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">这是小容器的另一个优点。当您使用基于Alpine的容器映像并安装依赖项时，您可以完全控制以后对它们的修改，因为您的应用程序知道修改的配置。由于安装了较少的依赖项和库，这也简化了这些库的管理，使它们与操作系统补丁等保持同步。</p><h1 id="7005" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">结论</h1><p id="9737" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">容器大小在许多方面影响应用程序的生命周期。使它们变小可以提高容器的安全性、性能、效率和可维护性。尽管不一定要把容器做得很小，但至少尝试使用像Alpine这样的最小基础映像来构建应用程序容器，会大大有助于理解各个容器依赖关系的细节。这为开发人员建立了对内部运行的软件的信心，以便调查潜在的问题并在将来对它们进行优化。</p></div></div>    
</body>
</html>