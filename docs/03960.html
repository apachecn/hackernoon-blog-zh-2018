<html>
<head>
<title>Understanding Hyperledger Composer Query Language</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Hyperledger Composer查询语言</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/understanding-hyperledger-composer-query-language-541bb1c48f95?source=collection_archive---------20-----------------------#2018-05-08">https://medium.com/hackernoon/understanding-hyperledger-composer-query-language-541bb1c48f95?source=collection_archive---------20-----------------------#2018-05-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="4601" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://hackernoon.com/tagged/hyperledger-composer" rel="noopener ugc nofollow" target="_blank"> Hyperledger Composer </a>是一款非常受欢迎的<a class="ae jp" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">区块链</a>应用开发，受欢迎主要是因为它的易用性。了解更多。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/581b3c515b53ac665f3d8eb3edfcb8ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFA2GTKnKwIqjU_JEy1ttA.png"/></div></div></figure><p id="18c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">其中一个关键组件是类似SQL语言的查询语言。在本文中，我将介绍如何为您的区块链应用程序构建查询。</p><blockquote class="kc kd ke"><p id="f29f" class="ir is kf it b iu iv iw ix iy iz ja jb kg jd je jf kh jh ji jj ki jl jm jn jo hn dt translated"><em class="hu">在当前版本的Hyperledger Fabric中，不支持限制和跳过，在Composer中也是如此。</em></p></blockquote><h1 id="ee42" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">数据模型</h1><p id="da98" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated">对于这个例子，我将考虑下面的数据模型作为我们的应用程序的数据模型。</p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="69a4" class="lr kk hu ln b fv ls lt l lu lv">enum UserRole {<br/>  o ADMIN<br/>  o MODERATOR<br/>  o USER<br/>}<br/>participant User identified by id {<br/>  o String id<br/>  o String name<br/>  o UserRole role<br/>  o String[] hobbies<br/>  --&gt; Organization organization<br/>}</span><span id="7a44" class="lr kk hu ln b fv lw lt l lu lv">participant Organization identified by id {<br/>  o String id<br/>  o String name<br/>}</span><span id="8c0e" class="lr kk hu ln b fv lw lt l lu lv">asset Product identified by id {<br/>  o String id<br/>  o String name<br/>  o String description<br/>  o Double quantity<br/>  o DateTime createdAt<br/>  --&gt; Organization owner<br/>}</span></pre><h1 id="3441" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">问题</h1><p id="2fbc" class="pw-post-body-paragraph ir is hu it b iu lh iw ix iy li ja jb jc lj je jf jg lk ji jj jk ll jm jn jo hn dt translated"><strong class="it hv">根据角色获取用户。</strong>为了获得基于角色的用户列表，我们可以使用where过滤器</p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="199f" class="lr kk hu ln b fv ls lt l lu lv">query Q1 {<br/>    description: "Select all users based on role"<br/>    statement:<br/>        SELECT org.acme.User<br/>            WHERE (role == "ADMIN")<br/>}</span></pre><p id="9d5d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你也可以从下面的参数中给出数值</p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="1823" class="lr kk hu ln b fv ls lt l lu lv">query Q1 {<br/>    description: "Select all users based on role"<br/>    statement:<br/>        SELECT org.acme.User<br/>            WHERE (role == _$role)<br/>}</span></pre><p id="1d62" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">根据组织获取用户</strong>要根据相关或关联文件获取节点，您可以使用以下类型的where</p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="0420" class="lr kk hu ln b fv ls lt l lu lv">query Q2 {<br/>    description: "Select all users of an organization"<br/>    statement:<br/>        SELECT org.acme.User<br/>            WHERE (organization == "resource:org.acme.Organization#1")<br/>}</span></pre><p id="90d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">获取数量超过最小阈值的产品</strong>我们可以在整数或双精度值中使用大于或小于运算符，如下所示。</p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="f6c9" class="lr kk hu ln b fv ls lt l lu lv">query Q3 {<br/>    description: "Select all products above the minimum quantity"<br/>    statement:<br/>        SELECT org.acme.Product<br/>            WHERE (quantity &gt; _$minimumThreshold)<br/>}</span></pre><p id="957e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">使用AND运算符</strong></p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="2262" class="lr kk hu ln b fv ls lt l lu lv">query Q4 {<br/>    description: "Select all products above the minimum quantity of an organization"<br/>    statement:<br/>        SELECT org.acme.Product<br/>            WHERE ((quantity &gt; _$minimumThreshold) AND (owner == _$organization))<br/>}</span></pre><p id="91c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">操作员使用订单</strong></p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="44af" class="lr kk hu ln b fv ls lt l lu lv">query Q5 {<br/>    description: "Select all products above the minimum quantity of an organization and order by quantity"<br/>    statement:<br/>        SELECT org.acme.Product<br/>            WHERE ((quantity &gt; _$minimumThreshold) AND (owner == _$organization))<br/>                ORDER BY quantity<br/>}</span></pre><p id="1d27" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">使用包含运算符</strong></p><pre class="jr js jt ju fq lm ln lo lp aw lq dt"><span id="d910" class="lr kk hu ln b fv ls lt l lu lv">query Q6 {<br/>    description: "Select all users based on givien hobbies"<br/>    statement:<br/>        SELECT org.acme.User<br/>            WHERE (hobbies CONTAINS ['driving', 'swimming']<br/>}</span></pre><p id="17de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">大多数情况下，你可以用上面提到的操作符完成所有的查询，而且我认为将来会有更复杂的查询。</p></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><figure class="jr js jt ju fq jv fe ff paragraph-image"><a href="https://www.skcript.com/blockchain/?hackernoon"><div class="fe ff me"><img src="../Images/d0dd11b4bcf861a01e17e452f563b0a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*82dMP0l8xQF1kY0E.png"/></div></a></figure><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="mf mg l"/></div></figure></div></div>    
</body>
</html>