<html>
<head>
<title>[Laravel tips] How to temporarily change a laravel environment variable without updating the .env file</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何临时更改Laravel环境变量而不更新？环境文件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/laravel-tips-how-to-temporarily-change-a-laravel-environment-variable-without-updating-the-env-ebc3b42d1804?source=collection_archive---------13-----------------------#2018-05-10">https://medium.com/hackernoon/laravel-tips-how-to-temporarily-change-a-laravel-environment-variable-without-updating-the-env-ebc3b42d1804?source=collection_archive---------13-----------------------#2018-05-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="490d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">想象以下场景:您正在开发一个laravel应用程序，它将一些作业分派到一个队列中。您在日志文件中注意到一个特定的作业抛出了一个异常，但是您不能直接调试它(例如用<code class="eh jp jq jr js b">dd()</code>),因为这个作业被其他地方的一个工人使用了。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div class="fe ff jt"><img src="../Images/f4ef8f94f5a52c77a5d01704b47dc4a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*Uq_bnawkcZNldzii."/></div></figure><p id="059c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">调试这个问题的一种方法是将您的<code class="eh jp jq jr js b">.env</code>文件中的<code class="eh jp jq jr js b">QUEUE_DRIVER</code>环境变量改为<code class="eh jp jq jr js b">sync</code>，进行调试，然后在您完成后恢复更改。</p><p id="a355" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者假设您有一个测试数据库，您需要首先在其上运行迁移，并且您需要更新<code class="eh jp jq jr js b">.env</code>文件以首先使用测试数据库，运行迁移，然后恢复更改。</p><p id="f260" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如您所见，在这两种情况下，我们需要做的只是临时更新环境变量。通常，更新<code class="eh jp jq jr js b">.env</code>文件需要一些时间(您甚至可能需要清除配置或重启一些工作程序)。</p><p id="7f4b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">幸运的是，可以将一个环境变量传递给linux命令，这些变量将只用于当前的执行。</p><p id="18bf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在前面的示例中，我们要做的就是执行如下命令:</p><p id="37a1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jp jq jr js b">QUEUE_DRIVER=sync php artisan my-artisan-command-here</code></p><p id="70f3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以用tinker自己测试一下。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/ded859d53ddcd2c15c18104bb5c84335.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/0*WW51FMrop5pl_qKi."/></div></figure><p id="68d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您甚至可以像这样传递多个环境变量:</p><p id="7f24" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><code class="eh jp jq jr js b">QUEUE_DRIVER=sync DB_DATABASE=testing php artisan my-artisan-command-here</code></p><p id="9421" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如您所见，这并不是laravel特有的技巧，只要您发现自己需要临时更改环境变量，就可以使用它。</p><p id="9651" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我希望你会觉得这有用。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><a href="https://goo.gl/RDUt4v"><div class="fe ff fg"><img src="../Images/52bf9e84126f483254abfde8427668f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fh3jPIRkLQOFi35thK-fkQ.png"/></div></a></figure></div></div>    
</body>
</html>