<html>
<head>
<title>Microservices for Startups: An Interview with Ben Curtis of Honeybadger</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">初创公司的微服务:Honeybadger的本·柯蒂斯访谈</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/microservices-for-startups-an-interview-with-ben-curtis-of-honeybadger-f0cfef30d20a?source=collection_archive---------16-----------------------#2018-05-10">https://medium.com/hackernoon/microservices-for-startups-an-interview-with-ben-curtis-of-honeybadger-f0cfef30d20a?source=collection_archive---------16-----------------------#2018-05-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="52c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">这次采访是为我们的</em> <a class="ae jq" href="https://buttercms.com/books/microservices-for-startups/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">创业微服务</em> </a> <em class="jp">电子书做的。一定要去看看关于微服务的实用建议。感谢Ben的时间和投入！</em></p><figure class="js jt ju jv fq jw fe ff paragraph-image"><div class="fe ff jr"><img src="../Images/08772114c434564edcfd6fb6fff97014.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/0*OL_QYfdXGzQ3aPRq."/></div></figure><p id="a932" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jq" href="https://twitter.com/stympy?lang=en" rel="noopener ugc nofollow" target="_blank"> <em class="jp"> Ben Curtis </em> </a> <em class="jp">是</em><a class="ae jq" href="https://www.honeybadger.io/" rel="noopener ugc nofollow" target="_blank"><em class="jp">honey badger</em></a><em class="jp">的联合创始人，该公司为web开发人员处理生产监控，并提供零工具，360度覆盖错误、中断和服务降级。</em></p><p id="30dc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于上下文，您的工程团队有多大？您是否正在使用微服务，能否概述一下您是如何使用它们的？</p><p id="f9be" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的工程团队是整个公司——三个人。我们使用了一些微服务。一个处理所有传入的API流量，查找客户应用程序报告的错误。另一个处理从Heroku应用程序接收logplex流量，记录从Heroku平台报告的错误。</p><p id="1669" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">你是从整体开始，后来采用微服务的吗？如果是，采用微服务的动机是什么？</strong></p><p id="f152" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们从Rails monolith开始，在入站API流量开始淹没我们的应用时，我们采用了微服务。很明显，我们需要以不同的方式扩展它们，并且我们可以从处理API流量的轻量级应用程序中受益。分离微服务并不太复杂，因为我们已经通过使用作业队列隔离了monolith中的API代码。</p><p id="0685" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为一个团队/工程组织，你是如何处理微服务这个话题的？</p><p id="e27e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">没有太多调整的必要——我们有一个清晰的感觉，简单地将一块功能从我们的monolith移动到一个单独的应用程序，该应用程序具有实现微服务的单一职责。</p><p id="9260" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在技术选择上有多大的自由度？你们是否都同意坚持使用一个堆栈，或者是否有尝试新堆栈的灵活性？</p><p id="77d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在考虑技术选择时，我们给自己100%的自由。我们在两三项技术上做了突破，但最终我们选择不使用，主要是因为不想让我们的部署故事变得复杂。换句话说，虽然我们在创建微服务时考虑过将新语言和新方法引入我们的技术体系，并且我们确实在不同的体系上部署了生产微服务，但我们决定坚持使用我们熟悉的技术，以免增加我们运营体系的复杂性。我们会定期重新审视这个决定，看看采用新技术是否会带来潜在的性能或可靠性优势，但到目前为止，我们还没有做出改变。</p><p id="a427" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你有没有把一个单一的应用程序分解成更小的微服务？如果是的话，你能给我们介绍一下这个过程吗？</p><p id="9974" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们研究了哪些功能在逻辑上是独立于其他功能的。在我们的案例中，很明显，数据接收可以而且应该与客户与存储在我们数据库中的数据的交互完全分离。在这一点上，很简单，从我们的monolith中删除处理API端点的代码，并将该代码放入一个单独的Rack应用程序中。我们还将相关测试从一个应用程序转移到另一个应用程序。我们在一开始做出的一个关键决定是，新的应用程序不能访问主数据库。它需要能够完全独立地运行，这将允许我们的API继续接收数据，即使我们的主数据库关闭或我们的主服务不可用。我们非常依赖Redis，它不仅用于存储作业队列，还作为微服务工作所需的主数据库数据的缓存层。</p><p id="14a7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">微服务对你的开发过程有什么影响？您的运营和部署流程？</strong></p><p id="e179" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的开发流程没有受到太大影响。当从一个代码库转移到另一个代码库时，我们确实有一些额外的上下文切换成本，但我们的monolith比我们的微服务更新得更频繁，所以即使这样也是最小化的。我想我们得到的教训是，根据业务逻辑的变化来设定微服务的边界是有帮助的。如果您的代码中有一个区域几乎从不改变，但另一个区域经常改变，那么使用这个区域作为可以拆分到微服务中的指示可能是有意义的。理想情况下，您应该能够创建您的微服务，然后能够在一段较长的时间内运行它，而无需进行太多更改。</p><p id="7ec6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当我们拆分我们的微服务时，我们评估了其他编程语言(用Elixir和Go代替Ruby)和部署策略(用Docker或蓝/绿EC2实例代替Capistrano)。我们甚至和Elixir和Docker一起去生产了一段时间。但最终，我们决定不在我们的运营和部署流程中引入额外的复杂性，我们最终使用Capistrano部署了Rack应用程序。然而，我们确实将微服务隔离到单独的自动扩展组中，这些组具有自己的负载平衡器，并且我们用于配置实例的角色也不同，因此即使使用相同的堆栈，我们仍然增加了一些操作负担。</p><p id="25d9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">微服务对您的测试方式有何影响？</strong></p><p id="3b02" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们还没有看到对我们测试方法的影响。每个微服务都有测试，就像我们的monolith一样，但是我们没有跨服务测试，因为它们彼此之间不直接对话。因为数据只在一个方向上流动，并且因为我们使用消息总线来传输数据，所以我们只是隔离地测试我们的微服务。</p><p id="b627" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">微服务对安全性和控制数据访问有何影响？</strong></p><p id="c795" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">安全性和数据访问对我们来说不是问题，因为我们的微服务只接收数据，并与系统的其余部分断开连接。</p><p id="b585" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">再次感谢Ben的时间和投入！这次采访是为我们的</em> <a class="ae jq" href="https://buttercms.com/books/microservices-for-startups/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">创业微服务</em> </a> <em class="jp">电子书做的。一定要去看看关于微服务的实用建议。</em></p></div><div class="ab cl jz ka hc kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="hn ho hp hq hr"><p id="4ace" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">本文原载于</em><a class="ae jq" href="https://buttercms.com/blog/microservices-for-startups-an-interview-with-ben-curtis-of-honeybadger" rel="noopener ugc nofollow" target="_blank"><em class="jp">buttercms.com</em></a><em class="jp">。这是《创业公司的微服务》一书</em> <a class="ae jq" href="https://buttercms.com/books/microservices-for-startups/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">采访系列的一部分。新章节一发布，你就可以通过电子邮件收到。</em></a></p><p id="6ffc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你喜欢这篇文章，请在下面鼓掌，帮助它传播！如需更多类似内容，请关注我们的<a class="ae jq" href="https://twitter.com/ButterCMS" rel="noopener ugc nofollow" target="_blank"><em class="jp">Twitter</em></a><em class="jp">和</em> <a class="ae jq" href="https://buttercms.com/blog/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">订阅我们的博客</em> </a> <em class="jp">。</em></p><p id="775b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想在你的网站上添加一个博客或者内容管理系统，而又不想在Wordpress、 <a class="ae jq" href="https://buttercms.com/" rel="noopener ugc nofollow" target="_blank"> <em class="jp">上浪费时间，你应该试试黄油内容管理系统</em> </a> <em class="jp">。</em></p></div></div>    
</body>
</html>