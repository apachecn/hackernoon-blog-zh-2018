<html>
<head>
<title>3 easy steps to writing compound components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编写复合组件的3个简单步骤</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/3-easy-steps-to-writing-compound-components-5d4647b7bb7?source=collection_archive---------0-----------------------#2018-05-12">https://medium.com/hackernoon/3-easy-steps-to-writing-compound-components-5d4647b7bb7?source=collection_archive---------0-----------------------#2018-05-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="30e4" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">让我们深入到使用复合组件的干净React代码的世界。</h2></div><p id="2dd3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在React中实现了我的第一个复合组件之后，我正式对这种模式上瘾了。作为自称的这方面的专家(实际上我是从Ryan Florence和他的T2关于复合成分的演讲中学到的)，我将教你如何通过几个简单的步骤学习最好的高级反应模式。为什么？因为你值得拥有更好的代码库！</p><p id="fc11" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">此时你可能会想，这个人是谁？他不是<a class="ae kf" href="https://twitter.com/kentcdodds" rel="noopener ugc nofollow" target="_blank">肯特·c·多兹</a>，他写了<a class="ae kf" href="https://egghead.io/lessons/react-write-compound-components" rel="noopener ugc nofollow" target="_blank">关于复合成分的课程</a>。他不是我们敬爱的反应先知丹·阿布拉莫夫。嗯，我对你的回答是你是正确的！</p><figure class="kg kh ki kj fq kk"><div class="bz el l di"><div class="kl km l"/></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">You’re correct dancing horse for everyone!</figcaption></figure><p id="bfd3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">是的，我不是你曾经认识的人。但如果你真的想认识我，我叫史蒂文。可以在<a class="ae kf" href="https://twitter.com/stevennatera" rel="noopener ugc nofollow" target="_blank">推特</a>关注我。虽然我是一个无名小卒，但如果你对复合成分的想法感到兴奋，这就是你的指南。</p><p id="6f1f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">复合组件使您的JSX标记保持整洁。当逻辑隐藏在容器组件中时，您可以真正专注于表示。我第一次编写复合组件时，一个小时的编码过程变成了通宵编程。我忍不住重构了我的副业项目的整个代码库。</p><p id="5b15" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这6个小时里，我开发了一个心理指南，让你在设计组件时不再猜测。最棒的是，我在这里与你分享它，让你的代码库开心。</p><h1 id="8ce6" class="kr ks hu bd kt ku kv kw kx ky kz la lb ja lc jb ld jd le je lf jg lg jh lh li dt translated">化合物组分的3步指南</h1><p id="b739" class="pw-post-body-paragraph jj jk hu jl b jm lj iv jo jp lk iy jr js ll ju jv jw lm jy jz ka ln kc kd ke hn dt translated">好了，该是你写复合组件的无意义自由指南的时候了。今天，您将构建一个多步窗体向导。完成后，您将拥有一个干净的、可重用的表单向导，可以在任何React项目中使用。</p><p id="293d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">正如Ryan Florence曾经说过的，当您使用复合组件时，您必须记住这种模式是关于以编程方式传递属性的。如果你能理解这个概念，那么接下来就一帆风顺了。</p><h2 id="6f00" class="lo ks hu bd kt lp lq lr kx ls lt lu lb js lv lw ld jw lx ly lf ka lz ma lh mb dt translated">第一步。模仿你想要的JSX标记</h2><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="fe ff mc"><img src="../Images/77558dec4c9a01b3ac58a460cd71abad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aNYOuJkr90nGGdh16ydycA.png"/></div></div></figure><p id="bae5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您希望通过对相关组件进行分组来使JSX标记易于阅读。该方法是可扩展的，因为添加另一个步骤或按钮就像向相关组件组添加另一个组件一样简单。驱动底层基本组件的逻辑将来自上面的组件。步骤列表和按钮列表构成了相关组件的第一层。</p><p id="f0e5" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一个<strong class="jl hv">步骤</strong>呈现一个给定的组件，如果它是活动步骤的话。<strong class="jl hv">上一个</strong>如果可能的话后退一步。<strong class="jl hv">下一步</strong>如果可能的话向前移动一步。<strong class="jl hv">提交</strong>仅在最后一步显示提交信息。<strong class="jl hv">步骤列表</strong>和<strong class="jl hv">按钮列表</strong>向下传递属性，以确定在给定步骤上呈现哪些按钮以及哪个步骤是活动的。</p><h2 id="43fa" class="lo ks hu bd kt lp lq lr kx ls lt lu lb js lv lw ld jw lx ly lf ka lz ma lh mb dt translated">第二步。确定你的组件需要什么道具</h2><p id="b72f" class="pw-post-body-paragraph jj jk hu jl b jm lj iv jo jp lk iy jr js ll ju jv jw lm jy jz ka ln kc kd ke hn dt translated">从这里开始，您考虑每个容器组件需要什么道具。<strong class="jl hv">步骤列表</strong>需要确定当前步骤呈现给用户。使用当前步骤道具。<strong class="jl hv">按钮列表</strong>显示某些步骤上的<strong class="jl hv">上一步</strong>、<strong class="jl hv">下一步</strong>、<strong class="jl hv">提交</strong>按钮。活动步骤和总步骤有助于确定何时显示每个按钮。您需要一个提交功能，因为这是一个表单。现在你有了道具，就大功告成了！不完全是。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="fe ff mj"><img src="../Images/09fc196145a95ff67a97aed5f039f8c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9oYbJ0TYSbQru5TLQKB9aA.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Don’t do this! We want to pass props indirectly.</figcaption></figure><p id="b97b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">考虑到你的道具，你可能会想把你的道具直接写在你的组件上，就像你上面看到的那样，但是有一个更干净的方法来传递道具。比较好的方式是间接传递你的道具。你怎么问？React API有几个有用的方法，可以用来从现有组件创建新组件。这就是<a class="ae kf" href="https://reactjs.org/docs/react-api.html#reactchildren" rel="noopener ugc nofollow" target="_blank">的反应。孩子</a>和<a class="ae kf" href="https://reactjs.org/docs/react-api.html#cloneelement" rel="noopener ugc nofollow" target="_blank">反应过来，cloneElement </a>就有用了。</p><h2 id="752f" class="lo ks hu bd kt lp lq lr kx ls lt lu lb js lv lw ld jw lx ly lf ka lz ma lh mb dt translated">第三步。用React API连接您的组件</h2><p id="edb0" class="pw-post-body-paragraph jj jk hu jl b jm lj iv jo jp lk iy jr js ll ju jv jw lm jy jz ka ln kc kd ke hn dt translated">React最好的部分是组件是一个常规对象。与任何对象一样，您可以操纵它们来传递不同的属性和功能，而不必直接注释JSX组件。<strong class="jl hv">做出反应。Children </strong>将允许你迭代一个组件的子组件。React.cloneElement 将允许你从一个现有的组件元素中创建一个带有附加属性的新组件。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="fe ff mk"><img src="../Images/b88a73459249bc11296e1971e79c82b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vhwFiNiJOtzru2IxXKadKw.png"/></div></div></figure><p id="d3d4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里你使用<strong class="jl hv"> React迭代<strong class="jl hv">表单向导</strong>中的子元素。儿童</strong>。当你迭代时，使用<strong class="jl hv"> React.cloneElement </strong>创建一个新的组件，它带有你想要传递到组件树的属性。</p><p id="2414" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">下一步上的<strong class="jl hv">和上一步</strong>上的<strong class="jl hv">前进功能由<strong class="jl hv">下一步</strong>和<strong class="jl hv">上一步</strong>按钮使用。<strong class="jl hv"> handleSubmit </strong>由<strong class="jl hv"> Submit </strong>使用。我们将这些道具添加到新的<strong class="jl hv">按钮列表</strong>组件中，以向下传递。<strong class="jl hv"> activeStepIndex </strong> prop帮助<strong class="jl hv"> Step </strong>组件和表单按钮确定它们是否应该呈现。</strong></p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="fe ff ml"><img src="../Images/80b2c6b47bcdce18e40f1c3e7a63c32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DP1VHUb6878aGtSF_J055g.png"/></div></div></figure><p id="2896" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv"> </strong>新的<strong class="jl hv">步骤</strong>组件将从<strong class="jl hv">步骤列表</strong>中获得一个<strong class="jl hv"> isActive </strong>道具，以知道何时渲染一个步骤。<strong class="jl hv">按钮列表</strong>组件中的功能和状态属性会转到需要它们的相应按钮。我们的表单在第一步隐藏了“上一步”按钮，在最后一步隐藏了“下一步”按钮，在最后一步显示了“提交”按钮。在这些外壳之外，按钮是可见的。</p><figure class="kg kh ki kj fq kk fe ff paragraph-image"><div role="button" tabindex="0" class="md me di mf bf mg"><div class="fe ff mm"><img src="../Images/3e02dee50e5d747a46defca30838bfc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JHAR-mxvVY-kelpG1Qpe1Q.png"/></div></div></figure><p id="5359" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，使用传递给基本组件的道具来确定应该呈现什么。看，简单！算是吧。我承认有很多事情需要你去思考。但最棒的是，奥普拉和我都是水瓶座(水瓶座的复数是什么？水瓶座？)因此:你得到一个演示，你得到一个演示，每个人都得到一个演示！这是指南的<a class="ae kf" href="https://codesandbox.io/s/n4yl5n9vp0" rel="noopener ugc nofollow" target="_blank">演示。</a></p><p id="e67e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在React 16.3中，你可以使用<a class="ae kf" href="https://reactjs.org/docs/context.html#when-to-use-context" rel="noopener ugc nofollow" target="_blank">上下文API </a>使表单向导在属性方面更加灵活。因为你的应用程序只有几层深度，你应该遵循文档中给出的建议。当您在多个层次上将相同的数据传递给许多组件时，请使用上下文。</p><p id="31e3" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你喜欢这个dope techno指南，那么<a class="ae kf" href="http://eepurl.com/duxX8b" rel="noopener ugc nofollow" target="_blank">加入dope Technophiles时事通讯</a>，在那里我们分享我们正在制造的Dope狗屎。现在继续传播复合组件的概念。与朋友分享这篇文章，让他们吸毒！</p><p id="850a" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">干杯！<br/>2018年5月12日</p></div><div class="ab cl mn mo hc mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="hn ho hp hq hr"><p id="9827" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">👋🏽嗨！我是史蒂文·纳特拉。在Twitter上关注我<a class="ae kf" href="https://twitter.com/stevennatera" rel="noopener ugc nofollow" target="_blank"> @StevenNatera </a>。我积极参与了<a class="ae kf" href="https://github.com/nodox" rel="noopener ugc nofollow" target="_blank">开源社区</a>，特别是<a class="ae kf" href="https://www.gatsbyjs.org/contributors/steven-natera" rel="noopener ugc nofollow" target="_blank"> GatsbyJS </a>。我喜欢写代码、初创公司、React和Kubernetes。</p></div></div>    
</body>
</html>