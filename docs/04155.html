<html>
<head>
<title>Deploying Angular Universal v6+ with Firebase ğŸš€ ğŸ”¥</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Firebaseéƒ¨ç½²Angular Universal v6+ğŸš€ ğŸ”¥</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/deploying-angular-universal-v6-with-firebase-c86381ddd445?source=collection_archive---------1-----------------------#2018-05-16">https://medium.com/hackernoon/deploying-angular-universal-v6-with-firebase-c86381ddd445?source=collection_archive---------1-----------------------#2018-05-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/88a9f18c5ad7cc45cbdf919dfc974ce3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kwBUDwz922s5nXIqg1MyQ.png"/></div></div></figure><p id="5e10" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å…è´£å£°æ˜:è¿™ç¯‡åšæ–‡å°†æ˜¯ä¸€ä¸ªæœ‰é‡ç‚¹çš„åˆ†æ­¥æŒ‡å—ï¼Œä»‹ç»å¦‚ä½•ä½¿ç”¨<a class="ae ka" href="https://hackernoon.com/tagged/firebase" rel="noopener ugc nofollow" target="_blank"> Firebase </a>æ‰˜ç®¡æ¥éƒ¨ç½²<a class="ae ka" href="https://hackernoon.com/tagged/angular" rel="noopener ugc nofollow" target="_blank"> Angular </a> Universal Appã€‚å¯¹äºä»»ä½•å…³äºAngular Universalå’ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“çš„è§£é‡Šï¼ŒAngularåœ¨ä»–ä»¬çš„ç½‘ç«™ä¸Šæœ‰ä¸€ä¸ªå¾ˆæ£’çš„æ–‡æ¡£ã€‚</p><p id="9f52" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½ ä¹Ÿå¯ä»¥åœ¨<a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase" rel="noopener ugc nofollow" target="_blank"> Github </a>ä¸Šæ‰¾åˆ°æºä»£ç ã€‚</p><h1 id="7159" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">è¦æ±‚</h1><ul class=""><li id="c274" class="kz la hu je b jf lb jj lc jn ld jr le jv lf jz lg lh li lj dt translated">node.js(æˆ‘åœ¨æœ¬æ•™ç¨‹ä¸­ä½¿ç”¨çš„æ˜¯8.11.1ç‰ˆ)</li><li id="d7f2" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated">Angular 6+(æˆ‘å†™è¿‡ä¸€ç¯‡<a class="ae ka" href="https://hackernoon.com/deploy-angular-universal-w-firebase-ad70ea2413a1" rel="noopener ugc nofollow" target="_blank">ç±»ä¼¼æ–‡ç« </a>éƒ¨ç½²Angular &lt; v6)</li></ul><h1 id="de19" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">ç¬¬ä¸€éƒ¨åˆ†:è®¾ç½®è§’åº”ç”¨ğŸ› </h1><h2 id="f73b" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">1.å®‰è£…å…¨å±€ä¾èµ–é¡¹</h2><p id="5a7d" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">æˆ‘ä»¬å°†åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨<code class="eh mg mh mi mj b">@angular/cli</code>å’Œ<code class="eh mg mh mi mj b">firebase-tools</code>æ¥æ„å»ºå’Œéƒ¨ç½²æ‚¨çš„åº”ç”¨ç¨‹åºã€‚</p><ul class=""><li id="744c" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated"><a class="ae ka" href="https://github.com/angular/angular-cli" rel="noopener ugc nofollow" target="_blank"> @angular/cli â‰¥ 6.0.0 </a></li><li id="4f24" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated"><a class="ae ka" href="https://github.com/firebase/firebase-tools" rel="noopener ugc nofollow" target="_blank">firebase-tools 3 . 18 . 4ç‰ˆ</a></li></ul><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/768cd57fdecb31802f9ce4a779308a45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aQQd6UtXpwar-jbMF3pUEw.png"/></div></div></figure><h2 id="a7ba" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">2.åˆ›å»ºæ–°çš„è§’åº¦é¡¹ç›®</h2><p id="efc6" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ä½¿ç”¨<code class="eh mg mh mi mj b">@angular/cli</code>ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªæ–°çš„<code class="eh mg mh mi mj b">angular</code>åº”ç”¨ç¨‹åºã€‚æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘å°±æŠŠå®ƒå‘½åä¸º<code class="eh mg mh mi mj b">angular-universal-firebase</code>ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/7c26e3b68993aa8616404deda4f8a732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j_KxtH4ILTaEA3xS9pasgA.png"/></div></div></figure><h2 id="18e1" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">3.å®‰è£…@ angular/å¹³å°æœåŠ¡å™¨</h2><p id="77e0" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ä¸ºäº†æ„å»ºå’Œå‘ˆç°æ‚¨çš„<code class="eh mg mh mi mj b">universal</code>åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦å®‰è£…<code class="eh mg mh mi mj b">@angular/platform-server</code>ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/cbb278ced69feb07fb871aedb6967ced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h42o8HmgtcHuWYsFiiL2xw.png"/></div></div></figure><h2 id="ca47" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">4.æ·»åŠ æœåŠ¡å™¨ç«¯æ¸²æŸ“é…ç½®</h2><p id="9509" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">åœ¨<code class="eh mg mh mi mj b">@angular/cli@v6.0.0+</code>ä¸­ï¼Œ<code class="eh mg mh mi mj b">.angular-cli.json</code>æ”¹ä¸º<code class="eh mg mh mi mj b">angular.json</code>ã€‚è¿™å®šä¹‰äº†æˆ‘ä»¬çš„é¡¹ç›®æ˜¯å¦‚ä½•æ„å»ºçš„ï¼Œä»¥åŠè¿™ä¸ªé¡¹ç›®çš„æ„å»ºé…ç½®ã€‚æˆ‘ä»¬å¸Œæœ›åœ¨<code class="eh mg mh mi mj b">projects.PROJECT_NAME.architect</code>è·¯å¾„ä¸­ä¸ºé¡¹ç›®æ·»åŠ ä¸€ä¸ª<code class="eh mg mh mi mj b">server</code>é…ç½®ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/a457c35bd49d494b5dc0520955d525fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F2raurBHDWLm0GL8MH3c6w.png"/></div></div></figure><p id="fbd7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å·²ç»æ·»åŠ äº†<code class="eh mg mh mi mj b">server</code>ï¼Œå®ƒä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨ç«¯ç‰ˆæœ¬å®šä¹‰äº†<code class="eh mg mh mi mj b">builder</code>å’Œ<code class="eh mg mh mi mj b">options</code>é…ç½®ã€‚</p><h2 id="9294" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">5.å°†é¡¹ç›®è¾“å‡ºä¿®æ”¹åˆ°Firebaseæ–‡ä»¶å¤¹</h2><p id="c45a" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†åœ¨ä¸æ„å»ºæœåŠ¡å™¨ç‰ˆæœ¬ç›¸åŒçš„ç›®å½•ä¸­æ„å»ºæˆ‘ä»¬åº”ç”¨ç¨‹åºçš„æµè§ˆå™¨ç‰ˆæœ¬ï¼Œä»¥ä¾¿åœ¨Firebaseä¸­è¿›è¡ŒæœåŠ¡å™¨ç«¯æ¸²æŸ“ã€‚ä¸ºæ­¤ï¼Œå°†<code class="eh mg mh mi mj b">angular.json</code>çš„<code class="eh mg mh mi mj b">PROJECT_NAME.architect.build.options.outputPath</code>ç¼–è¾‘ä¸º<code class="eh mg mh mi mj b">functions/dist/browser</code>ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/af5bb92a2910fec5321911bf0782ead3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-BX1wk-Lih_o2sOD3lvUw.png"/></div></div></figure><h2 id="a8de" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">6.ä¸ºåº”ç”¨æœåŠ¡å™¨ç‰ˆæœ¬åˆ›å»ºå¿…è¦çš„æ–‡ä»¶</h2><ul class=""><li id="f8e2" class="kz la hu je b jf lb jj lc jn ld jr le jv lf jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">src/app/app.server.module.ts</code></li></ul><p id="edab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸ºåº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨ç‰ˆæœ¬åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å—ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/f6656b5eab8ea07d4fa53dc33b385de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sssoZiqn1PZ_uY2MsRm2qA.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/src/app/app.server.module.ts" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/src/app/app.server.module.ts</a></figcaption></figure><ul class=""><li id="1aaa" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">src/main-ssr.ts</code></li></ul><p id="4ccd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸º<code class="eh mg mh mi mj b">server</code>æ¨¡å—åˆ›å»ºå…¥å£ç‚¹ã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨<code class="eh mg mh mi mj b">angular.json</code>çš„æœåŠ¡å™¨é…ç½®ä¸­å¼•ç”¨çš„<code class="eh mg mh mi mj b">main</code>æ–‡ä»¶ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/e0e4c73cfcebf5077de825183b39670b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1QsROjkEt3ECkwGeaIc4ZA.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/src/main-ssr.ts" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/src/main-ssr.ts</a></figcaption></figure><ul class=""><li id="a8c3" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">src/tsconfig.app-ssr.json</code></li></ul><p id="fc19" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸ºæœåŠ¡å™¨ç‰ˆæœ¬åˆ›å»º<code class="eh mg mh mi mj b">tsconfig</code>ã€‚ç±»ä¼¼äºæµè§ˆå™¨ç‰ˆæœ¬ï¼Œé™¤äº†<code class="eh mg mh mi mj b">angularCompilerOptions.entryModule</code>å°†å¼•ç”¨æˆ‘ä»¬åˆšåˆšåˆ›å»ºçš„æœåŠ¡å™¨ç‰ˆæœ¬çš„å…¥å£æ¨¡å—ã€‚è¿™åœ¨<code class="eh mg mh mi mj b">angular.json</code>ä¸­ä¹Ÿè¢«ç§°ä¸º<code class="eh mg mh mi mj b">tsConfig</code>ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/2e7eeb2965a16b6490c5de87ed6844a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bGt6c-3EKL1HVuT3zRwq3Q.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/src/tsconfig.app-ssr.json" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/src/tsconfig.app-ssr.json</a></figcaption></figure><h2 id="6f2d" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">7.åœ¨åº”ç”¨ç¨‹åºçš„æµè§ˆå™¨æ¨¡å—ä¸­åŒ…å«æœåŠ¡å™¨è½¬æ¢</h2><p id="a9fb" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ç”±äºæˆ‘ä»¬åœ¨æµè§ˆå™¨ç‰ˆæœ¬ä¹‹å‰å°†æ‚¨çš„åº”ç”¨çš„æœåŠ¡å™¨ç‰ˆæœ¬å‘é€åˆ°æµè§ˆå™¨ï¼Œå› æ­¤åœ¨<code class="eh mg mh mi mj b">imports</code>ä¸­æ·»åŠ <code class="eh mg mh mi mj b">BrowserModule</code>æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ <code class="eh mg mh mi mj b">.withServerTransition({ appId })</code>ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/49ad0c89530038656d35010e86f98a7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fh0_InrbVLJOeVVovpiXPg.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/src/app/app.module.ts" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/src/app/app.module.ts</a></figcaption></figure><p id="7e47" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½æ„å»ºåº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨å’Œæµè§ˆå™¨ç‰ˆæœ¬äº†ï¼</p><h2 id="bc28" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">8.æ„å»ºåº”ç”¨ç¨‹åºçš„æµè§ˆå™¨å’ŒæœåŠ¡å™¨ç‰ˆæœ¬</h2><p id="acfe" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ä½¿ç”¨<code class="eh mg mh mi mj b">@angular/cli</code>ï¼Œæˆ‘ä»¬å°†æ„å»ºä¸¤ä¸ªç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚</p><ul class=""><li id="5e3f" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">ng build --prod</code>:è¿™å°†ä½¿ç”¨<code class="eh mg mh mi mj b">prod</code>é…ç½®æ„å»ºåº”ç”¨ç¨‹åºçš„æµè§ˆå™¨ç‰ˆæœ¬ã€‚</li><li id="7dae" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">ng run PROJECT_NAME:server</code>:è¿™å°†æ„å»ºåº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨ç‰ˆæœ¬ã€‚å®ƒå°†ç”Ÿæˆä¸€ä¸ª<code class="eh mg mh mi mj b">ngFactory</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥ä½¿ç”¨<code class="eh mg mh mi mj b">node</code>æ¸²æŸ“æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚</li></ul><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/b7c39ab68b9ccbf25bc028b40d944022.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IWR36g2rW1Qhy0MUu5U9AQ.png"/></div></div></figure><p id="247d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å½“ä¸¤ä¸ªæ„å»ºéƒ½å®Œæˆåï¼Œæ‚¨ç°åœ¨åº”è¯¥åœ¨æ‚¨çš„<code class="eh mg mh mi mj b">root</code>ç›®å½•ä¸­æœ‰ä¸€ä¸ª<code class="eh mg mh mi mj b">functions</code>æ–‡ä»¶å¤¹ï¼Œå…¶ä¸­æœ‰<code class="eh mg mh mi mj b">browser</code>å’Œ<code class="eh mg mh mi mj b">server</code>æ–‡ä»¶å¤¹ã€‚å‰å®³ï¼ï¼ï¼ğŸ‰</p></div><div class="ab cl mw mx hc my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="hn ho hp hq hr"><h1 id="c2db" class="kb kc hu bd kd ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky dt translated">ç¬¬äºŒéƒ¨åˆ†:ä½¿ç”¨Firebaseéƒ¨ç½²ğŸš€</h1><p id="2a24" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">[1] <em class="ni">åœ¨ç»§ç»­ä¹‹å‰ï¼Œæ‚¨åº”è¯¥å·²ç»åˆ›å»ºäº†ä¸€ä¸ªfirebaseé¡¹ç›®</em> <a class="ae ka" href="https://console.firebase.google.com" rel="noopener ugc nofollow" target="_blank"> <em class="ni">è¿™é‡Œ</em> </a> <em class="ni">ã€‚æˆ‘æŠŠè¿™ä¸ªä¾‹å­å‘½åä¸º</em> <code class="eh mg mh mi mj b"><em class="ni">angular-universal-firebase</em></code> <em class="ni">ã€‚</em></p><h2 id="9081" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">1.åœ¨å‘½ä»¤è¡Œä¸­ç™»å½•åˆ°`<code class="eh mg mh mi mj b">firebase</code>'</h2><p id="ddd0" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨æ‚¨åœ¨[1]ä¸­åˆ›å»ºfirebaseé¡¹ç›®æ—¶ä½¿ç”¨çš„googleå¸æˆ·ç™»å½•firebaseã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/4c1ac196b1593b6aeff0b7250af70bf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*blDVXknJOCCp5CkISJqI-Q.png"/></div></div></figure><h2 id="6376" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">2.åœ¨â€œangularâ€é¡¹ç›®ä¸­åˆå§‹åŒ–Firebase</h2><p id="1d5a" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">é€šè¿‡å‘½ä»¤è¡Œåˆå§‹åŒ–firebaseé…ç½®:</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/b90c9725b770786c420a0b6dbf3e2e54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mDLf8fulFCwqtec3lBcxDA.png"/></div></div></figure><ul class=""><li id="91f5" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated">é€‰æ‹©<code class="eh mg mh mi mj b">Functions</code>å’Œ<code class="eh mg mh mi mj b">Hosting</code>è¿›è¡ŒåŠŸèƒ½è®¾ç½®</li></ul><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nj"><img src="../Images/fc23e269309fc5cda499dae6ef5f369a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_qrlXTjrFwVTwANMdPZNyg.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Firebase set up configuration (Functions and Hosting)</figcaption></figure><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nk"><img src="../Images/ed9b13b3ed3317febd06e606a57c01e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*768NuV6Uzy67QGpLmjCTSg.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Javascript as Cloud function language for simplicity</figcaption></figure><ul class=""><li id="7ab0" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated">é€‰æ‹©æ‚¨åœ¨[1]ä¸­åˆ›å»ºçš„firebaseé¡¹ç›®ã€‚(å¯¹æˆ‘æ¥è¯´ï¼Œæ˜¯<code class="eh mg mh mi mj b">angular-universal-firebase</code>ã€‚</li></ul><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="ab fr cl nl"><img src="../Images/16eca37dbe7c38c772d7daf6f47635fe.png" data-original-src="https://miro.medium.com/v2/format:webp/1*EwE87izZt7lyKihzJHrmVg.png"/></div></figure><ul class=""><li id="3890" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated">æ¥å—æ­¤é˜¶æ®µçš„æ‰€æœ‰é»˜è®¤å€¼ï¼›æˆ‘ä»¬å°†åœ¨åé¢çš„æ­¥éª¤ä¸­é…ç½®å…¶ä½™éƒ¨åˆ†ã€‚(åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨<code class="eh mg mh mi mj b">Javascript</code>ä¸­ç¼–å†™æˆ‘ä»¬çš„å‡½æ•°)ã€‚</li></ul><h2 id="7047" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">3.å°†åŒ…ä¾èµ–é¡¹æ·»åŠ åˆ°â€œå‡½æ•°â€</h2><p id="687b" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ç”±äºæˆ‘ä»¬é€šè¿‡<code class="eh mg mh mi mj b">firebase-functions</code>ä½¿ç”¨èŠ‚ç‚¹æœåŠ¡å™¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨<code class="eh mg mh mi mj b">functions/package.json</code>ä¸­åŒ…å«<code class="eh mg mh mi mj b">angular</code>ä¾èµ–é¡¹æ¥å‘ˆç°åº”ç”¨ç¨‹åºçš„æœåŠ¡å™¨ç‰ˆæœ¬ã€‚</p><p id="8986" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ni">å…ˆä¸è¯´:ç›®å‰ï¼Œæˆ‘ä¸çŸ¥é“æœ‰ä»€ä¹ˆæ–¹æ³•å¯ä»¥å‡è½»è¿™ç§ä¾èµ–å£°æ˜çš„é‡å¤ï¼Œå› ä¸ºæ®æˆ‘æ‰€çŸ¥ï¼Œä½ ä¸èƒ½åœ¨ä»»ä½•</em> <code class="eh mg mh mi mj b"><em class="ni">firebase-functions</em></code> <em class="ni"> javascriptæ–‡ä»¶ä¸­è®¿é—®</em> <code class="eh mg mh mi mj b"><em class="ni">functions</em></code> <em class="ni">ç›®å½•ä¹‹å¤–çš„æ–‡ä»¶ã€‚ä½†æ˜¯å¦‚æœä½ çŸ¥é“ä¸€ä¸ªæ–¹æ³•ï¼Œè¯·è®©æˆ‘çŸ¥é“ï¼</em></p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/c32d751b6b514c87f46df97bd07a4e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E3UGO-cwJuo4G2yoVE0WIw.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/functions/package.json" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/functions/package.json</a></figcaption></figure><h2 id="b7a4" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">4.åœ¨`<code class="eh mg mh mi mj b">functions</code>'ç›®å½•ä¸‹å®‰è£…åŒ…</h2><p id="c548" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">å®‰è£…daä¾èµ–é¡¹ï¼</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/b603f5124be4801d9cba94293e41c900.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5JHPxb7ZRsga9MgtYs8WlQ.png"/></div></div></figure><h2 id="37d9" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">5.åˆ›å»ºFirebaseå‡½æ•°ä»¥æœåŠ¡äºåº”ç”¨ç¨‹åº</h2><p id="3bea" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">æˆ‘ä»¬å°†ä½¿ç”¨<code class="eh mg mh mi mj b">functions.https.onRequest</code> Firebaseå‡½æ•°ç±»å‹ä»æˆ‘ä»¬çš„expressæœåŠ¡å™¨å‘é€å“åº”ã€‚è¯¥æ–‡ä»¶ä¸­æœ‰è®¸å¤šå†…å®¹ï¼Œä½†æœ€å€¼å¾—æ³¨æ„çš„æ˜¯:</p><ul class=""><li id="01b8" class="kz la hu je b jf jg jj jk jn mk jr ml jv mm jz lg lh li lj dt translated">æ­£åœ¨å¯¼å…¥åœ¨<strong class="je hv">éƒ¨åˆ†I:æ­¥éª¤8 â€”æœåŠ¡å™¨ç‰ˆæœ¬</strong>ä¸­ç”Ÿæˆçš„<code class="eh mg mh mi mj b">AppServerModuleNgFactory</code>ã€‚</li><li id="027b" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated">åˆ›å»ºä¸€ä¸ª<code class="eh mg mh mi mj b">index</code>å˜é‡ï¼Œè¯¥å˜é‡è·å–æˆ‘ä»¬ä»<strong class="je hv">ç¬¬ä¸€éƒ¨åˆ†ç”Ÿæˆçš„<code class="eh mg mh mi mj b">index.html</code>æ–‡ä»¶:æ­¥éª¤8 â€”æµè§ˆå™¨ç‰ˆæœ¬</strong>ã€‚</li><li id="302c" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated">ä½¿ç”¨<code class="eh mg mh mi mj b">renderModuleFactory</code>ç”Ÿæˆä¸€ä¸ª<code class="eh mg mh mi mj b">html</code>æ–‡ä»¶ï¼Œæˆ‘ä»¬ç”¨<code class="eh mg mh mi mj b">url</code>å’Œ<code class="eh mg mh mi mj b">document</code>å‚æ•°ä½œä¸ºå“åº”å‘é€è¯¥æ–‡ä»¶ã€‚</li><li id="9fd3" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">url</code>å‚æ•°å†³å®šäº†appè¦æ¸²æŸ“çš„è·¯çº¿ã€‚æŒ‡å®šè¿™ä¸€ç‚¹å…è®¸<code class="eh mg mh mi mj b">renderModuleFactory</code>æ„å»ºè¯¥è·¯çº¿çš„htmlã€‚</li><li id="3887" class="kz la hu je b jf lk jj ll jn lm jr ln jv lo jz lg lh li lj dt translated"><code class="eh mg mh mi mj b">document</code>æ˜¯åº”è¯¥ç”¨äºå‘ˆç°çš„é¡µé¢çš„å®Œæ•´æ–‡æ¡£HTMLã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†æ˜¯è¯¥åº”ç”¨ç¨‹åºçš„æµè§ˆå™¨ç‰ˆæœ¬<code class="eh mg mh mi mj b">index.html</code>ã€‚</li></ul><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/888f21a2ad540555c29a032ffc2d2953.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q2janUW9L8lQ1uHRC9ry3g.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/functions/index.js" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/functions/index.js</a></figcaption></figure><h2 id="872a" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">7.é…ç½®Firebaseæ‰˜ç®¡</h2><p id="5ed0" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬å·²ç»æ„å»ºäº†å‘ˆç°é¡µé¢çš„å‡½æ•°ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹firebaseä¸»æœºé…ç½®æ¥ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚æ›´æ”¹<code class="eh mg mh mi mj b">firebase.json</code>ä¸­çš„<code class="eh mg mh mi mj b">hosting.rewrites</code>ã€‚ç¬¬ä¸€ä¸ªæ¡ç›®æ˜¯é€šè¿‡æˆ‘ä»¬çš„å…¬å…±æ–‡ä»¶å¤¹å‘é€é™æ€æ–‡ä»¶(csså’Œjs)ã€‚ç¬¬äºŒä¸ªæ¡ç›®æ˜¯å°†æ‰€æœ‰è¯·æ±‚æŒ‡å‘<code class="eh mg mh mi mj b">ssr</code>å‡½æ•°ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/9c249ee58a3dae559a849d223c241d8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ortAeT1mrRQlIvVfIlzZzg.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek"><a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/blob/master/firebase.json" rel="noopener ugc nofollow" target="_blank">https://github.com/aaronte/angular-universal-firebase/blob/master/firebase.json</a></figcaption></figure><h2 id="6c16" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">8.å°†â€œåŠŸèƒ½/åˆ†å¸ƒ/æµè§ˆå™¨â€çš„æ‰€æœ‰å†…å®¹å¤åˆ¶åˆ°â€œå…¬å…±â€</h2><p id="eb8e" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">å› ä¸ºæˆ‘ä»¬å¸Œæœ›åƒæ™®é€šåº”ç”¨ç¨‹åºä¸€æ ·è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæ‰€ä»¥æˆ‘ä»¬å¸Œæœ›å°†æ„å»ºæµè§ˆå™¨å¹³å°æ‰€ç”Ÿæˆçš„æ‰€æœ‰æ–‡ä»¶æ”¾åœ¨publicæ–‡ä»¶å¤¹ä¸­ã€‚è¿™æ„å‘³ç€functions/dist/browserä¸­çš„htmlã€jsã€cssç­‰éƒ½åº”è¯¥å‡ºç°åœ¨publicæ–‡ä»¶å¤¹ä¸­ã€‚æ³¨æ„:ä½†æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»å°†<code class="eh mg mh mi mj b">index.html</code>çš„åç§°æ”¹ä¸º<code class="eh mg mh mi mj b">index2.html</code>ï¼Œå› ä¸ºå¦‚æœfirebaseåœ¨<code class="eh mg mh mi mj b">public</code>æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ°<code class="eh mg mh mi mj b">index.html</code>ï¼Œå®ƒå°†ä¸ä¼šè¿è¡Œ<code class="eh mg mh mi mj b">ssr</code>å‡½æ•°ã€‚</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/2985d03fb1c8e4c9583a13e61e70d197.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UvDgvBF0D011vZt4ym4rTw.png"/></div></div></figure><h2 id="772d" class="lp kc hu bd kd lq lr ls kh lt lu lv kl jn lw lx kp jr ly lz kt jv ma mb kx mc dt translated">9.éƒ¨ç½²åˆ°ç«åŠ›åŸºåœ°ğŸš€ ğŸ”¥</h2><p id="be1d" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿå°†æ‚¨çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°Firebase:</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/4c0449ec4bc71d277c0b909963e451df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_GKavH_f9G51h22mTL9AXQ.png"/></div></div></figure></div><div class="ab cl mw mx hc my" role="separator"><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb nc"/><span class="mz bw bk na nb"/></div><div class="hn ho hp hq hr"><h1 id="fedd" class="kb kc hu bd kd ke nd kg kh ki ne kk kl km nf ko kp kq ng ks kt ku nh kw kx ky dt translated">å°±æ˜¯è¿™æ ·ï¼ğŸ‘</h1><p id="0b6d" class="pw-post-body-paragraph jc jd hu je b jf lb jh ji jj lc jl jm jn md jp jq jr me jt ju jv mf jx jy jz hn dt translated">ä½ å¯ä»¥åœ¨<a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase" rel="noopener ugc nofollow" target="_blank"> Github </a>ä¸ŠæŸ¥çœ‹æºä»£ç ã€‚</p><p id="681d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘å¸Œæœ›è¿™ç¯‡æ•™ç¨‹åœ¨æŸäº›æ–¹é¢æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœæ‚¨æœ‰ä»»ä½•åé¦ˆæˆ–é—®é¢˜ï¼Œè¯·å°†å®ƒä»¬æ·»åŠ åˆ°<a class="ae ka" href="https://github.com/aaronte/angular-universal-firebase/issues" rel="noopener ugc nofollow" target="_blank"> Githubé—®é¢˜</a>ä¸­ï¼Œä»¥ç¡®ä¿æ¯ä¸ªæŸ¥çœ‹ä»£ç çš„äººéƒ½ä¼šå—ç›Šã€‚ğŸ˜„</p><p id="38bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç¼–ç å¿«ä¹ï¼ğŸ˜ƒ</p><figure class="mo mp mq mr fq iv"><div class="bz el l di"><div class="nm nn l"/></div></figure></div></div>    
</body>
</html>