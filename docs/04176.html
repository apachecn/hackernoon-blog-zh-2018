<html>
<head>
<title>Introduction to Transaction Vouchers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">交易凭证介绍</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/introduction-to-transaction-vouchers-8e7f42bbd0cb?source=collection_archive---------22-----------------------#2018-05-16">https://medium.com/hackernoon/introduction-to-transaction-vouchers-8e7f42bbd0cb?source=collection_archive---------22-----------------------#2018-05-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="6a35" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">加密交易最令人讨厌和容易出错的一个方面是在交易所存款和取款的过程。</p><p id="aed2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看看这个Bittrex存款对话框</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff jp"><img src="../Images/f753ecb21ae7cf4b2ca1278c3a045593.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*CS2xfLxBXuqeamHp_bqYdw.png"/></div></figure><p id="539f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们一起想想，当您从自己的帐户向Bittrex发送珍贵的热情令牌时，可能会出现的所有问题。</p><ol class=""><li id="d6aa" class="jx jy hu it b iu iv iy iz jc jz jg ka jk kb jo kc kd ke kf dt translated">您可能会输入错误的帐户地址，但这并不是真正的风险，因为帐户地址具有内部纠错功能。</li><li id="a92b" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">您可能会忘记包含邮件或键入错误。您的资金仍将进入Bittrex，但Bittrex将无法贷记您的帐户，因此请期待与他们的客户支持团队进行长时间的讨论。</li><li id="1ec9" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">你可能会错误地将热情存入伊格尼丝地址，反之亦然。再次，期待一个漫长的资金回收过程。</li><li id="73c0" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">从另一个交易所到Bittrex的存款或从Bittrex到另一个交易所的存款可能不指定消息，因此它也会丢失。</li><li id="88c0" class="jx jy hu it b iu kg iy kh jc ki jg kj jk kk jo kc kd ke kf dt translated">即使您的存款确实指定了一条消息，一些交易所期望纯文本消息，而您可以加密发送，反之亦然。</li></ol><p id="8e84" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是事情可能会变得更糟…</p><p id="6474" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">6.如果你没有连接到Bittrex.com，而是被骗连接到，比如说，Bitrex.com？让我们暂时假设这是一个旨在窃取你的资金的钓鱼网站，如果你没有注意到差异，你会很高兴地将钱存入他们提供给你的地址，失去你所有的代币。</p><p id="250f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">兑换取款过程也存在类似的问题。例如，如果您将资金提取到一个新创建的账户，然后忘记了密码，该怎么办？向你珍贵的信物说再见吧。</p><p id="b20f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但即使只是在朋友或企业之间发送密码也是有风险的。当你在没有任何认证的情况下通过电子邮件发送你的帐户地址和金额时，如果有人拦截了这封电子邮件并更改了地址或金额，该怎么办？我们能做得更好吗？是的，我们可以！</p><h2 id="e15e" class="kl km hu bd kn ko kp kq kr ks kt ku kv jc kw kx ky jg kz la lb jk lc ld le lf dt translated">我们的解决方案—交易凭证</h2><p id="1c42" class="pw-post-body-paragraph ir is hu it b iu lg iw ix iy lh ja jb jc li je jf jg lj ji jj jk lk jm jn jo hn dt translated">把交易凭证想象成发票。向特定地址支付特定金额的请求，由接收者的私钥签名。这个想法是基于<a class="ae ll" href="https://en.bitcoin.it/wiki/Payment_Request" rel="noopener ugc nofollow" target="_blank">比特币支付请求</a>提案，但使用Ardor/伊格尼丝的丰富功能，我们可以做得更多。</p><p id="f466" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae ll" href="https://hackernoon.com/tagged/voucher" rel="noopener ugc nofollow" target="_blank">凭证</a>本身是一种<a class="ae ll" href="https://hackernoon.com/tagged/json" rel="noopener ugc nofollow" target="_blank"> JSON </a>格式，由交易JSON、交易字节和交易字节的数字签名组成。</p><p id="fd4f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">比如说，爱丽丝想让鲍勃付给她100伊格尼斯。她使用Bob的帐户登录Ardor wallet，并像Bob一样付款。当然，她没有Bob的密码，所以她不能提交交易。相反，她使用自己的密码对Bob的付款进行了签名，并生成了一张凭证。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lm"><img src="../Images/bfb33f0e465172217a76d22dc11810a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0WWYeeAXWPhKgMoc9qa5A.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Notice the Voucher checkbox</figcaption></figure><p id="3f09" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后，Alice下载优惠券并通过电子邮件发送给Bob。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div class="fe ff lv"><img src="../Images/9228a554f10141d4c030c2c2d3e84151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1222/format:webp/1*R3IlGkmgzGfq_NmOSJXLCw.png"/></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">The Voucher Generated by Alice</figcaption></figure><p id="3598" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Bob收到优惠券并将其放入Ardor钱包。Ardor钱包会自动验证凭证签名是否有效，以及凭证字节是否正确表示了凭证交易JSON。验证成功后，钱包向Bob显示请求，它显示作为接收者的Alice的地址、她希望他支付的金额、任何附加的消息和任何其他交易参数。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lw"><img src="../Images/adbe1a0c91c66561e56c8f22d10f1e48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Kif-20RvYzdr9_RT30SbQ.png"/></div></div><figcaption class="lr ls fg fe ff lt lu bd b be z ek">Bob loads the voucher into his wallet</figcaption></figure><p id="d74b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Bob需要做的只是验证数据、签名，并使用他的密码提交交易。</p><p id="59a4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Bob确信凭证是真实的，因为攻击者可能对其进行的任何更改都会阻止钱包对其进行验证。Bob还确信Alice知道她的帐户密码，否则她不可能首先生成凭证。最后，Alice和Bob现在都有了一个用于记账的文档，向彼此和其他任何人证明已经请求了付款。</p><p id="93cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以在这个视频中观看我演示的概念<a class="ae ll" href="https://youtu.be/vZpmvVoUFFA" rel="noopener ugc nofollow" target="_blank">，这个视频来自我2018年3月在挪威举办的一个研讨会。</a></p><p id="206e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在想想Bittrex交易所的存款流程。Bittrex可以生成一个凭证文件，您可以将该凭证文件导入到钱包中，其中包含他们的存款地址和他们希望您发送的消息，而不是要求您将令牌发送到附有消息的地址。或许他们还会让你用这些数据扫描一个二维码。你所需要做的，就是把这个凭证放入你的钱包，用众所周知的Bittrex帐户仔细检查接收者地址，签名，然后提交交易。</p><p id="fd8d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是代金券不仅限于支付。它们可用于伊格尼丝支持的任何交易类型。例如，Bob想委托Alice进行投票。Alice以Bob的身份登录并生成一张投票凭证，然后通过电子邮件将其发送给Bob，请他签名并提交。</p><p id="df64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">或者，作为另一个例子，Charlie，一个伪造的游泳池经营者，想要Bob将他的余额出租给他的游泳池。他再次代表Bob执行租赁请求，然后发送Bob需要签名并提交的凭证。</p><p id="07c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，需要注意的是，代金券并不依赖于钱包。Alice和Dave可以使用API生成凭证，Bob也可以使用API对凭证进行验证和签名。所有的处理甚至可以卸载给轻量级契约，因为凭证可以用来触发轻量级契约，而轻量级契约可以生成凭证。在我的下一篇文章中会有更多的介绍。</p><figure class="jq jr js jt fq ju"><div class="bz el l di"><div class="lx ly l"/></div></figure></div></div>    
</body>
</html>