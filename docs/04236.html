<html>
<head>
<title>Mock it until you have it</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">嘲笑它，直到你拥有它</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/mock-it-until-you-have-it-c0785d327476?source=collection_archive---------8-----------------------#2018-05-18">https://medium.com/hackernoon/mock-it-until-you-have-it-c0785d327476?source=collection_archive---------8-----------------------#2018-05-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/a0a8f45cf331131a1b2e1bf4e158f9ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVvP9PrhFcmhMbQVjYa6hw.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Photo by <a class="ae ih" href="https://unsplash.com/photos/HId6JGZ7urI?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">rawpixel</a> on <a class="ae ih" href="https://unsplash.com/search/photos/startup?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="529d" class="pw-subtitle-paragraph jh ij ik bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy ek translated">模仿HTTP和HTTPS网站和REST APIs，这样你在进行任何相关的开发或自动化测试时就不会依赖这些服务或互联网。</h2></div><p id="5917" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt kv translated">当开发面向桌面、web或移动应用的新客户端时，最大的挑战之一是正确的API web服务的可用性，如果您要将您的应用集成到第三方系统，它可能是您自己的服务器或其他一些第三方web服务的一部分。如果由于不可避免的情况而并行开发应用程序和需要消费的web服务，也会出现这个问题。</p><p id="996a" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这个问题不仅仅局限于开发，它也是自动化/手动测试中的一个挑战。任何测试只有在可靠的情况下才有用。考虑到这一点，如果所需的第三方服务/网站更改、宕机或其他问题，或者即使您正在使用自己的web服务，每次测试期间正确和完整数据的可用性本身都会是一个巨大的挑战。</p><p id="6e85" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">如果有时您的测试由于任何这些服务中的数据契约变化而失败，确实很难找出确切的原因。</p><p id="4004" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">幸运的是，有许多工具可以帮助您模拟web服务，这样您就不再因为服务的不可用或变化而等待或停滞不前。</p><p id="8fc3" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><a class="ae ih" href="https://github.com/betamaxteam/betamax" rel="noopener ugc nofollow" target="_blank"> Betamax </a>(其正式死亡)和<a class="ae ih" href="https://github.com/linkedin/flashback" rel="noopener ugc nofollow" target="_blank">闪回</a>是其中两个名字。Betamax自身面临的挑战很少，因为它需要始终连接互联网才能工作，如果您正在做一些安全关键的事情，并且您正在隔离的系统中工作，这可能会是一个问题。</p><p id="7aaa" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">在本文中，我们将学习如何使用<strong class="kb il">闪回</strong>来管理web服务。闪回由LinkedIn开发，于2017年6月开源。</p><h1 id="eceb" class="le lf ik bd lg lh li lj lk ll lm ln lo jq lp jr lq jt lr ju ls jw lt jx lu lv dt translated"><strong class="ak">什么是闪回</strong></h1><p id="98d7" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated">Flashback基于Java的跨平台工具，用于模仿HTTP和HTTPS服务/REST API。基本上，它记录HTTP和HTTPS请求并存储在本地，然后通过基于各种请求匹配规则匹配请求来回放相同的请求。每个这样的请求记录被称为场景。匹配规则将传入的请求与先前记录的请求相关联，然后使用该请求生成响应。HTTP请求通常包含URL、方法、头和主体。闪回允许为这些组件的任意组合定义匹配规则。</p><p id="766c" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">你可以在这里阅读更多关于闪回以及它是如何运作的:<a class="ae ih" href="https://github.com/linkedin/flashback" rel="noopener ugc nofollow" target="_blank"><strong class="kb il"><em class="mb">https://github.com/linkedin/flashback</em></strong></a></p><h1 id="199c" class="le lf ik bd lg lh li lj lk ll lm ln lo jq lp jr lq jt lr ju ls jw lt jx lu lv dt translated">模仿HTTP请求</h1><p id="ec17" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated">使用闪回模仿HTTP请求非常简单。闪回的工作方式就像中间人代理一样，截取并记录所有的网络流量。闪回有两个部分:</p><p id="9e65" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">闪回管理服务器</strong> —它集中控制为记录和重放HTTP和HTTPS场景而创建的闪回代理。</p><p id="3a4e" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">闪回代理服务器— </strong>它实际上拦截HTTP/HTTPS流量，并记录和回放它们。将这些记录保存为场景，然后根据各种匹配规则和提供配置回放它们。</p><h2 id="f7f6" class="mc lf ik bd lg md me mf lk mg mh mi lo ki mj mk lq km ml mm ls kq mn mo lu mp dt translated">记录HTTP场景</h2><p id="2bf8" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated">在我们实际模拟服务之前，让我们首先设置闪回来模拟HTTP服务。首先，如果你使用的是MAC，确保你的机器上启用了http服务器。</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="656f" class="mc lf ik mv b fv mz na l nb nc">sudo apachectl start</span></pre><p id="2381" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 1。</strong>克隆闪回回购</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="4609" class="mc lf ik mv b fv mz na l nb nc">git clone <a class="ae ih" href="https://github.com/linkedin/flashback.git" rel="noopener ugc nofollow" target="_blank">https://github.com/linkedin/flashback.git</a></span></pre><p id="92b9" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 2。</strong>在终端上，将当前工作目录更改为此克隆存储库目录，并通过运行以下脚本启动闪回管理服务器:</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="53b8" class="mc lf ik mv b fv mz na l nb nc">./startAdminServer.sh -port 1234</span></pre><p id="8fe0" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 3。一旦管理服务器启动，您可以使用它公开的REST APIs与它进行交互。下一步是启动闪回HTTP代理服务器来记录HTTP场景。只需使用Curl或任何您喜欢的REST客户端点击下面的API，我在这个演示中使用了Postman:</strong></p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="94ab" class="mc lf ik mv b fv mz na l nb nc">POST <a class="ae ih" href="http://localhost:1234/admin?action=startFlashback" rel="noopener ugc nofollow" target="_blank">http://localhost:1234/admin?action=startFlashback</a></span></pre><p id="3d75" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">请求正文:</strong></p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="7852" class="mc lf ik mv b fv mz na l nb nc">{<br/>"sceneMode": "record",<br/>"sceneName": "test1",<br/>"matchRule": "matchMethodBodyUri",<br/>"scenePath": "/tmp",<br/>"proxyHost": "localhost",<br/>"proxyPort": "5555"<br/>}</span></pre><p id="56eb" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">在body中，我们传递了各种config参数，您可以在这里参考<a class="ae ih" href="#4015" rel="noopener ugc nofollow"> <strong class="kb il">以了解更多关于</strong> </a> <strong class="kb il">参数的详细信息。</strong></p><p id="6e5d" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 4。</strong>现在一切都已完成，我们的代理正在运行以记录流量，但在此之前，您需要在运行此代理的设备或MAC上配置此HTTP代理设置，并且您要在该设备或MAC上记录流量(通常是同一台机器)。下面是MAC上的示例设置。</p><figure class="mq mr ms mt fq hw fe ff paragraph-image"><div class="fe ff nd"><img src="../Images/34621b249e869e0684c2f021de15dab2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*K1GIUmefklwGt9kGEOE54A.png"/></div></figure><p id="51c7" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">配置完成后，保存设置并重新启动浏览器或您正在使用的任何其他客户端。</p><blockquote class="ne nf ng"><p id="f76e" class="jz ka mb kb b kc kd jl ke kf kg jo kh nh kj kk kl ni kn ko kp nj kr ks kt ku hn dt translated">如果您正在使用任何REST客户端，您也可以选择仅在该REST客户端中配置代理设置，而不是在系统中配置，但是要确保您的所有请求都有这个代理。</p></blockquote><p id="7198" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 5。</strong>只需点击任何HTTP网站或REST API，一旦完成，停止闪回代理服务器。闪回只有在停止后才会将场景保存在磁盘上。</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="c208" class="mc lf ik mv b fv mz na l nb nc">POST <a class="ae ih" href="http://localhost:1234/admin?action=shutDownFlashback" rel="noopener ugc nofollow" target="_blank">http://localhost:1234/admin?action=shutDownFlashback</a></span></pre><p id="ccbb" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">6。要验证是否一切顺利，只需转到您在启动代理服务器时配置的“scenePath”位置，您应该会看到一个与“sceneName”同名的文件，只需打开它，您就会找到您访问过的所有HTTP网站/API。</p><h2 id="a6f6" class="mc lf ik bd lg md me mf lk mg mh mi lo ki mj mk lq km ml mm ls kq mn mo lu mp dt translated">回放HTTP场景</h2><p id="575f" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated">要重放先前存储的场景，请使用与录制时相同的基本设置；唯一的区别是，您在上面的步骤3中将“场景模式”设置为“回放”:</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="2566" class="mc lf ik mv b fv mz na l nb nc">POST <a class="ae ih" href="http://localhost:1234/admin?action=startFlashback" rel="noopener ugc nofollow" target="_blank">http://localhost:1234/admin?action=startFlashback</a></span></pre><p id="8aa3" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">请求正文:</strong></p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="c176" class="mc lf ik mv b fv mz na l nb nc">{<br/>"sceneMode": "playback",<br/>"sceneName": "test1",<br/>"matchRule": "matchMethodBodyUri",<br/>"scenePath": "/tmp",<br/>"proxyHost": "localhost",<br/>"proxyPort": "5555"<br/>}</span></pre><p id="52e5" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">验证响应来自场景而非外部源的一种方法是，在执行步骤1至6时，暂时禁用互联网连接。另一种方法是修改您的场景文件，并查看响应是否与文件中的内容相同。确保您的计算机中仍然配置了系统代理设置，如上面第4步所述。</p><p id="dd8f" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">闪回管理服务器有各种配置参数可用于启动或停止HTTP到HTTPS代理服务，您将需要这些参数。闪回的git页面上的任何地方都没有直接提供这些参数中的大多数。唯一的办法就是挖掘代码找出答案。别担心，你不必这样做，我已经找到了一些你可以直接使用的。让我们来看看这些参数:</p><h1 id="1060" class="le lf ik bd lg lh li lj lk ll lm ln lo jq lp jr lq jt lr ju ls jw lt jx lu lv dt translated">嘲笑HTTPS的请求</h1><p id="6d8a" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated">模拟HTTPs事务类似于HTTP事务，但是它需要更多的配置。默认情况下，HTTPS事务是加密的，闪回无法对事务进行编码。为了启用闪回，我们需要创建一个证书颁发机构(CA)证书。Flashback将使用此证书通过攻击中间人来拦截HTTPS流量。</p><p id="fed9" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">有两种方法可以获得并向闪回提供证书。</p><ul class=""><li id="3a22" class="nk nl ik kb b kc kd kf kg ki nm km nn kq no ku np nq nr ns dt translated">从任何受信任的CA购买中间CA证书。</li><li id="df62" class="nk nl ik kb b kc nt kf nu ki nv km nw kq nx ku np nq nr ns dt translated">创建您自己的CA和证书，并将其添加到您的计算机的可信存储中。您需要将它作为自己的证书添加到CA可信存储中，它不会被操作系统识别和信任，因为它不是由可信CA颁发的。因此，所有通信都将被阻止。一旦您将证书添加到系统可信存储中，它就变得可为操作系统所信任。</li></ul><p id="6df2" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我现在将介绍如何创建您自己的CA证书，您可以按照下面的指南一步一步地盲目创建您自己的证书:</p><p id="7e2d" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><a class="ae ih" href="https://jamielinux.com/docs/openssl-certificate-authority/create-the-root-pair.html" rel="noopener ugc nofollow" target="_blank"><strong class="kb il">https://Jamie Linux . com/docs/OpenSSL-certificate-authority/create-the-root-pair . html</strong></a></p><p id="7104" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">一旦您获得证书，它只是一些配置来模拟HTTPS流量的问题。如果您按照上述步骤创建证书，您将获得一个证书'<em class="mb"> ca.cert.pem </em>'和一个私钥'<em class="mb"> ca.key.pem </em>'以及这些证书的证书和私钥的密码(说其'<em class="mb"> secretpassword </em>')。把它们放在手边，我们很快就会需要它们。</p><p id="9693" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">有两种方式可以提供证书闪回或者直接输入身份。<em class="mb"> pem </em>文件或创建。<em class="mb"> p12 </em>文件。</p><p id="a6c0" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">来创建。<em class="mb"> p12 </em>文件，获得以上两个文件后，运行以下命令:</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="d93e" class="mc lf ik mv b fv mz na l nb nc">openssl pkcs12 -export -out intermediateCA.p12 -inkey private/ca.key.pem -in certs/ca.cert.pem -name “secretpassword”</span></pre><p id="d778" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">它将为您生成intermediateCA.p12证书。现在我们已经准备好了所有的先决条件。</p><h2 id="f062" class="mc lf ik bd lg md me mf lk mg mh mi lo ki mj mk lq km ml mm ls kq mn mo lu mp dt translated">记录和重放HTTPS场景</h2><p id="3a9a" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated"><strong class="kb il"> 1 </strong>。只需点击下面的API</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="e738" class="mc lf ik mv b fv mz na l nb nc">POST <a class="ae ih" href="http://localhost:1234/admin?action=startFlashback" rel="noopener ugc nofollow" target="_blank">http://localhost:1234/admin?action=startFlashback</a></span></pre><p id="7c65" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">请求正文:</strong></p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="9240" class="mc lf ik mv b fv mz na l nb nc">{<br/>"sceneMode": "record",<br/>"sceneName": "httpsTestScene",<br/>"matchRule": "matchMethodBodyUri",<br/>"scenePath": "/tmp",<br/>"proxyHost": "localhost",<br/>"proxyPort": "5555",<br/>"caCertPath":"&lt;Path to your intermediateCA.p12 file&gt;/intermediate.p12",<br/>"caCertPwd":"secretpassword", //or the password you have chosen<br/>"caAlias": "&lt;CA alias name you provided when creating the CA certificate&gt;",<br/>"caKeyPwd": "secretpassword", //or the password you have chosen<br/>"caCertOU": "",<br/>"caCertO": "",<br/>"caCertCN": "",<br/>"caCertL": "",<br/>"caCertCC": ""<br/>}</span></pre><p id="cccc" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">R</strong><a class="ae ih" href="#4015" rel="noopener ugc nofollow">T5】efer此处了解更多参数详情 </a> <strong class="kb il">。</strong></p><p id="c437" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 2 </strong>。确保您的系统代理配置如下，您可以删除HTTP代理，如果你想我们之前配置。</p><figure class="mq mr ms mt fq hw fe ff paragraph-image"><div class="fe ff ny"><img src="../Images/e7185e13dd76690dfb4bb68755eb47bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1330/format:webp/1*gq01fdNnDgf8NRHVahAH9w.png"/></div></figure><blockquote class="ne nf ng"><p id="ad04" class="jz ka mb kb b kc kd jl ke kf kg jo kh nh kj kk kl ni kn ko kp nj kr ks kt ku hn dt translated">如果您正在使用任何REST客户端，您也可以选择仅在该REST客户端中配置代理设置，而不是在系统中配置，但是要确保您的所有请求都有这个代理。</p></blockquote><p id="95a6" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 3。</strong>点击任何HTTPS网站或网络服务</p><p id="dee9" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 4。</strong>停止闪回代理服务器:</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="e962" class="mc lf ik mv b fv mz na l nb nc">POST <a class="ae ih" href="http://localhost:1234/admin?action=shutDownFlashback" rel="noopener ugc nofollow" target="_blank">http://localhost:1234/admin?action=shutDownFlashback</a></span></pre><p id="6cc2" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il"> 5 </strong>。重播HTTPS录制的场景:</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="523a" class="mc lf ik mv b fv mz na l nb nc">POST <a class="ae ih" href="http://localhost:1234/admin?action=startFlashback" rel="noopener ugc nofollow" target="_blank">http://localhost:1234/admin?action=startFlashback</a></span></pre><p id="0783" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><strong class="kb il">请求正文:</strong></p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="6e9d" class="mc lf ik mv b fv mz na l nb nc">{<br/>"sceneMode": "playback",<br/>"sceneName": "httpstest2",<br/>"matchRule": "matchMethodBodyUri",<br/>"scenePath": "/tmp",<br/>"proxyHost": "localhost",<br/>"proxyPort": "5555",<br/>"caCertPath":"&lt;Path to your intermediateCA.p12 file&gt;/intermediate.p12",<br/>"caCertPwd":"secretpassword",<br/>"caAlias": "HTS",<br/>"caKeyPwd": "secretpassword",<br/>"caCertOU": "",<br/>"caCertO": "",<br/>"caCertCN": "",<br/>"caCertL": "",<br/>"caCertCC": ""<br/>}</span></pre><p id="84dc" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">6。确保您的系统代理按照<strong class="kb il">步骤2 </strong>进行配置。从您最喜欢的REST客户端或浏览器点击web服务或REST api。恭喜你成功了！</p><h1 id="245c" class="le lf ik bd lg lh li lj lk ll lm ln lo jq lp jr lq jt lr ju ls jw lt jx lu lv dt translated">闪回管理服务器的附加配置参数</h1><p id="d87e" class="pw-post-body-paragraph jz ka ik kb b kc lw jl ke kf lx jo kh ki ly kk kl km lz ko kp kq ma ks kt ku hn dt translated">以下是对各种闪回REST APIs的描述和其他可能的值。你可以根据自己的需要来选择。<strong class="kb il"> <em class="mb">匹配规则</em> ' </strong>可能是使用最多的。</p><pre class="mq mr ms mt fq mu mv mw mx aw my dt"><span id="8ed3" class="mc lf ik mv b fv mz na l nb nc">sceneMode-&gt; Should be either record or playback<br/>sceneName-&gt; Name of the scene, you can pass any value<br/>matchRule-&gt; Rule to match a request URL while replaying the scene. Possible match rules are matchEntireRequest, matchMethodUri, matchMethodBodyUri, matchMethodUriBodyWithAnyBoundary<br/>scenePath-&gt; Where to store the recorded scene with 'sceneName'<br/>proxyHost-&gt; HTTP or HTTPS proxy hostname to start<br/>proxyPort-&gt; HTTP or HTTPS proxy port on which proxy should start<br/>caCertPath-&gt; CA certificate path, required only for HTTPS proxy<br/>caCertPwd-&gt; CA certificate password, required only for HTTPS proxy<br/>caAlias-&gt; CA certificate Alias name, required only for HTTPS proxy<br/>caKeyPwd-&gt; CA private key password, required only for HTTPS proxy<br/>caCertOU-&gt; optional, required only for HTTPS proxy<br/>caCertO-&gt; optional, required only for HTTPS proxy<br/>caCertCN-&gt; optional, required only for HTTPS proxy<br/>caCertL-&gt; optional, required only for HTTPS proxy<br/>caCertCC-&gt; optional, required only for HTTPS proxy</span></pre><p id="504b" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated"><em class="mb">免责声明:请注意，本文可能包含少量来自官方</em> <a class="ae ih" href="https://github.com/linkedin/flashback" rel="noopener ugc nofollow" target="_blank"> <em class="mb">闪回git页面</em> </a> <em class="mb">的内容，以免改写。</em></p></div><div class="ab cl nz oa hc ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="hn ho hp hq hr"><p id="7fbc" class="pw-post-body-paragraph jz ka ik kb b kc kd jl ke kf kg jo kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">如果你有任何问题，请在下面发帖。快乐的嘲笑！</p></div></div>    
</body>
</html>