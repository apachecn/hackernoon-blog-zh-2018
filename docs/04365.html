<html>
<head>
<title>Functional Testing of ASP.NET core 2.1 MVC Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ASP.NETæ ¸å¿ƒ2.1 MVCåº”ç”¨ç¨‹åºçš„åŠŸèƒ½æµ‹è¯•</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/functional-testing-of-asp-net-core-2-1-mvc-application-d1651f997c3a?source=collection_archive---------11-----------------------#2018-05-23">https://medium.com/hackernoon/functional-testing-of-asp-net-core-2-1-mvc-application-d1651f997c3a?source=collection_archive---------11-----------------------#2018-05-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="b93f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åœ¨ASP.NETæ ¸å¿ƒ2.1ä¸­ï¼Œéšç€å¾®è½¯<a class="ae jp" href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing" rel="noopener ugc nofollow" target="_blank">çš„å‘å¸ƒï¼Œå»ºç«‹<a class="ae jp" href="https://hackernoon.com/tagged/functional" rel="noopener ugc nofollow" target="_blank">åŠŸèƒ½</a>æµ‹è¯•é¡¹ç›®å˜å¾—æ›´åŠ å®¹æ˜“ã€‚AspNetCore . MVC . testing</a>nu getåŒ…ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å»ºç«‹ä¸€ä¸ªåŠŸèƒ½æµ‹è¯•é¡¹ç›®ã€‚</p><h1 id="9550" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">å…ˆå†³æ¡ä»¶</h1><p id="c574" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">è¦éµå¾ªæœ¬æ•™ç¨‹ï¼Œæ‚¨åº”è¯¥æœ‰-</p><ol class=""><li id="4eb9" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated"><a class="ae jp" href="https://www.microsoft.com/net/download/dotnet-core/sdk-2.1.300-rc1" rel="noopener ugc nofollow" target="_blank">ã€‚NET Core 2.1 RC1 SDK </a>å’Œ</li><li id="c3dc" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated"><a class="ae jp" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSä»£ç </a>æˆ–<a class="ae jp" href="https://www.visualstudio.com/downloads/" rel="noopener ugc nofollow" target="_blank">Microsoft Visual Studio 2017</a>v 15.7é¢„è§ˆç‰ˆ1æˆ–æ›´æ–°ç‰ˆæœ¬ï¼Œå®‰è£…åœ¨æ‚¨çš„<a class="ae jp" href="https://hackernoon.com/tagged/system" rel="noopener ugc nofollow" target="_blank">ç³»ç»Ÿä¸Š</a></li></ol><h1 id="ae05" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">åˆ›å»ºæµ‹è¯•é¡¹ç›®</h1><p id="4347" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å¹¶å‘½åä¸º<code class="eh lh li lj lk b">HelloWorld</code>ï¼Œå› ä¸ºä¸ºä»€ä¹ˆä¸å‘¢ğŸ˜œã€‚æ‰“å¼€æ–‡ä»¶å¤¹å†…çš„<strong class="it hv"> PowerShell </strong>çª—å£(Shift + <code class="eh lh li lj lk b">right click</code>æ–‡ä»¶å¤¹å†…ä»»æ„ä½ç½®ï¼Œé€‰æ‹©<code class="eh lh li lj lk b">Open PowerShell window here</code>ï¼Œåˆ›å»ºä¸€ä¸ªè§£å†³æ–¹æ¡ˆ:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="f536" class="lt jr hu lk b fv lu lv l lw lx">dotnet new sln</span></pre><p id="8584" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨åœ¨<code class="eh lh li lj lk b">src</code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåŸºæœ¬çš„<strong class="it hv"> MVC </strong>é¡¹ç›®ï¼Œåœ¨<code class="eh lh li lj lk b">tests</code>ç›®å½•ä¸‹åˆ›å»º<strong class="it hv"> xunit </strong>é¡¹ç›®ï¼›</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="4402" class="lt jr hu lk b fv lu lv l lw lx">dotnet new mvc -o .\src\HelloWorld.Mvc</span><span id="1a9c" class="lt jr hu lk b fv ly lv l lw lx">dotnet new xunit -o .\tests\HelloWorld.FunctionalTests</span></pre><p id="93bb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å°†è¿™ä¸¤ä¸ªé¡¹ç›®æ·»åŠ åˆ°<strong class="it hv">è§£å†³æ–¹æ¡ˆ</strong>:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="7bf6" class="lt jr hu lk b fv lu lv l lw lx">dotnet sln add .\src\HelloWorld.Mvc\HelloWorld.Mvc.csproj</span><span id="2d39" class="lt jr hu lk b fv ly lv l lw lx">dotnet sln add .\tests\HelloWorld.FunctionalTests\HelloWorld.FunctionalTests.csproj</span></pre><p id="fb32" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä»<strong class="it hv">åŠŸèƒ½æµ‹è¯•</strong>é¡¹ç›®ä¸­å¼•ç”¨<strong class="it hv"> MVC </strong>é¡¹ç›®ï¼›</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="8d9f" class="lt jr hu lk b fv lu lv l lw lx">dotnet add .\tests\HelloWorld.FunctionalTests\HelloWorld.FunctionalTests.csproj reference .\src\HelloWorld.Mvc\HelloWorld.Mvc.csproj</span></pre><h1 id="c749" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">ç¼–å†™åŠŸèƒ½æµ‹è¯•</h1><p id="4028" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">æ·»åŠ <a class="ae jp" href="https://www.nuget.org/packages/Microsoft.AspNetCore.Mvc.Testing" rel="noopener ugc nofollow" target="_blank">å¾®è½¯ã€‚AspNetCore.Mvc.Testing </a>åˆ°åŠŸèƒ½æµ‹è¯•é¡¹ç›®:</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="a529" class="lt jr hu lk b fv lu lv l lw lx">dotnet add .\tests\HelloWorld.FunctionalTests\HelloWorld.FunctionalTests.csproj package Microsoft.AspNetCore.Mvc.Testing -v 2.1.0-rc1-final</span></pre><p id="fa1b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨åœ¨<strong class="it hv"> VSä»£ç </strong>æˆ–<strong class="it hv"> Visual Studio 2017 15.7é¢„è§ˆç‰ˆ1æˆ–æ›´æ–°ç‰ˆæœ¬</strong>ä¸­æ‰“å¼€é¡¹ç›®ï¼Œåœ¨<strong class="it hv"> HelloWorldå†…åˆ›å»ºä¸€ä¸ªæ–°ç±»ã€‚åŠŸèƒ½æµ‹è¯•</strong>é¡¹ç›®å¹¶å°†å…¶å‘½åä¸º<code class="eh lh li lj lk b">HomePageShould.cs</code></p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="cf06" class="lt jr hu lk b fv lu lv l lw lx">using HelloWorld.Mvc;<br/>using Microsoft.AspNetCore.Mvc.Testing;<br/>using System.Net;<br/>using System.Net.Http;<br/>using System.Threading.Tasks;<br/>using Xunit;</span><span id="30b8" class="lt jr hu lk b fv ly lv l lw lx">namespace HelloWorld.FunctionalTests<br/>{<br/>    public class HomePageShould : IClassFixture&lt;WebApplicationFactory&lt;Startup&gt;&gt;<br/>    {<br/>        private readonly HttpClient _client;</span><span id="15c9" class="lt jr hu lk b fv ly lv l lw lx">        public HomePageShould(WebApplicationFactory&lt;Startup&gt; factory)<br/>        {<br/>            _client = factory.CreateClient();<br/>        }</span><span id="6d65" class="lt jr hu lk b fv ly lv l lw lx">        [Fact]<br/>        public async Task ReturnHttpStatusCodeOk()<br/>        {<br/>            var response = await _client.GetAsync("/");</span><span id="f69b" class="lt jr hu lk b fv ly lv l lw lx">            Assert.Equal(HttpStatusCode.OK, response.StatusCode);<br/>        }<br/>    }<br/>}</span></pre><h1 id="c6a2" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">è¿è¡Œæµ‹è¯•</h1><p id="b819" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">ç°åœ¨è¿è¡Œ<strong class="it hv">æµ‹è¯•</strong>ã€‚å®ƒåº”è¯¥ä¼šå¤±è´¥ï¼Œå¹¶æ˜¾ç¤ºé”™è¯¯æ¶ˆæ¯</p><blockquote class="lz ma mb"><p id="6797" class="ir is mc it b iu iv iw ix iy iz ja jb md jd je jf me jh ji jj mf jl jm jn jo hn dt translated">æ¶ˆæ¯:ç³»ç»Ÿã€‚IO.FileNotFoundException:æ— æ³•åŠ è½½æ–‡ä»¶æˆ–ç¨‹åºé›†â€œMicrosoftã€‚AspNetCoreï¼ŒVersion=2.1.0.0ï¼ŒCulture=neutralï¼Œpublic key token = ADB 9793829 ddae 60 'ã€‚ç³»ç»Ÿæ‰¾ä¸åˆ°æŒ‡å®šçš„æ–‡ä»¶ã€‚</p></blockquote><p id="2d82" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¦è§£å†³ï¼ŒåŠ <a class="ae jp" href="https://www.nuget.org/packages/Microsoft.AspNetCore.App/" rel="noopener ugc nofollow" target="_blank">å¾®è½¯ã€‚AspNetCore.App </a> nugetåŒ…åˆ°<strong class="it hv">æµ‹è¯•</strong>é¡¹ç›®</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="5d2d" class="lt jr hu lk b fv lu lv l lw lx">dotnet add .\tests\HelloWorld.FunctionalTests\HelloWorld.FunctionalTests.csproj package Microsoft.AspNetCore.App -v 2.1.0-rc1-final</span></pre><p id="9d9e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨ä»<code class="eh lh li lj lk b">Test</code>&gt;<code class="eh lh li lj lk b">Run</code>&gt;<code class="eh lh li lj lk b">All Tests</code>(Visual Studio 2017)æˆ–ä»<strong class="it hv"> PowerShell </strong>è¿è¡Œæµ‹è¯•-</p><pre class="ll lm ln lo fq lp lk lq lr aw ls dt"><span id="5178" class="lt jr hu lk b fv lu lv l lw lx">dotnet test .\tests\HelloWorld.FunctionalTests\HelloWorld.FunctionalTests.csproj</span></pre><p id="a07d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä½ åº”è¯¥çœ‹åˆ°å¹¸ç¦çš„ç»¿è‰²å‹¾å·ã€‚</p><figure class="ll lm ln lo fq mg"><div class="bz el l di"><div class="mh mi l"/></div></figure></div></div>    
</body>
</html>