<html>
<head>
<title>Hacked Love, or how I’ve taken over a dating app and could possibly match with anybody</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客之爱，或者我如何接管了一个约会应用程序，并可能与任何人匹配</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hacked-love-or-how-ive-taken-over-a-dating-app-and-could-possibly-match-with-anybody-6f8c0acc3f47?source=collection_archive---------12-----------------------#2018-05-24">https://medium.com/hackernoon/hacked-love-or-how-ive-taken-over-a-dating-app-and-could-possibly-match-with-anybody-6f8c0acc3f47?source=collection_archive---------12-----------------------#2018-05-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="d634" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">我不被允许透露任何关于我刚刚入侵的公司的信息。我已经告诉他们所有导致我被利用的漏洞，他们仍在努力修复。</p></blockquote><p id="e125" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">故事开始于一周前，看了另一个Youtube视频。</p><p id="5df7" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">烦人的广告开始了，还剩5秒钟，我会旁若无人地拖延。</p><p id="e96a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">等等，我看到了什么？一家公司刚刚开始在我的国家为其新的<a class="ae jw" href="https://hackernoon.com/tagged/dating" rel="noopener ugc nofollow" target="_blank">约会</a>应用做广告！</p><p id="93ab" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我将最终浏览整个广告，而不会跳过它，它并不太坏。所以我决定继续下去，装在手机上。再一次，这个应用很酷，没有花哨的东西，但是还可以。</p><p id="ccde" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我忍不住想“嗯，这有用吗？”第一场比赛没有出现。</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff jx"><img src="../Images/17dcb5b49b33b84647594a1ec5d663a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b_Dh1MriNNN-1VxK."/></div></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">Oh boy, don’t you know my hacking skills</figcaption></figure><p id="df9d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我最近在电视上听说<strong class="ix hv">爱情</strong>可能发生在工作、健身房、活动等场合。</p><p id="1b0f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated"><strong class="ix hv">利用弱点来寻找我的灵魂伴侣怎么样？</strong></p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="106f" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">整个过程</h1><p id="bc79" class="pw-post-body-paragraph iu iv hu ix b iy ls ja jb jc lt je jf jt lu ji jj ju lv jm jn jv lw jq jr js hn dt translated">然而，另一个无偿赏金和打嗝套件社区版推出。</p><p id="ed70" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我把我的Android手机配置成使用Burp Proxy，并启动了我们称之为<strong class="ix hv"> SoulMate的约会应用。</strong></p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff lx"><img src="../Images/f96a6c0f5c11e30e6632b7cb655a83fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNfGfJk_szQ6Diz3s9ZwGQ.png"/></div></div></figure><p id="4a5e" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">根本没有拦截任何请求。</p><p id="b6bf" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我花了几分钟时间试图找出为什么应用程序完美运行时请求没有被拦截。</p><p id="0f4c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">懒得去问StackOverflow，我决定走另一条路来提高侦查阶段的效率。</p><blockquote class="ly"><p id="2ff3" class="lz ma hu bd mb mc md me mf mg mh js ek translated">Jadx，你在这里</p></blockquote><figure class="mj mk ml mm mn kc fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/43bb34a6a9da11430458c0d1b5561f4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*PWcEH_z2SlzKt3JuCwOQgQ.png"/></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">Abstract taken from <a class="ae jw" href="http://www.javadecompilers.com/apk" rel="noopener ugc nofollow" target="_blank">http://www.javadecompilers.com/apk</a></figcaption></figure><p id="84c2" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">当你使用Jadx时会发生这样的事情:</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff mo"><img src="../Images/4faf0709d6101ff0cf872b1ebc54912d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*siyGNOg3SJ-wNeRkNWFJdw.png"/></div></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">Actually this happens perfectly only if there’s no hard security strategy at APK level (uglifying, minimizing, refactoring processes = lot of stuff to make code neither readable nor understandable)</figcaption></figure><p id="d7e7" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">现在使用这个反编译器，我开始深入代码行。一个文件接一个文件，从资源到实际的Java逻辑。</p><p id="800c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">由于我的工作一直在处理<a class="ae jw" href="https://hackernoon.com/tagged/android" rel="noopener ugc nofollow" target="_blank"> Android </a>移动应用，所以我熟悉文件结构和常用库。</p><p id="bd92" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我很幸运地得到了几乎所有可读和可理解的东西。</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/38d0d92d0b955796565c4f6aa9d77f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/0*rW25RN6H1bhAz71D."/></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">Credits to ma-polimi : <a class="ae jw" href="https://www.slideshare.net/ma-polimi/how-to-create-an-application-in" rel="noopener ugc nofollow" target="_blank">https://www.slideshare.net/ma-polimi/how-to-create-an-application-in</a></figcaption></figure><p id="712d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">太令人兴奋了！我的侦察阶段终于步入正轨。</p><p id="c483" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">在收集Java源代码时，我偶然发现:</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="mq mr l"/></div></figure><p id="0ab7" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">进一步看，这是我的发现:</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="mq mr l"/></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">That’s my boy !!!</figcaption></figure></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="a7ab" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">邮差推出</h1><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff ms"><img src="../Images/0c4c2be168a643e1ccdd17ad027e30e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O4zMzvApALKjT8Lm.jpeg"/></div></div></figure><p id="d474" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">如果您对这个工具不熟悉，我会把它描述为创建HTTP请求和分析响应的最好的GUI。它有很多特性，我花了99%的时间在上面测试我的REST APIs。</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="9602" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我等不及了，所以我在《邮差》上做了一个无声的复制请求，就在这里:</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff mt"><img src="../Images/0c51ec3a3011ab8b67d0660467f3c612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfg1RlRKK55BZk1YiguQvw.png"/></div></div></figure><p id="c328" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">你猜怎么着？？？</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="mq mr l"/></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">That’s my boy !!!!</figcaption></figure><p id="6d81" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">到目前为止，我对我的发现感到非常高兴。我可以用Python脚本遍历所有的userid (1到5000 ),并获得所有的数据(我没有这样做)。</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="67ae" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">一切都可能就此停止</h1><p id="aa67" class="pw-post-body-paragraph iu iv hu ix b iy ls ja jb jc lt je jf jt lu ji jj ju lv jm jn jv lw jq jr js hn dt translated">我决定更进一步，在我看来密码似乎是MD5散列，所以我继续<a class="ae jw" href="http://md5decrypt.net/en/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hv">MD5解密</strong> </a> <strong class="ix hv">。</strong></p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff mu"><img src="../Images/a9bdd90baa681dfe57780d6e0d7c46e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-aZj7CLBCHVEIj6HVqbT4w.png"/></div></div></figure><p id="cd9b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">万岁！！！密码在哈希数据库中。</p><p id="c728" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我现在可以登录这个应用程序的几乎所有账户。</p><p id="5313" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这意味着我实际上可以:</p><ul class=""><li id="8b30" class="mv mw hu ix b iy iz jc jd jt mx ju my jv mz js na nb nc nd dt translated">发送和阅读信息</li><li id="7d55" class="mv mw hu ix b iy ne jc nf jt ng ju nh jv ni js na nb nc nd dt translated">就像我自己的个人资料在几秒钟内被匹配</li><li id="e6c0" class="mv mw hu ix b iy ne jc nf jt ng ju nh jv ni js na nb nc nd dt translated">删除或修改帐户</li><li id="290d" class="mv mw hu ix b iy ne jc nf jt ng ju nh jv ni js na nb nc nd dt translated">盗用电子身份</li></ul></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="794b" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">我可以就此打住吗？</h1><p id="d77b" class="pw-post-body-paragraph iu iv hu ix b iy ls ja jb jc lt je jf jt lu ji jj ju lv jm jn jv lw jq jr js hn dt translated">这个问题现在很严重。</p><p id="dfe6" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">来吧，我的第一个目标是找到我的灵魂伴侣，那些家伙只是给了我一张免费票，让我可以无限制地与我国最美丽的女孩比赛。</p><p id="fe66" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我想知道:“老兄，(实际上是在自言自语)你认为这些用户在这个应用程序和他们的邮件帐户上都有相同的密码吗？”</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff nj"><img src="../Images/413158a6ba45f3af4bf51a6bbc6f498e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zE7P22UWqd8RxOoZ."/></div></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">How kind of you ❤️</figcaption></figure><p id="c050" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">一切都变得真实了。</p><p id="01b4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">老实说:毕竟，这只是我日常黑客习惯的一个日常挑战。然而，出于好奇，我尝试并成功登录了45个测试邮件账户中的30个。</p><p id="5842" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">结果是可怕的。</p><p id="b91b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">如果一顶黑帽子偶然发现了这样一个弱点，对于那些只想寻找爱情的受害者来说，这可能是一场巨大的灾难。</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="8583" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">临终遗言</h1><p id="9722" class="pw-post-body-paragraph iu iv hu ix b iy ls ja jb jc lt je jf jt lu ji jj ju lv jm jn jv lw jq jr js hn dt translated">我就这个问题联系了公司，得到的回复是“我们会解决的，非常感谢”。</p><p id="530e" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">该公司没有运行一个bug赏金项目，但我仍然梦想着未来几周能有这样的事情发生:</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff nk"><img src="../Images/c48541377cc711927232e073b1f586d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iDnq-bq0SMkqSV_6."/></div></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">“Close-up of a man's hands holding a bundle of dollar bills and a cigarette” by <a class="ae jw" href="https://unsplash.com/@eatenbyflowers?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jeremy Paige</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c569" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我不会讨论保护机制，因为对我来说，在这种情况下唯一要做的事情就是用任何东西(JWT、http头、GET参数中的访问密钥、<strong class="ix hv">任何东西</strong>)实现认证过程，或者对数据传输进行加密。</p><p id="7bdf" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">关于Android应用程序，proguard子句中的一行可能会让我迷惑:<code class="eh nl nm nn no b">minifyEnabled: true</code></p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><p id="af36" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">保管好你的个人信息。</p><p id="f4b9" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">不要在任何地方使用相同的密码。</p><p id="f095" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">请停止使用“azerty”和“12345678”。(《阿泽12》也是如此)</p></div><div class="ab cl kn ko hc kp" role="separator"><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks kt"/><span class="kq bw bk kr ks"/></div><div class="hn ho hp hq hr"><h1 id="9567" class="ku kv hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">感谢阅读</h1><p id="f12f" class="pw-post-body-paragraph iu iv hu ix b iy ls ja jb jc lt je jf jt lu ji jj ju lv jm jn jv lw jq jr js hn dt translated">这是我第一次写这类文章，我当然希望你会喜欢。</p><p id="8b37" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">欢迎致电<strong class="ix hv">David . mell ul @ outlook . fr</strong></p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="kd ke di kf bf kg"><div class="fe ff np"><img src="../Images/cecf27a5167057755aef90aa62ead1f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HSTwK43-vbpfMvFK."/></div></div><figcaption class="kj kk fg fe ff kl km bd b be z ek">“Cappuccino in a white mug with white foam art on a wooden table” by <a class="ae jw" href="https://unsplash.com/@takeshi2?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">wu yi</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="nq mr l"/></div></figure></div></div>    
</body>
</html>