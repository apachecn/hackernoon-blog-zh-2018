<html>
<head>
<title>React with Typescript and Webpack</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Typescript和Webpack作出反应</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/react-with-typescript-and-webpack-654f93f34db6?source=collection_archive---------1-----------------------#2018-05-29">https://medium.com/hackernoon/react-with-typescript-and-webpack-654f93f34db6?source=collection_archive---------1-----------------------#2018-05-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/c30b9acf2dd844479047e07930e90487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sVEFEYd1sDqen7YrIrGgtw.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">The feeling, when you react, script and pack.</figcaption></figure><div class=""/><h1 id="ad0c" class="jg jh ij bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">我为什么要写这个</h1><p id="7e03" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">在撰写本文时，<a class="ae lc" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> <em class="ld"> React </em> </a> <em class="ld"> </em>的受欢迎程度已经达到顶峰，而<a class="ae lc" href="http://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> <em class="ld"> Typescript </em> </a>的受欢迎程度正在上升，可以肯定地说<a class="ae lc" href="https://webpack.js.org/" rel="noopener ugc nofollow" target="_blank"> <em class="ld"> Webpack </em> </a>是应用程序最受欢迎的现代模块捆绑器。然而，在用<em class="ld"> Typescript </em>和<em class="ld"> Webpack </em>进行<em class="ld"> React </em>的项目中，仍然缺乏一个很好的例子。话虽如此，如果你想使用<a class="ae lc" href="https://www.npmjs.com/package/create-react-app" rel="noopener ugc nofollow" target="_blank"><em class="ld">create-react-app</em></a>CLI或任何其他react初学者工具包，那里有很好的资源。但是，如果您想控制应用程序的配置，这种方法非常少。</p><p id="c214" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">使用像create-react-app这样的cli的缺点是，您必须像create-react-app一样依赖以下工具</p><ul class=""><li id="b867" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated"><strong class="kg ik">网络包</strong></li><li id="c054" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik">巴别塔</strong></li><li id="4341" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik">带自动预修正器的post CSS</strong></li><li id="6f0d" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik">笑话</strong></li><li id="4d75" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik">流量(可选)</strong></li></ul><p id="7864" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">如果你非常不喜欢以上任何一个，你将很难接受它。<em class="ld"> create-react-app </em>兑现了它的承诺‘<em class="ld">无构建配置’</em>，因为你根本无法配置这个工具。它提供了一种弹出工具的方法，如果您想进一步扩展配置，可以放开create-react-app，但我为什么要这样做呢？如果我一开始就处理配置，不是会容易得多吗？此外，一旦你退出，你的项目的依赖项将会增加，其中一半你可能甚至不需要。说了这么多，如果你正在寻找一个初学者或一个中小型项目，它可能是让你的项目开始的最好的react工具包。</p><p id="de13" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">如果您想建立一个包含以下内容的项目，您可能会发现本文很有帮助:</p><ul class=""><li id="7895" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated"><strong class="kg ik"> React </strong> —主要前端框架</li><li id="7875" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"> Typescript </strong> —编译成javascript的主要语言</li><li id="4a90" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"> Webpack </strong> —应用捆绑器。</li><li id="7207" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"> Express </strong> —将托管react应用程序的服务器</li><li id="042d" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik">Hot Module Reload</strong>——当服务器运行到浏览器时，它将服务并加载您所做的所有代码更改，而无需您停止并再次运行您的应用程序。</li></ul></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="d488" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated">让反应、脚本和包装开始吧！</h1><p id="0466" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">在我们开始之前，在你的驱动器中创建一个空的文件夹来重新开始。如果您使用的是windows机器，请在命令行终端键入以下三个命令。</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="b614" class="ms jh ij mo b fv mt mu l mv mw">mkdir react-ts-webpack<br/>cd react-ts-webpack<br/>code .</span></pre><p id="fe30" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">最后一个命令将最近创建的空文件夹作为一个项目在Visual Studio代码中打开，这是一个相当流行的编辑器，您很可能拥有它。如果没有，请在您最喜欢的编辑器中打开它。</p><p id="ceba" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">因此，按照流行的传统，当您创建一个新项目时，通过在终端中键入下面一行来初始化我们项目中的npm。</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="34c0" class="ms jh ij mo b fv mt mu l mv mw">npm init -y</span></pre><p id="9971" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">现在，我们将创建一些设置项目所需的文件和文件夹。因此，在您的文件夹的根目录下创建以下文件/文件夹。</p><ul class=""><li id="177d" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated">创建文件<strong class="kg ik"><em class="ld">webpack . config . js</em></strong>:<em class="ld">这是针对web pack配置的</em></li><li id="538a" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated">创建文件<strong class="kg ik"><em class="ld">ts config . JSON</em></strong>:<em class="ld">这是用于类型脚本配置</em></li><li id="ec70" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated">创建文件<strong class="kg ik"><em class="ld">server . js:</em></strong><em class="ld">这是您的服务器启动应用程序</em></li><li id="e51b" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated">创建文件夹<strong class="kg ik"> <em class="ld"> src。</em> </strong></li><li id="be5e" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated">在<strong class="kg ik"> <em class="ld"> src内创建文件夹<strong class="kg ik"> <em class="ld"> app </em> </strong>。</em> </strong></li><li id="4044" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated">创建一个文件<strong class="kg ik"><em class="ld">【index.html】</em><em class="ld"/><strong class="kg ik"><em class="ld">app</em></strong>和文件夹<strong class="kg ik"> <em class="ld">组件</em> </strong></strong></li><li id="96ae" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated">创建文件<strong class="kg ik"> <em class="ld"> App.tsx </em> </strong>内<strong class="kg ik"> <em class="ld"> app </em> </strong>和<strong class="kg ik"> <em class="ld"> Hello.tsx </em> </strong>内<strong class="kg ik"> <em class="ld">组件</em> </strong></li></ul><p id="e73f" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">因此，应用程序的文件夹结构如下所示</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="fdaf" class="ms jh ij mo b fv mt mu l mv mw">|-src<br/>  |-app<br/>    |-components<br/>      |-Hello.tsx<br/>    |-App.tsx<br/>    |-index.html<br/>|-package.json<br/>|-package-lock.json<br/>|-server.js<br/>|-tsconfig.json<br/>|-webpack.config.js</span></pre></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="87ce" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated">开始下载吧！</h1><p id="0956" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">现在，我们将下载我们的生产和开发依赖项。</p><h2 id="9cf8" class="ms jh ij bd ji mx my mz jm na nb nc jq kp nd ne ju kt nf ng jy kx nh ni kc nj dt translated">下载生产依赖项</h2><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="0ef6" class="ms jh ij mo b fv mt mu l mv mw">npm i react react-dom express typescript --save</span></pre><h2 id="6dd5" class="ms jh ij bd ji mx my mz jm na nb nc jq kp nd ne ju kt nf ng jy kx nh ni kc nj dt translated">下载开发依赖项</h2><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="6374" class="ms jh ij mo b fv mt mu l mv mw">npm i @types/react @types/react-dom webpack webpack-cli ts-loader webpack-dev-middleware webpack-hot-middleware html-webpack-plugin source-map-loader -D</span></pre><p id="dba4" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">恭喜你！我们几乎已经完成了一半，却没有编写任何代码。</p></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="a0aa" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated"><strong class="ak">我们来码！</strong></h1><p id="c810" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">这是你刚刚创建的文件的内容。您可以从这里将它们粘贴到您的相关项目上(要点链接嵌入在文件的标题中)或键入。</p><ul class=""><li id="d74d" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated"><a class="ae lc" href="https://gist.github.com/saurabhpati/a8edad483034ef978f0d05943fae3ebe" rel="noopener ugc nofollow" target="_blank"><em class="ld">index.html</em></a><em class="ld">:</em></li></ul><figure class="mj mk ml mm fq hw"><div class="bz el l di"><div class="nk nl l"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek"><a class="ae lc" href="https://gist.github.com/saurabhpati/5599dcb6e8f8c1752625d41ddca24055" rel="noopener ugc nofollow" target="_blank">index.html</a></figcaption></figure><ul class=""><li id="b039" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated"><a class="ae lc" href="https://gist.github.com/saurabhpati/4f681572f5c03683eca7a804c8b80c78" rel="noopener ugc nofollow" target="_blank"><em class="ld">ts config . JSON</em></a><em class="ld">:</em></li></ul><figure class="mj mk ml mm fq hw"><div class="bz el l di"><div class="nk nl l"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">tsconfig.json</figcaption></figure><ul class=""><li id="2f04" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated"><a class="ae lc" href="https://gist.github.com/saurabhpati/5599dcb6e8f8c1752625d41ddca24055" rel="noopener ugc nofollow" target="_blank"><em class="ld">web pack . config . js</em></a>:</li></ul><figure class="mj mk ml mm fq hw"><div class="bz el l di"><div class="nk nl l"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">webpack.config.js</figcaption></figure></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="f259" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated">让我们稍微反应一下！</h1><p id="a50d" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">让我们编写一个典型的react组件，毕竟这是您在完成设置后将要并且应该关注的代码。</p><p id="0f30" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">因此，您可以按照自己的意愿编写或粘贴代码。</p><p id="0bac" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated"><strong class="kg ik">T5】hello . tsx:T7】</strong></p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="e296" class="ms jh ij mo b fv mt mu l mv mw">import * as React from 'react';</span><span id="3154" class="ms jh ij mo b fv nm mu l mv mw">interface IProps {<br/>   compiler: string,<br/>   framework: string,<br/>   bundler: string<br/>}</span><span id="fc94" class="ms jh ij mo b fv nm mu l mv mw">export class Hello extends React.Component&lt;IProps, {}&gt; {<br/>   render() {</span><span id="e41d" class="ms jh ij mo b fv nm mu l mv mw">   return &lt;h1&gt;This is a {this.props.framework} application using    {this.props.compiler} with {this.props.bundler}&lt;/h1&gt;<br/>   }<br/>}</span></pre><p id="2a59" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated"><strong class="kg ik"> <em class="ld"> App.tsx </em> : </strong></p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="11cd" class="ms jh ij mo b fv mt mu l mv mw">import * as React from 'react';<br/>import * as ReactDOM from 'react-dom';<br/>import { Hello } from './components/Hello';</span><span id="ab16" class="ms jh ij mo b fv nm mu l mv mw">ReactDOM.render(&lt;Hello compiler="Typescript" framework="React" bundler="Webpack" /&gt;,</span><span id="a73f" class="ms jh ij mo b fv nm mu l mv mw">document.getElementById('root'));</span></pre></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="e35c" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated">我们去打包吧！</h1><p id="6898" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">如果您不熟悉webpack，下面提供了关于选项的简介。如果你已经知道这些东西，请随意跳过它。</p><ul class=""><li id="8352" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated"><strong class="kg ik"><em class="ld">entry</em></strong>:web pack的工作方式是你给它提供一个entry，它就开始构建你的应用程序，查看你的entry导入的内容并相应地创建一个依赖图，你给这个对象提供的属性越多，它将要创建的bundles数量就越多，所以通过查看<em class="ld"> entry </em>和<em class="ld"> output </em> config，你可以猜测它将会创建<em class="ld"> app.bundles.js </em>和<em class="ld"> vendor.bundles之所以要有单独的包，是因为react和react-dom代码不太可能被更改，所以将它们作为单独的包(称为vendor)对于您的浏览器来说是有意义的，这样可以缓存它们以提高性能。app属性中的webpack-hot-middleware/client用于支持实时重新加载app代码。</em></li><li id="9477" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"> <em class="ld">输出</em> : </strong>当Webpack必须将捆绑代码从您的应用程序发送到磁盘时，它会查看此配置。<em class="ld"> path </em>是要写入代码的输出目录，<em class="ld"> filename </em>顾名思义就是要给输出代码的文件名。</li><li id="0e2c" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"><em class="ld">dev tool:</em></strong>web pack查看这个配置来添加某些开发工具。这里添加了源代码映射，以便在浏览器中对代码进行源代码映射，从而可以在开发时简化调试。</li><li id="0a91" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"><em class="ld">resolve</em></strong>:web pack在这里决定是否考虑捆绑这个文件，所以在我们的应用程序中，它考虑捆绑扩展名为“<em class="ld"> js </em>”、“<em class="ld"> jsx </em>”、“<em class="ld"> json </em>”、“<em class="ld"> ts </em>”、“<em class="ld"> tsx </em>”的文件。</li><li id="bad4" class="lj lk ij kg b kh ls kl lt kp lu kt lv kx lw lb lo lp lq lr dt translated"><strong class="kg ik"> <em class="ld">模块:</em> </strong>该配置使webpack能够在应用请求时，在加载器的帮助下加载特定文件。在我们的应用程序中，我们使用ts-loader和source-map-loader。source-map-loader已经在上面介绍过了。因此，如果没有<em class="ld"> ts-loader </em>，webpack将无法理解<em class="ld"> App.tsx </em>文件中的这一导入，因为<em class="ld"> Hello </em>组件是一个您的编辑器可以理解的‘<em class="ld">tsx</em>文件，但当导入实际发生时，webpack无法理解。</li></ul><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="60a4" class="ms jh ij mo b fv mt mu l mv mw">import { Hello } from './components/Hello';</span></pre><ul class=""><li id="f681" class="lj lk ij kg b kh le kl lf kp ll kt lm kx ln lb lo lp lq lr dt translated">插件:Webpack不能做所有的事情，我们期望它做所有的事情是错误的。因此，它通过提供插件来克服它的限制，让它扩展到超出它的能力，如<em class="ld"> html-webpack-plugin </em>从我们的<em class="ld">src</em>文件夹中的<em class="ld">index.html</em>文件创建一个模板文件提供给浏览器，而<em class="ld"> HotModuleReplacement </em>插件使我们的代码能够热重装，从而消除了每次对应用程序进行更改时停止服务器并再次运行它的需要。</li></ul></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="e35e" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated">我们来建吧！</h1><p id="18d5" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">现在，您实际上可以手动构建您的应用程序了。在稍后运行我们的服务器之前，我们将自动开始构建。但是现在，如果您想看看到目前为止所做的工作，只需在package.json文件中添加一个“build”脚本，然后执行webpack命令。</p><p id="67f6" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated"><strong class="kg ik">T23】package . JSONT25】:</strong></p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="f879" class="ms jh ij mo b fv mt mu l mv mw">...<br/>scripts: {<br/>...<br/><strong class="mo ik">"build": "./node_modules/.bin/webpack",</strong><br/>...<br/>}<br/>...</span></pre><p id="5d34" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">如果您进入终端并运行这个命令，您可以在dist文件夹中查看您的捆绑应用程序。</p><p id="aa73" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated"><em class="ld">在你的终端上运行这个:</em></p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="6da4" class="ms jh ij mo b fv mt mu l mv mw">npm run build</span></pre><p id="2096" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated"><em class="ld">终端输出:</em></p><figure class="mj mk ml mm fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nn"><img src="../Images/bd09d4a81559a0f0756234f3ebc998d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/1*gRAXXpbFRPUq08wrNU0FqA.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">npm run build</figcaption></figure><figure class="mj mk ml mm fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff no"><img src="../Images/99ac99a333e4899a9ed34788169c2455.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*ySNVVrc_0W9YAj5SNINJMQ.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">bundled code</figcaption></figure><h1 id="a57f" class="jg jh ij bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">来表达一下吧！</h1><p id="3281" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">如果您不想使用express为您的react应用程序运行服务器，您可以使用<a class="ae lc" href="https://www.npmjs.com/package/webpack-dev-server" rel="noopener ugc nofollow" target="_blank"><em class="ld">web pack-dev-server</em></a>来处理它，并且您不必自己编写服务器，但是如果您希望拥有自定义服务器的灵活性，以便您编写中间件、处理路由以及修改请求和响应，那么建议您编写自己的服务器。在撰写本文时，<em class="ld"> webpack-dev-server </em>还没有计划新的特性，并且处于仅维护模式。</p><figure class="mj mk ml mm fq hw fe ff paragraph-image"><div class="fe ff np"><img src="../Images/639c4fac0b129c2685b1b32f5303b0c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*02Cw42h8BKzPAZk3CuLZHA.png"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek"><a class="ae lc" href="https://www.npmjs.com/package/webpack-dev-server" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/webpack-dev-server</a></figcaption></figure><p id="f793" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated"><strong class="kg ik"> <em class="ld"> server.js: </em> </strong></p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="5d2e" class="ms jh ij mo b fv mt mu l mv mw">const path = require('path'),<br/>   express = require('express'),<br/>   webpack = require('webpack'),<br/>   webpackConfig = require('./webpack.config.js'),<br/>   app = express(),<br/>   port = process.env.PORT || 3000;</span><span id="7f11" class="ms jh ij mo b fv nm mu l mv mw">app.listen(port, () =&gt; { console.log(`App is listening on port ${port}`) });</span><span id="ca98" class="ms jh ij mo b fv nm mu l mv mw">app.get('/', (req, res) =&gt; {<br/>   res.sendFile(path.resolve(__dirname, 'dist', 'index.html'));<br/>});</span><span id="99a3" class="ms jh ij mo b fv nm mu l mv mw">let compiler = webpack(webpackConfig);<br/>app.use(require('webpack-dev-middleware')(compiler, {<br/>   noInfo: true, publicPath: webpackConfig.output.publicPath, stats:    { colors: true }<br/>}));<br/>app.use(require('webpack-hot-middleware')(compiler));<br/>app.use(express.static(path.resolve(__dirname, 'dist')));</span></pre><p id="3dad" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">现在您可以转到package.json并添加启动脚本</p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="2702" class="ms jh ij mo b fv mt mu l mv mw"><strong class="mo ik">"start": "npm run build &amp;&amp; node server.js"</strong></span></pre></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><h1 id="a77d" class="jg jh ij bd ji jj me jl jm jn mf jp jq jr mg jt ju jv mh jx jy jz mi kb kc kd dt translated">让我们重新装弹！</h1><p id="351e" class="pw-post-body-paragraph ke kf ij kg b kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb hn dt translated">一旦您通过在终端中运行'<em class="ld"> npm start </em>'来运行服务器，webpack-dev-middleware和webpack-hot-middleware应该负责热模块替换，但事实并非如此。</p><p id="07ed" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">您可能会注意到，在您做出更改后，webpack会适时地编译并发出更改后的代码，但它只有在您刷新浏览器时才会生效。这不是我们的初衷。在重新构建更改的组件后，浏览器应该已经刷新。</p><figure class="mj mk ml mm fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nq"><img src="../Images/1ba3419d4b6b6a5169c51822541b455a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wPdbe2rygWK23Q97kGqmqQ.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">HMR in action</figcaption></figure><p id="e5cc" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">为了解决这个问题，我们需要稍微修改一下我们的'<em class="ld"> App.tsx' </em></p><pre class="mj mk ml mm fq mn mo mp mq aw mr dt"><span id="70f2" class="ms jh ij mo b fv mt mu l mv mw">import * as React from 'react';<br/>import * as ReactDOM from 'react-dom';<br/>import { Hello } from './components/Hello';<br/><strong class="mo ik">declare let module: any</strong></span><span id="773b" class="ms jh ij mo b fv nm mu l mv mw">ReactDOM.render(&lt;Hello compiler="Typescript" framework="React..." bundler="Webpack" /&gt;,<br/>document.getElementById('root'));</span><span id="3131" class="ms jh ij mo b fv nm mu l mv mw"><strong class="mo ik">if (module.hot) {<br/>   module.hot.accept();<br/>}</strong></span></pre><p id="f019" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">因此，基本上我们说我们的应用程序接受webpack所做的热重装更改。需要声明部分，因为默认情况下'<em class="ld">模块</em>'对象上不存在' hot '属性，我们需要请求typescript允许它。</p><p id="bcf2" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">一旦您在此更改后重新启动服务器，它将按预期工作。</p><figure class="mj mk ml mm fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nr"><img src="../Images/d45cb0aceb9387c8365164193ef89d30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nKcTwz4jTjn8kQrwCBIxlg.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">HMR Fixed</figcaption></figure></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="b0fd" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">如果您想查看完整的锅炉板创建。您可以从该存储库克隆/下载</p><div class="ht hu fm fo hv ns"><a href="https://github.com/saurabhpati/react-ts-webpack-boilerplate" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab ej"><div class="nu ab nv cl cj nw"><h2 class="bd ik fv z el nx eo ep ny er et ii dt translated">saurabhpati/react-ts-web pack-boilerplate</h2><div class="nz l"><h3 class="bd b fv z el nx eo ep ny er et ek translated">这是react应用程序需要的终极轻量级样板文件，使用…</h3></div><div class="oa l"><p class="bd b gc z el nx eo ep ny er et ek translated">github.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ib ns"/></div></div></a></div></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="c3f6" class="pw-post-body-paragraph ke kf ij kg b kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx li kz la lb hn dt translated">我会尝试添加代码分割来进一步提高构建过程的效率，并且很乐意收到关于这篇文章的任何反馈。</p></div></div>    
</body>
</html>