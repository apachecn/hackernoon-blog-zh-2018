<html>
<head>
<title>A Beginner’s Guide to Blockchain Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">区块链编程初学者指南</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-beginners-guide-to-blockchain-programming-4913d16eae31?source=collection_archive---------0-----------------------#2018-05-30">https://medium.com/hackernoon/a-beginners-guide-to-blockchain-programming-4913d16eae31?source=collection_archive---------0-----------------------#2018-05-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/1d05613aeb1a8397f9518fb6ccfd838b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s82BkVHBmCNtitKlyKOUpw.jpeg"/></div></div></figure><div class=""/><p id="7b6d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我寻求理解区块链如何工作的过程中，我有很多问题。最重要的是<strong class="je ig"> <em class="ka">“我如何在其上构建应用程序？”</em> </strong>。经过几周的挖掘、阅读和实验，终于得到了它。我找不到简短而全面的指南。现在，我有了一些像样的理解，我想写一个可以帮助别人。这是一个轻量级的速度指南，为了减少学习曲线，我只保留了重要的部分。</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/4620f371581c46a8a0c5472bbf861c29.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*VTMqttHkEz4zxLR__0-_Qw.png"/></div></figure><h1 id="136e" class="kg kh if bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">章</h1><ol class=""><li id="3d95" class="le lf if je b jf lg jj lh jn li jr lj jv lk jz ll lm ln lo dt translated">区块链的目的</li><li id="9b82" class="le lf if je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">区块链是怎么发明的？</li><li id="617f" class="le lf if je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">以太坊和智能合约简介</li><li id="4141" class="le lf if je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">以太坊上的智能合约编程</li><li id="dcb5" class="le lf if je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">前进的道路</li></ol><h1 id="02f3" class="kg kh if bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">区块链的目的</h1><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/64564e3e952aef6a5cf2ac8aa346cb45.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*pEdqYAkY57UG2gW4YR5mQQ.png"/></div></figure><p id="ad8b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka"> Roopa住在德里的一个偏远地区。印度政府每月分配给她少量的食物资源。因为她属于BPL(贫困线以下)类别。政府通过中间人来分配这些食物资源。只有三分之一的分配食物资源到达像Roopa这样的人手中，其余的由中间人出售牟利。</em></p><p id="a8a0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">莎拉写小说，并在亚马逊上发表。她很不高兴，因为亚马逊收取销售额的50%作为佣金。这不公平，因为只有她一个人付出了写作和营销的努力。</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lu"><img src="../Images/aa43537d575c4391fd46e57d2496e15a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SOUbaS5u819FbEoWu_N9Eg.png"/></div></div></figure><p id="193e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">问题是中间人渴望权力和金钱。他们的座右铭已经变成了“不惜任何代价获取利润”，为了支持生产者和赋予穷人权力，我们需要中间商行为合乎道德。那几乎是不可能实现的，<strong class="je ig"> <em class="ka">但是如果我们可以用一个自治系统代替中间人呢？</em>T13】</strong></p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lv"><img src="../Images/a50bb1f553f8fe3535b950936f7ab1da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UIiKcXCyz4-2IFa0qW9U5Q.png"/></div></div></figure><p id="f068" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因为计算机没有偏见，它们既不需要钱也不需要能量。2008年，当Satoshi Namakato利用区块链技术发明比特币时，这可能是他的想法。</p><h1 id="2e07" class="kg kh if bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">区块链是怎么发明的？</h1><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/815945d8878271455d54a3b1bf23850f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/format:webp/1*DtN4Yq0zixPProZMtQD6fQ.png"/></div></figure><p id="9e1a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">随着时间的推移，货币发生了演变，每一次演变都降低了其生产成本，并使其交易更加方便。金币的生产成本很高。纸币的发明解决了这个问题。但是，在计算机和互联网发明之后，人们发现了一种更好的方式来使交易变得方便和快捷。</p><p id="5cbf" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了安全保存我们一生的收入，并促进数字交易，我们需要一个中间人(银行)。这使得银行变得强大，他们可以对我们的取款/交易收取高额费用，出售我们的私人信息，等等</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/1183a745f5eba298d524f86ff3962adf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*cDGAIZFM-p1pSxeVf_OtzQ.png"/></div></figure><p id="8833" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">银行对资金的渴求导致了2008年的金融危机。银行不尊重客户的隐私。他们薄弱的安全系统导致了数字欺诈。</p><p id="d11f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">货币的下一次进化必须解决以下问题。</p><ol class=""><li id="1613" class="le lf if je b jf jg jj jk jn ly jr lz jv ma jz ll lm ln lo dt translated">它不应该存储在一个中央实体中。</li><li id="7ce2" class="le lf if je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">它需要高度安全。</li><li id="225a" class="le lf if je b jf lp jj lq jn lr jr ls jv lt jz ll lm ln lo dt translated">它应该确保隐私。</li></ol><p id="968d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">由于法定货币由政府控制，Satoshi别无选择，只能发明一种新货币(比特币)。他借助对等网络和密码学解决了这些问题。</p><h2 id="fb52" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">分散</h2><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mp"><img src="../Images/f7ed0e2f211d5afb1e2405b5ad32dc61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qf1X72RUAXvGncmslXujdA.png"/></div></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">Credits : <a class="ae mu" href="https://www.google.com/url?sa=i&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwipraWlgZHbAhXFRo8KHY7GDpsQjxx6BAgBEAI&amp;url=https%3A%2F%2Fxkcd.com%2F350%2F&amp;psig=AOvVaw16mXSfPPAdqG8YZQXCdSYi&amp;ust=1526792963456864" rel="noopener ugc nofollow" target="_blank">xkcd</a></figcaption></figure><p id="e50e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Torrents使用点对点技术来共享文件。torrent应用程序不从中央服务器或单台计算机下载文件，而是连接到其网络中的人，找出谁拥有该文件，并从他们的计算机上下载。</p><p id="1120" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你从世界各地不同的电脑上得到文件的碎片。如果网络中的一个人离开了，你的下载不会受到影响，因为还有其他人可以共享文件。</p><p id="7b28" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Satoshi采用了这项技术，因为它以分散的方式存储资金。没有一个实体能够控制它。</p><h2 id="eb81" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">密码系统</h2><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff mv"><img src="../Images/256626023f341c248b680da88ce4c1d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*97gTTbDX5MPCSw0qvhiySA.png"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">Credits : <a class="ae mu" href="https://www.google.com/url?sa=i&amp;source=images&amp;cd=&amp;cad=rja&amp;uact=8&amp;ved=2ahUKEwidmv_HgZHbAhXIrI8KHc_bCL0Qjxx6BAgBEAI&amp;url=https%3A%2F%2Fxkcd.com%2F153%2F&amp;psig=AOvVaw0T82cRL8QpgULqBn2-N57f&amp;ust=1526793072257766" rel="noopener ugc nofollow" target="_blank">xkcd</a></figcaption></figure><p id="15dc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在密码学中，人们可以对信息进行数字签名。为了做到这一点，我们需要三样东西:公钥、私钥和消息。</p><p id="852b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">公钥和私钥是一组数学上相关的长字符。公钥像用户名一样是公开的，私钥像密码一样是秘密的。</p><p id="a9de" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">消息是您想要授权的信息，例如:“<em class="ka">我授权您支付约翰100美元</em>”。</p><p id="79cd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你输入带有公钥、私钥和消息的算法。加密算法将产生一个签名。这是该消息内容特有的另一组字符。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="2d0d" class="mb kh if mx b fv nb nc l nd ne"><strong class="mx ig">Public Key <br/></strong>-----BEGIN EC PUBLIC KEY----- MFkwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE50uE+YSxqDgMkFByhpcgTVqXCqHO h68Ljt1z0jklDff/WV7xo+U6o3REBtK/C0/LM+Ef3FB3wR9aXMGNMLb9EA== -----END EC PUBLIC KEY-----</span><span id="e61e" class="mb kh if mx b fv nf nc l nd ne"><strong class="mx ig">Private Key <br/></strong>-----BEGIN EC PRIVATE KEY----- MIGHAgEAMBMGByqGSM49AgEGCCqGSM49AwEHBG0wawIBAQQgwqIsXl9FqsgrzMdx axI6flBwWIev0Z7i+WF4j8BGnrKhRANCAATnS4T5hLGoOAyQUHKGlyBNWpcKoc6H rwuO3XPSOSUN9/9ZXvGj5TqjdEQG0r8LT8sz4R/cUHfBH1pcwY0wtv0Q -----END EC PRIVATE KEY-----</span><span id="fd47" class="mb kh if mx b fv nf nc l nd ne"><strong class="mx ig">Message<br/></strong>Hello World</span><span id="50f8" class="mb kh if mx b fv nf nc l nd ne"><strong class="mx ig">Signature<br/></strong>B0A9A4F641D3A2E3A65576B7311DCD62ABE78BBF4D3F5FE856598508E24FCB2E6F0277C2F8D57E9E2E108B7C493986E783F5316B8046597019951669B4EE6922</span></pre><p id="1f3e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了验证消息，必须输入公钥、消息和签名。加密算法可以验证消息是否由公钥的所有者签名。</p><p id="19bf" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">破解密码算法需要1000年。由于我们的计算能力有限，这不可能做得更快。未来的量子计算机可能会挑战这一点。但是，比特币系统可以升级以确保安全。</p><p id="974d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Satoshi在他的系统中加入了加密技术，以帮助人们授权从钱包中进行比特币交易。</p><h2 id="976d" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">隐私</h2><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff ng"><img src="../Images/f95ebb6282ed4da7c88242a89caea927.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/1*0_TOYrkhrcm3kFlHY_9pCQ.png"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">Credits : <a class="ae mu" href="https://xkcd.com/1269/" rel="noopener ugc nofollow" target="_blank">xkcd</a></figcaption></figure><p id="f576" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你通过生成钱包(公钥/私钥)注册到比特币。系统不会收集任何信息，如电子邮件id、全名等。因此你是匿名的，除非你公布你的公钥。</p><h2 id="13c0" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">把它放在一起</h2><p id="973c" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn nh jp jq jr ni jt ju jv nj jx jy jz hn dt translated">Satoshi使用加密技术和点对点网络建立了一个共享账本。当某人向某人发送比特币时，消息会被加密签名并向网络中的所有人广播。他们更新他们的分类账，因此网络中的每个人都知道谁拥有什么。</p><h2 id="0c28" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">区块链</h2><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/83d1fa2d2c649ccc77c74377da5b40c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1394/format:webp/1*RfHWw4BVtWSSEEy10zY_wQ.png"/></div></figure><p id="080f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每隔十分钟，事务被分组到一个块中，并链接回以前的块。这个过程形成了连续的区块链。挖掘是一个确认区块的过程，这涉及到网络中的计算机来解决一个数学问题。第一个解决这个问题的计算机/矿工将获得凭空制造的比特币奖励。</p><p id="f1cd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦数据块被确认并添加到网络中，它就会在整个网络中复制。区块链是在制作自动比特币系统的过程中发明的，该系统在没有人工干预的情况下确认交易。如果你在寻找对区块链的简单解释，这里有一个故事。</p><div class="ht hu fm fo hv nl"><a href="https://hackernoon.com/a-beginners-guide-to-blockchain-d04266844e7" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab ej"><div class="nn ab no cl cj np"><h2 class="bd ig fv z el nq eo ep nr er et ie dt translated">区块链初学者指南</h2><div class="ns l"><h3 class="bd b fv z el nq eo ep nr er et ek translated">我不明白为什么人们觉得理解区块链很难。我想知道为什么我自己没有。那是在2013年我第一次…</h3></div><div class="nt l"><p class="bd b gc z el nq eo ep nr er et ek translated">hackernoon.com</p></div></div><div class="nu l"><div class="nv l nw nx ny nu nz ib nl"/></div></div></a></div><h1 id="d3fe" class="kg kh if bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">以太坊和智能合约简介</h1><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/63ed39d542c518cada48d88a4ea70c08.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*0EQ38xmXUUKdJ87gXs6lAw.png"/></div></figure><p id="34f6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">前面我们谈到了用自治系统代替中间人。这可以通过编程来实现。比特币的系统让人们很难编写自主系统的代码。</p><p id="6c28" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，Vitalik Buterin建立了一种新的加密货币叫做以太坊。它不仅是一种去中心化的加密货币，也是一个计算机网络，可以以智能合约的形式托管代码。</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/0baa3b51aff05a7a55e62e8f1928d4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*pimxumGky63gYte4jf6gYw.png"/></div></figure><p id="48c6" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在智能合约中，我们可以设定条件。如果你想建立一个分散的书店。你写一些说明来帮助作者添加新书，一旦顾客完成交易就发送电子书的下载链接等等。</p><p id="6a99" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">智能合约不仅存储条件，还存储数据。分散书店的智能合同本身存储图书列表、购买等。</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/091904de1b58a6354ba7b899b16a154b.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*VfZNSrxFGPImqYQaQKD3AA.png"/></div></figure><p id="6bc9" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，我们应该承认智能合同的局限性。有些系统需要人的支持，计算机处理不了。在现实世界中，实现智能合约并不容易。聪明的合同一旦公布就无法更改，愚蠢的错误可能代价高昂。</p><h1 id="fa64" class="kg kh if bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">以太坊上的智能合约编程</h1><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/b30dd3dd026eacff361df41d0838a9bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*Ns-bImecRqEpTcZGtDTlrQ.png"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">Credits : <a class="ae mu" href="https://xkcd.com/501/" rel="noopener ugc nofollow" target="_blank">xkcd</a></figcaption></figure><p id="5dcd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将建立一个简单的智能合同，存储和检索学生的成绩。我们将对合同进行可靠的编码。这里是<a class="ae mu" href="https://github.com/jamesfebin/GradesDapp" rel="noopener ugc nofollow" target="_blank"> github回购</a>。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="abda" class="mb kh if mx b fv nb nc l nd ne">pragma solidity ^0.4.18;</span><span id="397f" class="mb kh if mx b fv nf nc l nd ne">contract Grades{</span><span id="b433" class="mb kh if mx b fv nf nc l nd ne">}</span></pre><p id="2eac" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一行告诉编译器我们正在使用哪个版本的solidity。然后我们定义合同等级。</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/e9ef9f8e5ffddf2adf3dde1dfcd1e160.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*JtCkwNLCk9vTtkJfeGn03w.png"/></div></figure><p id="9390" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们需要在合同中存储两件事，学生的名字和他们的成绩。因此，我们将创建一个数组来存储学生姓名，并创建一个关联数组来存储他们的分数。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="8764" class="mb kh if mx b fv nb nc l nd ne">pragma solidity ^0.4.18;</span><span id="37f3" class="mb kh if mx b fv nf nc l nd ne">contract Grades{</span><span id="baf9" class="mb kh if mx b fv nf nc l nd ne">mapping (bytes32 =&gt; string) public grades;<br/>bytes32[] public studentList;</span><span id="74fb" class="mb kh if mx b fv nf nc l nd ne">}</span></pre><p id="2dfb" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们将创建一种方法，通过它我们可以发送合同，学生姓名的列表。我们将在构造函数中这样做。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="4a4c" class="mb kh if mx b fv nb nc l nd ne">pragma solidity ^0.4.18;</span><span id="4dbc" class="mb kh if mx b fv nf nc l nd ne">contract Grades{</span><span id="750a" class="mb kh if mx b fv nf nc l nd ne">mapping (bytes32 =&gt; string) public grades;<br/>bytes32[] public studentList;</span><span id="b249" class="mb kh if mx b fv nf nc l nd ne">function Grades(bytes32[] studentNames) public {<br/>studentList = studentNames;<br/>}</span><span id="c38c" class="mb kh if mx b fv nf nc l nd ne">}</span></pre><p id="2c7f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在Solidity中，我们将只调用构造函数一次。我们将传递学生姓名作为参数，它将存储在我们前面声明的studentList数组中。</p><p id="2b00" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们需要编写一个函数来给学生打分。我们还需要另一个函数来检查学生是否有效。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="449d" class="mb kh if mx b fv nb nc l nd ne">pragma solidity ^0.4.18;</span><span id="80c2" class="mb kh if mx b fv nf nc l nd ne">contract Grades{</span><span id="cd67" class="mb kh if mx b fv nf nc l nd ne">mapping (bytes32 =&gt; string) public grades;<br/>bytes32[] public studentList;</span><span id="3073" class="mb kh if mx b fv nf nc l nd ne">function Grades(bytes32[] studentNames) public {<br/>studentList = studentNames;<br/>}</span><span id="2dba" class="mb kh if mx b fv nf nc l nd ne">function giveGradeToStudent(bytes32 student, string grade) public {<br/>require(validStudent(student));<br/>grades[student] = grade;<br/>}</span><span id="c751" class="mb kh if mx b fv nf nc l nd ne">function validStudent(bytes32 student) view public returns (bool) {<br/>for(uint i = 0; i &lt; studentList.length; i++) {<br/>if (studentList[i] == student) {<br/>return true;<br/>}<br/>}<br/>return false;<br/>}</span><span id="960c" class="mb kh if mx b fv nf nc l nd ne">}</span></pre><p id="b9a0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">“<em class="ka"> giveGradeToStudent </em>”函数有两个参数，学生姓名和年级。require函数检查“<em class="ka"> validStudent </em>”函数是否返回true或false。如果返回false，则取消执行。</p><p id="0b23" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，我们需要编写一个函数来获取学生的分数。函数getGradeForStudent 将学生姓名作为参数，从关联数组中返回相应的分数。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="bbe1" class="mb kh if mx b fv nb nc l nd ne">pragma solidity ^0.4.18;</span><span id="f63a" class="mb kh if mx b fv nf nc l nd ne">contract Grades{</span><span id="495a" class="mb kh if mx b fv nf nc l nd ne">mapping (bytes32 =&gt; string) public grades;<br/>bytes32[] public studentList;</span><span id="77c9" class="mb kh if mx b fv nf nc l nd ne">function Grades(bytes32[] studentNames) public {<br/>studentList = studentNames;<br/>}</span><span id="b05b" class="mb kh if mx b fv nf nc l nd ne">function giveGradeToStudent(bytes32 student, string grade) public {<br/>require(validStudent(student));<br/>grades[student] = grade;<br/>}</span><span id="d8ad" class="mb kh if mx b fv nf nc l nd ne">function validStudent(bytes32 student) view public returns (bool) {<br/>for(uint i = 0; i &lt; studentList.length; i++) {<br/>if (studentList[i] == student) {<br/>return true;<br/>}<br/>}<br/>return false;<br/>}</span><span id="e41a" class="mb kh if mx b fv nf nc l nd ne">function getGradeForStudent(bytes32 student) view public returns (string) {<br/>require(validStudent(student));<br/>return grades[student];<br/>}</span><span id="d865" class="mb kh if mx b fv nf nc l nd ne">}</span></pre><p id="279a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">出于本教程的目的，您可以将它部署在个人区块链上。可以用<a class="ae mu" href="http://truffleframework.com/ganache/" rel="noopener ugc nofollow" target="_blank"> Ganache </a>创作。下面是安装和运行ganache的命令。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="b5b5" class="mb kh if mx b fv nb nc l nd ne">npm install ganache-cli web3@0.20.3 solc<br/>node_modules/.bin/ganache-cli</span></pre><p id="5140" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">保持ganache运行，我们将在新的终端上部署我们的智能合约。请将智能合同保存为“Grades.sol”。</p><p id="e8c1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们编译代码。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="1332" class="mb kh if mx b fv nb nc l nd ne"><strong class="mx ig">node<br/></strong>code = fs.readFileSync('Grades.sol').toString()<br/>solc = require('solc')<br/>compiledCode = solc.compile(code)</span></pre><p id="8b4b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，让我们部署智能合约。在区块链上部署合同会耗费你的汽油，这是对那些将计算能力出租给你的人的奖励。所以我们必须指定你愿意分配的汽油数量。你可以用<a class="ae mu" href="https://ethgasstation.info" rel="noopener ugc nofollow" target="_blank">气体计算器</a>来估算。但是，您不必现在付费，因为您正在部署个人区块链，并且正在使用您的资源。当你在区块链公共以太坊上部署契约时，你必须付费。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="550c" class="mb kh if mx b fv nb nc l nd ne">Web3 = require('web3')</span><span id="b4cc" class="mb kh if mx b fv nf nc l nd ne">web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));</span><span id="ff4b" class="mb kh if mx b fv nf nc l nd ne">abiDefinition = JSON.parse(compiledCode.contracts[':Grades'].interface)</span><span id="01f7" class="mb kh if mx b fv nf nc l nd ne">GradesContract = web3.eth.contract(abiDefinition)</span><span id="f956" class="mb kh if mx b fv nf nc l nd ne">byteCode = compiledCode.contracts[':Grades'].bytecode</span><span id="d000" class="mb kh if mx b fv nf nc l nd ne">deployedContract = GradesContract.new(['John','James'],{data: byteCode, from: web3.eth.accounts[0], gas: 4700000})</span></pre><p id="0b7d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在让我们调用我们的函数给学生约翰打A+。稍后，我们将使用我们的'<em class="ka"> getGradeForStudent </em>'函数检查它是否已被更新。</p><pre class="kc kd ke kf fq mw mx my mz aw na dt"><span id="9f8c" class="mb kh if mx b fv nb nc l nd ne">deployedContract.giveGradeToStudent('John', 'A+', {from: web3.eth.accounts[0]})</span><span id="9f6a" class="mb kh if mx b fv nf nc l nd ne">deployedContract.getGradeForStudent.call('John')<br/><strong class="mx ig">'A+'</strong></span></pre><p id="2057" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">恭喜，您已经部署了您的智能合同。如果你有问题/疑问，请对这个故事发表评论，我会回复或更新这个故事。</p><h1 id="0baf" class="kg kh if bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">前进的道路</h1><p id="440c" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn nh jp jq jr ni jt ju jv nj jx jy jz hn dt translated">关于写以太坊智能合约，可以在以下网站进行深入了解。</p><h2 id="9137" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">神秘僵尸</h2><p id="70bb" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn nh jp jq jr ni jt ju jv nj jx jy jz hn dt translated">你不用下载任何东西，你可以在他们的交互式编译器上写代码。你将通过构建一个游戏来学习可靠性编程的概念。它是免费的。</p><div class="ht hu fm fo hv nl"><a href="http://cryptozombies.io/" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab ej"><div class="nn ab no cl cj np"><h2 class="bd ig fv z el nq eo ep nr er et ie dt translated">隐型僵尸-学习编码以太坊上的游戏。由织机网络供电</h2><div class="ns l"><h3 class="bd b fv z el nq eo ep nr er et ek translated">CryptoZombies是一个交互式代码学校，教你通过建立你的…</h3></div><div class="nt l"><p class="bd b gc z el nq eo ep nr er et ek translated">cryptozombies.io</p></div></div><div class="nu l"><div class="ob l nw nx ny nu nz ib nl"/></div></div></a></div><h2 id="5bee" class="mb kh if bd ki mc md me km mf mg mh kq jn mi mj ku jr mk ml ky jv mm mn lc mo dt translated">扎斯特林</h2><p id="5f68" class="pw-post-body-paragraph jc jd if je b jf lg jh ji jj lh jl jm jn nh jp jq jr ni jt ju jv nj jx jy jz hn dt translated">Zastrin有免费和付费课程。<a class="oc od gr" href="https://medium.com/u/14d83a8fab8c?source=post_page-----4913d16eae31--------------------------------" rel="noopener" target="_blank">马赫什·穆尔蒂</a>涵盖了所有重要的方面。他们甚至教你建立一个类似易贝的分散市场。</p><div class="ht hu fm fo hv nl"><a href="https://www.zastrin.com/?zref=febin" rel="noopener  ugc nofollow" target="_blank"><div class="nm ab ej"><div class="nn ab no cl cj np"><h2 class="bd ig fv z el nq eo ep nr er et ie dt translated">Zastrin |通过做真实项目学习以太坊编程</h2><div class="ns l"><h3 class="bd b fv z el nq eo ep nr er et ek translated">通过构建真实世界的项目来学习以太坊和IPFS等去中心化技术。</h3></div><div class="nt l"><p class="bd b gc z el nq eo ep nr er et ek translated">www.zastrin.com</p></div></div><div class="nu l"><div class="oe l nw nx ny nu nz ib nl"/></div></div></a></div><p id="91cc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请鼓掌👏，谢谢你😊。关注我们<a class="ae mu" href="https://hackernoon.com" rel="noopener ugc nofollow" target="_blank"><strong class="je ig">hacker noon</strong></a><strong class="je ig">和我(</strong><a class="oc od gr" href="https://medium.com/u/75a616711f4e?source=post_page-----4913d16eae31--------------------------------" rel="noopener" target="_blank"><strong class="je ig">Febin John James</strong></a><strong class="je ig">)了解更多故事。</strong></p><p id="b687" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我希望能写更多关于区块链建筑应用的系列文章。你可以通过 <a class="ae mu" href="http://buymeacoff.ee/febin" rel="noopener ugc nofollow" target="_blank"> <strong class="je ig">请我喝咖啡</strong> </a> <strong class="je ig">来支持我。</strong></p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><a href="http://buymeacoff.ee/febin"><div class="fe ff of"><img src="../Images/9bc9302e3ce8de5c03a94d1822dc813c.png" data-original-src="https://miro.medium.com/v2/resize:fit:602/format:webp/1*cmzWj1PfMTzOT6I1BUJK8g.png"/></div></a></figure><figure class="kc kd ke kf fq hw"><div class="bz el l di"><div class="og oh l"/></div></figure></div></div>    
</body>
</html>