<html>
<head>
<title>2-minute recipe: How to rollback your conda environment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2分钟食谱:如何回滚您的conda环境</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/2-minute-recipe-how-to-rollback-your-conda-environment-8521208f9a6c?source=collection_archive---------18-----------------------#2018-05-30">https://medium.com/hackernoon/2-minute-recipe-how-to-rollback-your-conda-environment-8521208f9a6c?source=collection_archive---------18-----------------------#2018-05-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/9ec5efa2d525c3ed1b1ed9e255006671.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*rW03Wtue71AKfxnx6XN_iQ.png"/></div></figure><p id="3a67" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我在做一个个人机器学习项目，因为一些依赖，我在python 2.7中使用了<a class="ae jw" href="https://anaconda.org/" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>环境(是的，我知道)。</p><p id="f0bf" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我在尝试升级sklearn库的时候，不小心把Python更新到了3.6。我正要删除我的整个环境，并从YAML文件中重新创建它(感谢上帝我有那个)，但后来我参考了conda文档，它就在那里，这个神奇的命令把我从所有这些麻烦中拯救了出来。</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="9f97" class="kg kh hu kc b fv ki kj l kk kl"># List the history of each change to the current environment <br/>conda list --revisions</span><span id="3b46" class="kg kh hu kc b fv km kj l kk kl"># Restore environment to a previous revision <br/>conda install --revision 2</span></pre><p id="246c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最好的解释方式是举一个简单的例子。如果您运行<code class="eh kn ko kp kc b"><em class="kq">conda list –revision</em></code>，您将得到如下输出:</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="41f2" class="kg kh hu kc b fv ki kj l kk kl">2017-04-18 23:29:36  <strong class="kc hv">(</strong>rev 1<strong class="kc hv">)</strong><br/>     requests  <strong class="kc hv">{</strong>2.12.3 -&gt; 2.13.0<strong class="kc hv">}</strong><br/><br/>2018-05-30 19:41:47  <strong class="kc hv">(</strong>rev 2<strong class="kc hv">)</strong><br/>     mkl  <strong class="kc hv">{</strong>11.3.3 -&gt; 2018.0.2<strong class="kc hv">}</strong><br/>     numpy  <strong class="kc hv">{</strong>1.11.2 -&gt; 1.14.3<strong class="kc hv">}</strong><br/>     pip  <strong class="kc hv">{</strong>9.0.1 -&gt; 10.0.1<strong class="kc hv">}</strong><br/>     python  <strong class="kc hv">{</strong>2.7.12 -&gt; 3.6.5<strong class="kc hv">}</strong><br/>     scikit-learn  <strong class="kc hv">{</strong>0.17.1 -&gt; 0.19.1<strong class="kc hv">}</strong><br/>     scipy  <strong class="kc hv">{</strong>0.18.1 -&gt; 1.1.0<strong class="kc hv">}</strong><br/>     setuptools  <strong class="kc hv">{</strong>27.2.0 -&gt; 39.1.0<strong class="kc hv">}</strong><br/>     wheel  <strong class="kc hv">{</strong>0.29.0 -&gt; 0.31.1<strong class="kc hv">}</strong><br/>    +blas-1.0<br/>    +certifi-2018.4.16<br/>    +icc_rt-2017.0.4<br/>    +intel-openmp-2018.0.0<br/>    +mkl_fft-1.0.1<br/>    +mkl_random-1.0.1<br/>    +numpy-base-1.14.3<br/>    +vc-14<br/>    +vs2015_runtime-14.0.25123<br/>    +wincertstore-0.2</span></pre><p id="a90f" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">正如您在输出中看到的，它列出了每个修订以及更新的包(旧版本-&gt;新版本)和新添加的包(带有+符号的包)。所以现在您知道了在每个修订中做了什么更改，您可以通过使用<code class="eh kn ko kp kc b">conda install –revision<em class="kq"> revision number</em></code>安全地回滚到您的环境的先前版本。</p><p id="c911" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我的例子中，我恢复到rev 1，所以在回滚后，当我再次运行<code class="eh kn ko kp kc b"><em class="kq">conda list –revisions</em></code>时，我可以看到在回滚中所做的更改。</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="44bd" class="kg kh hu kc b fv ki kj l kk kl">2018-05-30 20:08:46  <strong class="kc hv">(</strong>rev 3<strong class="kc hv">)</strong><br/>     mkl  <strong class="kc hv">{</strong>2018.0.2 -&gt; 11.3.3<strong class="kc hv">}</strong><br/>     numpy  <strong class="kc hv">{</strong>1.14.3 -&gt; 1.11.2<strong class="kc hv">}</strong><br/>     pip  <strong class="kc hv">{</strong>10.0.1 -&gt; 9.0.1<strong class="kc hv">}</strong><br/>     python  <strong class="kc hv">{</strong>3.6.5 -&gt; 2.7.12<strong class="kc hv">}</strong><br/>     scikit-learn  <strong class="kc hv">{</strong>0.19.1 -&gt; 0.17.1<strong class="kc hv">}</strong><br/>     scipy  <strong class="kc hv">{</strong>1.1.0 -&gt; 0.18.1<strong class="kc hv">}</strong><br/>     setuptools  <strong class="kc hv">{</strong>39.1.0 -&gt; 27.2.0<strong class="kc hv">}</strong><br/>     wheel  <strong class="kc hv">{</strong>0.31.1 -&gt; 0.29.0<strong class="kc hv">}</strong><br/>    -blas-1.0<br/>    -certifi-2018.4.16<br/>    -icc_rt-2017.0.4<br/>    -intel-openmp-2018.0.0<br/>    -mkl_fft-1.0.1<br/>    -mkl_random-1.0.1<br/>    -numpy-base-1.14.3<br/>    -vc-14<br/>    -vs2015_runtime-14.0.25123<br/>    -wincertstore-0.2</span></pre><p id="53d5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">您可以看到修订版3的变化正好与修订版2相反。</p><p id="12e5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果你不小心搞砸了你的环境，这就方便了。</p><p id="72c2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">更多信息:</p><p id="9097" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">Conda用户指南:<a class="ae jw" href="https://conda.io/docs/user-guide/tasks/manage-environments.html" rel="noopener ugc nofollow" target="_blank">https://conda . io/docs/User-Guide/tasks/manage-environments . html</a></p><p id="2f64" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">康达小抄:<a class="ae jw" href="https://conda.io/docs/_downloads/conda-cheatsheet.pdf" rel="noopener ugc nofollow" target="_blank">https://conda.io/docs/_downloads/conda-cheatsheet.pdf</a></p><p id="1e24" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果你有任何建议，请在推特上告诉我:<a class="ae jw" href="https://twitter.com/Sriramjaju" rel="noopener ugc nofollow" target="_blank"> @Sriramjaju </a></p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><p id="c65d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><em class="kq">合十礼！</em></p></div></div>    
</body>
</html>