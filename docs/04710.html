<html>
<head>
<title>Keep passwords and secrets out of your logs with Go</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨Goå°†å¯†ç å’Œæœºå¯†ä»æ‚¨çš„æ—¥å¿—ä¸­åˆ é™¤</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/keep-passwords-and-secrets-out-of-your-logs-with-go-a2294a9546ce?source=collection_archive---------14-----------------------#2018-06-04">https://medium.com/hackernoon/keep-passwords-and-secrets-out-of-your-logs-with-go-a2294a9546ce?source=collection_archive---------14-----------------------#2018-06-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="938b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å½“ä½¿ç”¨åˆ†å¸ƒå¼ç³»ç»Ÿæ—¶ï¼Œé€šå¸¸æ—¥å¿—è¶Šå¤šè¶Šå¥½â€”â€”å¤æ‚ä¹‹å¤„åœ¨äºå¼€æ”¾å¯è§æ€§ï¼ŒåŒæ—¶ä¿å®ˆæ•æ„Ÿä¿¡æ¯çš„ç§å¯†æ€§å’Œå®‰å…¨æ€§ã€‚è¿™å¹¶ä¸å®¹æ˜“ï¼Œåªè¦é—®é—®<a class="ae jp" href="https://hackernoon.com/tagged/github" rel="noopener ugc nofollow" target="_blank"> GitHub </a>å’ŒTwitteræœ€è¿‘è°å‘ç°è‡ªå·±åœ¨è®°å½•åŸå§‹å¯†ç ã€‚</p><p id="d861" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">GitHubå’ŒTwitteräº‹ä»¶çš„ç»†èŠ‚æ²¡æœ‰å…¬å¼€ï¼Œä½†æˆ‘çŒœæ˜¯ä¸€ä¸ª<a class="ae jp" href="https://hackernoon.com/tagged/engineer" rel="noopener ugc nofollow" target="_blank">å·¥ç¨‹å¸ˆ</a>åœ¨æ²¡æœ‰æ„è¯†åˆ°åæœçš„æƒ…å†µä¸‹æ”¹å˜äº†æ—¥å¿—çº§åˆ«é…ç½®æˆ–è®°å½•äº†è¯·æ±‚ä½“ã€‚</p><p id="46d2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">äº‹å®æ˜¯ï¼Œè¿™å°±æ˜¯å·¥ä½œçš„ç°å®â€”â€”åœ¨è¿™æ ·å¤æ‚çš„ç³»ç»Ÿä¸­ï¼Œæ²¡æœ‰äººèƒ½å¤ŸçŸ¥é“æ¯ä¸€ä¸ªå˜åŒ–çš„åæœï¼Œå°¤å…¶æ˜¯åœ¨æŠ€æœ¯äººå‘˜æµåŠ¨é€Ÿåº¦å¦‚æ­¤ä¹‹å¿«çš„æƒ…å†µä¸‹ã€‚å¦‚æœæˆ‘ä»¬è¦è§£å†³è¿™æ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ·±å…¥ã€‚</p><p id="71ea" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¢¨è²å®šå¾‹å¼•å‘äº†è¿™æ ·çš„é—®é¢˜:ä»»ä½•å¯èƒ½å‡ºé”™çš„äº‹æƒ…éƒ½ä¼šå‡ºé”™â€”â€”å¦‚æœä½ ç•™ä¸‹ä¸€ä¸ªé™·é˜±ï¼Œå°±ä¼šæœ‰äººèµ°è¿›å»ã€‚æˆ‘ä»¬ä¸è¦é‚£æ ·åšã€‚åœ¨å†™Goçš„æ—¶å€™ï¼Œæˆ‘ä¼šåšä»¥ä¸‹äº‹æƒ…æ¥é¿å…è¿™æ ·çš„é™·é˜±ï¼Œå¹¶é˜²æ­¢ç§˜å¯†è¢«è®°å½•ã€‚</p><p id="49ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å‡è®¾æ‚¨æœ‰ä¸€ä¸ªæ³¨å†Œè¯·æ±‚ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="cd9e" class="jz ka hu jv b fv kb kc l kd ke">type CreateUserRequest struct {<br/>    Credentials Credentials `json:â€credentialsâ€`<br/>}</span><span id="5951" class="jz ka hu jv b fv kf kc l kd ke">type Credentials struct {<br/>    Email string `json:â€emailâ€`<br/>    Password string `json:â€passwordâ€`<br/>}</span></pre><p id="4c67" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å‡è®¾æ‚¨æ­£åœ¨ç™»å½•JSONè¿›è¡ŒElasticsearch:</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="291a" class="jz ka hu jv b fv kb kc l kd ke">// logger weâ€™re using<br/>logger := log.NewJSONLogger(os.Stdout)</span><span id="f768" class="jz ka hu jv b fv kf kc l kd ke">// request we decoded<br/>request := CreateUserRequest{<br/>    Credentials: Credentials{<br/>        Email: â€œ<a class="ae jp" href="mailto:bilbro@theshire.net" rel="noopener ugc nofollow" target="_blank">bilbro@theshire.net</a>â€,<br/>        Password: â€œtheoneringâ€,<br/>    },<br/>}</span><span id="3982" class="jz ka hu jv b fv kf kc l kd ke">// our call to log the request<br/>logger.Log(â€œrequestâ€, request)</span><span id="fb90" class="jz ka hu jv b fv kf kc l kd ke">// the output<br/>{â€œrequestâ€:{â€œcredentialsâ€ {â€œemailâ€:â€<a class="ae jp" href="mailto:bilbro@theshire.net" rel="noopener ugc nofollow" target="_blank">bilbro@theshire.net</a>â€,â€passwordâ€:â€theoneringâ€}}}</span></pre><p id="0e1d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç»“æœæ˜¯ç”¨æˆ·çš„å¯†ç è¢«è®°å½•ã€‚ä¸å¤ªå¥½ã€‚</p><p id="4ce8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å°†å®ç°è‡ªå·±çš„MarshalJSONæ¥ç¼–è¾‘ç”¨æˆ·çš„å¯†ç ã€‚</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="4c1f" class="jz ka hu jv b fv kb kc l kd ke">func (co Credentials) MarshalJSON() ([]byte, error) {<br/>    type credentials Credentials<br/>    cn := credentials(co)<br/>    cn.Password = "[REDACTED]"<br/>    return json.Marshal((*credentials)(&amp;cn))<br/>}</span></pre><p id="35a0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨ï¼Œå½“æˆ‘ä»¬è®°å½•ç›¸åŒçš„è¯·æ±‚æ—¶ï¼Œç”¨æˆ·çš„å¯†ç ä¸ä¼šè¢«è®°å½•:</p><pre class="jq jr js jt fq ju jv jw jx aw jy dt"><span id="7f90" class="jz ka hu jv b fv kb kc l kd ke">// the output<br/>{â€œrequestâ€:{â€œcredentialsâ€:{â€œemailâ€:â€<a class="ae jp" href="mailto:bilbro@theshire.net" rel="noopener ugc nofollow" target="_blank">bilbro@theshire.net</a>â€,â€passwordâ€:â€[REDACTED]â€}}}</span></pre><p id="01cb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨ï¼Œæ— è®ºæ˜¯è°ç™»å½•ï¼Œä¹Ÿæ— è®ºæ˜¯åœ¨ä½•æ—¶ä½•åœ°ç™»å½•ï¼Œéƒ½ä¸å¯èƒ½è®°å½•ç”¨æˆ·çš„å¯†ç â€”â€”è‡³å°‘å¦‚æœæ‚¨ä½¿ç”¨è¿™ä¸ªå®ç°æ¥è®°å½•JSONã€‚å¦‚æœæ‚¨ä»¥å¦ä¸€ç§æ ¼å¼ç™»å½•ï¼ŒåŒæ ·çš„æŠ€æœ¯ä¹Ÿé€‚ç”¨ï¼Œå¹¶ä¸”åº”è¯¥æœ‰ç›¸åº”çš„å°é€æ–¹æ³•ä¾›æ‚¨å®ç°ã€‚</p><p id="7c8c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt">â€“</p><p id="0059" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¯·å‘<a class="ae jp" href="https://twitter.com/travisjeffery" rel="noopener ugc nofollow" target="_blank"> @travisjeffery </a>é—®å¥½ã€‚</p><p id="1921" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å‡»ä¸­ğŸ‘å¦‚æœä½ è§‰å¾—è¿™æœ‰ç”¨ï¼Œè¯·åˆ†äº«ã€‚</p><p id="0420" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æ„Ÿè°¢é˜…è¯»ã€‚</p><figure class="jq jr js jt fq kg"><div class="bz el l di"><div class="kh ki l"/></div></figure></div></div>    
</body>
</html>