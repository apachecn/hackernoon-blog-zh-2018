<html>
<head>
<title>Getting started with Docker and Kubernetes on Windows 10</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Windows 10上的Docker和Kubernetes入门</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/getting-started-with-docker-and-kubernetes-on-windows-10-40017e2b69ff?source=collection_archive---------7-----------------------#2018-06-05">https://medium.com/hackernoon/getting-started-with-docker-and-kubernetes-on-windows-10-40017e2b69ff?source=collection_archive---------7-----------------------#2018-06-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ea8225fbc92a229219e59033b59a37d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6eGLl60meB2huR-R.jpg"/></div></div></figure><p id="161a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当你不知道从哪里开始时，在Windows上开始使用<a class="ae ka" href="https://hackernoon.com/tagged/docker" rel="noopener ugc nofollow" target="_blank"> Docker </a>和<a class="ae ka" href="https://hackernoon.com/tagged/kubernetes" rel="noopener ugc nofollow" target="_blank"> Kubernetes </a>可能会令人望而生畏。</p><p id="30e9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装软件并不容易，这也于事无补。</p><p id="bdb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">事实上，你应该已经是一个Docker和Kubernetes专家来导航如何安装它们的选项。</p><p id="6b29" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">但是不要担心！</em></p><p id="14d3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您刚刚开始使用Windows上的容器和Kubernetes，那么这篇文章是为您准备的。</p><p id="eea6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您将学习如何在Windows上设置开发环境时做出正确的选择。</p><p id="72f0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">先说Docker。</p><h1 id="ee3f" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">使用Windows 10 Home？您将无法运行Docker for Windows</h1><p id="2402" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">当Docker的人决定在Windows上实现Docker时，他们选择了Hyper-V作为他们的虚拟化技术。好处显而易见:卓越的性能和本机虚拟机管理程序。</p><p id="7862" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">不幸的是，并非所有Windows版本都附带Hyper-v。</strong></p><p id="3c95" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你使用的是Windows 10家庭版或学生版，你就没那么幸运了。您将无法安装和运行Docker for Windows。</p><p id="9403" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是游戏还没有结束。</p><p id="0e20" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">基于<a class="ae ka" href="https://docs.docker.com/machine/" rel="noopener ugc nofollow" target="_blank"> Docker Machine </a>有大量的替代品，如Docker Toolbox或minikube。</p><p id="973b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Docker机器的工作方式很简单:有一个运行Linux和Docker的虚拟机。并且从您的主机连接到该虚拟机中的远程Docker守护进程。</p><p id="c5b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Minikube是基于Docker Machine的最有趣的虚拟机之一— <em class="kb">如果你对运行Kubernetes集群感兴趣的话。</em></p><p id="0c97" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">事实上，minikube是一个运行Docker <strong class="je hv">和</strong> Kubernetes的虚拟机。它通常只用于运行Kubernetes，但是您也可以用它来运行Docker容器。</p><p id="61f0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你不会达到和Docker for Windows一样的速度，但是你可以不用Hyper-V来构建和运行容器。</p><h1 id="0320" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">有了Windows 10 Pro，Docker for Windows就是最好的——除非它不是</h1><p id="8a37" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">你有最新的Windows 10 Pro，可以安装Docker for Windows。</p><p id="3a0e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">出色的性能和优秀的开发者体验。你被分类了，不是吗？</p><p id="625c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">也许。</em></p><p id="a123" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Docker for Windows使用的管理程序非常强大— <em class="kb">实际上它被称为第1类管理程序</em>。</p><p id="919c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它如此强大，以至于不能很好地与较弱的虚拟机管理程序配合，如VirtualBox中的虚拟机管理程序— <em class="kb">或类型2虚拟机管理程序</em>。</p><p id="f10a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您不能让类型1和类型2虚拟机管理程序同时在您的计算机上运行。或者换句话说，如果你运行Docker for Windows，你将无法在VirtualBox上启动你的虚拟机。</p><p id="b6b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">根据您的设置，这可能是一个无关紧要的细节。</p><p id="bbdf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也许你完全致力于一个集装箱化的世界，而你却把虚拟机留在了身后。</p><p id="3190" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一段久远的记忆。</p><p id="8fd2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是，如果你仍然依赖虚拟机和工具，如流浪者，也许你应该意识到烦恼。</p><p id="6f65" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">你可以随意启用和禁用Hyper-V虚拟机管理程序，但需要重启电脑。</strong></p><p id="2d73" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您经常从容器切换到虚拟机，也许minikube是一个更方便的选择。当您从容器更改为虚拟机时，不需要重新启动计算机。</p><p id="d4d5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是你并没有从额外的性能或改进的体验中获益。</p><p id="2196" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，如果您对运行Windows容器感兴趣，那么Docker for Windows是唯一的选择。</p><p id="3793" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为此，您需要Windows 10 Pro或企业版。</p><h1 id="9ec2" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">运行本地Kubernetes集群</h1><p id="064f" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">如果你想在本地运营Kubernetes，你应该考虑minikube。</p><p id="6a03" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Minikube是一个运行在嵌入式Linux发行版(Buildroot)上的虚拟机，预装了Docker守护进程。</p><p id="8db7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">这是带电池的Kubernetes。</strong></p><p id="0791" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Minikube可以使用VirtualBox或Hyper-V运行虚拟机— <a class="ae ka" href="https://github.com/kubernetes/minikube#quickstart" rel="noopener ugc nofollow" target="_blank">也有更多的选项</a>。</p><p id="1cec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您已经有了Hyper-V，并希望对Docker和minikube使用相同的虚拟机管理程序，这是一个好消息。</p><p id="01bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你不能运行Hyper-V，这也是一个好消息，因为你可以使用VirtualBox。</p><p id="4184" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有很多选择和权衡，所以下面是讨论内容的总结:</p><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lf"><img src="../Images/78a3060243f0a85098851cc1ff067db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*O6jiSybA0n8rb05q.png"/></div></div></figure><h1 id="a224" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">先决条件</h1><p id="2f27" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">可以下载安装Docker for Windows、Docker Toolbox、VirtualBox、kubectl、Docker CLI等所有依赖项。从官方网站，但这是很难的工作。</p><p id="1dbe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你必须访问网站，希望网址仍然有效，搜索下载页面，选择正确的版本，下载，安装，最后添加到你的路径。</p><p id="9e53" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是可行的，但我相信你宁愿花时间做更多的编码，而不是从互联网上寻找和安装可执行文件。</p><p id="d4cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">输入Chocolatey。</strong></p><p id="dfd6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Chocolatey是一个用于Windows的软件包管理器。你告诉它你想安装什么可执行文件，然后Chocolatey会帮你安装。</p><p id="467e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你把供应软件的艰苦工作都外包给了别人。</p><p id="d857" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装Chocolatey很容易。你可以在官网找到<a class="ae ka" href="https://chocolatey.org/install" rel="noopener ugc nofollow" target="_blank">的完整说明。但简而言之，这就是你要做的:</a></p><ol class=""><li id="422e" class="lk ll hu je b jf jg jj jk jn lm jr ln jv lo jz lp lq lr ls dt translated">以管理员身份开始<code class="eh lt lu lv lw b">cmd.exe</code></li><li id="b30d" class="lk ll hu je b jf lx jj ly jn lz jr ma jv mb jz lp lq lr ls dt translated">执行这个长命令:</li></ol><p id="4f5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lt lu lv lw b">@"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" &amp;&amp; SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"</code></p><p id="3384" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">3.重新加载<code class="eh lt lu lv lw b">cmd.exe</code></p><p id="ea60" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果安装成功，您现在可以搜索要安装的应用程序:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="90db" class="mg kd hu lw b fv mh mi l mj mk">choco search docker</span></pre><p id="26b8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">既然你在那里，你可以试试<code class="eh lt lu lv lw b">choco</code>。您可以安装<a class="ae ka" href="http://cmder.net/" rel="noopener ugc nofollow" target="_blank">Cmder</a>——一个现代的Windows shell，具有:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="ed34" class="mg kd hu lw b fv mh mi l mj mk">choco install cmder -y</span></pre><p id="ccd3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Chocolatey在<code class="eh lt lu lv lw b">C:\tools</code>安装了二进制。如果您希望使用Cmder继续本教程，您应该以管理员身份启动二进制文件。</p><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ml"><img src="../Images/9a97aeed85f08ded6dc73f3da73abe95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1bsD3U7oj4mMBYJS.png"/></div></div></figure><p id="5b34" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">看起来不错！</p><h1 id="330e" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">1.在Windows 10 Pro上安装Docker和Kubernetes</h1><h1 id="95be" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">安装Docker</h1><p id="e517" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">您可以通过以下方式下载Docker for Windows:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="8551" class="mg kd hu lw b fv mh mi l mj mk">choco install docker-for-windows -y</span></pre><p id="2b85" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">重启你的笔记本电脑。Docker将询问您是否希望启用Hyper-V。</p><figure class="lg lh li lj fq iv fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/c96f5998b030cb676992c86d84eb1f1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/0*jeOibeb3Wln3C4Hr.png"/></div></figure><p id="068f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">是的，你有！</p><p id="01ed" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您应该知道，Docker要求在运行任何容器之前启用VT-X/AMD-v虚拟硬件扩展。根据您的计算机，您可能需要重新启动并在BIOS中启用它。</p><blockquote class="mn mo mp"><p id="6400" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">您可以通过在命令提示符下运行</em> <code class="eh lt lu lv lw b"><em class="hu">systeminfo</em></code> <em class="hu">来检查VT-X/AMD-v是否启用。</em></p></blockquote><p id="ade3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您不确定是否启用了VT-X/AMD-v，请不要担心。如果没有，Docker会用下面的错误消息向您问候:</p><blockquote class="mn mo mp"><p id="199b" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">必须在BIOS中启用硬件辅助虚拟化和数据执行保护。</em></p></blockquote><figure class="lg lh li lj fq iv fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/5544773c76c91dbe4761d29f33d4dcd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/0*g9xIjTpVB4P1vcMR.png"/></div></figure><p id="bd6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">另一个常见错误与Hyper-V虚拟机管理程序未启用有关。如果您遇到此错误:</p><blockquote class="mn mo mp"><p id="07a2" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">无法启动:正在运行的命令已停止，因为首选项变量“ErrorActionPreference”或公共参数设置为Stop:“mobyluxvm”无法启动。无法启动虚拟机“MobyLinuxVM ”,因为其中一个Hyper-V组件未运行。</em></p></blockquote><figure class="lg lh li lj fq iv fe ff paragraph-image"><div class="fe ff mt"><img src="../Images/7c106d6b66acd035e5ec2f6f4866ce5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/format:webp/0*RBt5YMbU-e4FOz3G.png"/></div></figure><p id="5e34" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您应该启用Hyper-V，以管理员身份打开一个新的命令提示符，并键入以下内容:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="a456" class="mg kd hu lw b fv mh mi l mj mk">bcdedit /set hypervisorlaunchtype auto</span></pre><p id="86be" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你应该重新启动你的机器，Docker应该最终启动。</p><p id="df54" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">但是你怎么知道Docker是否在工作呢？</em></p><p id="7bf0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">打开新的命令提示符并键入:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="0fcc" class="mg kd hu lw b fv mh mi l mj mk">docker ps</span></pre><p id="576e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一切正常，您应该会看到一个空的容器列表正在运行。</p><p id="c6e0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您的Docker守护进程没有运行，您可能会遇到以下错误:</p><blockquote class="mn mo mp"><p id="0aff" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">连接时出错:获取</em> <a class="ae ka" href="http://%2F%2F.%2Fpipe%2Fdocker_engine/v1.37/containers/json:" rel="noopener ugc nofollow" target="_blank"> <em class="hu"> http://%2F%2F。% 2f pipe % 2f docker _ engine/v 1.37/containers/JSON:</em></a><em class="hu">open//。/pipe/docker_engine:系统找不到指定的文件。在Windows的默认守护程序配置中，docker客户端必须以提升的权限运行才能连接。此错误也可能表示docker守护程序没有运行。</em></p></blockquote><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mu"><img src="../Images/825418825ed1bf2cdf4db21aeb34b1ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x887DsAVadBuUPiW.png"/></div></div></figure><p id="cb3a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">上面的错误表明您的Docker安装没有正常运行，无法启动。</p><p id="b3ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您应该在连接到Docker守护进程之前启动它。</p><h1 id="e331" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">在Hyper-V上安装Minikube</h1><p id="4fec" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">您可以通过以下方式下载minikube:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="a072" class="mg kd hu lw b fv mh mi l mj mk">choco install minikube -y</span></pre><p id="545b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在启动群集之前，您应该创建一个外部网络交换机。</p><p id="c001" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，您需要确定您的计算机上有哪些网络适配器。</p><p id="4f71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你应该忽略虚拟接口，关注真实的、活动的、物理的网络适配器，例如<em class="kb">以太网</em>或<em class="kb"> WiFi </em>。</p><p id="7b2f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">选择一个真正的适配器将让您与虚拟交换机共享互联网连接。</p><p id="a773" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要检查当前的网络适配器，可以使用Powershell中的<code class="eh lt lu lv lw b">Get-NetAdapter</code> cmdlet。</p><p id="048d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击左下角的Windows图标，开始输入“PowerShell”打开它。</p><p id="f1b2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">键入以下命令列出所有适配器:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="8b28" class="mg kd hu lw b fv mh mi l mj mk">Get-NetAdapter</span></pre><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mv"><img src="../Images/9448ea76d31a42e8b246277aef071126.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*s1pey4zPVqMW883n.png"/></div></div></figure><blockquote class="mn mo mp"><p id="66a1" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">如果您发现很难选择适配器，请尝试选择在</em>状态<em class="hu">栏中</em> <strong class="je hv"> <em class="hu">向上</em> </strong> <em class="hu">的适配器。</em></p></blockquote><p id="8c70" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">确定正确的适配器后，您可以使用以下命令创建外部虚拟交换机:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="43dc" class="mg kd hu lw b fv mh mi l mj mk">New-VMSwitch –Name "minikube" –AllowManagement $True –NetAdapterName "INSERT_HERE_ADAPTER"</span></pre><p id="b057" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不要忘记插入您之前选择的适配器。</p><p id="ce07" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果未能创建网络交换机，则在启动minikube时会看到以下错误:</p><blockquote class="mn mo mp"><p id="b516" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">e 0427 09:06:16.000298 3252 start . go:159]启动主机时出错:创建主机时出错:执行步骤时出错:运行预创建检查。未找到外部vswitch。有效的vswitch必须可用，此命令才能运行。检查</em><a class="ae ka" href="https://docs.docker.com/machine/drivers/hyper-v/." rel="noopener ugc nofollow" target="_blank"><em class="hu">https://docs.docker.com/machine/drivers/hyper-v/.</em></a></p></blockquote><p id="f4f9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以使用以下工具测试您的minikube安装:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="0cf2" class="mg kd hu lw b fv mh mi l mj mk">minikube start --vm-driver=hyperv --hyperv-virtual-switch=minikube</span></pre><blockquote class="mn mo mp"><p id="7aa9" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">请注意</em> <code class="eh lt lu lv lw b"><em class="hu">--vm-driver=hyperv --hyperv-virtual-switch=minikube</em></code> <em class="hu">仅在首次启动时需要。如果你想改变驱动程序或内存，你必须</em> <code class="eh lt lu lv lw b"><em class="hu">minikube destroy</em></code> <em class="hu">并用新的设置重新创建虚拟机。</em></p></blockquote><p id="7c29" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果由于任何原因minikube无法启动，您可以使用以下命令进行调试:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="0f82" class="mg kd hu lw b fv mh mi l mj mk">minikube delete <br/>minikube start --vm-driver=hyperv --hyperv-virtual-switch=minikube --v=7 --alsologtostderr</span></pre><p id="d217" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">额外的详细日志记录应该有助于您找到问题。在我的例子中，minikube曾经失败过:</p><blockquote class="mn mo mp"><p id="f369" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">e 0427 09:19:10.114873 10012 start . go:159】错误启动主机:错误启动已停止的主机:退出状态1。</em></p></blockquote><p id="8ff4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不是很有帮助。启用详细日志记录后，问题变得更加明显:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="efb6" class="mg kd hu lw b fv mh mi l mj mk">+ Hyper-V\Start-VM minikube <br/>+ ~~~~~~~~~~~~~~~~~~~~~~~~~ <br/>   + CategoryInfo : FromStdErr: (:) [Start-VM], VirtualizationException <br/>   + FullyQualifiedErrorId : OutOfMemory,Microsoft.HyperV.PowerShell.Commands.StartVM</span></pre><p id="6607" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我的内存快用完了！</p><p id="64ab" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">是时候测试你的安装是否成功了。在命令提示符下键入:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="588b" class="mg kd hu lw b fv mh mi l mj mk">kubectl get nodes</span></pre><p id="3236" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您应该能够在Kubernetes中看到单个节点。</p><h1 id="823e" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">在VirtualBox上运行虚拟机</h1><p id="5c83" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">由于您在设备上启用了Hyper-V，您将无法在VirtualBox上启动任何虚拟机。您仍然可以尝试启动您的虚拟机。但是，您可能会遇到以下错误:</p><blockquote class="mn mo mp"><p id="ba6b" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">您的电脑遇到问题，需要重启。我们正在收集一些错误信息，然后我们会为您重新启动它。</em></p></blockquote><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mw"><img src="../Images/38cbdf62bf4939e21baca26939d7fc7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gcAuE2tH2cbCrDFP.png"/></div></div></figure><p id="70f4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">如果您希望使用VirtualBox或任何其他使用第二类管理程序的可执行文件，您应该先禁用它并重启计算机。</strong></p><p id="3a2b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以管理员身份打开新的命令提示符，并键入以下内容:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="cc30" class="mg kd hu lw b fv mh mi l mj mk">bcdedit /set hypervisorlaunchtype off</span></pre><p id="a021" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">重新启动设备后，您应该可以像往常一样使用VirtualBox。</p><p id="bff8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你想再次使用Docker和minikube，你应该启用Hyper-V并重启你的机器。</p><p id="414d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以管理员身份打开新的命令提示符，并键入以下内容:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="5227" class="mg kd hu lw b fv mh mi l mj mk">bcdedit /set hypervisorlaunchtype auto</span></pre><p id="6fbb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">重启，现在您已经准备好运行和部署容器到Kubernetes了！</p><p id="2862" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://learnk8s.io/blog/installing-docker-and-kubernetes-on-windows#testing-your-docker-installation" rel="noopener ugc nofollow" target="_blank">跳到测试你的Docker安装</a></p><h1 id="87f9" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">2.在Windows 10 Home上安装Docker和Kubernetes</h1><p id="3de9" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">如果你打算使用Windows 10家庭版或学生版，你可能会省去安装另一个Docker工具如Docker Toolbox的麻烦。</p><p id="3ffe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您应该将minikube用作远程Docker守护进程以及本地Kubernetes集群。</p><p id="7ded" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以下载并安装minikube:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="26f3" class="mg kd hu lw b fv mh mi l mj mk">choco install minikube -y</span></pre><p id="c354" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装结束时，您可以使用以下命令启动minikube:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="18e8" class="mg kd hu lw b fv mh mi l mj mk">minikube start</span></pre><p id="d310" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该命令将为VirtualBox下载一个ISO并启动虚拟机。一旦启动，您应该能够使用以下命令查询Kubernetes集群:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="5e44" class="mg kd hu lw b fv mh mi l mj mk">kubectl get nodes</span></pre><p id="083b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">看到一个节点。</p><p id="c2aa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要连接到远程Docker守护进程，您应该安装Docker客户端，并安装:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="9381" class="mg kd hu lw b fv mh mi l mj mk">choco install docker -y</span></pre><p id="64a7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以通过以下方式连接到minikube远程Docker守护程序:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="9fe1" class="mg kd hu lw b fv mh mi l mj mk">@FOR /f "tokens=*" %i IN ('minikube docker-env') DO @%i</span></pre><blockquote class="mn mo mp"><p id="2d15" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">请注意，每次打开新的终端时，都要键入上述命令。提醒自己该命令的一个更简单的方法是键入</em> <code class="eh lt lu lv lw b"><em class="hu">minikube docker-env</em></code> <em class="hu">。</em></p></blockquote><p id="c523" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果连接成功，您应该能够列出所有正在运行的容器，包括:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="1589" class="mg kd hu lw b fv mh mi l mj mk">docker ps</span></pre><p id="3605" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你应该会看到很多运行的容器。其中大部分属于库伯内特。</p><p id="b932" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你已经走了这么远:你准备好了。</p><p id="0b00" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是在继续之前，您应该知道使用minikube作为远程Docker守护进程的一些限制。</p><p id="cb03" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Docker由两部分组成:</p><ul class=""><li id="6d9f" class="lk ll hu je b jf jg jj jk jn lm jr ln jv lo jz mx lq lr ls dt translated">Docker守护进程——你可以把它想象成一个带有API的服务器。您可以向API发送命令，Docker将代表您接收并执行它们。</li><li id="faf7" class="lk ll hu je b jf lx jj ly jn lz jr ma jv mb jz mx lq lr ls dt translated"><strong class="je hv">Docker CLI</strong>—向Docker守护程序API发送命令的可执行文件</li></ul><p id="8244" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">大部分时间你都在和Docker CLI交互，看不到Docker守护进程。</p><p id="0fd0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">那么为什么要有客户端和服务器呢？</em></p><p id="a405" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为什么没有单一的二进制？</p><p id="7a5b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">这一切都归结于灵活性。</strong></p><p id="9e2f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当您运行Docker for Windows时，Docker CLI会连接到您的本地Docker守护进程。</p><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff my"><img src="../Images/dc2d00f182306af6b37bc3d54caf9609.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jrqRM-g2ApmTiM5n.png"/></div></div></figure><p id="c9e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">但是有时候你没有Docker守护进程。</strong></p><p id="266c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也许您想在远程机器上构建容器。</p><p id="a07f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也许你不能在你的机器上运行Hyper-V，你的Docker守护进程安装在VirtualBox的一个虚拟机上。</p><p id="794a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你运行minikube，情况正是如此。</p><p id="ab24" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您的Docker CLI远程连接到minikube虚拟机中的Docker守护程序。</p><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff my"><img src="../Images/fb03ad9146b1d09443f72d724ed259a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xjqUmNo-tDACa-lj.png"/></div></div></figure><p id="aaa2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当您针对远程Docker守护进程运行容器时，您需要调整您的端口绑定。</p><p id="cf6d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在Docker for Windows中，您可以使用以下命令在端口8080上运行并绑定容器:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="d977" class="mg kd hu lw b fv mh mi l mj mk">docker run -ti -p 8080:80 nginx</span></pre><blockquote class="mn mo mp"><p id="2e4b" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">请注意容器如何暴露端口80，以及您如何将该端口映射到8080。</em></p></blockquote><p id="89fc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">可以访问<a class="ae ka" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080 </a>，看到<em class="kb">“欢迎使用Nginx”</em>页面。</p><p id="d896" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您使用远程Docker守护进程运行相同的命令并访问相同的页面，您将看不到任何内容。</p><p id="bf17" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无法访问该URL。</p><p id="f43e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">那么，有什么不同呢？</em></p><p id="e588" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Docker守护进程负责运行容器和转发端口。</p><p id="2ecb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用Docker for Windows，守护程序在本地运行——在您的本地主机上。</p><p id="4b91" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此您可以访问localhost上运行的容器。</p><p id="2cdd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">另一方面，Minikube在虚拟机内部运行Docker守护进程。</p><p id="81b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是一个远程Docker守护程序。</p><p id="90a3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你想看到你正在运行的容器，你需要用Docker守护进程访问机器。您可以使用以下命令找到IP地址:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="7c98" class="mg kd hu lw b fv mh mi l mj mk">minikube ip</span></pre><p id="f27f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">可以访问<a class="ae ka" href="http://your_minikube_ip:8080" rel="noopener ugc nofollow" target="_blank">http://your _ mini kube _ IP:8080</a>查看<em class="kb">“欢迎使用Nginx”</em>页面。</p><h1 id="c057" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">测试您的Docker安装</h1><p id="ca04" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">你安装了Docker，但是你怎么知道它是否真的能工作？</p><p id="d528" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在您的终端中键入:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="5b37" class="mg kd hu lw b fv mh mi l mj mk">docker run -ti -p 8080:80 wordpress</span></pre><p id="1ecd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦Docker下载完所有的包，你应该访问<a class="ae ka" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>。</p><blockquote class="mn mo mp"><p id="b4d0" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">请注意，如果你运行minikube作为你的远程Docker守护进程，你应该使用</em><a class="ae ka" href="http://minikube_ip:8080" rel="noopener ugc nofollow" target="_blank"><em class="hu">http://minikube _ IP:8080</em></a><em class="hu">作为你的URL。</em></p></blockquote><p id="5aa1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你应该能够看到Wordpress安装向导。</p><p id="4c4d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">万岁！</p><p id="fccc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Wordpress正在为容器内的流量提供服务！</p><blockquote class="mn mo mp"><p id="5372" class="jc jd kb je b jf jg jh ji jj jk jl jm mq jo jp jq mr js jt ju ms jw jx jy jz hn dt translated"><em class="hu">请注意，你将无法完成Wordpress的安装，因为没有数据库。</em></p></blockquote><h1 id="3b64" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">测试您的Kubernetes集群安装</h1><p id="bf59" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">是时候测试您的本地Kubernetes集群了。在本节中，您将部署<a class="ae ka" href="https://smashing.github.io/" rel="noopener ugc nofollow" target="_blank"> Smashing.io仪表板</a>。</p><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/c7e3c9d04f5ade1fda1bebbd637b040e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bqdhxie5dHlCqFmb.png"/></div></div></figure><h1 id="b1d0" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">部署粉碎到Kubernetes</h1><p id="c57a" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">您可以通过以下方式将您的仪表板部署到Kubernetes:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="e6ab" class="mg kd hu lw b fv mh mi l mj mk">kubectl run smashing --image=visibilityspots/smashing --port=3030</span></pre><p id="368a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦Kubernetes完成了容器的下载，您应该会看到它正在运行:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="d724" class="mg kd hu lw b fv mh mi l mj mk">kubectl get pods</span></pre><h1 id="c8de" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">暴露仪表板</h1><p id="e298" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">您可以通过以下方式公开您的部署:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="839d" class="mg kd hu lw b fv mh mi l mj mk">kubectl expose deployment smashing --type=NodePort</span></pre><p id="5035" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以通过以下方式在浏览器中打开仪表板:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="b317" class="mg kd hu lw b fv mh mi l mj mk">minikube service smashing</span></pre><p id="9d8e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以从Kubernetes访问仪表板！万岁！</p><h1 id="b3d1" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">库伯内特斯的鸟瞰图</h1><p id="45f2" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">迷你库贝装满了好吃的东西。</p><p id="5b0f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以通过以下方式访问官方Kubernetes仪表盘:</p><pre class="lg lh li lj fq mc lw md me aw mf dt"><span id="e84d" class="mg kd hu lw b fv mh mi l mj mk">minikube dashboard</span></pre><figure class="lg lh li lj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/706df1ecf0462f4ca15650bbb30fc33a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0khkK9pqm_hpHg0a.png"/></div></div></figure><p id="8fe5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从那里，您可以探索您的集群并部署应用程序。</p><h1 id="49dd" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">摘要</h1><p id="793c" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated"><em class="kb">仅此而已！</em></p><p id="45d8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在你知道在Windows上安装Docker和Kubernetes的所有选项了。</p><p id="4ed8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你无意中发现了文章中没有描述的错误，请随时在Twitter <a class="ae ka" href="https://twitter.com/learnk8s" rel="noopener ugc nofollow" target="_blank"> @learnk8s </a>或<a class="ae ka" href="https://learnk8s-slack-invite.herokuapp.com/" rel="noopener ugc nofollow" target="_blank"> Slack </a>上联系。</p><p id="9baf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">既然您已经有了一个完整的工作环境，那么您应该看看关于如何将Laravel应用程序部署到Kubernetes的教程。</p><p id="1ed5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你喜欢这篇文章，你应该继续关注！订阅我们的时事通讯！</p></div><div class="ab cl nb nc hc nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hn ho hp hq hr"><p id="7fc8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">原载于2018年6月5日</em><a class="ae ka" href="https://learnk8s.io/blog/installing-docker-and-kubernetes-on-windows" rel="noopener ugc nofollow" target="_blank"><em class="kb">learn k8s . io</em></a><em class="kb">。</em></p><figure class="lg lh li lj fq iv"><div class="bz el l di"><div class="ni nj l"/></div></figure></div></div>    
</body>
</html>