<html>
<head>
<title>Build a Gatsby Blog using the Cosmic JS source plugin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Cosmic JS源代码插件创建一个Gatsby博客</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-gatsby-blog-using-the-cosmic-js-source-plugin-d3772776ddb7?source=collection_archive---------24-----------------------#2018-06-06">https://medium.com/hackernoon/build-a-gatsby-blog-using-the-cosmic-js-source-plugin-d3772776ddb7?source=collection_archive---------24-----------------------#2018-06-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/bb659ece888c498cdb9998e3addc955b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdFavPDfmEikPONLbt1VqQ.png"/></div></div></figure><p id="cf5d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我将向你展示如何使用React、<a class="ae ka" href="https://gatsbyjs.org/" rel="noopener ugc nofollow" target="_blank"> Gatsby JS </a>和<a class="ae ka" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>创建一个简单但速度极快的博客。让我们开始吧。</p><h1 id="171d" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="9e94" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="https://github.com/cosmicjs/gatsby-blog-cosmicjs" rel="noopener ugc nofollow" target="_blank">下载GitHub repo。</a> <br/> <a class="ae ka" href="https://cosmicjs.com/apps/gatsby-blog" rel="noopener ugc nofollow" target="_blank">查看演示。</a></p><h1 id="42c1" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">先决条件</h1><p id="6a1c" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在启动之前，您需要安装Node JS、npm和Gastby CLI。确保您已经安装了它们。</p><h1 id="5303" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">盖茨比是什么？</h1><p id="7601" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="https://gatsbyjs.org/" rel="noopener ugc nofollow" target="_blank"> Gatsby </a>是一个反应极快的网站框架。它允许开发者在几分钟内建立基于React的网站。无论你是想发展博客还是商业网站，《盖茨比》都会是一个不错的选择。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff le"><img src="../Images/1a17768380d227be419f9413b5989f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*r0KMRut9Rx49z6GX.jpg"/></div></div></figure><p id="35e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因为它是基于React的，网站页面不会被重新加载，而且它会生成静态页面，这使得生成的网站非常快。</p><h1 id="4038" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">博客发展</h1><p id="d125" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们必须设置环境，以便开始在博客上工作。</p><h1 id="bc9d" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">安装盖茨比</h1><p id="80e7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">首先，安装Gatsby CLI:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="9477" class="lo kc hu lk b fv lp lq l lr ls">npm install --global gatsby-cli</span></pre><h1 id="855d" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">搭建一个盖茨比模板</h1><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="9be8" class="lo kc hu lk b fv lp lq l lr ls">gatsby new gatsby-blog-cosmicjs</span></pre><p id="3c35" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在项目的文件夹中输入:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="5a9a" class="lo kc hu lk b fv lp lq l lr ls">cd gatsby-blog-cosmicjs</span></pre><p id="d638" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">启动服务器:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="2edb" class="lo kc hu lk b fv lp lq l lr ls">gatsby develop</span></pre><p id="b5fa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">至此，您应该已经能够访问您的Gatsby JS博客网站了，地址是:<a class="ae ka" href="http://localhost:8000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8000 </a>。</p><h1 id="469f" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">安装宇宙JS源代码插件</h1><p id="fc60" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在静态博客中，你的数据可以从不同的来源消费:Markdown文件、HTML文件、外部API (WordPress、Cosmic JS等)。</p><p id="eda8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">因此，盖茨比实现了独立的层:数据层。它由GraphQL提供支持。非常令人兴奋的东西！</p><p id="d557" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要将这个数据层与不同的数据提供者连接起来，您需要集成源插件。幸运的是，有许多源代码插件可以满足大多数需求。</p><p id="e940" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在我们的例子中，我们使用的是<a class="ae ka" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank">宇宙JS </a>。显然，我们需要为Cosmic JS集成源代码插件。好消息:Cosmic JS已经实现了他们的<a class="ae ka" href="https://www.gatsbyjs.org/packages/gatsby-source-cosmicjs/" rel="noopener ugc nofollow" target="_blank">源码插件</a>！</p><p id="556e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们安装:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="b855" class="lo kc hu lk b fv lp lq l lr ls">npm install --save gatsby-source-cosmicjs</span></pre><p id="4380" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们还需要安装一些其他插件。我们也这么做吧</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="0f0b" class="lo kc hu lk b fv lp lq l lr ls">npm install --save gatsby-plugin-offline gatsby-source-filesystem</span></pre><p id="83be" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些插件需要一些配置。因此，将<code class="eh lt lu lv lk b">gatsby-config.js</code>的内容替换为:</p><p id="9fb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lw">路径:</em>T1】</p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="acc7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，重启服务器，让Gatsby考虑这些更新。</p><h1 id="48a5" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">帖子列表和设置</h1><p id="c0f7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">首先，我们想在主页上显示文章列表。为此，请将以下内容添加到现有主页文件中:</p><p id="c44b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lw">路径:</em>T0】</p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><h2 id="94cb" class="lo kc hu bd kd lz ma mb kh mc md me kl jn mf mg kp jr mh mi kt jv mj mk kx ml dt translated">解释:</h2><p id="a025" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在<code class="eh lt lu lv lk b"><em class="lw">index.js</em></code>文件的末尾，我们导出了pageQuery。这些是GraphQl查询，用于获取关于设置和帖子列表的重要信息。</p><p id="864c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，我们将<code class="eh lt lu lv lk b">{ data }</code>被析构的对象作为<code class="eh lt lu lv lk b">IndexPage</code>的参数传递，并对其<code class="eh lt lu lv lk b">allCosmicjsPosts</code> &amp; <code class="eh lt lu lv lk b">cosmicjsSettings</code>对象进行循环以显示数据。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/1cc867f3bb97118e8e2df5d8425e356b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sOOQNUhvRbXbsEpB.png"/></div></div></figure><h1 id="9b83" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">单柱布局</h1><p id="2da4" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">到目前为止，我们已经将Cosmic JS源代码插件与Gatsby集成在一起，它看起来就像一个博客。现在，我们将致力于博客文章的详细信息页面。</p><p id="716d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们创建模板:</p><p id="1598" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lw">路径:</em> <code class="eh lt lu lv lk b"><em class="lw">src/templates/blog-post.js</em></code></p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="2d91" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这看起来不错，但是此时，Gatsby不知道何时应该显示这个模板。每个帖子都需要一个特定的URL。因此，我们将通过<code class="eh lt lu lv lk b">createPage</code>函数通知Gatsby我们需要的新URL。</p><p id="8898" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lw">路径:</em>T8】</p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="lx ly l"/></div></figure><p id="9314" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">重启<strong class="je hv">盖茨比服务器。</strong></p><p id="0827" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从现在开始，您应该可以通过点击主页上显示的URL来访问详细页面。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/34e2da541674843381969a595f287e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aHLcFtzw7vLY2YFZ.png"/></div></div></figure><h1 id="5134" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">额外的东西！</h1><p id="5a25" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">除此之外，我们还实现了<code class="eh lt lu lv lk b"><em class="lw">src/components/Bio.js</em></code>来显示作者信息&amp; <code class="eh lt lu lv lk b"><em class="lw">src/layouts/index.js</em></code>来创建博客的通用布局。</p><p id="3821" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">GitHub 上有<a class="ae ka" href="https://github.com/jazibsawar/gatsby-blog-cosmicjs" rel="noopener ugc nofollow" target="_blank">的源代码。要实时查看，克隆存储库，并运行(<code class="eh lt lu lv lk b">cd gatsby-blog-cosmicjs &amp;&amp; npm i &amp;&amp; npm run develop</code>)。</a></p><p id="ed22" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后重启服务器，访问网站。看起来会很棒！</p><p id="b1f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">盖茨比生成的静态网站可以<a class="ae ka" href="https://www.gatsbyjs.org/docs/deploy-gatsby/" rel="noopener ugc nofollow" target="_blank">轻松发布在存储提供商</a>上:Netlify、S3/Cloudfront、GitHub pages、GitLab pages、Heroku等。</p><p id="7c84" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>我们的<a class="ae ka" href="https://gatsby-blog-cosmicjs.netlify.com/" rel="noopener ugc nofollow" target="_blank">演示</a>部署在Netlify上。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/e1e323fc6903e85abad932659f2720e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fC7J7FQ6Yjv5mqzZ.png"/></div></div></figure><h1 id="9218" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论</h1><p id="807b" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">恭喜你。您已经成功构建了一个超级快速且易于维护的博客！请随意继续这个项目，以发现盖茨比和宇宙JS的优势。</p></div></div>    
</body>
</html>