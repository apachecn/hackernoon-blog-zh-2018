<html>
<head>
<title>Connecting Algolia to Cosmic JS for awesome search functionality!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Algolia连接到Cosmic JS以获得强大的搜索功能！</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/connecting-algolia-to-cosmic-js-for-awesome-search-functionality-ca435b1f8326?source=collection_archive---------27-----------------------#2018-06-08">https://medium.com/hackernoon/connecting-algolia-to-cosmic-js-for-awesome-search-functionality-ca435b1f8326?source=collection_archive---------27-----------------------#2018-06-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b874b5e34ac0cac975a9f158219a2be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XbYSme4Fb5Mc42JwaSmiig.jpeg"/></div></div></figure><p id="159e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用Cosmic JS的Webhooks，我们可以将<a class="ae ka" href="https://www.algolia.com/" rel="noopener ugc nofollow" target="_blank"> Algolia </a>与<a class="ae ka" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>同步，为我们的项目提供快速而强大的搜索功能。</p><h1 id="13d7" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">TL；速度三角形定位法(dead reckoning)</h1><p id="35d3" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="https://cosmicjs.com/apps/cosmic-store-with-algolia-search" rel="noopener ugc nofollow" target="_blank">演示</a> <br/> <a class="ae ka" href="https://github.com/cosmicjs/cosmic-algolia-store" rel="noopener ugc nofollow" target="_blank">源代码</a></p><h1 id="b362" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">介绍</h1><p id="9f59" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">如果你曾经尝试过自己实现搜索，那么你会知道这是很困难的。谢天谢地，Algolia发明了一种产品，让这一切变得简单。在这篇文章中，我们将介绍如何将Algolia连接到你的Cosmic JS后端，并将其添加到你的应用程序中。演示应用程序是用React.js和Express.js服务器构建的。如果您使用不同的东西，您仍然可以遵循这个模式。只需针对您的用例进行修改。</p><p id="d6b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有四个主要步骤:</p><ol class=""><li id="00bc" class="le lf hu je b jf jg jj jk jn lg jr lh jv li jz lj lk ll lm dt translated">创建Algolia应用程序</li><li id="8192" class="le lf hu je b jf ln jj lo jn lp jr lq jv lr jz lj lk ll lm dt translated">创建宇宙JS Webhooks</li><li id="7134" class="le lf hu je b jf ln jj lo jn lp jr lq jv lr jz lj lk ll lm dt translated">创建API端点来接收Cosmic JS Webhook POST请求</li><li id="5fd7" class="le lf hu je b jf ln jj lo jn lp jr lq jv lr jz lj lk ll lm dt translated">向我们的应用程序添加搜索小工具</li></ol><h1 id="c6a6" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第1部分—创建Algolia应用程序</h1><p id="6497" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">导航至<a class="ae ka" href="https://www.algolia.com/" rel="noopener ugc nofollow" target="_blank">https://www.algolia.com</a>登录或注册一个(免费)帐户。</p><p id="05e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">登录后，导航至控制面板。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/f9688570198a62b3e761c8ce9f8654a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:314/format:webp/0*p8HHnNCaGdbAzwdW.png"/></div></figure><p id="58a9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在仪表板中，单击“新建应用程序”。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/708c6eb91978fef4e5247cbd56105c98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BxrsqWLLd9sGOKBm.png"/></div></div></figure><p id="4c2f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为您的应用程序命名，然后单击“创建”。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/b118ac6497edc46a0b6e66d4d61d749c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8ujfRbUGglCzvube.png"/></div></div></figure><p id="03e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一页将要求您选择一个地区。挑一个最近的。然后点击“继续”。</p><p id="65c0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，您应该可以看到新创建的应用程序的仪表板。点击屏幕左侧的“API Keys”。这是您在后面的步骤中需要的API键的列表。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/8c20e65cacea91ce80a311a8da4fea84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BUsJoFt-KGMKdh7-.png"/></div></div></figure><h1 id="67db" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第2部分—创建Cosmic JS Webhooks</h1><p id="79c7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">登录你的宇宙JS账号，进入你的桶。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/3111929e6103cdf4f6136c8a9f221120.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WvZVdC02rrBC5PDm.png"/></div></div></figure><p id="8710" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在仪表板菜单中选择“设置”，然后选择“Webhooks”。</p><p id="b300" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你应该连接三个不同的网络钩子。将端点替换为您希望的项目端点</p><ol class=""><li id="dc1d" class="le lf hu je b jf jg jj jk jn lg jr lh jv li jz lj lk ll lm dt translated">事件:对象已创建并发布；端点—https://<__your_domain__>/API/algolia/create</__your_domain__></li><li id="86af" class="le lf hu je b jf ln jj lo jn lp jr lq jv lr jz lj lk ll lm dt translated">编辑和发布的对象；端点—https://<__your_domain__>/API/algolia/edit</__your_domain__></li><li id="0063" class="le lf hu je b jf ln jj lo jn lp jr lq jv lr jz lj lk ll lm dt translated">对象已删除；端点—https://<__your_domain__>/API/algolia/delete</__your_domain__></li></ol><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/cc1a0617509d841d8bb5a37575636f8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MeRMWvYx9v3emurx.png"/></div></div></figure><p id="49e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击“保存网页挂钩”。现在，无论何时创建、编辑或删除对象，您的服务器都会收到POST请求。下一步是设置您的服务器来接收这些请求，并使用它们来保持Algolia同步。</p><h1 id="9122" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第3部分—创建API端点来接收Cosmic JS Webhook POST请求</h1><p id="d22c" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">演示应用程序使用Node.js Express服务器。代码如下:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="d56d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，创建一个<a class="ae ka" href="https://www.npmjs.com/package/algoliasearch" rel="noopener ugc nofollow" target="_blank"> algoliasearch </a>客户端。它使用Algolia应用程序ID和管理API密钥(可在您的Algolia应用程序仪表板中找到)。</p><p id="09af" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后为我们希望从Cosmic JS接收的每个Webhook创建端点。Webhook POST请求包括其主体的对象。自定义“convertDataToAlgoliaObject”实用函数用于将Cosmic JS对象转换为Algolia格式的对象。以下是“convertDataToAlgoliaObject”的代码:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ly lz l"/></div></figure><p id="03ea" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个功能对于每个项目都是不同的。你基本上只想提取“可搜索”的信息。</p><p id="38a4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，Algolia的algoliaseasrch库可以用来上传、编辑或删除Algolia中的相应条目。</p><p id="082e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">后端设置完成！但是，您应该注意，在您部署应用程序之前，不会进行同步。您创建的自定义API端点尚不存在，因此Algolia Webhook POST请求不会被拦截。</p><h1 id="c217" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">第4部分—向我们的应用程序添加搜索小部件</h1><p id="64f3" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">Algolia不仅提供了强大的搜索功能，还提供了许多可以用来显示数据的库。我在演示项目中使用了他们的<a class="ae ka" href="https://community.algolia.com/react-instantsearch/Getting_started.html" rel="noopener ugc nofollow" target="_blank"> React即时搜索库</a>。它提供了本质上即插即用的React组件。您可以用自己的CSS自定义它们的样式。<a class="ae ka" href="https://community.algolia.com/react-instantsearch/Getting_started.html" rel="noopener ugc nofollow" target="_blank">文档</a>写得很好，这里就不需要赘述了。</p><h1 id="945c" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论</h1><p id="524f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">希望这篇文章对你有所帮助。如果有不清楚的地方，查看一下<a class="ae ka" href="https://cosmicjs.com/docs" rel="noopener ugc nofollow" target="_blank">宇宙JS </a>或<a class="ae ka" href="https://www.algolia.com/doc/" rel="noopener ugc nofollow" target="_blank"> Algolia </a>文档。他们都很棒！</p><blockquote class="ma mb mc"><p id="d90a" class="jc jd md je b jf jg jh ji jj jk jl jm me jo jp jq mf js jt ju mg jw jx jy jz hn dt translated">这篇文章最初出现在宇宙JS网站上。</p></blockquote></div></div>    
</body>
</html>