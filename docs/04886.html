<html>
<head>
<title>Getting Started with AWS Lambda and Node.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS Lambda和Node.js入门</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/getting-started-with-aws-lambda-and-node-js-4ce3259c6dfd?source=collection_archive---------4-----------------------#2018-06-09">https://medium.com/hackernoon/getting-started-with-aws-lambda-and-node-js-4ce3259c6dfd?source=collection_archive---------4-----------------------#2018-06-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/13b42cf28af251ca30c88544cb727293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qf7IuoB2nc_qJKLeLgsVGA.jpeg"/></div></div></figure><div class=""/><p id="bfcd" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">很久很久以前，有一句话引起了我的注意。<strong class="je ig">λ</strong>。这引起了共鸣，想起了小时候玩半条命的美好时光。我一点也不知道AWS Lambda是什么，以及它有多棒。如果你感兴趣，留下来。我只占用你已经很忙的一天几分钟，你肯定不会介意的。</p><h2 id="395f" class="ka kb if bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">TL；速度三角形定位法(dead reckoning)</h2><ul class=""><li id="d01f" class="kv kw if je b jf kx jj ky jn kz jr la jv lb jz lc ld le lf dt translated"><a class="ae lg" href="#20c4" rel="noopener ugc nofollow">功能即服务</a> —定义AWS Lambda背后的架构。</li><li id="ba84" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><a class="ae lg" href="#0883" rel="noopener ugc nofollow">创建你的第一个函数</a>——通过AWS控制台创建一个简单的Lambda函数。</li><li id="3a24" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><a class="ae lg" href="#4b8e" rel="noopener ugc nofollow">编写一些逻辑</a>——添加一些<em class="lm">真实的</em>逻辑到混音中，并编写一个随机骰子滚动函数。</li><li id="7def" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><a class="ae lg" href="#90bc" rel="noopener ugc nofollow">连接一个API </a> —通过AWS API Gateway增加一个事件触发器来触发该功能。</li><li id="fd21" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><a class="ae lg" href="#c4b7" rel="noopener ugc nofollow">上传带zip文件的代码</a> —添加npm模块并上传为. ZIP文件。</li><li id="3969" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><a class="ae lg" href="#a10c" rel="noopener ugc nofollow">监控</a> —监控工具概述。使用名为<a class="ae lg" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank">仪表板</a>的<a class="ae lg" href="https://dashbird.io/pricing/" rel="noopener ugc nofollow" target="_blank">自由工具</a>进行调试。</li></ul><h1 id="20c4" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">作为服务发挥作用</h1><p id="adcc" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">让我们直接开始吧。AWS Lambda所属的架构被称为<a class="ae lg" href="https://en.wikipedia.org/wiki/Serverless_computing" rel="noopener ugc nofollow" target="_blank">无服务器计算</a>或<a class="ae lg" href="https://en.wikipedia.org/wiki/Function_as_a_service" rel="noopener ugc nofollow" target="_blank">功能即服务</a>。这是开创性的，因为缺少服务器。听起来很奇怪。代码不会在土豆上运行，对吧！？好吧，那只是一种说法。实际上，作为开发人员，您不需要担心代码运行的基础设施。您将代码部署到云中，它自己处理所有需要的资源的创建。但是怎么做呢？集装箱！</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/1db2eb238b6217fa09e6a2fd8a09d749.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QOio00_HtaO8l4MD."/></div></div></figure><p id="6ef1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不，不是那些。这些！</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/9ce1dc8eb1733fe04a25bc03b7eacd65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Lbny4vFN3MnVL9ez.png"/></div></div></figure><blockquote class="mm mn mo"><p id="d988" class="jc jd lm je b jf jg jh ji jj jk jl jm mp jo jp jq mq js jt ju mr jw jx jy jz hn dt translated">Docker是全球领先的软件容器平台。开发人员在与同事合作编写代码时，使用Docker来消除“在我的机器上工作”的问题。运营商使用Docker在隔离的容器中并行运行和管理应用，以获得更高的计算密度。企业使用Docker构建灵活的软件交付管道，以便更快、更安全、更自信地为Linux、Windows Server和Linux-on-mainframe应用交付新特性。</p></blockquote><p id="7d4d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每当一个<a class="ae lg" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda函数</a>被创建时，一个容器就会旋转起来为它服务。尽管它实际上不是Docker容器，而是由AWS构建的专有容器。我只是用了这个例子，这样你会更容易理解。</p><p id="ba5a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">代码被部署到容器中，然后被执行。从而使每个后续请求更快，因为如果容器已经存在，AWS将跳过容器的初始创建。</p><h1 id="0883" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">创建您的第一个函数</h1><p id="cc6f" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">在看到代码之前，您需要在AWS控制台中创建新函数。也就是说你需要一个AWS账户。如果你没有帐户，不要犹豫创建一个，他们有令人难以置信的免费层，包括各种服务，并持续长达12个月。</p><p id="145d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">继续，打开浏览器，导航到你的账户。从那里你需要找到λ。按下服务下拉菜单并选择Lambda。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/08cd27b8b9b0fae1a92ddc6af35cd32f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZbVXAVy8xx-0jHsj.png"/></div></div></figure><p id="d6e5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你将登陆Lambda主页，有一个大的橙色按钮提示你创建一个新功能。好了，不要再等了，按吧。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/1d517aca84d3de46f6c204624b1c2d9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xTQTmy7NUMlHMI0f.png"/></div></div></figure><p id="ae86" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将带您到主函数创建向导。因为这个例子将覆盖一个模拟掷骰子的基本函数，所以让我们忘记蓝图，从头开始创作一个。</p><p id="4198" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">厉害！现在你只需要为函数添加一个名字和<a class="ae lg" href="http://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles.html" rel="noopener ugc nofollow" target="_blank">角色</a>，最后开始写一些代码。关于角色，请随意选择一个现有的角色，如<code class="eh ms mt mu mv b">lambda_basic_execution</code>。对于这个简单的例子来说，这已经足够了。</p><p id="911e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">确保不要忘记添加<strong class="je ig"> Node.js 8.10作为运行时</strong>。最后，继续创建函数。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/c114fed1fd759d7aa0c6b7161fe3cbe1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vXA-r4GCy6tbg9D1.png"/></div></div></figure><p id="1b5f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">太好了！现在你终于看到一些代码了。好多了。让我们开始吧。有几个选项需要考虑。代码输入类型选项设置如何将代码添加到函数中。可以是<em class="lm">内联</em>，<em class="lm">上传一个. zip文件</em>，也可以是<em class="lm">从S3 </em>上传。</p><p id="5ddb" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将使用第一个选项，内联编辑。对于小函数，内联编写代码完全没问题。但是当你有更多的代码时，它会变得很烦人。这就是为什么有一个. zip上传选项，我们稍后也会谈到。</p><p id="aae0" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将运行时设置为<code class="eh ms mt mu mv b">Node.js 8.10</code>，这是本文撰写时Lambda最新支持的Node.js版本。处理程序也可以保持不变。这里，<code class="eh ms mt mu mv b">index</code>代表文件的名称，而<code class="eh ms mt mu mv b">handler</code>是函数的名称。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/85589aad2c3405e0fcd313416f47a532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*yQTYYfh4OAEG7qBg.png"/></div></div></figure><p id="f8f4" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于AWS Lambda (6.10)上以前版本的Node.js，有3个主要参数:</p><ul class=""><li id="d5d0" class="kv kw if je b jf jg jj jk jn mw jr mx jv my jz lc ld le lf dt translated"><code class="eh ms mt mu mv b">event</code>参数包含当前事件信息。这意味着触发该函数的事件会将信息发送给该函数使用。一个例子是HTTP请求发送到端点的数据，比如它是否有请求参数或主体。</li><li id="238a" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><code class="eh ms mt mu mv b">context</code>包含关于函数本身的所有信息。它运行了多长时间，消耗了多少内存等等。这被视为运行时信息。</li><li id="a86e" class="kv kw if je b jf lh jj li jn lj jr lk jv ll jz lc ld le lf dt translated"><code class="eh ms mt mu mv b">callback</code>是相当不言自明的。当你想告诉函数结束它的执行时，你调用回调。它有两个参数，第一个是错误，第二个是您希望作为Lambda函数的响应发送回来的数据。</li></ul><p id="700c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有了<code class="eh ms mt mu mv b">Node.js 8.10</code>，事情有了变化，因为有了<code class="eh ms mt mu mv b">async/await</code>的支持。<code class="eh ms mt mu mv b">handler</code>现在可以接受一个承诺值。这就是为什么我们现在可以将一个<code class="eh ms mt mu mv b">async function</code>赋给<code class="eh ms mt mu mv b">handler</code>，并直接返回一个承诺。不再愚蠢的<code class="eh ms mt mu mv b">callback</code>参数。太牛逼了！</p><h1 id="4b8e" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">写一些逻辑</h1><p id="c90d" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">这是足够的设置了。让我们编码一些东西。</p><p id="d45a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们从这段代码开始。目标是编写一段模拟骰子滚动的代码。</p><figure class="mi mj mk ml fq hw"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="2470" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里什么都没有。</p><figure class="mi mj mk ml fq hw"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="c27c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不错！这就行了。现在该函数将返回一个介于1和6之间的随机数。既然这样，我们就来测试一下。</p><p id="4b16" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">按下橙色测试按钮，继续创建一个简单的测试事件。没有特别的理由，给它一个时髦的名字。只是为了好玩搞一个名为<code class="eh ms mt mu mv b">FunkyName</code>的测试赛。现在，您可以继续测试该功能了。按下测试按钮后，您会看到类似这样的内容。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/651f78f1a4016795bbf17eee9b26a957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6ZecyFBnRNjxfEBe.png"/></div></div></figure><p id="2513" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以虚线轮廓为边界的部分显示了函数输出，更准确地说是由函数发回的返回值。</p><p id="000f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那很有趣！你现在有了一个<strong class="je ig">掷骰子</strong>函数，但是还没有办法在AWS之外触发它。</p><h1 id="90bc" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">连接API</h1><p id="93e4" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">关键的部分来了。你认为一个lambda函数如何知道如何开始它的执行？伏都教？魔法？不，很遗憾没有。每个函数调用都由一个事件触发。它可以是当一张图片上传到S3时，它可以是亚马逊的Alexa技能，或者只是一个普通的HTTP请求。</p><p id="687c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们创建一个HTTP事件，并告诉它调用我们的函数。要做到这一点，您首先需要在AWS控制台中跳转到<a class="ae lg" href="http://docs.aws.amazon.com/apigateway/latest/developerguide/welcome.html" rel="noopener ugc nofollow" target="_blank"> API网关</a>。在服务下拉菜单中选择API网关，你将在这里登陆。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/624e9b7e6b3e451d99146fec13473ded.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vXRS_T_V-A875qBH.png"/></div></div></figure><p id="38a4" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您将立即被提示创建一个API。忽略所有的建议，选择<strong class="je ig">新API </strong>并为你的API输入一个名字。我将坚持使用<strong class="je ig"> FunkyApi </strong>，它听起来很合适。继续并点击创建。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/b8f46a3b33c0d87d6819ec8a242a9560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rPe_zSmy2g1pYTEe.png"/></div></div></figure><p id="5e9a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在有趣的部分来了。最后把API挂接到函数上。首先按下<strong class="je ig">动作</strong>下拉菜单，选择<strong class="je ig">创建方法</strong>。您将看到另一个更小的下拉菜单出现。按下它，并选择<strong class="je ig">获取</strong>。将集成类型设置为Lambda Function，选择创建函数的区域，并写下函数的名称。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/d27bbe7fe27d94a935b75f552406fa7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1cNq9pu4_WJv2enT.png"/></div></div></figure><p id="9560" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击保存和欣喜！</p><p id="4542" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">API已经设置好了。您现在只需要部署它。再次按下<strong class="je ig">动作</strong>下拉菜单，点击<strong class="je ig">部署API </strong>。选择一个新的部署阶段，记下<strong class="je ig"> dev </strong>作为阶段名，然后就可以部署API了。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/1b956a2291b031353253a1828bc6c6c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8-HvcTB5Wx1o-_Li.png"/></div></div></figure><p id="0951" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">终于！API端点已准备就绪。您现在可以访问<strong class="je ig">开发阶段编辑器</strong>上的<strong class="je ig">调用URL </strong>。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/4707faa3177504db9f56314c5f1aa026.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ssjunzR8OHgUyRjq.png"/></div></div></figure><p id="8852" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在浏览器窗口中随意打开API端点并检查输出。你看到了什么？不，真的，你看到了什么？应该返回一个介于1和6之间的随机数。</p><p id="bbd8" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这有多牛逼！？在不到5分钟的时间里，您已经创建了一个Lambda函数，将它连接到API Gateway，并创建了一个随时可以使用的端点。</p><h1 id="c4b7" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">上传带ZIP的代码</h1><p id="67ce" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">如果需要使用npm的一些模块怎么办？不能内联添加。必须有一种方法来运行具有依赖关系的代码。嗯，有，但是要做对有点棘手。不管怎样，让我们继续吧！</p><p id="c21f" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，创建一个目录并初始化npm。</p><pre class="mi mj mk ml fq nb mv nc nd aw ne dt"><span id="0de2" class="ka kb if mv b fv nf ng l nh ni">$ mkdir roll-a-dice &amp;&amp; npm init -y</span></pre><p id="c88e" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦你完成了这些，继续安装<a class="ae lg" href="https://dev.to/moment-js-a-better-date-library-for-javascript/" rel="noopener ugc nofollow" target="_blank"> moment </a>，一个简单的日期时间库。</p><pre class="mi mj mk ml fq nb mv nc nd aw ne dt"><span id="1be2" class="ka kb if mv b fv nf ng l nh ni">$ npm install moment --save</span></pre><p id="c652" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将创建一个包含所需依赖项的<code class="eh ms mt mu mv b">node_modules</code>文件夹。要包含它们，你需要压缩所有文件并上传<strong class="je ig">。将</strong>文件压缩到Lambda。</p><p id="a4ae" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> <em class="lm">重要提示</em> </strong> <em class="lm">:只压缩项目目录内的文件和文件夹。做</em> <strong class="je ig"> <em class="lm">不做</em> </strong> <em class="lm">压缩整个文件夹。如果你这样做，将破坏配置和Lambda功能将失败！</em></p><p id="c975" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在您继续压缩文件之前，用您刚刚安装的新npm模块添加一些代码，以确保Lambda函数使用它。</p><p id="6e79" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在项目目录中创建一个新文件，并将其命名为<code class="eh ms mt mu mv b">index.js</code>。将AWS中现有的lambda函数粘贴到文件中，并稍加编辑。</p><figure class="mi mj mk ml fq hw"><div class="bz el l di"><div class="mz na l"/></div></figure><p id="7bd1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">保存所有文件，然后把它们拉上拉链。记住，只有<strong class="je ig"> roll-a-dice </strong>目录中的文件和文件夹。</p><p id="27ca" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您现在有了一个. ZIP文件。继续跳回AWS控制台。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/6bed9c1e15c00c872fb1a3331247b47a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IU3h2siDW29jZiKa.png"/></div></div></figure><p id="62c5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将<strong class="je ig">代码输入类型</strong>更改为<strong class="je ig">上传一个. ZIP文件</strong>并上传您刚刚压缩的文件。太好了！现在，滚动回页面顶部，再次按下橙色大按钮进行保存，并测试功能。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/a86fd6ec790c77a4abbe21d25ec3afb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SG2fJTU9WHkyuw7B.png"/></div></div></figure><p id="c9ff" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不错！它可以工作，并且显示当前的日期和时间。您正确地压缩了函数和npm模块。为了以防万一，跳回浏览器窗口，再次尝试端点。它现在应该显示更新的消息。</p><h1 id="a10c" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">监视</h1><p id="05b2" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">如何洞察你的职能？简单，有一个<strong class="je ig">监控</strong>标签！在这里，您可以检查关于您的函数行为的指标。</p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/b8ebdb3405c03cc0a84b360370f6032e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4TUaeLJNZcpoVkuz.png"/></div></div></figure><p id="5f4d" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是，当您有多个功能时，要获得正确的洞察力可能会有点困难。在这种情况下，您可能想要查看一个<a class="ae lg" href="https://dashbird.io/monitor-aws-lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda监控</a>报告工具，如<a class="ae lg" href="https://dashbird.io/features/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>、IOPipe、Datadog或类似的工具。</p><p id="8aa7" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里有一个关于<a class="ae lg" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>如何给你一个AWS Lambda函数的合适的<a class="ae lg" href="https://dashbird.io/features/aws-lambda-serverless-monitoring/" rel="noopener ugc nofollow" target="_blank">仪表盘的例子。</a></p><figure class="mi mj mk ml fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/546ab76c65950871b8b8a4f54be66325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MYTqh03XA1EP5_wV.gif"/></div></div></figure><p id="d3ea" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je ig"> <em class="lm">注意</em></strong><em class="lm">:dash bird团队在过去几个月中增加了一系列新功能，包括</em> <a class="ae lg" href="https://dashbird.io/docs/user-guide/tracing/" rel="noopener ugc nofollow" target="_blank"> <em class="lm">跟踪</em> </a> <em class="lm">支持X射线，新的详细图表，基于使用量的计费，新的</em> <a class="ae lg" href="https://dashbird.io/pricing/" rel="noopener ugc nofollow" target="_blank"> <em class="lm">自由层</em> </a> <em class="lm">，而且还将延迟减少到了20秒以下，这意味着仪表盘更新速度快如闪电。</em></p><h1 id="a7b8" class="ln kb if bd kc lo lp lq kg lr ls lt kk lu lv lw kn lx ly lz kq ma mb mc kt md dt translated">现在怎么办？开始编码！</h1><p id="855c" class="pw-post-body-paragraph jc jd if je b jf kx jh ji jj ky jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">Lambda是一个不可思议的工具，可以与AWS上的大量其他服务很好地配合。Lambda函数可以响应文件上传等事件，也可以用于聊天机器人、REST APIs等等。</p><p id="374b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们上面编写的这个简单的API示例仅仅是个开始。但是你能明白这一点。只需担心代码就可以避免如此多的开销，而不必关心底层的基础设施。我敦促你继续使用这项技术，因为它在未来只会越来越受欢迎。开始编码吧。不管是什么，都不重要。开始写代码吧，因为你自己动手会学到最多。</p><p id="0053" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们<a class="ae lg" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> Dashbird </a>希望通过让<a class="ae lg" href="https://dashbird.io/features/lambda-error-tracking/" rel="noopener ugc nofollow" target="_blank">跟踪错误</a>变得像在公园散步一样，为创建无服务器应用创造一个更友好的环境。如果你有任何问题，请在下面的评论中告诉我。</p><p id="bfe7" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你错过了上面的任何步骤，<a class="ae lg" href="https://github.com/adnanrahic/getting-started-with-aws-lambda-and-nodejs" rel="noopener ugc nofollow" target="_blank">这里是包含所有代码的库</a>。</p><p id="9897" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要了解更多关于无服务器技术的信息，您可以查看我的个人资料。</p><div class="ht hu fm fo hv nj"><a rel="noopener follow" target="_blank" href="/@adnanrahic"><div class="nk ab ej"><div class="nl ab nm cl cj nn"><h2 class="bd ig fv z el no eo ep np er et ie dt translated">阿德南·拉希奇-中型</h2><div class="nq l"><h3 class="bd b fv z el no eo ep np er et ek translated">阅读Adnan Rahi在媒体上的文章。dashbird.io的开发/倡导者，bookvar.co的联合创始人。作者在packtpub.com…</h3></div><div class="nr l"><p class="bd b gc z el no eo ep np er et ek translated">medium.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx ib nj"/></div></div></a></div><p id="0638" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">希望你们喜欢读这篇文章，就像我喜欢写这篇文章一样。直到下次，保持好奇，玩得开心。随时加入我的时事通讯，了解所有未来的更新！</p><figure class="mi mj mk ml fq hw"><div class="bz el l di"><div class="ny na l"/></div></figure></div><div class="ab cl nz oa hc ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="hn ho hp hq hr"><p id="7697" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lm">最初发布于</em><a class="ae lg" href="https://dev.to/adnanrahic/getting-started-with-aws-lambda-and-nodejs-1kcf" rel="noopener ugc nofollow" target="_blank"><em class="lm">dev . to</em></a><em class="lm">。</em></p></div></div>    
</body>
</html>