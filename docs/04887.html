<html>
<head>
<title>Functional Programming Paradigms in modern JavaScript: Currying</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript中的函数式编程范例:Currying</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/functional-programming-paradigms-in-modern-javascript-currying-5652e489cce8?source=collection_archive---------5-----------------------#2018-06-09">https://medium.com/hackernoon/functional-programming-paradigms-in-modern-javascript-currying-5652e489cce8?source=collection_archive---------5-----------------------#2018-06-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/28b0f7b6bf17578321119d22758aee5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZEZdLLMxj9UsPa6Q5zlAFQ.jpeg"/></div></div></figure><p id="ad58" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我记得我决定扩展函数式编程技能的那一刻。那是一个寒冷的十月夜晚，我下班回家，听着我最喜欢的播客之一——JavaScript Jabber。</p><p id="2035" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我不记得具体是谁了，但是他详细地讲述了函数式编程如何帮助了他的团队，以及他们为正在开发的产品解决了哪些问题。</p><p id="bb4c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这听起来真的很有趣，所以我回到家，做了一些谷歌搜索，看看这个功能性的东西是什么，它有什么特别之处。当我经历纯函数甚至不可变数据结构的想法时，我能够保持冷静。</p><p id="ca0d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是在某一点上，我对<strong class="je hv">奉承</strong>达成了一种解释，并很快放弃了它，认为这是我在项目中永远不会做的事情。我只是不能理解它背后的想法。</p><p id="1b6f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">函数式编程有一个陡峭的学习曲线，但是当你通过基础知识时，这个斜坡变得更难爬了。我怀疑我是唯一有这种感觉的人，所以在这篇文章中，我们将尝试用最简单的方式来审视<strong class="je hv">的谄媚。</strong></p><h1 id="e655" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">什么是currying？</h1><p id="15a2" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">Currying是一种以特定方式构造函数的技术。如果你读过其他一些关于函数式编程的文章，你肯定会看到它和<strong class="je hv">部分应用</strong>一起被提及。</p><p id="2657" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本文的范围内，我们将完全集中在<strong class="je hv">奉承</strong>，为什么它是有用的，以及如何应用它。</p><p id="8a45" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们已经知道，我们应该主要用纯函数来编写程序，以尽可能地减少副作用。我们知道纯函数将参数作为输入，并基于这些参数返回输出。</p><p id="865e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，有不同<strong class="je hv"> arity </strong>的功能。<strong class="je hv"> Arity </strong>是一个术语，它指定一个函数接受的参数数量。例如，一个以单个数字作为参数的函数的arity<strong class="je hv">为1。接受两个数字或两个字符串的函数，或者一个字符串和一个数字的<strong class="je hv"> arity </strong>为2，依此类推。</strong></p><blockquote class="ld"><p id="9ba0" class="le lf hu bd lg lh li lj lk ll lm jz ek translated">Currying是一种帮助我们将一个arity大于1的函数转换成一系列arity为1的函数的技术。</p></blockquote><p id="c419" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">这是我们需要理解的所有术语。我们将使用currying将其转换为两个链式函数，每个链式函数的arity为1，而不是使用一个带有两个参数的函数(arity为2的函数)。</p><h1 id="7919" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">简单的例子</h1><p id="879c" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">我尽量远离数学例子，因为它们在实际项目中是如此普遍和不适用，但是对于大多数函数式编程概念来说，数学解释是最简单的。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="lw lx l"/></div></figure><p id="2132" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一个<code class="eh ly lz ma mb b">add</code>函数接受两个参数并返回它们的和。这里没有我们没见过的东西。</p><p id="f2bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">另一方面，<code class="eh ly lz ma mb b">addCurried</code>功能乍看起来像是在施展某种黑魔法，多个<code class="eh ly lz ma mb b">=&gt;</code>符号一开始会让人非常困惑。</p><p id="e740" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们看一下<code class="eh ly lz ma mb b">curriedAdd</code>函数中发生了什么。它首先接受一个参数<code class="eh ly lz ma mb b">x</code>，然后返回一个函数。此时它不做任何计算。</p><p id="d4b8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">返回的函数接受一个参数<code class="eh ly lz ma mb b">y</code>，并返回<code class="eh ly lz ma mb b">y</code>与前一个函数的<code class="eh ly lz ma mb b">x</code>之和。</p><p id="cd1c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">起初这可能有点令人困惑，尤其是如果您是这门语言的新手，并且没有完全理解<a class="ae mc" href="https://hackernoon.com/understanding-javascript-closures-4188edf5ea1b" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> <em class="md">闭包</em> </strong> </a>。总而言之，<em class="md">闭包</em>是一个嵌套函数，即使在词法范围之外被调用，它也可以访问词法范围。</p><p id="c894" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以当我们创建函数<code class="eh ly lz ma mb b">addTwo</code>时，即使它只有一个参数，因为它在<code class="eh ly lz ma mb b">curriedAdd</code>上有一个闭包，它仍然可以访问<code class="eh ly lz ma mb b">x</code>，因此调用它将返回它们的和。</p><p id="9d37" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过一个使用旧函数语法的例子，这种工作方式会变得更加清晰。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="lw lx l"/></div></figure><h1 id="66d5" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">这为什么有用？</h1><p id="916c" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">一开始，谄媚似乎是不可思议的不必要，主要是因为我们正在用一个简单到将两个数相加的操作来说明它。这项技术非常强大，因为它让我们能够更好地控制自己的功能。</p><p id="a939" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过对函数有更多的控制，我们可以编写更多的描述性代码，并实现更好的代码可重用性。看看<code class="eh ly lz ma mb b">addTwo</code>函数调用是多么容易理解。它基本上读起来像简单的英语。</p><p id="f5ac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每当我们想使用更抽象的函数并隐藏实现时，Currying就很有用。一个更适用的例子是一些curried异步操作。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="lw lx l"/></div></figure><p id="0c63" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里我们需要注意一些重要的事情。首先是我们如何抽象出对服务的实际调用。每个函数都在前一个函数的基础上提供了另一个抽象层，所以最终保存一篇文章就像将对象传递给<code class="eh ly lz ma mb b">saveArticle</code>函数一样简单。</p><p id="32bb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于以前没有接触过currying技术的人来说，函数本身看起来有点复杂，但是使用它实际上提高了代码的简单性。我们不必担心参数的顺序，因为每个函数都可以取一个参数。</p><p id="780d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，我们还应该注意我们实现的灵活性。大多数程序可能需要发出更多的<code class="eh ly lz ma mb b">POST</code>请求，所以<code class="eh ly lz ma mb b">makePostRequest</code>函数可以为我们不同的实体重用。</p><p id="f2f3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果我们利用箭头函数，我们可以大大<em class="md">减少</em>我们需要编写简化函数的代码量，同时<em class="md">大大</em>增加我们工作的复杂性。</p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="lw lx l"/></div></figure><p id="8cd8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一旦你熟悉了这个概念，这看起来真的很干净，但是对于任何阅读你的代码而不理解currying的人来说，这将带来更多的头痛。</p><h1 id="95f4" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">应该吃什么咖喱？</h1><p id="5a7d" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">像Haskell这样的纯函数式语言在默认情况下将它们的函数化。你不能调用一个有多个参数的函数，所以你创建的每一个函数都会被自动编译。</p><p id="ee03" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在JavaScript中，函数可以接受任意多的参数，这就是为什么很多人认为在JS中currying是不必要的。在我看来，这个话题没有正确的答案。</p><p id="6aef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您是否将使用currying完全取决于您的团队对函数式编程的看法和知识。无论你的团队对这种编程技术是兴奋还是怀疑，天平都会向一个方向倾斜。</p><p id="159e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我的建议是阅读题目，练习但不要强迫。尝试实现我们最近学到的新模式或新技术是很常见的。俗话说，如果你有一把锤子，所有东西看起来都像钉子。</p><p id="577c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们可以强制我们的函数是纯的，我们可以通过在我们的<strong class="je hv"> Redux </strong>存储中集成<strong class="je hv"> ImmutableJS </strong>来强制不变性，但是当涉及到<strong class="je hv"> currying </strong>和<strong class="je hv"> partial application </strong>(我们将在下一次讨论这个问题)时，只在有明显好处时使用这些技术。</p><p id="79ce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">函数式编程的主要目标是编写更具描述性的代码。它应该让我们想得更少，并从它提供的抽象中受益。如果使用带有几个参数的普通函数会给开发者带来更好的体验，那么我们应该一直这样做。</p><h1 id="b403" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">结论</h1><p id="d9c0" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">在本文中，我们介绍了currying的基础知识，currying是一种函数式编程技术，它帮助我们将函数分割成更小的函数——每个函数接受一个参数。</p><p id="aac9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们讨论了一些好处，并浏览了一些代码。我们看到了如何最大限度地使用函数，我计划继续使用一种叫做<strong class="je hv">部分应用</strong>的类似技术。</p><p id="62d1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你没看过前面的文章，这里有链接。如果你想收到我发的邮件，你可以从<a class="ae mc" href="https://buttondown.email/kondov" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">这里</strong> </a>订阅。希望这是有帮助的，不要忘记与朋友分享，并保持鼓掌按钮！</p><div class="me mf fm fo mg mh"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-pure-functions-797d9abbee1" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hv fv z el mm eo ep mn er et ht dt translated">现代JavaScript中的函数式编程范例:纯函数</h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated">JavaScript是最流行的编程语言之一。它可以在浏览器、桌面、手机上运行…</h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated">hackernoon.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ja mh"/></div></div></a></div><div class="me mf fm fo mg mh"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-immutability-4e9751ca005c" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hv fv z el mm eo ep mn er et ht dt translated">现代JavaScript中的函数式编程范式:不变性</h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated">这是实用函数式编程范例系列文章的第二章。如果你没有读过…</h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated">hackernoon.com</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv ja mh"/></div></div></a></div><div class="me mf fm fo mg mh"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-function-composition-109670038859" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab ej"><div class="mj ab mk cl cj ml"><h2 class="bd hv fv z el mm eo ep mn er et ht dt translated">现代JavaScript中的函数式编程范式:函数组合</h2><div class="mo l"><h3 class="bd b fv z el mm eo ep mn er et ek translated">在前两章中，我们介绍了函数式编程的一些基本范例——纯函数和…</h3></div><div class="mp l"><p class="bd b gc z el mm eo ep mn er et ek translated">hackernoon.com</p></div></div><div class="mq l"><div class="mx l ms mt mu mq mv ja mh"/></div></div></a></div></div></div>    
</body>
</html>