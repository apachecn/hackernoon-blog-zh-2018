<html>
<head>
<title>Scalable app structure in flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">flutter中可扩展的应用程序结构</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/scalable-app-structure-in-flutter-dad61a4bc389?source=collection_archive---------4-----------------------#2018-06-11">https://medium.com/hackernoon/scalable-app-structure-in-flutter-dad61a4bc389?source=collection_archive---------4-----------------------#2018-06-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="b756" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我最近在探索flutter，并在一天内构建了一个非常小的应用程序来测试这个框架。我建立了一个最小的应用程序，从用户那里接受一些输入，添加验证，数字格式，并在用户按下提交时显示一个警告框。</p><p id="e401" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我对框架本身感到惊讶，所以我决定尝试一个中等大小的应用程序，我们应该能够做到以下几点</p><ol class=""><li id="c278" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated">以用户身份登录/注册。这可能是通过谷歌或脸书。</li><li id="a19b" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">一旦用户登录注册显示他(或她)的仪表板和其他细节。</li><li id="31ce" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">如果用户想放置他可以通过添加项目到购物车，然后继续付款。</li></ol><p id="3a7a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这基本上是一个电子商务应用程序的迷你版本。</p><p id="5d57" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，在最终确定一个文件夹结构之前，我们需要了解一个关于可伸缩性的简单事情；可伸缩的结构应该是模块化的，即使模块被移除或改变，应用程序也不会中断。</p><p id="f362" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我决定使用与我的react-native应用程序相似的项目结构。</p><p id="6d71" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">所以让我们开始吧。</p><p id="bdcd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是flutter提供的核心文件夹结构。</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="10b4" class="km kn hu ki b fv ko kp l kq kr">flutter-app/<br/>|- android<br/>|- build<br/>|- ios<br/>|- lib<br/>|- test</span></pre><p id="0c00" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，让我们深入到<code class="eh ks kt ku ki b">lib</code>文件夹，其中有应用程序的主要代码。</p><ol class=""><li id="4683" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated"><code class="eh ks kt ku ki b">screens</code> —包含应用程序的屏幕。这里的所有文件都会被导入到<code class="eh ks kt ku ki b">routes.dart</code></li><li id="3b30" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh ks kt ku ki b">util</code> —包含应用程序的实用程序/常用功能</li><li id="e1c3" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh ks kt ku ki b">widgets</code> —包含应用程序的常用小部件。比如<code class="eh ks kt ku ki b">Button</code>、<code class="eh ks kt ku ki b">TextField</code>等。</li><li id="8b6d" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated"><code class="eh ks kt ku ki b">routes.dart</code> —包含应用程序的路径并导入所有屏幕。</li></ol><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="b2b6" class="km kn hu ki b fv ko kp l kq kr">lib/<br/>|- main.dart<br/>|- routes.dart<br/>|- screens/<br/>|- util/<br/>|- widgets/<br/>|- data/<br/>|- services/</span></pre><p id="bb4e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">屏幕- </strong></p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="19b0" class="km kn hu ki b fv ko kp l kq kr">screens/<br/>|- auth<br/>   |- auth.dart<br/>   |- index.dart<br/>   |- widgets<br/>      |- googleButton<br/>        |- google_button.dart<br/>        |- google_button_container.dart<br/>        |- index.dart<br/>      |- facebookButton<br/>        |- facebook_button.dart<br/>        |- facebook_button_container.dart<br/>        |- index.dart</span></pre><p id="34c9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">该屏幕包含2个按钮，为用户提供从<code class="eh ks kt ku ki b">Google</code>或<code class="eh ks kt ku ki b">Facebook</code>登录的选项。</p><p id="64c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在我们知道这两个按钮不会在应用程序的其他地方使用，所以我们将它们嵌套在这个屏幕中。</p><blockquote class="kv kw kx"><p id="6023" class="ir is ky it b iu iv iw ix iy iz ja jb kz jd je jf la jh ji jj lb jl jm jn jo hn dt translated">仅在特定屏幕内使用的<code class="eh ks kt ku ki b">Widgets</code>应该放在该屏幕内，而<strong class="it hv">不要放在</strong>通用部件文件夹内。</p></blockquote><p id="554e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你看到这种嵌套真的有帮助，万一我想在我的代码后面:-</p><ol class=""><li id="42ba" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated">如果我想修改这些按钮中的某些东西，我可以直接进入这个文件夹，否则如果我把它们放在那里，我必须在公共文件夹中搜索它们。</li><li id="d4cc" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">移除这个模块真的很容易，因为我们知道代码的其他部分不会受此影响。</li></ol><p id="21eb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，如果我们再深入一点，我们会看到在<code class="eh ks kt ku ki b">googleButton</code>和<code class="eh ks kt ku ki b">facebookButton</code>中使用的按钮是常见的，并且是从<code class="eh ks kt ku ki b">widgets</code>文件夹中使用的，只有样式被覆盖。这使得整个应用程序中的按钮大小一致。</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="4e34" class="km kn hu ki b fv ko kp l kq kr">widgets/<br/>|- button.dart // Common button</span></pre><p id="4af2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> UTIL- </strong></p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="47e1" class="km kn hu ki b fv ko kp l kq kr">util<br/>|- date_utils.dart<br/>|- format_utils.dart</span></pre><p id="41c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Util文件夹包含应用程序的业务逻辑。例如，如果您正在开发一个电子商务应用程序，那么很少有可能是这样的</p><ol class=""><li id="2508" class="jp jq hu it b iu iv iy iz jc jr jg js jk jt jo ju jv jw jx dt translated">计算购物车中的总金额。</li><li id="afc7" class="jp jq hu it b iu jy iy jz jc ka jg kb jk kc jo ju jv jw jx dt translated">显示日期、货币等。以适当的格式。</li></ol><p id="76d9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> WIDGETS- </strong></p><p id="8a38" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如我上面提到的，小部件将包含应用程序中使用的公共部件。</p><blockquote class="kv kw kx"><p id="0177" class="ir is ky it b iu iv iw ix iy iz ja jb kz jd je jf la jh ji jj lb jl jm jn jo hn dt translated">我们在这里遵循与屏幕相同的嵌套模式。只有单个小部件需要的小部件应该嵌套在那个小部件中，并且应该只有直接的父级可以访问。</p></blockquote><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="5c65" class="km kn hu ki b fv ko kp l kq kr">widgets/<br/>|- app_button/<br/>  |- app_button.dart<br/>  |- index.dart</span></pre><p id="bf55" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">数据- </strong></p><p id="3b34" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦将redux(或其他)商店集成到应用程序中，这个文件夹就会出现。你可以在这里输入你的减速器，动作等等。</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="e86c" class="km kn hu ki b fv ko kp l kq kr">data/<br/>|- auth<br/>   |- access_token<br/>      |- actions.dart<br/>      |- reducer.dart<br/>   |- refresh_token<br/>      |- actions.dart<br/>      |- reducer.dart<br/>   |- reducer.dart</span></pre><p id="f059" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">服务- </strong></p><p id="60bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将处理应用程序的所有网络和业务逻辑。例如，一旦你通过了facebook/google的认证，你需要用访问令牌更新后端，你可以把那个<code class="eh ks kt ku ki b">authentication</code>放在这个文件夹中。</p><pre class="kd ke kf kg fq kh ki kj kk aw kl dt"><span id="7c16" class="km kn hu ki b fv ko kp l kq kr">services/<br/>|- authentication.dart</span></pre><p id="dcb0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是我如何用flutter构建我的移动应用程序。</p><p id="9855" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我很想听听你们是怎么做的。</p><p id="ded0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我还创建了一个<a class="ae lc" href="https://github.com/jinxac/flutter-folder-structure" rel="noopener ugc nofollow" target="_blank">存储库</a>，在这里你可以看到实际的结构。</p></div></div>    
</body>
</html>