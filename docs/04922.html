<html>
<head>
<title>Recipe: Nvidia Titan X as External GPU on Ubuntu Laptop</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">诀窍:Nvidia Titan X作为Ubuntu笔记本电脑上的外部GPU</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/recipe-nvidia-titan-x-as-external-gpu-on-ubuntu-laptop-9df2dfc02fc6?source=collection_archive---------5-----------------------#2018-06-11">https://medium.com/hackernoon/recipe-nvidia-titan-x-as-external-gpu-on-ubuntu-laptop-9df2dfc02fc6?source=collection_archive---------5-----------------------#2018-06-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/8e694650ecb970382dad4c6c960a5a4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fVKQ1x5RRDyQSzaQF9Xt-g.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Fresh Titan X wrapped in a modern Akitio Node served on a delicate 5th Generation Lenovo X1 Carbon. Garnished with fresh Ubuntu and a sprinkling of Thunderbolt 3.</figcaption></figure><p id="e1e3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">没有 <a class="kf kg gr" href="https://medium.com/u/150ba9053090?source=post_page-----9df2dfc02fc6--------------------------------" rel="noopener" target="_blank"> <em class="ke">李伟英</em> </a> <em class="ke">的Linux技术和耐心指导，这种设置是不可能的。感谢</em> <a class="ae kh" href="https://m.facebook.com/profile.php?id=549724275" rel="noopener ugc nofollow" target="_blank"> <em class="ke">永泰</em> </a> <em class="ke">在雷电3在eGPU上出现之前让我上他的eGPU设置。</em></p><h1 id="9827" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">动机</h1><p id="dc29" class="pw-post-body-paragraph jg jh hu ji b jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd hn dt translated">在工作中，我和同事们<strong class="ji hv">远程访问一个共享的工作站</strong>，工作站中有一些图形卡用于计算工作，如<strong class="ji hv">为我们的研究训练深度神经网络</strong>。</p><p id="2bef" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">图像和视频是相对较大的对象，</strong>使得<strong class="ji hv">远程访问</strong>对于<em class="ke">一些</em>工作流程来说感觉<strong class="ji hv">繁琐。</strong></p><p id="7ceb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">X11转发、远程桌面、带浏览器界面的应用程序以及通过winSCP重复传输图像<em class="ke">没有</em>满足。</p><p id="f910" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因此，我为笔记本电脑设置了一个<strong class="ji hv">外部显卡，以避免远程访问某些任务</strong>。(但是，一旦我在笔记本电脑上找到了需要推送的任务，我还是会将大型任务推送到共享工作站。)</p><p id="b832" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一个<strong class="ji hv">外接显卡+笔记本电脑组合</strong>让我…</p><p id="a376" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">… <strong class="ji hv">无论在办公室还是上下班途中，都可以在同一台笔记本电脑上工作</strong>。在办公室根据需要插入外部显卡。</p><p id="2a88" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">… <strong class="ji hv">携带较轻的负载</strong>。携带显卡&amp;笔记本电脑，而不是携带带有(可能几个)显卡的台式机到部署地点。</p><p id="c9e7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">… <strong class="ji hv">如果我选择了这样的设置，请避免在office desktop &amp;笔记本电脑之间分离/同步内容</strong>(例如代码、数据集)。</p><p id="9660" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">接下来的部分详细介绍了我在Ubuntu 16.04上用笔记本电脑设置外部Nvidia TITAN X卡的经验。<em class="ke">这几节的核心思想也适用于用Ubuntu机外接其他Nvidia显卡。</em></p><h1 id="77d9" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">秘诀</h1><p id="2c60" class="pw-post-body-paragraph jg jh hu ji b jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd hn dt translated"><strong class="ji hv">成分列表:<br/> </strong> -联想X1 Carbon 5代<em class="ke">(支持雷电3) </em> <br/> - Akitio Node <em class="ke">(外置GPU案例挂载TITAN X in。支持雷电3) </em> <br/> - Ubuntu 16.04 (64位)<br/> - Nvidia GeForce GTX TITAN X显卡<br/>-<a class="ae kh" href="https://download.nvidia.com/XFree86/Linux-x86_64/384.90/NVIDIA-Linux-x86_64-384.90.run" rel="noopener ugc nofollow" target="_blank">Nvidia-Linux-x86 _ 64–384.90 . run</a>-<br/>-<a class="ae kh" href="https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda_9.0.176_384.81_linux-run" rel="noopener ugc nofollow" target="_blank">cuda _ 9 . 0 . 176 _ 384.81 _ Linux . run</a><em class="ke">(可选。有时用于将计算推送到Nvidia显卡的代码中。)</em></p><p id="3b6b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你关注不同的硬件，记得检查兼容性。例如，笔记本电脑是否有与外部GPU外壳兼容的端口？Akitio Node通过雷电3接口与我的联想X1 Carbon相连。</p><h1 id="d642" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">说明</h1><p id="892e" class="pw-post-body-paragraph jg jh hu ji b jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd hn dt translated">我开始用<strong class="ji hv">新鲜的Ubuntu 16.04 </strong>安装。</p><p id="2689" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你不是从一个全新的Ubuntu开始安装: <br/> <em class="ke">小心大意。例如，安装了多个显示管理器，但在安装驱动程序之前没有停止所有显示管理器。虽然我在这个食谱中为那些没有使用全新Ubuntu安装的人提供了提醒，但保持警惕是个好主意。开始之前，您可能需要先备份。</em></p><p id="6e7d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们开始吧。</p><h2 id="217a" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jr ls lt kw jv lu lv la jz lw lx le ly dt translated">预赛</h2><p id="9a8a" class="pw-post-body-paragraph jg jh hu ji b jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd hn dt translated">将泰坦X号连接到阿基提欧节点。用提供的螺丝将TITAN X固定到位，以避免在移动外壳时卡的连接松动。记得将泰坦X连接到阿基提欧节点的电源单元(PSU)。</p><p id="b68e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">给阿基米德通电。外壳的风扇应轻轻转动。</p><p id="c249" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">打开联想X1。在连接到Akitio节点(通过雷电3)之前，让它进入Ubuntu的登录界面。</p><p id="1a38" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">检查能否识别TITAN X:<br/>打开终端(默认快捷键ctrl+alt+t)。Ubuntu的新用户:在终端中一次输入一个命令。省略' $ '。</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="3b33" class="ll kj hu me b fv mi mj l mk ml">$ sudo sh -c 'echo 1 &gt; /sys/bus/thunderbolt/devices/0-3/authorized'<br/>$ lspci | grep -i nvidia</span></pre><p id="ce3d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果Nvidia GPU可以读取，控制台应该会打印出如下截图所示的内容。<em class="ke">“VGA兼容控制器:NVIDIA公司设备……”</em>是泰坦x。</p><figure class="lz ma mb mc fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/5ebb5c6ef958d921cb298072c0a017e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s2o3SkCrPjHy3_0-mcr42Q.png"/></div></div></figure><p id="700c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke">使用不同的硬件？<br/>您的eGPU可能不是“设备0-3”。请在/sys/bus/thunderbolt/devices/* whatever *下的目录中查找供应商名称和设备名称，以确定您的eGPU的路径。</em></p><p id="020d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">升级内核:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="4f73" class="ll kj hu me b fv mi mj l mk ml">$ sudo apt-get update<br/>$ sudo apt-get upgrade</span></pre><p id="a592" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我的升级为<em class="ke">4 . 13 . 0-43-通用</em>。运行<code class="eh mn mo mp me b">$uname -r</code>让你看到你的内核版本。</p><p id="03b6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">安装稍后编译Nvidia驱动程序所需的软件包:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="a56d" class="ll kj hu me b fv mi mj l mk ml">$ sudo apt-get install gcc build-essential<br/>$ sudo apt-get install linux-headers-$(uname -r) linux-images-$(uname -r) linux-image-extra-$(uname -r)</span></pre><h2 id="0a6c" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jr ls lt kw jv lu lv la jz lw lx le ly dt translated">安装Nvidia驱动程序</h2><p id="89ad" class="pw-post-body-paragraph jg jh hu ji b jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd hn dt translated"><em class="ke">不在新安装的Ubuntu上？卸载现有的Nvidia驱动程序。如果apt正在管理你安装的Nvidia驱动，运行</em> <code class="eh mn mo mp me b">$sudo apt-get purge nvidia*</code> <em class="ke">。在现有Nvidia驱动程序上强制安装可能会导致问题。</em></p><p id="04c7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下载<a class="ae kh" href="https://download.nvidia.com/XFree86/Linux-x86_64/384.90/NVIDIA-Linux-x86_64-384.90.run" rel="noopener ugc nofollow" target="_blank">NVIDIA-Linux-x86 _ 64–384.90 . run</a>。</p><p id="b7a5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">黑名单新品:</p><p id="13c6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Nouveau是Ubuntu 16.04默认附带的开源Nvidia驱动程序。黑名单Nouveau需要指导Nvidia安装以后。下面介绍如何将其列入黑名单。</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="3f11" class="ll kj hu me b fv mi mj l mk ml">$ sudo touch /etc/modprobe.d/blacklist-nouveau.conf</span></pre><p id="2363" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将这两行写入blacklist-nouveau.conf:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="a9b6" class="ll kj hu me b fv mi mj l mk ml">blacklist nouveau<br/>options nouveau modeset=0</span></pre><p id="18f6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，我们将更新引导过程的配置文件并重新引导:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="1760" class="ll kj hu me b fv mi mj l mk ml">$ sudo update-initramfs -u<br/>$ sudo update-grub<br/>$ reboot</span></pre><p id="19f4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">重启后，检查nouveau是否确实被列入黑名单。运行以下命令应该不会显示任何内容。</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="2666" class="ll kj hu me b fv mi mj l mk ml">$ lsmod | grep -i nouveau</span></pre><p id="1157" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mn mo mp me b"><em class="ke">lsmod</em></code> <em class="ke">显示加载的模块。如果Nouveau出现在这个阶段，检查上面黑名单步骤中的错别字。(有一次不小心拼成了“noveau”哈哈)记得“update-initramfs -u”、“update-grub”，纠正错别字后重启。</em></p><p id="da5e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">注销。</p><p id="ffd7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在登录屏幕上，按ctrl+alt+F2进入终端(要求您登录的黑屏)。如果ctrl+alt+F2不起作用，尝试ctrl+alt+F3，尝试ctrl+alt+F4，…直到你到达一个黑屏。</p><p id="8208" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">首先输入您的用户名登录，然后输入您的密码。</p><p id="1708" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将暂时放弃花哨的图形桌面，使用这个终端。</p><p id="ee64" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">停止渲染图形桌面的显示管理器:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="1bcf" class="ll kj hu me b fv mi mj l mk ml">$ sudo service lightdm stop<br/>$ service --status-all | grep -i lightdm</span></pre><p id="4736" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">最后一个命令应该打印“[-] lightdm”。“[-]”表示不跑。</p><p id="fe3b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">运行<code class="eh mn mo mp me b">$ service --status-all </code>显示所有服务的状态。“[+]”表示奔跑。<em class="ke">为了好玩:试着回到图形化登录界面(可能是ctrl+alt+F1)，你应该看不到一个。</em></p><p id="3301" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke">不在Ubuntu上或者不是从刚安装的Ubuntu开始？您的显示管理器可能不是lightdm。可能性:sddm、gdm、gdm3等。</em></p><p id="fa89" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">根据Nvidia的说法，OpenGL应用程序也必须停止。如果你像我一样在新安装的Ubuntu上，这里什么都不用做。继续前进…</p><p id="45a1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">删除运行级别:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="7ff3" class="ll kj hu me b fv mi mj l mk ml">$ sudo init 3</span></pre><p id="747c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让操作系统识别TITAN X(与<strong class="ji hv">准备工作</strong>部分中的步骤相同):</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="d64d" class="ll kj hu me b fv mi mj l mk ml">$ sudo sh -c 'echo 1 &gt; /sys/bus/thunderbolt/devices/0-3/authorized'<br/>$ lspci | grep -i nvidia</span></pre><p id="6088" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">NVIDIA-Linux-x86 _ 64–384.90 . run在编译之前需要一个小的改动。我们现在将继续向源代码文件中添加一行代码。</p><p id="d5d9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">提取。运行文件:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="0a39" class="ll kj hu me b fv mi mj l mk ml">$ cd /path/to/NVIDIA-Linux-x86_64–384.90.run<br/>$ NVIDIA-Linux-x86_64–384.90.run -x<br/>$ cd NVIDIA-Linux-x86_64–384.90</span></pre><p id="f82c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在NVIDIA-Linux-x86 _ 64–384.90/kernel/NVIDIA-uvm/uv M8 _ va _ block . c中添加“#include <linux>”。这一行告诉C编译器包含一个linux头文件。如果没有这一行，安装程序(稍后)进行的编译将会失败。</linux></p><p id="3480" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下面是一个屏幕截图，突出显示了添加的行:</p><figure class="lz ma mb mc fq iv fe ff paragraph-image"><div class="fe ff mq"><img src="../Images/460f755054f5188e0b08960fd436a06a.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/format:webp/1*7MbGkxSbe2Nl2NcusGagQQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Add “#include &lt;linux/sched/task_stack.h&gt;” to NVIDIA-Linux-x86_64–384.90/kernel/nvidia-uvm/uvm8_va_block.c</figcaption></figure><p id="6193" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke">“vim”和“nano”是可以在终端中使用的编辑器。在这个阶段花费比你想象的更长的时间是可以的，特别是如果你是新手的话。</em></p><p id="b1ed" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">完成后，让我们返回到这个归档文件的根目录，并启动安装程序。</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="56fd" class="ll kj hu me b fv mi mj l mk ml">$ cd /path/to/NVIDIA-Linux-x86_64–384.90<br/>$ sudo nvidia-installer --no-opengl-files</span></pre><p id="37bc" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">当GPU仅用于计算时，Nvidia推荐使用<code class="eh mn mo mp me b">--no-opengl-files</code>,就像我的用例。</p><p id="a8b2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke">注意:对于那些希望不安装</em> <code class="eh mn mo mp me b"><em class="ke">--no-opengl-files</em></code> <em class="ke">的人，我没有试过这个。</em></p><p id="83a9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">安装程序将提示您一些选项。下面是我的选择:<br/>——预装脚本失败？回答:继续。<br/>——DKMS？答案:否<br/> - 32位？回答:是的。<em class="ke">回答否不应该导致安装中断</em> <br/> -配置X？答案:否<em class="ke">如果GPU只是为了计算，就不要回答是。</em></p><p id="0094" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">安装完成后，让我们检查一下安装是否顺利:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="9aeb" class="ll kj hu me b fv mi mj l mk ml">$ modprobe nvidia<br/>$ nvidia-smi</span></pre><p id="0192" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mn mo mp me b">nvidia-smi</code>应该打印出这样的内容:</p><figure class="lz ma mb mc fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/77d2813722c32b352f24ee95ab28ee6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z2MUfSKYghJgiYTEen6mnQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Output of nvidia-smi</figcaption></figure><p id="4ae1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">重新启动:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="e904" class="ll kj hu me b fv mi mj l mk ml">$ reboot</span></pre><p id="0c1a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于阿基提欧节点，每次登录，你都必须做两件事，GPU才能使用:<br/>(I)<code class="eh mn mo mp me b">$ sudo sh -c 'echo 1 &gt; /sys/bus/thunderbolt/devices/0-3/authorized' </code><br/>(ii)<code class="eh mn mo mp me b">$ modprobe nvidia<br/></code><em class="ke">Psst..创建一个脚本在登录时自动完成这些工作。</em></p><p id="6122" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">恭喜你。您已经成功安装了Nvidia驱动程序。Ubuntu现在可以读取你的泰坦x了</p><h2 id="0c3f" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jr ls lt kw jv lu lv la jz lw lx le ly dt translated">安装CUDA(可选)</h2><p id="2d6f" class="pw-post-body-paragraph jg jh hu ji b jj lg jl jm jn lh jp jq jr li jt ju jv lj jx jy jz lk kb kc kd hn dt translated">CUDA对于在GPU上进行任务计算可能会很方便。</p><p id="1a0c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下载<a class="ae kh" href="https://developer.nvidia.com/compute/cuda/9.0/Prod/local_installers/cuda_9.0.176_384.81_linux-run" rel="noopener ugc nofollow" target="_blank">cuda _ 9 . 0 . 176 _ 384.81 _ Linux . run</a>。</p><p id="6653" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让操作系统识别泰坦X:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="8cf2" class="ll kj hu me b fv mi mj l mk ml">$ sudo sh -c 'echo 1 &gt; /sys/bus/thunderbolt/devices/0-3/authorized'<br/>$ modprobe nvidia<br/>$ nvidia-smi</span></pre><p id="d03b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你还没有做的话，把暴发户<em class="ke">列入黑名单。本文前面部分的详细信息。</em></p><p id="1bde" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">停止照明。<code class="eh mn mo mp me b">$ sudo service lightdm stop</code>。细节在前面部分。</p><p id="5a2a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">删除运行级别。<code class="eh mn mo mp me b">$ sudo init 3</code>。细节在前面部分。</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="7c2a" class="ll kj hu me b fv mi mj l mk ml">$ cd /path/to/cuda_9.0.176_384.81_linux.run<br/>$ chmod +x cuda_9.0.176_384.81_linux.run<br/>$ sudo cuda_9.0.176_384.81_linux.run</span></pre><p id="4511" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">安装程序将提示您一些选项。下面是我的选择:<br/>——许可协议？按“q”一次可快速滚动到结尾。输入“接受”接受。<br/> -安装Nvidia驱动？不。因为我们之前已经做过了。<br/> -安装cuda 9.0工具包？是的。<br/> -安装工具包的位置？默认<br/> -安装符号链接？是<br/> -安装样品？是<br/> -样品位置？默认。</p><p id="159c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在安装即将结束时，您可能会看到一条消息，提示“警告安装不完整…需要至少384.00版本的驱动程序才能使用CUDA 9.0功能。”这是<strong class="ji hv"> <em class="ke">而不是</em> </strong>的一个问题。我们很好。</p><p id="0755" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">检查安装:</p><pre class="lz ma mb mc fq md me mf mg aw mh dt"><span id="ab10" class="ll kj hu me b fv mi mj l mk ml">$ cd /usr/local/cuda-9.0/samples/1_Utilities/deviceQuery<br/>$ sudo make all<br/>$ ./deviceQuery</span></pre><p id="c9d3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke"> deviceQuery </em>应该打印出这样的内容:</p><figure class="lz ma mb mc fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ms"><img src="../Images/fe4c9982b74da95770af3004658c3c56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8YrYPZWcKn2nTNQVNEc5gg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">output of deviceQuery</figcaption></figure><h1 id="cd6f" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">然后…我们结束了！恭喜你走到这一步。</h1><figure class="lz ma mb mc fq iv fe ff paragraph-image"><div class="fe ff mt"><img src="../Images/4ea89ca9aaec034944df0e71014e174c.png" data-original-src="https://miro.medium.com/v2/resize:fit:648/1*dCXilMYXtr31OXDhC15P1A.gif"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Hurray</figcaption></figure><p id="c8e7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke">思考内容:<br/>一些涉及远程访问的机器和相对较大的对象的工作流仍然感觉很自然。例如，对训练过的神经网络进行定量基准测试。eGPU +笔记本电脑设置可能不会改善您的工作流程。</em></p></div></div>    
</body>
</html>