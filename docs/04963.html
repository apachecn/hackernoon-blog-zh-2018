<html>
<head>
<title>Ubuntu 18.04 Deep Learning Environment Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ubuntu 18.04深度学习环境设置</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/ubuntu-18-04-deep-learning-environment-setup-345ba0b11892?source=collection_archive---------1-----------------------#2018-06-12">https://medium.com/hackernoon/ubuntu-18-04-deep-learning-environment-setup-345ba0b11892?source=collection_archive---------1-----------------------#2018-06-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/177483ab82a0581ef5520500157ce6b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I1XnHJKBkD-ye0k9"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo by <a class="ae jg" href="https://unsplash.com/@jefflssantos?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Jefferson Santos</a> on <a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a683" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Ubuntu 18.04上的深度学习没有得到官方支持，因为CUDA库还没有得到官方支持。</p><p id="5c07" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然而，如果你仍然想在Ubuntu上试用DL，这里有一些设置:</p><blockquote class="kf kg kh"><p id="da99" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">注:我假设您已经准备好了所有的硬件。<br/>已经安装了Ubuntu。</p></blockquote><h1 id="1b61" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">更新和升级</h1><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="015d" class="lt kn hu lp b fv lu lv l lw lx">$ sudo apt-get update<br/>$ sudo apt-get upgrade</span></pre><h1 id="27fc" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">安装Nvidia驱动程序</h1><ul class=""><li id="4b9f" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">最新的驱动程序应该工作正常。</li><li id="ec76" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">添加英伟达PPA</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="9e52" class="lt kn hu lp b fv lu lv l lw lx">$ sudo add-apt-repository ppa:graphics-drivers/ppa</span></pre><ul class=""><li id="1ee4" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">在18.04中，您不需要更新存储库。添加PPA后，这是自动完成的。</li><li id="76ff" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">接下来，安装最新的驱动程序(396 ATM)</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="35d3" class="lt kn hu lp b fv lu lv l lw lx">$ sudo apt install nvidia-driver-396</span></pre><ul class=""><li id="20a9" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">nvidia-settings应该默认安装，以防你仍然需要手动安装</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="8ccf" class="lt kn hu lp b fv lu lv l lw lx">$ sudo apt install nvidia-settings</span></pre><ul class=""><li id="5ac2" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">通过运行以下命令，重新启动并检查驱动程序是否安装正确:</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="5714" class="lt kn hu lp b fv lu lv l lw lx">nvidia-smi</span></pre><ul class=""><li id="a13c" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">如果你得到一个包含你的GPU细节的输出，那么一切都是<a class="ae jg" href="https://hackernoon.com/tagged/setup" rel="noopener ugc nofollow" target="_blank">设置</a>。</li></ul><p id="a5fa" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">陷阱:</p><ul class=""><li id="2b96" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">以防你的Ubuntu陷入“启动循环”:<br/> -按Ctrl+Alt+F3(注意:在16上，它的ctrl+alt+f1得到tty1) <br/> -清除驱动程序</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="2980" class="lt kn hu lp b fv lu lv l lw lx">sudo apt-get purge nvidia-*</span></pre><ul class=""><li id="05fe" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">重新启动</li></ul><h1 id="ae2a" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">安装康达</h1><ul class=""><li id="57fe" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">为了安装最新版本的Conda，我们将使用一个由<a class="ae jg" href="https://twitter.com/mikb0b" rel="noopener ugc nofollow" target="_blank"> Kaggle大师Mikel </a>编写的便捷脚本</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="0cb0" class="lt kn hu lp b fv lu lv l lw lx">curl https://conda.ml | bash</span></pre><h1 id="a7a7" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">安装CUDA</h1><ul class=""><li id="cecf" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">诀窍是下载Ubuntu 17.04的CUDA版本</li><li id="7a34" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">点击从<a class="ae jg" href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;target_distro=Ubuntu&amp;target_version=1710&amp;target_type=runfilelocal" rel="noopener ugc nofollow" target="_blank">下载CUDA。</a></li><li id="335e" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">我正在设置CUDA 9.0(既然是快AI推荐的。注意:目前最新版本是9.2)</li><li id="8379" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">下载运行文件(本地)</li></ul><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/febb135453e5a9a61ade6720e554d577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ve7rroz7j0Bt-STmlj1ZiQ.png"/></div></div></figure><ul class=""><li id="765f" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">打开终端并将目录更改为下载。</li><li id="aa60" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">更改安装程序的可执行权限。</li><li id="c03a" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">运行它。</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="6746" class="lt kn hu lp b fv lu lv l lw lx">$ cd Downloads<br/>$ chmod +x ./cuda_9.0.176_384.81_linux.run<br/>$ sudo ./cuda_9.0.176_384.81_linux.run</span></pre><ul class=""><li id="c4ac" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">按空格键向下滚动并接受条款和条件</li><li id="5096" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">在提示“使用不支持的配置安装”时，键入<code class="eh ms mt mu lp b">yes</code> <strong class="jj hv"> </strong></li><li id="ebb4" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">当提示“安装用于Linux-x86_64 384.81的NVIDIA加速图形驱动程序？”时，键入<code class="eh ms mt mu lp b">no</code>。</li><li id="29dc" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">保留默认值。</li><li id="7ca6" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">重新启动</li><li id="6167" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">重启后，检查CUDA版本</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="aaf1" class="lt kn hu lp b fv lu lv l lw lx">nvcc -V</span></pre><p id="cfca" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这应该会提示已安装的CUDA版本</p><ul class=""><li id="2a95" class="ly lz hu jj b jk jl jo jp js mo jw mp ka mq ke mf mg mh mi dt translated">如果出现启动循环问题，请清除驱动程序并重试。</li></ul><h2 id="cedd" class="lt kn hu bd ko mv mw mx ks my mz na kw js nb nc la jw nd ne le ka nf ng li nh dt translated">设置路径</h2><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="c886" class="lt kn hu lp b fv lu lv l lw lx">export PATH="/home/User/anaconda3/bin:/usr/local/cuda/bin:$PATH"<br/>export LD_LIBRARY_PATH="/usr/local/cuda/lib64:$LD_LIBRARY_PATH"<br/>source ~/.bashrc</span></pre><h1 id="71b2" class="km kn hu bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj dt translated">安装Cudnn</h1><ul class=""><li id="0313" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">从<a class="ae jg" href="https://developer.nvidia.com/cudnn" rel="noopener ugc nofollow" target="_blank">这里</a>下载你安装的CUDA版本支持的Cudnn版本(你需要一个Nvidia账号)</li><li id="276e" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">下载完成后，我们将解压归档文件，并将其内容移动到安装CUDA 9.0的目录中:</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="e3fe" class="lt kn hu lp b fv lu lv l lw lx">tar -zxvf cudnn-9.0-linux-x64-v7.tgz<br/>sudo cp -P cuda/lib64/* /usr/local/cuda-9.0/lib64/<br/>sudo cp  cuda/include/* /usr/local/cuda-9.0/include<br/>sudo chmod a+r /usr/local/cuda-9.0/include/cudnn.h</span></pre></div><div class="ab cl ni nj hc nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hn ho hp hq hr"><h1 id="2fdd" class="km kn hu bd ko kp np kr ks kt nq kv kw kx nr kz la lb ns ld le lf nt lh li lj dt translated">设置FastAI</h1><ul class=""><li id="f926" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">建立快速人工智能环境。</li><li id="c983" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">Git克隆他们的回购</li><li id="57f8" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">康达环境更新</li><li id="3a9e" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">源激活</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="3fb2" class="lt kn hu lp b fv lu lv l lw lx">$ git clone <a class="ae jg" href="https://github.com/fastai/fastai" rel="noopener ugc nofollow" target="_blank">https://github.com/fastai/fastai</a><br/>$ cd fastai<br/>$ conda env update</span></pre><h2 id="35be" class="lt kn hu bd ko mv mw mx ks my mz na kw js nb nc la jw nd ne le ka nf ng li nh dt translated">设置(其他/任何)环境</h2><ul class=""><li id="bd4f" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">使用requirements.txt或req.yml文件进行Pip安装或conda安装。</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="2bc3" class="lt kn hu lp b fv lu lv l lw lx">pip install -r &lt;Link&gt;</span></pre></div><div class="ab cl ni nj hc nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hn ho hp hq hr"><h1 id="eb33" class="km kn hu bd ko kp np kr ks kt nq kv kw kx nr kz la lb ns ld le lf nt lh li lj dt translated">快速试验</h1><ul class=""><li id="9785" class="ly lz hu jj b jk ma jo mb js mc jw md ka me ke mf mg mh mi dt translated">检查库内CUDA设备是否可用。</li><li id="e6ed" class="ly lz hu jj b jk mj jo mk js ml jw mm ka mn ke mf mg mh mi dt translated">PyTorch具有检查CUDA设备的功能</li></ul><pre class="lk ll lm ln fq lo lp lq lr aw ls dt"><span id="9a17" class="lt kn hu lp b fv lu lv l lw lx"><strong class="lp hv">torch.cuda.is_available</strong><strong class="lp hv">()</strong></span></pre><p id="d164" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这将返回一个True。</p></div><div class="ab cl ni nj hc nk" role="separator"><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn no"/><span class="nl bw bk nm nn"/></div><div class="hn ho hp hq hr"><p id="2b07" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就是这样。你完了！</p><p id="e900" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="ki">如果你觉得这篇文章有用并想保持联系，你可以在Twitter上找到我</em> <a class="ae jg" href="http://twitter.com/bhutanisanyam1" rel="noopener ugc nofollow" target="_blank"> <em class="ki">这里</em> </a> <em class="ki">。</em></p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="nu nv l"/></div></figure></div></div>    
</body>
</html>