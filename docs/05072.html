<html>
<head>
<title>Demystifying this.bind in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">揭秘这个. bind in React</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/demystifying-this-bind-in-react-87f1c843b8b7?source=collection_archive---------1-----------------------#2018-06-16">https://medium.com/hackernoon/demystifying-this-bind-in-react-87f1c843b8b7?source=collection_archive---------1-----------------------#2018-06-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="97ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您是否有过这样的经历:在阅读现有的React代码库时，想知道为什么React组件构造函数中需要<code class="eh jp jq jr js b">this.functionName = this.functionName.bind(this)</code>？更令人困惑是，并不是所有的函数都有绑定语法。</p><figure class="jt ju jv jw fq jx"><div class="bz el l di"><div class="jy jz l"/></div></figure><blockquote class="ka kb kc"><p id="7c3c" class="ir is kd it b iu iv iw ix iy iz ja jb ke jd je jf kf jh ji jj kg jl jm jn jo hn dt translated">如果你在寻找一个快速解决这个问题的方法，其中一个方法(也是最好的方法)就是把你所有的函数都变成箭头函数。Arrow函数从外部词法范围获取<code class="eh jp jq jr js b">this</code>。这里有一个基于以上的例子。你需要将<a class="ae kh" href="https://babeljs.io/docs/en/babel-plugin-transform-class-properties/" rel="noopener ugc nofollow" target="_blank">这个</a>添加到你的通天塔配置中</p></blockquote><figure class="jt ju jv jw fq jx"><div class="bz el l di"><div class="jy jz l"/></div></figure></div><div class="ab cl ki kj hc kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hn ho hp hq hr"><h1 id="1d6b" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">这不是由于反应</h1><p id="a1d6" class="pw-post-body-paragraph ir is hu it b iu ln iw ix iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo hn dt translated">这就是JavaScript的工作方式。其他地方有很多文章解释了JavaScript，尤其是<code class="eh jp jq jr js b">.bind()</code>的含义(这是如何传递上下文的)，以及JavaScript如何为您绑定。相反，我将直接进入JavaScript中的<em class="kd">深渊</em>。</p><figure class="jt ju jv jw fq jx"><div class="bz el l di"><div class="jy jz l"/></div><figcaption class="ls lt fg fe ff lu lv bd b be z ek">Reference code for the below</figcaption></figure><p id="04b7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在JavaScript的深处，当你做<code class="eh jp jq jr js b">cat.sayHi()</code>时，JavaScript返回<code class="eh jp jq jr js b">(cat, "sayHi", true)</code>的<a class="ae kh" href="https://tc39.github.io/ecma262/#sec-reference-specification-type" rel="noopener ugc nofollow" target="_blank">引用类型</a>值。ReferenceType(基本、名称、严格)其中</p><ul class=""><li id="02e2" class="lw lx hu it b iu iv iy iz jc ly jg lz jk ma jo mb mc md me dt translated">基础是对象</li><li id="768e" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated">名称是属性(或方法)</li><li id="c5f7" class="lw lx hu it b iu mf iy mg jc mh jg mi jk mj jo mb mc md me dt translated"><code class="eh jp jq jr js b">use strict</code>时严格=真</li></ul><p id="ee7b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当JavaScript返回引用类型值<code class="eh jp jq jr js b">(cat, "sayHi", true)</code>时，意味着属性<code class="eh jp jq jr js b">sayHi</code>将拥有<code class="eh jp jq jr js b">cat</code>作为<code class="eh jp jq jr js b">this</code>上下文。如果对象是<code class="eh jp jq jr js b">undefined</code>，最后一个参数决定<code class="eh jp jq jr js b">this</code>的值。<code class="eh jp jq jr js b">true</code>为<code class="eh jp jq jr js b">undefined</code>或<code class="eh jp jq jr js b">global window object</code>为假。</p><p id="a4bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，当您执行<code class="eh jp jq jr js b">var dogHi = dog.sayHi</code>时，JavaScript会丢弃引用类型值，只将函数存储到dogHi中。因此，当您执行<code class="eh jp jq jr js b">dogHi</code>时，它不知道<code class="eh jp jq jr js b">this</code>的值是dog and throw <code class="eh jp jq jr js b">cannot read property 'name' of undefined</code></p></div><div class="ab cl ki kj hc kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="hn ho hp hq hr"><h1 id="9a56" class="kp kq hu bd kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm dt translated">回到React的例子</h1><p id="0fc3" class="pw-post-body-paragraph ir is hu it b iu ln iw ix iy lo ja jb jc lp je jf jg lq ji jj jk lr jm jn jo hn dt translated">回到前面的例子，当我们做<code class="eh jp jq jr js b">onClick={this.handleClick}</code>时，我们基本上是在给callback分配一个类似于我们做<code class="eh jp jq jr js b">var dogHi = dog.sayHi</code>的函数。</p><p id="4663" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了解决这个问题，我们可以使用arrow函数，依赖于创建函数的外部词汇上下文(Animal类):</p><figure class="jt ju jv jw fq jx"><div class="bz el l di"><div class="jy jz l"/></div></figure><p id="8e94" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我希望这有所帮助，箭头函数在更多的上下文中是有用的。我将把这些留在另一篇文章中。</p></div></div>    
</body>
</html>