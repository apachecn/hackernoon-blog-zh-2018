<html>
<head>
<title>I built a World Cup 2018 Slack Bot in 24h</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我在24小时内建造了一个世界杯2018 Slack机器人</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/i-built-a-world-cup-2018-slack-bot-in-24h-8518907a0ab0?source=collection_archive---------4-----------------------#2018-06-16">https://medium.com/hackernoon/i-built-a-world-cup-2018-slack-bot-in-24h-8518907a0ab0?source=collection_archive---------4-----------------------#2018-06-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="a797" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">当你的球队出局时，你必须想办法消磨时间。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/4f017c0db0b2c009ce28ff1d0bbb6398.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nfjzkYVYvyhB-zwu"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Photo by <a class="ae jz" href="https://unsplash.com/@fznsr_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fauzan Saari</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="669a" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">唉，意大利不参加2018年世界杯了。</p><p id="5c31" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">作为一个只在国家队比赛时才关注足球的意大利人，这是一场变成现实的噩梦。从小到大，我等待着每4年一次的世界杯到来，以支持意大利，并在每个进球时失声尖叫。</p><p id="caba" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">不过，不必关注比赛给了我一些空闲时间。如果我不能以支持者的身份参加这次全球活动，我仍然可以以开发者的身份参加。</p><p id="9e33" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">这就是为什么我想出了为2018年世界杯创造一个Slack Bot的想法。</p><p id="8a60" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">为了增加任务的趣味，我决定只给我24小时，看看我能想出什么。</p><p id="8fe0" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">这个机器人的目标(双关语)很简单。</p><p id="82a9" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">它必须能够<strong class="kc hv">在一个空闲频道上通知当前每场比赛的细节</strong>。特别是关于开始，结束和半场时间，进球，黄牌和红牌，换人。</p><p id="3958" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">你可以在这里看到我的小实验<a class="ae jz" href="https://github.com/nicolopignatelli/wc2018-slack-bot" rel="noopener ugc nofollow" target="_blank">的结果。你可以很容易地克隆并安装在你自己的Slack账户上。</a></p><p id="8f37" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在这篇文章的剩余部分，我将解释这个机器人是如何设计和开发的。</p><h1 id="f742" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">基本想法</h1><p id="1b72" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">bot是一个简单的Go应用程序，它执行以下操作:</p><ol class=""><li id="e424" class="lt lu hu kc b kd ke kg kh kj lv kn lw kr lx kv ly lz ma mb dt translated">从<a class="ae jz" href="http://worldcup.sfg.io/" rel="noopener ugc nofollow" target="_blank"> worldcup.sfg.io </a>获取今天比赛的信息(谢谢，<a class="mc md gr" href="https://medium.com/u/d4af42ab81c0?source=post_page-----8518907a0ab0--------------------------------" rel="noopener" target="_blank"> Eric S </a>)</li><li id="88ee" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv ly lz ma mb dt translated">判断是否有现场比赛。</li><li id="f379" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv ly lz ma mb dt translated">计算出自我们上次获取以来在现场比赛中发生了什么；</li><li id="6077" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv ly lz ma mb dt translated">提取最新的比赛集锦；</li><li id="e37b" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv ly lz ma mb dt translated">《松弛》中的高光大喊。</li></ol><p id="0a47" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">该应用程序是dockerized的，用于准备就绪的开发体验和可执行文件的编译。<strong class="kc hv"> Make + Docker是一个杀手级组合，可以轻松而强大地自动化您的开发任务</strong>。</p><p id="8a5b" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">该应用程序还可以根据轮询时间、机器人外观和空闲通道进行配置。</p><h1 id="6146" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">应用程序设计</h1><p id="526c" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">机器人的设计围绕3个主要部分:</p><ul class=""><li id="9beb" class="lt lu hu kc b kd ke kg kh kj lv kn lw kr lx kv mj lz ma mb dt translated">行程安排</li><li id="405b" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv mj lz ma mb dt translated">Slack机器人</li><li id="6ed2" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv mj lz ma mb dt translated">世界杯领域模型</li></ul><p id="2793" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">每个组件都反映在它自己的Go包中。</p><h2 id="0496" class="mk kx hu bd ky ml mm mn lc mo mp mq lg kj mr ms li kn mt mu lk kr mv mw lm mx dt translated">行程安排</h2><p id="c00f" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">当应用程序启动时，会创建一个调度程序来控制操作。</p><p id="8ac8" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">调度程序以可配置的时间间隔执行以下步骤:</p><ul class=""><li id="49df" class="lt lu hu kc b kd ke kg kh kj lv kn lw kr lx kv mj lz ma mb dt translated">获取当前匹配</li><li id="3cf7" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv mj lz ma mb dt translated">获取当前比赛的最新集锦</li><li id="511f" class="lt lu hu kc b kd me kg mf kj mg kn mh kr mi kv mj lz ma mb dt translated">将这些亮点发送给slack bot</li></ul><h2 id="637f" class="mk kx hu bd ky ml mm mn lc mo mp mq lg kj mr ms li kn mt mu lk kr mv mw lm mx dt translated">Slack机器人</h2><p id="6b8a" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">Slack bot是对令人惊叹的golang Slack API的一个非常简单的抽象。</p><p id="4bbb" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">它有一个方法<code class="eh my mz na nb b">Say(something string)</code>来发送消息到在构造时配置的通道。</p><h2 id="4c1d" class="mk kx hu bd ky ml mm mn lc mo mp mq lg kj mr ms li kn mt mu lk kr mv mw lm mx dt translated">世界杯领域模型</h2><p id="2603" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">所有的队，比赛，事件和集锦的定义属于这里。</p><p id="1531" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">它还定义了用于获取当前匹配的<em class="nc">库</em>。在引擎盖下，存储库调用/today<a class="ae jz" href="http://worldcup.sfg.io/" rel="noopener ugc nofollow" target="_blank">world cup . SFG . io</a>API，并判断是否有现场比赛正在进行。</p><h1 id="855c" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">结论</h1><p id="4e25" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">用Go构建和部署后端应用程序的简单和快速总是让我感到惊讶。作为一个例子，我发现<code class="eh my mz na nb b">&lt;-time.After(duration)</code>是一个非常优雅的实现滴答机制的一行解决方案。</p><p id="70a5" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">24小时限制是一个有效的方法，它防止我提前添加一个又一个特性，并且永远不发布功能性的东西。</p><p id="6300" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我必须说，我有很多乐趣建立这个机器人。然而，我希望4年后我能花时间支持我的国家队，而不是再造一个世界杯机器人:-)</p><h1 id="f925" class="kw kx hu bd ky kz la lb lc ld le lf lg ja lh jb li jd lj je lk jg ll jh lm ln dt translated">准备好成为更好的开发者了吗？</h1><p id="6da6" class="pw-post-body-paragraph ka kb hu kc b kd lo iv kf kg lp iy ki kj lq kl km kn lr kp kq kr ls kt ku kv hn dt translated">我为你创建了一个<strong class="kc hv">开发者工具包</strong>。免费下载并开始<a class="ae jz" href="https://hackernoon.com/tagged/learning" rel="noopener ugc nofollow" target="_blank">学习</a>如何编写令你自豪的代码。如果你不断地应用这些技术，你会成为一名顶尖的软件开发人员。</p><p id="89fc" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在这里获得免费的开发者工具包<a class="ae jz" href="http://eepurl.com/dfQQaz" rel="noopener ugc nofollow" target="_blank"/>！</p></div><div class="ab cl nd ne hc nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="hn ho hp hq hr"><h2 id="7130" class="mk kx hu bd ky ml mm mn lc mo mp mq lg kj mr ms li kn mt mu lk kr mv mw lm mx dt translated">如果你喜欢这篇文章，请点击👏按钮并分享，帮助其他人找到它！欢迎在下方留言评论。</h2><h2 id="c9e6" class="mk kx hu bd ky ml mm mn lc mo mp mq lg kj mr ms li kn mt mu lk kr mv mw lm mx dt translated">你也可以在这里订阅我的软件开发简讯:<a class="ae jz" href="http://eepurl.com/dfQQaz" rel="noopener ugc nofollow" target="_blank">http://eepurl.com/dfQQaz</a></h2><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nk nl l"/></div></figure></div></div>    
</body>
</html>