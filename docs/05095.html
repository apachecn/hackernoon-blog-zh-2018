<html>
<head>
<title>Relay vs Redux: Which one you should choose?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Relay vs Redux:你该选哪个？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/relay-vs-redux-which-one-you-should-choose-6895fb72dfba?source=collection_archive---------5-----------------------#2018-06-17">https://medium.com/hackernoon/relay-vs-redux-which-one-you-should-choose-6895fb72dfba?source=collection_archive---------5-----------------------#2018-06-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/a4ffee2c5672242ecc9203c7ba99d7ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZK1JWZBL2GqIB9I_oqjk0w.jpeg"/></div></div></figure><p id="26a6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果许多公司和开发人员开始谈论在react应用程序中管理数据，他们会问自己这个问题。通常，标准很简单:易于设置、易于使用、体面的文档、大型社区。如果我们开始用这些标准来考虑<a class="ae ka" href="https://hackernoon.com/tagged/relay" rel="noopener ugc nofollow" target="_blank">接力</a>和<a class="ae ka" href="https://hackernoon.com/tagged/redux" rel="noopener ugc nofollow" target="_blank">接力</a>哪一个会赢？我们来想办法吧！</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="d634" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">什么是接力？</strong></p><p id="13c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://facebook.github.io/relay/" rel="noopener ugc nofollow" target="_blank"> Relay </a>是来自脸书的数据管理员。它最初是为react-native应用程序构建的，但后来它也成为了web应用程序的工具。</p><p id="fac8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">中继的想法很简单:你的应用只需要获取你的用户需要的数据。这是描述需要什么数据的声明性方式。一个简单的中继查询如下所示:</p><figure class="ki kj kk kl fq iv"><div class="bz el l di"><div class="km kn l"/></div></figure><p id="b5eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们会询问用户的名字和姓氏。服务器只会返回给我们这两个字段。不会了。</p><p id="0968" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Relay要求你的服务器端支持<a class="ae ka" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank">查询语言</a>请求。</p><p id="ed3c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Relay有一些开箱即用的突出特性，比如<a class="ae ka" href="https://github.com/facebook/relay/blob/master/packages/relay-runtime/network/RelayQueryResponseCache.js" rel="noopener ugc nofollow" target="_blank">缓存请求</a>、<a class="ae ka" href="https://facebook.github.io/relay/docs/en/mutations.html#optimistic-updates" rel="noopener ugc nofollow" target="_blank">乐观更新</a>、<a class="ae ka" href="https://facebook.github.io/relay/docs/en/mutations.html#updater-configs" rel="noopener ugc nofollow" target="_blank">智能数据更新</a>(移除、添加、更新数据)。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="91b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">Redux是什么？</strong></p><p id="3aaa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我猜想每个读到这个故事的人都知道或者至少听说过<a class="ae ka" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> redux </a>。它是javascript应用程序的状态容器。它给你一个机会把你的状态保持在一个地方。redux的想法是拥有一个真实的位置。任何数据操作都应该使用redux来完成，无论是调度一个动作来更新数据还是获取数据。</p><p id="e8bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Redux本身相当简单，只有几个内部的东西(<a class="ae ka" href="https://redux.js.org/basics/store" rel="noopener ugc nofollow" target="_blank">存储</a>、<a class="ae ka" href="https://redux.js.org/basics/actions" rel="noopener ugc nofollow" target="_blank">调度/动作</a>、<a class="ae ka" href="https://redux.js.org/basics/reducers" rel="noopener ugc nofollow" target="_blank">减速器</a>)，其他的都是你的想象。它是一个非常可靠和稳定的图书馆，在世界各地都有一个庞大的社区。</p><p id="c02f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Redux没有Relay拥有的任何功能。无论你想从Redux得到什么，你都必须自己构建(或者在GitHub中找到)。您决定如何提取、提取什么数据、如何存储以及如何更新数据。Redux对你的服务器端没有任何要求，它只要求你遵循简单的<a class="ae ka" href="https://redux.js.org/introduction/three-principles" rel="noopener ugc nofollow" target="_blank">规则</a>。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="5323" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">什么时候使用继电器？</strong></p><ul class=""><li id="c72d" class="ko kp hu je b jf jg jj jk jn kq jr kr jv ks jz kt ku kv kw dt translated">显然，如果您的服务器端支持graphql查询，您需要使用Relay。</li><li id="abde" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">Relay接受所有需要从服务器端获取的查询，并且只向服务器端发送<strong class="je hv">一个</strong>请求，这显著提高了应用程序的速度。为每个请求创建一个XHR是昂贵的，这就是为什么来自脸书的工程师们决定收集和合并所有的查询到一个XHR。</li><li id="d9db" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">Relay是为处理大量数据而设计的，所以如果你的应用程序在客户端存储的数据量很大，你一定要试试Relay。</li><li id="1280" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">如果你打算使用React-Native，你可能也会发现Relay是合适的，因为Relay只要求它需要的数据，所以对于使用3G网络连接的用户来说，节省一些流量是至关重要的。</li><li id="1a25" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">你将尽你所能提供最好的用户体验，所以你也可以考虑relay，因为它有很酷的特性:乐观更新、缓存请求等等。</li><li id="9fa2" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">你有时间花在调查一些问题和事情上，因为接力的文档不是很理想。有时候你需要深入源代码。</li></ul></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="c91c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">什么时候用Redux？</strong></p><ul class=""><li id="f331" class="ko kp hu je b jf jg jj jk jn kq jr kr jv ks jz kt ku kv kw dt translated">你的应用在数据使用方面很简单。你不需要更新商店里依赖于其他东西的很多东西。一个很好的例子是一个todo应用程序，你真的不需要有任何数据管理器，但redux就可以了。</li><li id="0d07" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">你的应用正在使用网络套接字。Redux与web-sockets一起工作要简单得多，你所需要做的就是在消息到来时分派一个动作。轻松点。</li><li id="47e3" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">你的服务器端没有graphql。</li><li id="1926" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">您没有时间设置数据管理器，您的截止日期是昨天。</li><li id="e108" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">你不需要给最好的UX。没有乐观更新，没有缓存。</li></ul></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="bfca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">你该选哪个？</strong></p><p id="001f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然，这取决于你正在构建的应用程序，一方面我们有Relay:</p><ul class=""><li id="8e37" class="ko kp hu je b jf jg jj jk jn kq jr kr jv ks jz kt ku kv kw dt translated">最好把UX从箱子里拿出来。</li><li id="a649" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">更好的数据获取。</li></ul><p id="965e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">另一方面，我们有Redux:</p><ul class=""><li id="4fa6" class="ko kp hu je b jf jg jj jk jn kq jr kr jv ks jz kt ku kv kw dt translated">易于安装和使用。</li><li id="a035" class="ko kp hu je b jf kx jj ky jn kz jr la jv lb jz kt ku kv kw dt translated">不需要关于服务器端的额外知识。</li></ul><p id="3497" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你选择哪一个完全取决于你自己。这种决定必须在乞求发展中做出，所以小心你的欲望。</p><p id="78ba" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">结论</strong></p><p id="4a7f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无论你使用relay或redux或任何其他工具，重要的是你如何使用它们。没有不好的工具或语言，只是一开始就做出了错误的决定。你可以和我一样使用Relay和Redux。我使用Relay来存储业务数据，并为一些临时的东西如主题、地区、过滤器进行Redux。</p><p id="4d6c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">喜欢这个故事吗？分享&amp;鼓掌吧。谢了。</p><figure class="ki kj kk kl fq iv"><div class="bz el l di"><div class="lc kn l"/></div></figure></div></div>    
</body>
</html>