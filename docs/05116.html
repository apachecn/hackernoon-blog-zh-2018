<html>
<head>
<title>Cloud Agnostic Architecture is a Myth</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云不可知架构是一个神话</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/cloud-agnostic-architecture-is-a-myth-53eac80be85d?source=collection_archive---------3-----------------------#2018-06-18">https://medium.com/hackernoon/cloud-agnostic-architecture-is-a-myth-53eac80be85d?source=collection_archive---------3-----------------------#2018-06-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="6c92" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">供应商锁定——通过使用特定于云提供商的服务，被锁定到特定的云提供商</p></blockquote><p id="4b2f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">在过去的两年里，我一直在研究云，有一件事非常确定——云不可知论者<a class="ae jw" href="https://hackernoon.com/tagged/architecture" rel="noopener ugc nofollow" target="_blank">架构</a>是一个<a class="ae jw" href="https://hackernoon.com/tagged/myth" rel="noopener ugc nofollow" target="_blank">神话</a>，至少在传统意义上是这样。</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div class="fe ff jx"><img src="../Images/56034b55a7dc98f3f134d230c1215925.png" data-original-src="https://miro.medium.com/v2/resize:fit:792/format:webp/1*9IUlRHqoUXUfGUHhT8wcmA.jpeg"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Overly-generic stock photo to represent vendor lock-in.</figcaption></figure><p id="2d6b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">在本文中，我将讨论云服务的当前状态，以及真正的云不可知论者不仅是我们无法实现的事情，也是为什么它不一定是您想要实现的事情。</p><h1 id="10f3" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">将你的申请归档</h1><p id="53ed" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf jt lj ji jj ju lk jm jn jv ll jq jr js hn dt translated">我们的第一个停靠港是码头。我是Docker等容器化技术的忠实拥护者，最近我发表了一些演讲，展示了这些技术如何极大地改善我们构建和部署软件的方式。</p><p id="92e2" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我想强调的Docker的一个关键优势是，它能够减少从一个云服务提供商迁移到另一个云服务提供商时的摩擦。你可以根据运行时间、环境变量和任何设置脚本来指定你的应用程序需要运行的一切，并且你几乎可以在任何地方启动所述容器。我说“几乎”是因为有一些非常小的例外，比如只适用于Windows的图像等等。</p><p id="75a4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这实质上意味着我们需要运行的Python应用程序可以被容器化并放入任何托管的容器服务中，比如ECS。底层的容器平台将管理容器的生命周期，并提供额外的好处，如我们希望的日志和监控。</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lm"><img src="../Images/c326ffbe5142a28c8aab882398f01779.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2f7MvYF3q_M9PBABYwztbQ.png"/></div></div></figure><p id="2167" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">底层的符合OCI标准的容器运行时将处理主机之间的任何差异，并以最少的麻烦运行您的应用程序。</p><blockquote class="lr"><p id="362f" class="ls lt hu bd lu lv lw lx ly lz ma js ek translated">当谈到试图避免供应商锁定时，集装箱化是一个难以置信的低挂水果。</p></blockquote><h1 id="2128" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku mb kw kx ky mc la lb lc md le lf lg dt translated">地形的生长</h1><p id="636c" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf jt lj ji jj ju lk jm jn jv ll jq jr js hn dt translated">Terraform是最新的“闪亮的东西”，我在旅行中很高兴地玩了它，我非常喜欢CLI以及它如何让您将基础架构定义为代码。</p><p id="c992" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">您可以指定希望使用的提供者以及访问密钥和秘密密钥，当您运行<code class="eh me mf mg mh b">terraform apply</code>时，CLI将自动启动适当的基础架构，供您部署在:</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="mi mj l"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Terraform 101 — a basic script for spinning up a t2.micro</figcaption></figure><p id="51aa" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">如果您随后需要拆除您的基础设施，您可以轻松地使用<code class="eh me mf mg mh b">terraform destroy</code>命令，这是一个听起来非常棒的命令。</p><blockquote class="ir is it"><p id="7d25" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">如果你正在寻找一本关于Terraform的好的参考手册，那么我强烈推荐Yevgeniy的书:</p></blockquote><div class="mk ml fm fo mm mn"><a href="https://amzn.to/2t7UW1P" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab ej"><div class="mp ab mq cl cj mr"><h2 class="bd hv fv z el ms eo ep mt er et ht dt translated">Terraform:启动并运行:将基础设施写成代码</h2><div class="mu l"><h3 class="bd b fv z el ms eo ep mt er et ek translated">Terraform已经成为DevOps世界中定义、启动和管理基础设施代码的关键角色…</h3></div><div class="mv l"><p class="bd b gc z el ms eo ep mt er et ek translated">amzn.to</p></div></div><div class="mw l"><div class="mx l my mz na mw nb kd mn"/></div></div></a></div><p id="840d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">现在，这对于在特定的云提供商上运行您的系统所需的基础设施来说非常好，但这意味着我们将不得不为每个不同的云提供商编写多个Terraform脚本。</p><p id="effc" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这并非完全不可能，但是我们必须维护这些脚本，以便在需要故障转移到给定的提供者时，我们能够确保它们的正确性。还需要对底层平台有一定程度的了解，以便明确您正在构建的实例类型或这些实例需要的大小。</p><p id="fbbe" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">从应用程序开发人员的角度来看，您可能不一定必须或想要关心您是从什么AMI创建t2.micro实例的，您可能只关心开发您的应用程序并有一个稳定的地方来运行所述应用程序，以便它可以服务于您的付费客户。</p><h2 id="6d03" class="nc kk hu bd kl nd ne nf kp ng nh ni kt jt nj nk kx ju nl nm lb jv nn no lf np dt translated">服务之间的细微差别</h2><p id="4d0d" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf jt lj ji jj ju lk jm jn jv ll jq jr js hn dt translated">我提到的一个潜在解决方案是在所有云服务提供商之上实现一个抽象层，本质上将应用程序的底层基础架构定义为一系列块。本质上是Terraform之上的一个扩展，它将有能力构建与云平台无关的基础设施。</p><p id="3404" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这个Terraform-esque抽象层将负责与它选择的任何云平台进行接口，并旋转所述基础设施。这将让你定义一个简单的web应用程序，作为1x“负载平衡器”和2x“小型服务器”。</p><p id="1a00" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">对于一些人来说，这似乎是显而易见的解决方案，但是当涉及到实现这个抽象层和处理不同服务公开方式之间的细微差别时，这变得几乎不可能。</p><p id="4bfa" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">试图在应用程序级别处理这一点几乎是不可能的，并且为了覆盖大量的服务，您的代码库将被数百个(如果不是数千个)条件标志弄得千疮百孔。我们能把它抽象成服务代理或SDK吗？也许吧，但这只是把我们最初的问题向左转移了。</p><h1 id="e788" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">库伯内特斯</h1><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/16faf3586463b1afae31baf2d5e47da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*asW0I729N8Pe8E-WWDPaRA.jpeg"/></div></figure><p id="8083" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">因此，Kubernetes是不可思议的，我在这里讨论了它对企业环境的一些潜在好处:</p><div class="mk ml fm fo mm mn"><a rel="noopener follow" target="_blank" href="/@elliot_f/can-kubernetes-revolutionize-the-enterprise-world-86f4ec147d1f"><div class="mo ab ej"><div class="mp ab mq cl cj mr"><h2 class="bd hv fv z el ms eo ep mt er et ht dt translated">Kubernetes能彻底改变企业世界吗？</h2><div class="mu l"><h3 class="bd b fv z el ms eo ep mt er et ek translated">根据贝特里奇的标题定律，对上述标题的回答将是一个响亮的“不”。然而，在…</h3></div><div class="mv l"><p class="bd b gc z el ms eo ep mt er et ek translated">medium.com</p></div></div><div class="mw l"><div class="nr l my mz na mw nb kd mn"/></div></div></a></div><p id="09f5" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">Kubernetes，结合Docker和Terraform，实际上可能是试图成为不可知论者的一个很好的答案。许多不同的公司和个人也在探索这一点，我们开始看到管理解决方案的出现，如Triton。</p><div class="mk ml fm fo mm mn"><a href="https://www.joyent.com/blog/triton-kubernetes-multicloud" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab ej"><div class="mp ab mq cl cj mr"><h2 class="bd hv fv z el ms eo ep mt er et ht dt translated">采用Triton | Joyent的多云Kubernetes</h2><div class="mu l"><h3 class="bd b fv z el ms eo ep mt er et ek translated">Triton Multi-Cloud Kubernetes入门教程。你会明白Triton Kubernetes-Rancher，和…</h3></div><div class="mv l"><p class="bd b gc z el ms eo ep mt er et ek translated">www.joyent.com</p></div></div><div class="mw l"><div class="ns l my mz na mw nb kd mn"/></div></div></a></div><p id="25e7" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这些联合kube-clusters (klusters？)可以被视为一个庞大的计算单元，它可以运行和管理您希望运行的任何基于容器的应用程序。</p><p id="5241" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">这样做的最大好处是，应用程序开发人员只需要担心他们希望他们的应用程序看起来是什么样子，并抽象出底层的基础设施。</p><p id="0d38" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">但这并不完美，这些服务仍然非常年轻，尚未成为主流。这些服务很可能还需要一段时间才能变得足够成熟，被更大的企业采用。</p><h1 id="c450" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">托管服务的价值</h1><blockquote class="ir is it"><p id="a07d" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">供应商锁定—利用云提供商的特定服务为客户提供价值的艺术</p></blockquote><p id="6420" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">我见过人们在谈论供应商锁定时忽视的最大一件事是，利用这些托管服务为自己谋利有巨大的优势。</p><p id="df98" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">当考虑使用这些托管服务时，开发团队需要权衡这些服务提供了多少优势，并考虑将他们自己锁定在所述服务中会给他们带来多少劣势。</p><figure class="jy jz ka kb fq kc fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff nt"><img src="../Images/e328da7496cc659988329a040d52ef40.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hFKU7blT5nm9qQgptAPHw.png"/></div></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Building a service like this yourself would take years of work. With managed services, it can be done in a day!</figcaption></figure><p id="59ee" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">如果来自AWS、Azure或GCP的服务X可以为你提供超越竞争对手的巨大优势，那么因为供应商锁定而避免使用这些服务肯定是没有意义的。如果有的话，通过积极利用这些服务，你可能会发现自己能够更快地迭代新的想法，并推动我们目前所能达到的极限。</p><p id="df8a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">如果我们考虑AWS的RDS之类的产品，如果我们试图在EC2实例上托管我们自己的数据库实例并自己管理它，我们最终将花费数百个小时来尝试达到开箱即用的RDS产品所提供的相同级别的弹性或性能。</p><p id="eb1e" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">本文对自托管与RDS进行了更详细的比较:</p><div class="mk ml fm fo mm mn"><a href="https://cloud.netapp.com/blog/migrating-mysql-database-ec2-hosted-amazon-rds" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab ej"><div class="mp ab mq cl cj mr"><h2 class="bd hv fv z el ms eo ep mt er et ht dt translated">MySQL数据库迁移:EC2托管与Amazon RDS</h2><div class="mu l"><h3 class="bd b fv z el ms eo ep mt er et ek translated">数据库即服务(DBaaS)是一种云服务模式，它使用户能够使用数据库，而无需配置物理…</h3></div><div class="mv l"><p class="bd b gc z el ms eo ep mt er et ek translated">cloud.netapp.com</p></div></div><div class="mw l"><div class="nu l my mz na mw nb kd mn"/></div></div></a></div><h1 id="7765" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">结论</h1><p id="a3bf" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf jt lj ji jj ju lk jm jn jv ll jq jr js hn dt translated">虽然供应商锁定是您在设计和开发您的应用程序时应该考虑的事情，但是只要您完全理解它的限制，我会更加重视使用所述托管服务的优势。请注意，从长远来看，您严重依赖这些服务更有价值，如果您以适当的方式利用这些服务，会给您带来优势。</p><p id="6283" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">然而，就目前情况而言，完全不知道云提供商是不可能的。为了提供高于所述提供者的抽象级别，还需要做更多的工作，在这一点上，它只是一路向下的海龟。</p><p id="fd83" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">希望你喜欢这些漫谈，如果你不同意任何东西或者想补充什么，请在下面的评论区告诉我！</p><p id="902b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">如果你想支持我，请在twitter上关注我:@Elliot_f或者订阅我的YouTube频道！</p><div class="mk ml fm fo mm mn"><a href="http://youtube.com/tutorialedge" rel="noopener  ugc nofollow" target="_blank"><div class="mo ab ej"><div class="mp ab mq cl cj mr"><h2 class="bd hv fv z el ms eo ep mt er et ht dt translated">教学大纲</h2><div class="mu l"><h3 class="bd b fv z el ms eo ep mt er et ek translated">嗨伙计们！欢迎来到我的频道，TutorialEdge！这是我将张贴我所有视频教程的地方…</h3></div><div class="mv l"><p class="bd b gc z el ms eo ep mt er et ek translated">youtube.com</p></div></div><div class="mw l"><div class="nv l my mz na mw nb kd mn"/></div></div></a></div><p id="fd94" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf jt jh ji jj ju jl jm jn jv jp jq jr js hn dt translated">名词（noun的缩写）b——这篇文章是我的好朋友艾伦·里德(Alan Reid)的同行评审，所以如果你看到任何错误，请@他！</p><figure class="jy jz ka kb fq kc"><div class="bz el l di"><div class="nw mj l"/></div></figure></div></div>    
</body>
</html>