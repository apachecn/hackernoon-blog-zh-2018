<html>
<head>
<title>I just launched a serverless website in 15 minutes.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我刚刚在15分钟内推出了一个无服务器网站。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/i-just-launched-a-serverless-website-in-15-minutes-8e399c827fef?source=collection_archive---------4-----------------------#2018-06-18">https://medium.com/hackernoon/i-just-launched-a-serverless-website-in-15-minutes-8e399c827fef?source=collection_archive---------4-----------------------#2018-06-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/5ff4e8102ddc4a6ba09db5c1ba8c0285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vGUau66ZIi5Kd2Gg9Adfpw.jpeg"/></div></div></figure><p id="0f45" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好了，我们谈了“无服务器是可怕的”的谈话，但现在是时候去实践了。在接下来的15分钟里，我将带你经历创建你的第一个运行在无服务器上的网站的整个过程，你最好相信它会很棒。</p><p id="eb5f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以，事不宜迟，让我们从你需要什么开始。首先，你需要注册T2亚马逊T3。有几个步骤你必须采取，以广场了，但整个过程应该不到5分钟。</p><p id="aaf5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在一切都准备好了，确保你已经在电脑上安装了<a class="ae ka" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">节点</a>。我使用的是版本8，所以你可能希望至少有NodeJs v8+。</p><h1 id="88c4" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">先决条件</h1><p id="dcd2" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">如果你没有，你可以在这里下载NodeJs<a class="ae ka" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"/>。你必须下载安装程序，按照屏幕上的指示运行它，然后重启电脑。完成后，让我们测试一下，看看是否一切运行正常。打开你的终端或者喜欢的命令行工具，输入<code class="eh le lf lg lh b">node -v</code>。您应该会看到一条消息，上面写着v8.xx.x或类似的内容。接下来，我们需要再次检查npm是否安装正确。你可能已经猜到了这个命令是<code class="eh le lf lg lh b">npm -v</code>。</p><h1 id="6ae2" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">无服务器设置</h1><p id="4f1b" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">好了，既然一切看起来都很好，让我们从安装无服务器框架开始。在您的终端中键入以下内容:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="9dba" class="lq kc hu lh b fv lr ls l lt lu">npm install -g serverless</span></pre><p id="19a3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你会注意到这里的“-g”。它代表全球。在我的Windows机器上，我在安装无服务器时遇到了问题，为了让它正常工作，我不得不全局安装它。</p><p id="8313" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我们将登录到新安装的无服务器平台</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="597a" class="lq kc hu lh b fv lr ls l lt lu">serverless login<br/>//sls login is a shorthand that works too</span></pre><p id="e738" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您将打开一个新的浏览器窗口，要求您登录(您可以使用GitHub来完成)</p><p id="0802" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">完成之后，我们需要配置我们的AWS凭证。这个过程很简单，但需要多个步骤。幸运的是，有一个很棒的<a class="ae ka" href="https://hackernoon.com/a-crash-course-on-serverless-with-node-js-632b37d58b44" rel="noopener ugc nofollow" target="_blank">无服务器教程</a>，由<a class="ae ka" href="https://twitter.com/adnanrahic" rel="noopener ugc nofollow" target="_blank">阿德南·拉希奇</a>制作。关注第2步和第3步。这就是神奇之处。</p><p id="a45c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果这还不够，这里有一个视频<a class="ae ka" href="https://www.youtube.com/watch?v=tgb_MRVylWw" rel="noopener ugc nofollow" target="_blank">展示整个过程。</a></p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lv lw l"/></div></figure><p id="550a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好了，既然我们已经把基本的东西都弄清楚了，那就让我们进入正题吧。</p><p id="f4a3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">打开文件资源管理器，为项目创建一个新文件夹。我称我的为“无服务器应用”。在新创建的文件夹中，打开您的终端，创建一个简单的无服务器样板。</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="1424" class="lq kc hu lh b fv lr ls l lt lu">//create the boilerplate mentioned above<br/>sls create --template  hello-world</span></pre><p id="2b8c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您最终会得到这样的结果:</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/b1f4cf15e6d15766d9d7a6a6448f7b12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XqEhqsYO4qgj6FOW.png"/></div></div></figure><h1 id="91ab" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">项目设置</h1><p id="a39d" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在我们开始安装依赖项之前，我们必须创建我们的package.json文件。</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="1b38" class="lq kc hu lh b fv lr ls l lt lu">// generate a package.json file<br/>npm init</span></pre><p id="d819" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您需要提供姓名、描述和许多其他信息。因为这是一个测试，所以只需按“回车键”并将所有字段留空。</p><p id="12eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将使用<a class="ae ka" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank"> Expres </a>一个极简主义的网络框架来加快进度。你基本上可以用任何你想建的网站。</p><h1 id="bf51" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">安装依赖项</h1><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="1329" class="lq kc hu lh b fv lr ls l lt lu">//install express - a simple web framework<br/>npm i --save express<br/>//install the body-parser middleware<br/>npm i --save body-parser<br/>//install view engine for express<br/>npm i --save  hbs<br/>//you'll need serverless-http to connect your api to aws<br/>npm i --save serverless-http</span></pre><p id="3967" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们有所进展了。</p><p id="8c73" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在您的计算机上打开handler.js文件并粘贴以下代码:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="63a5" class="lq kc hu lh b fv lr ls l lt lu">const serverless = require("serverless-http");<br/>const hbs = require("hbs");<br/>const express = require("express");<br/>const bodyParser = require("body-parser");</span><span id="5073" class="lq kc hu lh b fv ly ls l lt lu">const app = express();<br/>app.use(bodyParser.urlencoded({ extended: false }));<br/>// parse application/json<br/>app.use(bodyParser.json());<br/>app.set("view engine", "hbs");</span><span id="fb2f" class="lq kc hu lh b fv ly ls l lt lu">app.get("/", function(req, res) {<br/>  res.status(200).render("index");<br/>});</span><span id="0a42" class="lq kc hu lh b fv ly ls l lt lu">module.exports.awesomesauce= serverless(app);</span></pre><p id="27da" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来:每个人都熟悉的部分，HTML代码。您必须在项目的根目录下创建一个名为“视图”的新文件夹。打开文件夹，创建一个名为index.hbs的车把模板</p><p id="ec67" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您的项目应该如下所示:</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/c7f6c2e3ba7ad1223cb8ec5f60fe5bbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:806/format:webp/0*Z4Pms2y_hQc_6dMa.png"/></div></figure><h1 id="e876" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">创建网站</h1><p id="25d5" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这是我添加到我的网站的代码。有创造力，我知道。</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="df28" class="lq kc hu lh b fv lr ls l lt lu">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;<br/>&lt;head&gt;<br/>&lt;meta charset="UTF-8"&gt;<br/>&lt;title&gt;What's all the FaaS about?&lt;/title&gt;<br/>&lt;style&gt;<br/>body<br/>{<br/>text-align:center;<br/>}<br/>&lt;/style&gt;<br/>&lt;/head&gt;<br/>&lt;body&gt;</span><span id="14ce" class="lq kc hu lh b fv ly ls l lt lu">&lt;h1&gt;What's all the FaaS about?&lt;/h1&gt;<br/>&lt;p&gt;Get it? It's a punn.&lt;/p&gt;<br/>&lt;p&gt;Unfunny joke brought to you by John Demian&lt;/p&gt;</span><span id="e2a4" class="lq kc hu lh b fv ly ls l lt lu">&lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="a987" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以创建js文件，css文件，基本上无论你在这个阶段想要什么。</p><h1 id="0347" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">创建您的服务</h1><p id="0ed6" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">几乎完成，与我赤手空拳。打开您的无服务器. yml文件并粘贴以下内容:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="c294" class="lq kc hu lh b fv lr ls l lt lu">service: awesomesauce</span><span id="fd6a" class="lq kc hu lh b fv ly ls l lt lu"># The `provider` block defines where your service will be deployed<br/>provider:<br/>  name: aws<br/>  runtime: nodejs8.10</span><span id="bf59" class="lq kc hu lh b fv ly ls l lt lu"># The `functions` block defines what code to deploy<br/>functions:<br/>  app:<br/>    handler: handler.awesomesauce<br/>    # The `events` block defines how to trigger the http events<br/>    events:<br/>        - http: ANY /<br/>        - http: 'ANY {proxy+}'</span></pre><p id="c03b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你刚刚做的是设置我们的运行时环境，nodjs8.10，我们指定了我们的应用程序的名称，直观地称为“应用程序”，然后我们指定了处理程序，碰巧是我们服务的名称:“awesome酱”。</p><p id="afff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> <em class="ma">重要提示:</em> </strong>请确保代码缩进正确。</p><h1 id="b3d5" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">部署</h1><p id="c871" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们已经走到了最后一步。一旦您将其部署到AWS，您将拥有自己的无服务器网站。这有多棒？回到终点站，再走一条线:</p><pre class="li lj lk ll fq lm lh ln lo aw lp dt"><span id="16b7" class="lq kc hu lh b fv lr ls l lt lu">sls deploy</span></pre><p id="b1a3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您会看到终端在做各种各样的极客工作，但在最后，您会看到类似这样的东西:</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mb"><img src="../Images/fa0d93f229ad0fdc912729d251d48d46.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*x55KF2mLeehimtJQ.png"/></div></div></figure><p id="e0ef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将端点复制并粘贴到您的浏览器中，瞧，您的第一个无服务器网站已经启动并运行。</p><p id="3a28" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">干得好！四周击掌！这是一段相当漫长的旅程，但它是值得的。您是一个全新网站的自豪拥有者。</p><h1 id="62e6" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">监控您的应用程序</h1><p id="0fe8" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">AWS Lambda非常棒，但是在某些方面严重缺乏。其中一个方面是监测。他们的工具并不可怕，但对于不习惯的人来说，它可能是压倒性的。</p><p id="d8c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了解决这个问题，我使用了<a class="ae ka" href="http://dashbird.io" rel="noopener ugc nofollow" target="_blank"> Dashbird.io </a>，这是一个针对AWS Lambda的无服务器监控工具，让我能够看到幕后发生的一切，从而在出现故障或需要监控成本时能够快速做出反应。</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/ac2092e9eba794cde9a2f442be850e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*Ayyrx_O-jXL_lOgEDyCEgA.gif"/></div></figure><p id="691e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注册只需要几分钟，我强烈建议您继续，尤其是如果您刚开始使用无服务器，因为它提供了为人类定制的洞察力。</p><p id="ca0a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">差点忘了提这个，不过<a class="ae ka" href="http://dashbird.io" rel="noopener ugc nofollow" target="_blank"> Dashbird.io </a>有一个免费层，你现在就可以开始使用。使用免费版本将允许您监视来自AWS的高达1gb的日志和无限数量的调用。</p></div></div>    
</body>
</html>