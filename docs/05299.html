<html>
<head>
<title>Functional programming paradigms in modern JavaScript: Partial Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">现代JavaScript中的函数式编程范式:部分应用</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/functional-programming-paradigms-in-modern-javascript-partial-application-fbd6c9c93a0d?source=collection_archive---------2-----------------------#2018-06-24">https://medium.com/hackernoon/functional-programming-paradigms-in-modern-javascript-partial-application-fbd6c9c93a0d?source=collection_archive---------2-----------------------#2018-06-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/e9dae9409032e4fe9465e46f38328ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dmkDkDzAp6A_bxQXK6AmvA.jpeg"/></div></div></figure><p id="c24d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你从一开始就一直在关注这个系列，那么我有信心说，通过读完这一章，我们将对函数式编程的<strong class="je hv">基础</strong>有一个坚实的理解。</p><p id="18f1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">到目前为止，我们已经讨论了纯粹性和不变性的概念，并通过探索组合和curry深入到了函数的世界。在本文中，我们将研究<strong class="je hv">局部应用</strong>，它是什么以及如何使用它。</p><h1 id="ca41" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">什么是局部应用？</h1><p id="d627" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">为了产生更多可重用的函数和创建更好的抽象，我们需要一种机制来预置函数的一些参数。</p><p id="ea0c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">部分应用</strong>是一种用于将更高<strong class="je hv"> arity </strong>的函数(采用多个参数的函数)转换为采用更少参数的多个函数的技术。</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><p id="623d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">部分应用的函数是不使用所有参数调用的函数。因为它还不能执行任何东西，它将返回给我们另一个函数，这个函数期待其余的。当我们用剩下的参数调用返回的函数时，它将运行。</p><p id="0ef7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过这种技术，我们试图实现更好的可重用性和抽象性。通常，使用重复参数调用的函数可以部分应用，因此隐藏了函数的一些实现细节。</p><h1 id="1c2c" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">curry vs部分应用</h1><p id="e51b" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">currying和partial application都是旨在实现相同目标的技术——将带有许多参数的函数转换成带有较少参数的函数。</p><p id="f13d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">尽管它们在这一点上很相似，但它们实现的方式是不同的。</p><p id="779a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一个curried函数将被分割成许多链式函数，所有这些函数都只接受<strong class="je hv">一个参数。这使得curried函数更容易预测——你总是知道会发生什么。</strong></p><p id="3699" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">另一方面，部分应用的功能没有这种限制。您可以使用任意数量的参数来应用它，这取决于返回的函数将具有不同的<strong class="je hv"> arity </strong>。我们只知道返回的函数将比原始函数接受更少的参数。</p><p id="3a9d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这两种技术代表了相同的一般概念，但我们应用它们的方式不同。这就是他们经常被混淆的原因。</p><h1 id="22fb" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">部分适用于。<code class="eh lk ll lm ln b">bind()</code></h1><p id="2872" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">进行局部应用的最简单方法是使用内置方法<code class="eh lk ll lm ln b">Function.prototype.bind</code>。</p><p id="a2ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lk ll lm ln b">bind</code>函数最常见的用例是用预置的<code class="eh lk ll lm ln b">this</code>值创建一个新函数。我们还可以传递任意数量的参数，这些参数将被预置在返回的函数中。</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><p id="0a21" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这种情况下，我们没有为<code class="eh lk ll lm ln b">this</code>对象传递任何值，但是我们传递了两个额外的参数，它们将被用作<code class="eh lk ll lm ln b">x</code>和<code class="eh lk ll lm ln b">y</code>。然后我们用最后一个参数<code class="eh lk ll lm ln b">z</code>调用部分应用的函数。</p><p id="9f02" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">公平地说，这不是我在与团队合作时用过的方法。不是每个人都意识到这种行为，使用一个叫做<code class="eh lk ll lm ln b">partial</code>的函数或者类似的东西至少会更有描述性一点。</p><h1 id="b042" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">应用默认参数</strong></h1><p id="eab8" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">我发现部分应用特别有用的一种情况是当您想要应用默认参数时。</p><p id="a406" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有时候，我们会一次又一次地用同一个参数调用一个函数。这可能是某个API或配置对象的url。</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><p id="5a3b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过使用部分应用程序，我们可以预先为函数提供重复的参数，并且只使用它来获取我们正在发送的有效载荷。</p><h1 id="e632" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">拆分功能</strong></h1><p id="7a14" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">有时我们需要编写带有许多参数的复杂函数。一般来说，我尽量将传递的参数数量保持在最多三到四个，但是在某些情况下，事情会逐步升级，最终你会得到一个包含七个参数的巨大函数。</p><p id="59a2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">像这样的函数很容易失控，每次你需要调用它的时候，它都会迫使你去查找它的定义。</p><p id="11b6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">像这样的问题的第一个解决方案是分解逻辑，这样你就可以使用更小的函数。然而，我们通常没有时间进行重构，或者很大一部分代码依赖于函数的API，因为它是如此的变化，这是一个禁忌。</p><p id="4054" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一个简单的解决方法是使用一个效用函数或<code class="eh lk ll lm ln b">Function.prototype.bind</code>来部分应用这个函数，并在必要时使用返回的函数。</p><h1 id="6ab1" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">适应功能</strong></h1><p id="03f2" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">当我们需要在特定条件下“适应”给定的函数时，可以选择部分应用给定的函数并减少它所需要的参数数量也是很有用的。</p><p id="ac2e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一些函数接受带有预定义数量参数的回调。但是你拥有的函数需要两个或者三个，所以你不能在回调中直接传递。相反，你需要使用一个匿名函数。</p><p id="3bcd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这并不是说语法有问题，但是正如我们前面提到的，简化代码是我们的首要任务之一。</p><p id="91e8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这种情况很适合部分应用的功能。换句话说，我们可以预先设置一些值，得到一个只需要最后一个参数的函数。然后我们可以将这个函数直接传递给回调函数。</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><h1 id="e096" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">参数顺序</h1><p id="5a46" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">我们不能部分地应用一个函数，除非我们首先正确地构造它。这里需要记住的是，我们将要使用的论点的顺序。</p><p id="1454" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">换句话说，如果参数在函数的末尾，我们就不能预定义它们。所以我们在构造函数时应该牢记这一点。</p><p id="ed9a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一些像Ramda这样的库遵循一个特定的惯例，其中每个函数都接收它最后操作的数据，所以它可以很容易地部分应用。</p><p id="9531" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是，有一些方法可以灵活调整参数的顺序。有时候你继承了一个代码库，不能随意修改现有的API。</p><p id="e276" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">或者，您可能遇到了需要以不同顺序提供它们的边缘情况。</p><p id="2141" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Ramda有一个名为<code class="eh lk ll lm ln b">partialRight</code>的实用函数，用于这种情况。</p><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="li lj l"/></div></figure><h1 id="3c72" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated"><strong class="ak">何时使用局部应用</strong></h1><p id="51d3" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">谈到函数式编程，我不是专家。写下这些文章对我的帮助不亚于对阅读它们的人的帮助。</p><p id="91f9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，如果说我学到了什么的话，那就是实现这些技术不应该是强迫的。</p><p id="062f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于根据具体情况使用什么，没有最终的清单。尤其是涉及到学习曲线如此陡峭的题目。</p><p id="1bf7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我真的不能说什么时候是使用部分应用的好时机，或者你是否应该首先使用它。这取决于你的团队、你正在做的项目以及最重要的代码可读性。</p><p id="3424" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果使用currying或部分应用程序会降低代码的可读性，请使用命令式方法。</p><p id="71d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我使用过这些技术，并且看到了它们在代码重用方面的益处。但我也见过当我决定做一些花哨的事情时，同事们困惑的表情。</p><p id="330c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里的正确答案问题是你是否应该<strong class="je hv">练习</strong>局部应用和奉承。而我在这里的回答是<strong class="je hv">是的</strong>。</p><h1 id="41ec" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">结论</h1><p id="6bbd" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn la jp jq jr lb jt ju jv lc jx jy jz hn dt translated">函数式编程在很多方面更多的是忘记旧的概念，而不是学习新的概念。每次你尝试这些技巧时，你的大脑都会训练自己以不同的方式思考。</p><p id="c3a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从许多方面来看，这将会令人困惑。你会不确定为什么有些东西在工作，或者为什么没有。但这是一件好事——困惑意味着你正在做一些新的、有挑战性的事情。</p><p id="f160" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">学习函数式编程会让你成为更好的JavaScript开发者吗？<strong class="je hv">也许是</strong>。你会在日常生活中使用这些技巧吗？我们大多数人都不会。这会让你成为更好的软件开发人员吗？<strong class="je hv">绝对</strong>！</p><p id="8da2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你觉得这篇文章很有帮助，那么就把它分享给你的朋友或同事。另外，我有一份时事通讯，如果你想在我发表这些文章时得到通知，你可以<a class="ae lo" href="https://buttondown.email/kondov" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">订阅</strong> </a>。掌声和反馈非常感谢！</p><div class="lp lq fm fo lr ls"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-function-composition-109670038859" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hv fv z el lx eo ep ly er et ht dt translated">现代JavaScript中的函数式编程范式:函数组合</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">在前两章中，我们介绍了函数式编程的一些基本范例——纯函数和…</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">hackernoon.com</p></div></div><div class="mb l"><div class="mc l md me mf mb mg ja ls"/></div></div></a></div><div class="lp lq fm fo lr ls"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-immutability-4e9751ca005c" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hv fv z el lx eo ep ly er et ht dt translated">现代JavaScript中的函数式编程范式:不变性</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">这是实用函数式编程范例系列文章的第二章。如果你没有读过…</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">hackernoon.com</p></div></div><div class="mb l"><div class="mh l md me mf mb mg ja ls"/></div></div></a></div><div class="lp lq fm fo lr ls"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-currying-5652e489cce8" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hv fv z el lx eo ep ly er et ht dt translated">现代JavaScript中的函数式编程范例:Currying</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">我记得我决定扩展函数式编程技能的那一刻。这是一个寒冷的十月夜晚…</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">hackernoon.com</p></div></div><div class="mb l"><div class="mi l md me mf mb mg ja ls"/></div></div></a></div><div class="lp lq fm fo lr ls"><a href="https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-pure-functions-797d9abbee1" rel="noopener  ugc nofollow" target="_blank"><div class="lt ab ej"><div class="lu ab lv cl cj lw"><h2 class="bd hv fv z el lx eo ep ly er et ht dt translated">现代JavaScript中的函数式编程范例:纯函数</h2><div class="lz l"><h3 class="bd b fv z el lx eo ep ly er et ek translated">JavaScript是最流行的编程语言之一。它可以在浏览器、桌面、手机上运行…</h3></div><div class="ma l"><p class="bd b gc z el lx eo ep ly er et ek translated">hackernoon.com</p></div></div><div class="mb l"><div class="mj l md me mf mb mg ja ls"/></div></div></a></div></div></div>    
</body>
</html>