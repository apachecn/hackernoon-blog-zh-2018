<html>
<head>
<title>Using Docker, Docker Compose, Angular-CLI 6+, Sass, and Pug (Jade)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker、Docker Compose、Angular-CLI 6+、Sass和Pug (Jade)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-docker-docker-compose-angular-cli-6-sass-and-pug-jade-160896dfd208?source=collection_archive---------3-----------------------#2018-06-27">https://medium.com/hackernoon/using-docker-docker-compose-angular-cli-6-sass-and-pug-jade-160896dfd208?source=collection_archive---------3-----------------------#2018-06-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/5a4f46d88ec83adc7798161aca22171a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dnT2qkqV8aCtjFCtEzBW8w.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Angular-CLI, Pug, and Sass in Docker</figcaption></figure><p id="e286" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">本指南的目的是在使用Pug时使用Angular CLI对<a class="ae ke" href="https://hackernoon.com/tagged/docker" rel="noopener ugc nofollow" target="_blank"> Docker </a>进行有效设置。我在让他们三个一起工作时遇到了一些问题。<br/>我将假设你知道一点点Docker(虽然不是必须的)来保持它的工作。</p><p id="9aa2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下面是最终代码的GitHub repo 。</p><p id="2e6c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">一些注意事项</strong>:</p><ul class=""><li id="72df" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated">本指南适用于现有的和新的<a class="ae ke" href="https://hackernoon.com/tagged/angular-cli" rel="noopener ugc nofollow" target="_blank">角接触</a>应用。</li><li id="8c21" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">你必须已经安装了NodeJS 8+，Docker v18+(不一定，你可以把compose版本改成更低的数字)。</li><li id="507e" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">我目前用的是安装了Ubuntu的Windows 10。注意这一点很重要，因为当你试图用node_modules运行node-sass时，它会给你带来问题(只发生在Windows上)</li><li id="7277" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated">pug图片来自RedBubble的用户Mamugi1492</li></ul><h1 id="5a1c" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">步骤# 1-创建新的角度项目</h1><p id="2c82" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">如果您有一个想要进行Dockerize的现有项目，请跳过这一步，转到#3。</p><p id="0ca8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你运行的是Windows，你将重新开始，跳到第2步。其他(Mac/Linux)，请执行以下操作:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="4b51" class="mf ku hu mb b fv mg mh l mi mj">npm install -g @angular/cli</span><span id="f352" class="mf ku hu mb b fv mk mh l mi mj">ng new angular-pug-sass-docker-app --style=scss</span></pre><p id="5e00" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ml">这将全局安装angular cli，然后使用Sass创建一个新的angular应用程序。将</em> <code class="eh mm mn mo mb b">angular-pug-sass</code> <em class="ml">更改为您的项目名称。</em></p><h1 id="cf40" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">第2步—仅限Windows</h1><p id="3a1b" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">在Windows上，如果您使用CLI创建应用程序，Node-Sass会根据所述操作系统自动进行设置。当您使用Docker时，您将通过Linux映像运行它。一旦您挂载了目录(这样我们就可以编辑而不需要重新构建)，它就会引用node_modules目录，其中包含了随Windows一起安装的node-sass。</p><p id="8164" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以删除node_modules。或者，强制重建节点-sass。不幸的是，我无法用这些方法让它工作。这就是为什么我建议你遵循选项#1，而把选项#2作为一个替代方案。</p><p id="499d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">选项#1 —在Windows的Linux发行版中创建新的Angular项目(推荐)</strong></p><p id="0da3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你需要在Windows 10(或任何Linux版本)上安装Ubuntu<a class="ae ke" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener ugc nofollow" target="_blank">https://docs.microsoft.com/en-us/windows/wsl/install-win10</a>。你可能有它，因为你必须安装Docker。</p><p id="cbb6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">打开Ubuntu终端，进入你想要创建新应用的目录。在我的例子中，我将在桌面中指定它:</p><p id="2f97" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们这样做是通过安装c盘(<code class="eh mm mn mo mb b">/mnt/c</code>)并导航到我的桌面位置<code class="eh mm mn mo mb b">C:\Users\jjancp\Desktop.</code></p><p id="82a5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">结合两者，我们有:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="f1a4" class="mf ku hu mb b fv mg mh l mi mj">cd /mnt/c/Users/jjancp/Desktop</span></pre><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/ac0980ff2ee7e0774c9b60702e4b0b57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-h2usWUWCom95smdcx_wcQ.png"/></div></div></figure><p id="c3aa" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">全局安装cli:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="47c6" class="mf ku hu mb b fv mg mh l mi mj">sudo npm install -g @angular/cli</span></pre><p id="4299" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">创建新的角度项目:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="13a4" class="mf ku hu mb b fv mg mh l mi mj">ng new angular-pug-sass-docker-app --style=scss</span></pre><p id="9984" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">选项# 2——在Windows中创建新的Angular项目，然后使用npm重建节点——sass</strong></p><p id="bc81" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这个方法对我没用。在这里，您可以直接从Windows安装模块，就像任何常见的项目一样:</p><p id="7f67" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在PowerShell或CMD中全局安装angular-cli:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="4b8a" class="mf ku hu mb b fv mg mh l mi mj">npm install -g @angular/cli</span></pre><p id="7db3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后，创建新的角度项目:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="44c7" class="mf ku hu mb b fv mg mh l mi mj">ng new angular-pug-sass-docker-app --style=scss</span></pre><h1 id="c740" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">步骤#3 —添加ng-cli-pug-loader</h1><p id="840e" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">阅读<a class="ae ke" rel="noopener" href="/@MarkPieszak/using-pug-or-jade-templates-with-the-angular-cli-9e37334db5bc">马克·皮耶扎克</a>(可选)的这篇关于ng-cli-pug-loader的文章。<em class="ml">感谢</em><a class="ae ke" href="https://github.com/danguilherme" rel="noopener ugc nofollow" target="_blank"><em class="ml">danguilherme</em></a><em class="ml">为装载机喷油器！</em></p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="e910" class="mf ku hu mb b fv mg mh l mi mj">ng add ng-cli-pug-loader</span></pre><p id="1bfd" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">该命令将安装package.json中的所有包，并在项目的根目录下添加一个名为<code class="eh mm mn mo mb b"> ng-add-pug-loader.js</code>的文件，它将向devDependencies添加pug-loader、pug和apply-loader。最后，它将在package.json的postinstall中包含一个run命令。</p><p id="c8ee" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">正如在上面的链接文章中所解释的，它从Angular编辑Webpack配置文件，并向其中注入Pug loader，而不需要弹出Angular应用程序！。</p><p id="5634" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">重要的事情</strong>:我们手动完成，不需要指定docker映像，因为<strong class="ji hv">我们不需要</strong>再次运行ng add。当我试图用Docker自动化整个过程时，我个人也遇到了问题。</p><h1 id="0a95" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">步骤4—[ERR _ INVALID _ CALLBACK]:CALLBACK必须是ng-add-pug-loader.js中的函数</h1><p id="e688" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated"><strong class="ji hv">更新(2018年7月11日):</strong>有人注意到我在实现fs的同步版本时遇到了问题(没有回调)。我已经在回购和邮寄中修复了它们。</p></div><div class="ab cl mq mr hc ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hn ho hp hq hr"><p id="0746" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可能会提出这个问题。我仍然不知道问题的原因是什么。但是将所有的<code class="eh mm mn mo mb b">fs </code>方法都改为同步似乎可以修复下面的错误:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="0924" class="mf ku hu mb b fv mg mh l mi mj">TypeError [ERR_INVALID_CALLBACK]: Callback must be a function<br/> at maybeCallback (fs.js:133:9)<br/> at Object.writeFile (fs.js:1139:14)<br/> at fs.readFile (/usr/app/ng-add-pug-loader.js:20:6)<br/> at FSReqWrap.readFileAfterClose [as oncomplete] (internal/fs/read_file_context.js:53:3)<br/>error Command failed with exit code 1.</span></pre><p id="89a1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">一个快速而肮脏的解决方案是编辑ng-add-pug-loader.js。所以去打开文件:</p><p id="15c9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这是文件(我在回购中创建了一个<a class="ae ke" href="https://github.com/danguilherme/ng-cli-pug-loader/issues/5" rel="noopener ugc nofollow" target="_blank">问题):</a></p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="a9e6" class="mf ku hu mb b fv mg mh l mi mj">/**</span><span id="23c3" class="mf ku hu mb b fv mk mh l mi mj">* Adds the pug-loader inside Angular CLI's webpack config, if not there yet.<br/>* @see <a class="ae ke" href="https://github.com/danguilherme/ng-cli-pug-loader" rel="noopener ugc nofollow" target="_blank">https://github.com/danguilherme/ng-cli-pug-loader</a><br/>*/</span><span id="21bc" class="mf ku hu mb b fv mk mh l mi mj">const fs = require('fs');<br/>const commonCliConfig = 'node_modules/@angular-devkit/build-angular/src/angular-cli-files/models/webpack-configs/common.js';</span><span id="fbb6" class="mf ku hu mb b fv mk mh l mi mj">const pugRule = '{ test: /.pug$/, use: [ { loader: "apply-loader" }, { loader: "pug-loader" } ] },';</span><span id="9d1b" class="mf ku hu mb b fv mk mh l mi mj">// See these:<br/>// <a class="ae ke" href="https://github.com/danguilherme/ng-cli-pug-loader/issues/5" rel="noopener ugc nofollow" target="_blank">https://github.com/danguilherme/ng-cli-pug-loader/issues/5</a><br/>// <a class="ae ke" rel="noopener" href="/@strakercarryer/oh-man-thank-you-for-posting-your-4-e5e307fe816b">https://medium.com/@strakercarryer/oh-man-thank-you-for-posting-your-4-e5e307fe816b</a><br/>// Thanks to danguilherme and Straker Carryer for spotting the issues with my approach</span><span id="bb6a" class="mf ku hu mb b fv mk mh l mi mj">try {</span><span id="ce77" class="mf ku hu mb b fv mk mh l mi mj">  // Just in case the file isn't found.<br/>  const data = fs.readFileSync(commonCliConfig);<br/>  const configText = data.toString();<br/>  if (configText.indexOf(pugRule) &gt; -1) { return; }</span><span id="b9c4" class="mf ku hu mb b fv mk mh l mi mj">  const position = configText.indexOf('rules: [') + 8;<br/>  const output = [configText.slice(0, position), pugRule,     <br/>  configText.slice(position)].join('');</span><span id="4121" class="mf ku hu mb b fv mk mh l mi mj">  const file = fs.openSync(commonCliConfig, 'r+');</span><span id="06d1" class="mf ku hu mb b fv mk mh l mi mj">  // Insert the pug webpack rule<br/>  fs.writeFileSync(file, output);<br/>  fs.closeSync(file);</span><span id="62f9" class="mf ku hu mb b fv mk mh l mi mj">} catch (e) {<br/>  console.error('There was an error while injecting the pug loader', e);<br/>}</span></pre><h1 id="848a" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">第5步—文档文件</h1><p id="ec36" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated"><strong class="ji hv">更新(2018 . 7 . 11):</strong>我在安装纱线之前更改了angular-cli的NPM安装。其他一切都保持不变。</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="0bbe" class="mf ku hu mb b fv mg mh l mi mj"># Installs the current application on a Node Image.<br/>FROM node:10.5</span><span id="1c25" class="mf ku hu mb b fv mk mh l mi mj"># The qq is for silent output in the console<br/># You are welcome to modify this part as it<br/>RUN apt-get update -qq &amp;&amp; apt-get install -y build-essential libpq-dev vim</span><span id="a0b2" class="mf ku hu mb b fv mk mh l mi mj"># Sets the path where the app is going to be installed<br/>ENV NODE_ROOT /usr/app/</span><span id="0d38" class="mf ku hu mb b fv mk mh l mi mj"># Creates the directory and all the parents (if they don’t exist)<br/>RUN mkdir -p $NODE_ROOT</span><span id="58d8" class="mf ku hu mb b fv mk mh l mi mj"># Sets the /usr/app as the active directory<br/>WORKDIR $NODE_ROOT</span><span id="6b1d" class="mf ku hu mb b fv mk mh l mi mj"># Copies all the content</span><span id="021d" class="mf ku hu mb b fv mk mh l mi mj">COPY . .</span><span id="4008" class="mf ku hu mb b fv mk mh l mi mj"># Install all the packages<br/>RUN npm install -g @angular/cli<br/>RUN yarn install</span><span id="6080" class="mf ku hu mb b fv mk mh l mi mj"># Uncomment this if you went with Option #2 in Step #2 (Windows Only)<br/># RUN npm rebuild node-sass --force</span><span id="c471" class="mf ku hu mb b fv mk mh l mi mj"># The default port from ng serve (4200)<br/># and 49153 for Webpack Hot Module Reload<br/>EXPOSE 4200 49153</span></pre><p id="668e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">创建一个名为<code class="eh mm mn mo mb b">Dockerfile</code>的无扩展名文件，并将其添加到项目的根目录中。复制上面的内容。如果你有Docker的经验，你可能会看到我们正在复制整个文件夹，然后运行安装。我们可以选择复制<code class="eh mm mn mo mb b">ng-add-pug-loader</code>、<code class="eh mm mn mo mb b">angular.json</code>和<code class="eh mm mn mo mb b">package.json</code>文件并运行yarn install。我发现一些问题(可能是由于我的设置)让它工作。</p><p id="3b9a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您决定执行步骤2选项2(仅限Windows)。很可能你会有<code class="eh mm mn mo mb b">node-sass</code>问题。试试看重建是否有效。我试过了，没用。</p><p id="5dc4" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">如果您对图像有问题，请参阅底部的附录。</strong></p><p id="9a10" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">。dockerignore </strong></p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="4545" class="mf ku hu mb b fv mg mh l mi mj">.dockerignore<br/>./log<br/>./tmp<br/>package.lock.json<br/>.git<br/>*Dockerfile*<br/>*docker-compose*<br/>node_modules</span></pre><p id="dfed" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">创建一个扩展名为<code class="eh mm mn mo mb b">.dockerignore</code>的无名文件，复制上面的内容。</p><h1 id="3f94" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">第6步—创建docker-compose.yml文件</h1><p id="c8ac" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">在项目的根目录下创建一个<code class="eh mm mn mo mb b">docker-compose.yml</code>文件，添加如下内容:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="3015" class="mf ku hu mb b fv mg mh l mi mj">version: ‘3.6’<br/>services:<br/>  app:<br/>    build: .<br/>    command: “npm start”<br/>    ports:<br/>      - “4200:4200” <br/>      - "49153:49153"<br/>    expose:<br/>      - “4200” <br/>      - "49153"<br/>    volumes:<br/>      - “./:/usr/app/”</span></pre><p id="01c6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh mm mn mo mb b">volumes</code>键将把我们当前的目录映射到Docker图像的内容。这样，我们不需要重新加载容器来查看更改。</p><p id="e130" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你检查docker-compose中的<code class="eh mm mn mo mb b">npm start</code>，你会看到它将要运行<code class="eh mm mn mo mb b">ng serve</code>。我们需要在package.json内部做一点小小的调整</p><h1 id="dbee" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">第7步—更新package.json</h1><p id="5534" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">为了让它正确地暴露给外界，我们需要转到启动脚本并修改它。此外，我们需要添加一个<a class="ae ke" href="https://stackoverflow.com/a/44196594/1057052" rel="noopener ugc nofollow" target="_blank">轮询机制</a>，这样Angular CLI就可以拾取容器内的更改:</p><p id="7b3e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">出发地:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="57a2" class="mf ku hu mb b fv mg mh l mi mj">“start”: “ng serve”,</span></pre><p id="900e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">收件人:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="e1bd" class="mf ku hu mb b fv mg mh l mi mj">“start”: “ng serve --host 0.0.0.0 --poll=500”,</span></pre><p id="2507" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">该命令将允许您通过<code class="eh mm mn mo mb b">http://localhost:4200</code>进行导航</p><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/47aa079950e61980c7206794714c03a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*iLlTadynewJ_9SVeCo1cKA.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Example for the ng start script</figcaption></figure><p id="cea6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">轮询机制以毫秒为单位。您可以根据自己的喜好进行调整。</p><h1 id="058b" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">第八步——改变。html到。哈巴狗</h1><p id="3c2d" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">不要<strong class="ji hv">而不是</strong>将主<strong class="ji hv">index.html改为. pug，加载程序不会解析它。</strong></p><p id="bbe2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将app.component.pug更新到app.component.pug更新其内容:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="03bb" class="mf ku hu mb b fv mg mh l mi mj">div(style='text-align:center')<br/>  h1<br/>  | Welcome to {{ title }}!<br/>  img(width='300', alt='Angular Logo', src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIj4KICAgIDxwYXRoIGZpbGw9IiNERDAwMzEiIGQ9Ik0xMjUgMzBMMzEuOSA2My4ybDE0LjIgMTIzLjFMMTI1IDIzMGw3OC45LTQzLjcgMTQuMi0xMjMuMXoiIC8+CiAgICA8cGF0aCBmaWxsPSIjQzMwMDJGIiBkPSJNMTI1IDMwdjIyLjItLjFWMjMwbDc4LjktNDMuNyAxNC4yLTEyMy4xTDEyNSAzMHoiIC8+CiAgICA8cGF0aCAgZmlsbD0iI0ZGRkZGRiIgZD0iTTEyNSA1Mi4xTDY2LjggMTgyLjZoMjEuN2wxMS43LTI5LjJoNDkuNGwxMS43IDI5LjJIMTgzTDEyNSA1Mi4xem0xNyA4My4zaC0zNGwxNy00MC45IDE3IDQwLjl6IiAvPgogIDwvc3ZnPg==')</span><span id="b29f" class="mf ku hu mb b fv mk mh l mi mj">h2 Here are some links to help you start:<br/>  ul<br/>    li<br/>     h2<br/>       a(target='_blank', rel='noopener', href='https://angular.io/tutorial') Tour of Heroes</span><span id="e253" class="mf ku hu mb b fv mk mh l mi mj">    li<br/>      h2<br/>        a(target='_blank', rel='noopener', href='https://github.com/angular/angular-cli/wiki') CLI Documentation<br/>    li<br/>      h2<br/>        a(target='_blank', rel='noopener', href='https://blog.angular.io/') Angular blog</span></pre><p id="5f5c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">更新<code class="eh mm mn mo mb b">app.component.ts</code></p><p id="9d06" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">改变:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="976a" class="mf ku hu mb b fv mg mh l mi mj">templateUrl: ‘./app.component.html’,</span></pre><p id="378c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">收件人:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="097e" class="mf ku hu mb b fv mg mh l mi mj">templateUrl: ‘./app.component.pug’,</span></pre><p id="b597" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就是它的样子:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="39fd" class="mf ku hu mb b fv mg mh l mi mj">import { Component } from '@angular/core';</span><span id="4a52" class="mf ku hu mb b fv mk mh l mi mj">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.pug',<br/>  styleUrls: ['./app.component.scss']<br/>})<br/>export class AppComponent {<br/>  title = 'app';<br/>}</span></pre><h1 id="fc83" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">第9步—运行应用程序</h1><p id="e6ec" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">导航到文件夹的项目并运行:</p><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="5897" class="mf ku hu mb b fv mg mh l mi mj">docker-compose up</span></pre><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff my"><img src="../Images/e61696345f1161a0f56bbd5fa38da093.png" data-original-src="https://miro.medium.com/v2/resize:fit:1308/format:webp/1*o68FHduRLYWZ5-f6BTgsMQ.png"/></div></div></figure><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/8ab3d513352151f52d848c00b322c957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RGy_XUoFhH7E_KovGlNstw.png"/></div></div></figure><figure class="lw lx ly lz fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/1aeb40e417b7e272bf3336371b21b648.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hchQGU_b08ib9QBZMjfNdg.png"/></div></div></figure><p id="228a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">准备就绪😁😊🎉🎉🎉🎉🎉🎉🎉🎉</p><h1 id="3674" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">附录A</h1><p id="e260" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">如果您正在运行Windows，并且已经有了一个带有CLI的Angular应用程序，并且您在对应用程序进行Dockerizing时遇到了问题，解决方案将是使用步骤2中的选项1。</p><ol class=""><li id="2ca8" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd nb kl km kn dt translated">移除<code class="eh mm mn mo mb b">node_modules</code>文件夹。</li><li id="35c4" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd nb kl km kn dt translated"><a class="ae ke" href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" rel="noopener ugc nofollow" target="_blank">在Windows 10上安装Ubuntu</a>，或者在Windows 7/8.x上流浪</li><li id="4d9c" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd nb kl km kn dt translated">打开Ubuntu命令，并将其映射到您的安装。在Windows 10上使用Ubuntu的情况下，可以这样做:</li></ol><pre class="lw lx ly lz fq ma mb mc md aw me dt"><span id="d8d3" class="mf ku hu mb b fv mg mh l mi mj">cd /mnt/c/Users/MyUser/Path/To/Angular-Project</span></pre><p id="3bee" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">4.在Ubuntu中:安装<a class="ae ke" href="https://nodejs.org/en/download/package-manager/#debian-and-ubuntu-based-linux-distributions" rel="noopener ugc nofollow" target="_blank"> NodeJS </a>。</p><p id="4717" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">5.执行<code class="eh mm mn mo mb b">yarn install</code>或<code class="eh mm mn mo mb b">npm install</code></p><h1 id="6db6" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">附录B —其中一个依赖项中的安全漏洞(截至撰写本文时—2018年6月27日)。</h1><p id="b7a1" class="pw-post-body-paragraph jg jh hu ji b jj lr jl jm jn ls jp jq jr lt jt ju jv lu jx jy jz lv kb kc kd hn dt translated">angular-cli使用的(和NodeSass)似乎有一个旧的依赖关系，即GitHub正在警告一个安全漏洞。进一步调查这个问题，似乎是来自<code class="eh mm mn mo mb b">Hapi</code>的旧<code class="eh mm mn mo mb b">Hoek </code>版本。我们无法控制这一点，因为它是从依赖项中自动提取的。</p><p id="d62d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这些似乎是解决这些问题的问题:</p><ul class=""><li id="c686" class="kf kg hu ji b jj jk jn jo jr kh jv ki jz kj kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/angular/angular-cli/issues/10480" rel="noopener ugc nofollow" target="_blank">https://github.com/angular/angular-cli/issues/10480</a></li><li id="3bfb" class="kf kg hu ji b jj ko jn kp jr kq jv kr jz ks kd kk kl km kn dt translated"><a class="ae ke" href="https://github.com/sass/node-sass/issues/2355" rel="noopener ugc nofollow" target="_blank">https://github.com/sass/node-sass/issues/2355</a></li></ul><figure class="lw lx ly lz fq iv"><div class="bz el l di"><div class="nc nd l"/></div></figure></div></div>    
</body>
</html>