<html>
<head>
<title>Protocol Spotlight: Avalanche (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">协议聚焦:雪崩(第二部分)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/protocol-spotlight-avalanche-part-2-80cd4a530b6b?source=collection_archive---------4-----------------------#2018-07-01">https://medium.com/hackernoon/protocol-spotlight-avalanche-part-2-80cd4a530b6b?source=collection_archive---------4-----------------------#2018-07-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/397d1943ddd3f5e06af982593f85b55a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c4GnEXo-XP2jB9w1LXM_Eg.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><strong class="bd jg">Note: This article was first published on </strong><a class="ae jh" href="https://flatoutcrypto.com/home/avalancheprotocol" rel="noopener ugc nofollow" target="_blank"><strong class="bd jg">FlatOutCrypto</strong></a><strong class="bd jg"> on the 29th June.</strong></figcaption></figure><p id="d732" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这是<a class="ae jh" href="https://ipfs.io/ipfs/QmUy4jh5mGNZvLkjies1RWM4YuvJh5o2FYopNPVYwrRVGV" rel="noopener ugc nofollow" target="_blank">雪崩协议</a>介绍的第2部分。第1部分介绍了什么是雪崩，它试图实现什么，以及假设和保证团队火箭概述。这里可以找到<a class="ae jh" rel="noopener" href="/@flatoutcrypto/protocol-spotlight-avalanche-3f5dfd366a26"/>。我现在来看看组成雪崩家族的<a class="ae jh" href="https://hackernoon.com/tagged/protocols" rel="noopener ugc nofollow" target="_blank">协议</a>，以及它们是如何组成无领导协议雪崩的。</p><h1 id="8836" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">雪崩家族</h1><h1 id="27f0" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">烂泥</h1><p id="2394" class="pw-post-body-paragraph ji jj hu jk b jl le jn jo jp lf jr js jt lg jv jw jx lh jz ka kb li kd ke kf hn dt translated">雪泥是雪崩协议系列中最基本的部分。白皮书中将其解释为一组节点(假设100个)如何在两种颜色(例如红色和蓝色)之间达成共识的演示:</p><ol class=""><li id="5621" class="lj lk hu jk b jl jm jp jq jt ll jx lm kb ln kf lo lp lq lr dt translated">一小部分节点样本(比如9个)在默认状态下是无色的。这九个未着色的节点根据它们接收到的事务将它们的颜色更新为红色或蓝色。在本例中，假设我们跟踪的其中一个节点变为蓝色</li><li id="30db" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lo lp lq lr dt translated">这个蓝色节点现在查询其他节点的一个小样本(为了方便起见，我们再说9个)。如果它们是无色的，这九个会更新为蓝色，或者，如果已经着色，响应我们的蓝色节点，指出它们是蓝色或红色</li><li id="92fc" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lo lp lq lr dt translated">一旦我们的节点接收到足够多的响应，它就会检查节点的预定义阈值是否用于相同的颜色。如果是，它要么保持蓝色，要么如果响应其查询的其他节点中有足够多的节点是红色的，它就会变成红色</li><li id="f545" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lo lp lq lr dt translated">然后，该节点返回并使用不同的节点样本执行另一个查询</li><li id="7f78" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lo lp lq lr dt translated">这种投票在网络中反复发生，直到足够多的节点选择了相同的颜色</li><li id="6044" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lo lp lq lr dt translated">给与足够的时间，所有的最终将翻转到相同的颜色，并达成一致</li></ol><p id="5cc2" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">显而易见的问题是，我们如何知道他们选择了正确的颜色，而不仅仅是随机/为“坏”的选择投票，然后在网络上传播。这将在后面探讨，但是请记住，所有的<a class="ae jh" href="https://hackernoon.com/tagged/blockchains" rel="noopener ugc nofollow" target="_blank">区块链</a>和DLT实现都是为了达成共识。</p><p id="118b" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">其他注意事项:</p><ul class=""><li id="deb6" class="lj lk hu jk b jl jm jp jq jt ll jx lm kb ln kf lx lp lq lr dt translated">没有历史的储存——雪泥中没有节点记得除了它现在的颜色以外的任何东西</li><li id="45ba" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">它不是拜占庭容错的(如果你不熟悉BFT或BGP的意思，我推荐阅读我对拜占庭将军问题的介绍。)</li><li id="e2dd" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">他们可以通过不断翻转节点的颜色来保持足够的红色和蓝色节点，这样就永远不会达成共识</li></ul><h1 id="5d8d" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">雪花</h1><p id="8191" class="pw-post-body-paragraph ji jj hu jk b jl le jn jo jp lf jr js jt lg jv jw jx lh jz ka kb li kd ke kf hn dt translated">雪花是白皮书中非常简短的一部分，它为Slush添加了一个基本功能，使其成为BFT。在Slush中，我们注意到没有历史存储，但是雪花为每个节点提供了一个计数器，用于存储网络中连续样本的数量，这些样本给出了全红或全蓝的结果。</p><p id="d8de" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">为什么？因为在一定数量的连续样本(必须为拜占庭节点/期望的安全保证的给定阈值设置的参数)之后，它将永远接受该颜色。这允许正确的节点提交，并意味着节点将达成共识(论文将此称为“一个不可逆转的点，在此之后，决策是不可避免的”)。如果条纹中断，则计数器归零，并重新开始计数。</p><h1 id="dbbe" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">雪球</h1><p id="8918" class="pw-post-body-paragraph ji jj hu jk b jl le jn jo jp lf jr js jt lg jv jw jx lh jz ka kb li kd ke kf hn dt translated">雪花上短短的四分之一页后面是雪球上另一个可爱的小部分(当你读了足够多的白皮书时，简短肯定是好的！).雪球在雪花的基础上增加了自信。它这样做是为了使协议更难被攻击，因为它现在能够存储信息并根据这些信息做出决策，而这在以前是做不到的。</p><p id="a45f" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">雪球将雪花的计数器升级为“信心计数器”。这些置信度计数器意味着在每个查询产生红色或蓝色结果后，节点将其置信度计数器加1。如果它对当前颜色的置信度低于另一种颜色的置信度值，它就会切换颜色。</p><p id="980f" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">节点不是根据每个雪花的颜色的连续结果的数量来决定颜色，而是在多次连续查询(同样，该数量必须被设置为节点/期望的安全保证的给定阈值)产生结果后做出决定，该结果意味着节点对一种颜色的置信度超过了对其他颜色的置信度。</p><p id="3191" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">现在我们来看看这个家族的最后一个成员，雪崩。我非常肯定，即使是我的妈妈，到目前为止也会理解雪泥、雪花和雪球，这是我试图在每篇文章中追求的个人黄金标准(旁注:她持有以太坊的时间可能比你在crypto中的时间更长)，所以希望Avalanche也一样容易理解。</p><h1 id="8c29" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">雪崩</h1><p id="c40f" class="pw-post-body-paragraph ji jj hu jk b jl le jn jo jp lf jr js jt lg jv jw jx lh jz ka kb li kd ke kf hn dt translated">Avalanche是我们的最终协议，它概括了Snowball并维护了所有已知事务的动态只附加有向无环图(DAG)。DAG只有一个汇点，即创世顶点。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/40fc65c41159edb631ac646e128088b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:480/1*dfjmJhKRH11jutg7yGimVg.gif"/></div></figure><p id="9266" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">一如既往，让我们来分解一下:</p><ul class=""><li id="0918" class="lj lk hu jk b jl jm jp jq jt ll jx lm kb ln kf lx lp lq lr dt translated">仅追加:事务添加到以前的事务中。本质上，当一个节点创建一个事务时，它被添加到一个或多个其他事务(父事务)中，然后这些事务被包括在该事务中</li><li id="0b99" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">DAG:详细讨论DAG超出了本文的范围，但是如果您不确定的话，这里有一个<a class="ae jh" href="https://flatoutcrypto.com/home/dagsandscalingissuespt1" rel="noopener ugc nofollow" target="_blank">简介</a>概述了DAG是什么。基本上，区块链是线性的(一个块添加到下一个块)，而Dag是无界的——事务随着彼此的添加而激增。这样做的好处是可以更快地确认交易(不需要等待比特币或以太坊将该期间的所有交易汇集到一个区块中)——它们在由更新的交易处理时得到确认</li><li id="e580" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">旁注:DAG是数据结构。雪崩是共识协议。这类似于区块链(数据结构)和工作证明(共识协议)。Avalanche可以在不同的数据结构上工作，但是Rocket团队大概认为DAG是最适合它的</li><li id="4379" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">单个汇点:在DAG的上下文中，汇点是所有点都向内的节点。下面的图片来自<a class="ae jh" href="http://homepages.math.uic.edu/~leon/cs-mcs401-s08/handouts/graphs-intro.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>展示了一个DAG以及源和汇与DAG的关系。很明显只有一个</li><li id="5cec" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">起源顶点:两条线/边相交的点(在此上下文中，两条线/边在DAG结构中的节点之间相交)。Genesis =第一个，所有其他点都直接或间接面向它(见下面的<strong class="jk hv">图1 </strong>，其中T1是Genesis顶点和单个汇点)</li></ul><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="fe ff me"><img src="../Images/4f57f85a9353b43befc2189df786e83b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*r98EQ3EgBg-l0WxhGxMKRQ.png"/></div></figure><p id="2748" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">因此Avalanche使用了雪球和置信度计数器的概念，但将其应用于DAG上的节点。每个事务都链接到一个父事务，最终都链接回单个接收器，即起源顶点。我们为什么需要这个？因为就像其他Dag一样，需要有一个事务作为其余事务的基础(例如，IOTA有一个genesis事务)；这就是只追加事务的本质——它们需要添加一些东西。</p><p id="7d0f" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">DAG结构还意味着新的良性交易与未决定的母交易联系在一起，这样做“有助于推动交易做出决定”。</p><p id="4aab" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">火箭队从两方面解释了使用DAG结构背后的基本原理:</p><ol class=""><li id="bd00" class="lj lk hu jk b jl jm jp jq jt ll jx lm kb ln kf lo lp lq lr dt translated">它使投票更有效，因为对一个事务的投票就是对它所附加的所有事务的投票(直接回到起源顶点)</li><li id="884f" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lo lp lq lr dt translated">这也意味着更难撤销过去的决定(尽管注意这里的措辞意味着没有终结，就像没有区块链一样)</li></ol><p id="6d87" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这仍然给我们留下了一个问题，即如何在冲突的事务或重复花费之间做出选择。雪崩建立在雪球的基础上，不仅包括信心计数器，还包括“chits”。当预定义阈值的节点投票确认某个事务及其所有父事务是首选项时，事务收集chit。然后，节点使用chits的数量来确定对特定事务以及父事务和后代事务(即新出现的事务)的信任度。如果出现平局，则节点投票给第一个看到的节点。图1突出显示了节点的chit和置信度值。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="fe ff me"><img src="../Images/4a47c5d12b6596d934c0d9ab277ecf93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1392/format:webp/1*rM9qZPfjagn5fVE7kJMpkQ.png"/></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">A sample set of transactions highlighting their different {chit, confidence} values</figcaption></figure><p id="2ac8" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">火箭队在这里强调，T2比T3 (0)有更大的信心(5)，因此在T2 (T4，5，8和9)形成的子交易比T3 (6和7)更有可能收集未来的票据。</p><p id="04f4" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这个过程使用了我们已经在雪泥、雪花和雪球中讨论过的属性。节点向其他节点的随机样本发出查询，以获得对事务的投票，并向其他节点通知新的事务。如果一个节点看到一个事务和所有祖先事务在竞争事务中是优先的，那么该事务就变成“强烈优先”的，并收到一个“是”的投票。如果该事务或其祖先不是首选的，则它会收到无表决权。</p><p id="9f5f" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">与前面的例子中的红色和蓝色不同，节点决定事务是正确的还是与另一个事务冲突。因此，雪崩可以被看作是用雪球的实例来解决冲突。</p><p id="fe9f" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">最后一点，一个良性交易可能会发现自己附加到一个流氓母公司，在这种情况下，它可能会努力获得必要的信心和票据进行确认。在这种情况下，良性交易将再次尝试，并可以选择已决定或完全确认的父代。</p><p id="c958" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">Avalanche还使用另一种方法来确保具有确定祖先的良性事务可以接收足够的chits，方法是允许正确的节点“检查DAG以发现缺乏足够后代的良性非nop事务，并发出nop事务以帮助增加它们的置信度”。nop事务被定义为具有一个父事务并且可以由任何节点发出的事务。但是，它们不能被滥用来欺骗系统，因为它们不会自动授予票据。</p><h1 id="81cc" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">结论</h1><p id="5154" class="pw-post-body-paragraph ji jj hu jk b jl le jn jo jp lf jr js jt lg jv jw jx lh jz ka kb li kd ke kf hn dt translated">希望你现在已经理解了什么是雪崩以及它是如何工作的原理。有许多进一步的信息，我无法在一篇文章中涵盖，我可能会在某个时候做后续工作，因为以上内容实际上只涵盖了白皮书的前1/3。火箭队论文的其余部分包括:</p><ul class=""><li id="3619" class="lj lk hu jk b jl jm jp jq jt ll jx lm kb ln kf lx lp lq lr dt translated">第3部分:系统分析和证明所描述的工作</li><li id="5477" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">第4部分:实施(值得一读，因为它提到了他们如何将比特币交易完全移植到Avalanche)</li><li id="e138" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">第5部分:评估(提供关于绩效的额外指标)</li><li id="86a0" class="lj lk hu jk b jl ls jp lt jt lu jx lv kb lw kf lx lp lq lr dt translated">第6部分:其他共识协议的分类及其在不同网络中的应用</li></ul><p id="87a9" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">火箭队明确表示，本文的目的不是为了涵盖所有可能发生的情况，而是指一组特定的情况。然而，有几个方面很有意思，看看雪崩实现如何处理，比如它如何抵抗Sybil攻击。</p><p id="368a" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">鉴于目前的情况，这是一个推出无领导协议的特别有利的时机，因为EOS等项目的mainnet推出暴露了集权化在多大程度上重新回到了本应分散的网络中，而且比特大陆在比特币网络上的影响力再次接近51%超过了分散化。因此，提出无领导协议思想的协议应该总是受到欢迎和仔细审查的。我期待着在接下来的几个月里看到那些比我更优秀的人的进一步评论，以及即将推出的实现。</p><p id="4e4e" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><strong class="jk hv">如果你喜欢这篇文章，请关注我</strong><a class="ae jh" href="https://twitter.com/flatoutcrypto" rel="noopener ugc nofollow" target="_blank"><strong class="jk hv">@ flat outcrypto</strong></a><strong class="jk hv">。你也可以在</strong> <a class="ae jh" rel="noopener" href="/@flatoutcrypto/"> <strong class="jk hv">媒体</strong> </a> <strong class="jk hv">上找到我的作品，尽管我承认有时会健忘。</strong></p><p id="8696" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><strong class="jk hv">免责声明:我不拥有任何基于雪崩的网络(根本没有)，也没有投资任何即将推出的网络(如Perlin)。</strong></p><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="mf mg l"/></div></figure></div></div>    
</body>
</html>