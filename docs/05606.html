<html>
<head>
<title>Learning React by building my first project and trying to refactor my code.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过构建我的第一个项目并尝试重构我的代码来学习React。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/learning-react-by-building-my-first-project-and-trying-to-refactor-my-code-acf649902be3?source=collection_archive---------27-----------------------#2018-07-03">https://medium.com/hackernoon/learning-react-by-building-my-first-project-and-trying-to-refactor-my-code-acf649902be3?source=collection_archive---------27-----------------------#2018-07-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/1a088581c8e36aaca7e4539cb86a0cfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yjH3SiDaVWtpBX0g_2q68g.png"/></div></div></figure><p id="91a4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当你阅读第一份代码草案时，你有没有想过你的实验空间有多小？这通常是因为你在学习一项新技术的同时正在建立一个新的项目。这就是为什么花时间，享受喘息的空间，并在项目结束时重构你的工作代码是一个好的实践。它允许你更深入地理解概念，让你的代码和你自己更加清晰。在本文中，我想向您展示我在更深层次上通过关注重构而学会了React。</p><p id="3a45" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个项目来自FreeCodeCamp课程的前端库部分。让我们直接进入代码，看看我是如何构建它的。</p><h2 id="8cbd" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">一台随机报价机在反应过来:</h2><p id="0291" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">这是随机报价机的视图:</p><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff la"><img src="../Images/4289e57fa618b64237c9d8eb52b53e37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PUhVSXA_ho3Jpy2q747wSw.png"/></div></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">My random quote machine.</figcaption></figure><p id="e8cd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">代码:</p><figure class="lb lc ld le fq iv"><div class="bz el l di"><div class="lj lk l"/></div></figure><p id="1bbc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我第一次让随机报价机工作时，这个快照就是我的代码的结构。擅长自己工作的开发人员知道，第一个“有效”的代码结构并不是最好的。可以用更好的方式重写。我想指出的一个主要原因是，让你的代码保持和你的应用或功能工作时一样的方式不是一个好主意。</p><blockquote class="ll"><p id="5cc3" class="lm ln hu bd lo lp lq lr ls lt lu jz ek translated">第一次尝试写的东西，你可能都没看懂。</p></blockquote><p id="b73f" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">让你的应用程序像开发者一样工作主要是从stackoverflow和博客帖子中产生的，这没有错(我的意思是每个开发者都会这样做)，但这主要是一种复制和粘贴的练习。重构你的代码帮助你质疑这些帮助，反过来帮助你更好地理解你的代码库。</p><h2 id="947f" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">重构代码:</h2><figure class="lb lc ld le fq iv"><div class="bz el l di"><div class="lj lk l"/></div><figcaption class="lf lg fg fe ff lh li bd b be z ek">Refactored code</figcaption></figure><p id="8d5e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">看起来更好对吗？太棒了。</p><p id="fb4b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我想向你介绍一下我所做的改变，以及我为什么要做这些改变。</p><h2 id="120a" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">解释是:</h2><ol class=""><li id="6464" class="ma mb hu je b jf kv jj kw jn mc jr md jv me jz mf mg mh mi dt translated"><code class="eh mj mk ml mm b">constructor</code>:在我的第一个快照中，在我的类声明后面有一个<code class="eh mj mk ml mm b">constructor</code>来初始化我的<code class="eh mj mk ml mm b">state</code>并绑定类方法。根据<a class="ae mn" href="https://github.com/tc39/proposal-class-fields" rel="noopener ugc nofollow" target="_blank">的类属性提议</a>，公共类字段允许我们实例化类属性，而无需编写构造函数。</li></ol><figure class="lb lc ld le fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mo"><img src="../Images/b0a5f43a2ba3abc807dc70efed219f5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ag6WEcmk7AhidnojlBFpjQ.png"/></div></div></figure><p id="7e05" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所发生的是<a class="ae mn" href="https://babeljs.io/docs/en" rel="noopener ugc nofollow" target="_blank"> Babel </a>传输代码并在幕后添加<code class="eh mj mk ml mm b">constructor</code>。所以它就在那里，但你看不见。整洁对吗？</p><p id="2cf7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了更详细的理解，请查看Donavon West关于这个的文章。</p><p id="3a9f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">2.构造函数绑定:第一个代码快照在<code class="eh mj mk ml mm b">constructor</code>中有<code class="eh mj mk ml mm b">this.handleRandomQuotes</code>和<code class="eh mj mk ml mm b">this.getRandomQuote</code>。为了让方法在有<code class="eh mj mk ml mm b">this</code>的类中工作良好，我们必须在<code class="eh mj mk ml mm b">constructor</code>中<code class="eh mj mk ml mm b">bind</code>它。但是既然我们已经从代码中删除了<code class="eh mj mk ml mm b">constructor</code>，就必须有一种方法来处理<code class="eh mj mk ml mm b">this</code>。</p><p id="8907" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">箭头函数解决了这个问题。除了它给我们带来的清晰之美，箭头函数帮助我们将<code class="eh mj mk ml mm b">this</code>指向类，就像我们对<code class="eh mj mk ml mm b">.bind(this)</code>所做的那样，因此移除了<code class="eh mj mk ml mm b">this</code>。</p><p id="16af" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">到目前为止，我利用了最新的Javascript特性，并对我们的代码做了一些小的修改，使其更易于阅读。</p><p id="a0d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你看到我在第一个代码快照中是如何无知地同时使用了<code class="eh mj mk ml mm b">.bind(this)</code>和<code class="eh mj mk ml mm b">=&gt;</code>的吗？当你重构时，这是你需要注意和学习的事情之一。</p><p id="9d9b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当涉及到构造函数绑定(<code class="eh mj mk ml mm b">.bind(this)</code> ) vs类属性(<code class="eh mj mk ml mm b">=&gt;</code>)时，还有一个很大的好处就是减少内存使用。这个从<a class="ae mn" rel="noopener" href="/dailyjs/demystifying-memory-usage-using-es6-react-classes-d9d904bc4557">这里</a>就可以很好的理解了。</p><p id="c413" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">3.命名和重构:重构代码时，命名是需要注意的事情之一。当方法被正确命名时，就不需要注释了。我将我的<code class="eh mj mk ml mm b">handleRandomQuotes</code>方法重命名为<code class="eh mj mk ml mm b">changeQuote</code>，这样可以更好地描述它的功能。</p><p id="08f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh mj mk ml mm b">getRandomQuote</code>方法中，我把我的<code class="eh mj mk ml mm b">QUOTES</code>数组放在里面。这是一种气味，所以我决定把它从那里移除，并正常访问它，使事情看起来更好。</p><h2 id="441d" class="ka kb hu bd kc kd ke kf kg kh ki kj kk jn kl km kn jr ko kp kq jv kr ks kt ku dt translated">结论:</h2><p id="d050" class="pw-post-body-paragraph jc jd hu je b jf kv jh ji jj kw jl jm jn kx jp jq jr ky jt ju jv kz jx jy jz hn dt translated">开始时的这种反应既令人沮丧又有趣，但我很感激我这样做了。这一经历帮助我通过构建一个项目开始使用React。有更多的东西需要学习和构建。</p><p id="4ece" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下次见，继续黑。</p><p id="7fac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在我的<a class="ae mn" href="https://github.com/oyin-k/random-quote-machine" rel="noopener ugc nofollow" target="_blank"> github repo </a>上查看代码。</p></div></div>    
</body>
</html>