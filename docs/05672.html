<html>
<head>
<title>Using the Google Real Time Reporting API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用谷歌实时报告API</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-the-google-real-time-reporting-api-71ce3f6ceee4?source=collection_archive---------7-----------------------#2018-07-06">https://medium.com/hackernoon/using-the-google-real-time-reporting-api-71ce3f6ceee4?source=collection_archive---------7-----------------------#2018-07-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="b06e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为您的办公室制作一个实时仪表板</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff jp"><img src="../Images/7eab1da7f61a14d9f21ff20f78d061e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AmAUReIFq7yejP_dE-lHLA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Don’t want to code? Try it here — <a class="ae kf" href="https://real-time-dashboard.netlify.com/" rel="noopener ugc nofollow" target="_blank">https://real-time-dashboard.netlify.com/</a></figcaption></figure><p id="9c91" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我喜欢看着世界各地的人们在一天中走进克鲁。这是对使用我们软件的人们的有力提醒。它还能在工作日制造一点兴奋感。看到来自各种国家的访问或使用量的大幅增长是很有趣的。</p><p id="9ff2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我想和我的团队分享这种兴奋感，所以我建了一个基于网络的仪表盘，在我们的办公室里播放。</p><h1 id="da96" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">此处代码:<a class="ae kf" href="https://github.com/jessekorzan/real-time-dashboard" rel="noopener ugc nofollow" target="_blank">https://github.com/jessekorzan/real-time-dashboard</a></h1><h1 id="0a23" class="kg kh hu bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">不想编码？演示:【https://real-time-dashboard.netlify.com/ T2】</h1></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><h2 id="6b04" class="ll kh hu bd ki lm ln lo km lp lq lr kq jc ls lt ku jg lu lv ky jk lw lx lc ly dt translated">说明</h2><p id="35a1" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated">使用Google实时报告API实际上非常简单。任何拥有HTML/CSS和JS技能的人都可以为自己构建一个可爱的仪表板。</p><p id="715a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在网上很难找到这方面的信息。我在这里详细介绍了关键部分，并提供了一个到我的Github repo的代码示例链接。希望这能为其他人节省几个小时的拔头发时间。</p><h2 id="6e94" class="ll kh hu bd ki lm ln lo km lp lq lr kq jc ls lt ku jg lu lv ky jk lw lx lc ly dt translated">在编写任何有效的代码之前，您需要在配置中包含三条关键信息:</h2><ul class=""><li id="2e9b" class="me mf hu it b iu lz iy ma jc mg jg mh jk mi jo mj mk ml mm dt translated"><em class="mn">谷歌分析viewID </em></li><li id="9d92" class="me mf hu it b iu mo iy mp jc mq jg mr jk ms jo mj mk ml mm dt translated"><em class="mn">一个API密钥</em></li><li id="829c" class="me mf hu it b iu mo iy mp jc mq jg mr jk ms jo mj mk ml mm dt translated"><em class="mn">一个ClientID </em></li></ul><p id="587f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">首先… </strong>我假设你有一个谷歌帐户(电子邮件),并且可以访问你的网站或项目的谷歌分析。</p><p id="d714" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">其次… </strong>我假设你对谷歌开发者控制台有所了解。<em class="mn">现在就去那里登录:</em><a class="ae kf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://console.cloud.google.com/</em></a></p></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><h1 id="fe9f" class="kg kh hu bd ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz mx lb lc ld dt translated">配置(在编写任何代码之前)</h1><p id="80b3" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated"><strong class="it hv">第一步——创建一个新项目(<em class="mn">试试左上角下拉菜单</em>)<br/></strong><a class="ae kf" href="https://console.cloud.google.com/" rel="noopener ugc nofollow" target="_blank"><strong class="it hv"><em class="mn">https://console.cloud.google.com/</em></strong></a></p><p id="5dbc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">步骤2 —为这个新项目创建凭证:</strong><a class="ae kf" href="https://console.cloud.google.com/apis/" rel="noopener ugc nofollow" target="_blank"><strong class="it hv"><em class="mn">https://console.cloud.google.com/apis/</em></strong></a></p><p id="0ead" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先…您需要一个API密匙，因此点击蓝色的“<strong class="it hv">创建凭证</strong>”按钮并选择API密匙</p><p id="a5f0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">其次…你需要一个OAuth 2.0客户端ID，所以点击蓝色的“c <strong class="it hv">创建凭证</strong>按钮，为“<strong class="it hv"> web应用程序</strong>创建一个凭证</p><p id="e93b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，我们需要确保您的开发和现场域可以访问这个项目。在“<strong class="it hv">授权的JavaScript源</strong>”下，让我们添加您的本地开发和活动域(例如:http://localhost、、http://emptycan.com、等<a class="ae kf" href="http://localhost," rel="noopener ugc nofollow" target="_blank">)。</a></p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff my"><img src="../Images/c76333466d901365ea3ca78f644dc795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wK-G67HJB6cuUDITYUX5RQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">API key &amp; clientID</figcaption></figure><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mz"><img src="../Images/df2fc43862c6c886651233d62766ba29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWMvWW-fjfyQ5KH-ykU-lQ.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Authorised JavaScript origins</figcaption></figure></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><p id="fb6f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">步骤3——为该项目启用合适的API。</strong></p><p id="b2a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">从项目的主API仪表板中…单击“启用API和服务”。</p><p id="bc7f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">您需要“启用”两个API“Javascript Map API”和“Analytics API”(不是Google Analytics API……令人困惑，是的，但忽略那个)。</strong></p></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><p id="e949" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">步骤4——因为Google实时报告API是有限发布的，所以您需要注册您的项目才能访问。</strong></p><p id="d4ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">完成此表格:</strong><a class="ae kf" href="https://docs.google.com/forms/d/e/1FAIpQLSc9OpoDGB3tBD7oy1OG9fyum8KBIxs-2ihPCsHp13WTnM-SSQ/viewform" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/forms/d/e/1 faipqlsc 9 opodgb 3 TBD 7 oy 1 og 9 fyum 8 kbixs-2 hpcshp 13 wtnm-SSQ/view form</a></p><p id="acd8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="mn">注:请特别注意查找您的项目ID的说明</em></p></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><p id="6b62" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">第5步——谷歌分析视图ID </strong></p><p id="7f78" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个很简单…登录你的谷歌分析账户，进入管理区。找到您对实时数据流感兴趣的酒店(中间一列)。在随后的最右边一栏中，标题为“查看”…单击“查看设置”。在顶部，您将看到视图ID。将它复制到某个地方，以便稍后包含在您的代码中。</p><figure class="jq jr js jt fq ju fe ff paragraph-image"><div role="button" tabindex="0" class="jv jw di jx bf jy"><div class="fe ff mz"><img src="../Images/1e33e58b9967a2ff51cea5b684678ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8pZeBOYqQnHLTx4KYdtzsA.png"/></div></div><figcaption class="kb kc fg fe ff kd ke bd b be z ek">Get the View ID</figcaption></figure></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><h1 id="7a8a" class="kg kh hu bd ki kj mt kl km kn mu kp kq kr mv kt ku kv mw kx ky kz mx lb lc ld dt translated">代码示例</h1><p id="61dd" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated">我在React中写了我的矿，但是你可以从其他JS项目中吸取很多东西。</p><p id="4534" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此处代码:<a class="ae kf" href="https://github.com/jessekorzan/real-time-dashboard" rel="noopener ugc nofollow" target="_blank">https://github.com/jessekorzan/real-time-dashboard</a></p><h2 id="69dd" class="ll kh hu bd ki lm ln lo km lp lq lr kq jc ls lt ku jg lu lv ky jk lw lx lc ly dt translated">摘要</h2><p id="892e" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated">该应用程序可以通过三个基本步骤来工作。</p><ul class=""><li id="e2d0" class="me mf hu it b iu iv iy iz jc na jg nb jk nc jo mj mk ml mm dt translated">使用Google Auth登录(没有身份验证，API请求不起作用)</li><li id="3016" class="me mf hu it b iu mo iy mp jc mq jg mr jk ms jo mj mk ml mm dt translated">使用上一步中的访问令牌访问API端点</li><li id="fa0e" class="me mf hu it b iu mo iy mp jc mq jg mr jk ms jo mj mk ml mm dt translated">处理结果并呈现您的实时视图</li></ul><p id="0c02" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了获得更新的结果，你必须经常使用一种技术来轮询API。我使用requestAnimationFrame(每30秒一次)。分析API的速率限制是每天50K。</p><p id="7025" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">无论你用什么方法进行谷歌认证，你都必须提供正确的“https://www . Google APIs . com/Auth/analytics”范围。否则，什么都不会发生。</p><p id="f0c2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我使用了优秀的React组件“React-Google-oauth”<a class="ae kf" href="https://github.com/CyrilSiman/react-google-oauth" rel="noopener ugc nofollow" target="_blank">https://github.com/CyrilSiman/react-google-oauth</a></p><p id="f45f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">很容易添加范围并让身份验证按照我的意图工作。</p><p id="81c0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成以上所有工作后，你可以自由地使用Fetch或Ajax(或任何你喜欢的风格)来ping API并获得一些实时结果。在我的例子中，你可以看到我放入了谷歌地图，但这不是必须的。</p></div><div class="ab cl le lf hc lg" role="separator"><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj lk"/><span class="lh bw bk li lj"/></div><div class="hn ho hp hq hr"><h2 id="ce60" class="ll kh hu bd ki lm ln lo km lp lq lr kq jc ls lt ku jg lu lv ky jk lw lx lc ly dt translated">了解Google实时报告API能做什么！</h2><p id="50d4" class="pw-post-body-paragraph ir is hu it b iu lz iw ix iy ma ja jb jc mb je jf jg mc ji jj jk md jm jn jo hn dt translated">摆弄不同的维度和度量标准很有趣。</p><p id="a245" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="mn">一个好的起点就是这里:</em></strong><a class="ae kf" href="https://developers.google.com/apis-explorer/#p/analytics/v3/analytics.data.realtime.get" rel="noopener ugc nofollow" target="_blank"><strong class="it hv"><em class="mn">https://developers . Google . com/APIs-explorer/# p/analytics/v3/analytics . data . real time . get</em></strong></a></p><p id="ec9c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">之后…我的代码会更有意义。</p><p id="10c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="mn">如果您有问题或需要帮助，请主动联系我们。</em></p><p id="77d3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="mn">代码示例:</em><a class="ae kf" href="https://github.com/jessekorzan/real-time-dashboard" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://github.com/jessekorzan/real-time-dashboard</em></a><em class="mn"><br/>演示:</em><a class="ae kf" href="https://real-time-dashboard.netlify.com/" rel="noopener ugc nofollow" target="_blank"><em class="mn">https://real-time-dashboard.netlify.com/</em></a></p></div></div>    
</body>
</html>