<html>
<head>
<title>Building a Quest System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立一个任务系统</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-a-quest-system-cf7f1d3da132?source=collection_archive---------3-----------------------#2018-07-08">https://medium.com/hackernoon/building-a-quest-system-cf7f1d3da132?source=collection_archive---------3-----------------------#2018-07-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="283a" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">或者说，如何让玩家在你的游戏里做事</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/b5586152fd9077adf066581cd8c10c3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oD4kuRaX8MaeBwXAuuAOhw.jpeg"/></div></div></figure><p id="0c14" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在这篇文章中，我想分享我为模拟游戏构建任务/教程系统的经验。它将由一个理论和稍微更实际的部分组成，基于用ECS(和反应系统)开发任务。事不宜迟，让我们从理论部分开始。</p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><p id="3420" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在游戏中，任务是玩家为了在游戏中走得更远并获得某种奖励而完成的任务。教程可以被看作是强制性的任务。一个任务可以包含一个单一任务的列表，但是为了简单起见，我想定义一下，每个任务只有一个任务。</p><p id="0685" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">任务通常由游戏设计师定义，并通过解锁要求、目标或完成要求和奖励来描述。在某些情况下，提供任务取消需求是有好处的。但是在我深入研究不同需求的成分之前，让我首先列出一个任务的所有可能状态:</p><ul class=""><li id="b407" class="ky kz hu jx b jy jz kb kc ke la ki lb km lc kq ld le lf lg dt translated"><strong class="jx hv">待定</strong> —任务还不满足解锁要求</li><li id="94ed" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq ld le lf lg dt translated"><strong class="jx hv">解锁</strong> —解锁要求满足，但还没有进行，可能是因为进行中的可能任务的限制</li><li id="a79e" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq ld le lf lg dt translated"><strong class="jx hv">进行中</strong> —任务解锁并显示给玩家。对于<strong class="jx hv"> <em class="lm">新的</em> </strong>任务，拥有一个子状态或者一个单独的状态可能是有用的。这标志着任务在技术上正在进行中，但是玩家还没有看到反对意见。我没有给它单独的状态，因为它是特定于用户界面的</li><li id="bbe5" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq ld le lf lg dt translated"><strong class="jx hv">已完成</strong> —任务正在进行中，玩家尽了一切努力来完成它。现在是领取奖励的时候了。如果没有奖励，任务可能会直接切换到下一个状态。也有任务自动完成的系统</li><li id="f824" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq ld le lf lg dt translated"><strong class="jx hv">完成</strong> —任务完成，用户领取奖励</li><li id="a6da" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq ld le lf lg dt translated"><strong class="jx hv">取消</strong>——如果你想让任务消失，这个状态很重要。这非常有用，如果你引入了一个新的任务，而这个新的任务是玩家无法看到的，这个玩家的等级已经超过了一定的界限</li></ul><p id="fd09" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">现在是谈论不同需求的时候了。</p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><h2 id="c060" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ke ly lz ma ki mb mc md km me mf mg mh dt translated">解锁要求</h2><p id="ba16" class="pw-post-body-paragraph jv jw hu jx b jy mi iv ka kb mj iy kd ke mk kg kh ki ml kk kl km mm ko kp kq hn dt translated">那些主要是基于游戏状态/玩家进度。最简单的需求是level或者XP，但是将探索的解锁链到一个资源或者某个交互也是很常见的。</p><p id="1ad3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">假设你想教一个玩家做手工。当玩家积累了正确的资源，我们应该解锁一个任务，玩家需要使用这些资源来制作工艺。这同样适用于建造，升级，培训等…甚至使用一些遥远的，或只是解锁部分的用户界面可能被设计为一个任务，与解锁的要求，这个用户界面元素出现。</p><p id="7b7e" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我发现另一个非常有用的解锁要求是完成另一个任务。只有当任务B和任务C完成时，任务A才会解锁。通过这种方式，我们可以控制任务的流程，将任务的顺序线性化。</p><h2 id="b05a" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ke ly lz ma ki mb mc md km me mf mg mh dt translated">取消要求</h2><p id="6658" class="pw-post-body-paragraph jv jw hu jx b jy mi iv ka kb mj iy kd ke mk kg kh ki ml kk kl km mm ko kp kq hn dt translated">正如<strong class="jx hv">取消的</strong>状态描述中提到的，在玩家过于高级的情况下，避免一些基础任务是非常重要的。如果你为初学者介绍一个任务，你将会以一种高级玩家也将会满足的方式设定解锁要求。然而，你不希望高级玩家做基本的任务。</p><p id="c9d7" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在我看来，最简单的事情就是把取消和某种XP联系起来，或者在完成另一个任务的时候。</p><h2 id="04a9" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ke ly lz ma ki mb mc md km me mf mg mh dt translated">完成要求</h2><p id="5a06" class="pw-post-body-paragraph jv jw hu jx b jy mi iv ka kb mj iy kd ke mk kg kh ki ml kk kl km mm ko kp kq hn dt translated">完成主要有两个需求类别:</p><ul class=""><li id="b7ec" class="ky kz hu jx b jy jz kb kc ke la ki lb km lc kq ld le lf lg dt translated"><strong class="jx hv">游戏状态基础</strong></li><li id="3629" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq ld le lf lg dt translated"><strong class="jx hv">特别行动</strong></li></ul><p id="648f" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">例如，我们正在建立一个农业游戏，我们有一个基于苹果的任务。在基于<strong class="jx hv">游戏状态的</strong>类别中，我们定义当玩家拥有2000个苹果时，任务完成。如果苹果是一种可消耗的资源，玩家必须停止消耗它，继续收获苹果，直到他/她拥有2000个苹果。</p><p id="b95a" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在<strong class="jx hv">特别行动</strong>类别中，我们将定义在任务移动到<strong class="jx hv">“进行中”</strong>状态后，玩家应该收获2000个苹果。这样我们就不会对玩家施加任何消费限制，也不在乎之前的成就。顺便说一句。具有基于<strong class="jx hv">游戏状态的</strong>完成要求的任务可以自动完成。玩家可能已经达到完成游戏所需的状态。然而，基于<strong class="jx hv">的临时行动</strong>总是需要继续工作。</p><h2 id="9e3a" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ke ly lz ma ki mb mc md km me mf mg mh dt translated">奖励</h2><p id="c697" class="pw-post-body-paragraph jv jw hu jx b jy mi iv ka kb mj iy kd ke mk kg kh ki ml kk kl km mm ko kp kq hn dt translated">一个没有奖励的任务/任务有点令人失望，特别是如果一个任务包含一些研磨。最简单的解决方法是给玩家XP，但是有时候完成一个任务可以给玩家一些稀有物品，或者随机的GATCHA。</p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><p id="7eef" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如前所述，任务是由游戏设计者定义的，它们是引导玩家走向<em class="lm">理想</em>方向的工具。然而，一个游戏设计师能想出的东西就这么多了。如果你的任务系统是结构良好的，你可以尝试程序化地生成它们。从我的经验来看，这实际上是游戏制作团队在自动化模式之前要做的最后任务之一。</p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><h2 id="9e2e" class="ln lo hu bd lp lq lr ls lt lu lv lw lx ke ly lz ma ki mb mc md km me mf mg mh dt translated">我如何用ECS实现一个任务系统</h2><p id="cde5" class="pw-post-body-paragraph jv jw hu jx b jy mi iv ka kb mj iy kd ke mk kg kh ki ml kk kl km mm ko kp kq hn dt translated">在我的文章《游戏数据和实体》中，我认为数据可以分为三类:</p><ol class=""><li id="f158" class="ky kz hu jx b jy jz kb kc ke la ki lb km lc kq mo le lf lg dt translated">配置</li><li id="32aa" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq mo le lf lg dt translated">游戏状态</li><li id="8224" class="ky kz hu jx b jy lh kb li ke lj ki lk km ll kq mo le lf lg dt translated">运行时数据</li></ol><p id="8cc3" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在任务的情况下，我们需要使用所有这三个类别。任务的定义被存储为一个配置。<strong class="jx hv">进行中的</strong>、<strong class="jx hv">完成的</strong>和<strong class="jx hv">取消的</strong>任务都存储为游戏状态。</p><p id="40e9" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在游戏初始化时，我们会检查配置，根据游戏状态中已经存在的任务，创建一组<strong class="jx hv">【待定】</strong>和<strong class="jx hv">【进行中】</strong>任务。我们还会检查是否可以在<strong class="jx hv">取消</strong>时存储新任务。</p><p id="0b3c" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">在运行时，我们需要一套反应系统，它将监控游戏状态的相关部分，并将<strong class="jx hv">未决的</strong>任务转换为<strong class="jx hv">解锁的</strong>，如果可能的话，转换为<strong class="jx hv">进行中的</strong>。基于<strong class="jx hv">特别行动</strong>的任务，会有存储进度的组件。</p><p id="d296" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">我们需要另一套反应系统，它监控游戏状态和用户互动，以完成任务，或者至少在<strong class="jx hv">特别行动</strong>的情况下改变任务进度。</p><p id="6253" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当一个任务移动到<strong class="jx hv"> done </strong>时，它将被保留在游戏状态中。</p></div><div class="ab cl kr ks hc kt" role="separator"><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw kx"/><span class="ku bw bk kv kw"/></div><div class="hn ho hp hq hr"><p id="e829" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这基本上就是魔酱了。细节可能会变得有点复杂，但在我看来，ECS是一个非常友好的架构。特别是如果你严格遵循它，把每一个球员事件变成一个组件。</p><p id="04f0" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><em class="lm">顺便说一句。为程序生成的任务编写反应式系统并不是一门火箭科学。</em></p></div></div>    
</body>
</html>