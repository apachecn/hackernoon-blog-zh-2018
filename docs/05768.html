<html>
<head>
<title>Handy Docker Aliases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">方便的码头工人别名</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/handy-docker-aliases-4bd85089a3b8?source=collection_archive---------1-----------------------#2018-07-10">https://medium.com/hackernoon/handy-docker-aliases-4bd85089a3b8?source=collection_archive---------1-----------------------#2018-07-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/164cd7bac62fa4c6c5edb42e539695be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6UxssvUR6WY0kQ22-H5AXw.png"/></div></div></figure><div class=""/><div class=""><h2 id="5e63" class="pw-subtitle-paragraph jc ie if bd b jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ek translated">使用别名优化您的docker命令行工作流</h2></div><p id="27aa" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">如果你曾经在命令行中使用过<a class="ae kq" href="https://hackernoon.com/tagged/docker" rel="noopener ugc nofollow" target="_blank"> Docker </a>，你无疑已经编写过命令快捷方式，或者至少考虑过这样做。</p><p id="3655" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在这篇文章中，我假设你对使用docker命令比较熟悉，并且可能对潜在有用的<a class="ae kq" href="https://hackernoon.com/tagged/aliases" rel="noopener ugc nofollow" target="_blank">别名</a>有点兴趣。如果你是Docker的新手，那么这可能不是一个好的起点。</p><p id="f8a9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这篇文章是关于更长的非缩写命令的省时快捷方式或别名。因为让我们面对现实吧:</p><p id="1474" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">“没人有时间打出整个该死的命令！”</p><p id="633d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">快捷方式可以通过多种方式实现。这里我们要考虑的两个是bash shell别名和shell脚本文件。我要分享的任何快捷方式都可以放在脚本文件或别名文件中。每种方法都有其优点和缺点。</p><p id="52e3" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这里有一个放在shell脚本中的便捷的<code class="eh ks kt ku kv b">dkps</code> (docker ps)快捷方式。如果您选择这种方法，那么您将得到一个脚本集合，您需要将它复制到一个全局可访问的路径，比如<code class="eh ks kt ku kv b">/usr/shared/bin</code>，使用path或类似的东西。您可能还需要系统特权来获得正确的结果。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff kw"><img src="../Images/404b32707d442a5fe04e89d27d0a2698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D5H0waevT8JaYF8VUh186g.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">dkps shell script</figcaption></figure><p id="d30a" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">另一种方法是将别名命令放在您的主目录下的<code class="eh ks kt ku kv b">.bash_profile</code>文件中。这使得快捷方式无需特殊许可即可移植。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lf"><img src="../Images/9a771e02ac094e31ec0bdf1e0d87ad1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGlLcfhUQgvG-p1AS8WKnA.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">.bash_aliases script</figcaption></figure><blockquote class="lg lh li"><p id="fcee" class="ju jv kr jw b jx jy jg jz ka kb jj kc lj ke kf kg lk ki kj kk ll km kn ko kp hn dt translated">如果你是bash别名的新手，可以看看这篇<a class="ae kq" rel="noopener" href="/@werbelow/intro-to-bash-aliases-116c4c60afd1">介绍</a>。</p></blockquote><p id="f6c4" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">为了保持整洁，我将导入我的docker相关别名，而不是直接将它们添加到我的<code class="eh ks kt ku kv b">.bash_profile</code>或<code class="eh ks kt ku kv b">.bash_aliases</code>脚本中。在我的。bash_profile脚本我将简单地添加以下代码来加载我的新<code class="eh ks kt ku kv b">.docker_aliases</code>文件。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lm"><img src="../Images/6b5d3e9ecdb9b605a8ba28ab3e6a8626.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*Z0wb_1AiEEQCcORvcpgOaw.png"/></div></div></figure><p id="8e25" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在我实际的<code class="eh ks kt ku kv b">.bash_profile</code>脚本中，我加载了其他别名，比如一个<code class="eh ks kt ku kv b">.git_aliases</code>脚本。</p><blockquote class="lg lh li"><p id="819f" class="ju jv kr jw b jx jy jg jz ka kb jj kc lj ke kf kg lk ki kj kk ll km kn ko kp hn dt translated">因此，您不必输入所有这些内容，本文末尾提供了一个示例文件<code class="eh ks kt ku kv b">.docker_aliases</code>。</p></blockquote><p id="3eeb" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这种方法也很容易移植，因为你可以与朋友和家人分享你的docker别名。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="80ad" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在介绍我自己的方便的docker别名之前，让我们创建一个样本容器集，我们可以用它来测试别名。我们将使用<a class="ae kq" href="https://docs.docker.com/engine/reference/commandline/stack/" rel="noopener ugc nofollow" target="_blank"> Docker栈命令</a>和两个著名的服务Redis和MongoDB来实现。如果你不熟悉它们，不要担心，我们实际上不会用到它们——把它们想象成现实世界中的占位符。</p><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="lu lv l"/></div></figure><p id="9af0" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">启动我们的测试堆栈只需要做一个<code class="eh ks kt ku kv b">docker stack deploy</code>并传递上面的compose脚本。我们用堆栈的名称来结束命令，我们称之为“test”。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lw"><img src="../Images/a4c41a71efcb344b31fe104121937aaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MhDJ07pZbwE8oN-tRCHoLQ.png"/></div></div></figure><p id="93ac" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">一旦堆栈加载，我们可以使用<code class="eh ks kt ku kv b">docker ps</code>命令来验证它:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lx"><img src="../Images/e86b311020279fbf3c119b0c53fb415d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2JxPf5dYoU0cUhaQAr6N-Q.png"/></div></div></figure><blockquote class="lg lh li"><p id="15ff" class="ju jv kr jw b jx jy jg jz ka kb jj kc lj ke kf kg lk ki kj kk ll km kn ko kp hn dt translated">注意:为了简洁起见，我将缩写一些命令的输出。这有一个额外的好处，即创建较小的图像。所以请记住，上面docker ps命令的输出比显示的要长得多。</p></blockquote><p id="0186" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们可以使用<code class="eh ks kt ku kv b">docker stack rm</code>命令拆除堆栈。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ly"><img src="../Images/aafd53c7c382885bc690404a29031945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1252/format:webp/1*pRZukV6bw12dV69F_itJ-A.png"/></div></div></figure><p id="c31d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><a class="ae kq" href="https://www.urbandictionary.com/define.php?term=Easy%20Peasy" rel="noopener ugc nofollow" target="_blank">易皮斯</a>、<strong class="jw ig">、</strong>对吗？</p><p id="9def" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在这篇文章的剩余部分，我将使用上面的设置来显示截图。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="2f12" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">现在谈谈我们的化名…这最好是好的，对吗？</p><p id="55da" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们要看的第一个别名只是提供了常用docker命令的缩写。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div class="fe ff lz"><img src="../Images/1854d3542b3fae8ce1365482108b0655.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*uE3qTzD--HZNUtYGmEKkRQ.png"/></div></figure><p id="deea" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">马上考虑一下，对于像<code class="eh ks kt ku kv b">docker ps</code>这样的命令，每次用<code class="eh ks kt ku kv b">dk</code>替换<code class="eh ks kt ku kv b">docker</code>，或者使用<code class="eh ks kt ku kv b">dks</code>处理像<code class="eh ks kt ku kv b">docker service ls</code>这样的docker服务命令，可以节省多少时间。打字的节省<code class="eh ks kt ku kv b">dks ls</code>加起来！</p><p id="0918" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">因此，你不用键入docker: <code class="eh ks kt ku kv b">docker logs</code>而是键入:<code class="eh ks kt ku kv b">dkl</code></p><p id="dec7" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><code class="eh ks kt ku kv b">docker logs b7a8</code>变为<code class="eh ks kt ku kv b">dkl b7a8</code></p><p id="5451" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">使用<code class="eh ks kt ku kv b">dklf</code>跟踪日志。所以你可以简单地使用<code class="eh ks kt ku kv b">dklf b7a8</code>而不是<code class="eh ks kt ku kv b">docker logs -f b7a8</code></p><p id="0725" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">另一个方便的日志别名是<code class="eh ks kt ku kv b">dkln</code> (docker log by name)命令。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ma"><img src="../Images/9305cbda3777e58a06c4ca24ede54205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdd4W5Bp827DWbJNMveICw.png"/></div></div></figure><p id="5fa0" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">它评估反勾号(`)内的管道命令，并将结果用作<code class="eh ks kt ku kv b">docker logs</code>命令的参数。<code class="eh ks kt ku kv b">grep</code>命令使用第一个参数过滤<code class="eh ks kt ku kv b">docker ps</code>命令的结果。最后，<code class="eh ks kt ku kv b">awk</code>命令将输出的第一个字段作为值参数。</p><p id="9143" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">好吧，这可能会让人困惑。让我们仔细看看。</p><p id="a25d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><code class="eh ks kt ku kv b">docker ps</code>命令返回正在运行的容器列表。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mb"><img src="../Images/6015706ee814c824ceb475a0c3790ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CphXSRCR7qr68GH7Jy8hzw.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Abbreviated docker ps output</figcaption></figure><p id="3121" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">并且<code class="eh ks kt ku kv b">docker ps | grep redis</code>返回:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lx"><img src="../Images/b1e8882829a48749ba48751da07ca545.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yy-bZtu3F9dt0rNrapwYtA.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Abbreviated output</figcaption></figure><p id="7548" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">最后，<code class="eh ks kt ku kv b">docker ps | grep redis | awk '{print $1}'</code>返回Redis的容器ID:f 5f 0ed 387073</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mc"><img src="../Images/043793ffb80e6fc429ef4dd0fd1b2c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dS0b5IxkTHRh5XjD73OOhA.png"/></div></div></figure><p id="6af1" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这允许我们按名称查看任何容器的日志。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff md"><img src="../Images/359b8a28b5a775c0a6ad0e674fd6be11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yzm8Cmv4VndnFSas1p278g.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Abbreviated docker ps output</figcaption></figure><p id="e4a1" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">当然，您需要确保没有多个容器匹配一个名称。如果是这样，那么只需借助带有容器ID的<code class="eh ks kt ku kv b">dkl</code>命令。</p><p id="2d5c" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">上例中的一个关键要点是，您可以通过组合shell命令来构建一些非常强大的别名。我们将在这篇文章的后面看到另一个例子，当我们看到一个构建和发布容器的别名时。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="0fce" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">查看正在运行的容器的状态是构建和测试容器化服务的重要部分。以下别名使我们更容易做到这一点。</p><p id="c55d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在这篇文章的前面，我们看了一下<code class="eh ks kt ku kv b">dkps</code> (Docker PS)命令。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lf"><img src="../Images/9a771e02ac094e31ec0bdf1e0d87ad1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xGlLcfhUQgvG-p1AS8WKnA.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">.bash_aliases script</figcaption></figure><p id="e380" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">下面是正在运行的命令:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff me"><img src="../Images/e1d6ae252723385655afaebfd55446d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2wkGa4p1ICBiAtJPuGIB1w.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Abbreviated docker ps output</figcaption></figure><p id="d66e" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">另一个有用的别名是<code class="eh ks kt ku kv b">dkstats</code> (docker stats)命令:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mf"><img src="../Images/23702cf05b8c613425f64be26c3118a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Y4K7bp6rEBt3SmHjE4cxg.png"/></div></div></figure><p id="1126" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">此命令测试是否提供了参数，如果提供了，则应用grep过滤器。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mg"><img src="../Images/11e6349ec9fa394736f485cffed04978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5n5WNwF_gtrLE-Qaxr67ag.png"/></div></div><figcaption class="lb lc fg fe ff ld le bd b be z ek">Abbreviated docker ps output</figcaption></figure><p id="d7a2" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这使我们可以查看所有容器的统计信息，或者按特定的容器名称进行过滤。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="c5e5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><code class="eh ks kt ku kv b">dktop</code>命令呈现类似顶部的显示，显示内存、CPU、网络I/O和块I/O。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/eb8b34a78d80a9c2f53e307dd400af53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TrsEOnTnY7pe5PKnPaba1w.gif"/></div></div></figure><p id="0972" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">实际的别名非常简单:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/ee52952f7fd82cf0e10364e73979df07.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vhOvd13SOr-fSfFrtUuH7g.png"/></div></div></figure><p id="4774" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">你可以自由地用你想看到的值来定制它。我选择了一个基本设置，以使显示能够整齐地适应多窗格iTerm2屏幕。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="2a27" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在建造集装箱的过程中，有时有必要进入集装箱四处看看。这样做通常涉及:</p><ul class=""><li id="9215" class="mj mk if jw b jx jy ka kb kd ml kh mm kl mn kp mo mp mq mr dt translated">docker ps查看集装箱id列表</li><li id="d799" class="mj mk if jw b jx ms ka mt kd mu kh mv kl mw kp mo mp mq mr dt translated">docker exec-it { container id }/bin/sh</li></ul><p id="3995" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">使用我们的别名，这就变成了:</p><ul class=""><li id="aeb7" class="mj mk if jw b jx jy ka kb kd ml kh mm kl mn kp mo mp mq mr dt translated">dkps</li><li id="836c" class="mj mk if jw b jx ms ka mt kd mu kh mv kl mw kp mo mp mq mr dt translated">dke {容器ID}</li></ul><p id="b548" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这里有一个视频例子:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mx"><img src="../Images/2ce26736b10eec2e838ae3316cd8a206.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*gVNhuMuKNeV51_WAPHwlSw.gif"/></div></div></figure></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="c939" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">有时需要重启服务。<code class="eh ks kt ku kv b">dksb</code> (docker服务反弹)命令允许我们这样做。</p><p id="6980" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">非别名方法需要使用<code class="eh ks kt ku kv b">docker service scale</code>命令:</p><p id="93f9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">$ docker服务规模test_redis=0 <br/> $ docker服务规模test_redis=1</p><p id="5624" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">使用<code class="eh ks kt ku kv b">dksb</code>，我们只需输入:</p><p id="0bb8" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">$ dksb test_redis 1</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/fc0019a0fc3e7c797a8f96f5c2d5c506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*XbPrQKObuph8hgspi3FCog.gif"/></div></div></figure></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="746d" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我们最后要看的是构建和发布docker容器的实例。虽然这个过程通常包括两个阶段的操作，即docker构建/ docker推送，但是您可能希望执行其他任务来进一步自动化这个过程。在我的例子中，我构建了托管NodeJS微服务的docker容器。我的本地构建包括检查. dockerignore文件是否存在，然后查看节点package.json文件内部以提取项目的名称和版本。然后，名称和版本用于形成docker标签。</p><p id="b291" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">下面是一个<code class="eh ks kt ku kv b">dkp</code> (docker publish)别名的样子:</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lx"><img src="../Images/df9a5dbb27511cafb5c9a09baa3a947f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTxnen9sy8C9QuBwWI90PQ.png"/></div></div></figure><p id="0a9c" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">上面的别名使用<a class="ae kq" href="https://stedolan.github.io/jq/" rel="noopener ugc nofollow" target="_blank"> jq </a>(一个命令行JSON处理器)从package.json文件中提取版本信息。</p><p id="53e2" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">使用<code class="eh ks kt ku kv b">dkp</code>只是简单地输入一个节点项目目录，键入<code class="eh ks kt ku kv b">dkp</code>,后跟docker hub存储库名称。在下面的例子中，我构建并发布了<a class="ae kq" href="https://github.com/flywheelsports/hydra-router" rel="noopener ugc nofollow" target="_blank"> HydraRouter </a> docker容器。</p><figure class="kx ky kz la fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff my"><img src="../Images/a6f808ec4de3326141da1baedbacf975.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*P4VYcqkzufYWeeahgjgI_g.gif"/></div></div></figure></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="95db" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">我希望你在这篇文章中找到了一些方便的docker别名，或者至少它启发了你使用别名来优化你的命令行工作流。因为记住— <em class="kr">没有人有时间</em> …</p><p id="d086" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这里是完整的<code class="eh ks kt ku kv b">.docker_aliases</code>脚本，包括一些我们在这篇文章中没有提到的额外命令。</p><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="lu lv l"/></div></figure><p id="86cd" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt">—</p><p id="71c6" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><em class="kr">感谢阅读！如果你喜欢你所读的，按住下面的拍手按钮，让其他人也能看到。也可以</em> <a class="ae kq" href="https://twitter.com/cjus" rel="noopener ugc nofollow" target="_blank"> <em class="kr">在Twitter上关注我</em> </a> <em class="kr">。</em></p><figure class="kx ky kz la fq hw"><div class="bz el l di"><div class="mz lv l"/></div></figure></div></div>    
</body>
</html>