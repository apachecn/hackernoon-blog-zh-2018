<html>
<head>
<title>Top-Down and Bottom-Up Composables, What’s the Difference and Which One Should You Use?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自顶向下和自底向上的Composables，有什么区别，应该使用哪一个？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/top-down-and-bottom-up-composables-whats-the-difference-and-which-one-should-you-use-db939f6acf1d?source=collection_archive---------8-----------------------#2018-07-10">https://medium.com/hackernoon/top-down-and-bottom-up-composables-whats-the-difference-and-which-one-should-you-use-db939f6acf1d?source=collection_archive---------8-----------------------#2018-07-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="14ff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">可组合令牌是一种不可替换的令牌(或唯一的数字资产)，它可以拥有其他不可替换的令牌或被其他不可替换的令牌拥有。可组合体可以组合成由所有权链接的聚合结构。</p><p id="a944" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ERC998标准是关于可组合令牌的两种不同方法。两种不同的可组合组件是<strong class="it hv">自顶向下的可组合组件</strong>和<strong class="it hv">自底向上的可组合组件</strong>。</p><p id="5053" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这两种组件<a class="ae jp" href="https://hackernoon.com/tagged/implement" rel="noopener ugc nofollow" target="_blank">都实现</a>ERC721标准(ERC721令牌也是如此)，并扩展该标准，使它们能够拥有其他ERC 721令牌或被其他ERC 721令牌拥有。它还为ERC721令牌提供了一种拥有/拥有ERC20令牌的方式。</p><p id="c753" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以想象一个拥有20个ERC721令牌的可组合体，或者一个拥有一个拥有一个可组合体的可组合体；或者任何由组件和ERC721令牌组成的所有权树。</p><p id="5be2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有两种不同的方法(自顶向下和自底向上),因为它们有不同的优缺点。这篇博客文章概述了两者的优点和缺点，这样你就能理解它们之间的区别。我希望这篇文章可以帮助你决定使用哪种composable来做你想做的事情。</p><h1 id="acb4" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">自顶向下的组件</h1><p id="c218" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">自顶向下的<a class="ae jp" href="https://hackernoon.com/tagged/composable" rel="noopener ugc nofollow" target="_blank">可组合的</a>存储关于其子令牌的信息。任何ERC721令牌都可以转移到自顶向下的可组合组件中。自顶向下的组件就像房子或容器一样“受欢迎”。你在里面放了ERC721代币。当然，您可以从其中转移ERC721令牌。自顶向下的组件本身就是ERC721令牌，因此您可以像对待常规ERC721令牌一样传递它们。想象一下，在一个容器里装满一堆单独的物品，然后把这个容器给别人。这就像将ERC721标记添加到自顶向下的可组合组件中，然后将该可组合组件转移给其他人。</p><p id="5a7b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">自上而下的优势:</strong></p><ol class=""><li id="0454" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">任何ERC721令牌都可以转移到自顶向下的可组合组件。另一种说法是，任何ERC721令牌都可以是自顶向下可组合组件的子组件。</li><li id="7740" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">很好地跟踪子令牌，因此如果可组合契约实现了枚举，那么您可以查询并获取自顶向下可组合契约的所有子契约和子令牌id。</li></ol><p id="aaab" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">自上而下的缺点:</strong></p><ol class=""><li id="7727" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">自顶向下可组合不能是常规ERC721标记的子级。另一种说法是，自顶向下可组合的所有权不能转移到常规的ERC721令牌。另一种说法是，常规的ERC721令牌不能拥有自顶向下的可组合令牌。我说“常规ERC721”标记是因为一个自顶向下可组合的<em class="lh">可以是另一个自顶向下可组合的</em>的子代。它不能是没有可组合功能的ERC721令牌的子级。</li><li id="dc1e" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">不能在常规ERC721子契约中直接调用所有者/已批准身份验证的方法。例如，您不能在子令牌的子契约中直接调用“safeTransferFrom”函数。这不会起作用，因为该函数将检查您是否是子令牌的直接所有者，并且会失败，因为自顶向下的可组合组件是子令牌的直接所有者，而不是您。因此，您需要调用自顶向下的可组合契约中的方法来调用子契约中的方法，而不是直接调用子契约中经过身份验证的方法。例如，自顶向下的可组合契约有一个名为“safeTransferChild”的方法，该方法将为您调用子契约中的“safeTransferFrom”函数。如果您希望在子契约中调用其他经过身份验证的方法，但是在自顶向下的可组合组件中没有相应的方法，那么您就不走运了。您必须将子令牌从自顶向下可组合组件中转移出来，然后直接在子契约上调用这些方法。注意，这个缺点只适用于“常规ERC721子契约”。经过身份验证的方法<em class="lh">可以直接在子可组合契约上调用</em>。</li></ol><p id="f243" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下图展示了自顶向下的组件是如何工作的:</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff li"><img src="../Images/e6cdb2eb048e313f4aa534560f0d4b60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PRnwlXftsyA5jM8OlwR6mQ.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Graphic created by <a class="ae jp" rel="noopener" href="/@abhishekchadha">Abhishek Chadha</a>.</figcaption></figure><h1 id="6c52" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">自底向上的组件</h1><p id="3f9e" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">自底向上的可组合契约存储关于父令牌的信息。每个自底向上的可组合组件“知道”它的父令牌，如果它有一个父令牌的话。与自顶向下的组件不同，自底向上的组件不存储有关子令牌的信息。</p><p id="f749" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">自底向上组件将自己作为子令牌附加到其他ERC721令牌。他们是“粘人”类型的可组合。</p><p id="e501" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">自底向上的组件将常规的ERC721令牌视为容器。例如，可以将20个自底向上的组件转移到一个常规的ERC721令牌，然后可以通过将常规的ERC721令牌转移给其他人来简单地转移所有这些组件。</p><p id="4624" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">自下而上的优势</strong></p><ol class=""><li id="9fef" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">自底向上的可组合组件可以被转移到任何ERC721令牌。另一种说法是，自底向上的可组合对象可以是常规ERC721标记的子对象。</li><li id="2008" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">可以在子自底向上可组合契约上直接调用经过身份验证的方法。</li></ol><p id="b00b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">自下而上的缺点</strong></p><ol class=""><li id="864f" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">常规ERC721标记不能是自底向上组件的子标记。我说“常规ERC721令牌”是因为自底向上组件可以是其他自底向上组件的子令牌。</li></ol><p id="9812" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我不会把自底向上的可组合枚举列为优点或缺点，因为它可能被视为两者都有。它是这样工作的:一个自底向上的契约被提供了一个父ERC721令牌，该契约返回它为该父提供的所有子令牌。这意味着要获得一个父令牌的所有子令牌，必须查询每个可能有子令牌的自底向上契约。</p><p id="260f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下图展示了自底向上的组件是如何工作的:</p><figure class="lj lk ll lm fq ln fe ff paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="fe ff li"><img src="../Images/c79e17aa0b3f0f7ddcc65de496030506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0J3T7pyW8sR0PqUxDJ75Fw.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Graphic created by <a class="ae jp" rel="noopener" href="/@abhishekchadha">Abhishek Chadha</a>.</figcaption></figure><h1 id="8ad7" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">主要差异摘要</h1><p id="e3d7" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">自顶向下和自底向上方法的主要优点和缺点是相互对立的。自顶向下组合的主要优点是自底向上组合的主要缺点，反之亦然。</p><p id="383b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这两种可组合类型的主要优点/缺点是它们处理常规ERC721令牌的方式。你可以在这里看到:</p><ol class=""><li id="6694" class="kt ku hu it b iu iv iy iz jc kv jg kw jk kx jo ky kz la lb dt translated">常规ERC721标记不能是自顶向下组件的父标记，但它们可以是自底向上组件的父标记。</li><li id="f6b4" class="kt ku hu it b iu lc iy ld jc le jg lf jk lg jo ky kz la lb dt translated">常规ERC721标记不能是自底向上组件的子标记，但它们可以是自顶向下组件的子标记。</li></ol><p id="297e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当只使用composables(没有常规的ERC721令牌)时，这两种类型的主要缺点都消失了。</p><h1 id="8a3a" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">用哪种可组合的？</h1><p id="0d73" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">如果您想要将常规ERC721令牌转换为不可替换的令牌，那么请使用自顶向下的组件。</p><p id="5e63" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想将不可替换的令牌转换成常规的ERC721令牌，那么使用自底向上的组件。</p><h1 id="1612" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">一个令牌可以同时是自顶向下和自底向上的组合吗？</h1><p id="bcda" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">是的，这意味着为同一个令牌实现两种方法的功能。</p><h1 id="2493" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">自顶向下的可组合体可以拥有自底向上的可组合体吗，反之亦然？</h1><p id="8c10" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">是的，这两种方法的当前ERC998实现可以互操作。</p><h1 id="a9fd" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">从哪里可以了解更多关于ERC998组件的信息？</h1><p id="09f2" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">阅读Matt Lockyer关于他们的博客。</p><p id="615b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://github.com/mattlockyer/composables-998" rel="noopener ugc nofollow" target="_blank">查看composables代码库中当前的实现。</a></p><p id="a447" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://eips.ethereum.org/EIPS/eip-998" rel="noopener ugc nofollow" target="_blank">查看ERC998的EIP草案，该草案基于composables的当前实现。</a>本文档解释了自顶向下和自底向上组合的技术细节。</p><p id="cbf1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在NFTy魔术师不和谐服务器中与我们聊天。</p><h1 id="2b66" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">我如何帮助ERC998标准或实施？</h1><p id="d602" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">是的，我们正在寻求帮助。<a class="ae jp" href="https://discord.gg/uxkHy3" rel="noopener ugc nofollow" target="_blank">加入discord服务器。</a></p><p id="33d2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="lh">在</em></strong><a class="ae jp" href="https://delegatecall.careers/" rel="noopener ugc nofollow" target="_blank"><strong class="it hv"><em class="lh">delegate call . careers</em></strong></a><strong class="it hv"><em class="lh">找到一份开发智能合同的工作。</em>T13】</strong></p><figure class="lj lk ll lm fq ln"><div class="bz el l di"><div class="ly lz l"/></div></figure></div></div>    
</body>
</html>