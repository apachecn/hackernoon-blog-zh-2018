<html>
<head>
<title>Modelling a Chat API using TypeScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用TypeScript建模聊天API</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/modelling-a-chat-api-using-typescript-56d36be86b10?source=collection_archive---------33-----------------------#2018-07-18">https://medium.com/hackernoon/modelling-a-chat-api-using-typescript-56d36be86b10?source=collection_archive---------33-----------------------#2018-07-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/21144e54071c46fcd4684c1d559152cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0mNCagBIs72-rsxU"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">“Hands create art on a pottery wheel” by <a class="ae jg" href="https://unsplash.com/@momentance?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">SwapnIl Dwivedi</a> on <a class="ae jg" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c53a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">清晰、干净和简洁，是我会将API与愉快和富有成效的<a class="ae jg" href="https://hackernoon.com/tagged/development" rel="noopener ugc nofollow" target="_blank">开发</a>体验联系在一起的一些形容词。</p><p id="3db2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">TypeScript提供了一个很好的特性——区分联合——可以用来构建这样的API。</p><blockquote class="kf kg kh"><p id="08bb" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">区别联合，也称为标记联合，代表一个有限的、定义明确的选择集。</p></blockquote><h2 id="5556" class="km kn hu bd ko kp kq kr ks kt ku kv kw js kx ky kz jw la lb lc ka ld le lf lg dt translated"><a class="ae jg" href="https://en.wikibooks.org/wiki/F_Sharp_Programming/Discriminated_Unions" rel="noopener ugc nofollow" target="_blank"> <em class="lh">来源</em> </a></h2><h2 id="2737" class="km kn hu bd ko kp kq kr ks kt ku kv kw js kx ky kz jw la lb lc ka ld le lf lg dt translated">在TypesScript中实现有区别的联合</h2><blockquote class="kf kg kh"><p id="b458" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">如果您有一个带有<a class="ae jg" href="https://github.com/basarat/typescript-book/blob/master/docs/types/literal-types.md" rel="noopener ugc nofollow" target="_blank"> <em class="hu">文字成员</em> </a>的类，那么您可以使用该属性来区分联合成员。</p><p id="a25f" class="jh ji ki jj b jk jl jm jn jo jp jq jr kj jt ju jv kk jx jy jz kl kb kc kd ke hn dt translated">作为一个例子，考虑一个<code class="eh li lj lk ll b">Square</code>和<code class="eh li lj lk ll b">Rectangle</code>的联合，这里我们有一个成员<code class="eh li lj lk ll b">kind</code>，它存在于两个联合成员上，并且是一个特殊的<em class="hu">文字类型</em>:</p></blockquote><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="d19d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><a class="ae jg" href="https://github.com/basarat/typescript-book/blob/master/docs/types/discriminated-unions.md" rel="noopener ugc nofollow" target="_blank"> <em class="ki">来源</em> </a></p><h2 id="e3fb" class="km kn hu bd ko kp kq kr ks kt ku kv kw js kx ky kz jw la lb lc ka ld le lf lg dt translated">设计API</h2><p id="0b2f" class="pw-post-body-paragraph jh ji hu jj b jk ls jm jn jo lt jq jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">聊天API将接收来自聊天用户的请求，并返回适当的响应。</p><p id="8025" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">聊天用户将发出以下请求:</p><ul class=""><li id="4363" class="lx ly hu jj b jk jl jo jp js lz jw ma ka mb ke mc md me mf dt translated">注册</li><li id="71d2" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">注销</li><li id="5a33" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">发送消息</li><li id="8659" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">请求通知(聊天室事件的通知请求)</li></ul><p id="ecdf" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">服务器将依次响应以下通知之一:</p><ul class=""><li id="f1bf" class="lx ly hu jj b jk jl jo jp js lz jw ma ka mb ke mc md me mf dt translated">LoggedOnUsers(可以聊天的用户列表，在登录时提供)</li><li id="097e" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">用户已加入(通知新用户已加入聊天)</li><li id="f81e" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">UserLeft(通知用户已离开聊天)</li><li id="4a56" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">消息来自</li><li id="0386" class="lx ly hu jj b jk mg jo mh js mi jw mj ka mk ke mc md me mf dt translated">什么都没有(当用户注销时，没有什么可说的)</li></ul><p id="be6a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">TypeScript中请求模型的定义如下</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="cb90" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">…对于回应也是如此</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="fddd" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，在几行代码中，我描述了聊天API需要处理的所有情况。</p><p id="1ab8" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后，我可以根据需要使用switch语句来处理每种情况。</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="lq lr l"/></div></figure><p id="9f9d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">开关中的default子句确保我们已经处理了所有可能的请求类型。</p><p id="1fcf" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果我在将来扩展API，编译器会确保我已经处理了新的情况。这是一个很棒的未来防臭虫的方法。</p><p id="ff9f" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">感谢您的阅读，如果您觉得这篇文章有帮助，请点击👏按钮并共享文章，以便其他人可以轻松找到它。干杯。</p><figure class="lm ln lo lp fq iv"><div class="bz el l di"><div class="ml lr l"/></div></figure></div></div>    
</body>
</html>