<html>
<head>
<title>A brief intro to Bitcoin Schnorr Multi-signatures</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币Schnorr多重签名简介</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-brief-intro-to-bitcoin-schnorr-multi-signatures-b9ef052374c5?source=collection_archive---------11-----------------------#2018-07-19">https://medium.com/hackernoon/a-brief-intro-to-bitcoin-schnorr-multi-signatures-b9ef052374c5?source=collection_archive---------11-----------------------#2018-07-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="6ea7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">TL；DR: Schnorr签名是比特币里最火的学科；我们发布了一个Rust MultiSig schn orr的开源实现。</em></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/c251c6968954e756775f564066a6a899.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5LFAuDkzxxDeSQDrf_2wMg.png"/></div></div></figure><p id="1cfb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">似乎Schnorr签名在加密货币社区风靡一时，并被宣布为自切片面包(或至少是<em class="jp"> SegWit </em>)以来最大的事情。</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="kc kd l"/></div></figure><p id="8e1c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这篇博文中，我们将解释Schnorr签名的主要优势之一:它对多重签名(MultiSig)的本地支持。由于MultiSig是用户保护其帐户免受其私钥被盗的最重要机制之一，鉴于此类黑客攻击的数量之多，很明显为什么这个主题会受到加密货币社区的如此关注。</p><p id="d030" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将深入浅出地描述Schnorr MultiSig背后的数学原理。除此之外，我们将分享一个Schnorr MultiSig的开源实现。</p><h1 id="7cdf" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">MultiSig</h1><blockquote class="lc ld le"><p id="486a" class="ir is jp it b iu iv iw ix iy iz ja jb lf jd je jf lg jh ji jj lh jl jm jn jo hn dt translated">“多重签名(通常称为<strong class="it hv"> multisig </strong>)是一种用于为加密货币交易增加额外安全性的技术形式。多签名地址要求另一个或多个用户在交易上签名，然后才能在区块链上广播。”<a class="ae li" href="https://en.wikipedia.org/wiki/Multisignature" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Multisignature</a></p></blockquote><p id="2baa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">目前，大多数区块链使用实际的多重签名和一些脚本或智能契约来实现这种多重锁定机制，以验证所有内容都被签名。然而，这种设计有一些缺点:</p><ul class=""><li id="c1b0" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo lo lp lq lr dt translated"><strong class="it hv">安全性</strong>:脚本容易出错。在<em class="jp">以太坊</em>中，奇偶校验的MultiSig联系人遭遇<a class="ae li" href="https://www.coindesk.com/30-million-ether-reported-stolen-parity-wallet-breach/" rel="noopener ugc nofollow" target="_blank">两个</a> <a class="ae li" href="https://motherboard.vice.com/en_us/article/ywbqmg/parity-multi-signature-wallet-vulnerability-300-million-hard-fork" rel="noopener ugc nofollow" target="_blank">不同</a>的漏洞，造成超过1亿美元的损失。</li><li id="7a54" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated"><strong class="it hv">效率</strong>:拥有多个显式签名增加了交易的规模和与之相关的费用。</li><li id="1f40" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo lo lp lq lr dt translated"><strong class="it hv">隐私</strong>:明确的多重签名泄露了这个地址是多重签名的事实，并可能引起不必要的关注。</li></ul><p id="e972" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Schnorr签名(以Claus Schnorr 命名，他的数学工作为该签名奠定了基础)解决了所有这些问题，因为它们允许将多个签名及其对应的密钥聚合到单个签名中。因此，Schnorr MultiSig交易与常规(“MonoSig”)交易无法区分，因此不会影响隐私或交易规模和费用。多重签名验证是在加密层而不是在脚本层完成的，这消除了安全问题脚本错误。</p><p id="d534" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Schnorr签名和比特币当前签名(ECDSA)的主要区别在于，Schnorr签名是<strong class="it hv"> <em class="jp">线性</em> </strong> <em class="jp">，</em>而ECDSA签名不是。</p><p id="820d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> <em class="jp">线性</em> </strong>与我们的目的最相关的属性是，当您将两个(或更多)Schnorr签名加在一起时，结果也是一个有效的Schnorr签名！</p><p id="f9ca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当将两条直线方程加在一起，<strong class="it hv"> <em class="jp"> y1=a1*X + b1，y2=a2*X + b2 </em> </strong> <em class="jp"> </em>结果是另一条直线方程<strong class="it hv"><em class="jp">y3 = y1+y2 =(a1+a2)* X+(B1+B2)</em></strong>，其中新的斜率<strong class="it hv"> <em class="jp"> a3= (a1 + a2) </em> </strong>而新的y轴截距是<strong class="it hv"><em class="jp">B3 =(B1+1)这对于Schnorr签名实际上是相同的。</em></strong></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lx"><img src="../Images/3ba6bd160901f092e02dd901e91fd0c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xHM_oIWUmAui1OfB9KVI8g.png"/></div></div><figcaption class="ly lz fg fe ff ma mb bd b be z ek">Adding the red and blue lines creates the green line (created with <a class="ae li" href="https://www.desmos.com/" rel="noopener ugc nofollow" target="_blank">Desmos</a>)</figcaption></figure><p id="eaa1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将用斯捷潘的<a class="ae li" rel="noopener" href="/@snigirev.stepan/how-schnorr-signatures-may-improve-bitcoin-91655bcb4744">优岗</a>公式来解释:</p><p id="669e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Schnorr签名使用一个点<strong class="it hv"> <em class="jp"> R </em> </strong>和一个标量<strong class="it hv"> <em class="jp"> s </em> </strong>。与ECDSA类似，<strong class="it hv"> <em class="jp"> R </em> </strong>是椭圆曲线上的随机点(<strong class="it hv"> <em class="jp"> R = k×G </em> </strong>)。签名的第二部分计算略有不同:<strong class="it hv"> <em class="jp"> s = k + hash(P，r，m) ⋅ x </em> </strong>。这里<strong class="it hv"> <em class="jp"> x </em> </strong>是你的私钥，<strong class="it hv"> <em class="jp"> P = x×G </em> </strong>是你的公钥，<strong class="it hv"> <em class="jp"> m </em> </strong>是消息。然后可以通过检查<strong class="it hv"> <em class="jp"> s×G = R + hash(P，R，m)×P </em> </strong>来验证这个签名。</p><p id="a65a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在基本的MultiSig场景中，我们有两方，每一方都有自己的密钥对。</p><p id="5ff5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">利用Schnorr签名，我们可以使用一对私钥<strong class="it hv"> <em class="jp"> (x1，x2) </em> </strong>并生成对应于共享公钥<strong class="it hv"><em class="jp">P = P1+P2 = x1×G+x2×G</em></strong>的共享签名。为了生成这个签名，每一方需要选择一个随机数<strong class="it hv"> <em class="jp"> (k1，k2) </em> </strong>，生成一个随机点<strong class="it hv"> <em class="jp"> Ri=ki×G </em> </strong>，将它们加起来计算一个公共的<strong class="it hv"> <em class="jp"> hash(P，R1+R2，m) </em> </strong>，然后从每一方得到<strong class="it hv"><em class="jp">【S1</em></strong>和<strong class="it hv"> <em class="jp"> s2 </em> </strong>(通过将这些签名相加，并使用一对<strong class="it hv"> <em class="jp"> (R，s) = (R1+R2，s1+s2) </em> </strong>作为共享公钥<strong class="it hv"> <em class="jp"> P </em> </strong>的(多)签名。</p><p id="ed08" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">提醒一句:上面描述的算法太天真了，它需要被强化以承受真实世界的攻击。</p><p id="e430" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">幸运的是，一些密码学专家做到了这一点。关于这个问题的最新论文之一是由Blockstream团队领导的一项工作，名为“<a class="ae li" href="https://eprint.iacr.org/2018/068.pdf" rel="noopener ugc nofollow" target="_blank">简单的Schnorr多重签名及其对比特币的应用</a>”。</p><p id="9c50" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这项工作的作者之一Pieter Wuillie创建了一个比特币改进提案(BIP)，<a class="ae li" href="https://github.com/sipa/bips/blob/bip-schnorr/bip-schnorr.mediawiki" rel="noopener ugc nofollow" target="_blank">【bip-schnorr</a>，这是一个关于如何标准化schn orr签名作为比特币一部分的相当技术性的提案。</p><h1 id="21f4" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">Schnorr MultiSig开源项目</h1><p id="527a" class="pw-post-body-paragraph ir is hu it b iu mc iw ix iy md ja jb jc me je jf jg mf ji jj jk mg jm jn jo hn dt translated">为了支持社区并鼓励采用Schnorr MultiSig，我们(主要是<a class="mh mi gr" href="https://medium.com/u/366ee75f554?source=post_page-----b9ef052374c5--------------------------------" rel="noopener" target="_blank">Omer Shlomovits</a>&amp;<a class="mh mi gr" href="https://medium.com/u/75194a16b25a?source=post_page-----b9ef052374c5--------------------------------" rel="noopener" target="_blank">Gary Ben attar</a>)基于上述文章和BIP创建了一个schn orr multi SIG试验项目。</p><div class="mj mk fm fo ml mm"><a href="https://github.com/KZen-networks/multisig-schnorr" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab ej"><div class="mo ab mp cl cj mq"><h2 class="bd hv fv z el mr eo ep ms er et ht dt translated">KZen-networks/multisig-schnorr</h2><div class="mt l"><h3 class="bd b fv z el mr eo ep ms er et ek translated">这个项目是椭圆曲线上多方schnorr签名的Rust实现。</h3></div><div class="mu l"><p class="bd b gc z el mr eo ep ms er et ek translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na ka mm"/></div></div></a></div><p id="cb3f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了性能和安全性，该项目在Rust中实现。目前支持比特币的椭圆曲线(<em class="jp"> secp256k1 </em>)，可用于:</p><ol class=""><li id="8f34" class="lj lk hu it b iu iv iy iz jc ll jg lm jk ln jo nb lp lq lr dt translated">密钥生成</li><li id="2740" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo nb lp lq lr dt translated">基于BIP规范的简单schnorr签名。</li><li id="6724" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo nb lp lq lr dt translated">为n个参与者创建多重签名。</li><li id="e22f" class="lj lk hu it b iu ls iy lt jc lu jg lv jk lw jo nb lp lq lr dt translated">基于BIP规范验证签名，该规范对于一个或多个签名者是相同的。</li></ol><p id="0e84" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以上所有的例子都可以在<a class="ae li" href="https://github.com/KZen-networks/multisig-schnorr/blob/master/src/protocols/multi_sig/test.rs" rel="noopener ugc nofollow" target="_blank">测试</a>文件中找到。我们还包括了一个<a class="ae li" href="https://github.com/KZen-networks/multisig-schnorr/wiki/Multi-party-Schnorr-Signatures" rel="noopener ugc nofollow" target="_blank">维基页面</a>，以一步一步的方式解释协议。</p><p id="457e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们希望你能尝试这个项目，甚至考虑为它做出贡献。毕竟，它可以通过帮助用户更好地保护他们账户的密钥来帮助升级加密货币的安全性，这是加密货币的最大问题之一，并限制了它们的广泛采用。</p></div></div>    
</body>
</html>