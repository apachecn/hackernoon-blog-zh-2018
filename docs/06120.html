<html>
<head>
<title>Introducing the First Natural Language to SQL API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向SQL API介绍第一种自然语言</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/introducing-the-first-natural-language-to-sql-api-8429229301ce?source=collection_archive---------1-----------------------#2018-07-24">https://medium.com/hackernoon/introducing-the-first-natural-language-to-sql-api-8429229301ce?source=collection_archive---------1-----------------------#2018-07-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="9f1c" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">和你的数据说话！</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/8d9c9ad7a9230f9d73a46e317b7f770e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O0WiQc9hTM8vvL4jLc4FoQ.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">You can view the API documentation here: <a class="ae jz" href="http://docs.dhignite.com/" rel="noopener ugc nofollow" target="_blank">http://docs.dhignite.com/</a></figcaption></figure><p id="7bab" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">如果不运行复杂的SQL脚本，而是简单地问数据库一个问题，会怎么样？我昨天的销售额是多少？6月份我最畅销的产品是什么？</p><p id="3f45" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">随着ThoughtSpot、Salesforce和Tableau等公司都在开发类似的技术，这种自然搜索功能在过去一年变得越来越普遍。这种“数据民主化”的趋势迫使我们以新的方式利用现有技术。</p><p id="023f" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我们的新期望是，普通最终用户应该能够访问数据，而不是局限于数据分析师，或者被迫通过复杂的排队系统，在这个系统中，时间和便利往往主宰一切。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff kw"><img src="../Images/ff63863e0f25e267d938af9b6fa6f4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lSN3RrUbMhpazrSvMJthFg.png"/></div></div></figure><p id="dd30" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">除了仪表板和分析师之外，数据应该是可访问的。这就是为什么我们开发了SQL API和接口的自然语言。</p><p id="bf0e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我们利用自然语言处理和机器学习的最新技术将问题转换成结构化的SQL查询。</p><p id="5025" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">下面你可以看到我们已经利用API作为聊天界面的一部分。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff kx"><img src="../Images/3965c7efbbeb7f809f3696556df9528c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*2DCL1NggMmdZiV_SrwxJ1Q.png"/></div></figure><p id="ba50" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">您可以看到用户提出了一个问题，引擎将问题与数据库元数据进行对比，然后返回一个答案。您还可以看到作为响应的一部分而生成的SQL。</p><p id="da3c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我们现在准备公开这个API，这样其他人也可以在他们自己的产品中构建类似的自然搜索功能。不再需要生成报告的表单，而是使用自然搜索让用户能够提出新的问题。</p><p id="ed9e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">您可以在这里查看API文档:</strong><a class="ae jz" href="http://docs.dhignite.com/" rel="noopener ugc nofollow" target="_blank"><strong class="kc hv"/></a></p><p id="c1dc" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">基于自然语言问题发送SQL查询请求很简单。</p><pre class="jk jl jm jn fq ky kz la lb aw lc dt"><span id="1cec" class="ld le hu kz b fv lf lg l lh li">{</span><span id="df3e" class="ld le hu kz b fv lj lg l lh li">"token": "1242ab77d1202aff87bd0b9e96e5a436",</span><span id="9f03" class="ld le hu kz b fv lj lg l lh li">"usertoken": ["1242ab77d1202aff87bd0b9e96e5a436"],</span><span id="e4a1" class="ld le hu kz b fv lj lg l lh li">"database": "foodmart_demo",</span><span id="1712" class="ld le hu kz b fv lj lg l lh li">"params": "total sales"</span><span id="5f67" class="ld le hu kz b fv lj lg l lh li">}</span></pre><p id="0fe9" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">此请求将生成以下响应；首先，它评估“foodmart_demo”数据库元数据，然后生成SQL响应。</p><pre class="jk jl jm jn fq ky kz la lb aw lc dt"><span id="304c" class="ld le hu kz b fv lf lg l lh li">{<br/>  "status": "OK",<br/>  "data": {<br/>    "trash_list": []<br/>  },<br/>  "result": "<strong class="kz hv">SELECT SUM(sales_fact.store_sales) as `sum.sales_fact.store_sales`\nFROM sales_fact\n </strong>",<br/>  "method": "server.getSql"<br/>}</span></pre></div><div class="ab cl lk ll hc lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hn ho hp hq hr"><h1 id="45ea" class="lr le hu bd ls lt lu lv lw lx ly lz ma ja mb jb mc jd md je me jg mf jh mg mh dt translated">用户凭据</h1><p id="ed11" class="pw-post-body-paragraph ka kb hu kc b kd mi iv kf kg mj iy ki kj mk kl km kn ml kp kq kr mm kt ku kv hn dt translated">在API v1中，我们使用简单的基于令牌的认证和授权。</p><p id="4981" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">要访问引擎API，您需要主令牌和附加用户组令牌。如果您想要创建几个具有不同访问级别的用户组，您将需要额外的令牌。默认情况下，管理组存在，并且管理令牌等于主令牌。每个令牌都是一个字符串(32字节长)，例如“1242 ab 77d 1202 af 87 BD 0 b 9 e 96 e5a 436”。如果你是我们的客户，那么你已经有这样一个令牌。否则，使用字符串“demo”代替标记。在这种情况下，您只能对“foodmart_demo”数据库配置进行只读访问。</p><h1 id="3836" class="lr le hu bd ls lt mn lv lw lx mo lz ma ja mp jb mc jd mq je me jg mr jh mg mh dt translated">引擎服务器端点</h1><p id="ce6f" class="pw-post-body-paragraph ka kb hu kc b kd mi iv kf kg mj iy ki kj mk kl km kn ml kp kq kr mm kt ku kv hn dt translated">要访问引擎API，您需要引擎服务器端点URL。对大多数用户来说是:</p><p id="f4a6" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae jz" href="https://msg.dhignite.com/api/1.1/nlq" rel="noopener ugc nofollow" target="_blank">https://msg.dhignite.com/api/1.1/nlq</a></p><p id="e511" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">1.1是API版本号。</p><h1 id="84ac" class="lr le hu bd ls lt mn lv lw lx mo lz ma ja mp jb mc jd mq je me jg mr jh mg mh dt translated">数据库配置</h1><p id="5306" class="pw-post-body-paragraph ka kb hu kc b kd mi iv kf kg mj iy ki kj mk kl km kn ml kp kq kr mm kt ku kv hn dt translated">为了响应用户请求，服务器需要有数据库元数据。它是基于JSON的文件。“演示”用户可以访问“foodmart_demo”配置(通常，另一个用户也可以访问该配置)。您需要将数据库配置文件放在。Msg云处理服务器(我们会为您完成)。您可以放置完成的文件，否则管理员会为您创建一个“空”文件，您可以使用API或站点来更改它。在本手册中，所有示例都将使用“foodmart_demo”数据库配置。</p><h1 id="3301" class="lr le hu bd ls lt mn lv lw lx mo lz ma ja mp jb mc jd mq je me jg mr jh mg mh dt translated">API运行演示</h1><p id="9dea" class="pw-post-body-paragraph ka kb hu kc b kd mi iv kf kg mj iy ki kj mk kl km kn ml kp kq kr mm kt ku kv hn dt translated">你可以注册一个模拟账户，这样你就可以在这里使用API作为聊天界面的一部分:<a class="ae jz" href="http://docs.dhignite.com/demo/" rel="noopener ugc nofollow" target="_blank">http://docs.dhignite.com/demo/</a></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ms"><img src="../Images/dd1f5bb62fa19ce0094ed55407db3c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZgCvi-uxC19nh58GSVyRzQ.png"/></div></div></figure><p id="5d08" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">如有任何关于系统的问题，请直接联系或通过网站联系。</p></div></div>    
</body>
</html>