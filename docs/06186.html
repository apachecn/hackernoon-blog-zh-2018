<html>
<head>
<title>Relay modern: Testing queries.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">中继现代:测试查询。</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/relay-modern-testing-queries-8abf400194bc?source=collection_archive---------38-----------------------#2018-07-25">https://medium.com/hackernoon/relay-modern-testing-queries-8abf400194bc?source=collection_archive---------38-----------------------#2018-07-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/bf5089a68ea5a15d1fd87b8371c3c046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EkOVyyttD4g9PBZUyImChg.png"/></div></div></figure><p id="1ac7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在以前的故事中，我分享了我对如何测试<a class="ae ka" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> react </a>组件和graphql的想法，现在轮到Relay了。<a class="ae ka" href="https://hackernoon.com/tagged/relay" rel="noopener ugc nofollow" target="_blank"> Relay </a>是来自脸书的一位伟大的数据管理者。你可以在我以前的故事中找到一些相关信息。我们开始吧。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="6f9a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">角落案例</strong></p><p id="dda3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用relay的主要问题是，您使用的任何查询都可能随时间而改变，除非您尝试编译Relay，否则您不会发现这一点。如果您不编译并尝试运行一个获取字段的查询，而该字段在服务器上已不存在，您将会得到一个错误消息:“无法查询类型为“用户”的字段“名字”。</p><p id="3ea0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我敢打赌，您不想这样，我也不想。这就是为什么我决定测试中继查询。中继查询看起来与graphql查询完全一样。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="a68b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">解决方案</strong></p><p id="18ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们需要针对graphql模式执行一个查询，以了解该查询是否一切正常。检查的唯一方法是使用relay-test-utils库中的parseGraphQLText。我们需要用一个模式和一个查询文本来调用这个函数。如果抛出一个错误，这意味着查询有一些问题，否则这个函数只是保持沉默。</p><figure class="ki kj kk kl fq iv"><div class="bz el l di"><div class="km kn l"/></div></figure><p id="3e7e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">仅此而已。非常简单明了！如果你喜欢这个故事喜欢并分享出来:)件。</p><figure class="ki kj kk kl fq iv"><div class="bz el l di"><div class="ko kn l"/></div></figure></div></div>    
</body>
</html>