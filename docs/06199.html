<html>
<head>
<title>Getting Started with Siri Shortcuts in iOS 12 Using Intents</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用意图在iOS 12中开始使用Siri快捷方式</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/getting-started-with-siri-shortcuts-in-ios-12-using-intents-8206099aa5ce?source=collection_archive---------3-----------------------#2018-07-26">https://medium.com/hackernoon/getting-started-with-siri-shortcuts-in-ios-12-using-intents-8206099aa5ce?source=collection_archive---------3-----------------------#2018-07-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/3fe2ef7964b99eb436b7a8241afb5846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vjpG48fg1X877E4y67NJCQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://cdn-images-1.medium.com/max/2000/1*bhonbY4jHhFNGXzBkodmbw.png" rel="noopener">https://cdn-images-1.medium.com/max/2000/1*bhonbY4jHhFNGXzBkodmbw.png</a></figcaption></figure><p id="2e8b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在我的上一篇文章中，我谈到了如何使用NSUserActivity快速创建Siri快捷方式。当你想通过<a class="ae jg" href="https://hackernoon.com/tagged/shortcuts" rel="noopener ugc nofollow" target="_blank">快捷方式</a>打开你的应用程序时，NSUserActivity非常有用。在更高级的场景中，如果你想更好地控制快捷键体验，建议你使用<a class="ae jg" href="https://hackernoon.com/tagged/intents" rel="noopener ugc nofollow" target="_blank">意图</a>。</p><p id="53d2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在这篇文章中，我将向你展示如何开始使用意图，以及如何设置意图定义文件作为Siri快捷方式的蓝图。</p><h1 id="3865" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">意图是什么？</h1><p id="54b3" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">Intents允许你更好的控制快捷键。这意味着Siri不会说</p><p id="9d8b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">"<em class="li">您的咖啡已经点好了，它将会到达一个地点</em>"</p><p id="6b18" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Siri可以说一些更有意义的话，比如</p><p id="b61c" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">"<em class="li">您的</em> <strong class="jj hv"> <em class="li">卡布奇诺</em> </strong> <em class="li">已经订购，将于</em> <strong class="jj hv"> <em class="li"> 10 </em> </strong> <em class="li">分钟</em>到达您的 <strong class="jj hv"> <em class="li">办公室</em> </strong> <em class="li"/></p><p id="bbf3" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Intents还可以用于创建自定义响应，甚至自定义用户界面，允许用户甚至不用打开应用程序就可以下单。现在不要太担心自定义用户界面，我会在下一篇文章中介绍。</p><h1 id="a714" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">定义你的意图:</h1><p id="13e2" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">意图在意图定义文件中定义。向您的项目添加一个新文件，并在搜索栏中搜索“intents”。选择如下图所示的“<strong class="jj hv"> SiriKit意图定义文件</strong>”:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lj"><img src="../Images/648fcf88034dcd1bfa4f308a521edb03.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1KKBhqMtUyX8NBUs9fyLug.png"/></div></div></figure><p id="a2af" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">默认情况下，Intents文件为空。单击底部的“+”号，添加新的意向。将意向从其默认名称重命名为“<strong class="jj hv"> OrderCoffee </strong>”。</p><p id="6ee8" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">意图定义文件分为多个部分。让我们从顶部的“<strong class="jj hv">自定义意图</strong>”部分开始。您可以在这里定义意图、描述、类别和默认图像的名称。</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lo"><img src="../Images/b382a9908373ecde3a9840567ebb0b86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e2CA0eeebK9ciX5rJ1b7JQ.png"/></div></div></figure><p id="0e74" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因为，我们的应用程序负责订购咖啡，这就是为什么我们选择类别为“<strong class="jj hv">订单</strong>”。选中确认复选标记，表示需要用户确认才能执行此意图。</p><p id="500a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">接下来，我们将为您的意图设置参数。参数是可以传递给意图的附加数据。配合Siri语音快捷键使用时，Siri也会使用参数。</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lp"><img src="../Images/4b87a5b7697792a52627581bc60e1918.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KWkV9Z-j_5P3D6F2s-hDow.png"/></div></div></figure><p id="1c34" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们使用两个参数<strong class="jj hv"> coffeeName </strong>和<strong class="jj hv"> deliveryLocation </strong>。需要注意的一件重要事情是，deliveryLocation的类型是Location，而不是String。这意味着我们甚至可以用它来计算预计到达时间。</p><p id="8ca9" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="li">你也可以使用你的自定义类作为参数。在这些情况下，参数类型将是自定义的。</em></p><p id="f296" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，我们将设置“<strong class="jj hv">快捷方式类型</strong>”。快捷方式类型允许Siri了解更多关于您的快捷方式行为的信息。快捷方式类型实际上取决于应用程序，应该以一种有意义的方式来定义。在我们的应用程序中，我们定义了两种快捷方式类型，这样Siri就可以学习咖啡和位置可用时以及位置不可用时的行为。</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lq"><img src="../Images/f083c4a673e6b6df8476a0b90fd8b1a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CwQq93vyC2vaVigXTRHUbA.png"/></div></div></figure><p id="2971" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">继续构建您的应用程序。在后台，Xcode将查看Intents文件，并创建一个相应的Swift类"<strong class="jj hv">ordercefecoffeintent</strong>"。在下一节，我们将学习如何捐赠我们的意图。</p><h1 id="e197" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">捐赠意向</h1><p id="e8b7" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">最后，捐献我们意愿的时候到了。我们首先创建一个placemark实例，它表示咖啡需要送到哪里。这可以通过使用CLLocation和CLPlacemark类来实现，如下所示:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lr ls l"/></div></figure><p id="1cbc" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">接下来，我们将创建一个由Intents定义文件自动生成的<strong class="jj hv"> OrderCoffeeIntent </strong>类的实例。</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lr ls l"/></div></figure><p id="df0a" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">最后，我们将使用INInteraction实例贡献我们的意图，如下所示:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lr ls l"/></div></figure><p id="751d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">就是这样！</p><p id="bc56" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">接下来运行应用程序并捐赠您的意图。在你捐赠了快捷方式后，你应该可以在“<strong class="jj hv"> Siri应用建议</strong>”下看到你的捐赠，如下所示。</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff lt"><img src="../Images/955c9f3d277ca86be3df8b41bd6727a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*yzlgQZhxJ9SytN9lYZkaHQ.png"/></div></figure><p id="3a7b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不错！</p><p id="50b6" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在下一篇文章中，我们将通过为您的快捷方式实现一个自定义用户界面来将我们的应用程序提升到一个新的水平。这将允许我们甚至不用打开应用程序就可以订购咖啡。</p><h1 id="9a2d" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">掌握iOS的Siri快捷键</h1><p id="dc62" class="pw-post-body-paragraph jh ji hu jj b jk ld jm jn jo le jq jr js lf ju jv jw lg jy jz ka lh kc kd ke hn dt translated">如果你喜欢这篇文章，并想了解更多关于Siri快捷方式的知识，那么请查看我的3个多小时Udemy课程“<a class="ae jg" href="https://www.udemy.com/mastering-siri-shortcuts-for-ios/?couponCode=SIRIFORMED" rel="noopener ugc nofollow" target="_blank"> <strong class="jj hv">在iOS中掌握Siri快捷方式</strong> </a>”。该课程更详细地介绍了如何使用NSUserActivity、Intents、自定义响应、自定义用户界面等创建Siri快捷方式。</p><div class="lu lv fm fo lw lx"><a href="https://www.udemy.com/mastering-siri-shortcuts-for-ios/?couponCode=SIRIFORMED" rel="noopener  ugc nofollow" target="_blank"><div class="ly ab ej"><div class="lz ab ma cl cj mb"><h2 class="bd hv fv z el mc eo ep md er et ht dt translated">在iOS | Udemy中掌握Siri快捷键</h2><div class="me l"><h3 class="bd b fv z el mc eo ep md er et ek translated">用快捷方式简化你经常做的事情</h3></div><div class="mf l"><p class="bd b gc z el mc eo ep md er et ek translated">www.udemy.com</p></div></div><div class="mg l"><div class="mh l mi mj mk mg ml ja lx"/></div></div></a></div><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="mm ls l"/></div></figure></div></div>    
</body>
</html>