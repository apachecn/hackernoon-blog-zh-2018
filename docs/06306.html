<html>
<head>
<title>Easily Build a Stock Trading Bot Using Broker API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Broker API轻松构建股票交易机器人</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/easily-build-a-stock-trading-bot-using-broker-api-6bfbdc8d48c9?source=collection_archive---------8-----------------------#2018-07-30">https://medium.com/hackernoon/easily-build-a-stock-trading-bot-using-broker-api-6bfbdc8d48c9?source=collection_archive---------8-----------------------#2018-07-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/fb6020b67bbc18fcf4edb585c655ea91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NTVjSbn8gC3L58_J1-w_DQ.png"/></div></div></figure><h1 id="b37d" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">视觉策略开发</h1><p id="38aa" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated"><a class="ae ky" href="https://hackernoon.com/tagged/visual-strategy-creation" rel="noopener ugc nofollow" target="_blank">视觉策略创建</a>是快速高效开发的重要组成部分，因为它允许您通过观察信号如何随着市场变化而发展和变化，来轻松调试和调整想法。</p><p id="3c50" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">我发现Python是这种类型的数据科学的好语言，因为它的语法容易理解，并且有大量的工具和库可以帮助您进行开发。最重要的是，<a class="ae ky" href="https://github.com/alpacahq/alpaca-trade-api-python" rel="noopener ugc nofollow" target="_blank">羊驼Python API </a>为我们提供了一种简单的方式来集成市场数据，而无需实施新的<a class="ae ky" href="https://hackernoon.com/tagged/api" rel="noopener ugc nofollow" target="_blank"> API </a>包装器*。</p><p id="32f9" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated"><strong class="kc hv"><em class="le">*免责声明:截至今日(2018年7月27日)，</em> </strong> <a class="ae ky" href="https://docs.alpaca.markets/" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv"> <em class="le">羊驼交易API </em> </strong> </a> <strong class="kc hv"> <em class="le">只能由在羊驼证券开户的受邀beta用户使用。</em>T19】</strong></p><div class="lf lg fm fo lh li"><a href="https://github.com/alpacahq/alpaca-trade-api-python" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab ej"><div class="lk ab ll cl cj lm"><h2 class="bd hv fv z el ln eo ep lo er et ht dt translated">羊驼HQ/羊驼-贸易-api-python</h2><div class="lp l"><h3 class="bd b fv z el ln eo ep lo er et ek translated">羊驼贸易api的python客户端</h3></div><div class="lq l"><p class="bd b gc z el ln eo ep lo er et ek translated">github.com</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw ja li"/></div></div></a></div><p id="1aae" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">对于数据处理和绘图，我推荐使用<a class="ae ky" href="https://mrjbq7.github.io/ta-lib/" rel="noopener ugc nofollow" target="_blank"> TA-Lib </a>和<a class="ae ky" href="https://matplotlib.org/" rel="noopener ugc nofollow" target="_blank"> Matplotlib </a>。Ta-Lib提供了一个很好的库来计算常见的市场指标，这样你就不用自己重新实现它们了；而matplotlib是一个简单而强大的绘图工具，可以很好地服务于所有类型的数据可视化。</p><p id="9773" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">下面是我整理的一个示例框架脚本的代码片段(完整的脚本在本节末尾)。</p><figure class="ly lz ma mb fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/a125f2366d8f791170b670f5df88f02d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MSKN4W2Iq4aDfd1x_ZAivA.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">(Code Snippet of an example trade visualizer script I put together— full script at end of this section)</figcaption></figure><p id="62ac" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">该脚本针对几个不同的交易符号添加了一个简单的移动平均交叉策略，以提供一个在现场交易中如何公平的小样本。这允许对新策略的信号进行第一次健全性检查。一旦一个策略通过了视觉检查，你就可以通过回溯测试工具来运行它，比如在“<a class="ae ky" href="https://hackernoon.com/algo-trading-for-dummies-building-a-custom-back-tester-part-3-1cc1318987e3" rel="noopener ugc nofollow" target="_blank">模拟算法交易</a>”系列中讨论的那种。</p><div class="lf lg fm fo lh li"><a href="https://hackernoon.com/algo-trading-for-dummies-building-a-custom-back-tester-part-3-1cc1318987e3" rel="noopener  ugc nofollow" target="_blank"><div class="lj ab ej"><div class="lk ab ll cl cj lm"><h2 class="bd hv fv z el ln eo ep lo er et ht dt translated">模拟算法交易——构建一个定制的回溯测试器(第三部分)</h2><div class="lp l"><h3 class="bd b fv z el ln eo ep lo er et ek translated">自定义回溯测试和订单处理</h3></div><div class="lq l"><p class="bd b gc z el ln eo ep lo er et ek translated">hackernoon.com</p></div></div><div class="lr l"><div class="mg l lt lu lv lr lw ja li"/></div></div></a></div><p id="2a8a" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">你甚至可能希望在每笔模拟交易中添加可视标记，对于高级交易策略，还要添加产生信号的指标。这使得分析信号集的弱点变得更加容易，这样您就可以调整它的参数。</p><figure class="ly lz ma mb fq iv"><div class="bz el l di"><div class="mh mi l"/></div></figure><h1 id="be25" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">简单交易机器人</h1><p id="ae70" class="pw-post-body-paragraph ka kb hu kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx hn dt translated">一旦你通过了回溯测试阶段，你就需要一个简单的交易框架来整合你的策略进行实时测试。然后可以在纸上交易账户上运行，根据实时数据测试信号。</p><p id="e305" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">这是开发过程中的重要一步，因为它测试了策略是否与其数据集过度匹配。例如，可以很容易地调整策略，在回溯测试期间完美地交易特定的符号。然而，这不太可能很好地推广到其他市场或不同的时间段——导致无效的信号和损失。</p><p id="dc4c" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">因此，在用真实的交易账户向他们投资之前，你需要一个简单的方法来测试你的策略。这既是为了测试策略，也是为了测试实现，因为如果不加检查，代码中的一个小错误就足以毁掉一个帐户。</p><p id="e5b5" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">这是另一个交易机器人的例子片段，它实现了移动平均线交叉策略(完整的脚本在本节末尾)。</p><figure class="ly lz ma mb fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/72d1c3bce047313e12e1a0c55345e8d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pHSKMnmkofigCXH14L3tfw.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">(Code Snippet of a trading bot which implements the moving average cross strategy — full script at end of this section)</figcaption></figure><p id="ae09" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">要使它成为一个完整的交易机器人，你可以选择给代码本身添加一个定时循环，或者让整个脚本定期运行。后者通常是更好的选择，因为如果交易机器人是一个自包含循环，导致意外崩溃的异常将完全停止交易机器人。而在as中，计划任务没有这样的问题，因为每个轮询步骤都是脚本的一个单独实例。</p><p id="12b1" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">除此之外，您可能希望实现一个日志记录系统，这样您就可以轻松地监控bot并在它运行时识别任何bug。这可以通过在每个过程结束时添加一个函数来编写一个包含任何相关信息的文本文件来实现。</p><p id="3ebf" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">一旦你有了一个可行的策略，羊驼API应该可以很容易地将你的交易机器人扩展成一个完整的生产系统，让你可以快速开始交易。</p><figure class="ly lz ma mb fq iv"><div class="bz el l di"><div class="mh mi l"/></div></figure><p id="32fb" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">马修·特威德</p><figure class="ly lz ma mb fq iv"><div class="bz el l di"><div class="mk mi l"/></div></figure></div><div class="ab cl ml mm hc mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hn ho hp hq hr"><figure class="ly lz ma mb fq iv fe ff paragraph-image"><a href="https://medium.com/automation-generation"><div class="fe ff ms"><img src="../Images/4d7d212ef68dd071daeaae0916d72f65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JgwdHnaQXAnW0LtrVSpdMA.png"/></div></a></figure><h2 id="0a5c" class="mt jd hu bd je mu mv mw ji mx my mz jm kl na nb jq kp nc nd ju kt ne nf jy ng dt translated">请关注<a class="ae ky" rel="noopener" href="/@alpacahq">羊驼</a>和<a class="ae ky" href="https://medium.com/automation-generation" rel="noopener">自动化世代</a>关于金融市场、算法交易、技术的新帖子。</h2><h2 id="175e" class="mt jd hu bd je mu mv mw ji mx my mz jm kl na nb jq kp nc nd ju kt ne nf jy ng dt translated">你可以找到我们<a class="ae ky" href="https://twitter.com/AlpacaHQ" rel="noopener ugc nofollow" target="_blank">@羊驼HQ </a>，如果你用twitter的话。</h2><figure class="ly lz ma mb fq iv fe ff paragraph-image"><a href="https://medium.com/automation-generation"><div class="fe ff nh"><img src="../Images/cdfe4e1b3df7ff7b28e2474ff8dfef1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1xnDRs1aVpqUjToFRmk5Zw.png"/></div></a></figure></div><div class="ab cl ml mm hc mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hn ho hp hq hr"><p id="0589" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">如果你是一名黑客，并且能够创造出在金融市场上运行的很酷的东西，<strong class="kc hv">请查看我们的项目“</strong> <a class="ae ky" href="https://alpaca.markets/?utm_source=medium&amp;utm_medium=blog&amp;utm_campaign=strategy_list&amp;utm_content=part1" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv">免佣金股票交易API </strong> </a> <strong class="kc hv">”，在这里我们免费提供简单的REST交易API和实时市场数据。</strong></p><p id="4073" class="pw-post-body-paragraph ka kb hu kc b kd kz kf kg kh la kj kk kl lb kn ko kp lc kr ks kt ld kv kw kx hn dt translated">经纪服务由FINRA/SIPC成员Alpaca Securities LLC(<a class="ae ky" href="https://alpaca.markets/?utm_source=medium&amp;utm_medium=blog&amp;utm_campaign=strategy_list&amp;utm_content=part1" rel="noopener ugc nofollow" target="_blank">Alpaca . markets</a>)提供。羊驼证券有限责任公司是AlpacaDB，Inc .的全资子公司。</p><figure class="ly lz ma mb fq iv"><div class="bz el l di"><div class="ni mi l"/></div></figure></div></div>    
</body>
</html>