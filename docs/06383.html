<html>
<head>
<title>Inform your users about breached passwords using Pwned Passwords API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Pwned密码API通知您的用户密码被破解</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/inform-your-users-about-breached-passwords-using-pwned-passwords-api-2c4b1f2d3f04?source=collection_archive---------34-----------------------#2018-07-31">https://medium.com/hackernoon/inform-your-users-about-breached-passwords-using-pwned-passwords-api-2c4b1f2d3f04?source=collection_archive---------34-----------------------#2018-07-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/045cfb472fda227273e34f57311b85f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v2XKHi_pIBkdUt-bmb7sCw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Img source: dev.to</figcaption></figure><p id="ee27" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">密码是我们访问数字账户最常用的方式之一。拥有安全的密码非常重要，这也是我们需要注意的最重要的方面之一。作为开发人员，我们还需要确保为我们的服务提供高水平的安全性。去年2017 NIST(国家标准和技术研究所)建议针对现有的公开数据泄露检查用户密码，幸运的是，有一个API可以让你非常容易地做到这一点。</p><p id="0f7b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Pwned Passwords API是一种服务，您可以使用它来检查密码是否已经作为过去发生过多次的大量数据泄露的一部分而暴露。这些数据包含超过500，000，000个以前使用过的密码。</p><p id="4860" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以使用以下gem作为包装器将它安装到您的Ruby应用程序中:</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="e07b" class="kn ko hu kj b fv kp kq l kr ks">gem ‘pwned’</span></pre><p id="ef2a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">安装后，您可以创建一个新的this Pwned::Password对象，然后检查它是否被破坏:</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="82ed" class="kn ko hu kj b fv kp kq l kr ks">password = Pwned::Password.new(“password”)</span></pre><p id="128c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您还可以检查密码在数据集中出现的次数。</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="2e32" class="kn ko hu kj b fv kp kq l kr ks">password = Pwned::Password.new(“password”)<br/>password.pwned_count<br/>#=&gt; 3303003</span></pre><p id="070f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">由于您可能会在注册过程中使用该服务，因此您还应该考虑到该服务有时可能无法正常工作的事实:</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="fe85" class="kn ko hu kj b fv kp kq l kr ks">begin<br/> password = Pwned::Password.new(“password”)<br/> password.pwned?<br/>rescue Pwned::Error =&gt; e<br/> # Ummm… don’t worry about it, I guess?<br/>End</span></pre><p id="04af" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您还可以使用以下方法使这个API调用变得更加容易:</p><p id="894c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">大多数情况下，您只关心密码之前是否被输入过。您可以使用简化的访问器来检查密码是否已被密码化，或者密码被密码化的次数:</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="536f" class="kn ko hu kj b fv kp kq l kr ks">Pwned.pwned?(“password”)<br/>#=&gt; true<br/>Pwned.pwned_count(“password”)<br/>#=&gt; 3303003</span></pre><p id="14ec" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您还可以验证您的模型，如下所示:</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="b73c" class="kn ko hu kj b fv kp kq l kr ks">class User &lt; ApplicationRecord<br/> validates :password, not_pwned: true<br/> # or<br/> validates :password, not_pwned: { message: “has been pwned %{count} times” }<br/>end</span></pre><p id="2618" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您甚至可以设置一个阈值，您认为应该使用该阈值来警告用户密码已被破坏。例如，您可能认为只出现两次的密码没有问题:</p><pre class="ke kf kg kh fq ki kj kk kl aw km dt"><span id="f2e2" class="kn ko hu kj b fv kp kq l kr ks">class User &lt; ApplicationRecord<br/> # The record is marked as valid if the password has been used once in the breached data<br/> validates :password, not_pwned: { threshold: 2 }<br/>end</span></pre><p id="0264" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您使用Devise进行身份验证，还有另一个专门为此准备的特定gem。</p><p id="4a30" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以通过访问Github页面来了解关于这个gem及其实现的更多信息。</p></div></div>    
</body>
</html>