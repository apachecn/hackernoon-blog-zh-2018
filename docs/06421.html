<html>
<head>
<title>Building a SaaS pricing page that populates local currency</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建填充当地货币的SaaS定价页面</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-a-saas-pricing-page-which-reflects-local-currency-a55c7d169bc2?source=collection_archive---------31-----------------------#2018-08-01">https://medium.com/hackernoon/building-a-saas-pricing-page-which-reflects-local-currency-a55c7d169bc2?source=collection_archive---------31-----------------------#2018-08-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="8229" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在我早上散步的时候，我一直喜欢听<a class="ae jp" href="https://hackernoon.com/tagged/saas" rel="noopener ugc nofollow" target="_blank"> SaaS </a>相关的播客，昨天早上，我在听简·波特曼的“UI早餐”播客，在播客中<a class="ae jp" href="https://uibreakfast.com/117-best-practices-for-saas-pricing-pages-with-rob-turlinckx/" rel="noopener ugc nofollow" target="_blank">正在和罗布·特林克谈论SaaS定价页面</a>。</p><p id="c71a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，我们刚刚对我们自己的<a class="ae jp" href="https://www.hrpartner.io/pricing.html" rel="noopener ugc nofollow" target="_blank">人力资源合作伙伴定价页面</a>进行了改造，它实际上满足了他们在播客中谈到的大多数建议，即提供多种货币，在加载时自动显示用户的本地<a class="ae jp" href="https://hackernoon.com/tagged/currency" rel="noopener ugc nofollow" target="_blank">货币</a>，显示月度与年度定价等。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/4d0ad056d9878f8772c6cd25a2646dba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2T4-PE1X8XdxZ82ip8cGgg.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Our HR Partner pricing page</figcaption></figure><p id="e58f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们的页面相当复杂(但幸运的是，我的团队中有一个伟大的UX设计师，他尽可能地使它易于使用)，但我想我会扩展我们在那里做的一些事情，以便以各种货币显示价格，最重要的是，我们如何检测用户的位置，并以他们自己的本地货币向他们显示相关的价格(或者如果他们在我们通常定价之外的位置，则默认为美元)。</p><p id="5289" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我所做的是在Github上整理一个简单的定价页面，欢迎你来探索和剖析。我的目标是能够实现本地化定价，只需(A)最少的javascript代码，(B)在一个页面上完成所有工作，以及(c)完全免费——根本不需要调用昂贵的登录页面或A/B测试服务来生成不同的定价页面！</p><p id="8d0c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是它看起来的样子(是的，我是一个程序员，不是设计师！):</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kg"><img src="../Images/0dd2e84a49627d8008e23b123e160f22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7mQJznY4Z0y0PmRX0rNAOw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Our test pricing page</figcaption></figure><p id="71c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">看看它在这里的运行情况:<a class="ae jp" href="https://cyberferret.github.io/LocalCurrencyPricing/" rel="noopener ugc nofollow" target="_blank">https://cyberferret.github.io/LocalCurrencyPricing/</a></p><p id="e809" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以下是实际网页代码的要点:</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="kh ki l"/></div></figure><p id="45bf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果你想要完整的源代码(包括引导库和jQuery库等)。所以你可以在你自己的服务器上测试)，然后你可以从我的Github库克隆我的代码:<a class="ae jp" href="https://github.com/CyberFerret/LocalCurrencyPricing" rel="noopener ugc nofollow" target="_blank">https://github.com/CyberFerret/LocalCurrencyPricing</a></p><p id="824d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们在这里分解代码。</p><p id="85e8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，我使用了一个简单的Bootstrap 4页面布局，它有一个标题块，然后是定价的4列。如果您查看每个定价栏，我已经包括了我想展示的4种货币:</p><pre class="jr js jt ju fq kj kk kl km aw kn dt"><span id="18f8" class="ko kp hu kk b fv kq kr l ks kt">&lt;div class="col-lg-3 col-md-6 mb-4"&gt;<br/>          &lt;div class="card"&gt;<br/>            &lt;div class="card-header"&gt;<br/>              &lt;h2 class="text-primary"&gt;FREE&lt;/h2&gt;<br/>            &lt;/div&gt;<br/>            &lt;div class="card-body"&gt;<br/>              &lt;h4 class="card-title pricing USD_pricing"&gt;USD $0&lt;/h4&gt;<br/>              &lt;h4 class="card-title pricing GBP_pricing collapse"&gt;GBP &amp;pound;0&lt;/h4&gt;<br/>              &lt;h4 class="card-title pricing EUR_pricing collapse"&gt;EUR &amp;euro;0&lt;/h4&gt;<br/>              &lt;h4 class="card-title pricing AUD_pricing collapse"&gt;AUD $0&lt;/h4&gt;<br/>              &lt;p class="card-text text-info"&gt;Our free plan will suit the Scrooge McDuck's among you.&lt;/p&gt;<br/>            &lt;/div&gt;<br/>            &lt;div class="card-footer"&gt;<br/>              &lt;a href="#" class="btn btn-primary"&gt;Find Out More!&lt;/a&gt;<br/>            &lt;/div&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;</span></pre><p id="7c33" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">但是看看源代码中除了USD定价之外的所有使用的`<strong class="it hv"> collapse </strong>'类。这样做的目的是“折叠”其他货币，使它们在页面加载时不可见，而是默认显示美元定价。</p><p id="ed70" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我还将所有的定价<h4>标签分为`<strong class="it hv">定价</strong>和`<strong class="it hv">XXX _定价</strong>`(其中XXX是每个地区的3个字母的货币代码)。稍后您将看到我如何通过一个简单的javascript函数来隐藏和显示相关的价格。</h4></p><p id="fcbe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在让我们看看页面底部的javascript代码。我们需要查看两个模块，即:</p><pre class="jr js jt ju fq kj kk kl km aw kn dt"><span id="4d64" class="ko kp hu kk b fv kq kr l ks kt">$(document).ready(function () {<br/>        $.get("https://api.ipdata.co?api-key=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", function (response) {<br/>          var detectedCurrency = response.currency.code;<br/>          displayPrice(detectedCurrency)<br/>        }, "jsonp");<br/>      });</span></pre><p id="96ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这段代码一直等到页面完全加载完毕，然后转到IPData.co免费服务，查询用户的地区信息，包括与他们的地区相关的货币代码。</p><p id="6b2b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">该信息包含在来自IPData服务的JSON响应中，您可以通过<strong class="it hv"> response.currency.code </strong>变量获得它。</p><p id="faac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，即使这个调用是作为后台异步AJAX调用完成的，也可能需要几秒钟才能返回结果——这就是为什么我们最初显示的是默认的美元定价，而不是根本没有定价。这可能会导致页面加载时令人不安的闪烁，因此您可能希望在自己的页面上默认显示无定价，这可以通过最初向所有定价行添加“<strong class="it hv"> collapse </strong>”类来实现。这完全取决于你。</p><p id="98a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">提示:记住用你从IPData.co得到的免费API密匙替换上面的“xxxxxxxxx”伪API密匙！</p><p id="440c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">javascript的下一部分是操纵页面DOM来显示或隐藏相关货币的部分:</p><pre class="jr js jt ju fq kj kk kl km aw kn dt"><span id="12ca" class="ko kp hu kk b fv kq kr l ks kt">displayPrice = function(currency) {<br/>        // First, lets hide all the current pricing<br/>        $(".pricing").hide();<br/>        // Is the currency within the valid range of currencies that we wish to show?<br/>        if (currency !== null || (["USD", "AUD", "GBP", "EUR"].indexOf(currency) &gt; -1)) {<br/>          // If yes, then show the currency<br/>          $("." + currency + "_pricing").show();<br/>        } else {<br/>          // If no, then just show USD pricing<br/>          $(".USD_pricing").show();<br/>        }<br/>      }</span></pre><p id="9bb4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个函数只接受一个参数，3个字母的货币代码，然后它:</p><ol class=""><li id="25a8" class="ku kv hu it b iu iv iy iz jc kw jg kx jk ky jo kz la lb lc dt translated">默认情况下，隐藏所有定价行，然后</li><li id="adce" class="ku kv hu it b iu ld iy le jc lf jg lg jk lh jo kz la lb lc dt translated">检查货币代码，看它是否是页面上允许的4个代码之一，然后</li><li id="159f" class="ku kv hu it b iu ld iy le jc lf jg lg jk lh jo kz la lb lc dt translated">如果允许，显示类别为“<em class="li">[货币代码]_定价</em>”的定价，或者</li><li id="bc7c" class="ku kv hu it b iu ld iy le jc lf jg lg jk lh jo kz la lb lc dt translated">显示默认的美元定价行。</li></ol><p id="697b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后一件事——我意识到，有时用户可能希望自己看到以其他货币计价的价格，而不是以当地货币计价的价格。最常见的是当他们想要将美元价值与他们使用的其他服务进行比较时。，所以我们应该允许他们有这样做的能力。</p><p id="730e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这就是为什么我把按钮组放在标题和价格框之间，询问他们想看的货币。单击任何按钮都会调用`<strong class="it hv"><em class="li">display price()</em></strong>`函数来显示该地区的货币。</p><pre class="jr js jt ju fq kj kk kl km aw kn dt"><span id="3e79" class="ko kp hu kk b fv kq kr l ks kt">&lt;div class="row text-center"&gt;<br/>        &lt;div class="col-lg-12 m-2"&gt;<br/>          &lt;p&gt;Show me pricing in: &lt;/p&gt;<br/>          &lt;div class="btn-group mb-3" role="group" aria-label="Select Currency"&gt;<br/>            &lt;button type="button" class="btn btn-secondary" onclick="displayPrice('USD');"&gt;USD&lt;/button&gt;<br/>            &lt;button type="button" class="btn btn-secondary" onclick="displayPrice('GBP');"&gt;GBP&lt;/button&gt;<br/>            &lt;button type="button" class="btn btn-secondary" onclick="displayPrice('EUR');"&gt;EUR&lt;/button&gt;<br/>            &lt;button type="button" class="btn btn-secondary" onclick="displayPrice('AUD');"&gt;AUD&lt;/button&gt;<br/>          &lt;/div&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;</span></pre><p id="df4c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样！很容易(而且便宜)，不是吗？不需要复杂的内容管理系统，或者PHP/Ruby脚本等等。这些都可以在免费的网站托管平台上完成，比如亚马逊S3(我们正在使用)或者Github Pages等等。</p><p id="3b19" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">好好享受吧。在我的下一篇文章中，我可能会展示如何使用一个免费的外币兑换API来动态计算基于当天汇率的其他价格！</p><blockquote class="lj lk ll"><p id="1784" class="ir is li it b iu iv iw ix iy iz ja jb lm jd je jf ln jh ji jj lo jl jm jn jo hn dt translated"><a class="ae jp" href="http://devan.blaze.com.au/blog/2018/8/1/building-a-pricing-screen-which-reflects-local-currency" rel="noopener ugc nofollow" target="_blank">最初发表于此</a></p></blockquote><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="lp ki l"/></div></figure></div></div>    
</body>
</html>