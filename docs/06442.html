<html>
<head>
<title>Routing in Clean Swift (VIP) Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">干净Swift (VIP)架构中的路由</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/routing-in-clean-swift-vip-architecture-dcc9a0ee9eb3?source=collection_archive---------5-----------------------#2018-08-02">https://medium.com/hackernoon/routing-in-clean-swift-vip-architecture-dcc9a0ee9eb3?source=collection_archive---------5-----------------------#2018-08-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="b10f" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">了解如何正确使用路由器组件</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/dcd082d62f0aabd2ca2a127e2cafa0c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E39B_vTuUab80MOlWwGjJQ.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek"><a class="ae jz" href="https://clean-swift.com/clean-swift-ios-architecture/" rel="noopener ugc nofollow" target="_blank">https://clean-swift.com/clean-swift-ios-architecture/</a></figcaption></figure><p id="0c14" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在继续本教程<em class="kw">之前，请确保您已经阅读了<a class="ae jz" href="https://hackernoon.com/introducing-clean-swift-architecture-vip-770a639ad7bf" rel="noopener ugc nofollow" target="_blank"> <em class="kw">介绍Clean Swift (VIP)架构</em> </a> <em class="kw"> </em>。</em></p><p id="f7ba" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae jz" href="https://hackernoon.com/tagged/router" rel="noopener ugc nofollow" target="_blank">路由器</a>组件负责传递数据和处理视图控制器之间的转换。如果我们利用得当，这是一个非常有用的组件。</p><p id="c411" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">出于本教程的目的，我已经创建了一个包含两个场景的示例项目，分别名为登录和注册。下面给出了两种情况。</p><ol class=""><li id="b799" class="kx ky hu kc b kd ke kg kh kj kz kn la kr lb kv lc ld le lf dt translated">从登录过渡到注册</li><li id="8910" class="kx ky hu kc b kd lg kg lh kj li kn lj kr lk kv lc ld le lf dt translated">将数据从登录名传递到注册表</li></ol><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/9c49c28b6bda19327af9c219d2a7e096.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*bbH0ELyv6eAFl_i7sseEag.png"/></div></figure><h1 id="4e1f" class="lm ln hu bd lo lp lq lr ls lt lu lv lw ja lx jb ly jd lz je ma jg mb jh mc md dt translated">过渡</h1><p id="c984" class="pw-post-body-paragraph ka kb hu kc b kd me iv kf kg mf iy ki kj mg kl km kn mh kp kq kr mi kt ku kv hn dt translated">我将首先向您展示如何转换到下一个视图控制器。路由器组件已经包含了示例方法，我们可以根据自己的需要进行调整。</p><h2 id="5827" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated">登录路由器</h2><p id="59f0" class="pw-post-body-paragraph ka kb hu kc b kd me iv kf kg mf iy ki kj mg kl km kn mh kp kq kr mi kt ku kv hn dt translated">我们将编辑<em class="kw">route tosomething()</em>方法，并将其命名为<em class="kw"> routeToRegister() </em>，因为我们希望在按钮点击<em class="kw">上呈现注册场景。</em>我已经注释了负责数据传递的行，我将在本教程的后面介绍这些行。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/cac6d2e5bbcd6c1efe0863bb4abc3717.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*PqyRzofGPOxzT68zWyc7mA.png"/></div></figure><p id="ee3e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">路由逻辑协议<br/> </strong>在文件的顶部，有一个<em class="kw">协议</em>叫做<code class="eh my mz na nb b">RoutingLogic.</code>这个协议将包含所有负责转换的方法。这里声明的所有内容都可以从ViewController(在我们的例子中是LoginViewController)中访问。</p><p id="2186" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">route register()<br/></strong><a class="ae jz" href="https://hackernoon.com/tagged/cleanswift" rel="noopener ugc nofollow" target="_blank">clean swift</a>为我们提供了两种处理视图控制器之间转换的解决方案。(1) <em class="kw">通过使用segue，</em> (2) <em class="kw">通过编程</em>。</p><h2 id="2d80" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated">#1使用Segue</h2><p id="590f" class="pw-post-body-paragraph ka kb hu kc b kd me iv kf kg mf iy ki kj mg kl km kn mh kp kq kr mi kt ku kv hn dt translated">在LoginViewController下，CleanSwift模板为我们生成了一个对<em class="kw"> prepare(for segue:) </em>方法的覆盖。每当一个视图控制器被推/呈现一个序列时，这个方法将被触发。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/daca40661db43ae91fb81b0daaf3bfa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*DT8nZx0OyHHSEi3UEhTFgQ.png"/></div></figure><blockquote class="nd ne nf"><p id="4a0b" class="ka kb kw kc b kd ke iv kf kg kh iy ki ng kk kl km nh ko kp kq ni ks kt ku kv hn dt translated"><strong class="kc hv">重要:</strong> <em class="hu">当你使用segues时，你必须设置segues标识符来匹配方法的命名。</em></p></blockquote><p id="5874" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">例如，如果segue标识符的方法被设置为<code class="eh my mz na nb b">Register</code>，那么应该有一个在Router下声明的方法被命名为<code class="eh my mz na nb b">routeToRegister(segue: UIStoryboardSegue?)</code>。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/503f3692451110acbef4f705ba504f21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*UCaUvrYHguGoZtTvjudinQ.png"/></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">An example Segue created from a Storyboard</figcaption></figure><h2 id="b089" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated"><strong class="ak"> #2编程方式</strong></h2><p id="7f0c" class="pw-post-body-paragraph ka kb hu kc b kd me iv kf kg mf iy ki kj mg kl km kn mh kp kq kr mi kt ku kv hn dt translated">为了导航到注册场景，您需要将IBAction连接到按钮并调用<code class="eh my mz na nb b">routeToRegister(nil)</code>。</p><h1 id="f06b" class="lm ln hu bd lo lp lq lr ls lt lu lv lw ja lx jb ly jd lz je ma jg mb jh mc md dt translated">传递数据</h1><p id="1ac0" class="pw-post-body-paragraph ka kb hu kc b kd me iv kf kg mf iy ki kj mg kl km kn mh kp kq kr mi kt ku kv hn dt translated">传递数据也是通过<em class="kw">route register()</em>方法完成的。我们所要做的就是取消之前由于关注转换逻辑而被注释的几行。</p><p id="a3bb" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">数据传递&amp;数据存储协议<br/>T5】每个路由器组件都包含一个处理数据传递逻辑的协议。在我们的例子中，它被称为<em class="kw"> LoginDataPassing </em>。该协议实现了一个在Interactor下声明的<em class="kw">数据存储协议</em>。</strong></p><p id="153a" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw">数据存储协议</em>主要存储我们需要传递给下一个场景的变量。交互器完成填充这些变量的所有逻辑。路由器只是继承这些值。</p><p id="47fa" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">passDataToRegister()<br/></strong>该方法负责为目的数据存储协议赋值。它包含两个属性:</p><ol class=""><li id="b03a" class="kx ky hu kc b kd ke kg kh kj kz kn la kr lb kv lc ld le lf dt translated"><em class="kw">源数据源协议</em> -代表当前视图控制器的数据源。</li><li id="e91e" class="kx ky hu kc b kd lg kg lh kj li kn lj kr lk kv lc ld le lf dt translated"><em class="kw">目的数据源协议——表示目的视图控制器的数据源。</em></li></ol><p id="f941" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">假设我们需要将数据从登录名传递到注册控制器，我们将把LoginDataSource指定为<em class="kw">源</em>，把RegisterDataSource指定为<em class="kw">目的地。</em></p><p id="67b1" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在当前的例子中，我正在传递一个名为<code class="eh my mz na nb b">name</code>的变量。为了传递该变量，我们必须向登录和注册数据源声明它。在声明了这两个变量之后，您可以在LoginInteractor中将一些随机字符串直接分配给名称为<em class="kw">的</em>变量<em class="kw"> </em>(用于测试目的)。<em class="kw">返回到<em class="kw"> passDataToRegister() </em>内的LoginRouter </em>和<em class="kw"> </em>将值分配给目的数据存储器<em class="kw">。</em></p><pre class="jk jl jm jn fq nj nb nk nl aw nm dt"><span id="e031" class="mj ln hu nb b fv nn no l np nq">destination.name = source.name</span></pre><p id="999a" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">如果现在从登录导航到注册，将调用<em class="kw"> routeToRegister() </em>方法，并且<em class="kw">Register data source</em><em class="kw">协议</em>将包含从<em class="kw">登录数据源协议</em>分配的正确名称。</p></div><div class="ab cl nr ns hc nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hn ho hp hq hr"><h2 id="4f1e" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated">这就是本教程的内容，如果对你有帮助，请👏或者分享这个故事，让其他像你一样的人也能找到它。感谢您的关注！🚀</h2><figure class="jk jl jm jn fq jo fe ff paragraph-image"><a href="http://bit.ly/2KkkwGL"><div class="fe ff ny"><img src="../Images/79c8aca42472a7e427ec524f7bc604fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-oC2BqqizoRxIls08WMmA.png"/></div></a></figure><h2 id="a1f8" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated">查看我的最新项目:</h2><div class="nz oa fm fo ob oc"><a href="https://play.google.com/store/apps/details?id=betting.tips.goals" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">BetScore:Google Play上的足球博彩技巧、比分和赔率应用</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">我们提供高胜率的专业足球技巧。每个比赛模拟包含三个预测…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">play.google.com</p></div></div><div class="ol l"><div class="om l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a href="https://play.google.com/store/apps/details?id=betting.tips.sportsbet" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">Google Play上的篮球、曲棍球和手球应用程序的下注技巧</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">超过500，000名职业博彩客户、体彩投注者和体育博彩爱好者信任我们的日常体育博彩…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">play.google.com</p></div></div><div class="ol l"><div class="or l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a href="https://apps.apple.com/app/long-video-story-for-instagram/id1511499427" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">Instagram的长视频故事</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">Instagram的Long Story是一个非常棒的工具，允许您录制或选择任意长度的视频并进行转换…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">apps.apple.com</p></div></div><div class="ol l"><div class="os l on oo op ol oq jt oc"/></div></div></a></div><h2 id="97ee" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated">阅读更多我在媒体上的作品:</h2><div class="nz oa fm fo ob oc"><a rel="noopener follow" target="_blank" href="/theappspace/installing-the-clean-swift-template-in-xcode-6b4367006827"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">在Xcode中安装干净的Swift模板</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">Clean Swift在iOS开发者中越来越受欢迎。这个简短的教程将向您展示如何安装…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">medium.com</p></div></div><div class="ol l"><div class="ot l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a href="https://medium.freecodecamp.org/how-you-can-use-the-google-maps-sdk-with-ios-using-swift-4-a9bba26d9c4d" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">使用Swift 4在iOS上使用Google Maps SDK的终极指南</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">许多iOS应用程序使用谷歌地图。这是一个非常普遍的特点，所以我决定准备一个终极指南…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">medium.freecodecamp.org</p></div></div><div class="ol l"><div class="ou l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a rel="noopener follow" target="_blank" href="/theappspace/swift-custom-uiview-with-xib-file-211bb8bbd6eb"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">SWIFT —带有XIB文件的自定义UIView</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">用XIB文件定制UIView是iOS开发中非常常见的做法。自定义UIView类不包含XIB文件…</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">medium.com</p></div></div><div class="ol l"><div class="ov l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a href="https://hackernoon.com/how-to-add-spotlight-support-to-your-ios-app-4a89054aff89" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">如何将Spotlight支持添加到您的iOS应用程序</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">Swift教程将使您的应用程序在Spotlight search中可用</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">hackernoon.com</p></div></div><div class="ol l"><div class="ow l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a href="https://hackernoon.com/core-data-relationships-d813ed66ba8c" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">核心数据关系</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">理解一对一和一对多关系</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">hackernoon.com</p></div></div><div class="ol l"><div class="ox l on oo op ol oq jt oc"/></div></div></a></div><div class="nz oa fm fo ob oc"><a href="https://hackernoon.com/understanding-auto-layout-in-xcode-9-2719710f0706" rel="noopener  ugc nofollow" target="_blank"><div class="od ab ej"><div class="oe ab of cl cj og"><h2 class="bd hv fv z el oh eo ep oi er et ht dt translated">了解Xcode 9中的自动布局</h2><div class="oj l"><h3 class="bd b fv z el oh eo ep oi er et ek translated">所有你需要知道的关于自动布局</h3></div><div class="ok l"><p class="bd b gc z el oh eo ep oi er et ek translated">hackernoon.com</p></div></div><div class="ol l"><div class="oy l on oo op ol oq jt oc"/></div></div></a></div><h2 id="0b96" class="mj ln hu bd lo mk ml mm ls mn mo mp lw kj mq mr ly kn ms mt ma kr mu mv mc mw dt translated">订阅我的时事通讯:</h2><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="oz pa l"/></div></figure><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="oz pa l"/></div></figure></div></div>    
</body>
</html>