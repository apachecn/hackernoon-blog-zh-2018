<html>
<head>
<title>Private data, a built-in “GDPR compliant” solution for Hyperledger Fabric</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">私有数据，Hyperledger结构的内置“GDPR兼容”解决方案</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/private-data-a-built-in-gdpr-compliant-solution-for-hyperledger-fabric-5a35b91e6aaa?source=collection_archive---------14-----------------------#2018-08-02">https://medium.com/hackernoon/private-data-a-built-in-gdpr-compliant-solution-for-hyperledger-fabric-5a35b91e6aaa?source=collection_archive---------14-----------------------#2018-08-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/7626c65ddbf01ec70171fdfd83350f1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0DBzcfl78ir2LqOVVzK3Cg.png"/></div></div></figure><p id="c7f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在最新发布的<a class="ae ka" href="https://hackernoon.com/tagged/hyperledger-fabric" rel="noopener ugc nofollow" target="_blank"> Hyperledger Fabric </a> v1.2中，他们引入了私有数据的概念。这个特性可以解决当今技术中存在的一系列保密问题。其中之一是GDPR合规性。以下文章需要一些一般的织物知识。如果你还不熟悉Hyperledger Fabric，我建议你看看这个<a class="ae ka" href="https://www.youtube.com/watch?v=7EpPrSJtqZU&amp;list=PLjsqymUqgpSRXC9ywNIVUUoGXelQa4olO" rel="noopener ugc nofollow" target="_blank">视频系列</a>或者官方文档上的<a class="ae ka" href="http://hyperledger-fabric.readthedocs.io/en/release-1.1/blockchain.html" rel="noopener ugc nofollow" target="_blank">介绍</a>。</p><blockquote class="kb kc kd"><p id="a69f" class="jc jd ke je b jf jg jh ji jj jk jl jm kf jo jp jq kg js jt ju kh jw jx jy jz hn dt translated">快速说明:我不是GDPR专家。您实施这项技术的方式并不保证符合GDPR标准。但是私有数据支持符合GDPR标准的区块链应用。</p></blockquote><h1 id="f220" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">那是什么？SideDBs？区块链的私人数据？</h1><p id="1e07" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">目前实现机密性的方法是使用通道。不鼓励仅仅为了实现保密性而为大型网络创建大量通道。为每个交易方创建通道会带来很多开销，比如管理策略、链代码版本控制和成员资格服务提供者。所有的数据要么是公开的，要么是私人的。如果你想把一项资产转移给渠道外的一方，这将是一种负担。这就是私人交易的用武之地。私有数据允许您使用策略创建数据集合，以定义渠道中的哪些方可以访问数据。这种访问可以简单地通过向集合添加策略来管理。这允许一些数据对某些方是公开的，而一些是私有的。</p><h2 id="724c" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">即期</h2><p id="3c7b" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">想象一下弹珠的例子。你想保存哪些弹珠属于谁。除了所有者和价格，所有大理石数据都可以公开。出于隐私原因，这些不能被任何人看到。未来交易的价格不应公开。也许您需要跟踪这些数据，因为您需要验证出售弹珠的人是否是实际所有者。一家(虚构的)marble审计公司将成为合作伙伴来验证欺诈行为。如果你没有使用频道，在1.1中，你所做的一切都将被记录到分类帐中。这不符合GDPR的要求。</p><h2 id="6ad9" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">私有数据如何解决这个问题？</h2><figure class="ma mb mc md fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/8794bfea5e8e56d618d2783ad3affe3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E0acZ_rhG0pkYl-ZYXMz1A.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Image 1: From slidedeck “Privacy Enabled Ledger” <a class="ae ka" href="https://jira.hyperledger.org/browse/FAB-1151" rel="noopener ugc nofollow" target="_blank">https://jira.hyperledger.org/browse/FAB-1151</a></figcaption></figure><p id="fe0c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一组“<em class="ke">通道读写组</em>”是当前架构的样子。每笔交易都记录在状态和历史中。</p><p id="c3cd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第二组显示了两个对等体之间的共享私有状态，每个对等体都在各自的组织中。这种状态根据策略在这些对等体之间复制。</p><p id="b9e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第三组展示了私人交易的真正力量。某些成员可以省略这些集合。这意味着你可以为每一个<strong class="je hv">Marble seller-Marble auditor</strong>关系建立单独的私人收藏。这些集合允许添加一些数据，而主数据仍然存储在主状态和分类帐中。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mi"><img src="../Images/666b2b06583d62cf486d7dd91e9a0760.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7QtAdL7Zg-TOkN44.png"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Image 2: Private state <a class="ae ka" href="https://hyperledger-fabric.readthedocs.io/en/release-1.2/private-data/private-data.html" rel="noopener ugc nofollow" target="_blank">https://hyperledger-fabric.readthedocs.io/en/release-1.2/private-data/private-data.html</a></figcaption></figure><p id="0b76" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">授权的对等方将看到主分类帐中数据的散列，以及私有数据库中的实际数据。未经授权的对等方不会同步私有数据库，只能看到分类帐中的散列。由于散列是不可逆的，他将无法看到实际的数据。</p><p id="d8d1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">概括地说，使用私有数据解决的问题如下所示。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/ba239a1e2d546ab15097a40467fb60c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X6KtwR2GC28NvR0n9V5nSg.jpeg"/></div></div><figcaption class="me mf fg fe ff mg mh bd b be z ek">Image 3: Marbles issue made GDPR compliant</figcaption></figure></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><h1 id="3de9" class="ki kj hu bd kk kl mr kn ko kp ms kr ks kt mt kv kw kx mu kz la lb mv ld le lf dt translated">这如何适用于GDPR？</h1><p id="e82d" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated"><em class="ke">我的同事</em> <a class="mw mx gr" href="https://medium.com/u/97ae5eb6d988?source=post_page-----5a35b91e6aaa--------------------------------" rel="noopener" target="_blank"> <em class="ke"> Andries </em> </a> <em class="ke">，对GDPR和</em><a class="ae ka" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank"><em class="ke"/></a><em class="ke">的问题做了明确的文章。我将在这里简要描述这个问题，但如果你想阅读全文，请点击这里</em><a class="ae ka" rel="noopener" href="/wearetheledger/the-blockchain-gdpr-paradox-fc51e663d047"><em class="ke"/></a><em class="ke">。</em></p><h2 id="acf9" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">问题是</h2><p id="2f20" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">已经添加到分类帐的数据不能删除。所以在添加个人数据时，这是GDPR的问题。人们不能简单地删除块。一种常用的解决方案是离线存储数据，如下图所示。但是这种解决方案相当复杂，因为您必须手动查找数据的有效性以及区块链上的数据链接。</p><figure class="ma mb mc md fq iv fe ff paragraph-image"><div class="ab fr cl my"><img src="../Images/9173232d933c3c47cc07d4b370bf0fb2.png" data-original-src="https://miro.medium.com/v2/format:webp/1*t19PZPVqPhabidFA51J2iQ.jpeg"/></div></figure><h2 id="15a1" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">私有数据作为解决方案</h2><p id="1c2c" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">私有数据基本上是上述结构本身的解决方案，不需要额外的工作。它解决了GDPR的多个问题。</p><p id="3fe7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">数据限制</strong></p><p id="8cf4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你不应该访问你不使用的数据</p><p id="f0c3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">私有数据通过不使用类似于背书的策略来控制访问，从而解决了这个问题。通过使用fabric中已经存在的策略逻辑，我们可以使用OR、AND运算符来定义哪些方可以访问。</p><pre class="ma mb mc md fq mz na nb nc aw nd dt"><span id="a3fd" class="ll kj hu na b fv ne nf l ng nh">// collections_config.json</span><span id="b685" class="ll kj hu na b fv ni nf l ng nh">[<br/>  {<br/>       "name": "collectionFarmer-Store",<br/><strong class="na hv">       "policy": "OR('FarmerMSP.member', 'StoreMSP.member')",<br/></strong>       "requiredPeerCount": 0,<br/>       "maxPeerCount": 3,<br/>       "blockToLive":1000000<br/>  }<br/>]</span></pre><p id="e461" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">使用限制</strong></p><p id="6336" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ke">您应该只保留您需要的数据</em></p><p id="5ed0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于集合，您可以在策略中指定一个<em class="ke"> blockToLive </em>。这就像它听起来的那样。您可以根据块来定义集合应该保留多长时间。这意味着，私有数据库中的旧数据将在x个块之后自动清除，您不必担心有未使用的数据。实际块中的散列将不会被删除。</p><pre class="ma mb mc md fq mz na nb nc aw nd dt"><span id="ff43" class="ll kj hu na b fv ne nf l ng nh">// collections_config.json</span><span id="80fc" class="ll kj hu na b fv ni nf l ng nh">[<br/>  {<br/>       "name": "collectionFarmer-Store",<br/>       "policy": "OR('FarmerMSP.member', 'StoreMSP.member')",<strong class="na hv"><br/></strong>       "requiredPeerCount": 0,<br/>       "maxPeerCount": 3,<br/><strong class="na hv">       "blockToLive":1000000<br/></strong>  }<br/>]</span></pre><p id="1cef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">被遗忘的权利</strong></p><p id="e7c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这与前一项相同，但可以手动删除项目。因为除了散列之外，没有任何东西被写入分类帐，所以在这个过程之后，这个项目将不存在于任何地方。</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><h1 id="4498" class="ki kj hu bd kk kl mr kn ko kp ms kr ks kt mt kv kw kx mu kz la lb mv ld le lf dt translated">警告</h1><h2 id="80dc" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">此解决方案仅在以下情况下符合GDPR标准</h2><ol class=""><li id="d582" class="nj nk hu je b jf lg jj lh jn nl jr nm jv nn jz no np nq nr dt translated"><strong class="je hv">当事人并无恶意</strong></li></ol><p id="82d1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果他们有不良意图，他们可以复制这些数据并与外部方共享。这是一个普遍问题，并不是区块链技术公司特有的。这就是你的财团中的规则发挥作用的地方。您需要定义清晰的规则和明确的后果，以确保节点不会变得恶意。</p><p id="69c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> 2。正确实施时</strong></p><p id="9d9a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">就像本文开头提到的。如果你写的正确，它是GDPR兼容的。你必须小心你把什么放在公共账本上，什么放在私人账本上，以及你将这些数据保留多久。</p><h2 id="8446" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">它还不是防弹的</h2><p id="0f5d" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">您的链码将在所有对等机之间复制。其他配置文件也是如此。这意味着<em class="ke"> collections_config.json </em>也将被复制到所有对等体，以便系统正确设置和了解这些私有集合。这意味着每个成员都可以看到谁在做生意或与谁共享秘密数据。他们看不到实际数据，但透露参与者的信息仍然是一个保密问题。这个<a class="ae ka" href="https://jira.hyperledger.org/browse/FAB-7593" rel="noopener ugc nofollow" target="_blank">问题</a>应该在1.3中解决。</p><h2 id="f8b9" class="ll kj hu bd kk lm ln lo ko lp lq lr ks jn ls lt kw jr lu lv la jv lw lx le ly dt translated">集合必须预先定义</h2><p id="88f2" class="pw-post-body-paragraph jc jd hu je b jf lg jh ji jj lh jl jm jn li jp jq jr lj jt ju jv lk jx jy jz hn dt translated">目前，私有集合必须预先定义。当存在大量不同的交易方对交易方时，这很难维持。但是可以用。1.3版本将<a class="ae ka" href="https://jira.hyperledger.org/browse/FAB-10889" rel="noopener ugc nofollow" target="_blank">引入</a>隐式集合，这些集合基本上是可以动态创建的集合，甚至可以传递给其他成员。</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="1d6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ke">原</em>贴于<a class="ae ka" href="https://medium.com/wearetheledger" rel="noopener">边缘</a></p><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="ns nt l"/></div></figure><figure class="ma mb mc md fq iv"><div class="bz el l di"><div class="nu nt l"/></div></figure></div></div>    
</body>
</html>