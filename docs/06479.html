<html>
<head>
<title>Connecting Modbus RTU Smart Energy Meter and Siemens Simatic IoT2040 to NETPIE</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Modbus RTU智能电能表和西门子Simatic IoT2040连接到NETPIE</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/connecting-modbus-rtu-smart-energy-meter-and-siemens-simatic-iot2040-to-netpie-7d38aafb7c04?source=collection_archive---------6-----------------------#2018-08-03">https://medium.com/hackernoon/connecting-modbus-rtu-smart-energy-meter-and-siemens-simatic-iot2040-to-netpie-7d38aafb7c04?source=collection_archive---------6-----------------------#2018-08-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/fb4495539e0942fe78ef34e71bd8d88f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PRXLoYI_JqUkNWn-ZPVYkQ.png"/></div></div></figure><p id="ce63" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">本文介绍如何使用工业网关西门子Simatic IoT2040从三菱Modbus电能表读取数据。Simatic IoT2040是各行业在工业物联网(IIoT)领域实现生产数据可视化的最佳选择。</p><p id="67e5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">要求:</strong></p><ol class=""><li id="beac" class="ka kb hu je b jf jg jj jk jn kc jr kd jv ke jz kf kg kh ki dt translated">Modbus能量计(三菱SX1-A31E)</li><li id="8c1b" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">西门子Simatic IoT2040</li><li id="5dad" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">24V DC电源</li><li id="a99a" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">带Yocto Linux的SD卡</li><li id="2abb" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">以太网电缆</li><li id="946f" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">红色节点</li><li id="bd87" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated"><a class="ae ko" href="https://netpie.io/" rel="noopener ugc nofollow" target="_blank">网派</a>账号</li></ol><p id="b8c4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> Simatic IoT2040规格:</strong></p><ol class=""><li id="afcb" class="ka kb hu je b jf jg jj jk jn kc jr kd jv ke jz kf kg kh ki dt translated">英特尔Quark X1020处理器</li><li id="5267" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">1 GB内存</li><li id="85ae" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">2个以太网接口</li><li id="1439" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">2个RS232/422/485接口</li><li id="0a23" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">电池缓冲实时时钟</li></ol><p id="ac5d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">三菱Modbus电能表规格:</strong></p><ol class=""><li id="5560" class="ka kb hu je b jf jg jj jk jn kc jr kd jv ke jz kf kg kh ki dt translated">RS485双线半双工</li><li id="fe98" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">RTU模式</li><li id="2129" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">波特率1200bps</li><li id="8c86" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">距离1200米</li><li id="dbcf" class="ka kb hu je b jf kj jj kk jn kl jr km jv kn jz kf kg kh ki dt translated">响应时间80毫秒~ 200毫秒(可编程)</li></ol><p id="ef72" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">准备Simatic IoT2040: </strong></p><p id="e4f6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一步是将镜像引导到Simatic上，因为至少需要8GB的SD卡。Yocto Linux镜像可以从西门子网站下载。将SD卡插入Linux计算机的SD卡插槽，并按照以下说明操作</p><p id="2bb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">a)在Linux上，打开终端(ctrl+alt+t)并转到zip文件的下载位置。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff kp"><img src="../Images/733bdfceb8528bbfbd4043aada0e49cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:230/format:webp/1*osM9apq5GceEwvEsIehIQA.png"/></div></figure><p id="bf47" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">b)使用下面的命令解压缩文件夹</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff ku"><img src="../Images/83ed36eea49f8d5e1ef16e8648c323c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*1d-P42Hq_BSdzRffuuyctg.png"/></div></figure><p id="471f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">c)通过运行以下命令验证SD卡的位置</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff kv"><img src="../Images/090f9af4bd027c1b5cc368c2c078dead.png" data-original-src="https://miro.medium.com/v2/resize:fit:110/format:webp/1*3Eu69vAYgrZZcBC0y6vzaQ.png"/></div></figure><p id="7604" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">d)卸载SD卡</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff kw"><img src="../Images/47bc3a94ecd7ef5a0fb51411c61e0e83.png" data-original-src="https://miro.medium.com/v2/resize:fit:382/format:webp/1*CdanugD_agxOSxrM7ZcO4w.png"/></div></figure><p id="b1de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">e)将图像文件刻录到SD卡上</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff kx"><img src="../Images/ddf71bedc842f5c65e4df1fb51423ce2.png" data-original-src="https://miro.medium.com/v2/resize:fit:898/format:webp/1*dpZ_YVx3r1TVF8wWqVcleA.png"/></div></figure><p id="0f22" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>用计算机检测到的下载图像版本和SD卡位置替换图像名称。</p><p id="0d19" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">映像安装到SD卡上后，将SD卡放入Simatic的SD卡插槽，如下所示。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ky"><img src="../Images/95d218b0044c8d00110509ade927dbec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*foBKdtR-AdRY4soEFzoLGA.png"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">SD-card installation on Simatic</figcaption></figure><p id="dfd3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">与Simatic通信:</strong></p><p id="a9f1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过安全套接字外壳(SSH)，可以与Simatic进行对话。Simatic在以太网端口X1P1LAN上带有默认的DHCP地址192.168.200.1。将以太网电缆的一端连接到启用了WiFi的Linux计算机，将以太网电缆的另一端连接到Simatic的X1P1LAN端口，并接通Simatic的电源(需要24V DC)。当您打开Simatic时，三个LED将开始闪烁，一旦“SD”LED停止闪烁，这意味着Simatic现在准备好进行通信。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ld"><img src="../Images/3b6adef8dd857590228d8483a25960d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Du5lXDjfkAuqRNbmLj5Jtw.jpeg"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Simatic Initialization</figcaption></figure><p id="8925" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">设备初始化后，请遵循以下说明</p><p id="da9b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">a)在启用了wifi的linux计算机上，转到编辑连接，添加以太网连接类型，并为连接命名。在IPv4设置中，将方法更改为“共享给其他计算机”并保存。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff le"><img src="../Images/232aa3b70345af5ee991ae0ff1496f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*gGVXvIrddZCm8aAL7U4k6A.png"/></div></figure><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lf"><img src="../Images/b989ed440a41dd6d7c79a8abe6c47a71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*7q0lwAouMi6PNJyWhYrt-Q.png"/></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Sharing computer WiFi with Simatic through Ethernet</figcaption></figure><p id="e931" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">b)打开终端并执行以下命令，使您的计算机与Simatic位于同一子网。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lg"><img src="../Images/7a096734e1437654bed009ff4fb1a183.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*LPXIRceYA5C5l8Vo1DEZ1Q.png"/></div></figure><p id="5a33" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">c)使用SSH登录Simatic</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lh"><img src="../Images/20695886169f49b591c57c8dfa95f5e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:408/format:webp/1*mhrYayMbLeAJC00rsjiw-g.png"/></div></figure><p id="f6ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">d)首次登录时，键入“是”继续</p><p id="a59a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">e)指定一个密码</p><p id="1877" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">成功登录后，它将显示为:</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff li"><img src="../Images/cbc0eb775cf0b5c350bdaa4f4f10c61b.png" data-original-src="https://miro.medium.com/v2/resize:fit:284/format:webp/1*QgHevhy6N1GkB-Om5Td57Q.png"/></div></figure><p id="3c0f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">f)为互联网连接添加网关</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/8cd9cb9edd298feb99f9845de136bb91.png" data-original-src="https://miro.medium.com/v2/resize:fit:632/format:webp/1*utb1EQF7XuYqMLu3E_rsUA.png"/></div></figure><p id="a466" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">g)使用ping检查互联网连接</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lk"><img src="../Images/f5efde9ee2db6f73535fe6ed6247a654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*ImEmlrkaNw1fuoA4P5wLuw.png"/></div></figure><p id="f383" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">h)按照以下格式设置Simatic的时间和日期(月:日:时:分:年)</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff ll"><img src="../Images/185c81a5c627ed83358fe98d4f3fd998.png" data-original-src="https://miro.medium.com/v2/resize:fit:332/format:webp/1*dashjZI0quBJSr1RgR2KRQ.png"/></div></figure><p id="1c65" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">在Simatic上设置节点-红色:</strong></p><p id="b806" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">需要设置一些配置，以便在Simatic上启动Node-Red</p><p id="dc23" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">a)转到opkg目录</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff kp"><img src="../Images/69c075b0f0aab7b8bfa2411d213e9c26.png" data-original-src="https://miro.medium.com/v2/resize:fit:230/format:webp/1*rq31gCbIsLkLpMHY-tje_g.png"/></div></figure><p id="d844" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">b)在opkg.conf中添加以下行</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lm"><img src="../Images/22d244607605692e089715d0add19630.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*9GCnl5_-JL1wJLHus9E1mw.png"/></div></figure><p id="309f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">c)在arch.conf中添加以下行</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff ln"><img src="../Images/e317fda4de1c11deb4c5dbfaffc5f625.png" data-original-src="https://miro.medium.com/v2/resize:fit:252/format:webp/1*bzHzae7VW2F0HoBvlhYC2Q.png"/></div></figure><p id="83fe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">d)使用以下工具更新配置</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/56c8f9941b9c2999280c3cc9e5d3aaab.png" data-original-src="https://miro.medium.com/v2/resize:fit:218/format:webp/1*VZy8FrYpCdxlqwzMm4eh2g.png"/></div></figure><p id="5f69" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将更新Node-Red的所有配置。要使Node-Red在Simatic通电时自动启动，请键入iot2000setup。</p><p id="c697" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将出现一个GUI，选择软件-管理自动启动选项-自动启动节点-红色，然后按“完成”。</p><p id="f3ca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，转到外设-配置外部COM端口-选择-X30 COM-RS485，然后按“是”。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lp"><img src="../Images/eb7790851d9ae23ee1475ec40615ce80.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/format:webp/1*xRy-MiwZmhQoCRXwH4odQA.png"/></div></figure><p id="9f41" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要为X30 COM端口分配波特率，请在终端中键入以下命令。这一步很重要，因为默认情况下，Simatic以9600波特率运行，但三菱电能表以1200波特率运行，因此，通过将Simatic波特率更改为1200，可以在Simatic和电能表之间建立RS485通信。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/bebdca1f87c0c3db113e4064b9a35a0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:426/format:webp/1*bGXxNxf-_wtUJ0OzGIW_Cw.png"/></div></figure><p id="c7e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">更改所有设置后，重新启动Simatic。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lr"><img src="../Images/f90cfe6202ff682470c1aaf31d95471b.png" data-original-src="https://miro.medium.com/v2/resize:fit:126/format:webp/1*bC-ew4-EUST0zJTV4Y6VVA.png"/></div></figure><p id="31bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">在Simatic上安装Modbus和netpie节点:</strong></p><p id="e25b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>在Simatic上安装节点之前，确保您的Simatic通过ping测试连接到互联网。</p><p id="8e2a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装Modbus节点</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/1d5c5d63ecb746b3803135c6ff5052d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*5Z644drt0tqBKG5JhXyvpQ.png"/></div></figure><p id="5357" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">安装网络节点</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lt"><img src="../Images/d0e49ba0eefdea67fc80ff9f52cf0db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/format:webp/1*KV-tmGJwdzgb6rTLnZbt-A.png"/></div></figure><p id="0902" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">将Modbus电能表连接到Simatic: </strong></p><p id="5c3e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注意:</strong>在将Simatic与电能表连接之前，请将其断电。</p><p id="4803" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Modbus能量计由两条电线+ve和-ve组成。这两条线需要连接到Simatic的X30 COM端口的2和1引脚，如下表所述。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lu"><img src="../Images/c961f88db2586e525c094ddc922b4d77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/format:webp/1*_soJtQ0zm83ZHvNOt7XUtg.png"/></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Pins description of X30 COM Port configured as RS485 output</figcaption></figure><p id="6943" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">X30 COM端口的引脚图:</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lv"><img src="../Images/4cd9a7f3ca5a7723d94af447426d4195.png" data-original-src="https://miro.medium.com/v2/resize:fit:232/format:webp/1*ihr0z0B54sIeVOBWRB175w.png"/></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">X30 COM Port pin diagram</figcaption></figure><p id="6a25" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最终连接:</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ld"><img src="../Images/b97075f6b1cfbcf4f081a55f4598ace6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D6Lli-fK8bpnC9Q8gWJhIg.jpeg"/></div></div></figure><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ld"><img src="../Images/519edf997b3ece4db509e513fa2f2ffd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3eUAA6NuEvkm1hmdOkZnw.jpeg"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">RS485 connections between Energy Meter and Simatic</figcaption></figure><p id="50da" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">节点-红色流程:</strong></p><p id="9fbd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">打开浏览器并键入192.168.200.1:1880，将显示节点红色GUI。</p><p id="9743" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">a)打开Modbus读取节点，从电能表读取数据，打开Modbus响应节点，查看数据。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/12af8624eb875f6d34a2584f5305f526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*GynDhs9FQEmPktJ8ws42gg.png"/></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Node-Red Flow</figcaption></figure><p id="806f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Modbus读取节点的配置设置为</p><p id="427f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">单元Id — 72</p><p id="3b41" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">FC —读取保持寄存器</p><p id="44c2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">地址— 0x0066(电压)</p><p id="cd4d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">寄存器数量— 1</p><p id="f586" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">投票率— 1s</p><p id="3824" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">方法— RTU</p><p id="4903" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">模式—串行专家</p><p id="c003" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">波特率— 1200(三菱默认波特率)</p><p id="5e1c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">数据位— 8，停止位— 1，奇偶校验—偶数</p><p id="5cd9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">c)配置Microgear和发布节点向NETPIE发送数据，需要的参数有</p><p id="ecd4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">APPID</p><p id="38b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">键</p><p id="e18e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">秘密</p><p id="b6c2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">别名</p><p id="048d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">主题</p><p id="f8ad" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">注:</strong>以上参数的配置指南可在<a class="ae ko" href="https://netpie.io/tutorials" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="ad39" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">d)在NETPIE中，添加小部件来可视化数据。</p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lx"><img src="../Images/4dcdeacd91ff0ce7d87fbd7cd50355cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m-5T2M7R1-Gl1g6xL0vQsQ.png"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Configuring widget to display Energy Meter data</figcaption></figure><p id="fc3d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">结果:</strong></p><figure class="kq kr ks kt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ly"><img src="../Images/c7df328d85f6ec6b404c88d1ec7c388e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qljZlTKUxd23Eirv1xP5sg.png"/></div></div><figcaption class="kz la fg fe ff lb lc bd b be z ek">Visualizing Modbus Energy Meter data on NETPIE</figcaption></figure><p id="55a6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">结论:</strong></p><p id="1e89" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">本文是使用西门子Simatic IoT2040作为处理工业生产数据的工业网关的概念验证(PoC)。本文讨论了Modbus电能表与Simatic的集成。类似地，其他工业传感器也可以与Simatic集成，这为IIoT开辟了道路。</p></div><div class="ab cl lz ma hc mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hn ho hp hq hr"><p id="9bc5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">卡尔蒂克·穆希尼尼</p><p id="ebb6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">电信/信息和通信技术硕士</p></div></div>    
</body>
</html>