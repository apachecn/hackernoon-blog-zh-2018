<html>
<head>
<title>XCode Advance Debugging</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">XCode高级调试</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/xcode-advance-debugging-a60f57065d3f?source=collection_archive---------8-----------------------#2018-08-03">https://medium.com/hackernoon/xcode-advance-debugging-a60f57065d3f?source=collection_archive---------8-----------------------#2018-08-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="dd39" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt jp translated"><span class="l jq jr js bm jt ju jv jw jx di"> H </span>你有没有遇到过这样的情况:在修复一些bug时，甚至在开发过程中，为了模拟代码中的一些场景，你临时修改了现有的代码来实现这个场景？</p><p id="f882" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是很常见的，你更多的花费是重新编译代码，并重新开始调试，以使修改后的代码生效。</p><p id="3233" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当你需要一次又一次地修改某些东西并一次又一次地重新开始调试时，这变得更加严重。</p><p id="754e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您的应用程序是一个简单的应用程序，这可能对您来说不是问题，但考虑一个需要登录的应用程序，您需要浏览各种屏幕并执行各种操作，以实际到达可以执行您修改的代码的情况或屏幕。</p><p id="db25" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你可以在不重新编译和重新启动调试的情况下，在同一个调试会话中实现这一点，是的，你可以做到！</p><p id="aa0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们试试看。考虑下面的代码，我需要更改<code class="eh jy jz ka kb b">flag </code>的值，只是为了输入第一个if条件来调试一些问题。</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="0a8a" class="kk kl hu kb b fv km kn l ko kp">if(flag){<br/>     print("Hello, I am Inside If")<br/>}<br/>else{<br/>     print("Hello, I am Inside Else")<br/>}</span></pre><ol class=""><li id="6ee5" class="kq kr hu it b iu iv iy iz jc ks jg kt jk ku jo kv kw kx ky dt translated">只需在if条件上设置一个断点，然后运行应用程序。</li></ol><p id="717d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">2.一旦命中断点，右击断点，选择<strong class="it hv"> <em class="kz">编辑</em> <em class="kz">断点</em> </strong>。</p><figure class="kc kd ke kf fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff la"><img src="../Images/19df13a6516d4ed977c980e5854b2c9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OHi6saot5SrgSymv0NuMAg.png"/></div></div></figure><p id="7031" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">3.点击<strong class="it hv"> <em class="kz">添加动作</em> </strong>，在<em class="kz">调试器命令</em>字段输入以下代码。(如果调试器命令选项在默认情况下没有在组合框中选择，请更改它并手动选择调试器命令，然后输入以下代码)</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="1e08" class="kk kl hu kb b fv km kn l ko kp">expression flag = true</span></pre><p id="fddd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">4.另外，选中选项“<strong class="it hv"> <em class="kz">评估动作</em> </strong>后自动继续”。<em class="kz">选择此选项将允许调试器在评估提供的表达式后继续运行，而无需暂停控制，即使断点已启用。您也可以选择不选中它。</em></p><figure class="kc kd ke kf fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff li"><img src="../Images/1a80330c606f83024338073a71881910.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cvxv40p-FumsCf5SdT1PtQ.png"/></div></div></figure><p id="d921" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.继续被暂停的断点执行，从下一次执行开始，该标志将根据上述表达式自动设置为<em class="kz"> false </em>，而不会因为断点而暂停，甚至不会重新编译代码。</p><p id="9718" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这只是一个非常简单的例子，演示了如何插入带有断点的表达式。现实生活中的情况可能不仅仅取决于一个标志，很可能你需要插入多个语句来执行。</p><p id="250b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你甚至可以为更复杂的场景配置多行表达式，但是要记住每一行代码前面都应该有<em class="kz">表达式</em>。</p><p id="af55" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">例如，如果我只想在此自定义断点更改此标志的值时打印日志，我可以将调试器命令更新为:</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="db9a" class="kk kl hu kb b fv km kn l ko kp">expression flag = false<br/>expression print("Value of Flag changed to false by Debugger")</span></pre><p id="a6d0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦再次运行，每次执行该语句时都会打印日志。</p><figure class="kc kd ke kf fq lb fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/1436de8827b8fa5616ced4a18b83905e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*_lWpB7RwYlrSlI_DOGaVkg.png"/></div></figure><h2 id="c1e9" class="kk kl hu bd lk ll lm ln lo lp lq lr ls jc lt lu lv jg lw lx ly jk lz ma mb mc dt translated">跳过指令集:</h2><p id="779d" class="pw-post-body-paragraph ir is hu it b iu md iw ix iy me ja jb jc mf je jf jg mg ji jj jk mh jm jn jo hn dt translated">除了插入指令之外，您还可以配置断点来跳过调试临时使用的一行或多行。当您想跳过一条指令，或者用其他临时指令替换一条指令，或者更改传递给方法调用的值时，这可能是必需的。</p><p id="1bbc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">说，我们有以下代码</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="764b" class="kk kl hu kb b fv km kn l ko kp">func someOtherMethod(){<br/>     //Some other code <br/>     self.sayHello(to:"Viresh")<br/>     //Some other code<br/>}</span><span id="f3ce" class="kk kl hu kb b fv mi kn l ko kp">func sayHello(to name:String)<br/>     print("Hello \(name)")<br/>}</span></pre><p id="2709" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，在调用<code class="eh jy jz ka kb b">sayHello </code>方法时，我们想用其他值调用它，而不是“<em class="kz">权限</em>”。因此，要这样做，我们实际上可以跳过这条指令，插入一条具有新值的新指令。</p><ol class=""><li id="64fa" class="kq kr hu it b iu iv iy iz jc ks jg kt jk ku jo kv kw kx ky dt translated">只需在<code class="eh jy jz ka kb b">self.sayHello(to:”Viresh”) </code>上放一个断点，运行你的app。</li><li id="804a" class="kq kr hu it b iu mj iy mk jc ml jg mm jk mn jo kv kw kx ky dt translated">点击断点后，右键<strong class="it hv">和<em class="kz">编辑断点</em> </strong>并选择<strong class="it hv"> <em class="kz">添加动作</em> </strong>。(上面我们刚做的方式)。</li><li id="5c98" class="kq kr hu it b iu mj iy mk jc ml jg mm jk mn jo kv kw kx ky dt translated">在<em class="kz">调试器命令</em>中添加以下表达式。</li></ol><figure class="kc kd ke kf fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff mo"><img src="../Images/b40e7f99c7641816aaf45dbc9f3eabd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aXMD6AwTZxVXqwIQmkKlOQ.png"/></div></div></figure><p id="4795" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此语句将导致调试器跳过应用此断点的指令。</p><p id="24e3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">5.现在添加一个新的调试器命令来代替跳过的指令实际执行。只需在弹出的编辑断点行的<strong class="it hv"> <em class="kz">动作</em> </strong>中点击<strong class="it hv"> + </strong>即可添加指令。整个断点应该如下所示:</p><figure class="kc kd ke kf fq lb fe ff paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="fe ff mp"><img src="../Images/71bc54f15397e4cc682d68eb3d6935ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N-wewHXdY5ajA6-fjGmfdw.png"/></div></div></figure><p id="2dd4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">6.只需继续断点，您将看到更改生效，无需重新编译或重新启动调试。</p><p id="7418" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，这里发生的是，我们在这个调试会话中，用一个新指令替换当前指令。</p><p id="5d19" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">需要记住的几个要点:</p><ul class=""><li id="7afd" class="kq kr hu it b iu iv iy iz jc ks jg kt jk ku jo mq kw kx ky dt translated">您可以在调试器命令中添加多行代码，可以在同一个调试器命令中添加，也可以通过添加多个调试器命令来添加。</li><li id="dfc1" class="kq kr hu it b iu mj iy mk jc ml jg mm jk mn jo mq kw kx ky dt translated">编辑断点时，调试应该处于活动状态，并且应该在您正在编辑的断点处暂停。</li><li id="1c84" class="kq kr hu it b iu mj iy mk jc ml jg mm jk mn jo mq kw kx ky dt translated">如果禁用断点，调试器中提供的指令将不会生效，只有在断点启用时才能看到它们的动作。</li></ul><p id="0cbd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">调试愉快！</p></div></div>    
</body>
</html>