<html>
<head>
<title>A Tale of Cloud, Containers and Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">云、容器和Kubernetes的故事</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-tale-of-cloud-containers-and-kubernetes-b6fb18edcfcd?source=collection_archive---------17-----------------------#2018-08-03">https://medium.com/hackernoon/a-tale-of-cloud-containers-and-kubernetes-b6fb18edcfcd?source=collection_archive---------17-----------------------#2018-08-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="6b64" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">即使你没有参与过Kubernetes的工作，你也有可能至少听说过或读过它。它已经是有史以来最受欢迎的开源项目之一，并且仍在开发中。我们需要了解我们从何而来，才能体会到我们今天的处境。Kubernetes也是如此。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/215a6c59a2780ff4aa5a33294569edd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6kZO8kBIc4hQPRYS-Q47nQ.jpeg"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><em class="kg">Photo by </em><a class="ae jp" href="https://unsplash.com/photos/tjX_sniNzgQ?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><em class="kg">frank mckenna</em></a><em class="kg"> on </em><a class="ae jp" href="https://unsplash.com/search/photos/container?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank"><em class="kg">Unsplash</em></a></figcaption></figure><p id="afe2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最近有人告诉我，‘无聊的基础设施现在变得有趣了’。在这种情况下,“无聊”是一个我不喜欢的词。但是我同意开发者社区在十多年前就在讨论基础设施和运营。看完这篇文章，你就会明白为什么会这样了。</p><p id="8444" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我将概述使这种转变成为可能的发展，为什么你应该关心它们，以及Kubernetes适合在哪里。</p><h1 id="e30e" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">巨石和金属</h1><p id="06c1" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">我很幸运在那个时代开始了软件开发，那时<a class="ae jp" href="https://hackernoon.com/tagged/cloud" rel="noopener ugc nofollow" target="_blank">云计算已经很普遍，AWS部署也很规范。事实上，云资源的便利性是今天更多人选择软件开发的原因之一。</a></p><p id="f151" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在20世纪90年代和21世纪初，软件主要是作为大型代码库——单片——编写的，并使用专有硬件在内部部署。<a class="ae jp" href="https://f5.com/glossary/load-balancer" rel="noopener ugc nofollow" target="_blank">负载平衡器</a>，以其软件的形式被认为是昂贵的硬件。正如<a class="ae jp" href="https://www.linkedin.com/in/zen-tek/" rel="noopener ugc nofollow" target="_blank">乔希·埃文斯</a>在他关于网飞建筑的<a class="ae jp" href="https://www.youtube.com/watch?v=CZ3wIuvmHeM" rel="noopener ugc nofollow" target="_blank">深刻的演讲</a>中指出的，“试图在表格中增加一列是一个跨职能的大项目”。软件组件过去是紧密耦合的，硬件替换是困难的，水平可伸缩性甚至不是一件事情。如果你是一家服务公司，更新一个客户的软件意味着携带一个补丁并在现场进行更新。</p><p id="9b5e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">缓解这些限制的努力，加上廉价的硬件和快速的互联网，将我们带入了一个云计算和开发运维的时代。<strong class="it hv"> DevOps </strong>，对于不了解的人来说，是一种旨在统一软件开发(Dev)和软件运营(Ops)流程的哲学。这篇博客中介绍的概念，从容器到Kubernetes，将这种哲学的一部分付诸实践。</p><h1 id="c519" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">在云端</h1><p id="ef98" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">如今云计算无处不在——这个博客所在的服务甚至使用云计算。如果你仍然不清楚这个术语的意思，这里有一个来自微软Azure的定义来澄清事情:</p><blockquote class="lk ll lm"><p id="a51b" class="ir is ln it b iu iv iw ix iy iz ja jb lo jd je jf lp jh ji jj lq jl jm jn jo hn dt translated">简而言之，<strong class="it hv">云计算</strong>是通过互联网(“云”)交付计算服务——服务器、存储、数据库、网络、软件、分析等。提供这些计算服务的公司被称为云提供商，通常根据使用情况对云计算服务收费，就像你在家里的水费或电费账单一样。</p></blockquote><p id="5fe3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">随着<a class="ae jp" href="https://www.cncf.io/blog/2017/05/15/developing-cloud-native-applications/" rel="noopener ugc nofollow" target="_blank">云原生应用</a>变得无处不在，云计算成为常态也就不足为奇了。虽然现在有很多提供商，包括Azure和谷歌云，但在2000年代中期，是亚马逊的AWS启动了云计算革命。如果你有兴趣获得更深入的视角，请查看AWS 的<a class="ae jp" href="https://en.wikipedia.org/wiki/Timeline_of_Amazon_Web_Services" rel="noopener ugc nofollow" target="_blank">时间轴或著名的</a><a class="ae jp" href="https://plus.google.com/+RipRowan/posts/eVeouesvaVX" rel="noopener ugc nofollow" target="_blank">“谷歌平台咆哮”</a>。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lr"><img src="../Images/28c6ddb0901742af2f68b5c1bf2ba0ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gYCDkvyLcyNJnQZA1XSnhA.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">A glimpse at AWS’ offerings</figcaption></figure><p id="f328" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">云</strong>’已经成为一个流行语，但它实际上是什么意思呢？这是一种由一组技术支持的方法，而不是一组技术本身。使云生态系统成为可能的核心技术之一是虚拟化。Redhat的<a class="ae jp" href="https://www.redhat.com/en/topics/cloud-computing/cloud-vs-virtualization" rel="noopener ugc nofollow" target="_blank">博客比较了云计算和虚拟化</a>是一个很好的资源。引用自同一博客，</p><blockquote class="lk ll lm"><p id="7f00" class="ir is ln it b iu iv iw ix iy iz ja jb lo jd je jf lp jh ji jj lq jl jm jn jo hn dt translated"><strong class="it hv">“虚拟化</strong>是一种将功能与硬件分离的技术，而云依赖于这种分离……虚拟化是一种允许您从单个物理硬件系统创建多个模拟环境或专用资源的技术。”</p></blockquote><p id="30cc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您可以在一个硬件上创建多个虚拟环境，在每个环境中运行单独的服务，并通过互联网向客户提供服务。这是云计算工作方式的简化版本。虚拟化使新的基础设施浪潮的另一个关键组件——容器——成为可能。</p><h1 id="8049" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">在容器中进行微加工</h1><p id="b360" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">即使您在来到这里之前没有听说过虚拟化，您也有可能偶然发现了它的两种流行实现方式之一——虚拟机和容器。我们可以用一整篇文章来讨论这两者的区别。(其实早就有人做过<a class="ae jp" href="https://blog.netapp.com/blogs/containers-vs-vms/" rel="noopener ugc nofollow" target="_blank">相当于</a> <a class="ae jp" href="https://www.sdxcentral.com/cloud/containers/definitions/containers-vs-vms/" rel="noopener ugc nofollow" target="_blank">一</a> <a class="ae jp" href="http://www.electronicdesign.com/dev-tools/what-s-difference-between-containers-and-virtual-machines" rel="noopener ugc nofollow" target="_blank">位</a>)。两者之间的主要区别在于虚拟化的完成级别。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ls"><img src="../Images/77f470a349935f130c8f0c36a8a4db64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I_dHalFon_X-dzAe0qjXSA.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek"><a class="ae jp" href="https://theleanapps.com/" rel="noopener ugc nofollow" target="_blank">Lean Apps</a> made a great chart explaining the difference between containers and virtual machines. <a class="ae jp" href="https://theleanapps.com/docker-monolithic-app/" rel="noopener ugc nofollow" target="_blank">Read their full article here.</a></figcaption></figure><p id="1498" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">虚拟机</strong> (VMs)虚拟化硬件以运行多个操作系统(OS)实例。借助<strong class="it hv">容器</strong>，一个操作系统被虚拟化以运行多个工作负载或进程。容器消除了运行虚拟机带来的开销。集装箱化已经以不同的形式存在了一段时间，但直到2013年Docker的出现才使集装箱成为主流。</p><p id="9f6d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与采用任何新技术一样，开销与现有应用程序的容器化有关。您需要考虑<a class="ae jp" href="https://news.ycombinator.com/item?id=16892670" rel="noopener ugc nofollow" target="_blank">可能的挑战</a>，包括那些与管理和安全相关的挑战。例如，由于多个容器共享同一个内核，一个潜在的错误会影响所有的容器。</p><p id="86a2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然而，容器提供了众多的优势，这有助于它们被更多的采用。最常见的优势是能够在开发和生产环境中保持平衡，其次是易于部署。</p><p id="c831" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">微服务软件架构的采用与容器化的兴起不谋而合。Martin Fowler撰写的广为流传的<a class="ae jp" href="https://martinfowler.com/articles/microservices.html" rel="noopener ugc nofollow" target="_blank">微服务文章</a>中概述了可以帮助您识别微服务的定义特征。容器化很好地补充了这些核心特征，比如组件化和故障设计。对于这个架构<a class="ae jp" href="https://thenewstack.io/miniservices-a-realistic-alternative-to-microservices/" rel="noopener ugc nofollow" target="_blank">的采用程度在声称使用它的团队</a>中会有所不同，但是毫无疑问，它的想法在设计软件时会很有用。容器有助于将这些想法付诸实践。</p><p id="35ef" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="ln">注:</em> <a class="ae jp" href="https://12factor.net/" rel="noopener ugc nofollow" target="_blank"> <em class="ln"> 12因素app </em> </a> <em class="ln">最初是由Heroku的人编写的，作为云时代应用程序开发的框架。它还可以很好地与微服务架构和容器部署配合使用。一定要读一读。</em></p><h1 id="5630" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">编排字符串(或容器)</h1><p id="47aa" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">通常，您的应用程序会使用多个容器运行。随着规模的扩大，这些容器可以达到几十个甚至几百个。它们需要相互交互和维护，因此您需要一个工具来管理或编排它们。虽然有很多编排工具可用，但是最近Kubernetes成为了标准。</p><p id="894d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> Kubernetes </strong>，或K8s，最初是由谷歌设计的。自从它从搜索巨头用来管理其集装箱船队的Borg项目中脱颖而出以来，它一直享有很高的可信度。K8s现在由<a class="ae jp" href="https://www.cncf.io/" rel="noopener ugc nofollow" target="_blank">云原生计算基金会</a>维护，正在积极开发中。</p><p id="f1d5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">托管自己的Kubernetes集群会带来一系列独特的挑战，比如网络设置。然而，托管解决方案，如谷歌云平台的<a class="ae jp" href="https://cloud.google.com/kubernetes-engine/docs/" rel="noopener ugc nofollow" target="_blank"> Kubernetes引擎</a>让K8s变得更容易使用。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lt"><img src="../Images/f3f0bd7d5d05c40602f0db7fb0f5131c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gdcXGSqz_9RVsuJ1u1voxQ.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Google Kubernetes Engine (GKE) dashboard</figcaption></figure><p id="b1ec" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Kubernetes很好地运用了12因素方法论和DevOps哲学。它还允许你接受一个不变的基础设施的想法。(但是，您如何采用这些理念将因您组织的资源和需求而异。)</p><p id="6c65" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">到目前为止，我们在SocialCops上使用k8的体验基本上是积极的。我们将很快发布关于如何使用它的详细帖子。然而，我鼓励你对K8s以及这篇文章中提到的所有其他概念做出自己的决定。在论坛上讨论这些话题可能会有所帮助，比如Reddit或T2黑客新闻。</p><h1 id="01e4" class="kh ki hu bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le dt translated">下一步是什么？</h1><p id="1afe" class="pw-post-body-paragraph ir is hu it b iu lf iw ix iy lg ja jb jc lh je jf jg li ji jj jk lj jm jn jo hn dt translated">互联网上有很多关于容器和Kubernetes的资料。你可以从阅读Docker或Kubernetes的官方文档开始。或者，如果你愿意，你可以通读一篇<a class="ae jp" href="https://www.digitalocean.com/community/tutorials/an-introduction-to-kubernetes" rel="noopener ugc nofollow" target="_blank">介绍文章</a>或者尝试一篇<a class="ae jp" href="https://www.katacoda.com/courses/kubernetes" rel="noopener ugc nofollow" target="_blank">互动教程</a>。</p><p id="3442" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果以上所有或大部分对你来说都是新的，那么你可能已经遭受了科技术语超载的困扰。如果是这样也不用担心。这篇文章中的概念和技术是几十年工作的成果。你不会一次就得到它们，你也不应该得到它们！如果有的话，把这个博客中的信息作为开始思考DevOps哲学和工具的基础，包括Kubernetes。</p><p id="79b2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们毕竟站在巨人的肩膀上。</p></div><div class="ab cl lu lv hc lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hn ho hp hq hr"><p id="1e7d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="ln">在SocialCops，我们在数据和技术的交叉点上开发产品，以解决当今世界面临的一些最大挑战。听起来很有趣？来和我们一起建造吧！我们正在招聘软件工程师来帮助我们为下一个10亿人做准备。了解更多并在此应用</em><a class="ae jp" href="https://socialcops.com/careers/?utm_campaign=footer&amp;utm_medium=referral&amp;utm_source=blog" rel="noopener ugc nofollow" target="_blank"><em class="ln"/></a><em class="ln">。</em></p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/47c0395aebe541aed62d0ab8083c3cb2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1346/format:webp/0*D1KC80vGbjpvnIh5.png"/></div></figure></div><div class="ab cl lu lv hc lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="hn ho hp hq hr"><p id="c5ad" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="ln">原载于2018年8月3日</em><a class="ae jp" href="https://blog.socialcops.com/technology/engineering/tale-cloud-containers-kubernetes/" rel="noopener ugc nofollow" target="_blank"><em class="ln">blog.socialcops.com</em></a><em class="ln">。</em></p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="mc md l"/></div></figure></div></div>    
</body>
</html>