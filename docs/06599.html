<html>
<head>
<title>React Project Architecture using Barrels</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用桶反应项目架构</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/react-project-architecture-using-barrels-d086146eb0f6?source=collection_archive---------11-----------------------#2018-08-07">https://medium.com/hackernoon/react-project-architecture-using-barrels-d086146eb0f6?source=collection_archive---------11-----------------------#2018-08-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><div class="ab fr cl iv"><img src="../Images/b87c2a21f14090ac93cc45e632195a2e.png" data-original-src="https://miro.medium.com/v2/format:webp/1*i4JSARqDcVOH5tlQByxVEw.png"/></div></figure><p id="e81a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当构建一个大型应用程序时，您将不得不大量重构您的导入语句。桶会让它更容易。</p><p id="1928" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">桶是一种将几个模块的导出汇总到单个方便的模块中的方法。桶本身是一个模块文件，它重新导出其他模块的选定导出。<em class="jw">来源:</em><a class="ae jx" href="https://basarat.gitbooks.io/typescript/docs/tips/barrel.html" rel="noopener ugc nofollow" target="_blank"><em class="jw">https://basarat . git books . io/typescript/docs/tips/barrel . html</em></a></p><p id="146b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">Angular 2+相当广泛地使用桶，我试图弄清楚如何在<a class="ae jx" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> react </a>中使用它。我通过create-react-app开始了创建react应用程序的旅程。</p><p id="6b1a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">为什么要用桶？</strong></p><p id="ab7d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在有多个团队的企业开发中，如果你想改变你的项目结构，一旦每个分支合并在一起，这将是一个噩梦。想象多个团队都在不同的sprints上使用一些共享/核心<a class="ae jx" href="https://hackernoon.com/tagged/functionality" rel="noopener ugc nofollow" target="_blank">功能</a>。我看到的情况是，一个团队重构一些共享/核心代码，并在任何地方破坏导入。</p><p id="8e6b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我的例子中，我有一个位于路径<code class="eh jy jz ka kb b">`./components/layout/Navbar’;</code>下的NavBar组件，在React组件的底部，您会看到:</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="1595" class="kk kl hu kb b fv km kn l ko kp">export default NavBar;</span></pre><p id="e9b4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我将要注入这个NavBar组件的App.js中，我必须首先将它和我的其他布局组件一起导入:</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="82cb" class="kk kl hu kb b fv km kn l ko kp">import NavBar from './components/layout/NavBar.js';<br/>import SidebarMenu from './components/layout/SidebarMenu.js';<br/>import Content from './components/layout/Content.js';<br/>import Footer from './components/layout/Footer.js';</span></pre><p id="d9d9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">桶装为我提供了一种将这四行代码简化为:</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="8a89" class="kk kl hu kb b fv km kn l ko kp">import { SidebarMenu, Footer, Content, NavBar } from './components';</span></pre><p id="646a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">您还可以更进一步，将从组件文件夹中导出的所有内容都命名为别名，然后全部导入。</p><pre class="kc kd ke kf fq kg kb kh ki aw kj dt"><span id="3bda" class="kk kl hu kb b fv km kn l ko kp">import * as comp from './components';</span></pre><p id="56f2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在我的App.js组件中，我可以通过在它前面加上comp来引用任何组件。所以要引用我的导航条，我只用<code class="eh jy jz ka kb b">&lt;comp.NavBar /&gt;</code></p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div class="fe ff kq"><img src="../Images/da3ea39c6630dae305e2751f48aa0575.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*n2khcEY7rhRItLC-Nx36NA.png"/></div></figure><p id="ae06" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这一点的美妙之处在于，如果我从<code class="eh jy jz ka kb b">`./components/layout/Navbar’; to `./CoreModule/Shared/Layout/Navbar’;</code>改变导航条组件的位置</p><p id="0ff2" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我不必重构我的App.js组件的导入。</p><p id="05f7" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">它是如何工作的？</strong></p><p id="8c63" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我选择的构建应用程序的方式是每个组件都有自己的文件夹。内容是组件js文件、组件css文件和为我们做桶装的index.js文件。</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/da98edc47841a02efeccfc0bb9233106.png" data-original-src="https://miro.medium.com/v2/resize:fit:342/format:webp/1*2-0DLjSQFCzihubOtPk7wA.png"/></div></figure><p id="eb4e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">该组件文件夹中index.js的内容:<br/> <code class="eh jy jz ka kb b">export {default as NavBar} from "./NavBar";</code></p><p id="6fc9" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当我开始我的桶装旅行时，我错过了一个重要的词:T21默认。在最底层的组件中，必须导出默认的类。</p><p id="55ac" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">父文件夹只需要导出一级子文件夹。</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff ks"><img src="../Images/151ce3d50bb4b994ef3c3478bf121f52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbieJQ5iqSVSKfeAu90rdA.png"/></div></div></figure><p id="bbdb" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">请注意，您不再导出默认类。当您说<code class="eh jy jz ka kb b">default as NavBar </code>时，您正在重命名默认导出。</p><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff kx"><img src="../Images/54770a9222af49e3ab7d42fd58e79978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OZiShcyOEXjcCq6h-haElw.png"/></div></div><figcaption class="ky kz fg fe ff la lb bd b be z ek">this is the next level above layout</figcaption></figure><figure class="kc kd ke kf fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff lc"><img src="../Images/4d977a3dde1ee47ebea727e6fc20f308.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9ZcwfqcUICSxvFR36FTyJw.png"/></div></div><figcaption class="ky kz fg fe ff la lb bd b be z ek">top level module</figcaption></figure><p id="c26d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">对于实现此更改的提交，您可以看到:<a class="ae jx" href="https://github.com/crh225/react-firebase/commit/f3cda6732b3aafe0b2283f19b7ea89e82cc85ed6" rel="noopener ugc nofollow" target="_blank">https://github . com/CRH 225/react-firebase/commit/F3 CDA 6732 B3 aafe 0 b 2283 f 19 b 7 ea 89 e 82 cc 85 ed 6</a></p><p id="91fa" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">回购:<a class="ae jx" href="https://github.com/crh225/react-firebase" rel="noopener ugc nofollow" target="_blank">https://github.com/crh225/react-firebase</a></p><p id="a979" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">Typescript中关于桶的进一步阅读:<a class="ae jx" href="https://basarat.gitbooks.io/typescript/docs/tips/barrel.html" rel="noopener ugc nofollow" target="_blank">https://basarat . git books . io/Typescript/docs/tips/barrel . html</a></p><figure class="kc kd ke kf fq iu"><div class="bz el l di"><div class="ld le l"/></div></figure></div></div>    
</body>
</html>