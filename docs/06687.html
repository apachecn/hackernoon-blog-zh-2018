<html>
<head>
<title>How to Build a Personal Music Site powered by Cosmic JS and Nuxt.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何建立一个由Cosmic JS和Nuxt.js驱动的个人音乐网站</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-a-personal-music-site-powered-by-cosmic-js-and-nuxt-js-e749bce8bf0?source=collection_archive---------17-----------------------#2018-08-09">https://medium.com/hackernoon/how-to-build-a-personal-music-site-powered-by-cosmic-js-and-nuxt-js-e749bce8bf0?source=collection_archive---------17-----------------------#2018-08-09</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/c1cf83062860610c10d7f59d22e564d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ydGc970F_VuQvth4fKBrGQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Article originally written by Sergey Ukolov in Cosmic JS Developer Articles.</figcaption></figure><p id="8eeb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>让你轻松创建嵌套的对象结构，上传媒体文件。在本教程中，我们将学习如何构建嵌套结构，以及如何从<a class="ae ke" href="https://cosmicjs.github.io/rest-api-docs/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS API </a>中获取这些数据，以便在一个由Cosmic JS和Nuxt.js支持的简单的个人音乐网站中使用</p><h1 id="ae9d" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">TL；博士:</h1><p id="477b" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated"><a class="ae ke" href="https://cosmicjs.com/apps/vue-music-website" rel="noopener ugc nofollow" target="_blank">个人音乐网站演示</a> <br/> <a class="ae ke" href="https://github.com/cosmicjs/vue-music-website" rel="noopener ugc nofollow" target="_blank">个人音乐网站代码库</a></p><h1 id="6820" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">介绍</h1><p id="e8a6" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">因为已经有很多文章可以让您学习如何使用Cosmic JS Dashboard，所以我们将使用一个已经准备好的Bucket snapshot。</p><h1 id="c53a" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">创建一个桶</h1><p id="f450" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">首先，您需要创建一个新的存储桶，因为下一步<strong class="ji hv">将从其中删除所有数据</strong>。</p><p id="afa7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">下载base <a class="ae ke" href="https://raw.githubusercontent.com/zezic/cosmicjs-music-site/master/bucket.json" rel="noopener ugc nofollow" target="_blank"> bucket.json </a>，其中包含bucket对象模板描述以及我们应用程序的一些演示数据。要将其导入到您的Bucket，只需遵循您的Bucket dashboard页面并导航到<em class="li">设置&gt;导入/导出</em>部分；你会看到<em class="li">添加导入文件</em>按钮——点击它，选择你之前下载的<em class="li"> bucket.json </em>文件。</p><p id="7501" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，带有新导入的对象模板的存储桶允许您将对象构建到下一个结构中:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/9dc4012dbaee81890c617b995c131b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/0*MGiZeduShO51JYc3.png"/></div></figure><p id="3173" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在Cosmic JS中，当您需要将对象嵌套/链接到另一个对象时，您可以使用多对象关系元字段。然后，当你获取根对象时，你将通过元字段对象获得所有与之相关的项目。在下一段中，您将看到如何部署一个只通过一个Cosmic JS API请求就能访问这些结构的应用程序。</p><h1 id="af7c" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">部署应用程序</h1><p id="d5a7" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">要部署实际的应用程序，请遵循以下步骤:</p><p id="5e0d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> 1)将存储库克隆到你的机器上，然后转到新创建的文件夹</strong></p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="b6b2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> 2)安装应用依赖关系</strong></p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="179a" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> 3)配置您的本地应用实例</strong></p><p id="747f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">实际上，配置Cosmic JS托管应用程序的方式是通过读取环境变量，但这次为了更清楚地了解我们的本地部署，我们只编辑名为<strong class="ji hv"> instance.config.js </strong>的文件。为了能够针对您自己的Cosmic JS Bucket运行应用程序，您需要更改该文件中的以下3个属性:</p><ul class=""><li id="b5e6" class="lq lr hu ji b jj jk jn jo jr ls jv lt jz lu kd lv lw lx ly dt translated"><strong class="ji hv">鼻涕虫</strong></li><li id="3954" class="lq lr hu ji b jj lz jn ma jr mb jv mc jz md kd lv lw lx ly dt translated"><strong class="ji hv"> read_key </strong></li><li id="3408" class="lq lr hu ji b jj lz jn ma jr mb jv mc jz md kd lv lw lx ly dt translated"><strong class="ji hv">写_键</strong></li></ul><p id="4061" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">要获得此设置，请转到您的铲斗仪表板，导航至<em class="li">设置&gt;基本设置</em>。在那里，您将看到名为:</p><ul class=""><li id="d907" class="lq lr hu ji b jj jk jn jo jr ls jv lt jz lu kd lv lw lx ly dt translated"><strong class="ji hv">斗蛞蝓</strong></li><li id="4da8" class="lq lr hu ji b jj lz jn ma jr mb jv mc jz md kd lv lw lx ly dt translated"><strong class="ji hv"> API读取访问键</strong></li><li id="6d64" class="lq lr hu ji b jj lz jn ma jr mb jv mc jz md kd lv lw lx ly dt translated"><strong class="ji hv"> API写访问键</strong></li></ul><p id="9600" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">将这些字段的值复制到您的<strong class="ji hv"> instance.config.js </strong>并保存它。之后，它应该看起来像这样:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="3245" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv"> 4)运行应用程序</strong></p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="189d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在应用程序构建完成后，你会看到一条消息说服务器已经在它的地址和端口上启动了。使用您的web浏览器导航到此地址。您应该会看到应用程序主页，其中包含从您的存储桶加载的演示数据:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff me"><img src="../Images/f67c461790ba2521311b296b53b6da35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zlM1uIwiyE7dh459.png"/></div></div></figure><h1 id="906f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">了解如何获取数据</h1><p id="7e2f" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">当您习惯了JavaScript作为一种异步语言时，从Cosmic JS获取数据到您的JS应用程序是非常简单的。在这个特定的应用程序示例中，我们使用一个小工厂来生成一个承诺，该承诺后来解析为Bucket实例，允许我们从中获取对象。在这个文件<a class="ae ke" href="https://github.com/zezic/cosmicjs-music-site/blob/master/lib/cosmic.js" rel="noopener ugc nofollow" target="_blank">中，你可以看到它是如何完成的:</a></p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="5c23" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">您可以注意到Bucket初始化需要我们在配置文件中预先设置的参数。</p><p id="1f86" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然后，您可以看到Bucket access实际上是如何用于应用程序的状态管理的。这里是<a class="ae ke" href="https://github.com/zezic/cosmicjs-music-site/blob/master/store/index.js" rel="noopener ugc nofollow" target="_blank">索引Vuex文件</a>的简化视图:</p><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="lo lp l"/></div></figure><p id="55e2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们在这里等待着诺言何时兑现。然后我们调用<strong class="ji hv"> getObjects </strong>,类型为“authors ”,数量限制为1，并禁用元字段解释。然后，如果响应返回非空状态，我们选择第一个收到的对象，并将其存储到我们的状态。就是这样！</p><p id="818b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果您想更仔细地查看收到的数据，您可以安装<a class="ae ke" href="https://github.com/vuejs/vue-devtools" rel="noopener ugc nofollow" target="_blank"> vue-devtools </a>，然后通过<strong class="ji hv">“NPM run dev”</strong>命令在开发模式下运行app，并通过浏览器中的vue-devtools检查Vuex状态。你会看到接收到的数据树不仅包含作者对象，还包含相关的专辑和曲目。</p><h1 id="4fad" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">把数据推送给Cosmic JS怎么样？</h1><p id="d26a" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">您不仅可以从Bucket中“读取”对象，还可以将它们写入(创建)到Bucket中。为了实现这种操作，我们的应用程序允许用户发布关于相册的评论。在注释表的上下文中查看<a class="ae ke" href="https://github.com/zezic/cosmicjs-music-site/blob/master/components/CommentForm.vue#L50-L60" rel="noopener ugc nofollow" target="_blank">下一段代码，您会发现使用<strong class="ji hv"> addObject </strong>方法创建对象就像通过<strong class="ji hv"> getObjects </strong>从Cosmic JS中获取它们一样简单。</a></p><h1 id="c142" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论</h1><p id="71b9" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">Cosmic JS允许您基于多个对象关系创建数据结构，然后通过几行代码在您的应用程序中接收这些数据。</p><p id="9d69" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你对用Cosmic JS构建应用有任何意见或问题，<a class="ae ke" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我们</a>和<a class="ae ke" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank">在Slack上加入对话</a>。</p></div></div>    
</body>
</html>