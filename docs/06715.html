<html>
<head>
<title>Decentralized identity: W3C standards and the ixo KeySafe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分散身份:W3C标准和ixo KeySafe</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/decentralized-identity-w3c-standards-and-the-ixo-keysafe-69d7e8d6fd7c?source=collection_archive---------15-----------------------#2018-08-10">https://medium.com/hackernoon/decentralized-identity-w3c-standards-and-the-ixo-keysafe-69d7e8d6fd7c?source=collection_archive---------15-----------------------#2018-08-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="f02d" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">以及如何可证明地将DID与人相关联</h2></div><p id="6d41" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ixo是可持续发展影响的区块链，旨在帮助标准化影响的衡量和奖励。通过他们的协议和本地IXO令牌，ixo计划通过开启一个收集和验证影响数据的新经济来激励对影响项目的资助和跟踪。</p><p id="0326" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">ixo鼓励数据完整性是至关重要的。因此，他们高度参与分散的身份空间，因为正确识别几个网络利益相关者很重要。ixo使用W3C DID和可验证声明标准草案来促进这个过程。</p><p id="6254" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="kg">(参见:关于去中心化身份，我之前写过关于ERC 725和ERC 735的文章，内容是为众筹销售实现一个简单的KYC声明验证，请看下文。)</em></p><div class="kh ki fm fo kj kk"><a href="https://hackernoon.com/first-impressions-with-erc-725-and-erc-735-identity-and-claims-4a87ff2509c9" rel="noopener  ugc nofollow" target="_blank"><div class="kl ab ej"><div class="km ab kn cl cj ko"><h2 class="bd hv fv z el kp eo ep kq er et ht dt translated">对ERC 725和ERC 735的第一印象——身份和主张</h2><div class="kr l"><h3 class="bd b fv z el kp eo ep kq er et ek translated">为众筹销售实现简单的KYC索赔验证</h3></div><div class="ks l"><p class="bd b gc z el kp eo ep kq er et ek translated">hackernoon.com</p></div></div><div class="kt l"><div class="ku l kv kw kx kt ky kz kk"/></div></div></a></div><h1 id="0a24" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">W3C标准</h1><p id="3fa4" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">一直以来，W3C都是开路先锋，一直在努力为<a class="ae kf" href="https://w3c-ccg.github.io/did-spec/" rel="noopener ugc nofollow" target="_blank">分散标识符</a>和<a class="ae kf" href="https://www.w3.org/TR/verifiable-claims-data-model/" rel="noopener ugc nofollow" target="_blank">可验证声明</a>制定标准。</p><p id="4ba4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="kg">(注意，为了清晰起见，下面提供的例子被极大地简化了，并且有点破坏了精心制作的标准。)</em></p><h2 id="0dfb" class="lx lb hu bd lc ly lz ma lg mb mc md lk js me mf lm jw mg mh lo ka mi mj lq mk dt translated">分散标识符</h2><p id="febe" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">DID代表<em class="kg">分散标识符</em>，代表脱离中央控制的身份的新标识符。出自<a class="ae kf" href="https://w3c-ccg.github.io/did-spec/" rel="noopener ugc nofollow" target="_blank">马嘴</a>:</p><blockquote class="ml mm mn"><p id="feb7" class="jj jk kg jl b jm jn iv jo jp jq iy jr mo jt ju jv mp jx jy jz mq kb kc kd ke hn dt translated">分散标识符(DIDs)是一种新型的可验证的“自我主权”数字身份标识符。DID完全在DID主体的控制之下，独立于任何集中的注册中心、身份提供者或认证机构。</p></blockquote><p id="38ed" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">他们让我在<em class="kg">自主</em>。从现在开始:</p><blockquote class="ml mm mn"><p id="3c4d" class="jj jk kg jl b jm jn iv jo jp jq iy jr mo jt ju jv mp jx jy jz mq kb kc kd ke hn dt translated">DID是将DID主题关联到与该主题进行可信交互的手段的URL。DID解析为DID文档——描述如何使用特定DID的简单文档。</p></blockquote><p id="52a4" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以下是DID文档的一个示例:</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="8996" class="lx lb hu mw b fv na nb l nc nd">{<br/>  "did": "did:example:person-123456789",<br/>  "pubKey": "DDoFgPQ4JyjrsBwqGg2yCoZdGk5x11k7nGXXeg3wokFy"<br/>}</span></pre><p id="2a5b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个简单的文档声明了一个DID及其对应的公钥(更复杂的文档可以包含其他信息，比如相关个人数据的位置，或者DID所有者的代理)。孤立地看，人们对此无能为力。然而，将DID与可验证的声明结合起来是非常有效的。证明对可信声明的DID的所有权将授予您访问声明授予您的任何权限。我们来探索一下。</p><h2 id="0db3" class="lx lb hu bd lc ly lz ma lg mb mc md lk js me mf lm jw mg mh lo ka mi mj lq mk dt translated">可证实的说法</h2><p id="59c6" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">可验证声明是可信方在DID上可验证地颁发证书的一种方法(c <em class="kg"> laim </em>和<em class="kg"> credential </em>在本文中可互换使用)。同样，W3C:</p><blockquote class="ml mm mn"><p id="071f" class="jj jk kg jl b jm jn iv jo jp jq iy jr mo jt ju jv mp jx jy jz mq kb kc kd ke hn dt translated">驾驶执照被用来表明我们有能力驾驶机动车，大学学位可以用来表明我们的教育状况，政府颁发的护照使持有者能够在国家之间旅行。该规范提供了一种标准的方式，以加密安全、尊重隐私和可自动验证的方式在Web上表达这些声明。</p></blockquote><p id="c59f" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">想想传统的驾照。它通常由受信任的一方(您当地的机动车辆管理机构)签发给由政府ID标识的人。他们会评估你的驾驶技术，如果你通过测试，他们会将你的政府证件与你的申请联系起来，证明你适合驾驶。</p><p id="c104" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">可验证声明是在DIDs上实现相同结果的更安全的方式。如果我在机动车辆管理局的标识符不是我的政府颁发的ID，而是一个ID，这将如何工作？</p><p id="45dd" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，他们需要验证申请人是否拥有他们声称的DID。这是通过使用公钥加密来实现的，本文稍后将对此进行描述。</p><p id="3dc7" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一旦核实完成，当局可以发出声明，确认申请人的驾驶能力。这是它可能的样子。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="c922" class="lx lb hu mw b fv na nb l nc nd">{<br/>  "issuer": "did:example:trusted-authority-123",<br/>  "issued": "2010-01-01",<br/>  "claim": {<br/>    "id": "did:example:person-123456789",<br/>    "canDrive": true<br/>  },<br/>  "signature": "g4j9UrpHM4..."<br/>  }<br/>}</span></pre><p id="f52b" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这代表了<code class="eh ne nf ng mw b">did:example:trusted-authority-123</code>声称DID <code class="eh ne nf ng mw b">did:example:person-123456789</code>可以驾驶。任何人都可以制作类似的文件。能证明这份声明的是它是签名的。也就是说，我们知道<code class="eh ne nf ng mw b">signature</code>值只能由<code class="eh ne nf ng mw b">did:example:trusted-authority-123</code>的所有者正确产生(因为加密)。这意味着，如果我们知道<code class="eh ne nf ng mw b">did:example:trusted-authority-123</code>确实代表了它所声称的权威，我们可以相信这种说法是合法的，并认为<code class="eh ne nf ng mw b">did:example:person-123456789</code>有驾驶能力。</p><p id="603e" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里有一个用例。假设你被当地的交通部门拦下进行随机文件检查。他们真正需要知道的是你被授权驾驶。然而，传统的驾照包含许多其他不相关的数据(如您的姓名和地址)，所有这些数据都会在文档检查过程中泄露。证明您的DID的所有权并展示相关索赔将仅产生所需的信息，仅此而已。</p><h1 id="6e04" class="la lb hu bd lc ld le lf lg lh li lj lk ja ll jb lm jd ln je lo jg lp jh lq lr dt translated">IXO区块链的身份和权利主张</h1><p id="b6d3" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">为了让人们更容易注册ixo的网络，ixo基金会分叉了<a class="ae kf" href="https://metamask.io/" rel="noopener ugc nofollow" target="_blank">元掩码</a>并建立了KeySafe，这是一个浏览器扩展，简化了人们创建分散身份的过程。KeySafe代表用户生成一个分散标识符(DID)。摘自<a class="ae kf" href="http://ixo.foundation/wp-content/uploads/2017/12/The-ixo-Protocol-Draft-White-Paper-3.0-for-technical-review-12_8_2017.pdf" rel="noopener ugc nofollow" target="_blank">白皮书初稿</a>:</p><blockquote class="ml mm mn"><p id="968d" class="jj jk kg jl b jm jn iv jo jp jq iy jr mo jt ju jv mp jx jy jz mq kb kc kd ke hn dt translated">影响交换项目[……]的每个参与者都用数字标识[DID]作为一个实体。实体可以指自然人、组织、软件代理或设备。例如，评估代理可以是一个已识别的软件代理，其功能相当于一个智能Oracle，根据外部数据参考检查提交的索赔数据，并执行算法计算，以得出验证索赔的结论。这些标识符解析回可验证的身份凭证，如技能资格证明，可用于确定实体交换其资金申请的资格。</p></blockquote><p id="d9ab" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了让某人在ixo上注册，这个DID需要在ixo的区块链上显示。</p><h2 id="3679" class="lx lb hu bd lc ly lz ma lg mb mc md lk js me mf lm jw mg mh lo ka mi mj lq mk dt translated">设置KeySafe</h2><p id="ee9e" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">安装后，用户必须首次设置KeySafe。这个设置过程将为用户生成一个DID(更准确地说，它生成一个公钥/私钥对，并从公钥中导出DID)，如下所示。</p><figure class="mr ms mt mu fq ni fe ff paragraph-image"><div role="button" tabindex="0" class="nj nk di nl bf nm"><div class="fe ff nh"><img src="../Images/b7067419ed93682536c189e3ee198c4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PEXvSbqBtbeGc7_h-V6Qqg.png"/></div></div><figcaption class="no np fg fe ff nq nr bd b be z ek">Generating a DID with KeySafe (simplified journey)</figcaption></figure><p id="150c" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一旦用户完成了旅程并生成了DID，就该在ixo区块链上注册DID了。</p><h2 id="531e" class="lx lb hu bd lc ly lz ma lg mb mc md lk js me mf lm jw mg mh lo ka mi mj lq mk dt translated">突出DID</h2><p id="5a1d" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">为了对ixo链上的DID进行分类，ixo需要一个分类意图的证明。换句话说，ixo一定知道DID的所有者一定希望这种欺诈发生。因此，无论是谁提出申请，无论是DID所有者还是第三方，都必须证明这一意图。</p><p id="9ab1" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">验证这是真的一种方式是通过要求突出请求有效载荷包含所述有效载荷的签名。这是有效载荷的样子。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="8105" class="lx lb hu mw b fv na nb l nc nd">{<br/>  payload : [<br/>    10,<br/>    didDoc: {<br/>      did: "did:sov:person-123",<br/>      pubKey: "DDoFgPQ4JyjrsBwqGg2yCoZdGk5x11k7nGXXeg3wokFy",<br/>      credentials: [],<br/>    },<br/>  ],<br/>  signature: {<br/>    signatureValue: [<br/>      1,<br/>      "8B81986B9E458E3B6D55F...",<br/>    ],<br/>    created: "2018-07-20T16:50:07.420Z",<br/>  },<br/>}</span></pre><p id="7109" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><code class="eh ne nf ng mw b">signature</code>中的那个长十六进制是用DID的私钥对有效载荷中的<code class="eh ne nf ng mw b">didDoc</code>进行签名的结果。我们首先将didDoc转换成JSON:</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="12e1" class="lx lb hu mw b fv na nb l nc nd">{"didDoc":{"did":"did:sov:PRTxGnvgX7YGPCTkVfwevH","pubKey":"DDoFgPQ4JyjrsBwqGg2yCoZdGk5x11k7nGXXeg3wokFy","credentials":[]}}</span></pre><p id="16e8" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然后让KeySafe提示用户签名。</p><figure class="mr ms mt mu fq ni fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/21edc649ecf6ecdd90432bf4393d20d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*fQi7D-rNFVgJ7DNt34IuNA.png"/></div><figcaption class="no np fg fe ff nq nr bd b be z ek">KeySafe prompting the user to sign the ledgering payload</figcaption></figure><p id="ff15" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当我们将这个有效载荷提交给<a class="ae kf" href="https://ixofoundation.github.io/mkdocs/api/#ixo-blockchain-api" rel="noopener ugc nofollow" target="_blank"> ixo区块链API </a>时，这个签名将在任何欺诈发生之前得到验证。只有成功的验证才会导致欺诈。这种验证有两个步骤。</p><p id="b34d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">第一步是确认提供的DID和公钥匹配。跳过这一步将允许攻击者提供一个不同的公钥，他们控制其私钥，并使用它来生成一个有效的签名。</p><p id="b643" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">DID可以与公钥相匹配，因为DID本身是从公钥中派生出来的。然后，我们只需检查所提供的DID是否与从所提供的公钥导出的DID相同。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="bb61" class="lx lb hu mw b fv na nb l nc nd">base58.encode(base58.decode(publicKey).slice(0, 16))</span></pre><p id="9293" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">签名本身可以通过一种算法来验证，该算法将原始消息、公钥和签名作为输入。只有拥有DID私钥的代理才能生成通过该验证的签名。</p><p id="2257" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">需要注意的是，该流程并不能证明注册人实际拥有DID的私钥。攻击者可能在其他地方发现了这个签名消息(例如，在ixo链中)。这并不是什么大问题:私钥不能从消息+签名对中计算出来，所以攻击者所能做的就是重放突出显示，这大概是一个幂等运算。</p><p id="2f6d" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">同样，这个证明对于ixo来说已经足够了。由于攻击者成功注册该did的唯一方法是已经在其他地方发现了该签名，所以我们可以假设盗用已经发生，并且当盗用发生时，是由DID所有者完成的(因为正确的签名只能由私钥的所有者产生)。</p><h2 id="bcff" class="lx lb hu bd lc ly lz ma lg mb mc md lk js me mf lm jw mg mh lo ka mi mj lq mk dt translated">可证明地将一个人与一个DID相关联</h2><p id="bb2a" class="pw-post-body-paragraph jj jk hu jl b jm ls iv jo jp lt iy jr js lu ju jv jw lv jy jz ka lw kc kd ke hn dt translated">然而，ixo关心的是将一个DID与一个真实的人联系起来。作为一个身份提供者，我们在<a class="ae kf" href="https://trustfractal.com/business/" rel="noopener ugc nofollow" target="_blank">分形</a>需要对个人进行KYC过程来证明他们的身份。我们还必须证明他们对DID的所有权。</p><figure class="mr ms mt mu fq ni fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/da3001e1df254045cfa3c8792aa57ab3.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*5V1glyovL0rvVSGZHHUGBA.png"/></div><figcaption class="no np fg fe ff nq nr bd b be z ek">Asking the user to sign a challenge nonce</figcaption></figure><p id="5deb" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，分形需要微妙地改变他们的身份供应KYC程序。除了正常的身份问题，我们还将确保用户安装和配置了KeySafe。</p><p id="6c98" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一旦证实了这一点，Fractal就可以发出一个密码挑战:我们要求用户签署一条内容似乎是唯一的消息(一个<a class="ae kf" href="https://en.wikipedia.org/wiki/Cryptographic_nonce" rel="noopener ugc nofollow" target="_blank">随机数</a>)。这种唯一性保证了这种消息以前被签名的可能性很小，使得攻击者几乎不可能提供正确的签名来响应这种挑战。</p><p id="7fda" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让这条信息看起来很独特的一个方法是使用一个UUID。如果用户能够产生一个有效的签名(如上面所定义的)，那就意味着他们拥有DID的私钥。</p><p id="6cde" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，我们已经确认了一个人和一个DID之间的关联，我们准备签署并发布关于他们的KYC身份的声明。然后，我们可以向ixo区块链广播以下内容。</p><pre class="mr ms mt mu fq mv mw mx my aw mz dt"><span id="d71f" class="lx lb hu mw b fv na nb l nc nd">{<br/>  "issuer": "did:sov:fractal-123",<br/>  "issued": "2010-01-01",<br/>  "claim": {<br/>    "id": "did:sov:person-123",<br/>    "kycLevels": ["IdentityVerified", "AccreditedInvestor"]<br/>  },<br/>  "signature": "g4j9UrpHM4..."<br/>  }<br/>}</span></pre><p id="1bf1" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">砰——ixo现在可以放心了，这个确实与一个人匹配，这个人的身份已经被分形验证了。</p></div><div class="ab cl nt nu hc nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="hn ho hp hq hr"><p id="f755" class="pw-post-body-paragraph jj jk hu jl b jm jn iv jo jp jq iy jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jl hv">策划ICO？</strong>在<a class="ae kf" href="https://www.trustfractal.com/business/" rel="noopener ugc nofollow" target="_blank"> Fractal </a>，我们提供了一个简单易用的launchpad解决方案，结合全面的客户身份识别服务(KYC/反洗钱),轻松成功地部署您的代币发行。</p></div></div>    
</body>
</html>