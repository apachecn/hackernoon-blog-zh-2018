<html>
<head>
<title>Ethernaut Lvl 0 Walkthrough: ABIs, Web3, and how to abuse them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ethernaut Lvl 0演练:ABIs、Web3以及如何滥用它们</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/ethernaut-lvl-0-walkthrough-abis-web3-and-how-to-abuse-them-d92a8842d71b?source=collection_archive---------4-----------------------#2018-08-13">https://medium.com/hackernoon/ethernaut-lvl-0-walkthrough-abis-web3-and-how-to-abuse-them-d92a8842d71b?source=collection_archive---------4-----------------------#2018-08-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/061a897ec361245d4579ed2826b6823c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CxWtmnF_eTGhr5CTGsTexA.png"/></div></div></figure><div class=""/><div class=""><h2 id="3e2a" class="pw-subtitle-paragraph jc ie if bd b jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ek translated">让智能合同做它不想做的事情…</h2></div><p id="c427" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">这是一部<a class="ae kq" rel="noopener" href="/@nicolezhu">围绕<a class="ae kq" href="https://openzeppelin.org/" rel="noopener ugc nofollow" target="_blank">齐柏林</a>的智能合约<a class="ae kq" href="https://ethernaut.zeppelin.solutions/" rel="noopener ugc nofollow" target="_blank">安全谜题</a>的深度系列</a>。我会给你直接的资源和关键概念<em class="kr"> </em>你需要100%自己解决这些难题。</p><p id="a2b9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">在接下来的几周里，我们将重现一些严重的黑客攻击是如何被诱导的，特别是:</p><ul class=""><li id="a536" class="ks kt if jw b jx jy ka kb kd ku kh kv kl kw kp kx ky kz la dt translated"><a class="ae kq" href="http://hackingdistributed.com/2016/06/18/analysis-of-the-dao-exploit/" rel="noopener ugc nofollow" target="_blank">$ 5000万刀黑客</a>:因重入问题导致</li><li id="8a57" class="ks kt if jw b jx lb ka lc kd ld kh le kl lf kp kx ky kz la dt translated"><a class="ae kq" href="https://blog.zeppelin.solutions/on-the-parity-wallet-multisig-hack-405a8c12e8f7" rel="noopener ugc nofollow" target="_blank">$ 3000万的奇偶校验攻击</a>:由delegatecall()漏洞引发</li></ul><p id="919b" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><strong class="jw ig"> <em class="kr">必修</em> </strong> <em class="kr">:智能合同开发基础知识</em></p></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="68c6" class="ln lo if bd lp lq lr ls lt lu lv lw lx jl ly jm lz jo ma jp mb jr mc js md me dt translated">以太网如何工作</h1><p id="d550" class="pw-post-body-paragraph ju jv if jw b jx mf jg jz ka mg jj kc kd mh kf kg kh mi kj kk kl mj kn ko kp hn dt translated">所有智能合约源代码都被编译成两种格式，由以太坊虚拟机(EVM)提供:</p><ul class=""><li id="74d7" class="ks kt if jw b jx jy ka kb kd ku kh kv kl kw kp kx ky kz la dt translated"><strong class="jw ig">应用二进制接口(ABI)</strong>:solidity和Javascript之间的通信层，JSON格式</li><li id="ef00" class="ks kt if jw b jx lb ka lc kd ld kh le kl lf kp kx ky kz la dt translated">字节码:由EVM执行的低级机器语言</li></ul><p id="5f25" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">当您为每个级别请求<code class="eh mk ml mm mn b">get a new instance</code>时，Ethernaut将编译好的字节码部署到Ropsten测试网络上的一个新地址:</p><figure class="mp mq mr ms fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mo"><img src="../Images/00b8bec4568a506f4f653d6bc8bd0d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sz1a7G2pQ62UnkHoieve4w.jpeg"/></div></div></figure><p id="c6d9" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">一旦在区块链上创建了这个新实例，它的地址就会通过一个事件返回到您的web客户端，正如在游戏的主合同中所看到的，<code class="eh mk ml mm mn b">Ethernaut.sol</code>:</p><figure class="mp mq mr ms fq hw"><div class="bz el l di"><div class="mt mu l"/></div><figcaption class="mv mw fg fe ff mx my bd b be z ek"><a class="ae kq" href="https://github.com/OpenZeppelin/ethernaut/blob/master/contracts/Ethernaut.sol" rel="noopener ugc nofollow" target="_blank">https://github.com/OpenZeppelin/ethernaut/blob/master/contracts/Ethernaut.sol</a></figcaption></figure><p id="aece" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">最后，Web3在这个新的契约实例周围包装了一个ABI，并允许您通过Web控制台与契约进行交互。</p><figure class="mp mq mr ms fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mz"><img src="../Images/6af295747b926522109535a8af26f9e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-N9MYrh3OceDaHkV4ObpeQ.png"/></div></div><figcaption class="mv mw fg fe ff mx my bd b be z ek">Notice that all `<code class="eh mk ml mm mn b">public` </code>functions are available in the web client</figcaption></figure></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="f9c9" class="ln lo if bd lp lq lr ls lt lu lv lw lx jl ly jm lz jo ma jp mb jr mc js md me dt translated">详细演练</h1><p id="4854" class="pw-post-body-paragraph ju jv if jw b jx mf jg jz ka mg jj kc kd mh kf kg kh mi kj kk kl mj kn ko kp hn dt translated">这个关卡需要你猜一个秘密密码，以便“获得许可”继续前进。</p><ol class=""><li id="ade8" class="ks kt if jw b jx jy ka kb kd ku kh kv kl kw kp na ky kz la dt translated">注意，当创建契约实例时，Ethernaut向构造函数传递了一个秘密的<code class="eh mk ml mm mn b">_password</code>:</li></ol><pre class="mp mq mr ms fq nb mn nc nd aw ne dt"><span id="7fd9" class="nf lo if mn b fv ng nh l ni nj">function Instance(string _password) public { <br/>    password = _password; <br/>}</span></pre><p id="cc1c" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">2.这个密码被存储为一个<code class="eh mk ml mm mn b">public</code> <code class="eh mk ml mm mn b">string</code>变量</p><pre class="mp mq mr ms fq nb mn nc nd aw ne dt"><span id="5b58" class="nf lo if mn b fv ng nh l ni nj">string public password;</span></pre><p id="3bb8" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">3.Solidity中所有公共的基本变量类型都有一个自动生成的getter函数。这意味着您可以通过在控制台中键入来直接<em class="kr">读取</em>这个不那么机密的密码:</p><pre class="mp mq mr ms fq nb mn nc nd aw ne dt"><span id="b7d1" class="nf lo if mn b fv ng nh l ni nj">await contract.password()</span></pre><p id="f3b5" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><em class="kr">您可以使用async/await更轻松地处理Web3承诺</em></p><p id="778b" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">4.要通过这一关，只需调用最后一个<code class="eh mk ml mm mn b">authenticate</code>函数，并通过控制台输入检索到的密码:</p><pre class="mp mq mr ms fq nb mn nc nd aw ne dt"><span id="b2d1" class="nf lo if mn b fv ng nh l ni nj">await contract.authenticate("[password here]");</span></pre><p id="19e2" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated"><em class="kr">您将在authenticate函数中修改存储，因此在调用此事务时，预计要支付一些汽油。</em></p><p id="f2a6" class="pw-post-body-paragraph ju jv if jw b jx jy jg jz ka kb jj kc kd ke kf kg kh ki kj kk kl km kn ko kp hn dt translated">5.最后，你应该能够再次确认你是否已经通过了这一关:</p><pre class="mp mq mr ms fq nb mn nc nd aw ne dt"><span id="f401" class="nf lo if mn b fv ng nh l ni nj">await contract.getCleared();</span></pre><h1 id="7590" class="ln lo if bd lp lq nk ls lt lu nl lw lx jl nm jm lz jo nn jp mb jr no js md me dt translated">关键安全要点</h1><ul class=""><li id="dca1" class="ks kt if jw b jx mf ka mg kd np kh nq kl nr kp kx ky kz la dt translated">公众可以查看存储在区块链上的所有函数和变量</li><li id="c98c" class="ks kt if jw b jx lb ka lc kd ld kh le kl lf kp kx ky kz la dt translated">永远不要将密码直接存储在智能合约中，(即使是作为<code class="eh mk ml mm mn b">private</code>变量，我们很快就会知道)</li></ul></div><div class="ab cl lg lh hc li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="hn ho hp hq hr"><h1 id="fd2d" class="ln lo if bd lp lq lr ls lt lu lv lw lx jl ly jm lz jo ma jp mb jr mc js md me dt translated">更多级别</h1><div class="ht hu fm fo hv ns"><a href="https://hackernoon.com/ethernaut-lvl-1-walkthrough-how-to-abuse-the-fallback-function-118057b68b56" rel="noopener  ugc nofollow" target="_blank"><div class="nt ab ej"><div class="nu ab nv cl cj nw"><h2 class="bd ig fv z el nx eo ep ny er et ie dt translated">Ethernaut Lvl 1演练:如何滥用回退功能</h2><div class="nz l"><h3 class="bd b fv z el nx eo ep ny er et ek translated">这是一个围绕齐柏林团队的智能合同安全难题的深入系列。我会给你直接的资源…</h3></div><div class="oa l"><p class="bd b gc z el nx eo ep ny er et ek translated">hackernoon.com</p></div></div><div class="ob l"><div class="oc l od oe of ob og ib ns"/></div></div></a></div><div class="ht hu fm fo hv ns"><a rel="noopener follow" target="_blank" href="/@nicolezhu/ethernaut-lvl-2-walkthrough-how-simple-developer-errors-become-big-mistakes-b705ff00a62f"><div class="nt ab ej"><div class="nu ab nv cl cj nw"><h2 class="bd ig fv z el nx eo ep ny er et ie dt translated">Ethernaut Lvl 2辐射演练:简单的开发人员错误如何变成大错误</h2><div class="nz l"><h3 class="bd b fv z el nx eo ep ny er et ek translated">这是一个围绕齐柏林团队的智能合同安全难题的深入系列。我会给你直接的资源…</h3></div><div class="oa l"><p class="bd b gc z el nx eo ep ny er et ek translated">medium.com</p></div></div><div class="ob l"><div class="oh l od oe of ob og ib ns"/></div></div></a></div></div></div>    
</body>
</html>