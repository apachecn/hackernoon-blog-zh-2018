<html>
<head>
<title>Decentralized index for faster dApps: The Graph</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">更快dApps的分散索引:图表</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/decentralized-index-for-faster-dapps-the-graph-d93902b3f601?source=collection_archive---------16-----------------------#2018-08-14">https://medium.com/hackernoon/decentralized-index-for-faster-dapps-the-graph-d93902b3f601?source=collection_archive---------16-----------------------#2018-08-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/c386d13221925ebb67333d6cd4401c1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lC2zoF1RriBRcYzKcpkmHQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Art by Peter Judson</figcaption></figure><p id="8909" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">许多朋友问我们如何识别可靠的项目。我们决定分享一份简短的尽职调查，内容是关于我们调查(或投资)的一些公司。我们希望这将有助于创造一个更健康的投资生态系统。</p><p id="1b68" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">几天前，我们与图的<a class="ae kf" href="https://www.thegraph.com" rel="noopener ugc nofollow" target="_blank">团队进行了一次愉快的会面:该基础设施为我们在 </a><a class="ae kf" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank"> <strong class="ji hv">区块链</strong> </a>上存储的<strong class="ji hv">数据创建了一个<strong class="ji hv">分散索引</strong>。</strong></p><p id="819b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">会前我们对这个项目非常怀疑。为什么我们需要一个分散的指数？这个指数的表现有多快？领养呢——谁会使用它，为什么？</p><p id="0882" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">作为工程师，我们可以看到问题。当面和团队讨论后，事情就更清楚了。</p><p id="05e8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在我们开始解释这个项目之前，让我们先看看什么是指数。</p><h2 id="4049" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">究竟什么是指数？</h2><p id="b814" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">数据库和文件系统定义了数据存储和组织的方式。现在，索引是数据的“地址簿”。它们告诉我们如何以最佳方式搜索和检索数据。想象一下，每个索引都是一个目录，告诉我们存储设备上每个文件(或数据结构)的位置。我们可以通过名称、扩展名、文件类型或内容来组织东西。</p><p id="9669" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">每次我们以不同的方式组织东西，我们就创建了一个新的索引。</p><h2 id="7f7b" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">那么索引实际上是做什么的呢？</h2><p id="23b7" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">答:它们将我们检索数据的速度提高了几个数量级。</p><p id="eb22" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">让我们再解释一下。</p><h2 id="2615" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">冰箱是我们日常生活中数据库和索引的典型例子。</h2><p id="9658" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">在现实世界的类比中，想象一下:你有一台冰箱。请将此视为您的存储层。冰箱内物品的存放方式，能让你更高效地取出想要的物品。例如，你可以把最常用的东西放在前面，把不常用的东西放在架子后面。</p><p id="a8f0" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就是数据库(像<a class="ae kf" href="https://bluzelle.com" rel="noopener ugc nofollow" target="_blank"> Bluzelle </a>)所做的:它允许你以对你有意义的方式组织你的数据。现在，想象你的朋友让你从冰箱里给她拿些牛奶。这个命令叫做<strong class="ji hv">查询</strong>它告诉你要检索什么数据。假设你真的不知道牛奶在哪里，那么你需要检查冰箱里的每一件东西，直到你找到牛奶。</p><p id="8e9c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就是指数的用处。想象一下，你有一张每样东西在冰箱里的位置图。甚至在你打开它之前，你可以看一下图表，你知道牛奶在右下角的第二个架子上。这是索引。</p><figure class="lh li lj lk fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lg"><img src="../Images/fc9d586563eeda3637b0482f024f5cad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aDl6GPsZiOiCsr_ur5F_nw.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">On the left, data as they get in the server. On the right, after they get indexed in a database.</figcaption></figure><h2 id="3b93" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">为什么我们需要区块链数据的索引？</h2><p id="573a" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">原因很简单，没有其他方法可以构建快速的dApp。在以太网上，我们需要10秒来从链中检索数据。想象一下，盯着纺车等10秒钟。在集中式世界中，这在10ms内发生。</p><h2 id="8b62" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">为什么我们需要一个分散的索引，为什么我们不使用一个集中的索引？</h2><p id="95d5" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">这是最有趣的部分。在一个集中的世界里，有人可以改变索引，给你指出错误的方向或错误的文件。想象一下，搜索一个客户的账户余额。你可以在索引上找到它。因为这个指数是集中的，所以它可以为你指出天平的任何版本。您可能想要当前余额10美元，但它指向3天前的余额10，000美元。</p><p id="ec72" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">分散索引通过使用拥有索引副本的节点网络避免了这个问题。他们认为它不可信。就像我们在区块链做的一样。</p><p id="77b6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果出现问题，一个节点的索引失败，我们可以使用另一个节点，实现100%的索引正常运行时间。</p><h2 id="7942" class="kg kh hu bd ki kj kk kl km kn ko kp kq jr kr ks kt jv ku kv kw jz kx ky kz la dt translated">图表是如何工作的？</h2><p id="25ca" class="pw-post-body-paragraph jg jh hu ji b jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd hn dt translated">该图是一个分散的索引，适用于整个区块链(即，它可以索引多个区块链中的数据，如eth和btc，但也可以索引<a class="ae kf" href="https://ipfs.io" rel="noopener ugc nofollow" target="_blank">IPF</a>和<a class="ae kf" href="https://filecoin.io" rel="noopener ugc nofollow" target="_blank"> Filecoin </a>中的数据)。它监视区块链中的新数据，并在每次出现这种情况时更新索引。一旦索引被更新，它就试图在维护它的节点之间达成共识。一旦达成共识，就能确保索引的用户获得最新数据。</p><p id="bd09" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们担心的一个问题是，一旦我们有了更快的区块链，索引更新过程中可能会出现瓶颈。在以太坊上，平均每10秒钟就有新的方块出现。该图在大约1秒时更新了索引(当前)。</p><p id="8da5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">索引更新的速度比数据输入的速度快得多，但是如果有10个不同的链每1秒钟输入一次数据，会发生什么呢？索引的更新速度是否足够快，并且在索引之间达成共识，以确保每个人都有相同的新鲜状态？</p><p id="5092" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">该团队在我们的会议上解释了他们的可扩展性解决方案，他们的目标是在将自己局限于任何设计之前，对这些不同的拓扑进行原型设计和实验。</p><p id="af3d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">关于查询语言，该图使用的是从脸书发展而来的语言<a class="ae kf" href="https://graphql.org" rel="noopener ugc nofollow" target="_blank"> GraphQL </a>。这是一种容易理解的语言，大多数开发人员已经熟悉它了。</p><p id="bcb5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">它是这样工作的:一旦应用程序执行了一个查询，图就将这个查询(使用网关节点)路由到保存索引的查询节点。查询节点将结果返回给网关节点，然后返回给开发人员。</p><p id="9fd5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，令牌用于保护和管理网络，并激励对网络至关重要的行为。简而言之，它是由查询节点绑定的，为了使用它，它们既可以被标桩，也可以被用作网络内的交换媒介(将很快分享关于它的更多信息)。</p><p id="5a0d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们看到的另一个挑战是网络的监管。谁决定谁是节点？谁决定我们何时部署变更以及如何采用这些变更。该团队仍在努力，但我们喜欢他们设想一个巨大的开源社区，以分散的方式维护网络。</p><p id="1de8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可以在这里阅读更多关于这个项目的信息<a class="ae kf" href="https://medium.com/graphprotocol" rel="noopener">https://medium.com/graphprotocol</a></p></div><div class="ab cl ll lm hc ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="hn ho hp hq hr"><p id="eb3b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="ke">请注意，这篇文章中的所有观点都是我个人的，仅提及我们应尽的努力。这篇文章无意作为投资建议。</em></p><figure class="lh li lj lk fq iv"><div class="bz el l di"><div class="ls lt l"/></div></figure></div></div>    
</body>
</html>