<html>
<head>
<title>Visual regression testing for Drupal using Gemini</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Gemini对Drupal进行可视化回归测试</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/visual-regression-testing-for-drupal-using-gemini-b9fafe025f7?source=collection_archive---------26-----------------------#2018-08-14">https://medium.com/hackernoon/visual-regression-testing-for-drupal-using-gemini-b9fafe025f7?source=collection_archive---------26-----------------------#2018-08-14</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="91f9" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">常见的做法:在CSS文件做了小改动之后，测试很多页面。双子座让你摆脱这种浪费时间的行为。让我们看看如何</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/2db0f056f9507cfd30654df8f31e43a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VBQgiUIvfcbsFVu3."/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek"><a class="ae jz" href="https://www.adcisolutions.com/?utm_source=medium&amp;utm_medium=referral&amp;utm_campaign=medium-hacker-noon-gemini-mainpagewebsite&amp;utm_content=medium-hacker-noon-gemini" rel="noopener ugc nofollow" target="_blank">By ADCI Soutions</a></figcaption></figure><p id="ec14" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw">回归测试</em>允许发现由之前的变更引起的错误。这在前端尤其明显。这是常见的做法——当开发人员在<em class="kw"> CSS </em> <strong class="kc hv"> <em class="kw"> </em> </strong>文件中做了小改动后，不得不测试大量页面。</p><p id="130c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我认为那只是浪费时间。我们应该使这些过程自动化。虽然计算机视觉和人工智能可能能够解决这个问题，但现在很难使用这样的技术。因此，我们将只比较图像。为此，需要<strong class="kc hv"> <em class="kw"> </em> </strong> <em class="kw">截图</em> <strong class="kc hv"> </strong>的原页面和修改后的页面。有很多工具可以让你不用手动操作。但是我更喜欢用双子座。</p><p id="3fed" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw"> Gemini </em>是Yandex开发的可视化回归测试工具。它可以与Chrome、Firefox、IE8+和Opera 12+兼容。此外，它支持一些网络驱动程序:Selenium服务器，Chrome驱动程序，PhantomJS和云网络驱动程序，如BrowserStack或SauceLabs。</p><p id="6460" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">要安装，运行<em class="kw">这个命令:</em></p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kx ky l"/></div></figure><p id="e552" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">另外，你必须有<em class="kw">网络驱动</em>和png-img工具。</p><p id="5431" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">请特别注意配置参数。我想强调几个最重要的问题:</p><ul class=""><li id="e8db" class="kz la hu kc b kd ke kg kh kj lb kn lc kr ld kv le lf lg lh dt translated">rootUrl(必需)-将被测试的网站的Url</li><li id="b82a" class="kz la hu kc b kd li kg lj kj lk kn ll kr lm kv le lf lg lh dt translated">grid Url——一个用于截图的网络驱动URL</li><li id="d970" class="kz la hu kc b kd li kg lj kj lk kn ll kr lm kv le lf lg lh dt translated">截图目录—保存截图的目录</li><li id="7646" class="kz la hu kc b kd li kg lj kj lk kn ll kr lm kv le lf lg lh dt translated">公差——两张截图之间的最大允许偏差</li><li id="faae" class="kz la hu kc b kd li kg lj kj lk kn ll kr lm kv le lf lg lh dt translated">窗口大小—浏览器窗口的尺寸</li><li id="0f46" class="kz la hu kc b kd li kg lj kj lk kn ll kr lm kv le lf lg lh dt translated">截屏模式—图像捕捉模式(整页或视窗)</li></ul><p id="6eac" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw"> Gemini </em>使用. gemini.yml文件进行配置，但是您可以通过命令行标志覆盖所有设置。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="9e5b" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">如何与双子座共事</strong></p><p id="4adb" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">一开始，你必须运行你的网络驱动。<em class="kw">例如</em>，如果使用PhantomJS，执行该命令:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kx ky l"/></div></figure><p id="66c6" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">因为您目前没有参考图像来与下面的截图进行比较，所以您需要捕捉它们。快跑吧</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kx ky l"/></div></figure><p id="4e4c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">双子星座将为你的测试生成新的参考图像。之后，您可以将它们与页面的当前状态进行比较。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kx ky l"/></div></figure><p id="55eb" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">如果您的测试失败，<em class="kw"> Gemini </em>将在“报告”文件夹中生成新图像，显示差异。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="eb41" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">如何编写双子测试</strong></p><p id="198f" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">这很容易。您需要创建一个新的测试文件(例如test.js)并在其中定义gemini.suite方法。让我们看一个简单的例子:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kx ky l"/></div></figure><p id="5b53" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">该方法的第一个参数是您的<em class="kw">测试套件</em>的名称。然后我们描述一个我们想要测试的页面(在这个例子中是主页)，这个页面上的一个元素和一个要捕获的新状态。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="f89e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">如何扩展双子座</strong></p><p id="711d" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw">双子</em>支持插件系统，可以扩展其功能。你可以在<a class="ae jz" href="https://github.com/gemini-testing" rel="noopener ugc nofollow" target="_blank">这个资源库</a>里找到很多有用的插件。如果没有你需要的，写一个新的也很容易。</p><p id="5f88" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw">双子插件</em>只是一个npm包。看<em class="kw">这段代码</em>:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="kx ky l"/></div></figure><p id="1ecb" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">您需要定义一个函数来接收<em class="kw"> 2个参数:</em>一个Gemini对象和必要的选项。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="957e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">后记</strong></p><p id="3a2d" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">我希望这篇文章对你有用，现在你明白了<em class="kw">可视化回归测试</em>有多简单。你将不再需要浏览所有页面。现在你可以享受开发过程了。</p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="35ca" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw">原载于</em><a class="ae jz" href="https://www.adcisolutions.com/knowledge/visual-regression-testing-drupal-using-gemini?utm_source=medium&amp;utm_medium=referral&amp;utm_campaign=medium-hacker-noon-gemini-article&amp;utm_content=medium-hacker-noon-gemini" rel="noopener ugc nofollow" target="_blank"><em class="kw">ADCI解决方案网站</em> </a> <em class="kw">。</em></p></div><div class="ab cl ln lo hc lp" role="separator"><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls lt"/><span class="lq bw bk lr ls"/></div><div class="hn ho hp hq hr"><p id="d5a1" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">作者是ADCI解决方案公司的团队领导Erlan Aytpaev</strong></p><p id="e9aa" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">多年的经验使Erlan成为一名出色的全栈专业人员，他不断学习新技术并在我们公司采用这些技术。他声称每个新项目都教会他从不同的角度看待平常的事情。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="ab fr cl lu"><img src="../Images/73bcb62bbfda355e913e5b86e2193e46.png" data-original-src="https://miro.medium.com/v2/format:webp/1*5kC2KhUXG-R8C8-59J1RCA.png"/></div></figure><p id="85b9" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">在社交网络上关注我们:</strong> <a class="ae jz" href="https://twitter.com/ADCISolutions" rel="noopener ugc nofollow" target="_blank"> Twitter </a> | <a class="ae jz" href="https://www.facebook.com/adcisolutions/" rel="noopener ugc nofollow" target="_blank">脸书</a> | <a class="ae jz" href="https://www.linkedin.com/company/adci-solutions/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a></p><div class="lv lw fm fo lx ly"><a href="https://codeburst.io/visual-regression-testing-with-backstopjs-bc749615191a" rel="noopener follow" target="_blank"><div class="lz ab ej"><div class="ma ab mb cl cj mc"><h2 class="bd hv fv z el md eo ep me er et ht dt translated">用BackstopJS进行可视化回归测试</h2><div class="mf l"><h3 class="bd b fv z el md eo ep me er et ek translated">项目越大，每次变更后花在回归测试上的时间就越多。BackstopJS是一种工具，它…</h3></div><div class="mg l"><p class="bd b gc z el md eo ep me er et ek translated">codeburst.io</p></div></div><div class="mh l"><div class="mi l mj mk ml mh mm jt ly"/></div></div></a></div></div></div>    
</body>
</html>