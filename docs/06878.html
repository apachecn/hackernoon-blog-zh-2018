<html>
<head>
<title>Creating Your Own Whimsical Twitter Bot With Tracery</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Tracery创建你自己的古怪的Twitter机器人</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creating-your-own-whimsical-twitter-bot-with-tracery-56ca92d6f72a?source=collection_archive---------19-----------------------#2018-08-15">https://medium.com/hackernoon/creating-your-own-whimsical-twitter-bot-with-tracery-56ca92d6f72a?source=collection_archive---------19-----------------------#2018-08-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="ecdc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">受一系列令人敬畏的推特机器人的启发，我开始创建自己的机器人，这些机器人发布看似随机，但非常有趣的消息，如<a class="ae jp" href="https://twitter.com/boredelonmusk" rel="noopener ugc nofollow" target="_blank"> BoredElonMusk </a>或<a class="ae jp" href="https://twitter.com/thinkpiecebot" rel="noopener ugc nofollow" target="_blank"> thinkpiecebot </a>。一个在推特上发布棋盘游戏的随机想法，另一个(与我已经进行了一段时间的小说项目相关)在推特上发布世界是如何结束的。我最初不想在这个项目上花太多时间，有人推荐了一个名为<a class="ae jp" href="https://cheapbotsdonequick.com/" rel="noopener ugc nofollow" target="_blank">cheapbotsdonequick.com</a>的网站，它顾名思义，由<a class="ae jp" href="http://www.brightspiral.com/" rel="noopener ugc nofollow" target="_blank"> Tracery </a>驱动，这是一个开源的Twitter bot库，这意味着当我准备好的时候，我可以自己托管。</p><h1 id="41b9" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">cheapbotsdonecquick</h1><p id="3896" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">使用该网站来创建和自托管你的机器人是非常容易的；您使用您的机器人的Twitter帐户登录，并添加一个表示机器人的JSON字符串。下面是<a class="ae jp" href="https://twitter.com/BoardgameJerk" rel="noopener ugc nofollow" target="_blank"> BoardgameJerk </a>的早期代码:</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="1bae" class="lc jr hu ky b fv ld le l lf lg">{<br/>  "origin": "You are #you_are# #doing# #with_what# in #in#",<br/>  "you_are": ["Dress makers", "Farmers", "Villagers", "Warriors", "Investigators", "Fire fighters", "Scientists", "Explorers", "Wine makers", "Writers", "Superheroes", "Wizards", "Ponies", "Corporations", "Factions", "Cattle Herders", "Civilizations", "Soldiers", "Knights", "Politicians", "Senators", "Generals","Clans","Vikings","Zombies","Cultists","Settlers","Sherlock Holmes","Meeples"],<br/>  "doing": ["Exploring", "Exploiting", "Growing", "Painting", "Eating", "Investigating", "Fighting", "Building", "Trading", "Delivering", "Terraforming", "Researching","Producing","Brewing","Protecting","Eating","Surviving","Escaping"],<br/>  "with_what": ["Crops", "Great Old Ones", "Disease", "Trains", "Money", "Territory", "Ships", "Sheep", "Packages", "Resources", "Spaceships", "Meeples","Cultists","Zombies","A Dragon","Detectives","Victory Points"],<br/>  "in": ["Renaissance Italy", "Medieval Europe", "The Far East", "Deep Space", "Germany", "North America", "The Deepest Ocean", "Wall Street", "The 1920s", "The Far Future", "Mars", "19th Century America", "Ancient Greece", "Ancient Rome", "Ancient Egypt","Dungeons","Scotland","Australia"]<br/>}</span></pre><p id="0836" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="http://air.decontextualize.com/tracery/" rel="noopener ugc nofollow" target="_blank"> Tracery有一个很棒的教程</a>，我不会在这里重复，但是上面的语法相当清楚，<code class="eh lh li lj ky b">origin</code>键包含带有占位符的文本，其他键包含Tracery随机插入占位符的值。你可能会很快注意到你的机器人可能开始犯语法错误，虽然你可以设计你的字符串来适应这一点，Tracery也有一系列的<a class="ae jp" href="http://air.decontextualize.com/tracery/#modifiers" rel="noopener ugc nofollow" target="_blank">修饰符</a>来帮助。例如，为了灵活起见，我可以删除上面一些文本的复数形式，而使用<code class="eh lh li lj ky b">.s</code>修饰语:</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="5cd6" class="lc jr hu ky b fv ld le l lf lg">"origin": "You are #you_are.s# #doing# #with_what.s# in #in#",</span></pre><p id="52aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成后，你可以设置机器人发微博的频率，然后点击<em class="lk">保存</em>。</p><figure class="kt ku kv kw fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff ll"><img src="../Images/3edb17c74f8cfc60366761393ec9a62d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jU88U9qnpPA8A5ca.png"/></div></div></figure><h1 id="4045" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">自托管</h1><p id="33e5" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">对于许多机器人和它们的创造者来说，这可能已经足够了，但我对自托管我的机器人感兴趣，这样我就可以用它们做更多的事情，例如为其他机器人平台和想法重新设计相同的数据模型，允许其他人为数据模型做出贡献，加上我还没有的其他想法。我选择使用node.js和Heroku作为我的工具，当然，也有许多其他的选择。</p><h1 id="d92d" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">属国</h1><p id="f905" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">首先，将<a class="ae jp" href="https://www.npmjs.com/package/dotenv" rel="noopener ugc nofollow" target="_blank"> dotenv </a>、<a class="ae jp" href="https://www.npmjs.com/package/tracery-grammar" rel="noopener ugc nofollow" target="_blank"> tracery-grammar </a>和<a class="ae jp" href="https://www.npmjs.com/package/twit" rel="noopener ugc nofollow" target="_blank"> twit </a> NPM模块添加到您的项目中。如果你也决定使用Heroku，那么你可能会发现他们的<a class="ae jp" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank"> CLI </a>工具很有用。</p><h1 id="b713" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">词汇</h1><p id="5d73" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">我尝试将所有的bot词汇表放在一个文件中，但最终将每个列表分成三个文件。我不会在这里全部复制它们，但是你可以在项目的资源库中看到它们。我发现将它们作为数组添加的最简单方法是使用一系列<code class="eh lh li lj ky b">require</code>语句:</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="bda2" class="lc jr hu ky b fv ld le l lf lg">let you_are = require('./you_are.json');<br/>let doing = require('./doing.json');<br/>let with_what = require('./with_what.json');<br/>let in_place = require('./in.json');</span></pre><h1 id="f662" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">创建语法</h1><p id="0fe6" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">准备好词汇表后，将其添加到Tracery中，生成您的tweet文本，并添加上面的任何修饰符:</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="8713" class="lc jr hu ky b fv ld le l lf lg">const grammar = tracery.createGrammar({<br/>    "you_are": you_are,<br/>    "doing": doing,<br/>    "with_what": with_what,<br/>    "in": in_place,<br/>    "origin": ["You are #you_are# #doing# #with_what# in #in#"],<br/>});</span><span id="0169" class="lc jr hu ky b fv lt le l lf lg">grammar.addModifiers(tracery.baseEngModifiers);</span><span id="25d6" class="lc jr hu ky b fv lt le l lf lg">const tweet = grammar.flatten('#origin#');</span></pre><h1 id="6c05" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">发送推文</h1><p id="66c1" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">准备好向全世界广播的文本后，创建一个Twitter客户端，向全世界发布您的妙语。在本地运行时，我使用dotenv模块和一个<em class="lk">提供的密钥。env </em>文件，但是在Heroku上运行，它使用平台提供的<a class="ae jp" href="https://devcenter.heroku.com/articles/config-vars" rel="noopener ugc nofollow" target="_blank">配置变量</a>，但是您可以从一个文件转换到另一个文件，而不需要做任何更改。</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="b413" class="lc jr hu ky b fv ld le l lf lg">const T = new Twit(<br/>    {<br/>        consumer_key: process.env.TWITTER_CONSUMER_KEY,<br/>        consumer_secret: process.env.TWITTER_CONSUMER_SECRET,<br/>        access_token: process.env.TWITTER_ACCESS_TOKEN,<br/>        access_token_secret: process.env.TWITTER_ACCESS_TOKEN_SECRET<br/>    }<br/>);</span><span id="f729" class="lc jr hu ky b fv lt le l lf lg">T.post('statuses/update', {status: tweet + " #boardgames"}, (err, data, response) =&gt; {<br/>    console.log(data)<br/>});</span></pre><h1 id="fefb" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">安排推文</h1><p id="49a9" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">现在，我希望机器人每天发一次微博，所以我使用了Heroku调度器。它需要一个shell脚本在每个时间间隔运行，所以我创建了<em class="lk"> bin/run_bot.sh，</em>它有一个命令:</p><pre class="kt ku kv kw fq kx ky kz la aw lb dt"><span id="5f77" class="lc jr hu ky b fv ld le l lf lg">#!/bin/bash node index.js</span></pre><h1 id="55e8" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">利润！</h1><p id="817a" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">就是这样！每天一次，我的机器人向所有互联网的桌游爱好者传递精彩的文字，我为未来的功能和其他平台提供了灵活的代码和词汇基础。</p><figure class="kt ku kv kw fq lm fe ff paragraph-image"><div role="button" tabindex="0" class="ln lo di lp bf lq"><div class="fe ff lu"><img src="../Images/652cca0a356751b9d395a2245bb4904c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*1KSbM4b3Mfn6uWhf.png"/></div></div></figure><p id="93d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">尽情享受吧，我们在赌桌上见！</p></div><div class="ab cl lv lw hc lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hn ho hp hq hr"><p id="4c20" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="lk">原载于</em>【dzone.com】<em class="lk"/><em class="lk">。</em></p></div></div>    
</body>
</html>