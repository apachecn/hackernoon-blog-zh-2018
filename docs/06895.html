<html>
<head>
<title>[Firebase] Setup storage upload from Browser in 3 step</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[Firebase]通过3个步骤设置从浏览器上传存储</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/firebase-setup-storage-upload-browser-in-3-step-tutorial-example-bucket-website-javascript-vue-react-driect-4d005c001152?source=collection_archive---------8-----------------------#2018-08-16">https://medium.com/hackernoon/firebase-setup-storage-upload-browser-in-3-step-tutorial-example-bucket-website-javascript-vue-react-driect-4d005c001152?source=collection_archive---------8-----------------------#2018-08-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/18b83f571e7d16e12165f689fb43df02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7tOLUNpTqKeais6yPqTGUQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">[Firebase] Setup storage upload from Browser in 3 step</figcaption></figure><blockquote class="jg jh ji"><p id="c431" class="jj jk jl jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh hn dt translated">在尝试了Firebase身份验证模块之后(对如此方便的实用程序感到惊讶)，我玩了一下Firebase的存储部分，对它的设计非常满意。</p></blockquote><h1 id="4fc9" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">赞成的意见</h1><p id="0466" class="pw-post-body-paragraph jj jk hu jm b jn lg jp jq jr lh jt ju li lj jx jy lk ll kb kc lm ln kf kg kh hn dt translated">Firebase存储是专门针对<strong class="jm hv">规模</strong>、<strong class="jm hv">安全</strong>、<strong class="jm hv">网络弹性(</strong> <a class="ae lo" href="https://firebase.googleblog.com/2016/07/5-tips-for-firebase-storage.html" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv"> <em class="jl">阅读更多</em> </strong> </a> <strong class="jm hv"> ) </strong>。</p><ul class=""><li id="c710" class="lp lq hu jm b jn jo jr js li lr lk ls lm lt kh lu lv lw lx dt translated"><strong class="jm hv">规模:</strong>每一个上传的文件都有<strong class="jm hv">谷歌云存储</strong>做备份，规模达到<em class="jl">Pb</em>。</li><li id="059e" class="lp lq hu jm b jn ly jr lz li ma lk mb lm mc kh lu lv lw lx dt translated"><strong class="jm hv">安全性:</strong>可以使用存储安全规则来保护特定用户或用户组的文件。</li><li id="7eef" class="lp lq hu jm b jn ly jr lz li ma lk mb lm mc kh lu lv lw lx dt translated"><strong class="jm hv">网络弹性:</strong>在网络连接不畅的情况下会自动重试上传和下载，这样你就不用自己跟踪了。</li></ul><h1 id="05b0" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">骗局</h1><p id="ec47" class="pw-post-body-paragraph jj jk hu jm b jn lg jp jq jr lh jt ju li lj jx jy lk ll kb kc lm ln kf kg kh hn dt translated">当你的产品有自己的认证系统时，在firebase上配置ACL并不容易。firebase SDK很好地封装了一切，当然也包括存储访问控制规则。</p><h1 id="0c2d" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">1.在项目中设置存储桶键</h1><p id="ad99" class="pw-post-body-paragraph jj jk hu jm b jn lg jp jq jr lh jt ju li lj jx jy lk ll kb kc lm ln kf kg kh hn dt translated">您必须将您的存储桶添加到Firebase SDK配置中。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff md"><img src="../Images/755aa0318922dbe2f70005185f52b52c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S48i31TEFY8sqQVdmg_yxQ.png"/></div></div></figure><h1 id="aab7" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">2.设置规则</h1><p id="7d10" class="pw-post-body-paragraph jj jk hu jm b jn lg jp jq jr lh jt ju li lj jx jy lk ll kb kc lm ln kf kg kh hn dt translated">存储安全规则必须首先指定评估规则所依据的云<code class="eh mi mj mk ml b">storage</code>(通过<code class="eh mi mj mk ml b">match /b/{bucket}/o</code>)。</p><p id="8947" class="pw-post-body-paragraph jj jk hu jm b jn jo jp jq jr js jt ju li jw jx jy lk ka kb kc lm ke kf kg kh hn dt translated">简单来说就是四种:<code class="eh mi mj mk ml b">default</code>、<code class="eh mi mj mk ml b">public</code>、<code class="eh mi mj mk ml b">user</code>、<code class="eh mi mj mk ml b">private, </code>我们准备以public为例(<strong class="jm hv"> <em class="jl">少认证问题来演示</em> </strong>)。</p><pre class="me mf mg mh fq mm ml mn mo aw mp dt"><span id="b297" class="mq kj hu ml b fv mr ms l mt mu">service firebase.storage {<br/>  match /b/{bucket}/o {<br/>    match /{allPaths=**} {<br/>      allow read, write;<br/>    }<br/>  }<br/>}</span></pre><h1 id="6ee5" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">3.编码</h1><p id="6278" class="pw-post-body-paragraph jj jk hu jm b jn lg jp jq jr lh jt ju li lj jx jy lk ll kb kc lm ln kf kg kh hn dt translated">云存储允许开发人员快速轻松地将文件上传到由Firebase提供和管理的<a class="ae lo" href="https://cloud.google.com/storage" rel="noopener ugc nofollow" target="_blank"> Google云存储</a>桶中。</p><p id="15c2" class="pw-post-body-paragraph jj jk hu jm b jn jo jp jq jr js jt ju li jw jx jy lk ka kb kc lm ke kf kg kh hn dt translated">由于默认的Google App Engine应用程序和Firebase共享这个桶，配置公共访问可能会使新上传的应用程序引擎文件也可以公开访问。设置身份验证时，请确保再次限制对存储桶的访问。</p><p id="2259" class="pw-post-body-paragraph jj jk hu jm b jn jo jp jq jr js jt ju li jw jx jy lk ka kb kc lm ke kf kg kh hn dt translated">同样，Firebase支持<strong class="jm hv"> <em class="jl"> Blob </em> </strong>和<strong class="jm hv"> <em class="jl">文件</em> </strong>对象上传。</p><figure class="me mf mg mh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mv"><img src="../Images/2aa8471a2a83bd95f019f9685c40364d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rdteHkrbGwf8eyiPIhxFrQ.png"/></div></div></figure><h1 id="7167" class="ki kj hu bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf dt translated">参考:</h1><p id="dbac" class="pw-post-body-paragraph jj jk hu jm b jn lg jp jq jr lh jt ju li lj jx jy lk ll kb kc lm ln kf kg kh hn dt translated">——<a class="ae lo" href="https://firebase.google.com/docs/storage/web/start" rel="noopener ugc nofollow" target="_blank">https://firebase.google.com/docs/storage/web/start</a></p><p id="98bf" class="pw-post-body-paragraph jj jk hu jm b jn jo jp jq jr js jt ju li jw jx jy lk ka kb kc lm ke kf kg kh hn dt translated">—<a class="ae lo" href="https://firebase.google.com/docs/storage/security/start#sample-rules" rel="noopener ugc nofollow" target="_blank">https://firebase . Google . com/docs/storage/security/start # sample-rules</a></p><p id="ab8c" class="pw-post-body-paragraph jj jk hu jm b jn jo jp jq jr js jt ju li jw jx jy lk ka kb kc lm ke kf kg kh hn dt translated">—<a class="ae lo" href="https://firebase.googleblog.com/2016/07/5-tips-for-firebase-storage.html" rel="noopener ugc nofollow" target="_blank">https://firebase . Google blog . com/2016/07/5-tips-for-firebase-storage . html</a></p></div></div>    
</body>
</html>