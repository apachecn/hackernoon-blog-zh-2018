<html>
<head>
<title>Locking and Encrypting Apps with Encfs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Encfs锁定和加密应用</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/locking-and-encrypting-apps-with-encfs-c1484e77f479?source=collection_archive---------31-----------------------#2018-08-16">https://medium.com/hackernoon/locking-and-encrypting-apps-with-encfs-c1484e77f479?source=collection_archive---------31-----------------------#2018-08-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="c2bb" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">为了更好地突出语法和复制粘贴代码片段的能力，请在<a class="ae jt" href="https://grimoire.science/locking-and-encrypting-apps-with-encfs/" rel="noopener ugc nofollow" target="_blank"> grimoire.science </a>上查看这篇文章。</p></blockquote><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff ju"><img src="../Images/de4dcbfade3d188123d1edab4e59b6b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PCQfGs7Xlv_90oway5oQYQ.jpeg"/></div></div></figure><p id="fe7d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">共享系统的一个问题是，有时多个应用程序被多人使用。通常，这可以通过在系统中增加多用户支持来解决。毕竟<em class="iw">、</em>、nix和de rivate都被<a class="ae jt" href="https://www.wikiwand.com/en/History_of_Unix" rel="noopener ugc nofollow" target="_blank">设计成</a>供多个用户同时使用。</p><p id="ef71" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">但是，在某些情况下，单个应用程序保持锁定直到提供密码才有意义。在任何情况下，<a class="ae jt" href="https://wiki.archlinux.org/index.php/EncFS" rel="noopener ugc nofollow" target="_blank"> encfs </a>都是较好的加密方法之一(只要用户的能力高于shad ows安全),并且无论如何都是加密应用程序数据的好方法。加密的理由各不相同，但不管是为了让黑客的日子更难过，还是为了阻止云存储提供商四处窥探，它总是一个好主意。即使多个用户不会共享一个帐户，加密也能防止<code class="eh kj kk kl km b">root users</code>或<code class="eh kj kk kl km b">admins</code>对您的数据过于敏感。</p><p id="9928" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">pop u lar <a class="ae jt" href="https://wiki.archlinux.org/index.php/GNOME/Keyring" rel="noopener ugc nofollow" target="_blank"> gnome-keyring </a>和其他安全的后续操作方法并不适合这种情况，因为它们中的大多数都是一次性解锁的，并且不与特定的相似程序相关联。</p><p id="17c4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">在这里，我们将创建几个简单的bash脚本，以通用和灵活的方式锁定和加密应用程序，允许多个用户在共享应用程序的情况下加密他们自己的隐私。完整的脚本位于我的<a class="ae jt" href="https://github.com/HaoZeke/Dotfiles/blob/master/dotfiles/common/.local/bin/cryptHelpers/unlockEncfsApp.sh" rel="noopener ugc nofollow" target="_blank">点文件</a>中。</p><h1 id="d3ed" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">要求</h1><p id="8bce" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">大多数UNIX系统及其衍生系统(包括MacOS、Ubuntu和其他Debian版本、基于RPM的系统等)都有这种基本要求。</p><p id="e45d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">我个人运行的是Arch Linux，但那只是一种偏见。</p><p id="855b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">要求是:</p><ol class=""><li id="f5f4" class="lq lr hu ix b iy iz jc jd kg ls kh lt ki lu js lv lw lx ly dt translated"><a class="ae jt" href="https://www.gnu.org/software/bash/" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hv">痛击</strong> </a></li></ol><p id="e851" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">这是shell脚本中的shell子脚本所需要的。几乎无处不在。</p><p id="4536" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">2.<a class="ae jt" href="https://github.com/vgough/encfs" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hv"> EncFS </strong> </a></p><p id="52c3" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">这个汉负责加密部分。虽然这里介绍的所有内容都只需要基本程序本身，但是新用户也可能会因拥有一个GUI界面而受益。我提供Gnome Encfs管理器。</p><p id="689f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">3.<strong class="ix hv">一个ASKPASS程序</strong></p><p id="d6df" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">这些是最著名的怪异错误。然而，这里我们将重点关注<a class="ae jt" href="https://www.wikiwand.com/en/Zenity" rel="noopener ugc nofollow" target="_blank"> zen ity </a>和<a class="ae jt" href="https://git-scm.com/" rel="noopener ugc nofollow" target="_blank"> git </a>作为退路。</p><p id="3b9b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">仅此而已。该方法的其他变体可能使用<a class="ae jt" href="https://grimoire.science/locking-and-encrypting-apps-with-encfs/shoesrb.com/" rel="noopener ugc nofollow" target="_blank">鞋</a>来获得更好的GUI效果。也可以使用其他的<code class="eh kj kk kl km b">askpass</code>程序和助手，比如pop ul ar<a class="ae jt" href="https://github.com/sigmavirus24/x11-ssh-askpass" rel="noopener ugc nofollow" target="_blank">X11-ssh-ask pass</a>程序。</p><h1 id="be77" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">程序结构</h1><p id="b045" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">我们的基本结构很简单。</p><ol class=""><li id="cf4e" class="lq lr hu ix b iy iz jc jd kg ls kh lt ki lu js lv lw lx ly dt translated">安装了加密的文件夹</li><li id="a11d" class="lq lr hu ix b iy lz jc ma kg mb kh mc ki md js lv lw lx ly dt translated">应用程序正在运行</li></ol><p id="af93" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">此外，我们希望以下功能:</p><ol class=""><li id="eb1c" class="lq lr hu ix b iy iz jc jd kg ls kh lt ki lu js lv lw lx ly dt translated">在没有终端(GUI，没有终端用户查询)的情况下执行</li><li id="e4f5" class="lq lr hu ix b iy lz jc ma kg mb kh mc ki md js lv lw lx ly dt translated">为应用程序生成新存储的一种自动生成方式</li><li id="733a" class="lq lr hu ix b iy lz jc ma kg mb kh mc ki md js lv lw lx ly dt translated">挂载点的存储名</li></ol><h1 id="8b81" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">预赛</h1><p id="e672" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">在开始创作脚本之前，我喜欢先用自然的外壳来解释。在这种情况下，这种方法包括检查以下内容:</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff me"><img src="../Images/e25afe542dc4a5a23431794926d76fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gnqY3Wf8gPA8lpLjK4UgeA.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Shell trials</figcaption></figure><ul class=""><li id="ec0b" class="lq lr hu ix b iy iz jc jd kg ls kh lt ki lu js mj lw lx ly dt translated">这促使我创建目录，如果它不存在的话，这将无法在shell脚本中正确处理。</li></ul><p id="f964" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">此外，<code class="eh kj kk kl km b">encfs</code>的手册页向我展示了通过<code class="eh kj kk kl km b">--extpass</code>标签授予对外部au then行动管理器的支持。</p><h1 id="44e6" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">履行</h1><p id="077e" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">随着这些先决条件的排除，是时候开始编写脚本了。特别需要bash shell的部分将包含she bang。</p><p id="1934" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">永远记住用它开始脚本，并且只放一次，就在文件的顶部。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff me"><img src="../Images/30e60ffa62e250abac049dc9e604cc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AsadMy9rmfT52PDHTY6ySg.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">The shebang</figcaption></figure><h1 id="9f3c" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">设置变量</h1><p id="ad2b" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">最初我们可以简单地设置一个解锁字符串，如下所示:</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/b53ddcf060b48d271e6374664a36ef73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oL8TOKgnlj2k4siEBNoy8w.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Using a variable for the unlock dialog</figcaption></figure><h1 id="51f2" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">选择ASKPASS程序</h1><p id="4317" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">由于脚本在没有tend ing的情况下也会很快变得笨拙，我们将首先添加一个适合运行外部事务的简单变量。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/4a3cb4df49f97bd79123af39f672b95b.png" data-original-src="https://miro.medium.com/v2/resize:fit:580/format:webp/1*-cYl9t3Nrd9alOVfbi8E_Q.png"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Zenity Prompt</figcaption></figure><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/3dd0335c0042b3e717d041740f4e0563.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jvjflJqHqeys25PlOy9ZIg.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Zenity implementation</figcaption></figure><p id="a42f" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">正如前面提到的，禅意是最好的选择，然而，它可能不会在任何地方都适用。所以我们需要撤退。</p><p id="47e6" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">Git 或多或少在任何地方都是可用的，而且拥有一个非常简洁的工具也是如此。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/4957bbe024692faab9466401cad46763.png" data-original-src="https://miro.medium.com/v2/resize:fit:852/format:webp/1*Z7Aqpd5ONei-OZqVxkO6hw.png"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Git Askpass Prompt</figcaption></figure><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/4f1e6cffba314ce5894b80ee820c8b88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKHEq0mvoEpUQ7xlbYXmSA.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Git Askpass Implementaion</figcaption></figure><p id="b87c" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">然而，最好将它们都包装起来，以便根据可用性选择一个或另一个。所以，我们写了一个简单的测试。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/174e6edd312c465ee5fac816b061eafd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9IIDyf41VEskgy2V2ur_Kg.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">The test logic</figcaption></figure><p id="01ad" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">老实说，美国的时代是T1，而不是T2，这有点不可思议。然而，在这里我选择了简单，因为它看起来更快。上面的更可移植(POSIX com pli ant)的版本将使用<code class="eh kj kk kl km b">command -v</code>。欲了解更多细节，请检查<a class="ae jt" href="https://stackoverflow.com/questions/592620/how-to-check-if-a-program-exists-from-a-bash-script" rel="noopener ugc nofollow" target="_blank">该堆栈交换问题</a>。</p><h1 id="29eb" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">创建挂载点</h1><p id="a71e" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated"><a class="ae jt" href="https://launchpad.net/gencfsm" rel="noopener ugc nofollow" target="_blank"> Gnome Encfs管理器</a>默认在卸载存储时移除挂载点，然而，这会导致终端输入需要被抑制，因此在运行Encfs之前创建目录。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/653266bf1e09f1f83809e758cb18bea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RDXAp-AYJTIdvn2qOU-oSg.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Variables and directories</figcaption></figure><h2 id="64a9" class="mn ko hu bd kp mo mp mq kt mr ms mt kx kg mu mv lb kh mw mx lf ki my mz lj na dt translated">警告</h2><p id="c81c" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">上述剪贴宠物不处理以下情况:</p><ul class=""><li id="d730" class="lq lr hu ix b iy iz jc jd kg ls kh lt ki lu js mj lw lx ly dt translated">藏毒点已经准备好了</li><li id="0d60" class="lq lr hu ix b iy lz jc ma kg mb kh mc ki md js mj lw lx ly dt translated">藏起来的东西不存在</li></ul><p id="21c9" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">这些将在本文档的<a class="ae jt" href="https://grimoire.science/locking-and-encrypting-apps-with-encfs/#improvements" rel="noopener ugc nofollow" target="_blank">改进</a>部分中进行处理。</p><h1 id="fed2" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">上马就跑</h1><p id="76a5" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">现在我们可以简单地安装我们的仓库并运行程序了。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/315a3f67bed2b39f482a273922313540.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HsAXgDg9nw3s8fUgA3otBQ.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">A basic mount and run</figcaption></figure><h2 id="9121" class="mn ko hu bd kp mo mp mq kt mr ms mt kx kg mu mv lb kh mw mx lf ki my mz lj na dt translated">警告</h2><p id="0e76" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">在此阶段，脚本不具备处理以下情况的能力:</p><ul class=""><li id="9fcd" class="lq lr hu ix b iy iz jc jd kg ls kh lt ki lu js mj lw lx ly dt translated">阿尔安装操作失败(密码错误)</li><li id="9cd7" class="lq lr hu ix b iy lz jc ma kg mb kh mc ki md js mj lw lx ly dt translated">冲突文件是加密的</li></ul><p id="9ed4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">该脚本在不测试挂载结果的情况下运行程序，这将导致很多错误和奇怪的错误。这些边缘情况由<a class="ae jt" href="https://grimoire.science/locking-and-encrypting-apps-with-encfs/#handling-authentication" rel="noopener ugc nofollow" target="_blank">处理认证</a>中的代码处理。</p><h1 id="d559" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">丰富</h1><p id="4b2d" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">本节讨论对上述基本脚本的几个改进。</p><h1 id="d359" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">给唱片命名</h1><p id="9586" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">这实际上并不是很重要的一点，然而，我希望应用程序目录以第<strong class="ix hv">个字母开始。我还想将加密的数据存储在一个隐藏的文件夹中。</strong></p><p id="bb00" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">无论如何，脚本的这一部分使用了bash脚本扩展。在这个<br/>点上，我们也可以让<code class="eh kj kk kl km b">unlockString</code>变得更整洁一点。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/a869e81f886d68980608b3413a7f368b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LMFDOqNMa_18jKxiDgxB3Q.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Bash substitutions for prettier names</figcaption></figure><p id="956e" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">现在我们有了名称，我们只需修改目录。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/f68338242ede7a071391de3a7797194a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CGA2jwl4dFbtdbW65yXR3g.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Renaming the directories</figcaption></figure><h1 id="d38c" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">搬运已安装的设备</h1><p id="c835" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">为了确保脚本甚至能够处理成功运行命令的情况，需要检查挂载点当前是否已挂载。</p><p id="d16a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">如果它已装载，我们将卸载它。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/48e266ff5807e17edd9b457da14484b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xn2zC5ggpm2Ezj5CarERqg.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Testing for mounts</figcaption></figure><p id="91bf" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">此外，对于仓库尚未存在的情况，我们还需要创建另一个目录。如果要安装武器，我们也要杀死应用程序(为了安全)。这个部分由<a class="ae jt" href="https://stackoverflow.com/questions/9422461/check-if-directory-mounted-with-bash" rel="noopener ugc nofollow" target="_blank">这个栈交换线程</a>辅助。</p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/66239f036d23d629e2f2fdb7336583e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SGiEd_3yN0XCQeIJNiw4Ow.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">Mount handling with directory creation</figcaption></figure><h1 id="5e38" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">处理认证</h1><p id="8ba9" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">最后，我们将处理脚本执行和堆栈执行，但密码是正确的情况。此外，我们将通过<code class="eh kj kk kl km b">$?</code>变量处理控制流量的管理。</p><p id="6efd" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">非常简单，<code class="eh kj kk kl km b">$?</code>变量保存了先前命令的结果。因此，它可以用来控制流量。这里的答案<a class="ae jt" href="https://unix.stackexchange.com/questions/22726/how-to-conditionally-do-something-if-a-command-succeeded-or-failed" rel="noopener ugc nofollow" target="_blank">启发了我。</a></p><figure class="jv jw jx jy fq jz fe ff paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="fe ff mk"><img src="../Images/7b6ae57fdd0f36ce97161199f2fbde11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JivWY8Zo7X8eDty6gDwn7A.png"/></div></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">The results variable and flow of control</figcaption></figure><h1 id="36ea" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">把所有的放在一起</h1><p id="ce08" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">有关最新版本，请查看<a class="ae jt" href="https://github.com/HaoZeke/Dotfiles/blob/master/dotfiles/common/.local/bin/cryptHelpers/unlockEncfsApp.sh" rel="noopener ugc nofollow" target="_blank">我的点文件</a>。</p><p id="e1b9" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated">因为Medium不能处理语法高亮，所以这里也把它作为一个要点。</p><figure class="jv jw jx jy fq jz"><div class="bz el l di"><div class="nb nc l"/></div><figcaption class="mf mg fg fe ff mh mi bd b be z ek">The entire script.</figcaption></figure><h1 id="7eb3" class="kn ko hu bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">未来方向</h1><p id="1a3b" class="pw-post-body-paragraph iu iv hu ix b iy ll ja jb jc lm je jf kg ln ji jj kh lo jm jn ki lp jq jr js hn dt translated">第一次应该有一个非终极的方法来打开藏毒点。此外，为各种应用制定规则和配置方案可能也很有趣。</p></div><div class="ab cl nd ne hc nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="hn ho hp hq hr"><p id="9ec8" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kg jh ji jj kh jl jm jn ki jp jq jr js hn dt translated"><em class="iw">最初发表于</em> <a class="ae jt" href="https://grimoire.science/locking-and-encrypting-apps-with-encfs/" rel="noopener ugc nofollow" target="_blank"> <em class="iw">魔法书</em> </a> <em class="iw">。</em></p></div></div>    
</body>
</html>