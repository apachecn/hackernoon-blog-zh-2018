<html>
<head>
<title>Android App Architectures: Example of MVP with Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android应用架构:使用Kotlin的MVP示例</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/https-medium-com-rohitss-android-app-architectures-mvp-with-kotlin-f255b236010a?source=collection_archive---------0-----------------------#2018-08-22">https://medium.com/hackernoon/https-medium-com-rohitss-android-app-architectures-mvp-with-kotlin-f255b236010a?source=collection_archive---------0-----------------------#2018-08-22</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="8743" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">MVP是如何工作的，它的简单例子展示了在Kotlin中的实现</h2></div><blockquote class="jj jk jl"><p id="cdbe" class="jm jn jo jp b jq jr iv js jt ju iy jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated"><strong class="jp hv">TL；实际上，用几行文字来概括MVP模式是不可行的。但是我可以向你保证，下面这篇文章的每一行都值得你花时间去读。我敢打赌，它会给你足够的理解，你可以自己实现它。尽管如此，如果你赶时间，我还是建议你跳到“<strong class="jp hv">MVP是如何工作的？</strong>谓节。<a class="ae kj" href="https://github.com/RohitSurwase/Android-Architectures-Kotlin/tree/master/News-Kotlin-MVP" rel="noopener ugc nofollow" target="_blank"><strong class="jp hv"/><strong class="jp hv">的源代码示例</strong> </a> <strong class="jp hv">。</strong></strong></p></blockquote><p id="7784" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">每当任何Android开发人员开始考虑提高技术技能时，他或她首先想到的是应用程序的架构。更不用说他们已经知道在标准代码增长后维护它的痛苦。</p><p id="9356" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">我也这样做了，学习了架构，后来选择专注于MVP。在测试项目和后来的生产应用程序中尝试之后，我开始学习Kotlin语言，现在是最新的架构组件。但在这个转变过程中，我意识到，很少到没有；展示在Kotlin中实现这些概念的例子。所以，我在这里用这些例子展示了Kotlin中一些架构模式的实现。我向你保证，这些例子会非常简单，你可以轻松掌握这些概念的核心。</p><p id="ee09" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">在这个系列中，我将针对两个主要的架构模式:模型-视图-表示器&amp; Android架构组件。</p><blockquote class="jj jk jl"><p id="651e" class="jm jn jo jp b jq jr iv js jt ju iy jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated"><a class="ae kj" href="https://hackernoon.com/https-medium-com-rohitss-android-app-architectures-mvp-with-kotlin-f255b236010a" rel="noopener ugc nofollow" target="_blank"> 1。Android应用架构:与科特林的MVP示例(this)</a><br/>2̵.̵̵a̵n̵d̵r̵o̵i̵d̵̵a̵r̵c̵h̵i̵t̵e̵c̵t̵u̵r̵e̵̵c̵o̵m̵p̵o̵n̵e̵n̵t̵s̵̵e̵x̵a̵m̵p̵l̵e̵̵w̵i̵t̵h̵̵k̵o̵t̵l̵i̵n̵<br/>3̵.̵̵a̵n̵d̵r̵o̵i̵d̵̵a̵r̵c̵h̵i̵t̵e̵c̵t̵u̵r̵e̵̵c̵o̵m̵p̵o̵n̵e̵n̵t̵s̵:̵̵a̵d̵v̵a̵n̵c̵e̵m̵e̵n̵t̵s̵<br/><a class="ae kj" href="https://proandroiddev.com/best-architecture-for-android-mvi-livedata-viewmodel-71a3a5ac7ee3" rel="noopener ugc nofollow" target="_blank"><strong class="jp hv">4。Android最佳架构:mvi+livedata+viewmodel =❤️</strong></a></p></blockquote><p id="9f87" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">模型-视图-演示者</strong> ( <strong class="jp hv"> MVP </strong> ) <strong class="jp hv"> </strong>与<strong class="jp hv">科特林</strong></p><p id="659c" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">在设计任何软件的架构时，要记住的基本原则是关注点的分离。MVP是将表示层从业务逻辑中分离出来的最佳模式之一。此外，MVP还可以帮助您轻松实现更高级、更完整的架构模式，如Clean Architecture。</p><p id="29b8" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">这里我不会回答什么<strong class="jp hv"> </strong>和为什么的问题，而是<strong class="jp hv">如何</strong>的问题。<br/>如何使用MVP？它是如何工作的？以及如何用Kotlin实现？<br/>所以在第一篇文章中，我们将看到使用Kotlin实现MVP。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff kn"><img src="../Images/57703e9bf2b0c30face758443eae4cd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MOy8GojDSVYKmED6stX5sQ.png"/></div></div></figure><p id="f593" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt kz translated"><span class="l la lb lc bm ld le lf lg lh di"> V </span>视图</p><p id="adc6" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv"> Who </strong>:组合活动/片段/视图及其契约即接口。<br/> <strong class="jp hv">目的</strong>:做所有UI相关的东西和所有需要Android上下文的东西。<br/> <strong class="jp hv"> Job </strong>:每当需要做某个动作的时候，就要使用对象触发Presenter各自的函数。它不应该有任何业务逻辑。</p><p id="ebb0" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">尽管XML布局是视图的一部分，但它并不单独被称为视图。所有必要的功能都通过契约/接口添加到我们的活动/片段/视图中。适配器也是视图的一部分。活动/片段/视图直接初始化包括模型在内的呈现者，而呈现者在其构造函数中间接初始化模型。</p><p id="7edd" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">任务示例:<br/> <em class="jo"> -显示/隐藏进度条。<br/> -请求显示数据，稍后显示收到的数据/错误。<br/> -获取</em> LayoutInflater <em class="jo">，资源，安卓系统服务。</em></p><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="li lj l"/></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek"><a class="ae kj" href="https://gist.github.com/RohitSurwase/36c8c392c10d157ecbb223d89105b9eb" rel="noopener ugc nofollow" target="_blank">Key points of <strong class="ak">View</strong> layer in MVP</a></figcaption></figure><p id="b463" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt kz translated">愤怒者</p><p id="4ac5" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">谁？这是一个独立的类，不应该有Android上下文。<br/> <strong class="jp hv">目的</strong>:充当架构视图和模型两个主要层之间的中介。<br/> <strong class="jp hv">作业</strong>:根据视图的请求触发模型各自的功能。</p><p id="c309" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">演示者拥有视图和模型的对象。它不应该有任何业务逻辑。此外，它不应该直接访问任何UI元素。</p><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="li lj l"/></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek"><a class="ae kj" href="https://gist.github.com/RohitSurwase/6f33cdc51c6ab6a9f622b6ace0e9e4ba" rel="noopener ugc nofollow" target="_blank">Key points of <strong class="ak">Presenter</strong> layer in MVP</a></figcaption></figure><p id="526b" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt kz translated">M 奥德尔</p><p id="a8f6" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">谁</strong>:数据库、模型(schema)、API调用和所有其他业务逻辑都是这一层的一部分。这是所有业务逻辑的位置。<br/> <strong class="jp hv">目的</strong>:分离业务逻辑，这样我们可以在没有视图的情况下单独测试它。这也有助于我们跨平台重用代码库。<br/> <strong class="jp hv">作业</strong>:获取/计算数据或误差，显示在界面上。</p><p id="70d8" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">这是我们应该进行API、数据库调用和其他计算的地方。<br/>但是为了让它更坚固，我们可以在模型内部再增加一层:</p><p id="e137" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">储存库</strong> : <br/>根据预定义的条件决定要显示的数据的来源。这意味着它将根据网络可用性等条件从离线或在线来源获取数据。<br/>(为了简单起见，附带的app没有存储库层。)</p><p id="2ef8" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">这样，无论网络条件如何，我们的模型都会显示数据。</strong></p><figure class="ko kp kq kr fq ks"><div class="bz el l di"><div class="li lj l"/></div><figcaption class="lk ll fg fe ff lm ln bd b be z ek"><a class="ae kj" href="https://gist.github.com/RohitSurwase/031e14c0faa48758b79746c222a35cfe" rel="noopener ugc nofollow" target="_blank">Key points of <strong class="ak">Model</strong> layer in MVP</a></figcaption></figure><blockquote class="jj jk jl"><p id="7d2c" class="jm jn jo jp b jq jr iv js jt ju iy jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated">最近，我发表了一篇关于协程的文章，请看-</p></blockquote><div class="lo lp fm fo lq lr"><a href="https://android.jlelse.eu/coroutines-basic-terminologies-and-usage-b4242bd1b2a4" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab ej"><div class="lt ab lu cl cj lv"><h2 class="bd hv fv z el lw eo ep lx er et ht dt translated">Android Kotlin协同程序:基本术语和用法</h2><div class="ly l"><h3 class="bd b fv z el lw eo ep lx er et ek translated">协同程序中使用的常用术语。提前了解这些术语将会简化您的学习过程。</h3></div><div class="lz l"><p class="bd b gc z el lw eo ep lx er et ek translated">android.jlelse.eu</p></div></div><div class="ma l"><div class="mb l mc md me ma mf kx lr"/></div></div></a></div><h2 id="fb68" class="mg mh hu bd mi mj mk ml mm mn mo mp mq kk mr ms mt kl mu mv mw km mx my mz na dt translated">MVP是如何运作的？</h2><p id="d01d" class="pw-post-body-paragraph jm jn hu jp b jq nb iv js jt nc iy jv kk nd jy jz kl ne kc kd km nf kg kh ki hn dt translated">简而言之:视图调用演示者的函数，演示者将其传递给模型，模型请求显示数据。模型获得数据后，将数据传递给演示者，演示者将数据传递给视图，视图在屏幕上显示数据。</p><p id="0039" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">直接</strong>沟通的:<br/>视图== &gt;演示者== &gt;模型</p><p id="e445" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">间接</strong>使用契约/接口的通信:<br/>Model =/=&gt;Presenter =/=&gt;View</p><p id="32c6" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">下面是Android中MVP的简单工作流程图。我请求大家花几分钟时间看下面的插图，这会对你理解Android中的MVP有很大帮助。<br/>注:模型被称为<strong class="jp hv">交互器</strong>。</p><figure class="ko kp kq kr fq ks fe ff paragraph-image"><div role="button" tabindex="0" class="kt ku di kv bf kw"><div class="fe ff ng"><img src="../Images/036ad32113565a67a3418e82498a39d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5SedT0fi85LohkIkNI2gbA.png"/></div></div></figure><p id="0553" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">我希望我说得够清楚，能让大家理解。<br/>这里是 <strong class="jp hv">示例</strong> 的完整<a class="ae kj" href="https://github.com/RohitSurwase/Android-Architectures-Kotlin/tree/master/News-Kotlin-MVP" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hv">源代码。</strong></a></p><div class="lo lp fm fo lq lr"><a href="https://github.com/RohitSurwase/Android-Architectures-Kotlin" rel="noopener  ugc nofollow" target="_blank"><div class="ls ab ej"><div class="lt ab lu cl cj lv"><h2 class="bd hv fv z el lw eo ep lx er et ht dt translated">RohitSurwase/Android-架构-Kotlin</h2><div class="ly l"><h3 class="bd b fv z el lw eo ep lx er et ek translated">Android-Architectures-Kotlin -展示一些流行的应用程序架构模式实现的简单例子…</h3></div><div class="lz l"><p class="bd b gc z el lw eo ep lx er et ek translated">github.com</p></div></div><div class="ma l"><div class="nh l mc md me ma mf kx lr"/></div></div></a></div><p id="e401" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">感谢阅读！<br/> <strong class="jp hv"> Rohit Surwase </strong></p><p id="b9b2" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">如果你喜欢这篇文章，鼓掌鼓掌👏👏👏尽可能多的次数。</p><p id="8b7b" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated"><strong class="jp hv">非常喜欢！</strong>中等允许高达<strong class="jp hv"> 50拍</strong>。<br/>也在 <a class="ae kj" href="https://twitter.com/Rohit5rss" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hv"> Twitter </strong> </a>上发一条<strong class="jp hv">的推文。</strong></p><p id="54a5" class="pw-post-body-paragraph jm jn hu jp b jq jr iv js jt ju iy jv kk jx jy jz kl kb kc kd km kf kg kh ki hn dt translated">让我们成为<a class="ae kj" href="http://in.linkedin.com/in/rohitss5" rel="noopener ugc nofollow" target="_blank"><strong class="jp hv"><em class="jo">LinkedIn</em></strong></a><a class="ae kj" rel="noopener" href="/@rohitss"><strong class="jp hv"><em class="jo">Medium</em></strong></a><strong class="jp hv"><em class="jo"/></strong><a class="ae kj" href="https://twitter.com/Rohit5rss" rel="noopener ugc nofollow" target="_blank"><strong class="jp hv">Twitter</strong></a><strong class="jp hv"/>和<a class="ae kj" href="http://github.com/RohitSurwase/" rel="noopener ugc nofollow" target="_blank"><strong class="jp hv"><em class="jo">GitHub</em></strong></a><strong class="jp hv"><em class="jo">。</em> </strong></p><h2 id="808b" class="mg mh hu bd mi mj mk ml mm mn mo mp mq kk mr ms mt kl mu mv mw km mx my mz na dt translated">另外，看看我发表的其他几个故事:</h2><div class="lo lp fm fo lq lr"><a href="https://psiloveyou.xyz/introverts-decoded-why-am-i-still-single-a046d1596d1e" rel="noopener follow" target="_blank"><div class="ls ab ej"><div class="lt ab lu cl cj lv"><h2 class="bd hv fv z el lw eo ep lx er et ht dt translated">内向者解码:恋爱中未说出口的困境</h2><div class="ly l"><h3 class="bd b fv z el lw eo ep lx er et ek translated">他们从不告诉任何人的事情。</h3></div><div class="lz l"><p class="bd b gc z el lw eo ep lx er et ek translated">psiloveyou.xyz</p></div></div><div class="ma l"><div class="ni l mc md me ma mf kx lr"/></div></div></a></div><div class="lo lp fm fo lq lr"><a href="https://psiloveyou.xyz/introverts-decoded-by-rohit-surwase-edc36c8fbbe5" rel="noopener follow" target="_blank"><div class="ls ab ej"><div class="lt ab lu cl cj lv"><h2 class="bd hv fv z el lw eo ep lx er et ht dt translated">内向者解码</h2><div class="ly l"><h3 class="bd b fv z el lw eo ep lx er et ek translated">当内向的人对自己脸红的时候，是时候更好地理解他们了。</h3></div><div class="lz l"><p class="bd b gc z el lw eo ep lx er et ek translated">psiloveyou.xyz</p></div></div><div class="ma l"><div class="nj l mc md me ma mf kx lr"/></div></div></a></div></div></div>    
</body>
</html>