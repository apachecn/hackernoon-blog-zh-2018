<html>
<head>
<title>Hosting a Website on AWS S3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在S3 AWS上托管一个网站</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hosting-a-website-on-aws-s3-9aed18cec1ed?source=collection_archive---------7-----------------------#2018-08-23">https://medium.com/hackernoon/hosting-a-website-on-aws-s3-9aed18cec1ed?source=collection_archive---------7-----------------------#2018-08-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div class="fe ff hs"><img src="../Images/3973c124da97d513c7caa42574eb2e6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*vsRUsH2Y3MYJ2UF-EzqqQQ.jpeg"/></div></figure><div class=""/><p id="6e5d" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">亚马逊网络服务(AWS)简单存储服务(S3)可以以极低的成本托管静态网站。大多数网站的费用是每月几美分至几美元(对于一个非常大，高流量的网站)。</p><p id="f100" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在这篇文章中，我将讨论两个用Java编写的软件工具，它们允许将大型网站迁移到S3，并在网站位于S3后进行维护。</p><p id="039d" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我的个人网站<a class="ae jw" href="http://bearcave.com" rel="noopener ugc nofollow" target="_blank">bearcave.com</a>于1995年上线，当时网络还处于早期。</p><div class="ht hu fm fo hv jx"><a href="http://bearcave.com" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">熊产品国际主页</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">编辑描述</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">bearcave.com</p></div></div><div class="kg l"><div class="kh l ki kj kk kg kl hx jx"/></div></div></a></div><p id="8d39" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">多年来，bearcave.com已经发展到超过2300个网页。这些页面包括我在<a class="ae jw" href="http://bearcave.com/misl/misl_tech/wavelets/index.html" rel="noopener ugc nofollow" target="_blank">小波信号处理</a>和<a class="ae jw" href="http://bearcave.com/finance/index.html" rel="noopener ugc nofollow" target="_blank">计算金融</a>上所做的工作。</p><p id="368b" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">直到最近，我还在一个商业Linux网络主机上主持bearcave.com(为了保护罪犯，名字被省略了)。与在AWS上托管相比，每月35美元(对于“白金支持”)是非常昂贵的。</p><p id="5e0a" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在亚马逊S3上建立了我的咨询网站<a class="ae jw" href="http://topstonesoftware.com" rel="noopener ugc nofollow" target="_blank">topstonesoftware.com</a>后，我打算把bearcave.com搬到S3。我一直推迟这个项目，因为它是一个大任务。最后，我使用的网络主机提供了足够的动力。他们把我的Linux主目录和网站移到了新的服务器上，丢失了我已故母亲的艺术作品的照片。几周前，我收藏了几年旅行照片的照片库停止了工作(尽管幸运的是，这些照片没有像我母亲的照片库那样丢失)。</p><p id="0b80" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当我向网络主机投诉时，他们毫无歉意。虽然我是他们多年的客户，但他们并不在乎他们丢失了照片，破坏了我的网站。这种傲慢的待遇最终促使bearcave.com搬到了S3。</p><p id="2d31" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">bearcave.com的大部分由静态网页组成。除了一些死链接，bearcave.com唯一被破坏的部分是照片画廊。</p><p id="a178" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我最初使用基于PHP的图库管理我的图库。</p><div class="ht hu fm fo hv jx"><a href="http://galleryproject.org" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">图片库|您网站上的照片</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">那么下一步是什么？不久之后，我们将把网站设为只读。所有的论坛帖子和主题仍然会在那里，但是…</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">galleryproject.org</p></div></div></div></a></div><p id="3a53" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了支持我在AWS S3上的照片库，我需要从基于PHP的动态照片库转移到基于JavaScript的静态照片库。</p><p id="7d37" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当我为社交网络<a class="ae jw" href="http://www.nderground.net" rel="noopener ugc nofollow" target="_blank">under ground</a>建立图片库时，我使用了基于Galleria JavaScript的图片库。</p><div class="ht hu fm fo hv jx"><a href="http://galleria.io" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">Galleria |响应JavaScript图像库</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">一个免费的JavaScript图片库框架，简化了为网络创建漂亮图片库的过程…</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">galleria.io</p></div></div></div></a></div><p id="c6e7" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">有了这次经历，我决定把bearcave.com的照片画廊搬到Galleria。</p><p id="4fc9" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我使用的基于PHP的图库版本将所有照片和照片元数据(如标题)存储在文件中。照片元数据，包括标题信息，存储在一组名为photo.dat，photos.dat.0，photos.dat.1，…</p><p id="63cc" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我想从元数据中恢复标题，并构建Galleria将使用的HTML。这是一个几乎不可能手工完成的任务，尤其是因为我有数百张照片。</p><p id="e596" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我编写了GalleryBuilder Java应用程序来处理画廊元数据并构建Galleria HTML。这个应用程序可以在GitHub上找到:</p><div class="ht hu fm fo hv jx"><a href="https://github.com/IanLKaplan/GalleryBuilder" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">IanLKaplan/GalleryBuilder</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">Gallery builder——一个Java应用程序，它将从图库目录中构建静态图片图库HTML</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">github.com</p></div></div></div></a></div><p id="d228" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">GalleryBuilder是一款专门用于转换基于图库的照片图库的工具。它只能在基于文件的Gallery版本上工作(后来的版本使用mySQL来存储照片和照片元数据)。</p><p id="ae83" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">一旦我为基于Galleria的新图片库生成了HTML，我就使用JetBrains IntelliJ集成开发环境来构建和测试我的基于Galleria的新网页。</p><div class="ht hu fm fo hv jx"><a href="https://www.jetbrains.com/idea/" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">IntelliJ IDEA:JetBrains为专业开发人员提供的Java IDE</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">适用于企业Java、Scala、Kotlin等的功能强大且符合人体工程学的Java IDE...</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">www.jetbrains.com</p></div></div><div class="kg l"><div class="km l ki kj kk kg kl hx jx"/></div></div></a></div><p id="a3bc" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当Galleria图片库完成时，我有了一个(大部分)工作网站。下一步是将网页转移到S3 AWS。</p><p id="0b63" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">S3有一个基于网络的用户界面，允许用户移动文件到S3和创建目录。不幸的是，如果不费力地创建一个目录，然后移动该目录中的所有文件，就无法移动本地计算机上的目录。以这种方式移动全部2300个bearcave.com网页将会非常耗时并且容易出错。</p><p id="a0f5" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我编写了Java S3Update应用程序来将目录树从本地系统移动到S3。这段代码可以从GitHub下载(你需要知道如何构建、编译和执行Java代码)。</p><div class="ht hu fm fo hv jx"><a href="https://github.com/IanLKaplan/S3Update" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">IanLKaplan/S3更新</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">S3 update——一个Java应用程序，它使用来自本地的文件复制/更新Amazon Web Services S3存储桶中的文件</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">github.com</p></div></div><div class="kg l"><div class="kn l ki kj kk kg kl hx jx"/></div></div></a></div><p id="1a13" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">S3Update应用程序是用Eclipse开发的，GitHub存储库包含Eclipse项目文件。</p><p id="8163" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当本地系统上的副本发生变化时，S3Update应用程序还将更新S3上的文件。这使得维护S3网站变得更加容易。</p><p id="5915" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">S3存储是一种web资源，可以通过HTTP访问。访问S3文件的操作花费大部分时间等待HTTP事务完成。为了提高性能，S3Update应用程序是多线程的。这允许一个线程在另一个线程等待时读取或写入。对于32线程，这使我的本地网络连接饱和(我只有10Mb/秒的网络连接，所以你的里程可能会有所不同)。</p><p id="e169" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">要使用S3Update代码，您需要使用IAM服务创建一个AWS ID和密钥。这些键应该具有读写S3的权限(AmazonS3FullAccess)。</p><p id="1067" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在你把网站搬到S3之前，你需要在亚马逊上建立一个静态网站。他们已经出版了一个相当好的指南来指导如何做这件事:</p><div class="ht hu fm fo hv jx"><a href="https://docs.aws.amazon.com/AmazonS3/latest/dev/website-hosting-custom-domain-walkthrough.html" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab ej"><div class="jz ab ka cl cj kb"><h2 class="bd ic fv z el kc eo ep kd er et ia dt translated">示例:使用自定义域设置静态网站——Amazon简单存储服务</h2><div class="ke l"><h3 class="bd b fv z el kc eo ep kd er et ek translated">浏览一个如何使用自定义域建立静态网站的代码示例。</h3></div><div class="kf l"><p class="bd b gc z el kc eo ep kd er et ek translated">docs.aws.amazon.com</p></div></div><div class="kg l"><div class="ko l ki kj kk kg kl hx jx"/></div></div></a></div><p id="9a56" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这将需要一个亚马逊网络服务帐户。</p><p id="9ca8" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">当你设置你的S3主机时，你需要改变你的域名系统，以便它由亚马逊处理。这将需要您登录到您的域名提供商(例如，godaddy.com，networksolutions.com等)，以改变亚马逊提供的DNS服务器的DNS。</p><p id="2b67" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在S3上托管一个网站的低成本使它成为托管静态网站的一个有吸引力的选择。S3Update工具使托管和维护网站变得更加容易。</p><p id="cffb" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后一个警告:建立和维护一个S3网站的过程是复杂的，可能超出了许多非技术用户的舒适区。像wix.com这样的网站使建立一个网站变得更加容易，并且包括各种吸引人的模板，你可以用它们来建立简单的网站。虽然这些商业虚拟主机平台比AWS S3贵，但对于不是web开发人员的人来说，这个价格可能是值得的。</p></div></div>    
</body>
</html>