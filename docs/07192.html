<html>
<head>
<title>What do you get when you mix sugar water, 3D printing and deep learning?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">糖水、3D打印、深度学习混合在一起，你得到了什么？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-do-you-get-when-you-mix-sugar-water-3d-printing-and-deep-learning-39de7b3f5f0e?source=collection_archive---------4-----------------------#2018-08-25">https://medium.com/hackernoon/what-do-you-get-when-you-mix-sugar-water-3d-printing-and-deep-learning-39de7b3f5f0e?source=collection_archive---------4-----------------------#2018-08-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="is it iu"><p id="4ea8" class="iv iw ix iy b iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt hn dt translated">可爱的蜂鸟造访你家后院的精彩特写视频！</p></blockquote><h1 id="72dd" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">演示:</h1><p id="8d56" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">这是奖励。看可爱的小蜂鸟！</p><figure class="la lb lc ld fq le"><div class="bz el l di"><div class="lf lg l"/></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Demo video</figcaption></figure><h1 id="8014" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">糖水:</h1><p id="c4b6" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">为了确保我们的<a class="ae ll" href="https://hackernoon.com/tagged/hummingbird" rel="noopener ugc nofollow" target="_blank">蜂鸟</a>朋友出现在试镜现场，我们需要知道他们想要什么，<strong class="iy hv">食物</strong>。蜂鸟在半空中盘旋的独特能力意味着它们需要大量的食物来支持它们的高代谢率。事实上，研究人员发现它们在脊椎动物恒温动物中拥有最高的质量比代谢率。</p><p id="b066" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">好的糖水很重要，因为它会吸引蜂鸟来到你的后院。这是能让蜂鸟(和你)快乐的糖和水的比例。</p><pre class="la lb lc ld fq lm ln lo lp aw lq dt"><span id="ac58" class="lr jv hu ln b fv ls lt l lu lv">white cane sugar : water = 1 : 4 </span></pre><p id="9aca" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">此外，你可以考虑添加一点食用色素来吸引蜂鸟。</p><h1 id="b270" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">硬件:</h1><p id="967c" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">这是完整的硬件设置。</p><figure class="la lb lc ld fq le fe ff paragraph-image"><div class="fe ff lw"><img src="../Images/dafaafaaaab70edaddd3d75036456e1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:770/format:webp/1*ROFGpz4GPjIlB93SeR5_Bw.png"/></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">The hardware setup</figcaption></figure><figure class="la lb lc ld fq le fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff lz"><img src="../Images/3b3ba8a83225727a3a7aa0b4c3bd2604.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c5IqIWHd5r1TUUb788yD6w.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">The hardware setup in the garden</figcaption></figure><h2 id="9ca3" class="lr jv hu bd jw me mf mg ka mh mi mj ke ku mk ml ki kw mm mn km ky mo mp kq mq dt translated">蜂鸟喂食器</h2><p id="8136" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">蜂鸟一直是园丁们的最爱。多年来，人们已经开发了许多种类的喂鸟器来吸引它们到他们的后院。这些设计非常酷，可以防止蜜蜂从蜂鸟那里偷走糖水。</p><p id="d6be" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">我用的是现成的蜂鸟喂食器，<a class="ae ll" href="http://Perky-Pet Pinch-Waist Glass Hummingbird Feeder 203CP (8oz)" rel="noopener ugc nofollow" target="_blank"> Perky-Pet捏腰玻璃蜂鸟喂食器203CP (8oz) </a>。你可以使用上面的链接从亚马逊订购，但我是从当地的弗雷德·迈耶那里买的。</p><h2 id="710c" class="lr jv hu bd jw me mf mg ka mh mi mj ke ku mk ml ki kw mm mn km ky mo mp kq mq dt translated">照相机</h2><p id="4623" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">为了拍摄蜂鸟的特写镜头，我们需要一个小而高质量的相机。我用的是现成的<a class="ae ll" href="https://www.amazon.com/REMALI-Waterproof-Battery-Carrying-Accessories/dp/B01GSHGBGU" rel="noopener ugc nofollow" target="_blank">相机</a>，REMALI 4K超高清体育动作相机。</p><h2 id="c93b" class="lr jv hu bd jw me mf mg ka mh mi mj ke ku mk ml ki kw mm mn km ky mo mp kq mq dt translated">蜂鸟喂食器上的3D打印相机支架</h2><p id="527b" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">在这一点上，相机和蜂鸟喂食器仍然是分开的。因此，我需要定制硬件来将摄像机固定在蜂鸟喂食器上。这是我做的模型，它被设计成让相机朝下拍摄特写镜头。模型在这里上传到Google Drive <a class="ae ll" href="https://drive.google.com/open?id=1JwEOZvm8KRo2V7Ft3YV7FnVde08FMbZh" rel="noopener ugc nofollow" target="_blank">。如果你先登录Gmail，然后点击上面的链接，你可以在浏览器中看到不同的3d视图。</a></p><figure class="la lb lc ld fq le fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff mr"><img src="../Images/35414e794008ac4056d8910471329221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W__YPilMKhxJ2XnVd1yzVQ.png"/></div></div></figure><h2 id="7dbf" class="lr jv hu bd jw me mf mg ka mh mi mj ke ku mk ml ki kw mm mn km ky mo mp kq mq dt translated">螺栓、螺母、绳子和橡皮筋</h2><p id="a84e" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">最后，我用螺栓和螺母(直径6mm)将相机支架固定在蜂鸟喂食器上，并用绳子将支架挂在后院的架子上。我还加了一些橡皮筋来进一步固定相机。</p><h1 id="b3ef" class="ju jv hu bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr dt translated">软件:</h1><p id="579a" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">这就是我们希望从软件中得到的:能够提取出包含蜂鸟的帧。</p><figure class="la lb lc ld fq le fe ff paragraph-image"><div role="button" tabindex="0" class="ma mb di mc bf md"><div class="fe ff ms"><img src="../Images/d0ebe42edda73ef6aec9bec9213d73cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YEMyvfIulIfPeXzvtlUcrQ.png"/></div></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Determining whether there is any hummingbird in an image</figcaption></figure><h2 id="d5db" class="lr jv hu bd jw me mf mg ka mh mi mj ke ku mk ml ki kw mm mn km ky mo mp kq mq dt translated">深度学习和计算机视觉</h2><p id="c317" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">很有可能，蜂鸟一天只在你的喂鸟器前待几分钟。所以，大部分视频帧只捕捉到了<a class="ae ll" href="https://hackernoon.com/tagged/background" rel="noopener ugc nofollow" target="_blank">背景</a>，并不有趣。如果有一种方法可以自动检测、提取和连接蜂鸟出现的帧，那就太好了。为此，我们需要一些计算机视觉技术。</p><p id="6b26" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">首先，我将一个预先训练好的<a class="ae ll" href="https://arxiv.org/abs/1512.03385" rel="noopener ugc nofollow" target="_blank"> RESNET </a>应用于整个图像，并检查它是一只蜂鸟的可能性。然而，它并没有很好地工作。这可能是因为图像中有如此多的其他东西，它们混淆了分类器。</p><p id="5a14" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">然后，我注意到蜂鸟在图像中出现的区域通常是靠近喂鸟者花朵的区域。因此，我可以裁剪出靠近两朵花的区域，并对它们应用相同的分类器。而且效果很好。下面是<a class="ae ll" href="https://hackernoon.com/tagged/python" rel="noopener ugc nofollow" target="_blank"> Python </a>的代码和结果。</p><figure class="la lb lc ld fq le"><div class="bz el l di"><div class="mt lg l"/></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Code to detect whether an image contains any hummingbirds. It also includes an evaluation snippet.</figcaption></figure><figure class="la lb lc ld fq le fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/50145148dd8c45f5ea5b7c660582f76c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*6sJHaRbfsm_Gh07qUlx8ig.png"/></div><figcaption class="lh li fg fe ff lj lk bd b be z ek">Classification output. x-axis is the index of the image, y-axis is the likelihood that we think the image contains a hummingbird. A green dot means the image contains a hummingbird and a red dot means otherwise. From the plot, we see that a threshold of 0.05 gives us only 2 mis-classified examples.</figcaption></figure><p id="8a67" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">我们在47个例子中只有两个错误分类(即准确率&gt; 95%)。对于两个错误分类的例子，一个是由于蜂鸟的高速移动而导致的模糊图像，另一个只包含蜂鸟的喙。</p><h2 id="5eae" class="lr jv hu bd jw me mf mg ka mh mi mj ke ku mk ml ki kw mm mn km ky mo mp kq mq dt translated">使用FFMPEG在python中剪辑视频和组合视频</h2><p id="65d5" class="pw-post-body-paragraph iv iw hu iy b iz ks jb jc jd kt jf jg ku kv jj jk kw kx jn jo ky kz jr js jt hn dt translated">为了剪辑视频，我使用FFMPEG。这里有一个Python脚本来实现这一点。</p><pre class="la lb lc ld fq lm ln lo lp aw lq dt"><span id="54cd" class="lr jv hu ln b fv ls lt l lu lv">from moviepy.video.io.ffmpeg_tools import ffmpeg_extract_subclip</span><span id="a04c" class="lr jv hu ln b fv mv lt l lu lv">t1 = 22*60 + 40 # Start timestamp in seconds<br/>t2 = 23*60 + 40 # End timestamp in seconds<br/>ffmpeg_extract_subclip("video1.MOV", t1, t2, targetname="video1.mp4")</span></pre><p id="a243" class="pw-post-body-paragraph iv iw hu iy b iz ja jb jc jd je jf jg ku ji jj jk kw jm jn jo ky jq jr js jt hn dt translated">要连接视频，FFMPEG也很棒。下面是一个执行连接的Python脚本。</p><pre class="la lb lc ld fq lm ln lo lp aw lq dt"><span id="b34d" class="lr jv hu ln b fv ls lt l lu lv">import os<br/>os.environ["FFMPEG_BINARY"] = "/usr/local/bin/ffmpeg"<br/>from moviepy.editor import *</span><span id="5cc7" class="lr jv hu ln b fv mv lt l lu lv">clips = []</span><span id="0fdf" class="lr jv hu ln b fv mv lt l lu lv">for filename in [ 'video1.mp4','video2.mp4', 'video3.mp4' ]:<br/>  clips.append(VideoFileClip(filename))</span><span id="f88d" class="lr jv hu ln b fv mv lt l lu lv">video = concatenate_videoclips(clips, method='compose')<br/>video.write_videofile('combined2.mp4')</span></pre><figure class="la lb lc ld fq le"><div class="bz el l di"><div class="mw lg l"/></div></figure></div></div>    
</body>
</html>