<html>
<head>
<title>Wait a Moment.js!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">等一下js！</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/wait-a-moment-js-80e329fcfc3?source=collection_archive---------4-----------------------#2018-08-26">https://medium.com/hackernoon/wait-a-moment-js-80e329fcfc3?source=collection_archive---------4-----------------------#2018-08-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/f75716064b0cfcf0a0d56cd5fc958707.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*xWtGdE0dJXY2r6MO0usrWQ.jpeg"/></div></figure><p id="fe6c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">啊，日期和时间。在开发过程中，这是一件非常有趣的事情。当我们需要的不仅仅是日期对象所能提供的便利时，我们会求助于日期包装库，比如<a class="ae jw" href="https://momentjs.com" rel="noopener ugc nofollow" target="_blank"> Moment.js </a>。</p><blockquote class="jx jy jz"><p id="3392" class="iy iz ka ja b jb jc jd je jf jg jh ji kb jk jl jm kc jo jp jq kd js jt ju jv hn dt translated">Moment.js是一个JavaScript库，设计用于客户端(在浏览器中)和服务器端(在Node.js中)。它有很多解析、显示和操作日期的功能。这让约会变得不那么痛苦。</p></blockquote><p id="1520" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我同意它使事情不那么痛苦，但是让我们看看在源代码中发生了什么。假设我必须计算出我的生日和英国纳税年度的最后一天之间有多少天。</p><p id="1694" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们用Moment.js来做这个吧。考虑以下代码:</p><p id="80d6" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">瞬间例子</strong></p><figure class="ke kf kg kh fq iv"><div class="bz el l di"><div class="ki kj l"/></div></figure><p id="5933" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">从纳税年度的最后一天到我的生日有166天</strong></p><p id="8b83" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">好极了，我们现在有了天数。简单的东西，一个非常方便的方法。那么，为了获得这个结果，在执行过程中发生了什么呢？</p><p id="39ab" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">请注意:</strong>我正在分析我的应用程序的生产版本，它正在以匿名模式被查看。</p><figure class="ke kf kg kh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="fe ff kk"><img src="../Images/003e133a92ab7e22a80b90b8e3873531.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ORayT-YjlaXNO-wc"/></div></div><figcaption class="kp kq fg fe ff kr ks bd b be z ek">Photo by <a class="ae jw" href="https://unsplash.com/@grohsfabian?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fabian Grohs</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a85c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">好的，首先，我的主包总共是66KB。力矩是其中的51KB，是我的包的77%。该库正在获取大约4500行代码。使用Chrome Developer Tools中的JavaScript Profiler，我可以看到我在示例中使用的3个函数的moment源代码中调用了23个函数。</p><p id="f360" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果我为纳税年度的最后一天创建了一个Moment对象，那么总共会调用18个函数。通过聚合慢速3G连接上的所有函数调用，记录了5毫秒。</p><p id="4f67" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">耗时最长的矩的内部函数是:</p><ol class=""><li id="4ace" class="kt ku hu ja b jb jc jf jg jj kv jn kw jr kx jv ky kz la lb dt translated">createFromConfig(0.9毫秒)</li><li id="47bb" class="kt ku hu ja b jb lc jf ld jj le jn lf jr lg jv ky kz la lb dt translated">创建本地(0.9毫秒)</li><li id="a20e" class="kt ku hu ja b jb lc jf ld jj le jn lf jr lg jv ky kz la lb dt translated">createLocalOrUTC(0.8毫秒)</li></ol><p id="8470" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在我知道你在想什么，这太微不足道了。可怕的微优化。当然，这取决于问题的环境以及您的日期逻辑有多复杂，但是如果有必要导入一个包来做这样的事情，这总是值得回顾的。在我的情况下，我会说这是不需要的。所以我决定求助于一个名为<a class="ae jw" href="https://date-fns.org/" rel="noopener ugc nofollow" target="_blank"> date-fns </a>的库，只是为了看看它如何比较。</p><p id="06e4" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">date-fns库是不同的，因为它是模块化的，这意味着您只需要导入您需要的功能。这当然会减小最终的束尺寸。它不像Moment那样尝试创建自己的对象，它仍然使用JavaScript提供的原生日期对象。</p><p id="a5d8" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">日期FNS举例</strong></p><figure class="ke kf kg kh fq iv"><div class="bz el l di"><div class="ki kj l"/></div></figure><p id="4d1c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">使用date-fns中的differenceInDays函数花费的总时间为0.1毫秒。它需要其他3个内部模块来完成任务，但与moment相比要轻得多。我的包的文件大小是18KB。这意味着date-fns的功能需要3KB才能实现同样的功能！</p><figure class="ke kf kg kh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="fe ff lh"><img src="../Images/c7cbf305f9cad3dd8be40588140703e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ryc6ss5rrQiYJAlZ"/></div></div><figcaption class="kp kq fg fe ff kr ks bd b be z ek">Photo by <a class="ae jw" href="https://unsplash.com/@ianstauffer?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ian Stauffer</a> on <a class="ae jw" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="jx jy jz"><p id="c77b" class="iy iz ka ja b jb jc jd je jf jg jh ji kb jk jl jm kc jo jp jq kd js jt ju jv hn dt translated">花一点时间来观察您的包的大小，并提高您的整体页面性能。</p></blockquote><p id="2e73" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">很抱歉这个令人畏缩的双关语。感谢阅读，如果你觉得有用，请鼓掌。期待9月中旬生日快乐时间在评论:)男人…我老了。</p><blockquote class="jx jy jz"><p id="fded" class="iy iz ka ja b jb jc jd je jf jg jh ji kb jk jl jm kc jo jp jq kd js jt ju jv hn dt translated"><strong class="ja hv">‘软件工程师现在做什么？’</strong></p></blockquote><figure class="ke kf kg kh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="fe ff li"><img src="../Images/3830e55ddd79192d2eef1de06912fa54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6rd2YUeONSblXx_MiftYNw.png"/></div></div><figcaption class="kp kq fg fe ff kr ks bd b be z ek">Book Cover for Software engineers do what now?</figcaption></figure><p id="4e2b" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">通过这本书，我们将向您介绍各种各样的技术角色、招聘流程、职业阶梯上存在的职位，并通过大量受欢迎的技术语言、工具、库和框架来了解当今公司从候选人那里寻求的方法。</p><p id="5442" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">【https://www.amazon.co.uk/dp/1707231079】打印: <a class="ae jw" href="https://www.amazon.co.uk/dp/1707231079/" rel="noopener ugc nofollow" target="_blank">打印</a></p><p id="3a64" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">Kindle:</strong><a class="ae jw" href="https://www.amazon.co.uk/Software-engineers-do-what-now-ebook/dp/B08413XHS8" rel="noopener ugc nofollow" target="_blank">https://www . Amazon . co . uk/Software-engineers-do-what-now-ebook/DP/b 08413 xhs 8</a></p><p id="6227" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">Leanpub:</strong><a class="ae jw" href="https://leanpub.com/softwareengineersdowhatnow" rel="noopener ugc nofollow" target="_blank">https://leanpub.com/softwareengineersdowhatnow</a></p><p id="4931" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">Google Play:</strong>T18】https://books.google.co.uk/books/about?id=lijLDwAAQBAJ</p><figure class="ke kf kg kh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="fe ff lj"><img src="../Images/e3371c4a0f190c601953a38c0f0fb50b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xlcaxBMeAdljDdyEKUFkmA.png"/></div></div><figcaption class="kp kq fg fe ff kr ks bd b be z ek">New Book, ‘Software engineers do what now?’</figcaption></figure><p id="eefe" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">感谢您的阅读！附言:如果你买不起这本书，请直接通过Twitter给我发消息！</p><p id="ccdd" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">肖恩·迈克尔·斯通</p><p id="2832" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">肖恩·迈克尔·斯通推特:@肖恩·斯通</p></div></div>    
</body>
</html>