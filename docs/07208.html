<html>
<head>
<title>Ternary Trouble in Perl</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Perl中的三元问题</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/ternary-trouble-in-perl-fc138b345843?source=collection_archive---------11-----------------------#2018-08-26">https://medium.com/hackernoon/ternary-trouble-in-perl-fc138b345843?source=collection_archive---------11-----------------------#2018-08-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div class="fe ff hs"><img src="../Images/baa0054b82bc256579c2be970ad5f886.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*HKjWpNO5Tqwizdrb.jpg"/></div></figure><div class=""/><p id="8526" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">有一天，我在Perl中遇到了一个问题，这个问题一直困扰着我，原因很简单，我还没有找到它的答案。我的问题是。举以下例子:</p><h2 id="a7d9" class="jw jx ib bd jy jz ka kb kc kd ke kf kg jj kh ki kj jn kk kl km jr kn ko kp kq dt translated"><strong class="ak">多变量赋值:</strong></h2><p id="b288" class="pw-post-body-paragraph iy iz ib ja b jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr kv jt ju jv hn dt translated">Perl允许使用如下语法同时声明多个变量:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="9ad1" class="jw jx ib lb b fv lf lg l lh li">my ($var1, $var2) = (100, 200);<br/>print "variable 1 is: $var1, variable 2 is: $var2 \n\n";</span></pre><p id="7425" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这将返回以下结果:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="d15c" class="jw jx ib lb b fv lf lg l lh li">variable 1 is: 100, variable 2 is: 200</span></pre><h2 id="51c0" class="jw jx ib bd jy jz ka kb kc kd ke kf kg jj kh ki kj jn kk kl km jr kn ko kp kq dt translated">字符串拆分:</h2><p id="9daf" class="pw-post-body-paragraph iy iz ib ja b jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr kv jt ju jv hn dt translated">够简单了吧？Perl和大多数语言一样，也允许拆分字符串。拆分字符串的语法如下所示:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="944c" class="jw jx ib lb b fv lf lg l lh li">my $str1 = 'a sentence has many words';<br/>my <a class="ae lj" href="http://twitter.com/arr1" rel="noopener ugc nofollow" target="_blank">@arr1</a> = split / /, $str1;</span><span id="c64f" class="jw jx ib lb b fv lk lg l lh li">foreach my $x (<a class="ae lj" href="http://twitter.com/arr1" rel="noopener ugc nofollow" target="_blank">@arr1</a>) {<br/>  print "word: $x \n";<br/>}</span></pre><p id="f923" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">该示例的打印结果将为我们提供以下内容:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="bdd1" class="jw jx ib lb b fv lf lg l lh li">word: a <br/>word: sentence <br/>word: has <br/>word: many <br/>word: words</span></pre><h2 id="59f6" class="jw jx ib bd jy jz ka kb kc kd ke kf kg jj kh ki kj jn kk kl km jr kn ko kp kq dt translated">三元运算符:</h2><p id="3c73" class="pw-post-body-paragraph iy iz ib ja b jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr kv jt ju jv hn dt translated">最后，Perl还允许三元运算符。这是一种很好的合并代码的方式，并且将if else块都放在一行中，尽管对于哪种风格更好、可读性更强还有一些争论。在任何情况下，请使用以下字符串:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="b727" class="jw jx ib lb b fv lf lg l lh li">my $str2 = 'This string has two sentences -  A dash separates them';</span></pre><p id="1593" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，如果我们想根据一个条件语句来拆分它，我们可以这样做:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="cc72" class="jw jx ib lb b fv lf lg l lh li">my <a class="ae lj" href="http://twitter.com/arr7" rel="noopener ugc nofollow" target="_blank">@arr7</a>;<br/>if (index($str2, '-') != -1) {<br/>  <a class="ae lj" href="http://twitter.com/arr7" rel="noopener ugc nofollow" target="_blank">@arr7</a> = split /-/,$str2;<br/>} else {<br/>  <a class="ae lj" href="http://twitter.com/arr7" rel="noopener ugc nofollow" target="_blank">@arr7</a> = split /:/,$str2;<br/>}<br/>print "========== array7[0]", $arr7[0], "\n";<br/>print "========== array7[1]", $arr7[1], "\n";</span></pre><p id="487e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这段代码会给出如下输出:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="2f90" class="jw jx ib lb b fv lf lg l lh li">========== array7[0]This string has two sentences <br/>========== array7[1]  A dash separates them</span></pre><p id="59e0" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然而，通过使用三元运算符，我们可以用更少的代码获得相同的输出。如果按如下方式编写，上面的if/else块将给出相同的输出:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="a3b5" class="jw jx ib lb b fv lf lg l lh li">my (<a class="ae lj" href="http://twitter.com/arr2" rel="noopener ugc nofollow" target="_blank">@arr2</a>) = (index($str2, '-') != -1) ? split /-/,$str2 : split /:/,$str2;<br/>print "arr2[0] is: ", $arr2[0], "\n";<br/>print "arr2[1] is: ", $arr2[1], "\n";</span></pre><p id="c3c4" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们的输出是:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="878a" class="jw jx ib lb b fv lf lg l lh li">arr2[0] is: This string has two sentences <br/>arr2[1] is:   A dash separates them</span></pre><p id="bea8" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在让我们使用前面的if/else块，并添加两个数组。我们将在if else块中设置每个数组的值。我们的两个字符串如下:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="b2c0" class="jw jx ib lb b fv lf lg l lh li">my $str2 = 'This string has two sentences -  A dash separates them';<br/>my $str4 = 'This string has different punctuation; a semicolon';</span></pre><p id="34d0" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们的条件语句是:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="85ca" class="jw jx ib lb b fv lf lg l lh li">my (<a class="ae lj" href="http://twitter.com/arr5" rel="noopener ugc nofollow" target="_blank">@arr5</a>, <a class="ae lj" href="http://twitter.com/arr6" rel="noopener ugc nofollow" target="_blank">@arr6</a>);<br/>if (index($str2, '?') != -1) {<br/>  <a class="ae lj" href="http://twitter.com/arr5" rel="noopener ugc nofollow" target="_blank">@arr5</a> = split /j/,$str2;<br/>  <a class="ae lj" href="http://twitter.com/arr6" rel="noopener ugc nofollow" target="_blank">@arr6</a> = split /k/,$str4;<br/>} else {<br/>  <a class="ae lj" href="http://twitter.com/arr5" rel="noopener ugc nofollow" target="_blank">@arr5</a> = split /-/,$str2;<br/>  <a class="ae lj" href="http://twitter.com/arr6" rel="noopener ugc nofollow" target="_blank">@arr6</a> = split /;/,$str4;<br/>}</span><span id="4336" class="jw jx ib lb b fv lk lg l lh li">print "array 5[0] is: ", $arr5[0], "\n";<br/>print "array 5[1] is: ", $arr5[1], "\n";</span><span id="4df8" class="jw jx ib lb b fv lk lg l lh li">print "array 6[0] is: ", $arr6[0], "\n";<br/>print "array 6[1] is: ", $arr6[1], "\n";</span></pre><p id="a88e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们的输出如下:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="0cee" class="jw jx ib lb b fv lf lg l lh li">array 5[0] is: This string has two sentences <br/>array 5[1] is:   A dash separates them<br/>array 6[0] is: This string has different punctuation<br/>array 6[1] is:  a semicolon</span></pre><h1 id="e239" class="ll jx ib bd jy lm ln lo kc lp lq lr kg ls lt lu kj lv lw lx km ly lz ma kp mb dt translated"><strong class="ak">这就是我卡住的地方:</strong></h1><p id="a304" class="pw-post-body-paragraph iy iz ib ja b jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr kv jt ju jv hn dt translated">现在，考虑到所有这些，您应该能够将上述所有内容组合成一行三元运算符代码。如前所述，我们可以在一个三元块中声明多个变量。所以看起来我们应该能够完全做到上面的代码，但是用一个三元组代替if else块。大概是这样的:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="a895" class="jw jx ib lb b fv lf lg l lh li">my (<a class="ae lj" href="http://twitter.com/arr3" rel="noopener ugc nofollow" target="_blank">@arr3</a>, <a class="ae lj" href="http://twitter.com/arr4" rel="noopener ugc nofollow" target="_blank">@arr4</a>) = (index($str2, '-') != -1) ? split /-/,$str2, split /;/, $str4 : split /:/,$str2, split /;/, $str4;</span></pre><p id="8fa6" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这基本上是做完全相同的事情，在三元条件语句的每个部分设置两个数组的值。但是，如果我们打印结果:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="8706" class="jw jx ib lb b fv lf lg l lh li">print "array 3[0] is: ", $arr3[0], "\n";<br/>print "array 3[1] is: ", $arr3[1], "\n";</span><span id="230f" class="jw jx ib lb b fv lk lg l lh li">print "array 4[0] is: ", $arr4[0], "\n";<br/>print "array 4[1] is: ", $arr4[1], "\n";</span></pre><p id="3aef" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我们得到以下输出:</p><pre class="kw kx ky kz fq la lb lc ld aw le dt"><span id="3194" class="jw jx ib lb b fv lf lg l lh li">array 3[0] is: This string has two sentences <br/>array 3[1] is:   A dash separates them<br/>array 4[0] is: <br/>array 4[1] is:</span></pre><p id="1e95" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">即使将两个评估块都放在括号中，仍然会产生相同的结果。我的结论是，每个split函数中额外的逗号扔掉了三元条件块，没有抓住第二组。然而，这只是一个猜测，因为我还没有在其他地方找到答案。</p><p id="1de0" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如果有人有任何见解，我将不胜感激。并不是说这在任何真实世界的情况下都是必要的。但是让我恼火的是，它看起来应该是有效的，但是却没有，我也不知道为什么！</p></div></div>    
</body>
</html>