<html>
<head>
<title>Hacking the Hackers: Honeypots on Ethereum Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">黑客入侵:以太网上的蜜罐</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/hacking-the-hackers-honeypots-on-ethereum-network-5baa35a13577?source=collection_archive---------15-----------------------#2018-08-28">https://medium.com/hackernoon/hacking-the-hackers-honeypots-on-ethereum-network-5baa35a13577?source=collection_archive---------15-----------------------#2018-08-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/f9f1a86d84ea2b3aeb36b4ac3916c263.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*irEvx_pgkvYt7cbOowj-pA.jpeg"/></div></div></figure><p id="7511" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不仅好人对区块链和加密技术感到兴奋。坏人也被大量的金钱轮流吸引。</p><p id="6c34" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">黑帽子试图利用他们的逆向工程和研究技能来寻找脆弱的智能合同。与常规软件中发现的漏洞相比，智能合约中的漏洞更具破坏性，可以为攻击者带来即时利润。从<a class="ae ka" href="https://blog.zeppelin.solutions/on-the-parity-wallet-multisig-hack-405a8c12e8f7" rel="noopener ugc nofollow" target="_blank">平价MultiSig钱包</a>被盗的3000万美元和被<a class="ae ka" rel="noopener" href="/chain-cloud-company-blog/parity-multisig-hack-again-b46771eaa838">第二次攻击</a>冻结的另外3亿美元仅仅是赌注的两个例子。</p><p id="9e41" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">他们中的一些人甚至试图利用他们同类的贪婪！输入蜜罐。</p><p id="3c6b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">“蜜罐”是一种智能合约，旨在看起来像一个容易的目标，但事实上并非如此。对于一个不老练的攻击者来说，它们看起来很脆弱，但是如果他试图“破坏它”，他反而会输掉他的钱。<strong class="je hv">狩猎猎人。黑黑客！</strong></p><p id="b596" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下面是我们团队最近发现的一个有趣的标本:<a class="ae ka" href="https://etherscan.io/address/0x4ba0d338a7c41cc12778e0a2fa6df2361e8d8465#code" rel="noopener ugc nofollow" target="_blank">0 x4 ba 0d 338 a 7 c 41 cc 12778 e0a 2 fa 6 df 2361 e8d 8465</a>。</p><pre class="kb kc kd ke fq kf kg kh ki aw kj dt"><span id="b098" class="kk kl hu kg b fv km kn l ko kp">pragma solidity ^0.4.10;</span><span id="80a2" class="kk kl hu kg b fv kq kn l ko kp">contract Ownable {<br/>    address public Owner = msg.sender;<br/>    function isOwner() returns (bool) {<br/>        if (Owner == msg.sender) return true; return false;<br/>    }<br/>}</span><span id="e782" class="kk kl hu kg b fv kq kn l ko kp">contract ICO_Hold is Ownable {<br/>    mapping (address =&gt; uint) public deposits;<br/>    uint public openDate;<br/>    address public Owner;</span><span id="c829" class="kk kl hu kg b fv kq kn l ko kp">function() public payable { }<br/>    <br/>    function setup(uint _openDate) public {<br/>        Owner = msg.sender;<br/>        openDate = _openDate;<br/>    }<br/>    <br/>    function deposit() public payable {<br/>        if (msg.value &gt;= 0.5 ether) {<br/>            deposits[msg.sender] += msg.value;<br/>        }<br/>    }</span><span id="2922" class="kk kl hu kg b fv kq kn l ko kp">function withdraw(uint amount) public {<br/>        if (isOwner() &amp;&amp; now &gt;= openDate) {<br/>            uint max = deposits[msg.sender];<br/>            if (amount &lt;= max &amp;&amp; max &gt; 0) {<br/>                msg.sender.transfer(amount);<br/>            }<br/>        }<br/>    }<br/>}</span></pre><p id="6138" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你能说出重点在哪里吗？</p><p id="9c31" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了利用这个漏洞，攻击者必须先存入0.5 ETH。接下来，他应该通过呼叫<code class="eh kr ks kt kg b">setup()</code>来要求所有权，因为他不小心没有受到保护。之后，他可以通过多次调用<code class="eh kr ks kt kg b">withdraw() </code>来吞噬整个余额。注意提取的金额从来不会从记录的余额中扣除。</p><p id="e5ac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">真正的诀窍是将<code class="eh kr ks kt kg b">address public Owner</code>定义两次。一次在<code class="eh kr ks kt kg b">Ownable</code>中，第二次在主合同中。这就是为什么在<code class="eh kr ks kt kg b">withdraw()</code>方法中调用<code class="eh kr ks kt kg b">setup()</code>不会影响<code class="eh kr ks kt kg b">isOwner()</code>的原因。rush中想成为黑客的人很容易错过的一句话。</p><h1 id="f432" class="ku kl hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">智能合同丛林</h1><p id="4fbb" class="pw-post-body-paragraph jc jd hu je b jf lr jh ji jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz hn dt translated">这只是蜜罐合同的一个相对简单的例子。在野外有很多这样的动物:</p><ul class=""><li id="d237" class="lw lx hu je b jf jg jj jk jn ly jr lz jv ma jz mb mc md me dt translated"><a class="ae ka" rel="noopener" href="/coinmonks/dissecting-an-ethereum-honey-pot-7102d7def5e0">https://medium . com/coin monks/classing-an-ether eum-honey-pot-7102 D7 def 5 e 0</a></li><li id="9215" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><a class="ae ka" rel="noopener" href="/@gerhard.wagner/the-phenomena-of-smart-contract-honeypots-755c1f943f7b">https://medium . com/@ Gerhard . Wagner/the-phenomenon-of-smart-contract-honey pots-755 C1 f 943 f7b</a></li><li id="a9c4" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><a class="ae ka" href="https://hackernoon.com/the-sneakiest-ethereum-scam-ever-6dc138061235" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/the-sneakie est-ether eum-scam-ever-6dc 138061235</a></li><li id="8ad9" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><a class="ae ka" rel="noopener" href="/@jsanjuas/an-analysis-of-a-couple-ethereum-honeypot-contracts-5c07c95b0a8d">https://medium . com/@ jsanjuas/an-analysis-of-a-couple-ether eum-honey pot-contracts-5c 07 c 95 b 0a 8d</a></li></ul><p id="bbe9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">是不是听起来太容易太琐碎了？下面是一个真实以太丢失的辛酸故事:<a class="ae ka" href="https://www.reddit.com/r/ethdev/comments/7x5rwr/tricked_by_a_honeypot_contract_or_beaten_by/" rel="noopener ugc nofollow" target="_blank">https://www . Reddit . com/r/eth dev/comments/7x 5 rwr/tricked _ by _ a _ honey pot _ contract _ or _ beated _ by/</a>这玩意儿居然真的管用！</p><p id="d542" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然而，我想争辩称这些智能合同为蜜罐。蜜罐已经存在很久了。白帽子使用它们来检测和防止攻击，也就是说，是为了做好事，而不是偷别人的钱。这是一个主要的区别。这些合同不是为了防止攻击，而是为了从不太熟练的黑客那里收集附加工作。所以他们需要一个不同的名字。我会称之为捕鼠器。</p><p id="d978" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">检查有多少蜜罐是在没有验证源代码的情况下发布的，这将是非常有趣的。这可能是一个全新的游戏水平。</p><p id="ce60" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你遇到过蜜罐吗？你认为攻击黑客是道德的吗？</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="2717" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="mr">原载于2018年8月24日</em><a class="ae ka" href="https://www.unchained.team/blog/hacking-the-hackers-honeypots-on-ethereum-network" rel="noopener ugc nofollow" target="_blank"><em class="mr">www . unchained . team</em></a><em class="mr">。</em></p></div></div>    
</body>
</html>