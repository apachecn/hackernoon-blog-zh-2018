<html>
<head>
<title>Create a Simple ToDo app in React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在React中创建一个简单的ToDo应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/create-a-simple-todo-app-in-react-9bd29054566b?source=collection_archive---------0-----------------------#2018-08-31">https://medium.com/hackernoon/create-a-simple-todo-app-in-react-9bd29054566b?source=collection_archive---------0-----------------------#2018-08-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/8d1777b7ae9843b092bb0538d106ccb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eA2FP6HJ-YpqhMqnO219Mw.png"/></div></div></figure><div class="jc jd fm fo je jf"><a href="https://www.educative.io/collection/5661736652767232/5629499534213120?affiliate_id=5312887308419072" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab ej"><div class="jh ab ji cl cj jj"><h2 class="bd hv fv z el jk eo ep jl er et ht dt translated">学习纯React——深入了解React.js基础知识的互动课程</h2><div class="jm l"><h3 class="bd b fv z el jk eo ep jl er et ek translated">欢迎学习纯React。我将孤立地教你React的核心概念，没有Redux，Webpack…</h3></div><div class="jn l"><p class="bd b gc z el jk eo ep jl er et ek translated">www.educative.io</p></div></div><div class="jo l"><div class="jp l jq jr js jo jt ja jf"/></div></div></a></div><div class="jc jd fm fo je jf"><a href="https://www.educative.io/collection/10370001/5637225408626688?affiliate_id=5312887308419072" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab ej"><div class="jh ab ji cl cj jj"><h2 class="bd hv fv z el jk eo ep jl er et ht dt translated">学习React之前的JavaScript基础知识</h2><div class="jm l"><h3 class="bd b fv z el jk eo ep jl er et ek translated">在广泛教授React，000多名学生)之后，无论是面向更多受众的在线课程还是面向公司的现场课程…</h3></div><div class="jn l"><p class="bd b gc z el jk eo ep jl er et ek translated">www.educative.io</p></div></div><div class="jo l"><div class="ju l jq jr js jo jt ja jf"/></div></div></a></div><p id="c137" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">在本教程中，我们将使用React创建一个ToDo应用程序。它对初学者很友好，所以如果你所做的所有反应都是“你好，世界”，那也没关系。可以在这里自己体验一下app。它也嵌入在这篇文章的结尾。</p><figure class="kt ku kv kw fq iv"><div class="bz el l di"><div class="kx ky l"/></div></figure><h1 id="21eb" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">跟进工具</h1><ul class=""><li id="a3d1" class="lx ly hu jx b jy lz kc ma kg mb kk mc ko md ks me mf mg mh dt translated">NodeJS和npm:从这里安装，如果你还没有</li><li id="dbb1" class="lx ly hu jx b jy mi kc mj kg mk kk ml ko mm ks me mf mg mh dt translated">用<code class="eh mn mo mp mq b">npm install create-react-app --global</code>安装create-react应用程序</li></ul><p id="bdc2" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">现在，我们可以走了。</p><h1 id="9a2b" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">创建新的react应用程序</h1><p id="e6ff" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">新的react应用程序是用</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="c633" class="my la hu mq b fv mz na l nb nc">create-react-app react-todo</span></pre><p id="3b3c" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">它将创建一个包含一些文件和文件夹的新文件夹<code class="eh mn mo mp mq b">react-todo</code>。</p><h2 id="0681" class="my la hu bd lb nd ne nf lf ng nh ni lj kg nj nk ln kk nl nm lr ko nn no lv np dt translated">react-todo中的文件和文件夹</h2><p id="ecc0" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated"><code class="eh mn mo mp mq b">package.json</code>包含应用程序使用的模块列表。每个模块执行一个功能或一组功能。<br/> <code class="eh mn mo mp mq b">node_modules</code>存储package.json中列出的所有包。<br/> <code class="eh mn mo mp mq b">src</code>包含所有React源代码文件。<br/> <code class="eh mn mo mp mq b">public</code>包含样式表和图片等静态文件。</p><p id="8e20" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">使用<code class="eh mn mo mp mq b">npm start</code>运行此应用程序</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="caec" class="my la hu mq b fv mz na l nb nc">cd react-todonpm start</span></pre><p id="bbaf" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><strong class="jx hv">你会看到一个欢迎页面……</strong></p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div class="fe ff nq"><img src="../Images/d0a42f254fec92e0573858827c742fd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/0*9Jz6I_l6hhAnewQc"/></div></figure><p id="b497" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">如说明所说，修改App.js进行修改。<code class="eh mn mo mp mq b">App.js</code>从<code class="eh mn mo mp mq b">index.js</code>文件渲染而来。将<code class="eh mn mo mp mq b">App.js</code>视为所有其他组件的容器。</p><p id="faa5" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">体验下面的ToDo应用程序。在输入框中输入任务，点击添加按钮添加到列表中。要从列表中删除，请单击要删除的待办事项。</p><p id="7256" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">转到<code class="eh mn mo mp mq b">src</code>中的<code class="eh mn mo mp mq b">App.js</code>文件。从返回中删除除父div之外的所有内容。它看起来像下面</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="db1d" class="my la hu mq b fv mz na l nb nc">import React, { Component } from 'react'<br/>import './App.css'<br/>class App extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div className="App"&gt;<br/><br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}<br/>export default App</span></pre><p id="b542" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">在这个return语句中，所有组件都将放在div中。</p><h1 id="e4db" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">创建用户界面</h1><p id="12af" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">待办事项列表是你在上面经历过的表格和下面的显示。</p><p id="0fcf" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们在src目录下的TodoList.js文件中创建组件<code class="eh mn mo mp mq b">TodoList</code>。</p><p id="dbde" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们导入这是App.js，这样我们就可以把它放在我们所说的div中。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nr"><img src="../Images/a0cc243e0691403715c067bbf4306585.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5X39dYm9ERSfcxDS"/></div></div></figure><p id="edbb" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">此外，将TodoList放在return语句的div中。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nr"><img src="../Images/7261f4e71680ba511568827f22fa6c39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iXoL49vZf32rSJDo"/></div></div></figure><p id="d27f" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">托德利斯有什么？</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="606e" class="my la hu mq b fv mz na l nb nc">import React, { Component } from 'react'<br/>class TodoList extends Component {<br/>  render() {<br/>    return (<br/>      &lt;div className="todoListMain"&gt;<br/>        &lt;div className="header"&gt;<br/>          &lt;form&gt;<br/>            &lt;input placeholder="Task" /&gt;<br/>            &lt;button type="submit"&gt; Add Task &lt;/button&gt;<br/>          &lt;/form&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}<br/><br/>export default TodoList</span></pre><p id="c6a8" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">您可能会发现一些多余的div，不要担心，我们一会儿就会填充它们。</p><p id="b814" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">该组件创建表单。</p><p id="cf79" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">看起来是这样的…</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/d63279bacc3690cacfb270e194230dac.png" data-original-src="https://miro.medium.com/v2/resize:fit:832/0*xwgcjYCv-n8VSxs-"/></div></figure><p id="3a24" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">因为CSS，你的输出不会和我的一样。我偷偷把CSS加到了<code class="eh mn mo mp mq b">index.css</code>文件里。这是基本的东西，我们不会在这之后讨论样式表。如果你想让你的应用程序像例子中那样，从这里<a class="ae nt" href="https://github.com/therj/react-todo/blob/master/src/index.css" rel="noopener ugc nofollow" target="_blank">获取index . CSS</a>…</p><p id="13af" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">如果您尝试在此应用程序中添加待办事项，它只会重新加载页面。这是因为表单的默认行为是提交到同一个页面。</p><h1 id="cbc7" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">赋予React Todo应用生命</h1><p id="78c7" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">我们已经有了一个毫无生气的todo应用程序，它除了显示自己什么也不做。</p><p id="4bb4" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们要做的是:</p><ul class=""><li id="6787" class="lx ly hu jx b jy jz kc kd kg nu kk nv ko nw ks me mf mg mh dt translated">添加项目</li><li id="553e" class="lx ly hu jx b jy mi kc mj kg mk kk ml ko mm ks me mf mg mh dt translated">显示项目</li><li id="a41a" class="lx ly hu jx b jy mi kc mj kg mk kk ml ko mm ks me mf mg mh dt translated">移除项目</li></ul><h1 id="3e46" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">添加项目</h1><p id="d779" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">当提交表单时，输入项被提交。要处理此操作，请在TodoList中添加onSubmit to form标记。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nr"><img src="../Images/0043ff26951c49d65fbceb09c5e22f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*194D_eT48k4dau5T"/></div></div></figure><p id="84fc" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">这个<code class="eh mn mo mp mq b">addItem</code>应该在App组件处理。它作为一个道具传递给其他组件。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nx"><img src="../Images/1be597f2ad94c90141d5a11e874c3322.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yhSiOFJwYySG02Xh"/></div></div></figure><p id="eead" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">这必须存在于应用程序中才能通过。在<code class="eh mn mo mp mq b">App</code>中创建一个<code class="eh mn mo mp mq b">addItem</code>属性。</p><p id="9507" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们可以将它声明为一个旧的类似JavaScript (ES5)的函数，但是它不会将表单与它绑定在一起。我们必须通过构造函数手动绑定它。我会用ES6之类的语法把它去掉。</p><p id="0af6" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们仍然需要状态来保存项目数组。状态使得在页面上呈现和元素变得容易。当数据状态改变时，所有使用数据的组件将自动改变。</p><p id="19fb" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们还需要另一个名为<code class="eh mn mo mp mq b">currentItem</code>的状态来保存内存中的当前值。它是一个对象，除了文本，它还有一个键。React在内部使用这个键，只在有多个相似组件时才呈现组件。如果没有键，则无法呈现待办事项列表，因为将会有所有的<code class="eh mn mo mp mq b">li</code>。</p><p id="73d5" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">向<code class="eh mn mo mp mq b">App</code>添加构造函数。同样加上<code class="eh mn mo mp mq b">addItem</code>和<code class="eh mn mo mp mq b">handleInput</code>。</p><p id="6d0c" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">addItem管理列表的添加，handleInput管理输入字段的更改。</p><p id="5e16" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">这是我的App.js的样子…</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="3aa9" class="my la hu mq b fv mz na l nb nc">import React, { Component } from 'react'<br/>import './App.css'<br/>import TodoList from './TodoList'<br/><br/>class App extends Component {<br/>  constructor() {<br/>    super()<br/>    this.sate = {<br/>      items: [],<br/>      currentItem: {text:'', key:''},<br/>    }<br/>  }<br/>  handleInput = e =&gt; {<br/>    console.log('Hello Input')<br/>  }<br/>  addItem = () =&gt; {<br/>    console.log('Hello Add Item')<br/>  }<br/>  render() {<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;TodoList addItem={this.addItem} /&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}<br/><br/>export default App</span></pre><p id="33ee" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">要获得输入元素，我们必须有一种方法来引用它。您可能会对使用querySelector感到兴奋，但是React不喜欢这样。虽然它完全有效，但虚拟DOM的思想不是直接与DOM交互，而是与DOM中的组件交互。</p><p id="3339" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">为了引用输入，我们用<code class="eh mn mo mp mq b">inputElement =React.createRef()</code>创建了一个<code class="eh mn mo mp mq b">ref</code>。像<code class="eh mn mo mp mq b">addItem</code>一样把这个传给<code class="eh mn mo mp mq b">TodoList</code></p><p id="7da3" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">inputElement = {this.inputElement}</code></p><p id="d2b9" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">将其用作<code class="eh mn mo mp mq b">TodoList</code>中的<code class="eh mn mo mp mq b">ref = {this.props.inputElement}</code>。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div class="fe ff ny"><img src="../Images/73df77046c4b208c520891bf73184163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1268/0*qCEyNa_L5o-u0wUD"/></div></figure><p id="ff18" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">如果你现在尝试这个应用程序，你可以看到它记录了来自addItem的消息，然后重新加载。重新加载是表单提交的默认行为。</p><p id="c052" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">若要停止此行为，请将addItem修改为以下内容。</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="1ed1" class="my la hu mq b fv mz na l nb nc">addItem = e =&gt; {<br/>    e.preventDefault()<br/>    console.log('Hello World')<br/>  }</span></pre><p id="2196" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">preventDefault</code>将防止提交表单时重新加载。</p><p id="2265" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">这是我们传递给TodoList的所有数据…</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="c8c2" class="my la hu mq b fv mz na l nb nc">        &lt;TodoList<br/>          addItem={this.addItem}<br/>          inputElement={this.inputElement}<br/>          handleInput={this.handleInput}<br/>          currentItem={this.state.currentItem}<br/>        /&gt;</span></pre><p id="136b" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">addItem</code>要处理点击添加。</p><p id="5436" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">inputElement</code>泛指这种元素。</p><p id="7f93" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">handleInput</code>处理输入字段上的数据变化</p><p id="39be" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">currentItem</code>显示状态设置为currentItem的值。</p><p id="5817" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">下面是我的TodoList.js的样子…</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="2576" class="my la hu mq b fv mz na l nb nc">import React, { Component } from 'react'<br/><br/>class TodoList extends Component {<br/>  componentDidUpdate() {<br/>    this.props.inputElement.current.focus()<br/>  }<br/>  render() {<br/>    return (<br/>      &lt;div className="todoListMain"&gt;<br/>        &lt;div className="header"&gt;<br/>          &lt;form onSubmit={this.props.addItem}&gt;<br/>            &lt;input<br/>              placeholder="Task"<br/>              ref={this.props.inputElement}<br/>              value={this.props.currentItem.text}<br/>              onChange={this.props.handleInput}<br/>            /&gt;<br/>            &lt;button type="submit"&gt; Add Task &lt;/button&gt;<br/>          &lt;/form&gt;<br/>        &lt;/div&gt;<br/>      &lt;/div&gt;<br/>    )<br/>  }<br/>}<br/><br/>export default TodoList</span></pre><p id="5472" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">一会儿我们会谈到eh<strong class="jx hv">component did update</strong>…</p><p id="642c" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">form</code>提交调用时<code class="eh mn mo mp mq b">addItem</code></p><p id="f849" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">ref</code>指当前元素。</p><p id="cee1" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">value</code>作为文本存储在<code class="eh mn mo mp mq b">currentElement</code>对象中。</p><p id="be7d" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">如果组件中没有<code class="eh mn mo mp mq b">onChange</code>，该字段将是只读的。我们不想这样。</p><p id="209f" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">onChange</code>调用handleInput，这是接下来要讨论的。</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="2a4f" class="my la hu mq b fv mz na l nb nc">handleInput = e =&gt; {<br/>    const itemText = e.target.value<br/>    const currentItem = { text: itemText, key: Date.now() }<br/>    this.setState({<br/>      currentItem,<br/>    })<br/>  }</span></pre><p id="7fea" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">handleInput获取事件，它从输入框获取值，并将状态设置为和对象<code class="eh mn mo mp mq b">currentItem</code>。它将key作为当前数据，将text作为输入数据。关键字是Date.now()，它是从1970年到现在的毫秒数。每毫秒最多只能接受1次输入。这对我们的案子来说足够了。</p><p id="d02f" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们需要这个对象，因为当用户提交表单时，我们需要将这个值存储到数组<code class="eh mn mo mp mq b">items</code>中。</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="3e3f" class="my la hu mq b fv mz na l nb nc">addItem = e =&gt; {<br/>    e.preventDefault()<br/>    const newItem = this.state.currentItem<br/>    if (newItem.text !== '') {<br/>      console.log(newItem)<br/>      const items = [...this.state.items, newItem]<br/>      this.setState({<br/>        items: items,<br/>        currentItem: { text: '', key: '' },<br/>      })<br/>    }<br/>  }</span></pre><p id="5fd4" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><code class="eh mn mo mp mq b">addItem</code>防止默认重新加载。它从状态<code class="eh mn mo mp mq b">currentItem</code>获取输入框中的值。</p><p id="9e0d" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">因为我们不想在todo中添加空值，所以我们检查。如果不为空，则析构items数组并添加<code class="eh mn mo mp mq b">newItem</code>。</p><p id="b9a1" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们必须将这个项目设置为状态，我们称之为<code class="eh mn mo mp mq b">this.setSate</code>。重置<code class="eh mn mo mp mq b">currentItem</code>清除输入框也是有意义的。</p><p id="04dd" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><strong class="jx hv"> ComponentDidUpdate </strong>是React中的生命周期方法之一。<a class="ae nt" href="https://reactninja.io/2018/06/23/how-to-use-react-lifecycle-methods/" rel="noopener ugc nofollow" target="_blank">我们在这里已经全部谈过了</a>。ComponentDidUpdate被调用来关注由<code class="eh mn mo mp mq b">inputElement</code>引用所引用的输入框。提交表单时会更新组件。<code class="eh mn mo mp mq b">this.props.inputElement.current.focus()</code>在输入区域设置焦点，这样我们可以继续输入待办事项列表中的下一项。</p><h1 id="e7c8" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">显示待办事项</h1><p id="0c6b" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">我们已经有了所有的todos状态，我们需要的是另一个组件，可以在屏幕上呈现这些。</p><p id="7a12" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们将这个组件称为<code class="eh mn mo mp mq b">TodoItems</code>，并将所有项目作为道具传递。</p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nz"><img src="../Images/1e4d8a9df1f2ae8521a95f65033776a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l87rJ4Yg0ZI0kP0v"/></div></div></figure><p id="c373" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">下面是<code class="eh mn mo mp mq b">TodoItems</code>的样子…</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="df54" class="my la hu mq b fv mz na l nb nc">import React, { Component } from 'react'<br/><br/>class TodoItems extends Component {<br/>  createTasks(item) {<br/>    return &lt;li key={item.key}&gt;{item.text}&lt;/li&gt;<br/>  }<br/>  render() {<br/>    const todoEntries = this.props.entries<br/>    const listItems = todoEntries.map(this.createTasks)<br/><br/>    return &lt;ul className="theList"&gt;{listItems}&lt;/ul&gt;<br/>  }<br/>}<br/><br/>export default TodoItems</span></pre><p id="7e8a" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">函数createTasks为每个传递的项目返回li。它使用我们之前提供的密钥。在这个阶段，它不能与key一起工作，因为React必须能够区分多个项目，以重新渲染适当的项目。</p><p id="7b63" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">使用映射功能将所有这些列表项保存到<code class="eh mn mo mp mq b">listItems</code>。这用于return语句中的<code class="eh mn mo mp mq b">ul</code>。</p><h1 id="a08d" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">正在删除待办事项</h1><p id="2c67" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">我们已经添加了待办事项，我们可能想要删除一些。</p><p id="6ffb" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">我们已经在<code class="eh mn mo mp mq b">TodoItems.js</code>中显示了todos，我们做了一个小的修改。只需添加一个onClick侦听器来删除带有键的Item。</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="6be6" class="my la hu mq b fv mz na l nb nc">createTasks = item =&gt; {<br/>    return (<br/>      &lt;li key={item.key} onClick={() =&gt; this.props.deleteItem(item.key)}&gt;<br/>        {item.text}<br/>      &lt;/li&gt;<br/>    )<br/>  }</span></pre><p id="cea4" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">这将执行deleteItem，并将键作为参数。道具要从<code class="eh mn mo mp mq b">App</code>传过来。<br/> <code class="eh mn mo mp mq b">&lt;TodoItems entries={this.state.items}deleteItem={this.deleteItem}/&gt;</code> <br/>在App.js中新建一个属性为<code class="eh mn mo mp mq b">deleteItem</code>。</p><pre class="kt ku kv kw fq mu mq mv mw aw mx dt"><span id="7abb" class="my la hu mq b fv mz na l nb nc">deleteItem = key =&gt; {<br/>    const filteredItems = this.state.items.filter(item =&gt; {<br/>      return item.key !== key<br/>    })<br/>    this.setState({<br/>      items: filteredItems,<br/>    })<br/>  }</span></pre><p id="fdfa" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">它从<code class="eh mn mo mp mq b">items</code>状态过滤接收到的密钥。然后将项目设置为已过滤的项目。</p><p id="7e0d" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated"><em class="oa">最初发表于</em> <a class="ae nt" href="https://reactninja.io/2018/06/20/set-up-react-project-scratch/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">反应过来的忍者</strong> </a> <em class="oa">。</em></p><h1 id="c552" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">特色React JS课程</h1><h2 id="bdbc" class="my la hu bd lb nd ne nf lf ng nh ni lj kg nj nk ln kk nl nm lr ko nn no lv np dt translated"><a class="ae nt" href="http://flyy.link/react-16-udemy" rel="noopener ugc nofollow" target="_blank"> React 16 —完整指南(包括React路由器4 &amp; Redux) </a></h2><p id="f88e" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">4.7/5星<strong class="jx hv"> || </strong> 33.5小时视频<strong class="jx hv">| |</strong>61597名学生</p><p id="5215" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">学习反应或深入研究。学习理论，解决作业，在演示项目中实践，并构建一个在整个课程中不断改进的大型应用程序:汉堡生成器！<a class="ae nt" href="http://flyy.link/react-16-udemy" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">了解更多。</strong> </a></p><div class="jc jd fm fo je jf"><a href="http://flyy.link/react-16-udemy" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab ej"><div class="jh ab ji cl cj jj"><h2 class="bd hv fv z el jk eo ep jl er et ht dt translated">React 16 -完整指南(包括React路由器4和Redux)</h2><div class="jm l"><h3 class="bd b fv z el jk eo ep jl er et ek translated">投身其中，从头开始学习React！了解Reactjs、Redux、React Routing、动画、Next.js基础知识以及更多内容！</h3></div><div class="jn l"><p class="bd b gc z el jk eo ep jl er et ek translated">flyy.link</p></div></div><div class="jo l"><div class="ob l jq jr js jo jt ja jf"/></div></div></a></div><h2 id="867b" class="my la hu bd lb nd ne nf lf ng nh ni lj kg nj nk ln kk nl nm lr ko nn no lv np dt translated"><a class="ae nt" href="http://flyy.link/modern-react-and-redux-on-udemy-32341" rel="noopener ugc nofollow" target="_blank">现代反应与还原</a></h2><p id="1fa0" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">4.6/5星<strong class="jx hv"> || </strong> 26小时视频<strong class="jx hv"> || </strong> 111，998名学生|| 33，630个评分在您使用React路由器、Webpack和ES6 <a class="ae nt" href="http://flyy.link/modern-react-and-redux-on-udemy-32341" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">开发应用程序时掌握React v16.3.2和Redux的基础知识了解更多</strong> </a> <strong class="jx hv">。</strong></p><figure class="kt ku kv kw fq iv fe ff paragraph-image"><a href="http://flyy.link/modern-react-and-redux-on-udemy-32341"><div class="fe ff oc"><img src="../Images/3328efec1e043c8bef4346b2c61c1935.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skdlOUsfluXIq0CNUc8Qrg.png"/></div></a></figure><h2 id="1489" class="my la hu bd lb nd ne nf lf ng nh ni lj kg nj nk ln kk nl nm lr ko nn no lv np dt translated">结束语:</h2><p id="ba1b" class="pw-post-body-paragraph jv jw hu jx b jy lz ka kb kc ma ke kf kg mr ki kj kk ms km kn ko mt kq kr ks hn dt translated">我在<a class="ae nt" href="http://reactninja.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> React Ninja </strong> </a>上发表React、React Native以及其他一切与web开发相关的文章。一定要在<a class="ae nt" href="https://twitter.com/reactninjaio" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">推特</strong> </a>上关注我。</p><p id="b7dd" class="pw-post-body-paragraph jv jw hu jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks hn dt translated">加入我们的<a class="ae nt" href="https://reactninja.io/subscribe-our-newsletter/" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv">简讯</strong> </a> <strong class="jx hv"> </strong>获取最新最棒的内容，让你成为更好的开发者。</p><blockquote class="od oe of"><p id="7c89" class="jv jw oa jx b jy jz ka kb kc kd ke kf og kh ki kj oh kl km kn oi kp kq kr ks hn dt translated"><em class="hu"> w </em>蚂蚁雇佣我为你的博客写稿查看我的<a class="ae nt" href="https://www.fiverr.com/krissanawat/write-programming-blogs-or-articles" rel="noopener ugc nofollow" target="_blank"> <strong class="jx hv"> Fiverr </strong> </a>页面</p></blockquote><h2 id="d189" class="my la hu bd lb nd ne nf lf ng nh ni lj kg nj nk ln kk nl nm lr ko nn no lv np dt translated">如果这篇文章有帮助，请点击拍手👏按钮下面几下，以示支持！⬇⬇</h2></div></div>    
</body>
</html>