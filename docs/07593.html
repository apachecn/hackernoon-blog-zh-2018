<html>
<head>
<title>Clean Domain-Driven Design in 10 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">10分钟内完成领域驱动的设计</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/clean-domain-driven-design-in-10-minutes-6037a59c8b7b?source=collection_archive---------0-----------------------#2018-09-06">https://medium.com/hackernoon/clean-domain-driven-design-in-10-minutes-6037a59c8b7b?source=collection_archive---------0-----------------------#2018-09-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/06a395af6679bb01e8733af6d0e431e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLH9BLF-7Xm9xa9r_Tf52Q.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://pixabay.com/en/water-lily-aquatic-plant-nature-3504363/" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="c85e" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">关键要点</h1><ul class=""><li id="3c00" class="km kn hu ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated"><a class="ae jg" href="https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215" rel="noopener ugc nofollow" target="_blank">领域驱动的设计</a> (DDD)与<a class="ae jg" href="https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html" rel="noopener ugc nofollow" target="_blank">干净的架构</a>(加州)一起工作</li><li id="13f1" class="km kn hu ko b kp le kr lf kt lg kv lh kx li kz la lb lc ld dt translated">切实清洁DDD(<a class="ae jg" href="https://www.martinfowler.com/microservices/" rel="noopener ugc nofollow" target="_blank">微服务</a>)</li><li id="a00b" class="km kn hu ko b kp le kr lf kt lg kv lh kx li kz la lb lc ld dt translated">在<a class="ae jg" href="https://landscape.cncf.io/" rel="noopener ugc nofollow" target="_blank">云上清理DDD——原生方式</a></li></ul></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><p id="5a8b" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">我去年写了关于CA的话题，今天我将写出它的另一部分。CA有助于使软件架构更加简洁和易于管理，但样板代码也很庞大(如果你曾经实现过它，你就会明白我的意思——需要创建大量的请求、响应、交互器或用例、接口和类，参见我在<a class="ae jg" href="https://github.com/thangchung/blog-core" rel="noopener ugc nofollow" target="_blank">https://github.com/thangchung/blog-core</a>的实现)。回到过去，当我们实现<a class="ae jg" href="https://martinfowler.com/bliki/CQRS.html" rel="noopener ugc nofollow" target="_blank">命令查询责任分离</a> ( <a class="ae jg" href="https://cqrs.files.wordpress.com/2010/11/cqrs_documents.pdf" rel="noopener ugc nofollow" target="_blank"> CQRS </a>)和<a class="ae jg" href="http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/" rel="noopener ugc nofollow" target="_blank">事件源</a> (ES)模式时，会让许多人对那些样板代码感到不满。这就是我研究并写出我所知道和学到的使CA更实用和可维护的方法的原因。</p><p id="4db0" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">对于那些不熟悉CA的人，请参见我以前的文章，在<a class="ae jg" href="https://hackernoon.com/applying-clean-architecture-on-web-application-with-modular-pattern-7b11f1b89011" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/applying-clean-architecture-on-web-application-with-modular-pattern-7 b11 f1 b 89011</a></p><p id="8b4a" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">让我们从我以CA方式工作的应用程序的整体情况开始，如下所示</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/e4e19fe3604390432d64189be7977641.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YVxaXqiIYskqPauNKZ2OSA.png"/></div></div></figure><ol class=""><li id="0927" class="km kn hu ko b kp ll kr lo kt mf kv mg kx mh kz mi lb lc ld dt translated">不依赖于任何框架或库的领域代码。它使得这些核心组件可以在将来重复使用</li><li id="72e4" class="km kn hu ko b kp le kr lf kt lg kv lh kx li kz mi lb lc ld dt translated">域代码的一个外层，就像适配器一样，我们用它来实现工作单元(UOW)、通用存储库(GR)、事件总线、依赖注入和许多其他东西</li><li id="ddc3" class="km kn hu ko b kp le kr lf kt lg kv lh kx li kz mi lb lc ld dt translated">带有请求和响应dto及其处理程序的部分CA模式。我们利用<a class="ae jg" href="https://github.com/jbogard/MediatR" rel="noopener ugc nofollow" target="_blank">mediator</a>和<a class="ae jg" href="https://github.com/AutoMapper/AutoMapper" rel="noopener ugc nofollow" target="_blank"> AutoMapper </a>库来简化这类工作，这也是它很酷的另一个原因😍谢谢<a class="ae jg" href="https://github.com/jbogard" rel="noopener ugc nofollow" target="_blank">吉米</a>！</li><li id="ad4f" class="km kn hu ko b kp le kr lf kt lg kv lh kx li kz mi lb lc ld dt translated">Web API的部分演示者</li></ol><p id="c8f9" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">在实现之后，它将会以如下的代码结构结束</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/2b4edbf5d26ca9bc5ba07f8430cf0cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nyO3sQkhzTX6eqROzmCAdg.png"/></div></div></figure><p id="944f" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">这里没有什么要说的，很简单，很干净，对吗？让我们深入细节，这样我们会对它有更多的了解。我将向您展示购物车服务(<a class="ae jg" href="https://thenewstack.io/miniservices-a-realistic-alternative-to-microservices" rel="noopener ugc nofollow" target="_blank"> miniservices </a>模式)的业务，例如向购物车添加新产品，向购物车添加更多产品，获取包含产品的当前购物车，更新购物车，从当前购物车中删除产品，最后的操作是检查购物车。</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mk"><img src="../Images/c52f33675d61775c87de9f69916c8321.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uz9yzs0cZp6JyaAdihIsNg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://www.gartner.com/webinar/3437517" rel="noopener ugc nofollow" target="_blank">https://www.gartner.com/webinar/3437517</a></figcaption></figure><p id="2786" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">就是这样。然后我们有这样的用例</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/684b02993bee4a2a221d85cca320b2ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*N5Ki5xVklljDHXp3J8SRnA.png"/></div></figure><p id="898c" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">如果你喜欢API优先的方法，那么我们应该把OpenAPI作为</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mm"><img src="../Images/e531a5c163ba87958ee0a361d54292a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1VXuRcayTTDXXDZ3QcMBag.png"/></div></div></figure><p id="74cb" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">让我们缩小到代码，因为我知道我们都是开发人员，所以代码应该更容易理解，对不对？</p></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="b907" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">领域组件(主要是DDD模式)</h1><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/a4036db8f23eedfa2013899c1d108502.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VOnHX-ofuZiBxih_WM7uGg.png"/></div></div></figure><p id="4e98" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">Cart.cs</p><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="6e1e" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">CartItem.cs</p><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="dcee" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">产品. cs</p><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="361f" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">基础设施组件</h1><p id="1e4d" class="pw-post-body-paragraph lj lk hu ko b kp kq lm ln kr ks lp lq kt mq ls lt kv mr lv lw kx ms ly lz kz hn dt translated">工作单元、通用存储库、事件总线、ClientRequest、依赖注入…组件都在NetCoreKit中，NetCoreKit是一组用于的云原生工具和实用程序。NET Core——这是我自己开发的(<a class="ae jg" href="https://github.com/cloudnative-netcore/netcorekit" rel="noopener ugc nofollow" target="_blank">https://github.com/cloudnative-netcore/netcorekit</a>)。</p></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="9cb8" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">请求/响应处理程序</h1><ul class=""><li id="8bde" class="km kn hu ko b kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">获取装有产品的购物车</li></ul><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><ul class=""><li id="9150" class="km kn hu ko b kp ll kr lo kt mf kv mg kx mh kz la lb lc ld dt translated">将产品添加到购物车</li></ul><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><ul class=""><li id="c984" class="km kn hu ko b kp ll kr lo kt mf kv mg kx mh kz la lb lc ld dt translated">更新购物车中的产品</li></ul><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><ul class=""><li id="7c08" class="km kn hu ko b kp ll kr lo kt mf kv mg kx mh kz la lb lc ld dt translated">删除购物车中的产品</li></ul><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><ul class=""><li id="0573" class="km kn hu ko b kp ll kr lo kt mf kv mg kx mh kz la lb lc ld dt translated">检验</li></ul><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="1471" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">Web API演示者</h1><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="1416" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">云原生部件</h1><p id="d29b" class="pw-post-body-paragraph lj lk hu ko b kp kq lm ln kr ks lp lq kt mq ls lt kv mr lv lw kx ms ly lz kz hn dt translated">这是云原生应用程序，因此我们可以将其打包到一个容器中，并在需要时托管到Kubernetes。要做的工作如下</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div class="fe ff mt"><img src="../Images/a21ccc1aa5282d026232ed03a40e0395.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/format:webp/1*9GcwL0w4nm_vZFcXu10Dhw.png"/></div></figure><p id="f67e" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">Dockerfile文件</p><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="9c2c" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">Kubernetes载货清单</p><figure class="mb mc md me fq iv"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="84c9" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">今天到此为止。希望大量的代码不会让你头晕🙏。</p></div><div class="ab cl jh ji hc jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="hn ho hp hq hr"><h1 id="a84b" class="jo jp hu bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl dt translated">概述</h1><p id="50cb" class="pw-post-body-paragraph lj lk hu ko b kp kq lm ln kr ks lp lq kt mq ls lt kv mr lv lw kx ms ly lz kz hn dt translated">近年来，世界发生了很大的变化，所以我们需要学习和适应。在本文中，我向您展示了如何将CA与DDD结合起来，并将其托管到云原生平台(在本例中为Kubernetes)。这些知识是我自己的，你可以用另一种方式思考或者为你自己创建另一个堆栈。</p><blockquote class="mu mv mw"><p id="31fc" class="lj lk mx ko b kp ll lm ln kr lo lp lq my lr ls lt mz lu lv lw na lx ly lz kz hn dt translated"><em class="hu">本文的源代码可以在</em><a class="ae jg" href="https://github.com/vietnam-devs/coolstore-microservices" rel="noopener ugc nofollow" target="_blank">https://github.com/vietnam-devs/coolstore-microservices</a>找到</p></blockquote><p id="b007" class="pw-post-body-paragraph lj lk hu ko b kp ll lm ln kr lo lp lq kt lr ls lt kv lu lv lw kx lx ly lz kz hn dt translated">感谢阅读！如果你喜欢这篇文章，请点击👏符号，以便其他人可以看到它。</p></div></div>    
</body>
</html>