<html>
<head>
<title>Chicago Crime Mapping: Magic of Data Science and Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">芝加哥犯罪地图:数据科学和Python的魔力</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/chicago-crime-mapping-magic-of-data-science-and-python-f2ecad74a597?source=collection_archive---------1-----------------------#2018-09-08">https://medium.com/hackernoon/chicago-crime-mapping-magic-of-data-science-and-python-f2ecad74a597?source=collection_archive---------1-----------------------#2018-09-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/295c779b8b989e4499bd906d7c09b97a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*L-l6BeAGq1n8BsbS"/></div></div></figure><blockquote class="jc jd je"><p id="40a9" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">“当一个人被剥夺了过自己所信仰的生活的权利时，他别无选择，只能成为一名逃犯。”<br/> ― <strong class="ji hv">曼德拉</strong></p></blockquote><p id="a008" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">预测、预报和损失分数。听起来太主流了吧？<br/>在对机器<a class="ae kh" href="https://hackernoon.com/tagged/learning" rel="noopener ugc nofollow" target="_blank">学习</a>及其算法越来越感兴趣的时代，我们极大地忽视了作为<a class="ae kh" href="https://hackernoon.com/tagged/data" rel="noopener ugc nofollow" target="_blank">数据</a>科学家的重要职责，其中之一就是<strong class="ji hv">数据探索。</strong></p><p id="de16" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">我们这些现代数据科学家是如此天真，以至于我们忘记了可视化的美丽和它所代表的品质。今天，请允许我向大家展示一个对Kaggle数据集的探索性数据分析:<a class="ae kh" href="https://www.kaggle.com/currie32/crimes-in-chicago" rel="noopener ugc nofollow" target="_blank">芝加哥的犯罪</a>。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ki"><img src="../Images/092a602a1c1b26f870e9a42ff1f1146c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PncHSSMHTdPfwgw3pxl50Q.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">The Crimes in Chicago Dataset</figcaption></figure><p id="36c2" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">我将使用我的内核中的代码和可视化，你可以在这里找到:<a class="ae kh" href="https://www.kaggle.com/uds5501/chicago-crime-mapping?scriptVersionId=5579459" rel="noopener ugc nofollow" target="_blank">芝加哥犯罪地图</a></p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kr"><img src="../Images/0f164b2a989f93d801958a92d745ab68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j6Nyw3Atfi0JyjwedOr_Vw.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Chicago Crime Mapping — At the time of editing</figcaption></figure><p id="3eb7" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">因此，在开始分析之前，让我向你们简要介绍一下数据集，根据介绍，它说:</p><blockquote class="jc jd je"><p id="ca8c" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">该数据集反映了从2001年到现在，减去最近7天，芝加哥市发生的已报告犯罪事件(谋杀除外，其中每个受害者都有数据)。数据来自芝加哥警察局的CLEAR(公民执法分析和报告)系统。为了保护犯罪受害者的隐私，地址只在街区一级显示，具体地点不标明。如果您对该数据集有任何疑问，您可以致电312.745.6071或RDAnalysis@chicagopolice.org联系芝加哥警察局的研发部门。</p></blockquote><p id="f882" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">本质上，该数据集包含<strong class="ji hv">犯罪的类型、位置、犯罪的子类别、邻近区域的类型</strong>和<strong class="ji hv">是否可能逮捕</strong>。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="6384" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">检查数据是否包含空值</h1><p id="26ec" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">第一步可能是检查数据集是否包含任何空值，我使用热图来确定这一点。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/b7ed7a461eb61a2dfab51a6938dbf311.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VE0NlLNXQp04xePxhQ_ssQ.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Viridis Heatmap</figcaption></figure><p id="2738" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">查看我们的热图，我们可以有把握地得出结论，没有多少值被遗漏了，所以直接删除它吧。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><p id="b220" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">我很好奇，想知道这5年里报道的犯罪数量，我能看到的是:</p><pre class="kj kk kl km fq md me mf mg aw mh dt"><span id="1c59" class="mi la hu me b fv mj mk l ml mm">STREET                            325084<br/>RESIDENCE                         223854<br/>APARTMENT                         179444<br/>SIDEWALK                          158478<br/>OTHER                              53474<br/>PARKING LOT/GARAGE(NON.RESID.)     40907<br/>ALLEY                              31239<br/>RESIDENTIAL YARD (FRONT/BACK)      30209<br/>SMALL RETAIL STORE                 28209<br/>SCHOOL, PUBLIC, BUILDING           25474<br/>Name: Location Description, dtype: int64</span></pre><p id="47bd" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">相当高，持续了5年。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="63c8" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">位置描述及其语义</h1><p id="befb" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">人们可能会想，犯罪最常发生在哪里。是肮脏的街道，臭名昭著的居民还是无人看守的停车场？我们可以使用下面的代码片段自己检查一下:</p><pre class="kj kk kl km fq md me mf mg aw mh dt"><span id="5853" class="mi la hu me b fv mj mk l ml mm">plt.figure(figsize = (15, 10))</span><span id="f346" class="mi la hu me b fv mn mk l ml mm">sns.countplot(y= 'Location Description', data = df, order = df['Location Description'].value_counts().iloc[:10].index)</span></pre><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mo"><img src="../Images/c2f69ed501c8826cc55bab63728f7dad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nVo09KBMxw4EDg25nEfADA.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Location Semantics</figcaption></figure><p id="fb23" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">显然，街道是最不安全的，住宅和公寓紧随其后。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="09c3" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">绘制犯罪数量图</h1><p id="a89d" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">让我们仔细看看犯罪发生的独特地点，并使用<strong class="ji hv">叶</strong>来绘制它们。您可以使用这个片段来重新创建我的地图。</p><pre class="kj kk kl km fq md me mf mg aw mh dt"><span id="a70c" class="mi la hu me b fv mj mk l ml mm">chicago_map_crime = folium.Map(location=[41.895140898, -87.624255632],<br/>                        zoom_start=13,<br/>                        tiles="CartoDB dark_matter")<br/><br/>for i in range(500):<br/>    lat = CR_index['LocationCoord'].iloc[i][0]<br/>    long = CR_index['LocationCoord'].iloc[i][1]<br/>    radius = CR_index['ValueCount'].iloc[i] / 45<br/>    <br/>    if CR_index['ValueCount'].iloc[i] &gt; 1000:<br/>        color = "#FF4500"<br/>    else:<br/>        color = "#008080"<br/>    <br/>    popup_text = """Latitude : {}&lt;br&gt;<br/>                Longitude : {}&lt;br&gt;<br/>                Criminal Incidents : {}&lt;br&gt;"""<br/>    popup_text = popup_text.format(lat,<br/>                               long,<br/>                               CR_index['ValueCount'].iloc[i]<br/>                               )<br/>    folium.CircleMarker(location = [lat, long], popup= popup_text,radius = radius, color = color, fill = True).add_to(chicago_map_crime)</span></pre><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/4b89b01212dbcf9333cc2ac49b97f666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dTF6BTBhT_2QO1iJ8M031Q.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Map of crimes</figcaption></figure><p id="aba6" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">在这里，橙色圆圈表示在该特定位置发生的犯罪超过1000起，而其他则不言自明。点击这些地图会显示坐标和在特定地点发生的犯罪数量(纬度、经度)</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mq"><img src="../Images/611f4db999e88679b6004c9c843f4406.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-Vl6yIVZEG9RG-227nVh7g.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">An example of details</figcaption></figure></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="7c8f" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">对盗窃案的进一步调查</h1><p id="d483" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">我对盗窃和扰乱公共治安特别感兴趣，但让我们稍后再来看看后者。现在，让我们把注意力集中在这5年里发生在芝加哥周围的盗窃类型上。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/3924c3a77d33823be78ed8820bf8e74b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yY5TEAD6NUFcn_1-JZlNjQ.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Type of thefts in Chicago from 2012- 2017</figcaption></figure><p id="bb04" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">好吧，500美元的盗窃案现在占主导地位。没有吗？</p><p id="8b18" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">如果这还不够，让我们来看看这些盗窃是如何在一个月内发生的。看看这张图表，让我来解释一下犯罪现场统计数字的突然下降。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/e680ffb37628a9d9721248f2d2b85340.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-E6l-F-1Z0tEiivVBoqOag.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Thefts Per Month</figcaption></figure><blockquote class="jc jd je"><p id="7082" class="jf jg jh ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">好吧，在八月，没有超人或蝙蝠侠来到这个城市保护正义。这只是一个算法上的损失，它导致了8月份的一个<code class="eh ms mt mu me b">NAN</code>值，我必须用0来代替它(因为我很懒)</p></blockquote><p id="8dd4" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">如果你不相信我，这是代码:</p><pre class="kj kk kl km fq md me mf mg aw mh dt"><span id="db98" class="mi la hu me b fv mj mk l ml mm">theft_in_months = pd.DataFrame({"thefts" : df_theft['Month'].value_counts(), "month" : df_theft["Month"].value_counts().index}, index = range(12))</span><span id="5cfb" class="mi la hu me b fv mn mk l ml mm">theft_in_months.fillna(0, inplace=True)<br/>theft_in_months = theft_in_months.sort_values(['month'], ascending=[1])</span><span id="cc55" class="mi la hu me b fv mn mk l ml mm">theft_in_months.head()</span></pre></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="df30" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">年度犯罪统计:一次使用几乎所有的数据。</h1><p id="6fbe" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">您可以尝试重新采样数据集的日期，您会发现这个数据集实际上包含1854天，准确地说。想知道单日作案多少起的映射？那么请看一下这张图表。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mv"><img src="../Images/cb61b7eba85a420a66f1144ea3e6ff89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RRqQ1-WRbKPu5jxiTDIuxA.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Thefts on a daily basis</figcaption></figure><h2 id="7817" class="mi la hu bd lb mw mx my lf mz na nb lj ke nc nd ln kf ne nf lr kg ng nh lv ni dt translated">你可能已经注意到了，每年的犯罪统计数字都有一个总体趋势。</h2><p id="4896" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">这里，值得注意的趋势是在年初曲线上升，并在中点达到峰值。六月到七月的某个地方。在那之后，随着年初的到来，犯罪率也同样急剧下降。</p></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="3453" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">破坏公共和平</h1><p id="12e6" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">我保证这是本文的最后一个研究领域。</p><p id="2213" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">无论如何，如果人们可以关注公共和平侵犯的类型及其数量分布，人们可以很容易地指出<strong class="ji hv">鲁莽行为</strong>是这一领域的领导者，而(谢天谢地)不是炸弹和纵火威胁。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nj"><img src="../Images/a9cb2e37b6133e18e09a11d58f683b2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wG71yomXLd7-r4kStQQrZQ.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Types of Public Peace Violations</figcaption></figure><p id="67ee" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">既然说到这里，让我们来看看芝加哥周围的和平破坏事件。在这张地图中，橙色圆圈代表该地区的和平破坏在这5年中已经超过了<strong class="ji hv"> 30 </strong>的数量，因此是一个需要小心处理的敏感点。</p><figure class="kj kk kl km fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nk"><img src="../Images/7667596dbc021d52161657ddec9c6d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N3518mv6uvjGzYzaLkRhYA.png"/></div></div><figcaption class="kn ko fg fe ff kp kq bd b be z ek">Peace Disruption Locations</figcaption></figure></div><div class="ab cl ks kt hc ku" role="separator"><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx ky"/><span class="kv bw bk kw kx"/></div><div class="hn ho hp hq hr"><h1 id="923d" class="kz la hu bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">结论</h1><p id="7a2e" class="pw-post-body-paragraph jf jg hu ji b jj lx jl jm jn ly jp jq ke lz jt ju kf ma jx jy kg mb kb kc kd hn dt translated">正如您可能已经判断的，这不是一个编码教程，而是一个潜在的项目启动。你可以在你的笔记本上使用这个EDA，记住<strong class="ji hv"> Apache 2.0 </strong>许可，并根据这些想法制作你的预测模型。</p><h2 id="37fc" class="mi la hu bd lb mw mx my lf mz na nb lj ke nc nd ln kf ne nf lr kg ng nh lv ni dt translated">我的一些想法:</h2><ol class=""><li id="db9f" class="nl nm hu ji b jj lx jn ly ke nn kf no kg np kd nq nr ns nt dt translated">一个基于季节的预测模型，预测在特定的一天会发生多少起犯罪。</li><li id="c476" class="nl nm hu ji b jj nu jn nv ke nw kf nx kg ny kd nq nr ns nt dt translated">一种预测模型，它判断一个地区或邻近地区(如林肯伍德)的敏感性并预测下一次犯罪何时发生。</li></ol><p id="0889" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">或者任何你想到的其他想法。</p><p id="a1d8" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated">直到下一次，和平了。</p><p id="1bd9" class="pw-post-body-paragraph jf jg hu ji b jj jk jl jm jn jo jp jq ke js jt ju kf jw jx jy kg ka kb kc kd hn dt translated"><em class="jh">乌代什亚·辛格</em></p><figure class="kj kk kl km fq iv"><div class="bz el l di"><div class="nz oa l"/></div></figure></div></div>    
</body>
</html>