<html>
<head>
<title>Validating a Cryptocurrency Trading Strategy Using the Gatsiva API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Gatsiva API验证加密货币交易策略</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-validate-a-crypto-trading-strategy-bfeda73c1d55?source=collection_archive---------22-----------------------#2018-09-10">https://medium.com/hackernoon/how-to-validate-a-crypto-trading-strategy-bfeda73c1d55?source=collection_archive---------22-----------------------#2018-09-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="231e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们如何使用Gatsiva API评估0x (ZRX)的交易策略的用例及演练。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/ab34dc5c85601a0d074981539f3b8fd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YjL10agL-z4wlVM7iSjTrQ.jpeg"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Photo by Ylanite Koppens from Pexels</figcaption></figure><p id="fa00" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在<a class="ae kg" href="https://gatsiva.com" rel="noopener ugc nofollow" target="_blank"> Gatsiva </a>，我们已经将机器学习应用于股票、外汇和最近的加密货币市场超过15年。我们提供了一个API，通过利用技术分析生成买入或卖出信号，帮助<a class="ae kg" href="https://hackernoon.com/tagged/cryptocurrency" rel="noopener ugc nofollow" target="_blank">加密货币</a>交易者在交易中变得更加自信。</p><p id="ea8b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在本文中，我们展示了我们的一个合作者如何使用Gatsiva API来增强对0x (ZRX)交易方法的信心。</p><h2 id="740d" class="kh ki hu bd kj kk kl km kn ko kp kq kr jc ks kt ku jg kv kw kx jk ky kz la lb dt translated">提议的战略</h2><p id="fbcf" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">我们平台上的一位合作者最近提出了一个问题:MACD直方图的斜率能否预测加密货币的价格变化？这是否能提供对价格下跌、价格上涨或两者的提前洞察？特别是，这种策略对正在讨论的比特币——以<a class="ae kg" href="https://hackernoon.com/tagged/bitcoin" rel="noopener ugc nofollow" target="_blank">比特币</a> (BTC)定价的0x (ZRX)有效吗？</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lh"><img src="../Images/b68c55578d35c5f298073191f398daf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/1*Gi_-cfH1z5QIVpcTnL9Qlg.jpeg"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Illustration of MACD Histogram Slope Crossover Strategy</figcaption></figure><p id="e8a0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">分析的第一步是在<a class="ae kg" href="https://gatsiva.com/docs/#gatsiva-language-definition" rel="noopener ugc nofollow" target="_blank">gativa的自然语言</a>中设计条件，用于准确识别这些信号的条件定义。利用条件语言，我们帮助这个合作者指定他们描述的条件来定义策略。这对规则很容易定义如下:</p><blockquote class="li lj lk"><p id="f5bb" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">规则1(做空):macd柱状图(12，26，9) &gt; 0，macd柱状图(12，26，9)的斜率在1个周期内低于0</p><p id="b43c" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">规则2 (Long): macd直方图(12，26，9) &lt; 0 and slope of macd histogram(12,26,9) over 1 period crosses above 0</p></blockquote><p id="620a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">The second step was to analyze the <a class="ae kg" href="https://gatsiva.com/docs/#condition-return-profile" rel="noopener ugc nofollow" target="_blank">条件回报剖面</a>。使用我们的API，我们可以轻松地引入这些回报的数据，并生成以下可视化结果；我们定义的每个条件都有一个。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lo"><img src="../Images/f424626395b8d0e26b7e51497357fe44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yHcDyIHZstaGZbqGxvNXAQ.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Rule 1 (SHORT) Percentile Return Profile</figcaption></figure><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lp"><img src="../Images/bf8e4f3088cfa1218dc282e5d544481b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Z2qCm1lK7GN4B7jw5qNng.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Rule 2 (LONG) Percentile Return Profile</figcaption></figure><p id="8191" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些可视化显示了过去发生上述情况后观察到的回报分布。这些回报显示在多个时间段内(本例中为几天)。那是满嘴的。基本上，可视化显示，对于上述条件，当它们在过去发生时，1天后价格会发生什么变化？7天？21天？在上图中，我们可以看到，长边条件在过去的19次中为真，总的来说，以比特币(BTC)定价的0x (ZRX)价格普遍下降，至少到一个月以后。</p><p id="346c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一方面，我们可以看到，当短边条件发生时，基于之前的18个实例，以比特币(BTC)定价的0x (ZRX)价格普遍上涨。同样，至少在大约三周后。</p><p id="3049" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于我们合作者的交易想法来说，这是一个有趣的结果。他们想要做多分析的条件预测价格下跌，他们想要做空分析的条件预测价格上涨。这两个条件很匹配，但实际结果与我们的合作者所设想的正好相反。运行这一分析是对可能导致损失的提议交易策略的有价值的洞察</p><blockquote class="li lj lk"><p id="712d" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">关于这些置信带图表以及如何创建它们的更详细的解释，可以看看我们之前的文章:<a class="ae kg" href="https://hackernoon.com/trading-cryptocurrency-with-confidence-bands-cffd523f3e4b" rel="noopener ugc nofollow" target="_blank">用置信带交易加密货币</a>和<a class="ae kg" rel="noopener" href="/@gatsiva/gatsiva-python-visualizing-bitcoin-corrections-7836aab57586"> Gatsiva + Python:可视化比特币修正</a>。要直接进入代码，你也可以看看我们的<a class="ae kg" href="https://github.com/gatsiva/jupyter-notebooks" rel="noopener ugc nofollow" target="_blank">开源Python笔记本</a>。</p></blockquote><p id="6173" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通常MACD直方图为正且向下倾斜是超买的迹象。同样，相反的是一个<em class="jp">超卖</em>情景的迹象。但在这种情况下，以比特币(BTC)定价的0x (ZRX)的回报曲线恰恰相反。</p><p id="90ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当MACD直方图为正时，斜率向下移动(规则1)，接下来几天的回报通常会更高，这表明这是一个比短规则更好的长规则。类似地，当MACD直方图为负，斜率向上移动时，回报继续为负——表明这是一个比长法则更好的短法则。</p><p id="07de" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">这是Gatsiva API的第一个强大功能——在事件发生后显示真实回报的能力</strong>。这有助于支持或快速揭穿交易理念，尤其是那些在股票市场等其他市场上经典有效的交易理念。</p><h2 id="8edb" class="kh ki hu bd kj kk kl km kn ko kp kq kr jc ks kt ku jg kv kw kx jk ky kz la lb dt translated">模拟交易</h2><p id="9b13" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">接下来是交易模拟。在Gatsiva，我们建立了一个内部交易模拟器，允许我们使用币安的5分钟间隔数据来模拟Gatsiva条件语言中定义的信号交易。</p><blockquote class="li lj lk"><p id="fddc" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">由于我们的主要数据源是Cryptocompare，因此使用单独的数据源来模拟交易对于最小化数据窥探偏差是必要的，也是通过使用更细粒度的时间片来获得更真实的交易输入体验的一种方式。</p></blockquote><p id="808c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们假设初始投资组合为10个BTC，最多允许同时建立5个未结头寸，每个头寸有20%的可用资本用于新的头寸。最后，我们假设佣金成本为0.1%。</p><p id="c989" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">由于源数据稍微延迟，我们的实际条件信号稍微延迟。此外，在我们的引擎中处理数据和生成信号需要少量时间。这些延迟被构建到我们的模型中，并包含在我们的模拟中，以确保更真实的交易场景。以下规则也包括在我们的模拟中:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/382fb5fd01fccc3c8508f8987d496875.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/format:webp/1*Qh8VdcniKBN-fsIOrqmf6Q.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Trade Entry Rules</figcaption></figure><p id="db5a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">退出标准很简单:应用15%的跟踪止损和20%的利润目标，但是持仓时间不要超过72小时。随着头寸变得有利可图，模拟会更新跟踪止损。如果止损被触发或者我们达到盈利目标，模拟以目标价格卖出。如果我们达到了最大持有时间，模拟以5分钟时间间隔内观察到的开盘价、收盘价和最低价的平均值卖出。这些出场规则适用于多头和空头。</p><blockquote class="li lj lk"><p id="ec58" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">注意:当结合我们的头寸规模(15%跟踪止损x 20%总头寸规模)时，这相当于任何一笔交易总价值的最大3%损失。</p></blockquote><p id="91b4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，我们选择了2018年1月1日至2018年8月9日(我们进行分析的日期)的数据。这是为了确保在开始技术分析之前，从0x开始可以获得一些历史记录。</p><h2 id="f523" class="kh ki hu bd kj kk kl km kn ko kp kq kr jc ks kt ku jg kv kw kx jk ky kz la lb dt translated">结果呢</h2><p id="b0d0" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">0x (ZRX)的总体结果令人印象深刻，如下面的表格和图表所示。我们能够真实地输入我们信号产生的78%的交易，并获得超过14%的佣金后利润。在此期间，我们的模拟投资组合曾达到的最低值为9.81 BTC(约为我们初始资本的-1.9%)。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lr"><img src="../Images/667e4e9a4e0d7fe94dedacd5391b9dea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*xipRBFTXUv5cU0SsCbVQ4w.png"/></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Table of Simulation Results</figcaption></figure><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ls"><img src="../Images/9d6b42fba15e34168d63cb4a7820ac97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hHBqKHToIdp4dvAgx6xXaw.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Portfolio Value and Open Positions Over Time</figcaption></figure><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lt"><img src="../Images/f2bc4f48c463fa562d0c0a4d28fb2399.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k4pDM6WddOOmu0gpXdWO8Q.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">P/L of Each Trade</figcaption></figure><p id="5055" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">关于模拟交易和时间戳的详细列表，请看看Github 上的这个<a class="ae kg" href="https://gist.github.com/otbbdeploy/8edc2f20f40e8dee8f4db9b583951995" rel="noopener ugc nofollow" target="_blank">要点。</a></p><h2 id="c971" class="kh ki hu bd kj kk kl km kn ko kp kq kr jc ks kt ku jg kv kw kx jk ky kz la lb dt translated">批评</h2><p id="c4b8" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">从这些结果中，我们当然可以预见到许多批评，其中一些是公正的。特别是其中的两个——时间框架选择和硬币选择——我们提供以下内容:</p><p id="a4d1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有可能我们选择的时间框架扭曲了结果。请注意，在2018年1月1日至2018年8月9日的模拟期间，0x (ZRX)在BTC的整体价格上涨了近132%。我们必须认识到，这些结果可能只是“幸运”的，我们的结果受益于助跑。</p><p id="92e7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了测试这一点，我们选择了另一个与2018年8月9日收盘价最接近的时间段，并发现2018年2月2日将是测试我们“运气”的好起点。下面是选择一个相对“平坦”重现期的比较，结果也是正面的。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lu"><img src="../Images/f95d4569dc3d11ecb2234bb17529e2d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ICvvc1wwnQUg9dKjqVJYew.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Comparison of Simulation Results to Flat Time Period</figcaption></figure><p id="4663" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在上表中，我们可以看到，即使是在回报率略有下降的时期，这种策略也产生了积极的结果。</p><p id="8171" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一个公平的批评是这次模拟选择了0x (ZRX)而不是更主流的硬币。但是，请记住，在进入该策略之前，我们验证了我们对应用于0x (ZRX)的MACD直方图斜率交叉信号的可行性的假设。</p><p id="3d48" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">也就是说，有趣的是，在同一时期，以太坊(ETH)、以太坊经典(ETC)和莱特币(LTC)也能观察到类似的结果。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff lv"><img src="../Images/9c078be0aa6b590beac67519f0f705c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cm8ID-GQQOhd0-T8fyBJQA.png"/></div></div><figcaption class="kc kd fg fe ff ke kf bd b be z ek">Comparison of Simulation Results to Other Coins</figcaption></figure><p id="29b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在上表中，我们可以看到，对于ETH、ETC和LTC，我们通过coin在混合环境中获得了积极的结果。以太坊和以太坊经典在这段时间内表现相对平淡，但模拟在两种场景下都表现出色。在这段时间里，莱特币的价值损失了43%,但MACD直方图交叉策略在这种环境下的佣金后实际上赚了3.28%。</p><p id="ff22" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在下跌的市场中获得边际收益…我们会接受它，而不是亏钱。</p><h2 id="6b61" class="kh ki hu bd kj kk kl km kn ko kp kq kr jc ks kt ku jg kv kw kx jk ky kz la lb dt translated">将模拟付诸实施</h2><p id="0880" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">我们可以用这个条件分析和模拟结果做什么？这两个条件已经添加到我们的洞察引擎中，并且随着新的市场数据的产生，现在正在不断地实时重新评估。任何基于我们模型的相关信号都会被反馈给我们的合作者，作为在我们平台上讨论的可用信号。</p><p id="685e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">值得注意的是，这种策略不会在所有情况下对所有硬币都有效。这带来了Gatsiva平台的第二个强大功能——持续跟踪和更新哪些信号适用于哪些硬币的能力。通过实时统计工具的仔细应用和验证，这些信号可以成为一个人交易策略的有力补充。</p><h2 id="a5f5" class="kh ki hu bd kj kk kl km kn ko kp kq kr jc ks kt ku jg kv kw kx jk ky kz la lb dt translated">对自己策略的工具感兴趣？</h2><p id="2375" class="pw-post-body-paragraph ir is hu it b iu lc iw ix iy ld ja jb jc le je jf jg lf ji jj jk lg jm jn jo hn dt translated">来gatsiva.com的<a class="ae kg" href="http://gatsiva.com" rel="noopener ugc nofollow" target="_blank">访问我们吧，看看我们API </a>的<a class="ae kg" href="https://gatsiva.com/docs" rel="noopener ugc nofollow" target="_blank">文档，开始构建你自己的策略，一定要注册我们的</a><a class="ae kg" href="https://discourse.gatsiva.com" rel="noopener ugc nofollow" target="_blank">协作平台</a>。我们总是根据合作者的反馈来扩展我们的API。</p><p id="0762" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，如果你喜欢你刚刚读到的:请随意给这篇文章添加书签，鼓掌，或者留下评论！它帮助我们帮助更多的人！</p><figure class="jr js jt ju fq jv"><div class="bz el l di"><div class="lw lx l"/></div></figure></div></div>    
</body>
</html>