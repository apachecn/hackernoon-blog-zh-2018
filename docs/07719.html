<html>
<head>
<title>Build a Telegram Bot that Translates Text in 3 Steps with Node.js and Code.xyz</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个电报机器人，用Node.js和Code.xyz分三步翻译文本</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/build-a-telegram-bot-that-translates-text-in-3-steps-with-node-js-and-code-xyz-fa9d6309b659?source=collection_archive---------5-----------------------#2018-09-11">https://medium.com/hackernoon/build-a-telegram-bot-that-translates-text-in-3-steps-with-node-js-and-code-xyz-fa9d6309b659?source=collection_archive---------5-----------------------#2018-09-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/95da37735495fddb43bce5825fa49247.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xydtv7uLinvrvcy_sTpcng.png"/></div></div></figure><p id="2416" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae ka" href="https://telegram.org/" rel="noopener ugc nofollow" target="_blank"> Telegram </a>是一种注重隐私的即时消息和语音服务。碰巧的是，他们也有一个非常漂亮的界面来创建机器人。这一切都是通过与另一个名为“机器人父亲”的机器人对话，在应用程序中完成的。</p><p id="ba89" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">本教程将带你创建一个可以将文本翻译成几种不同语言的电报机器人。翻译将由IBM Watson的<a class="ae ka" href="https://www.ibm.com/watson/services/language-translator/" rel="noopener ugc nofollow" target="_blank">语言翻译器</a>处理。<a class="ae ka" href="https://core.telegram.org/bots/api" rel="noopener ugc nofollow" target="_blank">电报机器人API </a>和Watson将由<a class="ae ka" href="https://stdlib.com/" rel="noopener ugc nofollow" target="_blank">标准库</a>汇集在一起。</p><p id="b555" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您不熟悉<a class="ae ka" href="https://stdlib.com" rel="noopener ugc nofollow" target="_blank">标准库</a>，我们结合了一个可扩展的计算层，以及自动生成的文档、身份验证、计费等。我们努力让任何人都能在几秒钟内将简单的<a class="ae ka" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>函数转化为生产就绪的API。在我们的在线编辑器<a class="ae ka" href="https://code.xyz" rel="noopener ugc nofollow" target="_blank"> Code.xyz </a>的帮助下，您可以在本地机器上进行零设置或安装，就可以发布到标准库。</p><h2 id="2c49" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">你事先需要什么</h2><ul class=""><li id="43a2" class="kw kx hu je b jf ky jj kz jn la jr lb jv lc jz ld le lf lg dt translated">1x电报帐户</li><li id="8e45" class="kw kx hu je b jf lh jj li jn lj jr lk jv ll jz ld le lf lg dt translated"><strong class="je hv"> ≈ </strong> 5x分钟</li></ul><h2 id="8847" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">第一步:咨询机器人父亲</h2><p id="ada8" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">这是父亲女儿结婚的日子。你有机会要求一件礼物，他当然不会拒绝。你选择要求你自己的电报机器人。无论你使用Telegram <a class="ae ka" href="https://web.telegram.org" rel="noopener ugc nofollow" target="_blank">网络应用程序、</a>还是你手机各自的客户端，去搜索栏输入“僵尸父亲”。可能有几个选项，请确保选择带有“已验证”复选标记的选项。</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div class="fe ff lp"><img src="../Images/1607da967c044364005de17cff61d7a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*6EDrOierQ-ySSNrJksYSxA.png"/></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">Imposters! You want the one with the blue check.</figcaption></figure><p id="ce1c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对话开始后，输入<code class="eh ly lz ma mb b">/newbot</code>,机器人父亲会询问你的名字。这不是机器人的用户名，所以它不必是唯一的。我和<code class="eh ly lz ma mb b">notoriaga_test_bot</code>一起去的。接下来，僵尸父亲会要求输入用户名(即<code class="eh ly lz ma mb b">@BotFather</code>)。人们会这样称呼你的机器人，所以它必须是独一无二的。我还是选择了<code class="eh ly lz ma mb b">notoriaga_test_bot</code>，但是你必须选择不同的。在这一步之后，机器人父亲将返回一个用来控制你的机器人的令牌。把它抄下来，我们马上就要用到。</p><p id="0d07" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在我们需要为机器人启用<a class="ae ka" href="https://core.telegram.org/bots/api#inline-mode" rel="noopener ugc nofollow" target="_blank">内联模式</a>。这使得人们可以在任何聊天中输入<code class="eh ly lz ma mb b">@&lt;bot-name&gt;</code>来使用你的机器人，而不是像我们使用机器人父亲那样打开聊天。键入<code class="eh ly lz ma mb b">/setinline</code>，然后点击你刚刚创建的机器人。机器人父亲会要求一些占位符文本。我选择了<code class="eh ly lz ma mb b">Some text to translate…</code>,它是这样展示的—</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mc"><img src="../Images/e74cdedb240618dc8297feac86aa2967.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HnJ9G40FDE4Qc-QcXh4TkQ.png"/></div></div></figure><h2 id="7166" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">步骤2:用标准库添加一些基本功能</h2><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff md"><img src="../Images/c929b863c6b2592652f20cd0eec6e258.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Asgq23ehbpI4ToT0lI80cw.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek"><a class="ae ka" href="http://code.xyz" rel="noopener ugc nofollow" target="_blank">Code.xyz</a> — Standard Library’s free online editor for APIs</figcaption></figure><p id="0b2d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在开始翻译之前，让我们先看一个基本的“hello world”示例。前往<a class="ae ka" href="https://code.xyz/?src=@telegram/bot" rel="noopener ugc nofollow" target="_blank"> Code.xyz，</a>标准库的在线代码编辑器。它预装了(几乎)让你的机器人运行所需的一切。您可以通过该链接或点击登录页面上的“特色API源代码”选项卡来找到代码。</p><p id="99cf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">加载后，打开<code class="eh ly lz ma mb b">env.json</code>文件。你会看到四个不同的变量。目前，我们只关心<code class="eh ly lz ma mb b">TELEGRAM_BOT_TOKEN</code>。这是之前令牌。如果因为某种原因找不到，可以一边和僵尸爸爸说话，一边用<code class="eh ly lz ma mb b">/token</code>做一个新的。无论哪种方式，将令牌放入您的<code class="eh ly lz ma mb b">env.json</code>中。</p><p id="a648" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在前往<code class="eh ly lz ma mb b">function/setup.js</code>。这个函数在运行时将项目中的<code class="eh ly lz ma mb b">functions/__main__.js</code>文件注册为所有bot内联查询的接收者。点击run后，您应该会收到Telegram的响应，表示一切正常—</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff me"><img src="../Images/d7e0131dfc967b6fc8e4a2cd2c130d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXV_YMz6VikJeTplHPZy4w.png"/></div></div></figure><p id="9c5d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在回到电报给你的机器人一个尝试。键入<code class="eh ly lz ma mb b">@&lt;bot_name&gt; hello world</code>，过一会儿会出现一个弹出窗口，显示<code class="eh ly lz ma mb b">echo</code></p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mf"><img src="../Images/ea3bc5c520c12167c5e40cb4c86e8b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sQTQLUvoAD9aFpvFbd0ADw.png"/></div></div></figure><p id="e7d2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击弹出菜单，然后—</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mg"><img src="../Images/c50dc86a61472ef758607a2e68334bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NKQn_fyJCO_0r543zwecvA.png"/></div></div></figure><p id="ae0b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">成功！设置好基本功能后，让我们让机器人做一些更有用的事情。</p><h2 id="2080" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">步骤3:用IBM Watson翻译内联查询</h2><p id="9dbe" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">打开你的IBM Bluemix仪表板(如果你没有的话，创建一个账户)。在您的仪表板上，点击右上角附近的<code class="eh ly lz ma mb b">Create resource</code>。从左边的分类侧边栏点击<code class="eh ly lz ma mb b">AI</code>，然后点击<code class="eh ly lz ma mb b">Language Translator</code>。为您的服务命名并点击<code class="eh ly lz ma mb b">Create</code>。现在，您的服务页面应该有两个凭证。第一个是<code class="eh ly lz ma mb b">API Key</code>。简单地把它复制到你的<code class="eh ly lz ma mb b">env.json</code>中作为<code class="eh ly lz ma mb b">WATSON_TRANSLATE_KEY</code>。现在对于<code class="eh ly lz ma mb b">Url</code>，你只对主机感兴趣，也就是<code class="eh ly lz ma mb b">https://</code>和<code class="eh ly lz ma mb b">/language-translator/api</code>之间的部分。将主机作为<code class="eh ly lz ma mb b">WATSON_TRANSLATE_HOST</code>复制到您的<code class="eh ly lz ma mb b">env.json</code>中。</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mh"><img src="../Images/f4a0698e6a46b4f46cd217997f4cf013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O-vwCnONuEY8AGbtzc5eVg.png"/></div></div><figcaption class="lu lv fg fe ff lw lx bd b be z ek">The complete env.json</figcaption></figure><p id="edf0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有了这些新的环境变量，回到<code class="eh ly lz ma mb b">functions/setup.js</code>并再次点击run。现在，关键时刻到了。回到电报，再次输入<code class="eh ly lz ma mb b">@&lt;bot_name&gt; hello-world</code>。这次你应该看到—</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mi"><img src="../Images/6963a8663f7e7cb6c4163deca6d5a2c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GqXea1i35MPjYPB7G56juw.png"/></div></div></figure><p id="5a01" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然，点击一个就会把翻译输入到聊天中——</p><figure class="lq lr ls lt fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/2e9734f3798a35a9a190578dba5af158.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5iCI34jlXdEW-lIWBJkZog.png"/></div></div></figure><h2 id="9f63" class="kb kc hu bd kd ke kf kg kh ki kj kk kl jn km kn ko jr kp kq kr jv ks kt ku kv dt translated">仅此而已！</h2><p id="07f7" class="pw-post-body-paragraph jc jd hu je b jf ky jh ji jj kz jl jm jn lm jp jq jr ln jt ju jv lo jx jy jz hn dt translated">我希望本教程有助于向您展示使用标准库组合不同的服务是多么容易。关于如何更好地使用标准库的更多灵感，你可以在这里查看团队编写的更多指南。如果你有好的想法想要分享，请直接通过电子邮件联系我:<strong class="je hv">steve@stdlib.com</strong>，或者在Twitter上关注<a class="ae ka" href="https://twitter.com/notoriaga" rel="noopener ugc nofollow" target="_blank">我</a>和<a class="ae ka" href="https://twitter.com/stdlibhq" rel="noopener ugc nofollow" target="_blank">标准库</a>团队。</p></div><div class="ab cl mk ml hc mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="2b32" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Steve Meyer是Oberlin学院的应届毕业生，也是标准图书馆的软件工程师。当他不在 <a class="ae ka" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank"> <em class="mr">编程</em> </a> <em class="mr">的时候，你可以找他烤面包，或者玩蜘蛛侠。</em></p><figure class="lq lr ls lt fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure></div></div>    
</body>
</html>