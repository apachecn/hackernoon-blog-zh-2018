<html>
<head>
<title>Building your private NEO network on AWS (part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS上构建您的私人近地天体网络(第2部分)</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/building-your-private-neo-network-on-aws-part-2-4dc975744bf8?source=collection_archive---------27-----------------------#2018-09-12">https://medium.com/hackernoon/building-your-private-neo-network-on-aws-part-2-4dc975744bf8?source=collection_archive---------27-----------------------#2018-09-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="250f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><a class="ae jp" href="https://hackernoon.com/building-your-private-neo-network-on-aws-part-1-c01525dadc1c" rel="noopener ugc nofollow" target="_blank">上周</a>，我们创建了一个AWS帐户，部署了一个EC2 Linux实例，并学习了如何通过SSH连接到该服务器。在Docker的帮助下，我们将在刚刚创建的linux AMI中部署一个私有的NEO <a class="ae jp" href="https://hackernoon.com/tagged/network" rel="noopener ugc nofollow" target="_blank">网络</a>！</p><p id="7e76" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">那么什么是<strong class="it hv"> Docker </strong>？Docker是容器化<a class="ae jp" href="https://hackernoon.com/tagged/technology" rel="noopener ugc nofollow" target="_blank">技术</a> —它帮助我们运行“映像”或包，在那里我们不必担心NEO节点、网络、依赖性和任何预配置。这是为我们写出来的docker图像，我们需要做的就是下载并运行它！</p><p id="7a68" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">不过，让我们花点时间来理解我们特定的Docker形象。它包含4个<a class="ae jp" href="http://docs.neo.org/en-us/basic/consensus/consensus.html" rel="noopener ugc nofollow" target="_blank">近地天体共识节点</a>，这是建立一个工作的近地天体网络所需的最少节点，通过端口30333-30336 TCP进行内部通信。然后，我们将通过操纵我们的AWS安全组向外界公开<a class="ae jp" href="http://docs.neo.org/en-us/node/introduction.html" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv"> testNet </strong>通信端口</a>(20331–20334)。</p><p id="2f28" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">查看<a class="ae jp" href="https://cityofzion.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="it hv">锡安公民</strong> </a>，这是一个与NEO合作的开源社区。这是他们的Docker图像<a class="ae jp" href="https://github.com/CityOfZion/neo-privatenet-docker" rel="noopener ugc nofollow" target="_blank">源代码</a>，如果你想看看的话！</p></div><div class="ab cl jq jr hc js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hn ho hp hq hr"><p id="59e6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过安全shell进入您的亚马逊Linux实例后，我们将安装Docker …</p><p id="f1f8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">第一步:</strong>安装Docker</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="bc88" class="kg kh hu kc b fv ki kj l kk kl">sudo yum update -y<br/>sudo yum install -y docker<br/>sudo service docker start<br/>sudo usermod -a -G docker ec2-user</span></pre><p id="7c10" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">步骤2: </strong>检查并部署我们的Docker NEO网络映像</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="db3b" class="kg kh hu kc b fv ki kj l kk kl">docker info #just a check<br/>docker pull cityofzion/neo-privatenet</span><span id="0fcd" class="kg kh hu kc b fv km kj l kk kl">docker run --rm -d --name neo-privatenet --expose=20331-20334 --expose=30333-30336 -p 20333-20336:20333-20336/tcp -p 30333-30336:30333-30336/tcp cityofzion/neo-privatenet</span></pre><p id="e7dc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">检查您的映像是否正在运行！<code class="eh kn ko kp kc b">docker ps</code></p><figure class="jx jy jz ka fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="fe ff kq"><img src="../Images/d21ae28f11f0842e67c491e5c2a98abf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dlV0Y0QIH-O_3hJU6brKOQ.png"/></div></div></figure><p id="0ad6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">步骤3: </strong>将端口30331–30334添加到您的安全组</p><p id="7163" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">登录AWS控制台，<em class="ky">服务</em> &gt; <em class="ky"> EC2。</em>在<em class="ky">网络&amp;安全</em>下，点击<em class="ky">安全组</em>。在分配给实例的安全组上单击<em class="ky">编辑</em>。创建以下<strong class="it hv">入站</strong>规则:</p><figure class="jx jy jz ka fq kr fe ff paragraph-image"><div role="button" tabindex="0" class="ks kt di ku bf kv"><div class="fe ff kz"><img src="../Images/9adf90540391810ae233a75c978718b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tVZ5QcyocVX5No1SCup-9A.png"/></div></div></figure><p id="1d86" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">*这些规则立即适用！</p><p id="82b6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">第四步:</strong>从你的<strong class="it hv"> neo-prompt </strong>连接！</p><p id="f65e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在本地打开命令提示符:</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="3a85" class="kg kh hu kc b fv ki kj l kk kl">ubuntu<br/>sudo -i</span><span id="288d" class="kg kh hu kc b fv km kj l kk kl">cd &lt;location of neo-python&gt;<br/>source venv/bin/activate</span></pre><p id="8717" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">还记得我们在上一篇文章中是如何记下公共IP的吗？让我们在这里使用它:</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="546c" class="kg kh hu kc b fv ki kj l kk kl">np-prompt -p &lt;server IP&gt;</span></pre><p id="f631" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">太好了！我们完了！</p></div><div class="ab cl jq jr hc js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hn ho hp hq hr"><p id="dd88" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">奖励命令</strong>:重启NEO区块链。</p><p id="e4db" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">根据我们的经验，由于服务器内存的限制，您的映像将需要每周重新启动。这样做的命令如下:</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="31ec" class="kg kh hu kc b fv ki kj l kk kl">docker stop neo-privatenet</span></pre><p id="d744" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后在你自己的np-prompt (Ubuntu)上使用以下命令:</p><pre class="jx jy jz ka fq kb kc kd ke aw kf dt"><span id="da0c" class="kg kh hu kc b fv ki kj l kk kl">rm -rf /root/.neopython/Chains/</span></pre></div><div class="ab cl jq jr hc js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="hn ho hp hq hr"><p id="3f10" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">像往常一样，我会大声喊出我的项目:<a class="ae jp" href="https://nodis.io" rel="noopener ugc nofollow" target="_blank"> Nodis.io </a>是一个面向当地企业的营销平台，通过小型活动产生参与度，并向用户奖励加密货币，他们以后可以在这些商店消费。看看我们，并在<a class="ae jp" href="https://www.instagram.com/nodis.io/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>和<a class="ae jp" href="https://www.facebook.com/NodisGetNoticed/" rel="noopener ugc nofollow" target="_blank">脸书</a>上给我们反馈！</p><p id="6a0d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">下周指南:</strong>部署NEP-5智能合同(第1部分)</p><figure class="jx jy jz ka fq kr"><div class="bz el l di"><div class="la lb l"/></div></figure></div></div>    
</body>
</html>