<html>
<head>
<title>🚘 Traveling the ML. Next hop: step by step guide to recognize drivable area</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🚘在大联盟旅行。下一跳:逐步引导识别可驾驶区域</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/traveling-the-ml-next-hop-step-by-step-guide-to-recognize-drivable-area-f48c1e1bb76d?source=collection_archive---------9-----------------------#2018-09-13">https://medium.com/hackernoon/traveling-the-ml-next-hop-step-by-step-guide-to-recognize-drivable-area-f48c1e1bb76d?source=collection_archive---------9-----------------------#2018-09-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="4a36" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们很自豪地发布“监管下的乡村道路”数据集，分享我们的研究，作为如何为可驾驶区域建立语义分段模型的教程，并提供<a class="ae jp" href="https://github.com/supervisely/supervisely/tree/master/tutorials/02_unet_inference" rel="noopener ugc nofollow" target="_blank">源代码</a>，以便您将了解如何与<a class="ae jp" href="https://supervise.ly/" rel="noopener ugc nofollow" target="_blank">监管下</a>建立、下载和使用自定义模型。所以你也可以很容易地复制下面的所有步骤。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/2183882a46201317477cb4492cdfe3ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A7UNA6Vn-C_Y-5QN3CW5QQ.png"/></div></div></figure><h2 id="4fb8" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated">动机</h2><p id="6e7c" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">自动驾驶行业今天非常庞大，公司投资硬件、软件和标记的数据。不仅是自动驾驶汽车，还有机器人——送东西的快递员、道路质量检测和其他应用程序。</p><p id="78d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这篇文章的主要目的是为自动驾驶行业最常见的任务——可驾驶区域识别——提供尽可能最快的指导。</p><p id="498f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">我们想要的是……</strong></p><ul class=""><li id="a711" class="lc ld hu it b iu iv iy iz jc le jg lf jk lg jo lh li lj lk dt translated">获取训练数据，在数据转换/处理程序上花费尽可能少的时间</li><li id="7690" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">选择一个模型，像网络一样的东西，训练并运行它</li><li id="c8e5" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">在jupyter笔记本中可视化结果</li><li id="efdd" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">作业:通过利用公共数据集和更复杂的神经网络架构，尝试改进我们最初的解决方案</li></ul><p id="93fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">我们不想要的是… </strong></p><ul class=""><li id="e276" class="lc ld hu it b iu iv iy iz jc le jg lf jk lg jo lh li lj lk dt translated">花几个小时下载几十亿字节的带注释的图像，并将它们从一种格式转换成另一种格式</li><li id="890c" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">了解数据格式吗</li><li id="e58f" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated">尝试各种github repos，直到我们找到正确的一个——实际工作的语义分段模型的实现</li></ul><p id="f0a0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">既然我们的偏好已经定义好了，让我们考虑解决这个任务的整体方法。有两个重要的挑战需要应对:</p><ol class=""><li id="38f8" class="lc ld hu it b iu iv iy iz jc le jg lf jk lg jo lq li lj lk dt translated">在一个环境中完成整个研究是非常理想的。在这种情况下，将没有必要做不必要的数据转换，并在不同的工具和github repos之间切换</li><li id="d02d" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lq li lj lk dt translated">虽然我们可以使用公共数据集(城市景观或地图)来提取可驾驶区域分割掩膜，但我们的数据集最好是轻量级、简单易用的。</li></ol><p id="7578" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">因此，在<a class="ae jp" href="https://supervise.ly/" rel="noopener ugc nofollow" target="_blank"> Supervise.ly </a>平台内完成所有工作解决了第一个挑战。为了解决第二个问题，我们发布了“超级乡村公路”数据集。</p><p id="faa0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">本教程的所有步骤都将在没有任何编码的监督下完成。高级计划如下:您将向您的帐户添加“超级乡村道路”数据集，使用DTL(数据转换语言)创建增强的训练数据集，训练NN并将其应用于测试图像，然后您可以下载NN权重并在<a class="ae jp" href="https://github.com/supervisely/supervisely/tree/master/tutorials/02_unet_inference" rel="noopener ugc nofollow" target="_blank"> jupyter笔记本</a>中运行推理。</p><p id="0dcf" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们开始吧！</p><h2 id="c494" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated">第一步。将“超级乡村公路”数据集添加到您的帐户。</h2><p id="093f" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">城市景观和地图数据集主要是关于城市环境的。但是有很多情况下，自动驾驶汽车必须在乡村道路上行驶:自动收割机、卡车和农业机器人。不能直接使用上述数据集执行此任务的另一个原因是，许多类(如“路肩”)被标记为中性。这导致对乡村道路上可行驶区域的不准确预测。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div class="fe ff lr"><img src="../Images/a7238edd3c041deb6a4d54f7ff42d804.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*-Uah9905LaEwYemK_cMx4A.png"/></div></figure><p id="8df2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们在<a class="ae jp" href="https://deepsystems.ai" rel="noopener ugc nofollow" target="_blank"> DeepSystems </a>有一个关于这个主题的项目，我们很高兴与社区分享我们的内部数据集和一些实验。我们相信这一贡献将对许多研究人员有用。我们发布了1000张带标签的图片和500张测试图片。我们试图保留标签图像的多样性<em class="ls"> </em>。</p><p id="add0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要获取该数据集，只需进入“导入”-&gt;“数据集库”页面，选择“监管乡村道路”数据集，并将结果项目的名称定义为“乡村道路标签”。仅此而已。</p><p id="1681" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">以下是一些带有标签的图片示例:</p><div class="jr js jt ju fq ab cb"><figure class="lt jv lu lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/6f3cfdd8c0b3aeaa40701cc1d37a3b07.png" data-original-src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*9tbBJrs4FFLRavvtIR4HIg.png"/></div></figure><figure class="lt jv lz lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/574612b7f51c708cbf96392b93574849.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*bqk0UJB8qjVVMwxYEPb8jA.png"/></div></figure><figure class="lt jv lz lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/105c0efbcdc6b87d3c2b2dc974f5fdd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*9I4KAkgdXzgXPbsA5Li0iQ.png"/></div></figure></div><h2 id="5fd6" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated">第二步。准备训练数据集</h2><p id="e977" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">在Supervisely里面我们有一个特殊的模块叫做DTL(数据转换语言)。它允许合并数据集，进行类映射，过滤对象和图像，当然还可以对数据进行各种扩展。</p><p id="9317" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你只需要把数据操作堆在一起。因此，你可以建立自定义的计算图形(类比是神经网络层的图形)，每个你的图像和它的注释将通过这个图形，结果将被保存到新的项目。在大多数情况下，自动增强会显著提高精确度。</p><p id="ccf6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们为您准备了DTL查询。只需进入“DTL”页面，复制并粘贴json文件(<a class="ae jp" href="https://github.com/supervisely/supervisely/blob/master/tutorials/02_unet_inference/dtl_for_training.json" rel="noopener ugc nofollow" target="_blank">链接到github </a>)，然后按“开始”按钮。作为DTL查询的结果，将创建具有12k图像的新项目。它将包含原始图像，翻转版本，以及其他一些增强:随机作物，亮度，对比度和颜色转换，以及模糊。这个例子说明了使用我们的平台准备训练数据集是多么简单快捷。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff ma"><img src="../Images/e267ff83ff7814bf25cd368a248c0866.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O7YSMlo6AAxWrp67zmZ61g.png"/></div></div></figure><p id="aaaa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您将在下面找到应用转换的详细描述。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mb"><img src="../Images/4bac86e5e20a512f8e04043edacbb2b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ime0h1Fu9qJ3aGVduRnPRA.png"/></div></div></figure><h2 id="b4f9" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated">第三步。用于语义分割训练神经网络</h2><p id="b50b" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">在训练NN之前，你必须将带有GPU的计算机连接到你的帐户。转到“集群”页面，然后单击“添加节点”按钮。然后在你的计算机上执行以下命令。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mc"><img src="../Images/f754abc9a6e5261becabd922e9455937.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1vfkV6tR7WmqRBw9K-jIUg.png"/></div></div></figure><p id="d4fe" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Docker图像将被拉，并且超级代理(我们的任务管理器)将在您的计算机上启动。它会自动连接您的PC到您的帐户，您将能够使用您的GPU进行所有NN相关的任务(训练/推理/部署)。源代码也可以在我们的<a class="ae jp" href="https://github.com/supervisely/supervisely" rel="noopener ugc nofollow" target="_blank">公共git repo </a>中获得。</p><p id="1902" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们训练分割神经网络来识别可驾驶区域。只需进入“神经网络”-&gt;“模型动物园”页面，选择“UNet V2 (VGG重量)”并点击“添加模型”按钮。此型号将添加到您的帐户中。然后单击模型附近的“Train”按钮，选择训练项目“training_01”，将结果NN(最新检查点)的名称定义为“nn_roads”，从模板中选择训练配置(从模型动物园添加模型后，它会自动添加)，然后按“Start training”按钮。在我们有大量截图的文档中找到例子<a class="ae jp" href="https://docs.supervise.ly/neural-networks/examples/unet_lemon/" rel="noopener ugc nofollow" target="_blank">在这里</a>。</p><p id="98aa" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">训练后，模型“nn_roads”将出现在您的模型列表中。在培训期间，您可以实时监控指标:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff md"><img src="../Images/417d63b6fbe596a283e9fc44361fd00b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gmN-VSTNZZEa8Me6Fdup-w.png"/></div></div></figure><h2 id="2bcd" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated">第四步。可视化预测</h2><p id="2612" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">让我们将测试图像从“导入”-&gt;“数据集库”-&gt;“监督乡村道路[测试]”添加到您的帐户，作为项目“乡村道路测试”。</p><p id="cc01" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，您可以按下模型(您刚刚训练过的模型)旁边的“测试”按钮，选择“country_roads_test”项目，定义将包含测试图像和神经网络预测的结果项目的名称，然后按下“开始推断”按钮。以下是对测试图像进行神经网络预测的几个例子:</p><div class="jr js jt ju fq ab cb"><figure class="lt jv me lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/3df3a5b97f737a5b9c8c33184b83aced.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/0*R4L-wbg5-SVTh9yF.png"/></div></figure><figure class="lt jv me lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/9a727a78c006c8f20498e3a2986cf74e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/0*wALAEpG4BEL4jEKo.png"/></div></figure></div><div class="ab cb"><figure class="lt jv me lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/0a10378deb05325008b9e8b3d4ad9513.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/0*2nOGKxw5DFYH_jXM.png"/></div></figure><figure class="lt jv me lv lw lx ly paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><img src="../Images/b097b63ef300935316c0c486b08f9c5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/0*dkBAmxa2jnVac21p.png"/></div></figure></div><h2 id="04db" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated"><strong class="ak">第五步。下载最终模型并以您想要的方式使用它(例如jupyter笔记本)</strong></h2><p id="f6fb" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">这个想法是，你可以使用Supervisely进行大量的研究实验，而不需要任何编码。但是如何在生产中使用模型呢？选项1。部署为API(我们在之前的<a class="ae jp" href="https://hackernoon.com/can-you-solve-a-person-detection-task-in-10-minutes-74fba061194c" rel="noopener ugc nofollow" target="_blank">文章</a>中描述了整个过程)。在本教程中，我们将向您展示另一种方式——选项2:您可以下载NN权重，然后使用我们的源代码在<a class="ae jp" href="https://github.com/supervisely/supervisely/blob/master/tutorials/02_unet_inference/src/02_unet_inference.ipynb" rel="noopener ugc nofollow" target="_blank"> jupyter笔记本</a>中运行它。笔记本包含推理的例子。</p><p id="ec8d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">默认情况下，模型存储在您的机器上。只需点击“上传到主管”按钮，然后点击“下载”按钮(<a class="ae jp" href="https://docs.supervise.ly/neural-networks/my-models/my-models/" rel="noopener ugc nofollow" target="_blank">链接到文档</a>)。因此，tar归档文件将被下载。</p><p id="1090" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这里是我们的github 的<a class="ae jp" href="https://github.com/supervisely/supervisely" rel="noopener ugc nofollow" target="_blank">链接，并附有本教程的示例。只需按照</a><a class="ae jp" href="https://github.com/supervisely/supervisely/tree/master/tutorials/02_unet_inference" rel="noopener ugc nofollow" target="_blank"> readme.md </a>中的说明操作即可(只需将模型解压到某个目录并运行docker容器即可)。</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff mf"><img src="../Images/f9d513078df6afd7d5d02a9ff28da96c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OCiTuGNp7Ap-AD8BDJxP_A.png"/></div></div></figure><h2 id="bf49" class="kc kd hu bd ke kf kg kh ki kj kk kl km jc kn ko kp jg kq kr ks jk kt ku kv kw dt translated">结论</h2><p id="9165" class="pw-post-body-paragraph ir is hu it b iu kx iw ix iy ky ja jb jc kz je jf jg la ji jj jk lb jm jn jo hn dt translated">在这篇文章中，我们展示了如何从头开始构建可驾驶的区域分割模型。</p><p id="fad9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">虽然，这项任务让你了解了自动驾驶公司正在做什么，但生产就绪型解决方案需要克服更多挑战。</p><ul class=""><li id="d5bb" class="lc ld hu it b iu iv iy iz jc le jg lf jk lg jo lh li lj lk dt translated"><strong class="it hv">来自不同数据集的多类对象。</strong>在更复杂的场景中，我们必须建立一个能够分割多类对象的模型，如汽车、行人、自行车、路标等。实际上，构建“多类数据集”需要时间&amp;努力，因为需要标注/合并/过滤/清理来自不同来源的数据。</li><li id="6e2c" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated"><strong class="it hv">阶层失衡问题。</strong>在多类设置中，一些对象被低估。例如，在道路场景中，自行车远没有汽车频繁出现。这使得训练一个神经网络来实现对稀有类对象的所需精度水平变得具有挑战性。</li><li id="8071" class="lc ld hu it b iu ll iy lm jc ln jg lo jk lp jo lh li lj lk dt translated"><strong class="it hv">持续模型改进。</strong>生产级解决方案应稳定，能够以适当的方式识别“边缘情况”图像。因此，我们需要首先识别这些“边缘情况”图像，然后标记它们，最后重新训练模型。所描述的过程是连续的，有时被称为主动学习。尽可能自动化是非常可取的。</li></ul><p id="bd6f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如有任何问题，欢迎在我们的公共<a class="ae jp" href="https://supervise.ly/slack" rel="noopener ugc nofollow" target="_blank">松弛</a>中提问。我们很乐意帮助您！</p></div><div class="ab cl mg mh hc mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="hn ho hp hq hr"><p id="b319" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们将在接下来的帖子中解决上述挑战。同时，如果你觉得这篇文章有趣，给它一些👏，让更多的人可以看到它！</p></div></div>    
</body>
</html>