<html>
<head>
<title>Personal Assistant Kino Part 4 — Smart Feed</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">个人助理Kino第4部分—智能提要</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/personal-assistant-kino-part-4-smart-feed-b9e4cab966?source=collection_archive---------24-----------------------#2018-09-13">https://medium.com/hackernoon/personal-assistant-kino-part-4-smart-feed-b9e4cab966?source=collection_archive---------24-----------------------#2018-09-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="0c7d" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">Kino是一个通过量化的自我来了解自己的项目，将事情自动化以重复并提高生活质量。</p></blockquote><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="fe ff jt"><img src="../Images/a9a2803b8d84a000387d4433b6f188a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qkvy2SSP_Tl3VE__.gif"/></div></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">From : <a class="ae kj" href="http://quantifiedself.com/" rel="noopener ugc nofollow" target="_blank">http://quantifiedself.com/</a></figcaption></figure><p id="051a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">Kino系列列表</p><ul class=""><li id="82c5" class="kn ko hu ix b iy iz jc jd kk kp kl kq km kr js ks kt ku kv dt translated"><a class="ae kj" href="https://chatbotslife.com/personal-assistant-kino-part-1-overview-496b97de4afd" rel="noopener ugc nofollow" target="_blank">个人助理Kino第1部分—概述</a></li><li id="7ee8" class="kn ko hu ix b iy kw jc kx kk ky kl kz km la js ks kt ku kv dt translated"><a class="ae kj" href="https://chatbotslife.com/personal-assistant-kino-part-2-skill-scheduler-3cf25070fe8e" rel="noopener ugc nofollow" target="_blank">私人助理Kino Part 2——技能&amp;调度器</a></li><li id="8805" class="kn ko hu ix b iy kw jc kx kk ky kl kz km la js ks kt ku kv dt translated"><a class="ae kj" href="https://hackernoon.com/personal-assistant-kino-part-3-t3-d078b65462be" rel="noopener ugc nofollow" target="_blank">个人助理Kino第3部分— T3 </a></li><li id="d362" class="kn ko hu ix b iy kw jc kx kk ky kl kz km la js ks kt ku kv dt translated"><a class="ae kj" rel="noopener" href="/@humanbrain.djlee/personal-assistant-kino-part-4-smart-feed-b9e4cab966">个人助理Kino第4部分—智能馈送</a></li></ul></div><div class="ab cl lb lc hc ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hn ho hp hq hr"><p id="8e75" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">在上一集，我们看了任务管理器的功能，它可以自动记录和报告任务。今天我要讲的是<strong class="ix hv">智能饲料</strong>。</p><h1 id="71c9" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">简单讯息聚合订阅</h1><p id="7214" class="pw-post-body-paragraph iu iv hu ix b iy mg ja jb jc mh je jf kk mi ji jj kl mj jm jn km mk jq jr js hn dt translated">rss指的是使用许多网站提供的RSS发布新文章时要通知的网络提要。我将简单介绍一下RSS。</p><blockquote class="ir is it"><p id="cc9c" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated"><strong class="ix hv"> RSS </strong> ( <strong class="ix hv">丰富的站点摘要</strong>；原<a class="ae kj" href="https://en.wikipedia.org/wiki/Resource_Description_Framework" rel="noopener ugc nofollow" target="_blank"> <strong class="ix hv"> RDF </strong> </a> <strong class="ix hv">站点概要</strong>；通常被称为<strong class="ix hv">真正简单的聚合</strong>)是一种<a class="ae kj" href="https://en.wikipedia.org/wiki/Web_feed" rel="noopener ugc nofollow" target="_blank">网络订阅源</a><a class="ae kj" href="https://en.wikipedia.org/wiki/RSS#cite_note-Netsc99-2" rel="noopener ugc nofollow" target="_blank">【2】</a>允许用户以标准化的、计算机可读的格式访问<a class="ae kj" href="https://en.wikipedia.org/wiki/Online_content" rel="noopener ugc nofollow" target="_blank">在线内容</a>的更新。<br/> —来自维基</p></blockquote><p id="a293" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">基本上很多网站都提供RSS。有很多服务使用这个。其中一个是名为<a class="ae kj" href="https://feedly.com/" rel="noopener ugc nofollow" target="_blank"> Feedly </a>的服务。如果你注册了经常看的网站，你就可以很容易地查看新文章。我很好地使用了这项服务，但它并不支持我想要的所有功能。</p><h1 id="3c07" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">口袋</h1><p id="40d3" class="pw-post-body-paragraph iu iv hu ix b iy mg ja jb jc mh je jf kk mi ji jj kl mj jm jn km mk jq jr js hn dt translated">而我用的另一个服务是<a class="ae kj" href="https://getpocket.com/" rel="noopener ugc nofollow" target="_blank">口袋</a>。这个服务做的很简单。</p><blockquote class="ir is it"><p id="4aa2" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">当你找到你以后想看的东西时，把它放在口袋里。<br/> —口袋</p></blockquote><p id="43e4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">如果你有一篇文章想以后看，你可以把它放在口袋里。我经常把看起来有趣的文章放在口袋里。然后我会阅读它，如果它真的很好，我会把它移到最喜欢的类别。</p></div><div class="ab cl lb lc hc ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hn ho hp hq hr"><h1 id="8b42" class="li lj hu bd lk ll ml ln lo lp mm lr ls lt mn lv lw lx mo lz ma mb mp md me mf dt translated">智能订阅源</h1><p id="f951" class="pw-post-body-paragraph iu iv hu ix b iy mg ja jb jc mh je jf kk mi ji jj kl mj jm jn km mk jq jr js hn dt translated">我想自动化我的模式，检查新文章，把它们放在口袋里，仔细阅读，并转移到最喜欢的类别。这就是为什么创造了智能饲料功能。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div class="fe ff mq"><img src="../Images/37adbbf496ea11f5a5bdf3a7a4adbe67.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/0*JBUZDtWwktU4K_Ne.jpg"/></div></figure><p id="4d85" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">首先，这个函数需要RSS urls。因此，它可以读取RSS并获得一篇新文章，您会得到通知。所以我做了一个<a class="ae kj" href="https://github.com/DongjunLee/awesome-feeds" rel="noopener ugc nofollow" target="_blank">牛逼-feeds </a>库。我以为用Git管理我喜欢的网站的RSS会很方便，我想用很多好的RSS做牛逼系列。</p><p id="b1e1" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">现在RSS已经准备好了，只要让我知道最新的文章什么时候发表就行了！<br/>我在这里使用了<a class="ae kj" href="https://github.com/kurtmckee/feedparser" rel="noopener ugc nofollow" target="_blank"> feedparser </a>。</p><pre class="ju jv jw jx fq mr ms mt mu aw mv dt"><span id="08a3" class="mw lj hu ms b fv mx my l mz na">f <strong class="ms hv">=</strong> feedparser<strong class="ms hv">.</strong>parse(feed_url)</span><span id="b0c0" class="mw lj hu ms b fv nb my l mz na">f<strong class="ms hv">.</strong>entries <strong class="ms hv">=</strong> sorted(<br/>    f<strong class="ms hv">.</strong>entries, key<strong class="ms hv">=lambda</strong> x: x<strong class="ms hv">.</strong>get("updated_parsed", 0), reverse<strong class="ms hv">=</strong>True<br/>)</span><span id="765b" class="mw lj hu ms b fv nb my l mz na"><em class="iw"># get Latest Feed</em><br/>noti_list <strong class="ms hv">=</strong> []<br/><strong class="ms hv">if</strong> feed_url <strong class="ms hv">in</strong> cache_data:<br/>    previous_update_date <strong class="ms hv">=</strong> arrow<strong class="ms hv">.</strong>get(cache_data[feed_url])<br/>    <strong class="ms hv">for</strong> e <strong class="ms hv">in</strong> f<strong class="ms hv">.</strong>entries:<br/>        e_updated_date <strong class="ms hv">=</strong> arrow<strong class="ms hv">.</strong>get(e<strong class="ms hv">.</strong>updated_parsed)<br/>        <strong class="ms hv">if</strong> e_updated_date <strong class="ms hv">&gt;</strong> previous_update_date:<br/>            noti_list<strong class="ms hv">.</strong>append(self<strong class="ms hv">.</strong>__make_entry_tuple(category, e, feed_name))</span></pre><p id="6b31" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">调度功能可以指定功能的调度，如<a class="ae kj" href="https://chatbotslife.com/personal-assistant-kino-part-2-skill-scheduler-3cf25070fe8e" rel="noopener ugc nofollow" target="_blank">第二部分技能&amp;调度器</a>中所述。每分钟检查一次提要是很大的开销。我测试的时候觉得间隔20分钟就够了。</p><pre class="ju jv jw jx fq mr ms mt mu aw mv dt"><span id="c016" class="mw lj hu ms b fv mx my l mz na"><strong class="ms hv">def</strong> <strong class="ms hv">__excute_feed_schedule</strong>(self, interval):<br/>    schedule<strong class="ms hv">.</strong>every(interval)<strong class="ms hv">.</strong>minutes<strong class="ms hv">.</strong>do(<br/>        self<strong class="ms hv">.</strong>__run_threaded,<br/>        self<strong class="ms hv">.</strong>function_runner,<br/>        {<br/>            "repeat": True,<br/>            "func_name": "feed_notify",<br/>            "params": {},<br/>            "day_of_week": [0],<br/>            "not_holiday": False,<br/>        },<br/>    )</span></pre><p id="0721" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">现在Kino可以通知最新的RSS提要了。它已经很有用了，但是有一个功能我想更进一步。自动保存我已经信任放在我的口袋里的文章！</p><p id="e6d4" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">它需要与Pocket连接，使用简单的分类算法可以使它更加智能。机器学习最重要的是<strong class="ix hv">数据</strong>。这些数据可以用原始日志创建。首先，您可以查看所有的文本通知您与饲料功能作为整个数据。如果只有存储在口袋中的文本被赋予值1，则整个数据被分成<em class="iw">感兴趣的文本</em> /不感兴趣的文章<em class="iw"/>。此外，如果你给出文章的类别或网站名称作为信息，你可以创建一个简单而有用的<strong class="ix hv">决策树</strong>。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div class="fe ff nc"><img src="../Images/d292638d74b3e88cabf853579137245c.png" data-original-src="https://miro.medium.com/v2/resize:fit:766/0*juDFmeEL2NRiVPgR.gif"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Decision Tree From <a class="ae kj" href="http://ccg.doc.gold.ac.uk/" rel="noopener ugc nofollow" target="_blank">http://ccg.doc.gold.ac.uk/</a></figcaption></figure><p id="c012" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">例如，当一篇新文章发表在谷歌人工智能博客网站上时，如果我总共看到了五篇这样的文章，并且我已经将其中四篇保存在Pocket中，那么它也可以被视为感兴趣的内容。</p><p id="21e8" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">您可以通过<a class="ae kj" href="http://scikit-learn.org/" rel="noopener ugc nofollow" target="_blank"> scikit-learn </a>轻松使用决策树。</p><pre class="ju jv jw jx fq mr ms mt mu aw mv dt"><span id="b8e6" class="mw lj hu ms b fv mx my l mz na"><strong class="ms hv">class</strong> <strong class="ms hv">FeedClassifier</strong>:<br/>    <strong class="ms hv">def</strong> <strong class="ms hv">__init__</strong>(self):<br/>        train_X <strong class="ms hv">=</strong> FeedData()<strong class="ms hv">.</strong>train_X<br/>        train_y <strong class="ms hv">=</strong> FeedData()<strong class="ms hv">.</strong>train_y<br/>        <br/>        model <strong class="ms hv">=</strong> tree<strong class="ms hv">.</strong>DecisionTreeClassifier()<br/>        model<strong class="ms hv">.</strong>fit(train_X, train_y)  <em class="iw"># Training</em><br/>        self<strong class="ms hv">.</strong>clf <strong class="ms hv">=</strong> model</span><span id="5380" class="mw lj hu ms b fv nb my l mz na">    <strong class="ms hv">def</strong> <strong class="ms hv">predict</strong>(self, link, category):<br/>        result <strong class="ms hv">=</strong> self<strong class="ms hv">.</strong>clf<strong class="ms hv">.</strong>predict(category_id)[0]<br/>        <strong class="ms hv">if</strong> result <strong class="ms hv">==</strong> FeedDataLoader<strong class="ms hv">.</strong>TRUE_LABEL:<br/>            <strong class="ms hv">...</strong><br/>        <strong class="ms hv">else</strong>:<br/>            <strong class="ms hv">...</strong></span></pre><h1 id="bb00" class="li lj hu bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf dt translated">在线学习</h1><p id="d739" class="pw-post-body-paragraph iu iv hu ix b iy mg ja jb jc mh je jf kk mi ji jj kl mj jm jn km mk jq jr js hn dt translated">接下来重要的是<strong class="ix hv">在线学习</strong>。我放在口袋里的rss提要那时会改变。作为响应，模型还必须检测这些变化，并用最新的信息做出判断。使用的方法是在线学习。</p><blockquote class="ir is it"><p id="f9da" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">通过不断向模型应用新数据，使模型保持最新</p></blockquote><p id="388b" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">Kino的智能饲料通过这种方式变得越来越智能。通过创建如下循环，在线学习是可能的。</p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="fe ff nd"><img src="../Images/f7c203399b22abbd54182e21a0523449.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*oEd8jvuN4w2AqdPH.png"/></div></div></figure><ol class=""><li id="87d0" class="kn ko hu ix b iy iz jc jd kk kp kl kq km kr js ne kt ku kv dt translated"><strong class="ix hv">记录:</strong> <br/>通知饲料的所有数据，其中饲料放入口袋</li><li id="b704" class="kn ko hu ix b iy kw jc kx kk ky kl kz km la js ne kt ku kv dt translated"><strong class="ix hv">数据处理:</strong> <br/>解析日志，用类别、标题、日期、链接等进行处理。<br/>并添加标签。(0:不放入口袋/ 1:放入口袋)</li><li id="dbac" class="kn ko hu ix b iy kw jc kx kk ky kl kz km la js ne kt ku kv dt translated"><strong class="ix hv">模型:</strong> <br/>将准备好的数据拟合到模型中。(培训)</li><li id="35c7" class="kn ko hu ix b iy kw jc kx kk ky kl kz km la js ne kt ku kv dt translated"><strong class="ix hv">预测:</strong> <br/>利用训练好的模型，确定新饲料是否放入口袋。然后，为模型的错误预测提供反馈，以便存储正确的标签。</li></ol><p id="de15" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">如果实时学习是一个瓶颈，那么可以每天重新学习一次。</p></div><div class="ab cl lb lc hc ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="hn ho hp hq hr"><h1 id="51b9" class="li lj hu bd lk ll ml ln lo lp mm lr ls lt mn lv lw lx mo lz ma mb mp md me mf dt translated">结论</h1><p id="292e" class="pw-post-body-paragraph iu iv hu ix b iy mg ja jb jc mh je jf kk mi ji jj kl mj jm jn km mk jq jr js hn dt translated">这是<strong class="ix hv">智能进纸</strong>功能。非常简单，但是非常有用的函数。现在，更复杂的预测，因为它仅仅基于放在口袋里的数。<br/>在<a class="ae kj" href="https://hackernoon.com/tagged/future" rel="noopener ugc nofollow" target="_blank">未来</a>中，我将尝试预测是否是我感兴趣的提要，作为<em class="iw">文本分类</em>问题，按标题或简介。就<em class="iw">文本摘要</em>而言，它或许能很快为我创建一个提要。我认为智能饲料功能的发展潜力是开放的。让我们收集大量数据，用深度<a class="ae kj" href="https://hackernoon.com/tagged/learning" rel="noopener ugc nofollow" target="_blank">学习</a>模型代替！</p><p id="f67d" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kk jh ji jj kl jl jm jn km jp jq jr js hn dt translated">所有代码都可以在这里找到<a class="ae kj" href="https://github.com/DongjunLee/kino-bot" rel="noopener ugc nofollow" target="_blank">。任何帮助Kino变得更聪明的人总是受欢迎的:)</a></p><figure class="ju jv jw jx fq jy"><div class="bz el l di"><div class="nf ng l"/></div></figure></div></div>    
</body>
</html>