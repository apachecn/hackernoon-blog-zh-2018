<html>
<head>
<title>Sending email from Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从Python发送电子邮件</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/sending-email-from-python-ca1eea9577f?source=collection_archive---------7-----------------------#2018-09-15">https://medium.com/hackernoon/sending-email-from-python-ca1eea9577f?source=collection_archive---------7-----------------------#2018-09-15</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="02ab" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">我将展示如何使用你的Gmail账户用Python编程语言发送电子邮件。</h2></div><h1 id="0a29" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">电子邮件服务器</h1><p id="baf6" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">当你想从GUI/CLI应用程序或一些计算机语言(在这个例子中是<a class="ae kx" href="https://hackernoon.com/tagged/python" rel="noopener ugc nofollow" target="_blank"> Python </a>)发送<a class="ae kx" href="https://hackernoon.com/tagged/email" rel="noopener ugc nofollow" target="_blank">电子邮件</a>时，你需要访问邮件服务器。</p><p id="d733" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">邮件服务器是一台负责收发邮件的电脑。</p><p id="aa39" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">通常，您可以通过用户名和密码访问邮件服务器。</p><p id="4f57" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">Gmail用户名是您的电子邮件地址，密码应该只有您自己知道:-)。</p><h1 id="8ff6" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">使用yagmail</h1><p id="703a" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">使用Gmail帐户从Python发送电子邮件，我认为最好使用<a class="ae kx" href="https://github.com/kootenpv/yagmail" rel="noopener ugc nofollow" target="_blank"> yagmail </a> packet。</p><p id="ceef" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">你可以用<a class="ae kx" href="https://docs.python.org/3/library/smtplib.html" rel="noopener ugc nofollow" target="_blank"> smtplib </a>库浪费时间，但是如果你用的是Gmail账户，就用<a class="ae kx" href="https://github.com/kootenpv/yagmail" rel="noopener ugc nofollow" target="_blank"> yagmail </a>吧。</p><p id="c714" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">用<br/> <code class="eh ld le lf lg b">pipenv install yagmail</code>安装</p><h1 id="431c" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">代码示例</h1><p id="2808" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">这只是一个简单的代码示例，对于生产代码，不要将密码放在源代码中。</p><p id="3098" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">就我个人而言，我在每个项目中使用一个JSON文件(这个文件使用伪凭证提交给源代码控制)来存储我个人项目的用户名和密码。</p><p id="8791" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">这是一个简单的单行示例:</p><blockquote class="lh li lj"><p id="4c06" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">导入yagmail</p><p id="2da1" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag = yagmail。SMTP('YOUR_EMAIL@gmail.com '，' YOUR_PASSWORD ')。发送('发送到@someone.com '，'主题'，'这是正文')</p></blockquote><p id="24a4" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">yag = yagmail。SMTP('YOUR_EMAIL@gmail.com '，' YOUR_PASSWORD ')。发送('发送到@someone.com '，'主题'，'这是正文')</p><p id="a138" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">我通常是这样用的:</p><blockquote class="lh li lj"><p id="79ab" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">导入yagmail</p><p id="9816" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag = yagmail。SMTP('您的电子邮件@gmail.com '，'您的密码')</p><p id="4556" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">body = '我创造的庞大身躯'</p><p id="9454" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag.send('收件人@someone.com '，'主题'，正文)</p></blockquote><p id="7ecc" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">在邮件正文中添加图片，需要使用<code class="eh ld le lf lg b">yagmail.inline</code>:</p><blockquote class="lh li lj"><p id="7492" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">导入yagmail</p><p id="b3ac" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag = yagmail。SMTP('您的电子邮件@gmail.com '，'您的密码')</p><p id="983c" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">contents = ["Some Text "，YAG mail . inline(full _ path _ to _ image)]</p><p id="477c" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag.send(发送至，主题，内容)</p><p id="c1a2" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag = yagmail。SMTP('您的电子邮件@gmail.com '，'您的密码')</p><p id="dcff" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">contents = ["Some Text "，YAG mail . inline(full _ path _ to _ image)]</p><p id="732f" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">yag.send(发送至，主题，内容)</p></blockquote><h1 id="2601" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">我的建议和经验</h1><p id="cf9e" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">Gmail对你每天发送的邮件数量有限制。</p><p id="d678" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">在我写这篇文章的时候，每天有<a class="ae kx" href="https://support.google.com/mail/answer/22839?hl=en" rel="noopener ugc nofollow" target="_blank"> 500封电子邮件</a>，如果超过这个数字，你将无法在接下来的24小时内发送电子邮件(至少这发生在我身上，我已经连续发送了100封电子邮件)。</p><p id="8dcb" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">所以，我的建议是有一个单独的Gmail帐户，只是为了从你的代码自动发送电子邮件，你不想失去从你的个人电子邮件帐户发送电子邮件的能力(我在那里，这并不好笑)。</p><figure class="lp lq lr ls fq lt fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/03349e5f2cfb1c7619bf74cfb3c20db7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/0*Fp7Tpmo280l2j5uD"/></div></figure><p id="56da" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">此外，发送电子邮件之间会有一些延迟，当我的账户被锁定24小时时，我只连续发送了大约100封电子邮件，但在我添加了<code class="eh ld le lf lg b">time.sleep(15)</code>之后，我再也没有遇到过这个问题。</p><p id="ed20" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">我不是用Gmail给人发垃圾邮件，我是用它给自己发邮件报告，主要是来自网络抓取任务(每天大约20个)。</p><h2 id="45e0" class="lw jk hu bd jl lx ly lz jp ma mb mc jt kk md me jv ko mf mg jx ks mh mi jz mj dt translated">如果您遇到错误534</h2><blockquote class="mk"><p id="5c0a" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">文件“/usr/lib 64/python 3.6/smtplib . py”，第730行，在login raise last_exception文件“/usr/lib 64/python 3.6/smtplib . py”，第721行，在log in initial _ response _ ok = initial _ response _ ok)文件“/usr/lib 64/python 3.6/smtplib . py”，第642行，在auth raise SMTPAuthenticationError(code，resp) smtplib。SMTPAuthenticationError: (534，b ' 5 . 7 . 14&lt;https://accounts.google.com/signin/continue?sarp=1&amp;SCC = 1&amp;PLT = AKgnsbvo \ n 5 . 7 . 14 advphf 123 p 0 oetqxn-eqs-JNK 6 MEO 6 qrtmz 4c 4 rpyb 9j _ qmyzfls 8 ay F3 yjj sgcn 7 melq \ n 5 . 7 . 14 5 rpqd 9 sa qwhf h6 cjnujclyw 1 qldplpwbvocaqipf 8\n5.7.14了解更多信息，请访问\ n 5 . 7 . 14<a class="ae kx" href="https://support.google.com/mail/answer/78754" rel="noopener ugc nofollow" target="_blank">https://support.google.com/mail/answer/78754</a>204-v6sm 5976350 wmh . 25—GSM TP’)</p><p id="84fb" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">文件“/usr/lib 64/python 3.6/smtplib . py”，第730行，登录</p><p id="f7bf" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">文件“/usr/lib 64/python 3.6/smtplib . py”，第721行，登录</p><p id="bcec" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">初始响应确定=初始响应确定)</p><p id="aba6" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">文件“/usr/lib 64/python 3.6/smtplib . py”，第642行，在auth</p><p id="2ee5" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">引发SMTPAuthenticationError(代码，响应)</p><p id="9e5a" class="ml mm hu bd mn mo mp mq mr ms mt kw ek translated">smtplib。SMTPAuthenticationError: (534，b ' 5 . 7 . 14&lt;https://accounts.google.com/signin/continue?sarp=1&amp;SCC = 1&amp;PLT = AKgnsbvo \ n 5 . 7 . 14 advphf 123 p0oetqxn-eqs-JNK 6 MEO 6 qrtmz 4c 4 rpyb 9j _ qmyzfls 8 ay F3 yjjsgcn 7 melq \ n 5 . 7 . 14 5 rpqd 9 sa qwhf h6 cjnujclyw 1 qrldplppwbvocaqipf\n5.7.14了解更多信息，请访问\ n 5 . 7 . 14<a class="ae kx" href="https://support.google.com/mail/answer/78754" rel="noopener ugc nofollow" target="_blank">https://support.google.com/mail/answer/78754</a>204-v6sm 5976350 wmh . 25—GSM TP’)</p></blockquote><p id="a56d" class="pw-post-body-paragraph kb kc hu kd b ke mu iv kg kh mv iy kj kk mw km kn ko mx kq kr ks my ku kv kw hn dt translated">解决方案是</p><blockquote class="lh li lj"><p id="87fd" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">谷歌阻止不使用现代安全标准的应用程序的登录尝试(在其支持页面上提到)。但是，您可以通过以下链接打开/关闭此安全功能:</p><p id="a61f" class="kb kc lk kd b ke ky iv kg kh kz iy kj ll la km kn lm lb kq kr ln lc ku kv kw hn dt translated">进入此链接，选择打开https://www.google.com/settings/security/lesssecureapps<br/><a class="ae kx" href="https://www.google.com/settings/security/lesssecureapps" rel="noopener ugc nofollow" target="_blank"><em class="hu"/></a></p></blockquote><p id="7cf1" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated">出自:<br/><a class="ae kx" href="https://stackoverflow.com/a/26852782/2006674" rel="noopener ugc nofollow" target="_blank">https://stackoverflow.com/a/26852782/2006674</a></p><h1 id="b347" class="jj jk hu bd jl jm jn jo jp jq jr js jt ja ju jb jv jd jw je jx jg jy jh jz ka dt translated">结论</h1><p id="2777" class="pw-post-body-paragraph kb kc hu kd b ke kf iv kg kh ki iy kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">使用<a class="ae kx" href="https://github.com/kootenpv/yagmail" rel="noopener ugc nofollow" target="_blank"> yagmail </a>从Python发送电子邮件很容易。</p></div><div class="ab cl mz na hc nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="hn ho hp hq hr"><p id="d364" class="pw-post-body-paragraph kb kc hu kd b ke ky iv kg kh kz iy kj kk la km kn ko lb kq kr ks lc ku kv kw hn dt translated"><em class="lk">原载于2018年9月15日</em><a class="ae kx" href="http://buklijas.info/blog/2018/09/15/sending-email-from-python/" rel="noopener ugc nofollow" target="_blank"><em class="lk">buklijas . info</em></a><em class="lk">。</em></p><figure class="lp lq lr ls fq lt"><div class="bz el l di"><div class="ng nh l"/></div></figure></div></div>    
</body>
</html>