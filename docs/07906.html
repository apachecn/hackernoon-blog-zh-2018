<html>
<head>
<title>Create a Progressive Web App using Vue, Cosmic JS, and GraphQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Vue、Cosmic JS和GraphQL创建一个渐进式Web应用程序</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/create-a-progressive-web-app-using-vue-cosmic-js-and-graphql-e3cb86943210?source=collection_archive---------8-----------------------#2018-09-18">https://medium.com/hackernoon/create-a-progressive-web-app-using-vue-cosmic-js-and-graphql-e3cb86943210?source=collection_archive---------8-----------------------#2018-09-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/8b6b5be1f18ba484c7facd663bb4d511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AgRPN9iTk6JupYQfH_Mz1A.jpeg"/></div></div></figure><h2 id="6817" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">TL；速度三角形定位法(dead reckoning)</h2><ul class=""><li id="4614" class="ka kb hu kc b kd ke kf kg jn kh jr ki jv kj kk kl km kn ko dt translated"><a class="ae kp" href="https://cosmicjs.com/apps/vue-garage-sale" rel="noopener ugc nofollow" target="_blank"> Vue.js PWA演示</a></li><li id="aeb4" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated"><a class="ae kp" href="https://github.com/cosmicjs/vue-garage-sale" rel="noopener ugc nofollow" target="_blank"> Vue.js PWA源代码</a></li></ul><h2 id="3182" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">介绍</h2><p id="715d" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated"><a class="ae kp" href="https://www.npmjs.com/package/@vue/cli-plugin-pwa" rel="noopener ugc nofollow" target="_blank">渐进式网络应用</a> (PWA)将应用的外观和感觉与网站编程的简易性结合起来。这些尖端的应用程序使您的用户可以轻松访问您的内容，而活跃的用户会增加您的收入。快速加载是其特点之一。PWA的加载速度比移动网站更快，即使互联网可用性有限，也能确保您的用户始终拥有最佳体验。以下是主要功能:</p><ul class=""><li id="fdcf" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">随处访问</li><li id="2e49" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">直接部署</li><li id="cdf1" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">用SEO推广</li><li id="83b7" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">始终可用(即使脱机)</li><li id="d70b" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">轻松更新</li><li id="6503" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">安全可靠</li></ul><p id="885e" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">PWA最好的一点是，他们可以快速构建并快速进入市场，而无需处理任何手机本机代码或应用商店大战。</p><p id="6575" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">这个应用程序的灵感主要来自Offerup、Letgo和Craigslist。像Craigslist一样，LetGo允许你在本地买卖商品，这意味着你不必像在易贝或亚马逊那样处理运输的麻烦。拥有3000万用户，比OfferUp更受欢迎。LetGo最近出现在许多商业广告中，所以你可能也更熟悉它。唯一的问题是，这两个应用程序都是iPhone和Android平台上可用的移动应用程序，但没有PWA版本。所以让我们坐下来，看看我们是否可以利用PWA，Vue和Cosmic JS来建立一个。</p><h2 id="faaf" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">应用概述</h2><p id="c148" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">该应用程序包含三个主要功能:</p><ul class=""><li id="37cd" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">显示您所在地区的待售商品列表。在我们的情况下，这将是所有待售项目的画廊视图</li><li id="c4d6" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">能够搜索关键字并过滤图库视图中与搜索词匹配的项目</li><li id="86a9" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">能够点击一个项目的图像，并显示项目描述，卖家，更多的图像，并联系卖家…</li><li id="f8c1" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">添加新项目的能力。由于这个项目的范围，我没有建立这个功能，但这肯定可以增加一个有价值的补充。</li></ul><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/91ca7dc2080384c0abaf8b260b1b323f.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*eSHK_2yY3-9AHb7QP3G6iQ.png"/></div></figure><h2 id="be5b" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">启动您的Vue PWA应用程序</h2><p id="61e1" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">让我们卷起袖子开始建设吧。我们将从使用vue-cli命令创建项目开始。但是，如果您没有安装vue-cli，请遵循以下步骤。因此，打开您的终端窗口，键入以下内容:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="861e" class="jc jd hu ly b fv mc md l me mf">vue create garage-sale<br/># then select Manually...</span><span id="245a" class="jc jd hu ly b fv mg md l me mf">Vue CLI v3.0.0-rc.9<br/>┌───────────────────────────┐<br/>│  Update available: 3.0.0  │<br/>└───────────────────────────┘<br/>? Please pick a preset:<br/>  default (babel, eslint)<br/>❯ Manually select features</span><span id="ad97" class="jc jd hu ly b fv mg md l me mf"># Then select the PWA feature and the other ones with the spacebar<br/>? Please pick a preset: Manually select features<br/>? Check the features needed for your project:<br/> ◉ Babel<br/> ◯ TypeScript<br/>❯◉ Progressive Web App (PWA) Support<br/> ◉ Router<br/> ◉ Vuex<br/> ◯ CSS Pre-processors<br/> ◉ Linter / Formatter<br/> ◯ Unit Testing<br/> ◯ E2E Testing</span><span id="91bb" class="jc jd hu ly b fv mg md l me mf">? Pick a linter / formatter config:<br/>  ESLint with error prevention only<br/>  ESLint + Airbnb config<br/>❯ ESLint + Standard config<br/>  ESLint + Prettier</span><span id="d9ec" class="jc jd hu ly b fv mg md l me mf">? Pick additional lint features: (Press &lt;space&gt; to select, a to toggle all, i to invert selection)<br/>❯◉ Lint on save<br/> ◯ Lint and fix on commit</span><span id="afba" class="jc jd hu ly b fv mg md l me mf">🎉  Successfully created project barage-sale.<br/>👉  Get started with the following commands:</span><span id="2b57" class="jc jd hu ly b fv mg md l me mf">$ cd barage-sale<br/>$ npm run serve</span></pre></div><div class="ab cl mh mi hc mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="hn ho hp hq hr"><p id="260b" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">到目前为止，除了PWA选择步骤，这一步看起来像任何常规的Vue应用程序创建。感谢vue-cli，它在senes后面做了大量工作，并添加了服务人员选项，这是PWAs的一个主要功能。所以让我们继续，一步一步地添加我们的功能。</p><p id="7618" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我们还需要添加Vuetify，这将是我们的css框架。在使用Vuetify之前，我的大多数项目都使用Bootstrap，但是在尝试了Vuetify之后，我就迷上了它。在我看来，Vuetify提供了两大优势:</p><ul class=""><li id="02d8" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">与bootstrap相比，快速开发</li><li id="bd53" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">与Vue轻松集成</li></ul><p id="ac15" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">所以让我们把它添加到我们的项目中</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="76b4" class="jc jd hu ly b fv mc md l me mf">vue add vue-cli-plugin-vuetify<br/>? Use a pre-made template? (will replace App.vue and HelloWorld.vue) Yes<br/>? Use custom theme? No<br/>? Use a-la-carte components? Yes<br/>? Use babel/polyfill? Yes<br/>✔  Successfully invoked generator for plugin: vue-cli-plugin-vuetify</span></pre><p id="480e" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">还要注意，我在添加Vuetify时选择了<code class="eh mo mp mq ly b">use-a-la-carte</code>选项，因为我想定制它的一个组件，而且我不想从Vuetify导入所有组件。与导入所有Vuetify库相比，这将使文件更小。</p><h2 id="0d13" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">应用程序清单</h2><p id="530d" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">为了让移动设备知道您的应用程序支持PWA，您需要在<code class="eh mo mp mq ly b">manifest.json</code>文件中输入一些关于您的应用程序的信息。让我们来看看:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="c132" class="jc jd hu ly b fv mc md l me mf">{<br/>  "name": "garage-sale",<br/>  "short_name": "garage-sale",<br/>  "icons": [<br/>    {<br/>      "src": "/img/icons/android-chrome-192x192.png",<br/>      "sizes": "192x192",<br/>      "type": "image/png"<br/>    },<br/>    {<br/>      "src": "/img/icons/android-chrome-512x512.png",<br/>      "sizes": "512x512",<br/>      "type": "image/png"<br/>    }<br/>  ],<br/>  "start_url": "/",<br/>  "display": "standalone",<br/>  "background_color": "#000000",<br/>  "theme_color": "#4DBA87"<br/>}</span></pre><p id="3f26" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">首先，指定应用程序的名称，以及可用于应用程序快捷方式的图标。作为PWA应用程序，移动设备浏览器会在用户第一次访问您的网站时询问他们是否要安装您的应用程序。如果是，则快捷方式将被添加到移动设备主屏幕。同样值得注意的是，作为这个应用程序设置的一部分，你需要创建不同大小的图标，可以用于不同的移动设备。对我来说，我必须定义以下图标:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="2e28" class="jc jd hu ly b fv mc md l me mf">android-chrome-192x192.png<br/>android-chrome-512x512.png<br/>apple-touch-icon-120x120.png<br/>apple-touch-icon-152x152.png<br/>apple-touch-icon-180x180.png<br/>apple-touch-icon-60x60.png<br/>apple-touch-icon-76x76.png<br/>apple-touch-icon.png<br/>msapplication-icon-144x144.png<br/>mstile-150x150.png</span></pre><p id="4315" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">这是我的应用图标之一:</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff mr"><img src="../Images/e0eb431ae020a96f768e7b40ba13708d.png" data-original-src="https://miro.medium.com/v2/resize:fit:384/format:webp/1*_XnCmfvQkm5BcDoRHku3Ig.png"/></div></figure><h2 id="b4f3" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">添加应用程序组件、路由器和商店</h2><p id="355f" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">由于该应用程序将作为一个SPA(单页应用程序),我们需要添加路由器。对于我们的应用程序，我们只需要两条路线:</p><ul class=""><li id="75a0" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">主页:显示文章网格视图和搜索工具栏的地方</li><li id="626a" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">发布:这是项目详细信息视图，我们可以在其中看到项目详细信息</li></ul><p id="147f" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">因此，让我们打开终端窗口，并添加以下文件:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="c2e3" class="jc jd hu ly b fv mc md l me mf"># adding the vue components<br/>touch src/views/Home.vue<br/>touch src/components/PostGrid.vue<br/>touch src/components/PostItem.vue<br/>touch src/components/PostDetails.vue<br/>touch src/components/PostCarousel.vue</span><span id="b091" class="jc jd hu ly b fv mg md l me mf"># add router, store,<br/>touch src/router/index.js<br/>touch src/store/index.js</span></pre><p id="e3b9" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我们将路由添加到我们的应用程序中，如下所示:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="2d47" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">注意，路由器一开始并没有导入<code class="eh mo mp mq ly b">PostDetails.vue</code>组件。这是惰性加载，这意味着我们的应用程序不会在开始时加载这个组件，以使它更快，只有在用户需要时才加载这个组件。让我们编辑main.js和App.vue，如下所示:</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="c903" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">注意，为了使用Vuetify，我们不说<code class="eh mo mp mq ly b">import Vuetify from 'vuetify'</code>我们从<code class="eh mo mp mq ly b">/plugins/vuetify</code>进口，因为我们只需要选择我们正在使用的组件。看看<a class="ae kp" href="https://github.com/mtermoul/garage-sale/blob/master/src/plugins/vuetify.js" rel="noopener ugc nofollow" target="_blank"> vuetify.js </a>看看是怎么做的。</p><h2 id="1004" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">添加用户界面代码</h2><p id="58b9" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">所以让我们从创建我们的UI开始，如下图所示。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="6118" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">到目前为止，在我们的主页中，我们刚刚添加了一个顶部工具栏，带有搜索文本字段、搜索按钮和左侧导航菜单。在页面的内容区域，我们刚刚添加了一个组件<code class="eh mo mp mq ly b">post-grid</code>，它将作为我们数据的占位符。</p><p id="aa99" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">在继续之前，我们需要一些数据来测试和构建我们的UI组件。因此，不做更多的事情，让我们在下一节做。</p><h2 id="bb76" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">用Cosmic JS构建后端</h2><p id="67ac" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">在发现Cosmic JS之前，我使用普通的JSON文件并编写一个小小的Node.js应用程序，它有一堆Rest API端点。另一种方法是使用一些云noSQL数据库来托管JSON数据文档，并编写一个服务器Rest API来服务这些数据。然而，这一切都过去了，在了解到使用Cosmic JS后，您不再需要编写服务器端API。只要设计好你的数据，从JSON文件中插入或导入，Cosmic JS就会自动为你生成Rest API。事实上，Cosmic JS提供了两种API端点:</p><ul class=""><li id="85f3" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">Rest API将成为添加、显示和更新数据的CRUD方法。</li><li id="acf3" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">GraphQL API，它也类似于Rest，但是您可以使用称为GraphQL的特殊语法来编写查询。如果您不熟悉GraphQL，我鼓励您查看这些文档。由于其灵活性和受欢迎程度，它最近获得了很大的发展势头。另外，它是由脸书开发的。对于我的应用程序，我将包括Rest和GraphQL方法，让您试验并决定哪一个最适合您。如果您没有使用Cosmic JS，那么您必须使用某个数据库作为存储机制来编写自己的服务器GraphQL API，并为GraphQL端点编写Node.js。</li></ul><p id="6b9f" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">好了，让我们跳到宇宙JS，添加我们的数据元素。注册免费帐户后，打开仪表板，添加名为<code class="eh mo mp mq ly b">garage-sale</code>的新桶。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/6e33e702fda44ee9ab03c7da49445fb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*dek2BVZYZ5XrIhRHwSHFbw.png"/></div></figure><p id="5029" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">之后，打开该桶的仪表板，从左侧菜单添加以下<code class="eh mo mp mq ly b">ObjectType</code>:</p><ul class=""><li id="6f44" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">邮件</li><li id="bc99" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">用户</li><li id="e932" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">位置</li><li id="7b68" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">后置条件</li><li id="7837" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">后置类别</li></ul><p id="01e2" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">如果您来自RDBMS数据库，那么对象类型就相当于数据库表。添加每个对象类型后，您可以开始为每个对象类型定义<code class="eh mo mp mq ly b">metafield</code>。元字段相当于模式或表列。那么下面我们来看看这个过程:</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mv"><img src="../Images/84761b5903efd484d628d668bdb36297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p_CQKSFhlHn6WjAtgc2qMw.png"/></div></div></figure><p id="0ac8" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">因此，向每个对象类型添加以下字段:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="2202" class="jc jd hu ly b fv mc md l me mf"># Locations<br/>city: text<br/>state: text<br/>country: text<br/>postalCode: text</span><span id="0854" class="jc jd hu ly b fv mg md l me mf"># Users<br/>email: text<br/>firstName: text<br/>lastName: text</span><span id="3864" class="jc jd hu ly b fv mg md l me mf"># Posts<br/>title: text<br/>description: text<br/>condition: PostCondition<br/>price: text<br/>isFree: boolean<br/>categories: [PostCategory]<br/>images: [media/file] (files will be uploaded to Cosmic JS files.<br/>mainImage: number<br/>isSold: boolean<br/>dateAdded: date<br/>user: User</span><span id="8b43" class="jc jd hu ly b fv mg md l me mf"># PostConditions<br/>name: text<br/>desc: text</span><span id="0fce" class="jc jd hu ly b fv mg md l me mf"># PostCategories<br/>name: text</span></pre><p id="1bf6" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">添加了<code class="eh mo mp mq ly b">ObjectType</code>和<code class="eh mo mp mq ly b">metafields</code>之后，是时候添加一些数据了。要添加数据，只需点击Cosmic JS仪表板左侧菜单中的对象类型，然后开始添加数据。还可以使用Cosmic JS CLI API插入数据。请查看CLI函数的文档。我个人使用仪表板和CLI为我的应用程序插入测试数据。以下是如何将数据添加到文章类别对象类型的示例:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="b0a3" class="jc jd hu ly b fv mc md l me mf"># inserting into PostCategories<br/>cosmic add-object --type_slug "postcategories" --title "Shoes" --metafields [{title: "name", value: "Shoes"}]<br/>cosmic add-object --type_slug "postcategories" --title "Cars" --metafields [{title: "name", value: "Cars"}]</span></pre><p id="eed5" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">同样，你可以添加所有的对象。对于图像，更容易打开仪表板，并使用Cosmic JS仪表板左侧菜单中的<code class="eh mo mp mq ly b">Media</code>功能上传所有图像。对于我的应用程序，每个帖子有多个图像，每个图像有三个版本。将根据屏幕显示尺寸选择超小型、小型和中型。因为我们是为PWA开发的，而PWA主要是为移动设备开发的，所以我们将主要服务于xm和sm图像。不过，我们也提供了一个使用md文件的桌面替代视图，以防应用程序从桌面屏幕打开。我们将进一步深入了解如何为PWA应用程序优化图像的更多细节。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mw"><img src="../Images/7feee6ea5359ea48a75b06de4b8ed10b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FiEESMz7T3NUOheow_hKxg.png"/></div></div></figure><p id="c381" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我们从后端开始。在下一节中，我们将回顾如何使用Cosmic JS API消费我们的数据。</p><h2 id="12d2" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">通过Rest或GraphQL使用Cosmic JS API</h2><p id="e154" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">如前所述，Cosmic JS提供了两种通过API调用执行CRUD操作的方法。首先，我们可以使用普通的旧API与数据进行交互。完整文档请查看<a class="ae kp" href="https://cosmicjs.github.io/rest-api-docs/#introduction" rel="noopener ugc nofollow" target="_blank"> Cosmic JS Rest API文档</a>这里有几个例子:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="5307" class="jc jd hu ly b fv mc md l me mf">Cosmic.getObjects({type: 'postcategories', limit: 10})<br/>Cosmic.getObjects({type: 'users', skip: 5, limit: 2})<br/>Cosmic.getObjects({type: 'posts'})</span></pre><p id="5e62" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我们还可以通过GraphQL api与Cosmic JS进行交互。请阅读<a class="ae kp" href="https://cosmicjs.com/docs/graphql" rel="noopener ugc nofollow" target="_blank"> Cosmic JS GraphQL API </a>获取完整文档。如果您想运行一些查询并测试这个API，请打开<a class="ae kp" href="https://graphql.cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> GraphiGL Playground </a>并编写一些graphiql查询:</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mx"><img src="../Images/c1d6693ed2bc504c8ad7390784b67f94.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tLegBGuna5beeTbEBrnMHQ.png"/></div></div></figure><h2 id="d860" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">使用Vuex、Cosmic JS和Vue store的应用状态</h2><p id="bf49" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">为了维护应用程序的状态，我们需要在某个地方保存数据，并允许应用程序中的所有组件和模块共享这些数据。因此，为此我们将使用<a class="ae kp" href="https://vuex.vuejs.org/" rel="noopener ugc nofollow" target="_blank"> Vuex </a>。所以对于我的应用程序，如前所述，我有两个动作从Cosmic JS获取数据。第一个<code class="eh mo mp mq ly b">fetchPosts</code>将简单地调用Cosmic JS REST api并检索所有帖子。我不会深入探讨这个问题，因为已经有很多关于这个问题的文献了。第二种方法是<code class="eh mo mp mq ly b">fetchPostsGQ</code>,它将从Cosmic JS GraphQL API获取post数据。所以让我们来看看它是如何做到的。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="2d6f" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">现在让我从上面的存储文件中查看几个要点。首先，为了使用来自Cosmic JS的GraphQL API或任何其他GraphQL api，我们需要GraphQL客户端库。在撰写本文时，有许多js库可以用作GraphQL客户端，但是我选择了<a class="ae kp" href="https://www.npmjs.com/package/apollo-boost" rel="noopener ugc nofollow" target="_blank"> apollo-boost </a>，因为它具有内存缓存特性。我还使用了<code class="eh mo mp mq ly b">graphql-tag</code>来解析多行字符串形式的GraphQL查询。之后，我们需要通过提供GraphQL API的URL来启动<code class="eh mo mp mq ly b">ApolloClient</code>实例。在我们的例子中，CosmicJS提供给我们的url是<code class="eh mo mp mq ly b">https://graphql.cosmicjs.com/v1</code> <br/>。在这之后，我们准备编写我们的第一个GraphQL查询，并获取一些数据。在函数<code class="eh mo mp mq ly b">fetchPostsQG</code>中，我们可以看到GraphQL查询的语法如下:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="9986" class="jc jd hu ly b fv mc md l me mf">query: gql`query Posts($bucket: String, $type: String!) {<br/>        objectsByType(bucket_slug: $bucket, type_slug: $type) {<br/>            _id<br/>            title<br/>            slug<br/>            metadata<br/>        }<br/>    }`,<br/>variables: {bucket: 'garage-sale', type: 'posts'}</span></pre><p id="c5d9" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">如果您熟悉SQL语言，上面的查询相当于下面的select语句。</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="96ca" class="jc jd hu ly b fv mc md l me mf">SELECT _id, title, slug, metadata<br/>FROM garage-sale.posts</span></pre><p id="2433" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">剩下的代码只需要获得结果并填充<code class="eh mo mp mq ly b">state.posts</code>变量。我还应该提到，我们有<code class="eh mo mp mq ly b">state.isDataready</code>变量，一旦我们从api获得数据，它将被设置为<code class="eh mo mp mq ly b">true</code>。否则UI会显示某种加载图标。最后，我想提一下我们的UI所需的所有数据，将从<code class="eh mo mp mq ly b">post.metadata</code>中选择，这只是从Cosmic JS返回的数据的格式。Vuex商店的完整源代码请看一下<a class="ae kp" href="https://github.com/mtermoul/garage-sale/blob/master/src/store/index.js" rel="noopener ugc nofollow" target="_blank"> index.js </a>。</p><h2 id="66cc" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">加载初始数据并填充主页</h2><p id="90f3" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">当启动应用程序时，我们将看到数据加载微调器几秒钟，然后我们将看到网格加载了来自服务器的数据。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/7d20137310a7af1307f1dd7af9bbce78.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*n6dcsY7SiDU6hPtdtn__cQ.png"/></div></figure><p id="7004" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我们能够通过首先从<a class="ae kp" href="https://github.com/mtermoul/garage-sale/blob/master/src/main.js" rel="noopener ugc nofollow" target="_blank"> main.js </a>中调用<code class="eh mo mp mq ly b">loadingInitialData</code>来实现这一点</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="743b" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">正如您在上面的代码中看到的。为了触发获取数据，我们只需从应用程序<code class="eh mo mp mq ly b">created</code>生命钩子中调用<code class="eh mo mp mq ly b">loadInitialData</code>动作。</p><p id="88b3" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">现在让我们看看<code class="eh mo mp mq ly b">Home.vue</code>组件，看看我们如何使用这些数据。</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="dbfa" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">从上面的代码中可以看到，有一个计算属性<code class="eh mo mp mq ly b">posts</code>，它将直接从Vuex存储中获取。这个posts属性作为组件属性传递给<code class="eh mo mp mq ly b">PostGrid</code>组件。<code class="eh mo mp mq ly b">PostGrid</code>组件将遍历数组元素，并在屏幕上绘制文章项目。</p><p id="3268" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">在主页中，还有一个搜索功能，它将简单地从输入框中取出搜索词，并使用关键字参数再次调用<code class="eh mo mp mq ly b">fetchPosts</code>动作。</p><h2 id="69a2" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">显示帖子详细信息页面</h2><p id="1156" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">首页的<code class="eh mo mp mq ly b">PostGrid</code>中的每一项，都会有一个到<code class="eh mo mp mq ly b">post</code>页面的链接</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="7581" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">当我们点击<code class="eh mo mp mq ly b">PostItem</code>时，路由器会将用户带到<code class="eh mo mp mq ly b">PostDetails</code>页面。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff ls"><img src="../Images/2af7dbfb50626c3c3d8629bf095cb417.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*hAHiQPOgjWKiL0J50ArDeg.png"/></div></figure><p id="ed78" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">一旦我们进入这个页面，我们有四个主要功能:</p><ul class=""><li id="2b14" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">向上滑动:显示文章的上一张图片</li><li id="0f6d" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">向下滑动:显示文章下一张图片</li><li id="e36d" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">向左滑动:显示下一篇文章</li><li id="43e9" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">向右滑动:显示上一篇文章</li></ul><p id="4b65" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">除了滑动功能，这将需要一个触摸屏设备，还有其他功能，如<code class="eh mo mp mq ly b">Contact Seller</code>按钮和<code class="eh mo mp mq ly b">More Info</code>按钮，它们是直截了当的。点击每个按钮，我们使用Vue <code class="eh mo mp mq ly b">v-show</code>和<code class="eh mo mp mq ly b">v-bind</code>指令显示/隐藏视图上的一个部分。</p><p id="ce2d" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">这个难题的最后一部分是文章细节转盘，用于浏览文章的图片。对于这个项目，我使用Vuetify <code class="eh mo mp mq ly b">Carousel</code>组件来显示多个图像，并允许用户通过上下滑动来浏览这些图像。<br/>我也包括在这个项目中<a class="ae kp" href="https://github.com/mtermoul/garage-sale/blob/master/src/components/PostCarousel.vue" rel="noopener ugc nofollow" target="_blank">'/src/components/post carousel . vue '</a>。该组件是<code class="eh mo mp mq ly b">vuetify.carousel</code>的扩展，稍加改动。我添加了垂直滑动模式，允许用户浏览图片。开箱即用的<code class="eh mo mp mq ly b">vuetify.carousel</code>将只允许左/右滑动。所以如果你看一下代码，你会看到这个组件扩展了<code class="eh mo mp mq ly b">VCarousel</code>组件</p><figure class="lt lu lv lw fq iv"><div class="bz el l di"><div class="ms mt l"/></div></figure><p id="03a5" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">所以，你有它！这就是你如何使用组件继承，并以最基本的方式扩展第三方组件。</p><h2 id="9604" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">桌面视图怎么样？</h2><p id="a6ad" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">尽管这款应用主要是为移动设备开发的，但只需添加几行代码就一定能让它变得对桌面友好。因此，作为一部分，你可以使用网格布局系统轻松地编写响应性web应用程序。例如:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="a284" class="jc jd hu ly b fv mc md l me mf">&lt;v-flex xs12 sm6 offset-sm3&gt;<br/>...<br/>&lt;v-flex&gt;</span></pre><p id="48e0" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">这意味着，如果这个<code class="eh mo mp mq ly b">xm</code>表示超小型设备，那么这个<code class="eh mo mp mq ly b">div</code>将占据页面的整个宽度。对于小尺寸或更大尺寸的屏幕，它将占用一半的宽度。知道每个屏幕总共有大约12列。Vuetify还有另一个特性，允许我们查询屏幕大小，发布条件语句或应用条件样式。它叫做<code class="eh mo mp mq ly b">breakpoint</code>，可以如下使用:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="e28d" class="jc jd hu ly b fv mc md l me mf"># only apply the css class if size is medium and up<br/>&lt;div :class="{'view-medium-and-up': $vuetify.breakpoint.mdAndUp}"&gt;</span><span id="40f4" class="jc jd hu ly b fv mg md l me mf"># image size will be calculated based if screen size is small and down<br/>const imgSize = this.$vuetify.breakpoint.smAndDown ? '200px' : '400px'</span></pre><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff my"><img src="../Images/5b8f6a73f20f46de8b998a119fd9046e.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*770sA4NIbv0T6QINNemdcQ.png"/></div></figure><p id="2657" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">如你所见，桌面上的文章详情页面只占了一半的宽度。我还加入了导航箭头(左、右、上、下),因为桌面版没有滑动功能。所有这些逻辑都可以很容易地用Vuetify和Vue实现。</p><p id="3c7e" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">还有一点值得一提的是，后期图像的分辨率会根据屏幕大小而变化。因此，每个图像都有三种分辨率xm、sm和md，并且有逻辑根据屏幕大小显示适当的图像。让我们看看我们是怎么做到的。</p><p id="6786" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">首先，所有post图像需要针对PWA进行优化，并为每个图像生成三个文件。例如，如果一个帖子有一个名为<code class="eh mo mp mq ly b">adidas-yeezy-color-fashion-1280064.jpg</code>的图像，那么我们将需要产生如下三个版本的图像:</p><ul class=""><li id="d624" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">阿迪达斯-yee zy-color-fashion-1280064-xs _ 1x . jpg</li><li id="7a56" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">阿迪达斯-yee zy-color-fashion-1280064-sm _ 1x . jpg</li><li id="ecdf" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">阿迪达斯-yee zy-color-fashion-1280064-MD _ 1x . jpg</li></ul><p id="aea6" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">您可以使用许多方法、应用程序、工具和网站来优化图像并自动化该过程。在下一节中，我将更多地解释这个过程和PWA优化。然而，在这一节中，我只想向您展示如何有条件地更改UI，并根据屏幕大小显示不同的图像</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="64dd" class="jc jd hu ly b fv mc md l me mf">postImages () {<br/>        const imgSize = this.$vuetify.breakpoint.smAndDown ? '-xm_1x' : '-sm_1x'<br/>        ...<br/>    },</span></pre><p id="55ee" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">上面的代码只是根据屏幕大小选择正确的图像文件名。</p><h2 id="458d" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">是时候运行应用程序并进行测试了</h2><p id="9348" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">我认为此时我们的应用程序已经准备好进行一些测试了。为了检查和了解该应用程序在移动设备上的表现，我强烈建议使用Chrome dev tool。在那里，您可以使用设备工具栏来更改设备屏幕大小。您还可以看到该应用程序如何使用触摸屏功能。我相信Safari也有类似的功能，在开发菜单下叫<code class="eh mo mp mq ly b">Enter Responsive Design Mode</code>。另一个有用的功能是xCode设备模拟器，它可以让我测试实际的手机感觉。我在排除一些iPhones特有的问题时使用了这个功能，它真的派上了用场。我相信xCode可以很容易地安装在mac上，但是我不确定PC上是否可以！但是我认为Windows OS应该有类似的app或者其他设备模拟器。</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/ec5848080db996f0bdb5b28a612b506d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*DCnhqJC84o9Um2iAHBVT9A.png"/></div></figure><p id="d7f4" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我也推荐使用用于Chrome的vue-dev-tools插件。这将为您节省大量调试时间，并了解实际情况。</p><p id="4f97" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">因此，要运行该应用程序，只需运行以下vue-cli命令:</p><pre class="lt lu lv lw fq lx ly lz ma aw mb dt"><span id="ec4d" class="jc jd hu ly b fv mc md l me mf"># run on dev mode<br/>npm run serve</span><span id="88f7" class="jc jd hu ly b fv mg md l me mf"># build you app for production<br/>npm run build</span><span id="65e7" class="jc jd hu ly b fv mg md l me mf"># serve prod build on your local machine. You need to install serve first (npm install serve)<br/>serve -s dist</span></pre><p id="66ef" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">对于这个项目，我使用<code class="eh mo mp mq ly b">http-serve</code>在服务器上提供我的PWA应用程序，因为它提供了许多有用的功能，如:</p><ul class=""><li id="8652" class="ka kb hu kc b kd lk kf ll jn lm jr ln jv lo kk kl km kn ko dt translated">https功能</li><li id="9ec8" class="ka kb hu kc b kd kq kf kr jn ks jr kt jv ku kk kl km kn ko dt translated">gzip文件服务</li></ul><p id="6f86" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">如果你喜欢控制，你也可以写你自己的节点/快速服务器，但是对我来说这样更快。</p><h2 id="f331" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">用Google Lighthouse优化PWA应用程序</h2><p id="354e" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">在所有这些工作之后，当我使用Chrome dev-tools的Google Lighthouse运行应用程序审计时，真相大白的时刻到来了。我第一次进行审计时，分数很糟糕，低于50%。<br/>在实施几项建议之前，这是它在某一点上的看法</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/8187a35ab2cd68d320f9bc477e243da7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*pUisdsMSjlrY36fifvj_QA.png"/></div></figure><p id="c676" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">第一次运行后，我不得不一个接一个地检查Lighthouse的分数，并执行所有推荐的建议。每次分数都越来越好。我也获得了更多关于SEO、性能、PWA……如何评分以及如何在这些方面做得更好的见解。经过多次迭代后，我得到了以下分数</p><figure class="lt lu lv lw fq iv fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/346d7923a102a9f7eec876c5645ee993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/1*hAQ4bGaKKYvgilNRJ1eUMA.png"/></div></figure><p id="7aa5" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">尽管我没有在所有类别中获得100%的分数，但通过实施谷歌建议的改变，我感觉好多了，也学到了很多东西。<br/>有没有可能所有类别都得100分？你可能会问。答案是肯定的，如果你愿意花时间实施所有的建议。</p><p id="1824" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">影响网站性能的一个主要问题是图像。我意识到我提供的图像与屏幕尺寸不匹配。所以在浏览了一些建议后，我找到了这篇文章<br/> <a class="ae kp" href="https://medium.freecodecamp.org/a-guide-to-responsive-images-with-ready-to-use-templates-c400bd65c433" rel="noopener ugc nofollow" target="_blank">一个使用现成模板的响应式图像指南</a> <br/>，它详细解释了这个问题并为你设计了最佳解决方案。所以在这篇文章之后，我创建了一个简单的过程，遍历一个文件夹下的每张图片，并生成多个版本。</p><p id="59a8" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">我知道我没有在这里浏览每一行代码，但是我强烈建议你尝试一下应用程序<a class="ae kp" href="http://garage-sale.cosmicapp1.co/" rel="noopener ugc nofollow" target="_blank">演示</a>，看看感觉如何。你也可以查看一下<a class="ae kp" href="https://github.com/mtermoul/garage-sale" rel="noopener ugc nofollow" target="_blank">代码</a>，看看有没有问题。</p><h2 id="45a2" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">结论</h2><p id="28de" class="pw-post-body-paragraph kv kw hu kc b kd ke kx ky kf kg kz la jn lb lc ld jr le lf lg jv lh li lj kk hn dt translated">起初，构建PWA应用程序可能会感觉是一项艰巨的任务。然而，在Vue模板、Vuetify和Cosmic JS的帮助下，这个任务感觉更加愉快，最后我学到了更多的技巧。我的结论是，在你的旅程开始之前，你可能不知道所有的答案，但是，只要你有能力问这些问题，并尝试新事物，你就会在你的旅程中学习和成长。</p><p id="bf7f" class="pw-post-body-paragraph kv kw hu kc b kd lk kx ky kf ll kz la jn lp lc ld jr lq lf lg jv lr li lj kk hn dt translated">感谢您花时间阅读我的故事，我希望我已经启发您建立您的下一个PWA想法。如果你有任何问题或意见，请告诉我<a class="ae kp" href="https://twitter.com/cosmic_js" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我们</a>并加入我们的<a class="ae kp" href="https://cosmicjs.com/community" rel="noopener ugc nofollow" target="_blank"> Slack社区</a>。</p></div></div>    
</body>
</html>