<html>
<head>
<title>How to Deploy a Website to a Remote Server Using GIT</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用GIT将网站部署到远程服务器</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploy-website-to-remote-server-using-git-da6048805637?source=collection_archive---------13-----------------------#2018-09-20">https://medium.com/hackernoon/deploy-website-to-remote-server-using-git-da6048805637?source=collection_archive---------13-----------------------#2018-09-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ff3acc75f3aa7cbcc4d80adb71be6ed8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R8YQmdW3physeka3op3Z-Q.png"/></div></div></figure><p id="4a7b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是一个循序渐进的教程，教你如何利用git将你的网站部署到你的远程服务器上。它会引导你走完每一步。熟悉<a class="ae ka" href="https://git-scm.com" rel="noopener ugc nofollow" target="_blank"> Git </a>和<a class="ae ka" href="http://linuxcommand.org/lc3_learning_the_shell.php" rel="noopener ugc nofollow" target="_blank"> Linux Shell </a>更佳，但不是强制性的。</p><h1 id="63ef" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">工作</h1><h2 id="147c" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">1.登录到服务器</h2><p id="e1ea" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">使用以下命令打开终端并登录到服务器:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="46b9" class="kz kc hu lx b fv mb mc l md me">ssh your_user@server_ip_address</span></pre><ul class=""><li id="2c2f" class="mf mg hu je b jf jg jj jk jn mh jr mi jv mj jz mk ml mm mn dt translated">用您服务器的实际ip地址<a class="ae ka" href="https://en.wikipedia.org/wiki/IP_address" rel="noopener ugc nofollow" target="_blank">替换<em class="mo">服务器IP地址</em>。</a></li><li id="e2a4" class="mf mg hu je b jf mp jj mq jn mr jr ms jv mt jz mk ml mm mn dt translated">用实际的用户名替换<em class="mo"> your_user </em>。默认情况下，用户名与主机相同，除非您指定不同的代理。</li></ul><p id="895d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输入你的密码，瞧，你现在已经登录到你的服务器了。</p><h2 id="5d2d" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">2.安装GIT</h2><p id="37e8" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">要在您的服务器上安装git，请将以下命令一次一个地复制到终端中，然后点击<code class="eh mu mv mw lx b">Return</code>。如果出现提示，请输入您的密码。</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="1611" class="kz kc hu lx b fv mb mc l md me">sudo apt-get update<br/>sudo apt-get install git</span></pre><h2 id="f3fc" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">3.为您的代码创建一个文件夹</h2><p id="ba9f" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">你网站的源代码需要放在某个地方。按照惯例，代码放在<code class="eh mu mv mw lx b">/var/www</code>目录中。使用以下方式导航:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="24ba" class="kz kc hu lx b fv mb mc l md me">cd /var/www</span></pre><p id="8aaf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，创建一个新文件夹来存放源代码。对于本教程，它将被称为<em class="mo">网站_文件夹。</em></p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="fea7" class="kz kc hu lx b fv mb mc l md me">mkdir website_folder</span></pre><p id="4d8a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，放置源代码的完整路径是<code class="eh mu mv mw lx b">/var/www/website_folder/</code>。记住这个路径很重要，因为在设置git存储库时会用到它。</p><h2 id="0b59" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">4.在您的服务器上初始化git存储库</h2><p id="1107" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">git存储库需要一个文件夹来存放它。在<code class="eh mu mv mw lx b">/var</code>中，创建一个名为<em class="mo"> repo，</em>的文件夹，其中的<em class="mo"> </em>将包含您的git库。其中之一就是<em class="mo">网站。为此，请运行以下命令:</em></p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="c528" class="kz kc hu lx b fv mb mc l md me">mkdir -p /var/repo/website.git</span></pre><p id="bb60" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，导航到<code class="eh mu mv mw lx b">/var/repo/website.git</code>并初始化您的git存储库:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="aa10" class="kz kc hu lx b fv mb mc l md me">cd /var/repo/website.git/<br/>git init --bare</span></pre><p id="7861" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">瞧……现在你有了一个用于共享的<a class="ae ka" href="http://www.saintsjd.com/2011/01/what-is-a-bare-git-repository/" rel="noopener ugc nofollow" target="_blank">裸</a>库。</p><h2 id="0557" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">5.创建挂钩</h2><blockquote class="mx my mz"><p id="aed4" class="jc jd mo je b jf jg jh ji jj jk jl jm na jo jp jq nb js jt ju nc jw jx jy jz hn dt translated">钩子是一个程序，你可以把它放在钩子目录中，在git执行的某些时候触发动作。</p></blockquote><p id="d778" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Git有几个钩子，它可以在不同的阶段之后自动调用。您将使用<em class="mo"> post-receive </em>钩子，它在您的存储库接收到推送的代码之后被调用。</p><p id="a54a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">初始化git存储库后，新的文件夹应该出现在<code class="eh mu mv mw lx b">/var/repo/website.git/</code>中。导航到<em class="mo">钩子</em>并使用您喜欢的文本编辑器创建一个名为<em class="mo"> post-receive </em>的新<a class="ae ka" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" rel="noopener ugc nofollow" target="_blank"> bash </a>。</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="6f69" class="kz kc hu lx b fv mb mc l md me">cd hooks<br/>nano post-receive</span></pre><p id="5484" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在新创建的文件中，您需要告诉git将推送的文件放在哪里。为此，请粘贴以下代码:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="2ec4" class="kz kc hu lx b fv mb mc l md me">#!/bin/sh</span><span id="43a1" class="kz kc hu lx b fv nd mc l md me">git --work-tree=<em class="mo">path_to_website_folder</em> --git-dir=<em class="mo">path_to_git_directory</em> checkout -f name_of_branch</span></pre><ul class=""><li id="f5b0" class="mf mg hu je b jf jg jj jk jn mh jr mi jv mj jz mk ml mm mn dt translated">用我们在第3点创建的正确路径<code class="eh mu mv mw lx b">/var/www/website_folder</code>替换<em class="mo"> path_to_website_folder </em>。</li><li id="52c0" class="mf mg hu je b jf mp jj mq jn mr jr ms jv mt jz mk ml mm mn dt translated">将<em class="mo"> path_to_git_directory </em>替换为裸git存储库的路径，在本例中是<code class="eh mu mv mw lx b">/var/repo/website.git</code>。</li><li id="e854" class="mf mg hu je b jf mp jj mq jn mr jr ms jv mt jz mk ml mm mn dt translated">name_of_branch是可选参数。如果没有指定，默认为<code class="eh mu mv mw lx b">master</code>。</li></ul><p id="db51" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以使用您选择的任何其他命令来执行该脚本，例如重新启动服务器。</p><p id="8a69" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用<code class="eh mu mv mw lx b">ctrl+x</code>退出编辑器，并确保将文件保存为<em class="mo">接收后</em>。</p><h2 id="8774" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">6.使脚本可执行</h2><p id="0bc4" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">为了让操作系统执行脚本，后者需要具有可执行权限。为此，请运行以下命令:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="56a2" class="kz kc hu lx b fv mb mc l md me">chmod +x post-receive</span></pre><p id="e3aa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您的服务器上的工作已经完成。你现在只需运行<code class="eh mu mv mw lx b">logout</code>并点击<code class="eh mu mv mw lx b">Return</code>即可注销</p><h2 id="131a" class="kz kc hu bd kd la lb lc kh ld le lf kl jn lg lh kp jr li lj kt jv lk ll kx lm dt translated">7.将本地代码推送到服务器</h2><p id="67c9" class="pw-post-body-paragraph jc jd hu je b jf ln jh ji jj lo jl jm jn lp jp jq jr lq jt ju jv lr jx jy jz hn dt translated">从您的终端，导航到您的本地文件夹，如果它还不是一个工作的git存储库，将其初始化为一个。然后，为了配置git将代码推送到远程服务器，您需要将它指向它的地址。</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="8e07" class="kz kc hu lx b fv mb mc l md me">git init</span><span id="c15b" class="kz kc hu lx b fv nd mc l md me">git remote add <em class="mo">name_of_repository </em>ssh://your_user@<!-- -->server_ip_address/<em class="mo">path_to_git_directory</em></span></pre><ul class=""><li id="37ea" class="mf mg hu je b jf jg jj jk jn mh jr mi jv mj jz mk ml mm mn dt translated"><em class="mo">存储库名称</em>可以是您想要的任何名称。这是远程存储库的名称。</li><li id="b162" class="mf mg hu je b jf mp jj mq jn mr jr ms jv mt jz mk ml mm mn dt translated">将<em class="mo">服务器ip地址</em>替换为您服务器的实际<a class="ae ka" href="https://en.wikipedia.org/wiki/IP_address" rel="noopener ugc nofollow" target="_blank"> IP地址</a>。</li><li id="cff9" class="mf mg hu je b jf mp jj mq jn mr jr ms jv mt jz mk ml mm mn dt translated">用实际的用户名替换<em class="mo"> your_user </em>。默认情况下，用户名为<a class="ae ka" href="https://en.wikipedia.org/wiki/Root_directory" rel="noopener ugc nofollow" target="_blank"> root </a>。</li><li id="5742" class="mf mg hu je b jf mp jj mq jn mr jr ms jv mt jz mk ml mm mn dt translated">将<em class="mo"> path_to_git_directory </em>替换为裸git存储库的路径，在本例中是<code class="eh mu mv mw lx b">var/repo/website.git/</code>。</li></ul><p id="c619" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，要将代码推送到远程服务器，只需从本地git存储库中运行以下命令:</p><pre class="ls lt lu lv fq lw lx ly lz aw ma dt"><span id="db1f" class="kz kc hu lx b fv mb mc l md me">git push <em class="mo">name_of_repository name_of_branch</em></span></pre><p id="5467" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输入您的密码，现在您的代码是活的，应该可以在<code class="eh mu mv mw lx b">/var/www/website_folder</code>中找到</p></div></div>    
</body>
</html>