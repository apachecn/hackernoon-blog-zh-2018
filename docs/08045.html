<html>
<head>
<title>Organize your application forms using NGX Formly</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用NGX Formly组织您的申请表格</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/organize-your-forms-application-using-ngx-fomrly-796150461045?source=collection_archive---------2-----------------------#2018-09-24">https://medium.com/hackernoon/organize-your-forms-application-using-ngx-fomrly-796150461045?source=collection_archive---------2-----------------------#2018-09-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="c499" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">创建表单是前端世界中最常见的工作之一。Angular及其反应式表单帮助开发人员创建、组织和控制具有可理解的工作流的表单(您尝试过使用普通javascript创建表单验证吗？).</p><p id="5029" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">考虑一个常规的用户故事，产品所有者要求您创建一个旅程，其中包括具有20多个不同字段的表单、几个组合验证、重复的包装器和多个步骤。此时，您应该想象一下模板有多长，以及保存主要表单信息的组件有多长。(HTML中的代码有多长？).</p><p id="608a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">幸运的是，有几个开源Angular项目为您的应用程序表单提供了一个很好的解决方案，专注于代码的可维护性、可伸缩性和解耦性。(检查<a class="ae jp" href="https://formly-js.github.io/ngx-formly/" rel="noopener ugc nofollow" target="_blank">表格</a>和<a class="ae jp" href="https://github.com/json-schema-form/angular-schema-form" rel="noopener ugc nofollow" target="_blank">角度模式表格</a></p><p id="296c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在这篇文章中，我将谈论<strong class="it hv">“NGX Formly”</strong>一个非常酷的库，它将帮助你完成这项任务。此外，我将描述一种使用一些很棒的Javascript技术来组织代码的好方法。</p><h2 id="968a" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">什么是NGX Formly？</h2><p id="c1d6" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated"><strong class="it hv"> NGX Formly </strong>是一个基于配置对象创建反应式表单的角度库。在Github上，你可以找到这个库的所有不同版本，其中包括对AngularJS的支持。</p><p id="b797" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">换句话说，它可以帮助您将应用程序的模板从这个:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff kq"><img src="../Images/63f6fab03f5668d203b14c964fc816ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0i8ZGBftH_CLeZc6Z2l14g.png"/></div></div><figcaption class="lc ld fg fe ff le lf bd b be z ek">Regular Reactive Form HTML</figcaption></figure><p id="d3e5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对此:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lg"><img src="../Images/f5e126d7d7b48a28700849e64882e768.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XdDxYmsWwhoRvSprnKZqlQ.png"/></div></div><figcaption class="lc ld fg fe ff le lf bd b be z ek">Formly form HTML</figcaption></figure><h2 id="9d42" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">如何开始</h2><p id="b992" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">如果您想开始使用这个库，我建议从他们的文档站点开始。它包括几个创建良好的代码片段，将帮助您开始使用<strong class="it hv"> NGX Formly。</strong> <a class="ae jp" href="https://formly-js.github.io/ngx-formly/guide/getting-started" rel="noopener ugc nofollow" target="_blank">在这里</a>你可以找到快速入门指南。</p><h2 id="e28b" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">组织您的表单应用程序</h2><p id="a066" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">整个过程可以总结为三个步骤:</p><p id="b6c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 1。生成一个“uiForm”模块。</strong> <br/>该模块包含开始使用Formly所需的所有逻辑。它包括模块导入、表单配置、验证器、包装器、新的表单元素、助手类、服务和表单示意图。</p><p id="3d2d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 2。在应用程序中导入“uiForm”模块。</strong> <br/>对于给定的配置，您需要在项目上导入这个配置，并在正确的位置注入所需的服务。在一个常规的Angular项目中，服务应该在一个功能模块中提供。</p><p id="27ac" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 3。创建一个组件，注入模式服务并开始使用Formly。</strong> <br/>一切就绪后，最后一步是开始使用我们的schematics服务获取字段配置并开始创建令人惊叹的表单。</p><h2 id="1ea2" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">创建“uiForm”模块</h2><p id="6405" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">作为一个常规规则，每个Angular项目都应该包含一个文件夹，其中包含所有要共享的模块。您应该将此代码放在正确的文件夹中。在这个例子中，我将在<strong class="it hv"> "/src" </strong>下创建一个名为<strong class="it hv"> "/src/ui-form" </strong>的文件夹。</p><p id="c0f6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 1。为了实现这种配置，我们需要以下结构:</strong></p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="c928" class="jq jr hu li b fv lm ln l lo lp">$: ui-forms/ui-forms.module.ts<br/>$: ui-forms/config.ts<br/>$: ui-forms/ui-forms.service.ts<br/>$: ui-forms/helpers<br/>$: ui-forms/wrappers<br/>$: ui-forms/types<br/>$: ui-forms/schemas</span></pre><p id="296f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 2。创建<em class="lq">用户界面表单模块</em>。</strong></p><p id="6b5c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这是一个配置模块，公开了开始使用Formly所需的所有类。您可以将这个模块看作是表单的包装器，在这里您可以创建所有的表单元素，并有机会在不涉及业务逻辑的情况下生成表单。</p><p id="eea9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">您的导入应该如下所示:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lr"><img src="../Images/eab9990029098ea46faa61d4dac7a89a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iZimL1ADmWX_8IrUndtPBw.png"/></div></div></figure><p id="5482" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">注意我是如何将<a class="ae jp" href="https://github.com/text-mask/text-mask" rel="noopener ugc nofollow" target="_blank"> TextMaskModule </a>作为依赖项包含进来的。这样做是因为在使用表单时，输入掩码是一项常见的任务。此外，我创建了不同的导入部分来区分每种类型的组件，这不是必需的，但它使您的导入部分更有组织性，并允许这些依赖项用作该模块的索引。</p><p id="7eba" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 3。生成配置文件</strong></p><p id="bd47" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在模块的同一层，您应该创建一个名为<strong class="it hv"> config.ts </strong>的文件，它应该包含格式配置，包括类型、包装器、验证器、验证消息、操纵器和附加组件。应根据从以下位置导入的接口<strong class="it hv"> ConfigOption </strong>键入该配置:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="160b" class="jq jr hu li b fv lm ln l lo lp"><strong class="li hv">import </strong>{ ConfigOption } <strong class="li hv">from </strong>"@ngx-formly/core";</span></pre><p id="0921" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">让我们开始创建验证器消息:这个属性允许您创建定制消息。例如，如果您想要一个用于“maxlength”验证的自定义消息，配置对象允许您创建一个函数，该函数接收字段和错误作为参数，并且应该返回一个包含生成的消息的字符串。查看以下示例:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="e3aa" class="jq jr hu li b fv lm ln l lo lp"><strong class="li hv">function </strong>maxlengthValidationMessage(err, field) {<br/>  <strong class="li hv">return </strong>`This value should be less than ${field.templateOptions.maxLength} characters`;<br/>}</span><span id="d799" class="jq jr hu li b fv ls ln l lo lp"><strong class="li hv">const</strong> config = {<br/>  validationMessages: [<br/>    { name: 'maxlength', message: maxlengthValidationMessage }<br/>  ]<br/>}</span></pre><p id="a88b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了保持房间整洁，这些功能应该放在一个单独的文件中。在这个例子中，文件是在<strong class="it hv">中创建的。/helpers/* </strong>。当这个文件开始变大时，你应该把它分成不同的文件。在这个项目中，所有的函数都将出现在同一个文件中。</p><p id="13b6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当您完成了验证消息之后，下一步是开始创建定制的验证器。此配置需要自定义函数(如果没有错误，则返回null)和指定错误的对象。</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="cf86" class="jq jr hu li b fv lm ln l lo lp"><strong class="li hv">export function </strong>customValidation(control, type) {<br/>  <strong class="li hv">if</strong> (/** Error validation */) {<br/>      <strong class="li hv">return </strong>{ customValidation: 'Custom error message' };<br/>    }<br/>  }</span><span id="2bb7" class="jq jr hu li b fv ls ln l lo lp">  /** There is no error */<br/>  <strong class="li hv">return null</strong>;<br/>}</span><span id="ea0f" class="jq jr hu li b fv ls ln l lo lp"><strong class="li hv">const</strong> config = {<br/>  validators: [<br/>    { name: 'customValidation', validation: customValidation }<br/>  ]<br/>}</span></pre><p id="7aa0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与validators消息相同，您应该为validators创建一个文件。在本例中，该文件被放入<strong class="it hv">。/helpers/* </strong>安被命名为<strong class="it hv"> validators.ts </strong></p><p id="7118" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 4。生成包装组件。</strong></p><p id="7b83" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">包装器是包装表单组的组件。这是管理所有表单操作或希望显示自定义错误所必需的。</p><p id="90d4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">包装组件看起来像:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="b6b1" class="jq jr hu li b fv lm ln l lo lp"><strong class="li hv">@Component</strong>({<br/>  selector: 'formly-wrapper-title',<br/>  template: `<br/>    &lt;h3 class="title"&gt;{{ to.label }}&lt;/h3&gt;<br/>    &lt;ng-container #fieldComponent&gt;&lt;/ng-container&gt;<br/>  `,<br/>  styleUrls: ['./formly-wrapper-title.component.scss']<br/>})<br/><strong class="li hv">export class </strong>PanelWrapperComponent <strong class="li hv">extends </strong>FieldWrapper {<br/>  @ViewChild('fieldComponent', {read: ViewContainerRef}) fieldComponent: ViewContainerRef;<br/>}</span></pre><p id="f8e4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，这是一个常规的角度组件，它扩展了<strong class="it hv"> FieldWrapper </strong>类。这使您可以访问以下变量:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="63fe" class="jq jr hu li b fv lm ln l lo lp">form: <strong class="li hv">FormGroup</strong>;<br/>field: <strong class="li hv">FormlyFieldConfig</strong>;<br/>model: <strong class="li hv">any</strong>;<br/>options: <strong class="li hv">FormlyFormOptions</strong>;<br/><strong class="li hv">readonly </strong>key: <strong class="li hv">string</strong>;<br/><strong class="li hv">readonly </strong>formControl: <strong class="li hv">AbstractControl</strong>;<br/><strong class="li hv">readonly </strong>to: <strong class="li hv">FormlyTemplateOptions</strong>;<br/><strong class="li hv">readonly </strong>showError: <strong class="li hv">boolean</strong>;<br/><strong class="li hv">readonly </strong>id: <strong class="li hv">string</strong>;<br/><strong class="li hv">readonly </strong>formState: <strong class="li hv">any</strong>;</span></pre><p id="3922" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有了这些变量，您可以完全控制表单。这些变量允许您生成带有表单动作(提交、重置等)的按钮，或者生成定制的错误消息。这里使用最多的变量是<strong class="it hv">“to”</strong>。它允许访问在<strong class="it hv">模板选项</strong>上定义的所有属性。</p><p id="55c4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> 5。生成类型。</strong></p><p id="194b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这些类型是表单元素组件。有两种不同的类型:与静态表单元素相关的类型和动态类型。第一个应该从<strong class="it hv"> FieldType </strong>类扩展，第二个应该从<strong class="it hv"> FieldArrayType </strong>扩展；</p><p id="79f3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一个新的类型看起来像:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="a831" class="jq jr hu li b fv lm ln l lo lp"><strong class="li hv">import </strong>{ Component } <strong class="li hv">from </strong>'@angular/core';<br/><strong class="li hv">import </strong>{ FieldType } <strong class="li hv">from </strong>'@ngx-formly/core';<br/><br/><strong class="li hv">@Component</strong>({<br/>  <strong class="li hv">selector</strong>: 'formly-new-type',<br/>  <strong class="li hv">template</strong>: `<br/>   &lt;div class="form-group"&gt;<br/>     &lt;input type="text" class="form-control" [formControl]="formControl" [formlyAttributes]="field"&gt;<br/>   &lt;/div&gt;<br/> `,<br/>})<br/><strong class="li hv">export class </strong>FormlyNewType <strong class="li hv">extends </strong>FieldType {<br/>}</span></pre><p id="5aca" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">与包装器一样，<strong class="it hv"> FieldType </strong>类提供了对与<strong class="it hv"> FieldWrapper </strong>类相同的变量的访问。因此，您可以在这里显示与该字段相关的自定义错误消息或生成自定义样式。</p><p id="7267" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">6。生成模式。</p><p id="a223" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">一旦用验证消息、验证器、包装器和类型设置好了所有的项目，就该生成第一个表单模式了。在<strong class="it hv">里面”。/schemas/*" </strong>文件夹中，您需要创建一个包含所有表单配置的表单对象。它看起来像这样:</p><figure class="kr ks kt ku fq kv fe ff paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="fe ff lt"><img src="../Images/eadae59e190995925b32a088f8536d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Uq8mmH5_vNGjl-HFjnrEiQ.png"/></div></div></figure><p id="f3bc" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如你所见，FORM_VALUES是一个允许你在表单对象中生成不同配置的函数。在本例中，我将生成一个带有禁用表单属性的动态字段。</p><p id="c06b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了生成表单模式，创建了一个新的字段类。这个类允许您按照逻辑顺序为每个字段生成基本的表单配置。你可以在<strong class="it hv">找到这个职业的新帮手。/helpers/Fields.ts" </strong>。</p><p id="ad36" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这个类看起来像:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="2784" class="jq jr hu li b fv lm ln l lo lp"><strong class="li hv">export class </strong>Field {<br/>  <strong class="li hv">public static </strong><em class="lq">field</em>(<br/>    type: <strong class="li hv">string</strong>,<br/>    key: <strong class="li hv">string</strong>,<br/>    templateOptions?: <strong class="li hv">FormlyTemplateOptions</strong>,<br/>    options?: <strong class="li hv">any<br/>  </strong>): <strong class="li hv">FormlyFieldConfig</strong> {<br/>    <strong class="li hv">return </strong>{<br/>      type,<br/>      key,<br/>      templateOptions,<br/>      ...options<br/>    };<br/>  }<br/><br/>  <strong class="li hv">public static </strong><em class="lq">input</em>(key: <strong class="li hv">string</strong>, templateOptions?: FormlyTemplateOptions, options?: <strong class="li hv">any</strong>): FormlyFieldConfig {<br/>    <strong class="li hv">return this</strong>.<em class="lq">field</em>('input', key, templateOptions, options);<br/>  }<br/>}</span></pre><p id="ef7f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如您所看到的，这个类有不同的方法来帮助您进行字段配置。</p><p id="0d0b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用这个类，字段配置应该如下所示:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="6ad3" class="jq jr hu li b fv lm ln l lo lp">import { Field } from '../../helpers/fields';</span><span id="2770" class="jq jr hu li b fv ls ln l lo lp">export <strong class="li hv">const</strong> EMAIL = (disabled) =&gt; ({<br/>  ...<strong class="li hv">Field</strong>.email(<br/>    'email', // key<br/>    { // Template Options<br/>      placeholder: 'Enter your email',<br/>      required: true,<br/>      disabled: disabled<br/>    }<br/>  )<br/>});</span></pre><p id="f9bb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">表单架构应该是这样的:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="e2f5" class="jq jr hu li b fv lm ln l lo lp">import { <strong class="li hv">PERCENTAGE_INPUT</strong>, <strong class="li hv">MONEY_INPUT</strong> } from './form-elements';</span><span id="8bb1" class="jq jr hu li b fv ls ln l lo lp"><strong class="li hv">export</strong> <strong class="li hv">const</strong> MONEY_FORM = (disabled = false) =&gt; ({<br/>  <strong class="li hv">id</strong>: 'MONEY',<br/>  <strong class="li hv">template</strong>: [<br/>    {<br/>      <strong class="li hv">key</strong>: 'money',<br/>      <strong class="li hv">wrappers</strong>: ['panel'],<br/>      <strong class="li hv">templateOptions</strong>: {<br/>        label: 'Formly'<br/>      },<br/>      <strong class="li hv">fieldGroup</strong>: [<br/>        <strong class="li hv">MONEY_INPUT</strong>(disabled),<br/>        <strong class="li hv">PERCENTAGE_INPUT</strong>(disabled)<br/>      ]<br/>    }<br/>  ]<br/>});</span></pre><p id="e5ff" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最后，您有三个不同的对象:1)第一个对象(EMAIL)是描述单个表单元素所必需的，2)第二个对象是创建一个表单组(MONEY_FORM)并分配一个表单组标识符，3)第三个对象(FORMS_VALUES)是通过id映射所有表单。</p><p id="1506" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">7 .<strong class="it hv">。生成<em class="lq">ui-form . service . ts</em>T3】</strong></p><p id="ac1e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们需要此服务来确保创建集合的新实例。记住数组和对象是通过引用传递的。这样，当应用程序需要表单配置时，应该会生成集合的新实例。</p><p id="13ed" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这可以通过下面的代码来完成:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="a1c6" class="jq jr hu li b fv lm ln l lo lp">generateCleanConfiguration(clone: object[]) {<br/>    return <strong class="li hv">JSON.parse</strong>(<strong class="li hv">JSON.stringify</strong>(clone));<br/>}</span></pre><h2 id="ebf0" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">使用我们以前的配置</h2><p id="41f6" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">最后，我们准备开始使用Formly。为此，我们需要生成一个新的Angular组件，用formly指令设置我们的HTML并获得一个表单模式。</p><p id="c383" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">它看起来像这样:</p><pre class="kr ks kt ku fq lh li lj lk aw ll dt"><span id="bdc2" class="jq jr hu li b fv lm ln l lo lp">/** HTML */</span><span id="4d97" class="jq jr hu li b fv ls ln l lo lp">&lt;form [formGroup]="form" (ngSubmit)="submit()"&gt;<br/>  <strong class="li hv">&lt;formly-form [model]="model" [fields]="fields" [form]="form"&gt;&lt;/formly-form&gt;</strong><br/>&lt;/form&gt;</span><span id="3c51" class="jq jr hu li b fv ls ln l lo lp">/** Component */<br/>import { Component } from '<a class="ae jp" href="http://twitter.com/angular/core" rel="noopener ugc nofollow" target="_blank">@angular/core</a>';<br/>import { FormGroup } from '<a class="ae jp" href="http://twitter.com/angular/forms" rel="noopener ugc nofollow" target="_blank">@angular/forms</a>';<br/>import { FormlyFieldConfig } from '<a class="ae jp" href="http://twitter.com/ngx" rel="noopener ugc nofollow" target="_blank">@ngx</a>-formly/core';<br/>import { FormlyService } from '../ui-form/formly.service';</span><span id="f27a" class="jq jr hu li b fv ls ln l lo lp"><strong class="li hv">@Component</strong>({<br/>  selector: 'app-formly',<br/>  templateUrl: './formly.component.html',<br/>  providers: [ FormlyService ]<br/>})<br/>export class FormlyComponent {<br/>  public <strong class="li hv">form</strong> = new FormGroup({});<br/>  public <strong class="li hv">fields</strong>: FormlyFieldConfig[] = [<br/>    ...<strong class="li hv">this.formlyService.getDefaultForm</strong>()<br/>  ];<br/>  public model = {}</span><span id="0031" class="jq jr hu li b fv ls ln l lo lp">constructor(private formlyService: <strong class="li hv">FormlyService</strong>) {}</span><span id="3fdc" class="jq jr hu li b fv ls ln l lo lp">}</span></pre><p id="8dc9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">正如您所看到的，我们的设置就绪后，生成表单只需要1)一个反应式表单，2)一个使用我们的<strong class="it hv"><em class="lq">ui-formly . service</em></strong>的字段配置，以及3)一个存储表单模型的对象。</p><h2 id="98f5" class="jq jr hu bd js jt ju jv jw jx jy jz ka jc kb kc kd jg ke kf kg jk kh ki kj kk dt translated">工作项目</h2><p id="793c" class="pw-post-body-paragraph ir is hu it b iu kl iw ix iy km ja jb jc kn je jf jg ko ji jj jk kp jm jn jo hn dt translated">您可以在这里找到这个配置的工作示例。在该示例中，您可以检查常规反应式表单组件之间的差异(参见<strong class="it hv">)。/reactive-form" </strong>文件夹)和一个Formly组件(见<strong class="it hv">)。/formly" </strong>文件夹)。</p><figure class="kr ks kt ku fq kv"><div class="bz el l di"><div class="lu lv l"/></div><figcaption class="lc ld fg fe ff le lf bd b be z ek">Working reactive form + Formly</figcaption></figure><p id="7e2b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">感谢阅读，请在Medium和<a class="ae jp" href="https://twitter.com/thecapnews" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上关注我，或在<a class="ae jp" href="https://www.linkedin.com/in/cristian-marquez/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上向我发送连接请求。</p></div></div>    
</body>
</html>