<html>
<head>
<title>Principles of Component API (Prop) Design</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">组件API (Prop)设计原则</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/principles-of-component-api-prop-design-bb20cd58da54?source=collection_archive---------7-----------------------#2018-09-24">https://medium.com/hackernoon/principles-of-component-api-prop-design-bb20cd58da54?source=collection_archive---------7-----------------------#2018-09-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="ed03" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用设计良好和维护良好的组件是令人愉快的。当事情<em class="jp">正常工作</em>并且你能够用预先存在的组件快速构建一个漂亮的UI时，这种感觉很棒。</p><p id="15e3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">另一方面，我们可能都感受过使用设计不佳的组件的痛苦。这导致了混乱，并且要花费很多额外的精力去弄清楚如何使用你所需要的构建模块。我发现自己说了以下的话:</p><ul class=""><li id="b3fd" class="jr js hu it b iu iv iy iz jc jt jg ju jk jv jo jw jx jy jz dt translated">我这里需要的道具叫什么？</li><li id="d6c9" class="jr js hu it b iu ka iy kb jc kc jg kd jk ke jo jw jx jy jz dt translated">为什么现在是红色的，不应该是蓝色的吗？</li><li id="2a72" class="jr js hu it b iu ka iy kb jc kc jg kd jk ke jo jw jx jy jz dt translated">我希望有一个道具来…</li></ul><p id="366e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有无数种不同的方法可以为你的组件设计API，并且很难知道什么能提供最好的开发者体验。幸运的是，我认为可以遵循一些原则，让其他人更容易消费和贡献您的组件。</p><h1 id="a6e1" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">让做错事变得困难</h1><p id="97ee" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">允许互相冲突或互相覆盖的属性组合是很容易的。我看到的一个常见的例子是，一个<code class="eh li lj lk ll b">Button</code>组件可以有<a class="ae jq" href="https://react.semantic-ui.com/elements/button/#types-emphasis" rel="noopener ugc nofollow" target="_blank">不同的强调级别或颜色</a>。</p><p id="fd38" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于消费者来说，意外使用错误的布尔道具组合是很常见的(例如<code class="eh li lj lk ll b">secondary</code>和<code class="eh li lj lk ll b">negative</code>)。使用布尔道具的语法非常好，但是要注意不要给用户太多的道具组合来选择。</p><p id="cb9f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为替代，考虑使用枚举来表示颜色、间距和大小。例如，不要使用<code class="eh li lj lk ll b">small</code>、<code class="eh li lj lk ll b">medium</code>和<code class="eh li lj lk ll b">large</code>作为布尔属性，而是使用接受<code class="eh li lj lk ll b">"small"</code>、<code class="eh li lj lk ll b">"medium"</code>和<code class="eh li lj lk ll b">"large"</code>的<code class="eh li lj lk ll b">size</code>属性。</p><h1 id="f16f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">少即是多</h1><p id="e92d" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">我们都使用过看似拥有无数道具的组件。如果你把正确的道具组合传递给一个组件，你会发现它会按照你需要的方式运行，这是很好的，但是工程师有时不可能记住所有的选项。在文档和代码之间进行上下文切换的成本很高，所以尽量避免组件的消费者陷入这种时间陷阱。</p><p id="ea12" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我认为一个组件上的大量道具有点代码味道。当我看到为什么一个组件上有这么多的道具时，我发现这通常是因为它试图做太多的事情。尝试在组件中遵循单一责任原则(SRP ),并考虑将大型组件分解为解决单一问题的较小组件。</p><p id="0350" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">快速提示:</strong>考虑通过主组件的点符号来访问这些组件。例如<code class="eh li lj lk ll b">Table.Row</code>和<code class="eh li lj lk ll b">Table.Cell</code>而不是<code class="eh li lj lk ll b">TableRow</code>和<code class="eh li lj lk ll b">TableCell</code>。向我的同事<a class="lm ln gr" href="https://medium.com/u/778a0d27a9c1?source=post_page-----bb20cd58da54--------------------------------" rel="noopener" target="_blank">斯潘塞·米斯科维奇</a>致敬，因为他最近写了一篇关于这个主题的文章<a class="ae jq" rel="noopener" href="/@skovy/using-component-dot-notation-with-typescript-to-create-a-set-of-components-b0b2aad4892b">。</a></p><h1 id="4f80" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">使用类型</h1><p id="89b2" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">有了TypeScript、Flow和PropTypes，就没有理由不对组件提供某种级别的类型安全。这不仅可以确保组件得到正确使用，还可以让您利用额外的工具，让消费者更容易看到可用的道具并正确分配它们。</p><p id="2978" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">快速提示:</strong>对道具类型使用枚举而不是字符串，这样你就可以很容易地传递你的道具所允许的特定值。</p><figure class="lp lq lr ls fq lt fe ff paragraph-image"><div class="fe ff lo"><img src="../Images/b8b9f4d347418fd8b444475b5cb11636.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/1*cT7C0Tk53cilIYNWNo8KfA.gif"/></div></figure><h1 id="a5f4" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">保持一致</h1><p id="86f7" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">如果你有在你的整个组件系统中做同样事情的道具，确保你给它们起同样的名字。不要在一个道具中使用<code class="eh li lj lk ll b">disabled</code>，而在下一个道具中使用<code class="eh li lj lk ll b">enabled</code>。</p><p id="003a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您在多个组件上有颜色、大小或间距属性，请尝试让它们从一个组件到下一个组件接受相同的值。例如，不要在一个组件上有一个<code class="eh li lj lk ll b">variant="primary|secondary|danger”</code>支柱和一个<code class="eh li lj lk ll b">color="blue|grey|red"</code>。</p><h1 id="be27" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">要清楚</h1><p id="0168" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">尤其是使用布尔型道具时，使用读起来很好但意思不清楚的词会很有诱惑力。例如，我们曾经有一个<code class="eh li lj lk ll b">fitted</code>支柱来移除一些组件上的余量。这是有问题的，原因如下:</p><ol class=""><li id="1c2c" class="jr js hu it b iu iv iy iz jc jt jg ju jk jv jo lw jx jy jz dt translated">开发者不清楚<code class="eh li lj lk ll b">fitted</code>是做什么的。我们总是不得不解释它，人们不得不思考“那个去除利润的道具叫什么？”🤔</li><li id="3367" class="jr js hu it b iu ka iy kb jc kc jg kd jk ke jo lw jx jy jz dt translated">随着时间的推移，这个道具的用法变得不一致。视觉上，它只是删除了元素周围的一些额外的空间，但有时是底部空白，有时是顶部空白，有时是填充。没有关于何时或如何使用它的明确指导方针。</li><li id="d799" class="jr js hu it b iu ka iy kb jc kc jg kd jk ke jo lw jx jy jz dt translated">我们开始收到来自设计部门的请求，要求创建具有不同填充和边距的组件的附加变体。我们考虑过增加像<code class="eh li lj lk ll b">tight</code>、<code class="eh li lj lk ll b">heavy</code>、<code class="eh li lj lk ll b">fluffy</code>、<code class="eh li lj lk ll b">relaxed</code>和<code class="eh li lj lk ll b">loose</code>这样的道具。像这样引入专有名称肯定会使☝️提到的问题更加复杂</li></ol><p id="63ba" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果一个道具要控制填充，通常最好是明确的，这就是我们用像<code class="eh li lj lk ll b">padding="small|large"</code>这样的道具所做的。你可以争辩说这读起来不太好，但是它很容易记住，我们的工具让我们能够从可用选项中快速选择。</p><h1 id="154f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论</h1><p id="af0a" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">我可以满怀信心地说，这些原则帮助我构建了更易于维护、使用起来更愉快的组件，但它们仍在不断发展。我从队友的反馈和反复试验中学到了很多，但我也想从你和你的经历中学习。请分享对你和你的团队有用的东西！</p></div><div class="ab cl lx ly hc lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="5678" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">在起草这篇文章的时候，我看到<a class="lm ln gr" href="https://medium.com/u/db72389e89d8?source=post_page-----bb20cd58da54--------------------------------" rel="noopener" target="_blank"> Kent C. Dodds </a>写了<a class="ae jq" href="https://blog.kentcdodds.com/make-impossible-states-impossible-cf85b97795c1" rel="noopener ugc nofollow" target="_blank">一篇关于我提到的第一个原则的深度文章</a>。值得一读！</p><figure class="lp lq lr ls fq lt"><div class="bz el l di"><div class="me mf l"/></div></figure></div></div>    
</body>
</html>