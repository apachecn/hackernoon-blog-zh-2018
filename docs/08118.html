<html>
<head>
<title>Protecting Hybrid Mobile Apps with Ionic and Jscrambler</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Ionic和Jscrambler保护混合移动应用</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/protecting-hybrid-mobile-apps-with-ionic-and-jscrambler-c2ddd8dbf843?source=collection_archive---------33-----------------------#2018-09-25">https://medium.com/hackernoon/protecting-hybrid-mobile-apps-with-ionic-and-jscrambler-c2ddd8dbf843?source=collection_archive---------33-----------------------#2018-09-25</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/00e131c25324d4e0d90cf7f35ef95719.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BOmuUIwOyesEr2dS.jpg"/></div></div></figure><p id="508e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">本文是我们</strong> <a class="ae ka" rel="noopener" href="/@Jscrambler/protecting-hybrid-mobile-apps-with-ionic-and-jscrambler-c0996593717f"> <strong class="je hv">之前教程</strong> </a> <strong class="je hv">的重大更新。</strong></p><p id="1f04" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本文最新更新时，<em class="kb"> Ionic </em>的版本是4.0.6，<em class="kb"> Cordova </em>的版本是8.0.0。</p><h1 id="1050" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">介绍</h1><p id="646e" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated"><a class="ae ka" href="https://ionicframework.com/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Ionic </em> </a>是一个开源框架，旨在构建面向主流移动操作系统的类似原生的移动web应用。以相同的代码库为目标的不同系统加速了开发过程，同时减少了上市时间和可维护性工作。</p><p id="84b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb"> Ionic </em>基于两大框架构建，Apache的<a class="ae ka" href="https://cordova.apache.org/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Cordova </em> </a>和Google的<a class="ae ka" href="https://angular.io/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Angular </em> </a>。它背后有一个伟大的生态系统，有全面的<a class="ae ka" href="https://ionicframework.com/docs/" rel="noopener ugc nofollow" target="_blank">文档</a>和<a class="ae ka" href="https://market.ionicframework.com/" rel="noopener ugc nofollow" target="_blank">市场</a>，在那里你可以找到许多主题和插件来帮助你入门。</p><p id="d7e5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">本指南将解释如何使用<a class="ae ka" href="https://jscrambler.com/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Jscrambler </em> </a>保护您的<em class="kb"> Ionic 4 </em>应用程序，并将其集成到构建过程中。</p><h1 id="223b" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">如何创建离子应用程序</h1><p id="c406" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">开始使用<em class="kb"> Ionic </em>相当容易。首先，确保将<em class="kb">离子</em>安装在<em class="kb">科尔多瓦</em>旁边。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="6132" class="lo kd hu lk b fv lp lq l lr ls">npm install -g cordova ionic</span></pre><p id="6628" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">出于本教程的目的，我们将使用官方的<a class="ae ka" href="https://github.com/ionic-team/ionic-conference-app" rel="noopener ugc nofollow" target="_blank"> Ionic演示应用</a>作为模板。有关模板的更多信息，请参见<a class="ae ka" href="https://ionicframework.com/docs/cli/starters.html" rel="noopener ugc nofollow" target="_blank">正式文档</a>。</p><p id="a69b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们<a class="ae ka" href="https://github.com/JscramblerBlog/ionic-conference-app" rel="noopener ugc nofollow" target="_blank">分叉</a>应用的2018年8月30日提交，将在本教程中使用。</p><p id="6476" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以通过运行以下命令安装Ionic演示应用程序:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="9f67" class="lo kd hu lk b fv lp lq l lr ls">ionic start myConferenceApp <a class="ae ka" href="https://github.com/JscramblerBlog/ionic-conference-app" rel="noopener ugc nofollow" target="_blank">https://github.com/JscramblerBlog/ionic-conference-app</a></span></pre><p id="8e34" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb"> Ionic </em>会下载安装演示App的所有依赖项，基于<em class="kb"> Angular 5 </em>，使用<a class="ae ka" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> TypeScript </em> </a>。</p><p id="443c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这就是我们拥有一个功能性<em class="kb"> Ionic </em>应用所需要的一切。在浏览器中运行应用程序，检查是否一切就绪。默认情况下，它将在端口<code class="eh lt lu lv lk b">8100</code>的<code class="eh lt lu lv lk b">localhost</code>上运行。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="05dd" class="lo kd hu lk b fv lp lq l lr ls">cd \myConferenceApp<br/>ionic serve</span></pre><p id="3cf9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您需要更多入门信息，请参考<a class="ae ka" href="https://ionicframework.com/getting-started/" rel="noopener ugc nofollow" target="_blank">官方文档</a>。</p><h1 id="47d2" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">我们的离子应用的结构</h1><p id="6227" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">我们的<em class="kb">离子</em>应用的基础项目结构如下:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="f74d" class="lo kd hu lk b fv lp lq l lr ls">myConferenceApp/<br/>|-- config.xml<br/>|-- platforms/<br/>| |-- android/<br/>| |-- windows/<br/>| |-- ios/<br/>|-- plugins/<br/>|-- resources/<br/>|-- src/<br/>| |-- app/<br/>| |-- assets/<br/>| |-- environments/<br/>| |-- theme/<br/>|-- www/</span></pre><ul class=""><li id="d2bd" class="lw lx hu je b jf jg jj jk jn ly jr lz jv ma jz mb mc md me dt translated"><code class="eh lt lu lv lk b">config.xml</code>包含您的<em class="kb">离子</em>应用的配置。</li><li id="e884" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">www</code>目录包含应用程序的所有源代码和资产，如HTML、CSS和JavaScript。</li><li id="45dd" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">src</code>目录展示了应用程序的所有源代码。然后构建源代码并打包到<code class="eh lt lu lv lk b">www</code>目录中(Cordova 使用该目录部署到每个平台)。</li></ul><p id="821d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lt lu lv lk b">src</code>目录的结构取决于所使用的构建工具。一些样板文件使用<a class="ae ka" href="https://webpack.github.io/" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> webpack </em> </a>，这是一个模块捆绑器，它允许在构建应用程序时进行很大程度的定制。然而，官方的<em class="kb"> Ionic </em>模板停止了它们的<a class="ae ka" href="https://gulpjs.com/" rel="noopener ugc nofollow" target="_blank"> <em class="kb">囫囵吞下</em> </a>构建过程，取而代之的是一个自定义的<a class="ae ka" href="https://github.com/ionic-team/ionic-app-scripts" rel="noopener ugc nofollow" target="_blank"><em class="kb">Ionic-app-scripts</em></a>。</p><p id="992f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你使用新的构建过程和<em class="kb"> ionic-app-scripts </em>，那么你的<code class="eh lt lu lv lk b">src</code>目录应该遵循这样的结构:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="737a" class="lo kd hu lk b fv lp lq l lr ls">|-- src/<br/>| |-- app/<br/>| | |-- pages/<br/>| | | |-- page1/<br/>| | | |-- page2/<br/>| |-- assets/<br/>| |-- environments/<br/>| |-- theme/</span></pre><ul class=""><li id="5a56" class="lw lx hu je b jf jg jj jk jn ly jr lz jv ma jz mb mc md me dt translated"><code class="eh lt lu lv lk b">app</code>子目录包含应用程序的模块和组件，包括<code class="eh lt lu lv lk b">dev</code>和<code class="eh lt lu lv lk b">prod</code>环境的设置。</li><li id="a0e4" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">pages</code>目录包含应用程序每个页面的文件夹。每个文件夹包含一个<code class="eh lt lu lv lk b">html</code>、<code class="eh lt lu lv lk b">scss</code>和<code class="eh lt lu lv lk b">typescript</code>文件，负责赋予页面表单和行为。</li><li id="9c6d" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">assets</code>子目录类似于<code class="eh lt lu lv lk b">resources</code>目录，尽管该文件夹中的文件与设备大小成横向关系。</li><li id="f267" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">theme</code>文件夹包含<code class="eh lt lu lv lk b">scss</code>文件，允许定制应用程序的主题。</li></ul><h1 id="4426" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">在构建过程中集成Jscrambler</h1><h1 id="bcb7" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">安装依赖项</h1><p id="2fc6" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">我们与<em class="kb"> Jscrambler </em>集成的第一步是安装<a class="ae ka" href="https://github.com/jscrambler/jscrambler/tree/master/packages/jscrambler-cli" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Jscrambler </em> API客户端</a>。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="93b5" class="lo kd hu lk b fv lp lq l lr ls">npm install jscrambler --save-dev</span></pre><h1 id="adab" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">连接Jscrambler</h1><p id="f8b8" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">为了将<em class="kb"> Jscrambler </em>集成到我们应用程序的构建过程中，我们需要在<code class="eh lt lu lv lk b">package.json</code>的<em class="kb">脚本</em>部分创建一个CLI钩子。该部分应该如下所示:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="9e31" class="lo kd hu lk b fv lp lq l lr ls">“scripts”: {<br/>  "ng": "ng",<br/>  "start": "ng serve",<br/>  "build": "ng build",<br/>  "test": "ng test",<br/>  "lint": "ng lint",<br/>  "precommit": "npm run lint",<br/>  "ionic:build:after": "jscrambler"<br/>}</span></pre><p id="55dd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">特定的<code class="eh lt lu lv lk b">“ionic:build:after”: “jscrambler”</code>钩子将在构建过程完成后触发<code class="eh lt lu lv lk b">jscrambler</code>命令。</p><p id="5804" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了使这个命令可执行，我们需要将一个<code class="eh lt lu lv lk b">.jscramblerrc</code>文件添加到我们项目的根文件夹中，它将保存Jscrambler设置。该文件应该具有以下结构:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="b848" class="lo kd hu lk b fv lp lq l lr ls">{<br/> "keys": {<br/>   "accessKey": "ACCESS_KEY_HERE",<br/>   "secretKey": "SECRET_KEY_HERE"<br/> },<br/> "applicationId": "APP_ID_HERE",<br/> "filesSrc": [<br/>   "./www/main.js"<br/> ],<br/> "filesDest": "./",<br/> "params": [<br/>  {<br/>    "name": "whitespaceRemoval"<br/>  },<br/>  {<br/>    "name": "dotToBracketNotation"<br/>  },<br/>  {<br/>    "name": "stringConcealing"<br/>  },<br/>  {<br/>    "name": "functionReordering"<br/>  },<br/>  {<br/>    "options": {<br/>      "features": [<br/>        "opaqueFunctions"<br/>      ]<br/>    },<br/>    "name": "functionOutlining"<br/>  },<br/>  {<br/>    "name": "propertyKeysObfuscation"<br/>  },<br/>  {<br/>    "name": "regexObfuscation"<br/>  },<br/>  {<br/>    "options": {<br/>      "features": [<br/>        "opaqueSteps"<br/>      ]<br/>    },<br/>    "name": "controlFlowFlattening"<br/>  },<br/>  {<br/>    "name": "booleanToAnything"<br/>  },<br/>  {<br/>    "name": "identifiersRenaming"<br/>  },<br/>  {<br/>     "options": {<br/>       "options": [<br/>         "tolerateBenignPoisoning"<br/>       ],<br/>       "threshold": 0<br/>     },<br/>     "name": "selfDefending"<br/>   }<br/> ],<br/> "areSubscribersOrdered": false,<br/> "bail": true<br/> }</span></pre><p id="12fd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">创建文件后，您需要编辑以下属性:</p><ul class=""><li id="f5a4" class="lw lx hu je b jf jg jj jk jn ly jr lz jv ma jz mb mc md me dt translated"><code class="eh lt lu lv lk b">"accessKey": "ACCESS_KEY_HERE”</code></li><li id="d920" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">"secretKey": "SECRET_KEY_HERE”</code></li><li id="a2a3" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh lt lu lv lk b">"applicationId": "APP_ID_HERE"</code></li></ul><p id="a690" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以在Web UI上的<a class="ae ka" href="https://app.jscrambler.com/settings" rel="noopener ugc nofollow" target="_blank">我的设置</a>中找到这两个键(见下图)。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/30ffde478b1378f09dc0ac6d08e12f1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/0*Q33MOCWwGRjWNyde.jpg"/></div></figure><p id="082d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要获得您的<code class="eh lt lu lv lk b">applicationId</code>，请转到Web应用程序，创建一个新应用程序，并检查文本编辑器上方的:</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/dc79be1973bd7f5fea604d65d2f729c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/0*_j-LTJTIfKBFub6U.jpg"/></div></figure><p id="9131" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">随意改变<code class="eh lt lu lv lk b">params</code>，利用<em class="kb"> Jscrambler </em>提供的任何变换。你可以在这里找到所有可用的转换。</p><p id="7a07" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">提示:</strong>有一种快速的方法可以获得所需的密钥、<code class="eh lt lu lv lk b">applicationID</code>和您希望申请的<code class="eh lt lu lv lk b">params</code>。只需进入<a class="ae ka" href="https://app.jscrambler.com/dashboard" rel="noopener ugc nofollow" target="_blank"> Web应用</a>，创建一个新的应用，选择您想要的转换，并下载JSON文件。现在，您可以打开它并将相应的部分复制到<code class="eh lt lu lv lk b">.jscramblerrc</code>文件中。关于这方面的更多细节，请参考我们关于如何使用CLI的<a class="ae ka" href="https://blog.jscrambler.com/jscrambler-101-how-to-use-the-cli/" rel="noopener ugc nofollow" target="_blank">博文</a>。</p><p id="5b2b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您也可以更改<code class="eh lt lu lv lk b">filesSrc</code>来匹配您需要/想要保护的文件。对于我们的例子——以及所有Ionic 4应用程序——我们建议保护<code class="eh lt lu lv lk b">main.js</code>,因为这个文件通常包含要隐藏的逻辑。你应该让<code class="eh lt lu lv lk b">vendor.js</code>文件不受保护，因为保护它通常不会给受保护的应用带来任何好处。</p><p id="4c83" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过使用<code class="eh lt lu lv lk b">filesDest: './'</code>，我们发送保护的文件将被它们的受保护版本替换。</p><h1 id="4eab" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">构建应用程序</h1><p id="d560" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated"><strong class="je hv">注意:</strong>如果您正在使用<em class="kb"> Ionic v1 </em>，请查看<em class="kb">使用Ionic v1 </em>附件(在最后找到)，然后返回此处。该附录解决了在保护<em class="kb"> AngularJS </em>时遇到的一些问题，这些问题与依赖项的注入方式有关。</p><p id="5fd8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们现在准备好保护我们的代码并构建我们的应用程序:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="8fbe" class="lo kd hu lk b fv lp lq l lr ls">ionic cordova build android --prod --release</span></pre><p id="69c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Android 的版本将多个<code class="eh lt lu lv lk b">apk</code>文件放在<code class="eh lt lu lv lk b">platforms/android/app/build/outputs/apk</code>上。</p><p id="2e29" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的build命令将生成多个生产<code class="eh lt lu lv lk b">apk</code>文件，每个文件针对不同的架构。出于本教程的目的，我们将选择armv7 <code class="eh lt lu lv lk b">apk</code>文件。</p><p id="29b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">除非先签名，否则<code class="eh lt lu lv lk b">apk</code>不会在设备上运行。如果你试图安装一个未签名的<code class="eh lt lu lv lk b">apk</code>，那么设备将会提示一个解析错误。</p><p id="c75f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了在Android设备上运行它，我们需要生成一个密钥。如果你已经安装了JDK，首先生成一个密钥</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="8ce3" class="lo kd hu lk b fv lp lq l lr ls">keytool -genkey -v -keystore my-release-key.keystore -alias alias_name -keyalg RSA -keysize 2048 -validity 10000</span></pre><p id="cfc1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后用它在<code class="eh lt lu lv lk b">apk</code>上签名:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="d557" class="lo kd hu lk b fv lp lq l lr ls">jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore my-release-key.keystore android-release-unsigned.apk alias_name</span></pre><p id="59b8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请调整<code class="eh lt lu lv lk b">android-release-unsigned.apk</code>以匹配您生成的未签名<code class="eh lt lu lv lk b">apk</code>文件的名称。</p><p id="0338" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后，使用<code class="eh lt lu lv lk b">zipalign</code>优化应用文件。你可以在<code class="eh lt lu lv lk b">path/to/Android/sdk/build-tools/VERSION/zipalign</code>下找到<code class="eh lt lu lv lk b">zipalign</code>工具。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="8574" class="lo kd hu lk b fv lp lq l lr ls">zipalign -v 4 android-release-unsigned.apk myProtectedApp.apk</span></pre><p id="6a40" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你完了！现在，您已经准备好使用应用程序文件。</p><p id="3648" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以使用任何文件提取应用程序来验证您的<code class="eh lt lu lv lk b">apk</code>文件是否具有受保护的资产。文件应放在<code class="eh lt lu lv lk b">assets/www</code>下。</p><p id="6001" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你需要更多关于如何发布你的应用程序的信息，或者关于如何部署到iOS(这需要你注册成为一名<em class="kb">苹果开发者</em>)请遵循<a class="ae ka" href="http://ionicframework.com/docs/guide/publishing.html" rel="noopener ugc nofollow" target="_blank"> <em class="kb"> Ionic </em>发布指南</a>。</p><h1 id="9e8e" class="kc kd hu bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz dt translated">结论</h1><p id="d192" class="pw-post-body-paragraph jc jd hu je b jf la jh ji jj lb jl jm jn lc jp jq jr ld jt ju jv le jx jy jz hn dt translated">Ionic是一个有效的框架，用于创建功能强大、响应迅速的多平台应用程序，无需本地平台知识，从而加快开发速度。</p><p id="4a6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">通过将构建过程与<em class="kb"> Jscrambler </em>结合起来，你可以在移动平台上保护你的代码，只需添加一个在构建你的应用之前执行的钩子，从而节省你在构建或部署过程中的时间。</p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><p id="73d6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">【blog.jscrambler.com】最初发表于<a class="ae ka" href="https://blog.jscrambler.com/protecting-hybrid-mobile-apps-with-ionic-and-jscrambler/" rel="noopener ugc nofollow" target="_blank"><em class="kb"/></a><em class="kb">。</em></p></div></div>    
</body>
</html>