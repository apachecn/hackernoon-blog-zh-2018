<html>
<head>
<title>How to develop Android UI Component for React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ä¸ºReact Nativeå¼€å‘Android UIç»„ä»¶</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/how-to-develop-android-ui-component-for-react-native-43b121272eb8?source=collection_archive---------3-----------------------#2018-09-30">https://medium.com/hackernoon/how-to-develop-android-ui-component-for-react-native-43b121272eb8?source=collection_archive---------3-----------------------#2018-09-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class="fi fk ir is it ab cb"><figure class="iu iv iw ix iy iz ja paragraph-image"><div role="button" tabindex="0" class="jb jc di jd bf je"><img src="../Images/c5ed7bc740bd456c0f5b8e50b2dcce00.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/format:webp/1*7EYzrsZYTQVJ2MuEuvV5EQ.png"/></div></figure><figure class="iu iv jh ix iy iz ja paragraph-image"><div role="button" tabindex="0" class="jb jc di jd bf je"><img src="../Images/29be0406380ff6451116adee9395fcd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1520/format:webp/1*6_VG7Vhks9d_yLUMYpnZfw.png"/></div><figcaption class="ji jj fg fe ff jk jl bd b be z ek jm di jn jo">Android UI Component for React Native (Source: <a class="ae jp" href="http://47billion.com" rel="noopener ugc nofollow" target="_blank">47Billion</a>)</figcaption></figure></div><p id="f6d1" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">åœ¨æˆ‘ä»¬ç”¨React Nativeå¼€å‘çš„ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬æƒ³ä½¿ç”¨å¸¦æœ‰æ–‡æœ¬è¦†ç›–çš„è§†é¢‘æ’­æ”¾å™¨ã€‚å°½ç®¡React Nativeä¸­æœ‰å¾ˆå¤šè§†é¢‘æ’­æ”¾å™¨çš„å®ç°ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªæä¾›è¿™æ ·çš„åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘ä»¬å†³å®šå¼€å‘è‡ªå·±çš„ç»„ä»¶ï¼Œå¹¶åœ¨Reactæœ¬æœºä»£ç ä¸­ä½¿ç”¨å®ƒã€‚</p><p id="68f0" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">æœ¬æ–‡æè¿°äº†å¦‚ä½•å°†ä»»ä½•Androidè§†å›¾ç»„ä»¶è½¬æ¢ä¸ºReactåŸç”Ÿç»„ä»¶ã€‚å½“æ‚¨éœ€è¦ä½¿ç”¨ä»»ä½•Androidè§†å›¾æˆ–React Nativeåº”ç”¨ç¨‹åºä¸­çš„è‡ªå®šä¹‰è§†å›¾ç»„ä»¶æ—¶ï¼Œè¿™æ˜¯å¿…éœ€çš„ã€‚</p><h2 id="940b" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kb kz la lb kf lc ld le kj lf lg lh li dt translated">åˆ›å»ºè§†å›¾</h2><p id="6365" class="pw-post-body-paragraph jq jr hu js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn hn dt translated">åˆ›å»ºä¸€ä¸ªReactæœ¬åœ°é¡¹ç›®ã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸ºæœ¬åœ°ä»£ç å‡†å¤‡äº†Androidå’ŒIOSæ–‡ä»¶å¤¹ã€‚åœ¨Android Studioä¸­æ‰“å¼€Androidä»£ç ï¼Œå¹¶ä½¿ç”¨åŸç”Ÿjavaä»£ç åˆ›å»ºä¸€ä¸ªè§†å›¾ã€‚</p><h2 id="4b9e" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kb kz la lb kf lc ld le kj lf lg lh li dt translated">å®ç°SimpleViewManager</h2><p id="7a2b" class="pw-post-body-paragraph jq jr hu js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn hn dt translated">ç¼–å†™ä¸€ä¸ªä»ViewManagerç»§æ‰¿çš„ç±»ã€‚åœ¨è¿™ä¸ªç±»ä¸­ï¼ŒæŒ‡å®šåœ¨Reactæœ¬åœ°ä»£ç ä¸­ä½¿ç”¨Androidä»£ç çš„å“ªä¸ªè§†å›¾ã€‚</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="a570" class="ko kp hu lt b fv lx ly l lz ma">public class VideoViewManager extends SimpleViewManager&lt;VideoView&gt;</span></pre><p id="7d04" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">è¶…ç±»<strong class="js hv">simple viewmanager&lt;VideoView&gt;</strong>æŒ‡å®šæˆ‘ä»¬è¦é€šè¿‡è¿™ä¸ªç±»æš´éœ²Androidçš„video viewæ¥è¿›è¡ŒåŸç”Ÿååº”ã€‚ä¸€ä¸ª<strong class="js hv">è§†å›¾ç®¡ç†å™¨</strong>æ˜¯ä¸€ä¸ªReactæœ¬åœ°æ¥å£ï¼Œè´Ÿè´£å®ä¾‹åŒ–å’Œæ›´æ–°åº”ç”¨ç¨‹åºä¸­çš„è§†å›¾ã€‚<strong class="js hv"> SimpleViewManager </strong>æ˜¯ä¸€ä¸ªä½¿ç”¨æˆ‘ä»¬çš„è§†å›¾çš„æ³›å‹ç±»ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Androidä¸­å·²ç»å­˜åœ¨çš„ä»»ä½•è§†å›¾ï¼Œå¦‚ImageViewã€VideoViewã€TextViewã€LinearLayoutï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥å®ç°å’Œä½¿ç”¨è‡ªå®šä¹‰è§†å›¾ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯è§†é¢‘è§†å›¾ã€‚</p><p id="4a4a" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">åœ¨ç®¡ç†å™¨ä¸­ï¼Œä½¿ç”¨ä»¥ä¸‹æ­¥éª¤å¯¹ç»„ä»¶è¿›è¡Œåˆå§‹è®¾ç½®:</p><ol class=""><li id="aaba" class="mb mc hu js b jt ju jx jy kb md kf me kj mf kn mg mh mi mj dt translated">ç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ª<strong class="js hv"> ViewManager </strong>æˆ–å…¶å­ç±»(<strong class="js hv"> SimpleViewManager </strong>)çš„ç±»</li><li id="c6d0" class="mb mc hu js b jt mk jx ml kb mm kf mn kj mo kn mg mh mi mj dt translated">å®ç°æ–¹æ³•<strong class="js hv"> getName </strong>ï¼Œå®ƒè¿”å›ä¸€ä¸ªæˆ‘ä»¬ç”¨æ¥ä»React Nativeè·å–ç®¡ç†å™¨çš„å­—ç¬¦ä¸²å¸¸é‡</li><li id="80b5" class="mb mc hu js b jt mk jx ml kb mm kf mn kj mo kn mg mh mi mj dt translated">å®ç°<strong class="js hv">createview instance(ThemedReactContext react context)</strong>æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºç»„ä»¶çš„ä¸€ä¸ªå®ä¾‹å¹¶è¿”å›å¯¹è±¡ã€‚</li></ol><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="1196" class="ko kp hu lt b fv lx ly l lz ma">public class <strong class="lt hv">VideoViewManager</strong> extends <strong class="lt hv">SimpleViewManager&lt;VideoView&gt;</strong> {</span><span id="9997" class="ko kp hu lt b fv mp ly l lz ma">public static final String <strong class="lt hv">REACT_CLASS</strong> = â€œVideoViewâ€;</span><span id="6091" class="ko kp hu lt b fv mp ly l lz ma">@Override<br/>public String getName() {<br/>  return <strong class="lt hv">REACT_CLASS</strong>;<br/>}</span><span id="e5d1" class="ko kp hu lt b fv mp ly l lz ma">@Override<br/>protected VideoView <strong class="lt hv">createViewInstance</strong>(ThemedReactContext reactContext) {<br/>  VideoView videoView = new VideoView(reactContext);<br/>  return videoView;<br/>}</span></pre><p id="6590" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">4.å¦‚æœæˆ‘ä»¬æƒ³ä½¿ç”¨<strong class="js hv"> props </strong>å°†ä¸€äº›æ•°æ®ä»Reactæœ¬åœ°ä»£ç å‘é€åˆ°æˆ‘ä»¬çš„ç»„ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¿…é¡»ç¼–å†™ä¸€ä¸ªé™„åŠ æ–¹æ³•æ¥æ¥å—ç»„ä»¶ä¸­çš„æ•°æ®ã€‚å‚è§ä¸‹é¢ä»£ç ä¸­çš„<strong class="js hv"> setVideoPath </strong>æ–¹æ³•ã€‚</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="62b5" class="ko kp hu lt b fv lx ly l lz ma">public class <strong class="lt hv">VideoViewManager</strong> extends <strong class="lt hv">SimpleViewManager&lt;VideoView&gt;</strong> {</span><span id="eb39" class="ko kp hu lt b fv mp ly l lz ma">public static final String <strong class="lt hv">REACT_CLASS</strong> = â€œVideoViewâ€;</span><span id="a26f" class="ko kp hu lt b fv mp ly l lz ma">@Override<br/>public String getName() {<br/>  return <strong class="lt hv">REACT_CLASS</strong>;<br/>}</span><span id="960a" class="ko kp hu lt b fv mp ly l lz ma">@Override<br/>protected VideoView <strong class="lt hv">createViewInstance</strong>(ThemedReactContext reactContext) {<br/>  VideoView videoView = new VideoView(reactContext);<br/>  return videoView;<br/>}</span><span id="9b7e" class="ko kp hu lt b fv mp ly l lz ma">@ReactProp(name=â€urlâ€)<br/>public void <strong class="lt hv">setVideoPath</strong>(VideoView videoView, String urlPath) {<br/>  Uri uri = Uri.parse(urlPath);<br/>  videoView.setVideoURI(uri);<br/>  videoView.start();<br/> }<br/>}</span></pre><h2 id="1c5d" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kb kz la lb kf lc ld le kj lf lg lh li dt translated">åˆ›å»ºåŒ…æ¨¡å—</h2><p id="de7a" class="pw-post-body-paragraph jq jr hu js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn hn dt translated">ä¸ºäº†ä»React Nativeã€<strong class="js hv"> </strong>è°ƒç”¨<strong class="js hv"> VideoViewManager </strong>ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ä¸€ä¸ªåŒ…æ¨¡å—æ³¨å†Œå®ƒã€‚ç¼–å†™ä¸€ä¸ªå®ç°<strong class="js hv"> ReactPackage </strong>æ¥å£çš„ç±»ã€‚</p><p id="9b00" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">åœ¨<strong class="js hv"> createViewManagers() </strong>æ–¹æ³•ä¸­ï¼Œå®ä¾‹åŒ–æˆ‘ä»¬æƒ³è¦æš´éœ²ä»¥ååº”æœ¬æœºçš„ViewManagerã€‚</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="657a" class="ko kp hu lt b fv lx ly l lz ma">public class <strong class="lt hv">VideoViewPackage</strong> implements <strong class="lt hv">ReactPackage</strong> {</span><span id="addd" class="ko kp hu lt b fv mp ly l lz ma">@Override<br/>  public List&lt;NativeModule&gt;    <strong class="lt hv">createNativeModules</strong>(ReactApplicationContext reactContext) {<br/>    return Collections.emptyList();<br/>  }</span><span id="11eb" class="ko kp hu lt b fv mp ly l lz ma">@Override<br/>  public List&lt;ViewManager&gt; <strong class="lt hv">createViewManagers</strong>(ReactApplicationContext reactContext) {<br/>    return Collections.&lt;ViewManager&gt;singletonList(<br/>      new VideoViewManager()<br/>    );<br/>  }<br/>}</span></pre><h2 id="ed71" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kb kz la lb kf lc ld le kj lf lg lh li dt translated">å°†åŒ…æ¨¡å—æ·»åŠ åˆ°åº”ç”¨ç¨‹åºç±»</h2><p id="270f" class="pw-post-body-paragraph jq jr hu js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn hn dt translated">åœ¨ReactåŸç”Ÿé¡¹ç›®çš„åº”ç”¨ç±»ä¸­ï¼Œåœ¨<strong class="js hv"> getPackages() </strong>æ–¹æ³•<strong class="js hv">ä¸­æ·»åŠ åŒ…æ¨¡å—ã€‚</strong></p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="0581" class="ko kp hu lt b fv lx ly l lz ma">@Override<br/>protected List&lt;ReactPackage&gt; <strong class="lt hv">getPackages</strong>() {</span><span id="638c" class="ko kp hu lt b fv mp ly l lz ma">return Arrays.&lt;ReactPackage&gt;asList(<br/>     new MainReactPackage(),<br/>     new VideoViewPackage()<br/>  );</span><span id="1713" class="ko kp hu lt b fv mp ly l lz ma">}</span></pre><h2 id="d736" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kb kz la lb kf lc ld le kj lf lg lh li dt translated">å®ç°æœ¬æœºç«¯ååº”</h2><p id="0c31" class="pw-post-body-paragraph jq jr hu js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn hn dt translated">æˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªJSæ–‡ä»¶å¹¶å®ç°<strong class="js hv"> requireNativeComponent </strong>å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯æˆ‘ä»¬åœ¨view managerç±»ä¸­å®šä¹‰çš„è§†å›¾ç®¡ç†å™¨çš„åç§°ï¼Œå¹¶é€šè¿‡<strong class="js hv"> getName() </strong>æ–¹æ³•è¿”å›ã€‚ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæœ‰<strong class="js hv">é“å…·</strong>çš„å¯¹è±¡ã€‚</p><p id="0521" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated">åœ¨srcæ–‡ä»¶å¤¹ä¸­åˆ›å»ºVideoView.jsã€‚æˆ‘ä»¬éœ€è¦ä»è¿™ä¸ªæ–‡ä»¶ä¸­å¯¼å…¥ç»„ä»¶ï¼Œä»¥ä¾¿ä»¥åä½¿ç”¨ã€‚</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="65f9" class="ko kp hu lt b fv lx ly l lz ma">import PropTypes from â€˜prop-typesâ€™;</span><span id="cdac" class="ko kp hu lt b fv mp ly l lz ma">import { requireNativeComponent, ViewPropTypes } from â€˜react-nativeâ€™;</span><span id="b7bd" class="ko kp hu lt b fv mp ly l lz ma">var viewProps = {<br/>  name: â€˜VideoViewâ€™,<br/>  propTypes: {<br/>    url: PropTypes.string,<br/>    â€¦ViewPropTypes,<br/>  }<br/>}<br/>module.exports = <strong class="lt hv">requireNativeComponent</strong>(â€˜VideoViewâ€™, viewProps);</span></pre><h2 id="e660" class="ko kp hu bd kq kr ks kt ku kv kw kx ky kb kz la lb kf lc ld le kj lf lg lh li dt translated"><strong class="ak">ä½¿ç”¨ç»„ä»¶</strong></h2><p id="1101" class="pw-post-body-paragraph jq jr hu js b jt lj jv jw jx lk jz ka kb ll kd ke kf lm kh ki kj ln kl km kn hn dt translated">ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨Reactæœ¬æœºåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æˆ‘ä»¬çš„æœ¬æœºç»„ä»¶ã€‚</p><pre class="lo lp lq lr fq ls lt lu lv aw lw dt"><span id="e6e3" class="ko kp hu lt b fv lx ly l lz ma">import React, { Component } from 'react';<br/>import { StyleSheet, View } from 'react-native';<br/>import VideoView from './src/VideoView';</span><span id="0f91" class="ko kp hu lt b fv mp ly l lz ma">export default class <strong class="lt hv">App</strong> extends <strong class="lt hv">Component</strong> {</span><span id="1fd3" class="ko kp hu lt b fv mp ly l lz ma">constructor() {<br/>    super();<br/>  }<br/>  render() {<br/>    return (<br/>      &lt;View <br/>      style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}&gt;</span><span id="7dfe" class="ko kp hu lt b fv mp ly l lz ma">&lt;<strong class="lt hv">VideoView</strong> style={{ flex: 1, width: '100%', height: '100%' }}       <br/>      url="https://www.radiantmediaplayer.com/media/bbb-360p.mp4" /&gt;</span><span id="210d" class="ko kp hu lt b fv mp ly l lz ma">&lt;/View&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="122d" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated"><em class="mq">æ„Ÿè°¢é˜…è¯»ã€‚å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·éšæ„ç‚¹å‡»é‚£ä¸ªæŒ‰é’®ğŸ‘å¸®åŠ©å…¶ä»–äººæ‰¾åˆ°å®ƒã€‚</em></p><p id="275f" class="pw-post-body-paragraph jq jr hu js b jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn hn dt translated"><em class="mq">æ„Ÿè°¢Atul Sharma @</em><a class="ae jp" href="http://47billion.com" rel="noopener ugc nofollow" target="_blank"><em class="mq">470äº¿</em> </a> <em class="mq">è¯¦ç»†ä»£ç ã€‚æœ¬æ–‡æ˜¯ä¸ç§»åŠ¨æŠ€æœ¯ç›¸å…³çš„ç³»åˆ—æ–‡ç« çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä¸€ä¸ªç§»åŠ¨åº”ç”¨ç¨‹åºå¼€å‘å›¢é˜Ÿæ¥æ„å»ºæ‚¨çš„è§£å†³æ–¹æ¡ˆï¼Œè¯·é€šè¿‡</em><a class="ae jp" href="mailto:info@47billion.com" rel="noopener ugc nofollow" target="_blank"><em class="mq">info@47billion.com</em></a><em class="mq">è”ç³»æˆ‘ä»¬ã€‚</em></p></div></div>    
</body>
</html>