<html>
<head>
<title>How to build a fun social media on limited time and budget</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在有限的时间和预算下建立一个有趣的社交媒体</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-build-a-fun-social-media-on-limited-time-and-budget-c28c84ba93db?source=collection_archive---------19-----------------------#2018-10-03">https://medium.com/hackernoon/how-to-build-a-fun-social-media-on-limited-time-and-budget-c28c84ba93db?source=collection_archive---------19-----------------------#2018-10-03</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="48a5" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">你对社交媒体有一些新颖有趣的想法。你想要一款安全、智能、快速且可扩展的应用。<br/>这就是你如何在有限的时间和预算内实现这一目标的方法。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/eae1b5fdfe9d9ba17fb488a25d188594.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xmjxJl4e89aFYBGA1V8xTQ.jpeg"/></div></div></figure><blockquote class="jv jw jx"><p id="09f4" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这篇文章基于个人经验和数小时的研究。它将主要包含代码示例。</p></blockquote></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="485c" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><strong class="kb hv">配料:</strong><br/><a class="ae lf" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank">node . js</a><br/><a class="ae lf" href="https://cloud.google.com/" rel="noopener ugc nofollow" target="_blank">GCP</a>—可扩展服务器和额外工具<br/> <a class="ae lf" href="https://firebase.google.com/?" rel="noopener ugc nofollow" target="_blank"> Firebase </a> —实时数据库<br/> <a class="ae lf" href="https://www.cloudflare.com/" rel="noopener ugc nofollow" target="_blank"> Cloudflare </a> —安全和性能<br/> <a class="ae lf" href="https://www.mailgun.com/" rel="noopener ugc nofollow" target="_blank"> Mailgun </a> —电子邮件</p><p id="2cf8" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">我们将使用一个应用引擎，并将其分成3个微服务<br/>第一个微服务—后端服务器<br/>第二个微服务— Cron服务器<br/>第三个微服务— Web服务器</p></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><blockquote class="jv jw jx"><p id="f1a1" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我将为客户端使用<a class="ae lf" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"> React </a>。<br/>后端解决方案对其他客户端选项来说也很好。</p></blockquote></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="303b" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><strong class="kb hv"> <em class="ka">之前先写第一行代码</em> </strong></p><p id="7ff9" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">你需要为第一次发布设定你的目标。决定什么是第一个版本必须的，什么是你可以添加的，这很重要。</p><p id="9afd" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">为你的社交媒体应用程序选择一个名称。<br/>检查域名是否可用。<br/> <em class="ka">你可以用</em> <a class="ae lf" href="https://domains.google/#/" rel="noopener ugc nofollow" target="_blank"> <em class="ka">谷歌域名</em> </a> <em class="ka">或者</em><a class="ae lf" href="https://www.godaddy.com/" rel="noopener ugc nofollow" target="_blank"><em class="ka">go daddy</em></a><em class="ka">来做这个。</em></p><p id="e0a6" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">在GCP、Firebase Cloudflare和Mailgun开设账户并创建新项目。</p><p id="49a0" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">在脸书和Instagram上打开开发者账户，启用登录选项。(确保您发送的是审核请求，这可能需要一些时间)。</p></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><h1 id="173e" class="lg lh hu bd li lj lk ll lm ln lo lp lq ja lr jb ls jd lt je lu jg lv jh lw lx dt translated">后端API服务器</h1><h2 id="e9cd" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">目标:</h2><p id="e7d1" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">客户端友好<br/>安全性<br/>自动扩展<br/>易于维护<br/>保留日志<br/>实时报告错误</p><p id="c7d2" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">是的，您可以使用传统的RESTful API服务器来实现这些目标，但是，我想向您展示另一个可以节省您大量时间的替代方案。</p><p id="b897" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">我们将使用<a class="ae lf" href="https://github.com/FirebaseExtended/firebase-queue" rel="noopener ugc nofollow" target="_blank"> Firebase队列</a>，Firebase实时数据库和谷歌应用引擎来创建它。</p><blockquote class="jv jw jx"><p id="7810" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">这将是我的文件夹层次结构。</p></blockquote><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="3e9f" class="ly lh hu ms b fv mw mx l my mz">📁config<br/>  📁keys<br/>    ➥serviceAccountKey.json<br/>  configuration.json<br/>  index.js</span><span id="5e10" class="ly lh hu ms b fv na mx l my mz">📁services<br/>  📁firebase<br/>    ➥index.js<br/>  📁image_manipulation<br/>    ➥index.js<br/>  📁notifications<br/>    ➥index.js</span><span id="30b9" class="ly lh hu ms b fv na mx l my mz">📁utils<br/>  ➥index.js</span><span id="bfdb" class="ly lh hu ms b fv na mx l my mz">app.js<br/>app.yaml<br/>package.json</span></pre><p id="e6ab" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">节点依赖关系:</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="efae" class="ly lh hu ms b fv mw mx l my mz">"fcm-node": "^1.0.15",<br/>"firebase": "^5.4.0",<br/>"firebase-admin": "^6.0.0",<br/>"firebase-queue": "^1.6.1",<br/>"mailgun-js": "^0.20.0"</span></pre><p id="b110" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">图像处理依赖关系:</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="940f" class="ly lh hu ms b fv mw mx l my mz">"@google-cloud/storage": "^1.5.1",<br/>"@google-cloud/vision": "^0.14.0",<br/>"image-size": "^0.6.2",<br/>"imagemin": "^5.3.1",<br/>"imagemin-giflossy": "^5.1.10",<br/>"imagemin-jpeg-recompress": "^5.1.0",<br/>"sharp": "^0.18.4",<br/>"smartcrop": "^1.1.1",<br/>"smartcrop-sharp": "^1.0.5"</span></pre></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="f17d" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">让我们从config/configuration.json开始:</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="733c" class="ly lh hu ms b fv mw mx l my mz">{<br/>  "firebase": {<br/>    "projectId": "YOUT_PROJECT_ID",<br/>    "url": "YOUT_PROJECT_DB_URL",<br/>    "serviceAccount": "config/keys/serviceAccountKey.json"<br/>  },<br/>  "mailgun": {<br/>    "apiKey": "YOUT_MAILGUN_KEY",<br/>    "domain": "YOUT_MAILGUN_DOMAIN"<br/>  },<br/>  "app": {</span></pre><p id="344e" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">config/index.js(注意有configuration.dev.json)</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="cf45" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">const </strong>config = process.env.NODE_ENV === 'production' <br/>? require('config/configuration.json') <br/>: require('config/configuration.dev.json');<br/><br/>module.exports = config;</span></pre><p id="b56e" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">app.yaml</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="afcc" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">service</strong>: api<br/><strong class="ms hv">runtime</strong>: nodejs<br/><strong class="ms hv">env</strong>: flex<br/><strong class="ms hv">env_variables</strong>:<br/>  <strong class="ms hv">NODE_ENV</strong>: prod</span></pre><p id="b22e" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">services/firebase/index.js</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="66d2" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">const </strong>admin = require('firebase-admin');<br/><strong class="ms hv">const </strong>config  = require('config');<br/><br/>admin.initializeApp({<br/>    credential: admin.credential.cert(require(config.firebase.serviceAccount)),<br/>    databaseURL: config.firebase.url<br/>});<br/><br/><strong class="ms hv">const </strong>db = admin.firestore();<br/><strong class="ms hv">const </strong>tasksDB = admin.database();<br/><strong class="ms hv">const </strong>tasksQueue = tasksDB.ref('tasks_queue/');<br/><br/>db.settings({ timestampsInSnapshots: <strong class="ms hv">true </strong>});</span><span id="c3ae" class="ly lh hu ms b fv na mx l my mz">// Here we will write our db functions</span><span id="8aee" class="ly lh hu ms b fv na mx l my mz">module.exports = {<br/>    tasksQueue</span></pre></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="4553" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">现在我们可以开始编写我们的服务器(<strong class="kb hv"> app.js) </strong></p><blockquote class="jv jw jx"><p id="4aad" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">就我个人而言，我喜欢这样设置require()路径:(你可以在这里<a class="ae lf" href="https://gist.github.com/branneman/8048520" rel="noopener ugc nofollow" target="_blank">了解更多信息</a></p></blockquote><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="2827" class="ly lh hu ms b fv mw mx l my mz">process.env.NODE_PATH = __dirname;<br/>require('module').<em class="ka">Module</em>._initPaths();</span></pre><p id="365b" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">我们将从设置开始，添加三个简单的“任务”<strong class="kb hv"> <em class="ka"> saveUser、updateUser </em> </strong>和<strong class="kb hv"> <em class="ka"> likePost </em> </strong>。</p><p id="a8db" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><strong class="kb hv"> <em class="ka"> addLogs </em> </strong>函数会将收到的任务保存到我们在Firebase的日志表中。</p><p id="2f69" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><strong class="kb hv"> <em class="ka"> mailError </em> </strong>在出现错误的情况下，会将任务数据和错误信息一起通过电子邮件发送出去。</p><p id="2859" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">而<strong class="kb hv"> <em class="ka"> processTask </em> </strong>将监听Firebases实时数据库上的<em class="ka"> tasks_queue </em>表，每当有新任务写入该表时，它将根据其类型处理该任务。如果有比他能处理的更多的任务，应用引擎将自动缩放。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="3347" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">如您所见，我们需要向Firebase端点文件添加一些功能</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="d53b" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">function </strong>setData(ref, data){<br/>    <strong class="ms hv">if </strong>(<strong class="ms hv">typeof </strong>ref === 'string') <strong class="ms hv">return </strong>db.doc(ref).set(data);<br/>    <strong class="ms hv">return </strong>ref.set(data);<br/>}</span><span id="6855" class="ly lh hu ms b fv na mx l my mz"><strong class="ms hv">function </strong>updateData(ref, data){<br/>    <strong class="ms hv">if </strong>(<strong class="ms hv">typeof </strong>ref === 'string') <strong class="ms hv">return </strong>db.doc(ref).update(data);<br/>    <strong class="ms hv">return </strong>ref.update(data)</span><span id="70a9" class="ly lh hu ms b fv na mx l my mz">ateLogs(date, taskType, time, task) {<br/>    tasksDB.ref(`logs/${date}/${taskType}/${time}/task`).set(task)</span><span id="f49a" class="ly lh hu ms b fv na mx l my mz"><strong class="ms hv">ion </strong>likePost(postId){<br/>    <strong class="ms hv">return new </strong>Promise((resolve, reject) =&gt; {<br/>        <strong class="ms hv">const </strong>postRef = db.collection('posts').doc(postId);<br/>        <strong class="ms hv">return </strong>db.runTransaction((transaction) =&gt; {<br/>            <strong class="ms hv">return </strong>transaction.get(postRef).then((postDoc) =&gt; {<br/>                <strong class="ms hv">if </strong>(!postDoc.exists) resolve();<br/>                <strong class="ms hv">const </strong>newLikes = postDoc.data().likes + 1;<br/>                transaction.update(postRef, { likes: newLikes });<br/>            });<br/>        }).then(resolve).catch(reject);<br/>    });<br/>}</span><span id="a937" class="ly lh hu ms b fv na mx l my mz">// Don't forget to add them to the module exports</span></pre><p id="0392" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">“任务”表看起来是这样的:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nd"><img src="../Images/d516798695bb29f4490d55e8d38a9f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qAaSJVWs4fe7UZzBeBroyQ.png"/></div></div></figure></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="fea3" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">另一件我们可能想添加到服务器的事情是图像处理。比方说，一个用户上传了一张照片到我们有趣的社交媒体上，我们需要压缩这张照片，如果它是冒犯性的，可能会提醒我们，我们甚至想为它创建一个智能缩略图。</p><p id="49df" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">我们将添加任务来处理该请求</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="27a2" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">现在，让我们看一下services/image _ manipulation/index . js(我不会详细讨论这个)</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><h2 id="5388" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">通知</h2><p id="1e8c" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">我们最有价值的保留工具。</p><p id="d339" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">例如，如果有人喜欢他们的帖子，我们需要通知用户。我们希望能够跨平台、Android、iOS和web向用户发送消息和通知。</p><p id="1f10" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">一件好事也将保存在我们的数据库，这样我们就可以显示应用程序内的所有通知。</p><p id="e5a4" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">让我们改变我们的like_post函数</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="9b2a" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">function </strong>likePost(data = {}) {<br/>    <strong class="ms hv">return new </strong>Promise((resolve, reject) =&gt; {<br/>        <strong class="ms hv">const </strong>{ user, postId, postOwner, } = data;<br/>        Promise.all([<br/>            db.likePost(postId),<br/>            db.newNotification('like', user, postOwner),<br/>        ]).then(resolve).catch(reject);<br/>    });<br/>}</span></pre><p id="b26f" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">并将<strong class="kb hv"><em class="ka">new notification</em></strong>添加到我们的Firebase端点文件中</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="63a1" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">const </strong>fcm = require('services/notifications');<br/><strong class="ms hv">const </strong>notificationsText = require('texts/en/notifications');<br/><br/><strong class="ms hv">function </strong>newNotification(tag, from, to) {<br/>    <strong class="ms hv">return new </strong>Promise((resolve, reject) =&gt; {<br/>        <strong class="ms hv">const </strong>notification = notificationsText(tag, from, to);<br/>        <strong class="ms hv">if </strong>(to.deviceToken) fcm.sendNativeNotification(notification, deviceToken);<br/>        <strong class="ms hv">const </strong>newNotificationRef = db.collection(`messages/${to.uid}/notification`).doc();<br/>        newNotificationRef.set(notification).then(resolve).catch(reject);<br/>    });<br/>}</span></pre><p id="f2aa" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">服务/通知/索引. js</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="77eb" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">现在你已经有了API服务器，它完全满足了你的引导需求(你仍然需要编写一些函数来处理你的客户端任务)。</p><p id="25dc" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><a class="ae lf" href="https://hackernoon.com/tagged/security" rel="noopener ugc nofollow" target="_blank">安全</a>规则可以通过<a class="ae lf" href="https://hackernoon.com/tagged/firebase" rel="noopener ugc nofollow" target="_blank"> Firebase </a>控制台上的规则选项卡轻松设置。你可以在这里阅读更多关于它的<a class="ae lf" href="https://firebase.google.com/docs/database/security/" rel="noopener ugc nofollow" target="_blank">。</a></p><h1 id="66ec" class="lg lh hu bd li lj ne ll lm ln nf lp lq ja ng jb ls jd nh je lu jg ni jh lw lx dt translated">Cron服务器</h1><p id="e33e" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">如果我们需要一些调度功能在后台运行。我们将通过以下方式实现这一目标:</p><p id="fd64" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><em class="ka">在这个例子中，我们的调度函数将像一个随机发布</em></p><p id="ebcb" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">文件夹层次结构</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="d987" class="ly lh hu ms b fv mw mx l my mz">📁bin<br/>  ➥www</span><span id="986b" class="ly lh hu ms b fv na mx l my mz">📁config<br/>  📁keys<br/>    ➥serviceAccountKey.json<br/>  configuration.json<br/>  index.</span><span id="e524" class="ly lh hu ms b fv na mx l my mz">📁cron_jobs<br/>  ➥ index.js<br/>    random_like.js</span><span id="520a" class="ly lh hu ms b fv na mx l my mz">📁services<br/>  📁firebase<br/>    ➥index.js</span><span id="6530" class="ly lh hu ms b fv na mx l my mz">📁utils<br/>  ➥index.js</span><span id="7b2e" class="ly lh hu ms b fv na mx l my mz">app.js<br/>app.yaml<br/>cron.yaml<br/>package.json</span></pre><p id="a9ee" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">节点依赖关系:</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="3b41" class="ly lh hu ms b fv mw mx l my mz">"express": "^4.16.3",<br/>"firebase": "^5.4.0",<br/>"firebase-admin": "^6.0.0"</span></pre><p id="fe34" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">配置保持与API服务器相同。</p><p id="dd7a" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">app.yaml</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="8eb9" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">service</strong>: cron<br/><strong class="ms hv">runtime</strong>: nodejs<br/><strong class="ms hv">env</strong>: flex<br/><strong class="ms hv">env_variables</strong>:<br/>  <strong class="ms hv">NODE_ENV</strong>: production</span></pre><p id="8ad7" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">cron.yaml</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="95cd" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">cron</strong>:<br/>- <strong class="ms hv">description</strong>: Like a Random Post<br/>  <strong class="ms hv">url</strong>: /like_random_post<br/>  <strong class="ms hv">schedule</strong>: every 10 minutes<br/>  <strong class="ms hv">timezone</strong>: Etc/GMT<br/>  <strong class="ms hv">target</strong>: cron</span></pre><p id="b33c" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">app.js</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="332c" class="ly lh hu ms b fv mw mx l my mz">process.env.NODE_PATH = __dirname;<br/>require('module').<em class="ka">Module</em>._initPaths();<br/><br/><strong class="ms hv">const </strong>express = require('express');<br/><strong class="ms hv">const </strong>app = express();<br/>app.enable('trust proxy');<br/><br/>app.use('/', require('cron_jobs'));<br/><br/>app.use((err, req, res, next) =&gt; res.status(500).send(err.message || 'Something broke!'));<br/><br/>module.exports = app;</span></pre><p id="9b32" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">cron_jobs/inde</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="3ae6" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">t </strong>express = require('express');<br/><strong class="ms hv">const </strong>randomLike = require('cron_jobs/random_like');<br/><strong class="ms hv">const </strong>router = express.Router();<br/><br/>// [START routing]<br/>router.get('/like_random_post', randomLike);<br/>// [END routing]<br/><br/>module.exports = router;</span></pre><p id="703c" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">cron_jobs/random_like.js</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="1eed" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">// </strong>At the Firebase endpoint file</span><span id="ee4f" class="ly lh hu ms b fv na mx l my mz"><strong class="ms hv">function </strong>addTask(type, data){<br/>    <strong class="ms hv">return </strong>tasksDB.ref('tasks_queue/tasks').push({ type, data });<br/>}</span></pre><p id="6114" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">正如您在cron.yaml文件中看到的，每隔10分钟就会向/like_random_post端点(目标:cron微服务)发出一个GET请求。该函数从数据库中获得一个随机的post，并将一个“like_post”任务添加到我们的任务队列中。</p></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="26e4" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">这是我们故事的第一部分，现在你应该有一个工作服务器，可以用于任何类型的应用程序，本地或网络。</p></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><h1 id="9512" class="lg lh hu bd li lj lk ll lm ln lo lp lq ja lr jb ls jd lt je lu jg lv jh lw lx dt translated">第2部分—前端</h1><h1 id="2301" class="lg lh hu bd li lj ne ll lm ln nf lp lq ja ng jb ls jd nh je lu jg ni jh lw lx dt translated">网络服务器</h1><p id="53ad" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">该服务器将向用户提供<strong class="kb hv"> WebApp </strong>页面。基本上，我们只需要一条路由，因为我们将使用React-router处理所有路由。然而，当我们的用户将他们的帖子分享给其他社交媒体时，我们希望它具有吸引力。丰富的预览是一个伟大的工具来实现这一点。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nj"><img src="../Images/d81d628bf419c36faf98d59de5ced7ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g9kHMwgRrB8iJzxJU17Deg.png"/></div></div></figure><p id="af56" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">为了支持丰富的预览，我们需要为每个帖子调整html文件。</p><blockquote class="jv jw jx"><p id="d98b" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我将在这里添加一个例子代码如何可以很容易地做到这一点，这只是一个例子，还有其他方法可以做到这一点。</p></blockquote><p id="1693" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">文件夹层次结构:</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="4152" class="ly lh hu ms b fv mw mx l my mz">📁bin<br/>  ➥www</span><span id="44c7" class="ly lh hu ms b fv na mx l my mz">📁config<br/>  📁keys<br/>    ➥serviceAccountKey.json<br/>  configuration.json<br/>  index.</span><span id="cb17" class="ly lh hu ms b fv na mx l my mz">📁routes<br/>  ➥ index.js<br/>    post.js</span><span id="fcbd" class="ly lh hu ms b fv na mx l my mz">📁services<br/>  📁firebase<br/>    ➥index.js</span><span id="a761" class="ly lh hu ms b fv na mx l my mz">📁utils<br/>  ➥index.js</span><span id="704b" class="ly lh hu ms b fv na mx l my mz">📁views<br/>  ➥index.js<br/>  ➥html_template.js</span><span id="c7a0" class="ly lh hu ms b fv na mx l my mz">app.js<br/>app.yaml<br/>package.json</span></pre><p id="29e9" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">app.yaml</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="8ea0" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">runtime</strong>: nodejs<br/><strong class="ms hv">env</strong>: flex<br/><strong class="ms hv">env_variables</strong>:<br/>  <strong class="ms hv">NODE_ENV</strong>: production</span></pre><p id="f91c" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">app.js</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="f357" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated"><em class="ka">如你所见，我们将压缩文件以获得更好的性能。</em></p><p id="650b" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">routes/index.js</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="3138" class="ly lh hu ms b fv mw mx l my mz">'use strict';<br/><br/><strong class="ms hv">const </strong>express = require('express');<br/><strong class="ms hv">const </strong>router = express.Router();<br/><strong class="ms hv">const </strong>htmlTemplate = require('../views');<br/><br/><br/>// [START post]<br/>router.get('/post/*', require('./post'));<br/>// [END post]<br/><br/>// [START app]<br/>router.get('/*', (req, res) =&gt; {<br/>    // console.log(req);<br/>    <strong class="ms hv">return </strong>res.send(htmlTemplate())<br/>});<br/>// [END app]<br/><br/>module.exports = router;</span></pre><p id="6577" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">routes/post.js</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="73c4" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">html _模板. js</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><h1 id="b25f" class="lg lh hu bd li lj ne ll lm ln nf lp lq ja ng jb ls jd nh je lu jg ni jh lw lx dt translated">Web应用程序</h1><blockquote class="jv jw jx"><p id="dd4e" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">有很多很棒的“如何构建React web应用程序”的文章。在这里，我将重点介绍一些社交媒体web应用程序的挑战。</p></blockquote><h2 id="d9cc" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">目标:</h2><p id="f001" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">提要<br/>现场听众<br/>图片上传<br/>丰富的预览</p><p id="7082" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">让我们从WebApp的根开始</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="31c9" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">pushNotification是我们与应用程序用户交流的方式，看起来像这样:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff nk"><img src="../Images/7c0d8f1dbc849cbcad3819e168d057b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f2KtIKH4bMqkwBOSHQ3fDQ.png"/></div></div></figure><p id="d0d3" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">为此，我们将使用“toastr js”。</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="7562" class="ly lh hu ms b fv mw mx l my mz"><strong class="ms hv">import </strong>toastr <strong class="ms hv">from </strong>'toastr';<br/><br/><strong class="ms hv">export default function </strong>pushNotification(message, type = 'error') {<br/>    toastr.options.positionClass = 'toast-bottom-full-width';<br/>    toastr.options.showMethod = 'slideDown';<br/>    toastr.options.hideMethod = 'slideUp';<br/>    toastr.options.hideDuration = 300;<br/>    toastr.options.newestOnTop = <strong class="ms hv">false</strong>;<br/>    toastr.remove();<br/>    <strong class="ms hv">switch </strong>(type) {<br/>        <strong class="ms hv">case </strong>'info':<br/>            toastr.info(message);<br/>            <strong class="ms hv">break</strong>;<br/>        <strong class="ms hv">case </strong>'error':<br/>            toastr.error(message);<br/>            <strong class="ms hv">break</strong>;<br/>        <strong class="ms hv">case </strong>'success':<br/>            toastr.success(message);<br/>            <strong class="ms hv">break</strong>;<br/>        <strong class="ms hv">case </strong>'warning':<br/>            toastr.warning(message);<br/>            <strong class="ms hv">break</strong>;<br/>        <strong class="ms hv">default</strong>:<br/>            toastr.error(message);<br/>            <strong class="ms hv">break</strong>;<br/>    }<br/>}</span></pre><p id="0777" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">Firebase端点文件:</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="7e8d" class="ly lh hu ms b fv mw mx l my mz">import firebase from 'firebase/app';<br/>import 'firebase/auth';<br/>import 'firebase/storage';<br/>import 'firebase/firestore';<br/>import 'firebase/database';<br/>import config from 'config';</span><span id="20b2" class="ly lh hu ms b fv na mx l my mz">class Firebase {</span><span id="adf7" class="ly lh hu ms b fv na mx l my mz">static serverTimestamp() {<br/>        return firebase.firestore.FieldValue.serverTimestamp();<br/>    }</span><span id="1143" class="ly lh hu ms b fv na mx l my mz">constructor() {<br/>        firebase.initializeApp({<br/>            apiKey: config.firebase.api_key,<br/>            authDomain: config.firebase.domain,<br/>            projectId: config.firebase.project_id,<br/>            storageBucket: config.firebase.bucket,<br/>        });<br/>        this.auth = firebase.auth();<br/>        this.db = firebase.firestore();<br/>        this.db.settings({ timestampsInSnapshots: true });<br/>        <strong class="ms hv">this</strong>.tasksDB = firebase.database();<br/>        this.tasks = <strong class="ms hv">this</strong>.tasksDB.ref('tasks_queue/tasks');<br/>        this.storage = firebase.storage();<br/>    }</span><span id="ebae" class="ly lh hu ms b fv na mx l my mz">}</span><span id="846d" class="ly lh hu ms b fv na mx l my mz">export default Firebase;</span></pre><h2 id="5aae" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">饲料</h2><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="baf9" class="ly lh hu ms b fv mw mx l my mz">📁feed<br/>  📁view<br/>    ➥feed_item.js<br/>    ➥index.js<br/>   ➥index.js</span></pre><p id="a9b7" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">希望我们将需要处理大量的职位。为了正确管理它，我们需要:</p><p id="35ac" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">1.使用查询游标对数据进行分页</p><p id="dbe4" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">2.高效无限可滚动容器</p><p id="b922" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">3.查看发布更新监听程序</p><p id="6498" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">“控制器”:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="90db" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">对于无限可滚动容器，我们将使用“react-infinite”</p><p id="209b" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">“视图”:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="73fe" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">对于post项，我们需要添加一些侦听器。例如，likes — counter应该不断实时更新。然而，为大量的帖子设置监听器会显著影响我们的webapp性能，为了提高效率，我们将只监听视图中的帖子的变化，并使用“反应-可见性-传感器”来做到这一点。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="8b1d" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">让我们向Firebase端点文件添加一些函数</p><pre class="jk jl jm jn fq mr ms mt mu aw mv dt"><span id="4838" class="ly lh hu ms b fv mw mx l my mz">getRecentPosts(startAfter = <strong class="ms hv">null</strong>) {<br/>    <strong class="ms hv">const </strong>postRef = startAfter<br/>        ? <strong class="ms hv">this</strong>.db.collection('posts')<br/>            .orderBy('created_at', 'desc')<br/>            .startAfter(startAfter.created_at)<br/>            .limit(config.app.feed_paging)<br/>        : <strong class="ms hv">this</strong>.db.collection('posts')<br/>            .orderBy('created_at', 'desc')<br/>                .limit(config.app.feed_paging);<br/>    <strong class="ms hv">return </strong>postRef.get().then(snapshot =&gt; snapshot.docs.map(doc =&gt; doc.data()));<br/>}</span><span id="4099" class="ly lh hu ms b fv na mx l my mz">postChangesListener(postId, callback) {<br/>    <strong class="ms hv">return this</strong>.db.collection('posts').doc(postId).onSnapshot((doc) =&gt; {<br/>        <strong class="ms hv">if </strong>(callback) callback(doc.data());<br/>    });<br/>}</span><span id="0702" class="ly lh hu ms b fv na mx l my mz">addTask(type, data) {<br/>    return this.tasks.push({ type, ...data });<br/>}</span></pre><h2 id="1520" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">图像上传</h2><p id="b191" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">我们希望我们的用户能够上传照片到我们的网络应用程序，我们希望为这些照片创建缩略图，我们不希望他们等待很长时间才能完成。为了做到这一点，我们将需要降低照片的大小(为了更快的上传和创建缩略图)。</p><p id="84d3" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">上传照片组件:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><p id="bd0f" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">当我们调整照片大小时，我们需要考虑它的exif数据，否则我们可能会遇到方向问题。</p><p id="b79c" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">图像工具:</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><h2 id="367a" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">登录示例</h2><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><h2 id="6987" class="ly lh hu bd li lz ma mb lm mc md me lq lc mf mg ls ld mh mi lu le mj mk lw ml dt translated">最终Firebase端点文件</h2><p id="6cc1" class="pw-post-body-paragraph jy jz hu kb b kc mm iv ke kf mn iy kh lc mo kk kl ld mp ko kp le mq ks kt ku hn dt translated">请注意，Firestore数据操作并不发生在客户端，而是通过Firebase RD向服务器添加任务。这只是出于安全考虑。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure><blockquote class="jv jw jx"><p id="d1ee" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我用的是webpack 4，这是我的webpack.config.js，如果你需要代码分割和gzip，你可以用它作为例子。</p></blockquote><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nb nc l"/></div></figure></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="777d" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">在您完成编写第一个版本并将所有内容部署到GCP后，您现在可以将您的应用引擎记录添加到您的Cloudflare DNS设置，并获得免费的性能和安全性提升，包括SSL、CDN等。</p></div><div class="ab cl kv kw hc kx" role="separator"><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la lb"/><span class="ky bw bk kz la"/></div><div class="hn ho hp hq hr"><p id="3c0e" class="pw-post-body-paragraph jy jz hu kb b kc kd iv ke kf kg iy kh lc kj kk kl ld kn ko kp le kr ks kt ku hn dt translated">这是我建立你的新的有趣的社交媒体的最后一个建议:<strong class="kb hv">包含所有的分析</strong>。这就是你如何知道你的用户在做什么。这将有助于你进步，并把你的时间投入到对他们来说重要的事情上。</p><blockquote class="jv jw jx"><p id="7175" class="jy jz ka kb b kc kd iv ke kf kg iy kh ki kj kk kl km kn ko kp kq kr ks kt ku hn dt translated">我很想得到你的意见和建议。如果您有任何问题，请随时通过我的<a class="ae lf" href="https://www.linkedin.com/in/sagi-medina-935699122/" rel="noopener ugc nofollow" target="_blank"> linkedin </a>联系我。感谢您的阅读！传播爱:)</p></blockquote></div></div>    
</body>
</html>