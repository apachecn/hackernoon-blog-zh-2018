<html>
<head>
<title>DevOps101 — Improve Your Workflow! First Steps on Vagrant</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DevOps101 —改进您的工作流程！流浪的第一步</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/devops101-vagrant-6737c8c29904?source=collection_archive---------3-----------------------#2018-10-05">https://medium.com/hackernoon/devops101-vagrant-6737c8c29904?source=collection_archive---------3-----------------------#2018-10-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="968e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">如果你在这里，对</em> <strong class="it hv"> <em class="jp"> DevOps </em> </strong> <em class="jp">，</em> <strong class="it hv"> <em class="jp">连续流程</em> </strong> <em class="jp">，</em> <strong class="it hv"> <em class="jp">基础设施</em> </strong> <em class="jp">等话题感兴趣，至少我希望如此！这篇文章旨在提供一个高层次，简单和实用的解释，说明什么是流浪，以及你如何使用它来改善你的工作流程。</em></p><p id="1b36" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我目前是一名教师助理👨‍💻<em class="jp"> @ </em> <a class="ae jq" href="https://tecnico.ulisboa.pt/en/" rel="noopener ugc nofollow" target="_blank"> <em class="jp"> Técnico葡京</em> </a> <em class="jp">，与我密切合作的还有</em><a class="ae jq" href="https://fenix.tecnico.ulisboa.pt/homepage/ist40132" rel="noopener ugc nofollow" target="_blank"><em class="jp">Rui Cruz博士教授</em> </a>👨‍🏫<em class="jp">参加</em> <a class="ae jq" href="https://fenix.tecnico.ulisboa.pt/disciplinas/AGISIT/2018-2019/1-semestre" rel="noopener ugc nofollow" target="_blank"> <em class="jp"> It基础设施管理与行政</em> </a> <em class="jp"> </em> 🖥 <em class="jp">，一门</em>硕士水平课程的“信息系统与计算机工程硕士学位”和“电信与信息工程硕士学位”<em class="jp">@</em><a class="ae jq" href="https://tecnico.ulisboa.pt/en/" rel="noopener ugc nofollow" target="_blank"><em class="jp">técnico Lisboa</em></a>。</p><p id="434d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp"/><a class="ae jq" href="https://fenix.tecnico.ulisboa.pt/homepage/ist40132" rel="noopener ugc nofollow" target="_blank"><em class="jp">芮克鲁兹</em> </a> <em class="jp">博士对本文的贡献是巨大的，他是主要负责人</em>主要负责“<strong class="it hv">设置</strong>”和“<strong class="it hv">实验</strong>”部分。</p><h1 id="9cd7" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">那么，什么是流浪？</h1><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="fe ff kp"><img src="../Images/5978e0f73d2f868bdf531b5a20366b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*weuMknsLJV1t4lMq4lZIdw.png"/></div></div></figure><p id="adc3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">用一种非常简单的方式来说，流浪者是一个用于构建和发布虚拟环境的开源项目。实质上，这意味着它允许您管理和共享预配置的虚拟机。</p><p id="c94b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">用例1:专注于你的任务</strong>🔭</p><p id="1368" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为一名开发人员，你是否已经花了太多时间来设置你的环境？</p><p id="7bb5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">流浪者使管理虚拟盒子变得非常容易。已经安装了所有软件和依赖项的一体化虚拟机是让开发人员专注于他们的任务的好方法。人们只需要创建一个最优的虚拟盒子，然后就可以分发给合作者。不需要设置环境，因为它应该已经设置好了！</p><p id="dba3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">简而言之，你只需要运行机器，专注于手头的任务。</p><p id="1610" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">用例2:改进工作流程</strong>📈</p><p id="a8b8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">作为一名开发人员，您是否已经花费了太多时间来修复发生在生产环境中而不是开发环境中的bug？</p><p id="0e2b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">首先，一个人应该遵循良好的工作流程实践，例如由<a class="ae jq" href="https://dltj.org/article/software-development-practice/" rel="noopener ugc nofollow" target="_blank">这篇有见地的文章</a>和<a class="lb lc gr" href="https://medium.com/u/3568a51d78d8?source=post_page-----6737c8c29904--------------------------------" rel="noopener" target="_blank">彼得·默里</a>所引用的那些。其次，我们可以在自动化过程中迈出下一步:在开发和生产(以及中间产品)中拥有完全相同的环境。如果做到了这一点，生产应用程序因开发环境中未发现的错误而崩溃的可能性就非常小，因为环境是相同的。</p><p id="c56e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">简而言之，您可以在不担心来自依赖项和已安装软件的错误的情况下进行开发。</p><p id="6104" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">用例3:分销</strong> ⭐️</p><p id="75ee" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">你是否已经花了一些时间来编写关于如何设置项目的大量文档？</p><p id="ab4e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">有时这可能会令人沮丧，因为可能有许多方面需要考虑:环境变量、软件和特定的配置。如果您需要一个预配置的环境，这个工具将帮助您。</p><p id="51f4" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">通过在虚拟机上打包和分发你需要的一切，你完成了别人不需要(无用地)复制的工作。</p><h1 id="4643" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">它是如何工作的？</h1><p id="6d51" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">根据<a class="ae jq" href="http://vagrant.org" rel="noopener ugc nofollow" target="_blank">流浪汉</a>:</p><blockquote class="li lj lk"><p id="9f29" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">由vagger管理的环境可以在VirtualBox或VMware等本地虚拟化平台上运行，也可以通过AWS或OpenStack在云中运行，或者在Docker等容器中运行。</p><p id="364d" class="ir is jp it b iu iv iw ix iy iz ja jb ll jd je jf lm jh ji jj ln jl jm jn jo hn dt translated">vagger提供了创建和管理完整的可移植开发环境的框架和配置格式。这些开发环境可以存在于您的计算机上或云中，并且可以在Windows、Mac OS X和Linux之间移植。</p></blockquote><p id="e5b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">简而言之，vagger管理环境，并使用例如VirtualBox来提供(启动)机器。机器启动后运行的脚本可以通过几个供应器进行配置，如<a class="ae jq" href="https://en.wikipedia.org/wiki/Bash_(Unix_shell)" rel="noopener ugc nofollow" target="_blank"> shell </a>、<a class="ae jq" href="https://www.terraform.io/" rel="noopener ugc nofollow" target="_blank"> Terraform </a>、<a class="ae jq" href="https://docs.chef.io/provisioning.html" rel="noopener ugc nofollow" target="_blank"> Chef </a>和<a class="ae jq" href="https://www.ansible.com/" rel="noopener ugc nofollow" target="_blank"> Ansible </a>。置备程序旨在利用资源调配(安装依赖项)、自动化、配置管理和流程编排。这符合DevOps的思维和工作方式。</p><p id="c9f9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">下面的方案有助于我们形象化地了解流浪者是如何工作的，以及它是如何工作的。</p><figure class="kq kr ks kt fq ku fe ff paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="fe ff lo"><img src="../Images/7620c85796893e9da0862c3ad7904372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pV4407g7awNTh1QP.png"/></div></div><figcaption class="lp lq fg fe ff lr ls bd b be z ek">Source: <a class="ae jq" href="https://www.softqubes.com/blog/introduction-of-vagrant-development/" rel="noopener ugc nofollow" target="_blank">https://www.softqubes.com/blog/introduction-of-vagrant-development/</a></figcaption></figure><ol class=""><li id="58fd" class="lt lu hu it b iu iv iy iz jc lv jg lw jk lx jo ly lz ma mb dt translated">用户创建一个流浪者文件，这是一个声明性文件(用Ruby编写),描述所需的机器类型，以及如何配置和供应该机器。用户使用travel来执行travel file。</li><li id="2566" class="lt lu hu it b iu mc iy md jc me jg mf jk mg jo ly lz ma mb dt translated">流浪者使用VirtualBox作为提供者。它也可以使用其他提供者。</li><li id="7bbc" class="lt lu hu it b iu mc iy md jc me jg mf jk mg jo ly lz ma mb dt translated">机器启动了。</li><li id="f151" class="lt lu hu it b iu mc iy md jc me jg mf jk mg jo ly lz ma mb dt translated">流浪者调用一个provisioner来配置机器。</li><li id="ffc4" class="lt lu hu it b iu mc iy md jc me jg mf jk mg jo ly lz ma mb dt translated">置备程序提供机器。例如，它可以是一个简单的shell脚本或Ansible。</li><li id="3a0c" class="lt lu hu it b iu mc iy md jc me jg mf jk mg jo ly lz ma mb dt translated">用户可以通过ssh访问部署的机器。</li></ol><p id="8988" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">就是这样。您可以使用几个命令来管理和启动虚拟机。它的复杂程度和你想要的一样多。</p><h1 id="e775" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">理论够了，动手吧！</h1><p id="2523" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">女士们先生们，让我们开始工作吧。</p><p id="252f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">出于演示目的，我将按照Rui Cruz教授的<a class="ae jq" href="https://fenix.tecnico.ulisboa.pt/disciplinas/AGISIT/2018-2019/1-semestre" rel="noopener ugc nofollow" target="_blank"> <em class="jp"> It基础架构管理</em> </a> <em class="jp">课程的第一个实验指南进行操作。</em>首先，我们需要安装运行vanguard所需的工具。之后，我们将推出一款<a class="ae jq" href="http://mininet.org/" rel="noopener ugc nofollow" target="_blank"> Mininet </a>机器。Mininet允许我们创建虚拟网络，运行真正的内核和应用程序代码。</p><h1 id="82e3" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">安装</h1><p id="143d" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">在本节中，我们将执行Windows、Linux和mac OS的设置。</p><p id="94a5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">窗户</strong></p><p id="ce41" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">微软Windows推荐的包管理器是<a class="ae jq" href="https://chocolatey.org/" rel="noopener ugc nofollow" target="_blank"> Chocolatey </a>。</p><p id="04b3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要安装Chocolatey，请打开特权(即管理)Windows命令提示符(cmd.exe)并执行:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="43ad" class="mm js hu mi b fv mn mo l mp mq">@"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" &amp;&amp; SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin"</span></pre><p id="7471" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，通过Chocolatey安装以下依赖项:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="c72f" class="mm js hu mi b fv mn mo l mp mq">C:\&gt; choco install wget</span><span id="ddba" class="mm js hu mi b fv mr mo l mp mq">C:\&gt; choco install git -params “ /GitAndUnixToolsOnPath “</span><span id="5035" class="mm js hu mi b fv mr mo l mp mq">C:\&gt; choco install virtualbox</span><span id="3d40" class="mm js hu mi b fv mr mo l mp mq">C:\&gt; choco install vagrant</span><span id="a12c" class="mm js hu mi b fv mr mo l mp mq">C:\&gt; choco install xming</span></pre><p id="2a0f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确保git可执行文件路径在<a class="ae jq" href="https://java.com/en/download/help/path.xml" rel="noopener ugc nofollow" target="_blank">路径环境变量</a>上。</p><p id="f945" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了让xming(一个XWindows服务器)工作，我们稍后会用到它，添加名为<strong class="it hv"> DISPLAY </strong>的环境变量，其值为<strong class="it hv"> localhost:0.0 </strong>。</p><p id="61c3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">苹果macOS </strong></p><p id="678e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">推荐macOS的包管理器是Homebrew，类似于Linux的aptget或者yum <a class="ae jq" href="http://brew.sh." rel="noopener ugc nofollow" target="_blank"> http://brew.sh. </a></p><p id="eda9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">如果您没有安装XCode，请打开“终端”,在shell提示符下键入以下内容:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="f1c8" class="mm js hu mi b fv mn mo l mp mq">:~$ xcode -select -- install</span></pre><p id="7c7b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要安装<a class="ae jq" href="http://brew.sh" rel="noopener ugc nofollow" target="_blank"> Homebrew </a>，在shell提示符下粘贴脚本(从ruby调用开始)并按ENTER:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="7ac9" class="mm js hu mi b fv mn mo l mp mq">:~$ /usr/bin/ ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"</span></pre><p id="567d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">完成后，shell提示符会提示安装成功，并要求您运行brew doctor。按照它的建议去做:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="1135" class="mm js hu mi b fv mn mo l mp mq">:~$ brew doctor</span></pre><p id="830f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将使家酿检查您的系统，并确保一切都设置正确。</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="7d6b" class="mm js hu mi b fv mn mo l mp mq">:~$ brew install wget</span><span id="67d6" class="mm js hu mi b fv mr mo l mp mq">:~$ brew install git</span><span id="bf6b" class="mm js hu mi b fv mr mo l mp mq">:~$ brew cask install virtualbox</span><span id="0821" class="mm js hu mi b fv mr mo l mp mq">:~$ brew cask install vagrant</span><span id="67e1" class="mm js hu mi b fv mr mo l mp mq">:~$ brew cask install xquartz</span></pre><p id="045c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv"> Linux </strong></p><p id="2669" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">要安装其他软件包，请打开一个终端并发出以下命令。</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="c11f" class="mm js hu mi b fv mn mo l mp mq">:~$ sudo apt -get install git</span></pre><p id="f618" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">请注意，对于Ubuntu的最新发行版，需要小心安装VirtualBox，因为软件包架构必须与Linux内核架构相匹配。此外，Ubuntu中的VirtualBox包在内存受限的环境中运行时可能会出现一些问题。</p><p id="c69f" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为此，您需要确保您拥有足够的内核架构参考资料。首先编辑源代码列表，发出以下命令:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="4cd5" class="mm js hu mi b fv mn mo l mp mq">:~$ sudo nano/etc/apt/sources.list</span></pre><p id="054a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">将下面一行添加到列表中(以16.04“Xenial”内核为例):</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="d504" class="mm js hu mi b fv mn mo l mp mq">deb http://download.virtualbox.org/virtualbox/debian xenial contrib</span></pre><p id="72a3" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">根据你的分布，把‘xenial’换成‘vivid’、‘utopic’、‘trusty’等。您还需要添加和注册Oracle公钥(组合命令):</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="1063" class="mm js hu mi b fv mn mo l mp mq">:~$ wget -q https://www.virtualbox.org/download/ oracle_vbox_2016.asc -O- | sudo apt-key add -</span><span id="6c56" class="mm js hu mi b fv mr mo l mp mq">:~$ wget -q https://www.virtualbox.org/download/ oracle_vbox.asc -O- | sudo apt-key add -</span></pre><p id="5f82" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在您可以添加Virtualbox:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="77db" class="mm js hu mi b fv mn mo l mp mq">:~$ sudo apt -get update<br/>:~$ sudo apt -get install virtualbox -5.2</span></pre><p id="935d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">对于流浪者，仍然有一个问题，我们需要通过从<a class="ae jq" href="http://downloads.vagrantup.com/" rel="noopener ugc nofollow" target="_blank">流浪者网站</a>下载软件包，然后发出以下命令(从下载文件夹，适应您的版本)来获得最新版本(不在Ubuntu存储库中):</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="64a8" class="mm js hu mi b fv mn mo l mp mq">:~$ wget https://releases.hashicorp.com/vagrant/2.1.5/ vagrant_2.1.5_x86_64.deb<br/>:~$ dpkg -i vagrant_2.1.5_x86_64.deb</span></pre><h1 id="971c" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">实验:</h1><p id="b69b" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">创建一个名为mininet的文件夹并进入其中，因为我们正在使用<a class="ae jq" href="https://app.vagrantup.com/ktr/boxes/mininet" rel="noopener ugc nofollow" target="_blank"> mininet框</a>。</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="6fcc" class="mm js hu mi b fv mn mo l mp mq">:~$ vagrant box add <!-- -->ktr/<!-- -->mininet</span></pre><p id="7694" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">这将创建一个从vagrant.org下载的图像框。</p><p id="2ee7" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">现在，让我们创建一个包含我们的盒子的流浪者文件:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="ea03" class="mm js hu mi b fv mn mo l mp mq">:~$ vagrant init ktr/mininet</span></pre><p id="33e6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">上述命令将获取Ubuntu OS中已经准备好的Mininet系统。</p><p id="6102" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">没有注释，这是创建的流浪者文件:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="6ecb" class="mm js hu mi b fv mn mo l mp mq">$script <strong class="mi hv">=</strong> <strong class="mi hv">&lt;&lt;-</strong>SCRIPT<br/>sudo apt update<br/>sudo apt upgrade -y</span><span id="99e5" class="mm js hu mi b fv mr mo l mp mq">SCRIPT</span><span id="9d39" class="mm js hu mi b fv mr mo l mp mq">Vagrant.configure("2") do |config|<br/>  config.vm.box = "ktr/mininet"<!-- -->  <br/>  config.vm.provision "shell", inline: $script<br/>end</span></pre><p id="c858" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">Vagrant.configure设置的是travel file版本，config.vm.box设置的是要使用的盒子(我们下载的那个)。该脚本将在机器启动后运行。</p><p id="6721" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">恭喜你！你就快到了。现在，我们启动机器:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="055c" class="mm js hu mi b fv mn mo l mp mq">:~$ vagrant up --provider virtualbox --provision</span></pre><p id="bc22" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此阶段可能需要几分钟时间，具体取决于主机系统的速度，输出如下所示:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="216e" class="mm js hu mi b fv mn mo l mp mq">Bringing machine 'default ' up with 'virtualbox ' provider ...</span><span id="0608" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Checking if box 'ktr / mininet ' is up to date ...</span><span id="1e8e" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Clearing any previously set forwarded ports ...</span><span id="02e6" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Clearing any previously set network interfaces ...</span><span id="b014" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Preparing network interfaces based on configuration</span><span id="f3e9" class="mm js hu mi b fv mr mo l mp mq">...</span><span id="1a4c" class="mm js hu mi b fv mr mo l mp mq">default : Adapter 1: nat</span><span id="5afa" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Forwarding ports ...</span><span id="d38d" class="mm js hu mi b fv mr mo l mp mq">default : 22 =&gt; 2222 ( adapter 1)</span><span id="30f6" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Booting VM ...</span><span id="0ef2" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Waiting for machine to boot . This may take a few</span><span id="2ca1" class="mm js hu mi b fv mr mo l mp mq">minutes ...</span><span id="0a7a" class="mm js hu mi b fv mr mo l mp mq">default : SSH address : 127.0.0.1:2222</span><span id="5786" class="mm js hu mi b fv mr mo l mp mq">default : SSH username : vagrant</span><span id="76cb" class="mm js hu mi b fv mr mo l mp mq">default : SSH auth method : private key</span><span id="e9f8" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Machine booted and ready !</span><span id="0987" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Checking for guest additions in VM ...</span><span id="8329" class="mm js hu mi b fv mr mo l mp mq">default : Guest Additions Version : 4.3.10</span><span id="e1bc" class="mm js hu mi b fv mr mo l mp mq">default : VirtualBox Version : 5.0</span><span id="91c6" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Mounting shared folders ...</span></pre><p id="7e6a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此外，您将看到来自配置脚本的日志。</p><p id="fb46" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">接下来，我们将使用以下命令与系统建立会话:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="2fed" class="mm js hu mi b fv mn mo l mp mq">:~$ vagrant ssh</span></pre><p id="28e0" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">会话建立后，我们将得到类似于以下内容的计算机提示:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="b50c" class="mm js hu mi b fv mn mo l mp mq">Welcome to Ubuntu 14.04.4 LTS (GNU / Linux 3.13.0 -87 - generic x86_64 )</span><span id="661e" class="mm js hu mi b fv mr mo l mp mq">Last login : Sun Sep 20 22:50:28 2017 from 10.0.2.2</span><span id="064c" class="mm js hu mi b fv mr mo l mp mq">vagrant@mininet :~$</span></pre><p id="38a8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">然后可以执行一个非常简单的测试，通过在mininet shell提示符下发出命令'<strong class="it hv"> sudo mn </strong>'来验证一切正常，创建一个由两台主机(h1、h2)和一台交换机(s1)组成的简单网络拓扑:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="ece5" class="mm js hu mi b fv mn mo l mp mq">vagrant@mininet :~$ sudo mn</span><span id="2f7a" class="mm js hu mi b fv mr mo l mp mq">*** Creating network</span><span id="9120" class="mm js hu mi b fv mr mo l mp mq">*** Adding controller</span><span id="9dba" class="mm js hu mi b fv mr mo l mp mq">*** Adding hosts :</span><span id="59cb" class="mm js hu mi b fv mr mo l mp mq">h1 h2</span><span id="6fce" class="mm js hu mi b fv mr mo l mp mq">*** Adding switches :</span><span id="8594" class="mm js hu mi b fv mr mo l mp mq">s1</span><span id="6906" class="mm js hu mi b fv mr mo l mp mq">*** Adding links :</span><span id="34ad" class="mm js hu mi b fv mr mo l mp mq">(h1 , s1) (h2 , s1)</span><span id="7e2a" class="mm js hu mi b fv mr mo l mp mq">*** Configuring hosts</span><span id="c6e6" class="mm js hu mi b fv mr mo l mp mq">h1 h2</span><span id="bb98" class="mm js hu mi b fv mr mo l mp mq">*** Starting controller</span><span id="860b" class="mm js hu mi b fv mr mo l mp mq">c0</span><span id="3e15" class="mm js hu mi b fv mr mo l mp mq">*** Starting 1 switches</span><span id="79c9" class="mm js hu mi b fv mr mo l mp mq">s1 ...</span><span id="d6f0" class="mm js hu mi b fv mr mo l mp mq">*** Starting CLI:</span><span id="6694" class="mm js hu mi b fv mr mo l mp mq">mininet &gt;</span></pre><p id="0340" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">此时，我们可以发出命令'<strong class="it hv"> pingall </strong>'来验证主机之间是否存在连接:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="fc62" class="mm js hu mi b fv mn mo l mp mq">mininet &gt; pingall</span><span id="75f0" class="mm js hu mi b fv mr mo l mp mq">*** Ping : testing ping reachability</span><span id="c2ed" class="mm js hu mi b fv mr mo l mp mq">h1 -&gt; h2</span><span id="9f96" class="mm js hu mi b fv mr mo l mp mq">h2 -&gt; h1</span><span id="6256" class="mm js hu mi b fv mr mo l mp mq">*** Results : 0% dropped (2/2 received )</span></pre><p id="cbd8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">使用命令'<strong class="it hv"> net </strong>，我们可以验证节点是如何连接的，即主机1通过其eth0端口连接到eth1端口上的交换机1，等等。：</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="99e6" class="mm js hu mi b fv mn mo l mp mq">mininet &gt; net</span><span id="a27c" class="mm js hu mi b fv mr mo l mp mq">h1 h1 - eth0 :s1 - eth1</span><span id="7c89" class="mm js hu mi b fv mr mo l mp mq">h2 h2 - eth0 :s1 - eth2</span><span id="92d3" class="mm js hu mi b fv mr mo l mp mq">s1 lo: s1 - eth1 :h1 - eth0 s1 - eth2 :h2 - eth0</span><span id="ad64" class="mm js hu mi b fv mr mo l mp mq">c0</span></pre><p id="8e80" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">发出命令'<strong class="it hv"> dump </strong>'我们可以看到主机的IP地址(10.0.0.1和10.0.0.2):</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="3710" class="mm js hu mi b fv mn mo l mp mq">mininet &gt; dump</span><span id="9803" class="mm js hu mi b fv mr mo l mp mq">&lt;Host h1: h1 - eth0 :10.0.0.1 pid =1708 &gt;</span><span id="5793" class="mm js hu mi b fv mr mo l mp mq">&lt;Host h2: h2 - eth0 :10.0.0.2 pid =1712 &gt;</span><span id="8002" class="mm js hu mi b fv mr mo l mp mq">&lt;OVSSwitch s1: lo :127.0.0.1 , s1 - eth1 :None ,s1 - eth2 : None pid =1717 &gt;</span><span id="7aff" class="mm js hu mi b fv mr mo l mp mq">&lt;Controller c0: 127.0.0.1:6633 pid =1701 &gt;</span></pre><p id="6cba" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了结束Mininet仿真，我们使用命令“exit”。</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="3ebc" class="mm js hu mi b fv mn mo l mp mq">mininet &gt; exit</span></pre><p id="b2b1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">我们现在可以退出会话:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="a105" class="mm js hu mi b fv mn mo l mp mq">vagrant@mininet :~$ exit</span><span id="8c95" class="mm js hu mi b fv mr mo l mp mq">logout</span><span id="b16f" class="mm js hu mi b fv mr mo l mp mq">Connection to 127.0.0.1 closed .</span></pre><p id="2ee1" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">为了停止虚拟机并验证系统上所有活动的漫游环境的全局状态，我们可以发出以下命令:</p><pre class="kq kr ks kt fq mh mi mj mk aw ml dt"><span id="37d4" class="mm js hu mi b fv mn mo l mp mq">:~$ vagrant halt</span><span id="19df" class="mm js hu mi b fv mr mo l mp mq">==&gt; default : Attempting graceful shutdown of VM ...</span><span id="86f2" class="mm js hu mi b fv mr mo l mp mq">:~$ vagrant global-status</span></pre><p id="5dd8" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">确认虚拟机的状态为<strong class="it hv">断电</strong>。</p><h1 id="2805" class="jr js hu bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko dt translated">包扎</h1><p id="44eb" class="pw-post-body-paragraph ir is hu it b iu ld iw ix iy le ja jb jc lf je jf jg lg ji jj jk lh jm jn jo hn dt translated">你知道了解什么是流浪，如何建立一个简单的流浪档案，如何启动一台机器，如何使用它。</p><p id="3116" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">恭喜恭喜！</em>💯<em class="jp">您已到达终点！</em> <a class="ae jq" href="https://emojipedia.org/unicorn-face/" rel="noopener ugc nofollow" target="_blank">🦄</a></p></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><h2 id="36f8" class="mm js hu bd jt mz na nb jx nc nd ne kb jc nf ng kf jg nh ni kj jk nj nk kn nl dt translated">下一步:<br/>干杯，继续摇摆💪如果你喜欢这篇文章，请订阅我的邮件列表。<br/>这里👇。这对我意义重大。</h2><figure class="kq kr ks kt fq ku fe ff paragraph-image"><a href="http://eepurl.com/go_uUD"><div class="fe ff nm"><img src="../Images/b802eda461e56087a1ffff179f0e2459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1270/format:webp/1*MAwoJUN3vK5V6BTJdIKOBA.png"/></div></a></figure></div></div>    
</body>
</html>