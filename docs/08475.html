<html>
<head>
<title>A solution to async boilerplate in JavaScript ✨</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript ✨中异步样板文件的解决方案</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/a-solution-to-async-boilerplate-in-javascript-2fa717801c3b?source=collection_archive---------16-----------------------#2018-10-10">https://medium.com/hackernoon/a-solution-to-async-boilerplate-in-javascript-2fa717801c3b?source=collection_archive---------16-----------------------#2018-10-10</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk it iu iv iw fe ff paragraph-image"><div role="button" tabindex="0" class="ix iy di iz bf ja"><div class="fe ff is"><img src="../Images/3290ff11d4faf569c3f9b96da6daa850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qwbMqMDDpz4JQO-s49VE3w.jpeg"/></div></div><figcaption class="jd je fg fe ff jf jg bd b be z ek"><a class="ae jh" href="https://en.wikipedia.org/wiki/Tuxedo#/media/File:Dinner_Jackets,_1898..jpg" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="11a0" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">你写过类似这样的代码吗？</p><figure class="kg kh ki kj fq iw"><div class="bz el l di"><div class="kk kl l"/></div></figure><p id="ee01" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">也许你也有错误处理或一个奇特的延迟微调，增加了更多的复杂性。为项目中的每个异步任务编写相同的代码会增加很多样板文件，尤其是当应用程序中有很多HTTP请求时。</p><p id="9129" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">既然是这样一个常见的问题，<a class="ae jh" rel="noopener" href="/stashaway-engineering/react-redux-tips-better-way-to-handle-loading-flags-in-your-reducers-afda42a804c6">几种</a> <a class="ae jh" rel="noopener" href="/@lachlanmiller_52885/a-pattern-to-handle-ajax-requests-in-vuex-2d69bc2f8984">解决方案</a> <a class="ae jh" href="https://github.com/f/vue-wait" rel="noopener ugc nofollow" target="_blank">已经</a> <a class="ae jh" href="https://gist.github.com/ddanger/21d7f4bd3580d2041b7c56ca04b25b8b" rel="noopener ugc nofollow" target="_blank">已经</a> <a class="ae jh" rel="noopener" href="/@Farzad_YZ/handle-loadings-in-react-by-using-higher-order-components-2ee8de9c3deb">已经</a> <a class="ae jh" href="https://github.com/abdullah/vuex-module-generator" rel="noopener ugc nofollow" target="_blank">提出</a>。事实上，React团队目前正在通过<a class="ae jh" rel="noopener" href="/@baphemot/understanding-react-suspense-1c73b4b0b1e6"> React悬念</a>在React本身中构建一个解决方案。有了所有这些潜在的解决方案，看起来样板文件似乎是一个已经解决的问题。</p><p id="90c3" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">然而，几乎所有这些解决方案都被绑定到一个框架上。这不一定是个问题——框架也可以很棒！然而，最好有一个能够使用纯JavaScript的解决方案。这将使您可以在任何情况下跟踪异步请求的状态:无论是在您选择的UI框架、普通JS还是您最喜欢的状态管理解决方案中。</p><p id="bf92" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">例如，我用Vue做了很多工作，我发现了一些与Vuex配合得很好的解决方案。但是，如果我想在组件的状态中而不是在全局存储中跟踪请求的状态，它们根本不会工作。大多数React解决方案都有类似的问题。另一方面，一个纯JavaScript解决方案将能够处理异步任务的所有复杂性，同时仍然足够灵活，可以与几乎所有的前端技术栈一起工作。</p><p id="5e87" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">我最近发布了<a class="ae jh" href="https://github.com/superMDguy/tuxi" rel="noopener ugc nofollow" target="_blank"> tuxi </a>，它旨在解决异步状态样板问题，同时仍然满足我概述的灵活性需求。虽然它有一个非常简单的API，但它做了一些非常酷的事情:</p><ul class=""><li id="c752" class="kq kr hu jk b jl jm jp jq jt ks jx kt kb ku kf kv kw kx ky dt translated">通过区分“未决”任务和“旋转”任务，可配置延迟微调器。</li><li id="1fee" class="kq kr hu jk b jl kz jp la jt lb jx lc kb ld kf kv kw kx ky dt translated">处理快速触发请求的多个实例的情况:只返回最近触发的请求的数据。</li><li id="806f" class="kq kr hu jk b jl kz jp la jt lb jx lc kb ld kf kv kw kx ky dt translated">它还可以处理一个请求的多个实例，其中每个请求的状态被分别存储和访问。</li><li id="1d48" class="kq kr hu jk b jl kz jp la jt lb jx lc kb ld kf kv kw kx ky dt translated">通过插件支持Vue和Vuex，没有反应或严格的模式错误。</li><li id="01fa" class="kq kr hu jk b jl kz jp la jt lb jx lc kb ld kf kv kw kx ky dt translated">有一个插件API，可以在不做太多工作的情况下增加与React和Redux的集成(React插件的开放问题<a class="ae jh" href="https://github.com/superMDguy/tuxi/issues/1" rel="noopener ugc nofollow" target="_blank">在这里</a>，如果你感兴趣并想给出一个👍).</li></ul><h1 id="3d59" class="le lf hu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb dt translated">例子</h1><h2 id="092f" class="mc lf hu bd lg md me mf lk mg mh mi lo jt mj mk ls jx ml mm lw kb mn mo ma mp dt translated">纯JavaScript</h2><figure class="kg kh ki kj fq iw"><div class="bz el l di"><div class="kk kl l"/></div></figure><h2 id="be51" class="mc lf hu bd lg md me mf lk mg mh mi lo jt mj mk ls jx ml mm lw kb mn mo ma mp dt translated">某视频剪辑软件</h2><figure class="kg kh ki kj fq iw"><div class="bz el l di"><div class="kk kl l"/></div></figure><h2 id="b226" class="mc lf hu bd lg md me mf lk mg mh mi lo jt mj mk ls jx ml mm lw kb mn mo ma mp dt translated">Vuex</h2><figure class="kg kh ki kj fq iw"><div class="bz el l di"><div class="kk kl l"/></div></figure><h1 id="694b" class="le lf hu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb dt translated">最终注释</h1><p id="f974" class="pw-post-body-paragraph ji jj hu jk b jl mq jn jo jp mr jr js jt ms jv jw jx mt jz ka kb mu kd ke kf hn dt translated">Tuxi还是比较新的，但是相当稳定。它有<a class="ae jh" href="https://codecov.io/github/superMDguy/tuxi?branch=master" rel="noopener ugc nofollow" target="_blank"> 100% </a> <a class="ae jh" href="https://circleci.com/gh/superMDguy/tuxi/tree/master" rel="noopener ugc nofollow" target="_blank">通过</a>单元测试覆盖，我正在生产中使用它。虽然我还没有写完整的文档，但是你可以阅读<a class="ae jh" href="https://github.com/superMDguy/tuxi/tree/master/tests" rel="noopener ugc nofollow" target="_blank">测试</a>来获得完整的使用示例。此外，如果您有任何问题、请求或建议，请随时提出问题，我会尽快回复您。</p><p id="4188" class="pw-post-body-paragraph ji jj hu jk b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">更新(10/11/2018):我写了<a class="ae jh" href="https://github.com/superMDguy/tuxi/blob/HEAD/docs/readme.md" rel="noopener ugc nofollow" target="_blank">文档</a>。</p></div></div>    
</body>
</html>