<html>
<head>
<title>The correct way to force Vue to re-render a component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">强制Vue重新渲染组件的正确方法</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-correct-way-to-force-vue-to-re-render-a-component-bde2caae34ad?source=collection_archive---------7-----------------------#2018-10-11">https://medium.com/hackernoon/the-correct-way-to-force-vue-to-re-render-a-component-bde2caae34ad?source=collection_archive---------7-----------------------#2018-10-11</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/b41fd03e345f98d9e0a5bfdad47541ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NwVsSu4YRU-BqLTv"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">“body of water under white sky” by <a class="ae ih" href="https://unsplash.com/@clement_gerbaud?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Clément Gerbaud</a> on <a class="ae ih" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="0cf8" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">有时候Vue的反应系统不够用，你只需要重新渲染一个组件。</p><p id="b41d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">或者也许你只是想吹走当前的<a class="ae ih" href="https://hackernoon.com/tagged/dom" rel="noopener ugc nofollow" target="_blank"> DOM </a>重新开始。</p><p id="2a4d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">那么，如何让Vue以正确的方式重新渲染组件<strong class="jj il">？</strong></p><p id="b91e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il">强制Vue重新渲染组件的最好方法是在组件上设置一个</strong> <code class="eh kf kg kh ki b"><strong class="jj il">:key</strong></code> <strong class="jj il">。当你需要重新渲染组件时，你只需要改变键值，Vue就会重新渲染组件。</strong></p><p id="2a0b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这是一个非常简单的解决方案，对吗？</p><p id="71db" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你会很高兴地知道还有很多其他方法可以做到这一点:</p><ul class=""><li id="6ad3" class="kj kk ik jj b jk jl jo jp js kl jw km ka kn ke ko kp kq kr dt translated">恐怖的方式:<strong class="jj il">重装</strong>整页</li><li id="d097" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke ko kp kq kr dt translated">可怕的方式:使用<strong class="jj il"> v-if hack </strong></li><li id="57dd" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke ko kp kq kr dt translated">更好的方法是:使用Vue内置的<strong class="jj il"> forceUpdate </strong>方法</li><li id="195d" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke ko kp kq kr dt translated">最好的方法:<strong class="jj il">在你的组件上换键</strong></li></ul><p id="24f4" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">除了这里我要毁了你。</p><p id="9fc4" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果你需要强制重新加载或者强制更新，可能有更好的方法。</p><p id="e46a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">很可能你误解了下面一件棘手的事情:</p><ol class=""><li id="39f2" class="kj kk ik jj b jk jl jo jp js kl jw km ka kn ke kx kp kq kr dt translated">Vue的<strong class="jj il">反应性</strong></li><li id="485b" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">计算道具</li><li id="d289" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">观看道具(有时)</li><li id="69a8" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">没有将<code class="eh kf kg kh ki b">:key</code>属性与<code class="eh kf kg kh ki b">v-for</code>一起使用</li></ol><p id="eb5c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">现在，有<em class="ky">个</em>有效用例用于强制更新。这些问题中的大部分都将使用本文底部的密钥更改技术来解决。</p><h1 id="9f60" class="kz la ik bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">可怕的方法:重新加载整个页面</h1><p id="951b" class="pw-post-body-paragraph jh ji ik jj b jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">这是一个相当于<strong class="jj il">每次想关闭一个app </strong>都要重启电脑。</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/a64b311e4da9ac5747f8477ce6b44412.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*TMy21a5CKzGY_DX6.gif"/></div></figure><p id="ff7b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我想这有时会行得通，但这是一个相当糟糕的解决方案。</p><p id="f821" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">关于这一点真的没什么可说的了。不要这样做。</p><p id="8ed6" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们寻找更好的方法。</p><h1 id="5a21" class="kz la ik bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">可怕的方式:v-if黑客</h1><p id="7205" class="pw-post-body-paragraph jh ji ik jj b jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">Vue附带了<code class="eh kf kg kh ki b">v-if</code> <a class="ae ih" href="https://hackernoon.com/tagged/directive" rel="noopener ugc nofollow" target="_blank">指令</a>，只有当它为真时才会渲染组件。如果为false，组件将根本不存在于DOM中。</p><p id="e714" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">下面是我们如何设置<code class="eh kf kg kh ki b">v-if</code>黑客工作。</p><p id="c4bc" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在您的<code class="eh kf kg kh ki b">template</code>中，您将添加<code class="eh kf kg kh ki b">v-if</code>指令:</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mh"><img src="../Images/647d3eb7e5dc64f5e289c54c9fb45f5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*xT6E3ziYxNDJKGQ_DjWsDg.png"/></div></figure><p id="2f0b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在您的<code class="eh kf kg kh ki b">script</code>中，您将添加这个使用<code class="eh kf kg kh ki b">nextTick</code>的方法:</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mh"><img src="../Images/11d5bfbd576391a88f1a857f9e467163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*WIpc3rH-Tz2T34XpDvqvHQ.png"/></div></figure><p id="7739" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">事情是这样的:</p><ol class=""><li id="715c" class="kj kk ik jj b jk jl jo jp js kl jw km ka kn ke kx kp kq kr dt translated">最初<code class="eh kf kg kh ki b">renderComponent</code>被设置为<code class="eh kf kg kh ki b">true</code>，因此<code class="eh kf kg kh ki b">my-component</code>被渲染</li><li id="6a2b" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">当我们调用<code class="eh kf kg kh ki b">forceRerender</code>时，我们立即将<code class="eh kf kg kh ki b">renderComponent</code>设置为<code class="eh kf kg kh ki b">false</code></li><li id="329b" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">我们停止渲染<code class="eh kf kg kh ki b">my-component</code>,因为<code class="eh kf kg kh ki b">v-if</code>指令现在计算为<code class="eh kf kg kh ki b">false</code></li><li id="3ba6" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">在下一个滴答<code class="eh kf kg kh ki b">renderComponent</code>被设置回<code class="eh kf kg kh ki b">true</code></li><li id="175e" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke kx kp kq kr dt translated">现在<code class="eh kf kg kh ki b">v-if</code>指令的计算结果是<code class="eh kf kg kh ki b">true</code>，所以我们再次开始渲染<code class="eh kf kg kh ki b">my-component</code></li></ol><p id="cf6e" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">要理解这是如何工作的，有两件事很重要。</p><p id="862f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先，我们必须等到下一个滴答，否则我们将看不到任何变化。</p><p id="5e02" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在Vue中，一个tick是一个DOM更新周期。Vue将收集同一节拍内的所有更新，在节拍结束时，它将根据这些更新更新呈现到DOM中的内容。如果我们不等到下一个滴答，我们对<code class="eh kf kg kh ki b">renderComponent</code>的更新将会自动取消，什么都不会改变。</p><p id="e98d" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">第二，当我们第二次渲染时，Vue将创建一个全新的组件。Vue会毁掉第一个，创造一个新的。这意味着我们的新<code class="eh kf kg kh ki b">my-component</code>将正常地经历它的所有生命周期— <code class="eh kf kg kh ki b">created</code>、<code class="eh kf kg kh ki b">mounted</code>等等。</p><p id="0631" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">顺便说一下，如果你喜欢，你可以把 <code class="eh kf kg kh ki b"><em class="ky">nextTick</em></code> <em class="ky">和承诺一起使用:</em></p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/a003ba4ed8bf21f40e49920d9e0fc22b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*-N3VaGZEp9qxbyCe0nsRgQ.png"/></div></figure><p id="5abe" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">尽管如此，这并不是一个很好的解决方案。我称之为黑客，因为我们在围绕Vue希望我们做的事情进行黑客攻击。</p><p id="9809" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以，相反，<strong class="jj il">让我们做Vue想让我们做的事情</strong>！</p><h1 id="a20d" class="kz la ik bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">更好的方法是:您可以使用forceUpdate</h1><p id="9445" class="pw-post-body-paragraph jh ji ik jj b jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">这是解决这个问题的两个最好的方法之一，两个都是Vue 官方支持的<strong class="jj il">。</strong></p><p id="235a" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">通常，Vue会通过更新视图来对依赖关系的变化做出反应。然而，当您调用<code class="eh kf kg kh ki b">forceUpdate</code>时，您可以强制更新发生，即使没有任何依赖关系实际上已经改变。</p><p id="1965" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里是大多数人用这种方法犯<strong class="jj il">最大错误</strong>的地方。</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/aa474cbf03628ef8e28b449933e71805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*y1USfHK6CtMwdKLq.gif"/></div></figure><p id="95e1" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果Vue在事情发生变化时自动更新，<strong class="jj il">为什么我们需要强制更新</strong>？</p><p id="21e9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">原因是有时Vue的反应性系统会令人困惑，我们<em class="ky">认为</em>Vue会对某个属性或变量的变化做出反应，但实际上并没有。也有某些情况下<a class="ae ih" href="https://vuejs.org/v2/guide/list.html#Caveats" rel="noopener ugc nofollow" target="_blank"> Vue的反应系统根本检测不到任何变化</a>。</p><p id="38ed" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以就像最后的方法一样，如果你需要这个来重新渲染你的组件，<strong class="jj il">可能有一个更好的方法</strong>。</p><p id="c0d0" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">有两种不同的方法可以调用<code class="eh kf kg kh ki b">forceUpdate</code>，在组件实例本身和全局上:</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mk"><img src="../Images/54427488317bb362b01e4360b554405d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3MtmK3MzJef_QnxxPKTpLA.png"/></div></div></figure><p id="d9fc" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il">重要提示</strong>:这不会更新您拥有的任何计算属性。调用<code class="eh kf kg kh ki b">forceUpdate</code>只会让<a class="ae ih" href="https://github.com/vuejs/vue/issues/7395#issuecomment-355721554" rel="noopener ugc nofollow" target="_blank">强制视图重新渲染</a>。</p><h1 id="2468" class="kz la ik bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">最好的方法:更换密钥</h1><p id="f436" class="pw-post-body-paragraph jh ji ik jj b jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">在许多情况下，您会有重新渲染组件的合理需求。</p><p id="4ddd" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了正确地做到这一点，我们将提供一个<code class="eh kf kg kh ki b">key</code>属性，这样Vue就知道一个特定的组件被绑定到一个特定的数据上。如果键保持不变，它不会改变组件，但是如果键改变了，Vue知道应该<strong class="jj il">去掉旧的组件，创建一个新的</strong>。</p><p id="92b7" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">正是我们需要的！</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/ef8192d1b64e59c2f01fc00f19d0d29d.png" data-original-src="https://miro.medium.com/v2/resize:fit:740/0*NOtLh-szxVhSCxQO.gif"/></div></figure><p id="a640" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">但是首先我们需要走一个很短的弯路来理解为什么我们在Vue中使用T3。</p><h1 id="d505" class="kz la ik bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">为什么我们需要在Vue中使用key？</h1><p id="f088" class="pw-post-body-paragraph jh ji ik jj b jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">一旦你理解了这一点，你就向理解如何以正确的方式强制重新渲染迈出了一小步。</p><p id="1ed9" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">假设您正在渲染具有以下一项或多项内容的组件列表:</p><ul class=""><li id="473e" class="kj kk ik jj b jk jl jo jp js kl jw km ka kn ke ko kp kq kr dt translated">这是自己的<strong class="jj il">地方州</strong></li><li id="43ed" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke ko kp kq kr dt translated">某种类型的<strong class="jj il">初始化过程</strong>，通常在<code class="eh kf kg kh ki b">created</code>或<code class="eh kf kg kh ki b">mounted</code>钩子中</li><li id="dca8" class="kj kk ik jj b jk ks jo kt js ku jw kv ka kw ke ko kp kq kr dt translated">通过jQuery或普通API的非反应式DOM操作</li></ul><p id="bc4f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果您对列表进行排序，或者以任何其他方式更新它，您将需要重新呈现列表的一部分。但是你不会想要重新呈现列表中的所有内容，只呈现已经改变的内容。</p><p id="e385" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为了帮助Vue跟踪什么已经改变，什么没有改变，我们提供了一个<code class="eh kf kg kh ki b">key</code>属性。<strong class="jj il">使用数组的索引在这里没有帮助</strong>，因为索引并不与我们列表中的特定对象相关联。</p><p id="9efc" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以下是我们的示例列表:</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/07be896f2438f00a0784988f522a88c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:764/format:webp/1*6cioMEIwZiUsoOsT1gmIdQ.png"/></div></figure><p id="6868" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果我们使用索引来呈现它，我们将得到这个:</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mn"><img src="../Images/42d9e4c5fd49112e1b9dc86d1bde66b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/1*FMRLIYjpQsVrMqjKzfZN8Q.png"/></div></figure><p id="cb1c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它显示:</p><pre class="md me mf mg fq mo ki mp mq aw mr dt"><span id="26ec" class="ms la ik ki b fv mt mu l mv mw">Evan - 0<br/>Sarah - 1<br/>James - 2</span></pre><p id="0830" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果我们除掉莎拉，我们会得到:</p><pre class="md me mf mg fq mo ki mp mq aw mr dt"><span id="ae68" class="ms la ik ki b fv mt mu l mv mw">Evan - 0<br/>James - 1</span></pre><p id="000f" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">与詹姆斯相关联的索引被改变，即使詹姆斯仍然是詹姆斯。詹姆斯将被重新渲染，即使我们不希望他这样。</p><p id="2e74" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所以在这里<strong class="jj il">我们想要使用某种唯一的id </strong>，然而我们最终生成了它。</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mx"><img src="../Images/e22387b572dc75cb5c10c80cc6acf94f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*F-4H0OIVTdz13eYwveT4MA.png"/></div></div></figure><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff my"><img src="../Images/a3afdcbcd6bc9eface747e70cffa0865.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*3CCDrtrPpFa0TeyTjLSrhQ.png"/></div></figure><p id="cad0" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在我们从列表中删除Sarah之前，Vue删除了Sarah和James的组件，然后为James创建了一个新组件。现在，Vue知道它可以为Evan和James保留这两个组件，它所要做的就是删除Sarah的。</p><p id="7b48" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果我们将一个人添加到列表中，它也知道它可以保留所有现有的组件，它只需要创建一个新的组件并将其插入正确的位置。这真的很有用，当我们有<strong class="jj il">更复杂的组件，它们有自己的状态，有初始化逻辑，或者做任何类型的DOM操作</strong>时，这给了我们很大的帮助。</p><p id="0568" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">也许那段弯路并不短。但是有必要解释一下Vue中的按键是如何工作的。</p><p id="a499" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不管怎样，让我们继续使用强制重新渲染的最佳方法吧！</p><h1 id="7ce9" class="kz la ik bd lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw dt translated">更改键以强制重新呈现组件</h1><p id="5164" class="pw-post-body-paragraph jh ji ik jj b jk lx jm jn jo ly jq jr js lz ju jv jw ma jy jz ka mb kc kd ke hn dt translated">最后，这里有一个<strong class="jj il">最好的方法</strong>(在我看来)来强迫Vue重新渲染一个组件。</p><p id="5ffb" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您采用这种将键分配给子组件的策略，但是每当您想要重新呈现组件时，您只需更新键。</p><p id="068c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">下面是一个非常基本的方法:</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff my"><img src="../Images/c3c4356d442ebd07d495d2468d74112a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*dM_GxYfCfY_h4EfaP2TNkg.png"/></div></figure><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/21b5f0275c69c63a07dbe30fb6301777.png" data-original-src="https://miro.medium.com/v2/resize:fit:808/format:webp/1*quIZLMqlTrn-n8lpzhSR9Q.png"/></div></figure><p id="aaab" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">每次调用<code class="eh kf kg kh ki b">forceRerender</code>时，我们的属性<code class="eh kf kg kh ki b">componentKey</code>都会改变。当这种情况发生时，Vue将知道它必须销毁组件并创建一个新的组件。</p><p id="b885" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您得到的是一个子组件，它将重新初始化自己并“重置”它的状态。</p><p id="70af" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一个简单而优雅的方法来解决我们的问题！</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div class="fe ff na"><img src="../Images/99d3e7150d91342d74abe8250a7a2afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:750/0*AhFsL6r1r8zug-_6.gif"/></div></figure><p id="791c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">请记住，如果你发现自己需要强迫Vue重新渲染一个组件，也许你做的不是最好的方法。</p><p id="3e45" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">然而，如果你确实需要重新渲染某些东西，选择<strong class="jj il">键改变</strong>方法而不是其他任何方法。</p></div><div class="ab cl nb nc hc nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="hn ho hp hq hr"><p id="c7c8" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="ky">我的文章一出来就在</em><a class="ae ih" href="http://michaelnthiessen.com" rel="noopener ugc nofollow" target="_blank"><em class="ky">michaelnthiessen.com</em></a><em class="ky">看看吧！几个星期后，我把它们重新贴在这里。</em></p><p id="699b" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="ky">原载于michaelnthiessen.com</em><a class="ae ih" href="http://michaelnthiessen.com/force-re-render/" rel="noopener ugc nofollow" target="_blank"><em class="ky"/></a><em class="ky">。</em></p><figure class="md me mf mg fq hw"><div class="bz el l di"><div class="ni nj l"/></div></figure></div></div>    
</body>
</html>