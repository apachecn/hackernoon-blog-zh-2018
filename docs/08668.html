<html>
<head>
<title>How to: Blockchain dApps for mobile 📱</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何:移动区块链dApps📱</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-blockchain-dapps-for-mobile-55a3ccce2d48?source=collection_archive---------17-----------------------#2018-10-18">https://medium.com/hackernoon/how-to-blockchain-dapps-for-mobile-55a3ccce2d48?source=collection_archive---------17-----------------------#2018-10-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/e91f26ab56fedfecc9f8b504cdbea6ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TY8KDwigWaXJF95cvkRIhw.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Blockchain apps now on mobile</figcaption></figure><p id="4df6" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你一定遇到过使用truffle和一些钱包集成来调用智能合同的web应用程序。但是市面上的app(特别是跨平台的)非常少。我认为这是因为缺乏教程或过多的教程。</p><blockquote class="ke kf kg"><p id="5e50" class="jg jh kh ji b jj jk jl jm jn jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kd hn dt translated">这是我的尝试，帮助一些开发者制作一个连接到区块链的移动应用🌈</p></blockquote><p id="5fcf" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">本教程展示了如何使用<a class="ae kl" href="https://blog.0xproject.com/canonical-weth-a9aa7d0279dd" rel="noopener ugc nofollow" target="_blank"> canonical-weth </a> <a class="ae kl" href="https://en.wikipedia.org/wiki/Smart_contract" rel="noopener ugc nofollow" target="_blank">智能契约</a>包装和解包以太<a class="ae kl" href="https://etherscan.io/token/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2" rel="noopener ugc nofollow" target="_blank">令牌</a>。</p><p id="d34f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">TLDR；</strong>🤓</p><ol class=""><li id="20d4" class="km kn hu ji b jj jk jn jo jr ko jv kp jz kq kd kr ks kt ku dt translated">克隆此回购<code class="eh kv kw kx ky b">git clone <a class="ae kl" href="https://github.com/kunsachdeva/React-Native-Blockchain-Skeleton" rel="noopener ugc nofollow" target="_blank">https://github.com/kunsachdeva/React-Native-Blockchain-Skeleton</a></code></li><li id="3d4e" class="km kn hu ji b jj kz jn la jr lb jv lc jz ld kd kr ks kt ku dt translated"><code class="eh kv kw kx ky b">npm install</code>或<code class="eh kv kw kx ky b">yarn</code></li><li id="a12d" class="km kn hu ji b jj kz jn la jr lb jv lc jz ld kd kr ks kt ku dt translated">更新<code class="eh kv kw kx ky b">constants.js</code>文件</li><li id="2cf5" class="km kn hu ji b jj kz jn la jr lb jv lc jz ld kd kr ks kt ku dt translated">瞧吧！🤷</li></ol><p id="abfa" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这是更长的版本；</p><p id="6f7c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">首先以传统方式创建一个空白的react本机应用程序:</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="a95d" class="lm ln hu ky b fv lo lp l lq lr">react-native init MyDecentralisedApp</span></pre><p id="eea2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们继续吧🔥让它发生！</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="dd04" class="lm ln hu ky b fv lo lp l lq lr">npm i canonical-weth -S</span></pre><p id="dba9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这会给你<a class="ae kl" href="https://ethereum.stackexchange.com/questions/30457/what-are-artifacts-in-truffle" rel="noopener ugc nofollow" target="_blank">神器</a>到<a class="ae kl" href="https://weth.io" rel="noopener ugc nofollow" target="_blank"> weth </a>智能契约。它包含了<a class="ae kl" href="https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI" rel="noopener ugc nofollow" target="_blank"> abi </a>数组和一些编译好的solidity代码的描述。你可以在这里了解那个东西<a class="ae kl" href="https://www.sitepoint.com/compiling-smart-contracts-abi/" rel="noopener ugc nofollow" target="_blank">(本教程不需要)。</a></p><p id="1b1f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了用它制作一个<code class="eh kv kw kx ky b">Contract</code>物体，我们需要块菌库。<br/>使用以下方式安装:</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="b8f2" class="lm ln hu ky b fv lo lp l lq lr">npm i truffle-contract -S</span></pre><p id="a6fb" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为此，我们还需要web3。为了简单起见，我们使用web3版本<code class="eh kv kw kx ky b">0.20.5</code>，但您也可以使用web3 1.x.x。它只需要您为<code class="eh kv kw kx ky b">es2015</code>添加一个预设。</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="b48f" class="lm ln hu ky b fv lo lp l lq lr">npm i web3@0.20.5 -S </span></pre><p id="97ad" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在这一点上，构建您的应用程序应该会出现一些节点库缺失的错误，比如<code class="eh kv kw kx ky b">crypto</code>或<code class="eh kv kw kx ky b">events</code>。这是因为react-native在默认情况下没有nodejs模块。这一点已经在react-native issues中提到。即使它使用node作为它的包管理器，它也不包含它的内置模块。&lt;链接到问题&gt;</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ls"><img src="../Images/3ccbb45a3f1f2147d67a8b29237d21f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qOSEDpzd1eEQRx5W_p1Vww.png"/></div></div></figure><p id="3bd5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">为了解决这个问题，我们从react-native-node-modules库中添加节点模块</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="6022" class="lm ln hu ky b fv lo lp l lq lr">npm i abec/react-native-node-modules -S</span></pre><p id="8343" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这应该可以解决您的节点问题🚀。继续，让我们制作松露物体。</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="3f8e" class="lm ln hu ky b fv lo lp l lq lr">var Contract = require('truffle-contract')<br/>var wethArtifact = require('canonical-weth')<br/>var contract = Contract(wethArtifact)<br/>var contractAtAddress = contract.atAdd('0xc778417e063141139fce010982780140aa0cd5ab')</span></pre><p id="5cac" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我从weth上的这篇<a class="ae kl" href="https://blog.0xproject.com/canonical-weth-a9aa7d0279dd" rel="noopener ugc nofollow" target="_blank">文章</a>中得到了上面的地址。它适用于rinkeby testnet链。它是公开的，可以在<a class="ae kl" href="https://rinkeby.etherscan.io/address/0xc778417e063141139fce010982780140aa0cd5ab" rel="noopener ugc nofollow" target="_blank"> etherscan </a>上看到。要在区块链使用任何合同，你必须找到它的地址。通常在<a class="ae kl" href="https://etherscan.io" rel="noopener ugc nofollow" target="_blank">以太扫描</a>上搜索就可以了。</p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lt"><img src="../Images/923cf8e46f1459b2e15c121e564f8054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xHvZUJNUV12_EA2p.jpg"/></div></div></figure><p id="1949" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们有了合同，我们需要在同一个区块链上将这个合同称为钱包。你可以把这个钱包想象成用户，你在用这个用户调用智能合约功能。这在区块链上是必要的，每一次，每一个呼叫都必须与一个地址相关联。</p><p id="87ba" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在我们的场景中，我们有很多选择:<br/> — <a class="ae kl" href="https://www.npmjs.com/package/ethers-wallet" rel="noopener ugc nofollow" target="_blank">乙醚钱包</a></p><p id="8655" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">— <a class="ae kl" href="https://github.com/trufflesuite/truffle-hdwallet-provider" rel="noopener ugc nofollow" target="_blank">松露高清钱包</a></p><p id="b468" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">— <a class="ae kl" href="https://www.npmjs.com/package/infura-web3-provider" rel="noopener ugc nofollow" target="_blank"> Web3钱包提供商</a></p><p id="3539" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你可以选择任何一个。在本例中，我们将使用Truffle HD Wallet。<br/>样本用法<a class="ae kl" href="https://github.com/trufflesuite/truffle-hdwallet-provider#general-usage" rel="noopener ugc nofollow" target="_blank">此处</a>。<br/>让我们也安装这个:</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="c212" class="lm ln hu ky b fv lo lp l lq lr">npm i trufflehdwallet -S</span></pre><p id="d29d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在我们可以<a class="ae kl" href="https://www.youtube.com/watch?v=24EjCaK9qR8" rel="noopener ugc nofollow" target="_blank">在链上创建一个新的钱包</a>或者使用现有的钱包。我们将使用一个现有的。为此，我们需要部署智能合约的区块链的RPC网络地址。</p><p id="2e53" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">由于我们在<em class="kh"> Infura </em>上使用来自<em class="kh"> Rinkeby </em> testnet的地址，所以我们的RPC url将是<code class="eh kv kw kx ky b">rinkeby.infura.io</code>。</p><p id="06d1" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们将使用这个url来创建一个提供者对象。这就为钱包的使用设置了“环境”。你可以认为这是登录。你用密码——助记符——登录你的钱包。</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="c191" class="lm ln hu ky b fv lo lp l lq lr">const TESTRPC_ADDRESS = 'https://<!-- -->rinkeby.infura.io/<!-- -->'<br/>const web3Provider = new HDWalletProvider(MNEMONIC,TESTRPC_ADDRESS);<br/>web3 = new Web3(web3Provider);</span></pre><p id="65ee" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">用您自己的字符串格式替换<code class="eh kv kw kx ky b">MNEMONIC</code>。</p><p id="0511" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们现在也准备称之为智能合同。基于我们正在使用的weth智能合约的定义，我们知道它具有<code class="eh kv kw kx ky b">deposit</code>和<code class="eh kv kw kx ky b">withdraw</code>功能。这些可以通过对契约的异步调用来调用，或者将其用作<a class="ae kl" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" rel="noopener ugc nofollow" target="_blank">承诺</a>。</p><pre class="le lf lg lh fq li ky lj lk aw ll dt"><span id="261d" class="lm ln hu ky b fv lo lp l lq lr">var transaction = await wethDeployed.deposit({ from: MY_ADDRESS, value: 0.001 * 1e18, gas: 2000000 });</span><span id="f59f" class="lm ln hu ky b fv lu lp l lq lr">console.log(transaction)</span></pre><p id="428e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><code class="eh kv kw kx ky b">transaction</code>变量会给你很多关于你在区块链的交易地点的信息。你可以从中提取地址，然后回到以太扫描来找到它。</p><p id="587d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><strong class="ji hv">🗿我们成功了！这就是你制作自己的跨平台dApp所需要的一切。</strong></p><figure class="le lf lg lh fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lv"><img src="../Images/630445c0cd4f0741db487a345ab2ace8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qdW1KWgBclD6otFr.jpg"/></div></div></figure></div><div class="ab cl lw lx hc ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="hn ho hp hq hr"><p id="dbf5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">概括地说，您可以使用任何智能合同(具有abi和地址)，并且您可以使用任何钱包，只要钱包和合同在同一区块链上。</p><p id="29be" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">如果你遇到任何问题:<em class="kh">📖</em> <em class="kh">开</em>关<a class="ae kl" href="https://github.com/kunsachdeva/React-Native-Blockchain-Skeleton/issues" rel="noopener ugc nofollow" target="_blank">发行</a> <br/>如果不(推荐):<em class="kh"> ⭐ </em> <em class="kh">明星</em>回购<a class="ae kl" href="https://github.com/kunsachdeva/React-Native-Blockchain-Skeleton" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="d93e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">请随时进一步贡献。这是一项不断变化和快速发展的技术。每天都有新的库和更聪明的做事方式被引入。</p><blockquote class="ke kf kg"><p id="3999" class="jg jh kh ji b jj jk jl jm jn jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kd hn dt translated">在<a class="ae kl" href="https://t.me/kunsachdeva" rel="noopener ugc nofollow" target="_blank">电报</a><a class="ae kl" href="https://twitter.com/kunsachdeva" rel="noopener ugc nofollow" target="_blank"><em class="hu">@ kunsechdeva</em></a>上找我或者加入<a class="ae kl" href="https://t.me/midasapp" rel="noopener ugc nofollow" target="_blank"> Midas </a>了解更多更新。</p></blockquote><figure class="le lf lg lh fq iv"><div class="bz el l di"><div class="md me l"/></div></figure></div></div>    
</body>
</html>