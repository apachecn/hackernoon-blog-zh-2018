<html>
<head>
<title>Web Workers in React + Redux application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React + Redux应用程序中的Web Workers</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/web-workers-in-react-redux-application-129274e84a4e?source=collection_archive---------4-----------------------#2018-10-23">https://medium.com/hackernoon/web-workers-in-react-redux-application-129274e84a4e?source=collection_archive---------4-----------------------#2018-10-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/5a57066c304f00f1c2ada432159e0b5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1yBlyY5wRASOZawcjZU8lA.jpeg"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Photo by <a class="ae ih" href="https://unsplash.com/photos/aysgVUqJaMw?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Ben Konfrst</a> on <a class="ae ih" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="89d4" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="kf">在后台线程中运行脚本，在不干扰用户界面的情况下执行任务。</em></p><p id="27fa" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们都知道JavaScript代码在单线程中执行。这意味着代码将一行一行地执行，如果一个特定的任务需要很长时间才能完成，那么其他的事情都会被推迟到这个任务完成之后。如果我们想摆脱主要的威胁，网络工作者是怎么一回事。</p><h1 id="1c27" class="kg kh ik bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">☝️ <strong class="ak">你应该知道的事情</strong></h1><p id="5e3c" class="pw-post-body-paragraph jh ji ik jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">几乎所有浏览器都支持Web Workers。为了更好地控制错误处理和向后兼容性，进行检查是一个更好的方法。</p><pre class="lj lk ll lm fq ln lo lp lq aw lr dt"><span id="61c1" class="ls kh ik lo b fv lt lu l lv lw">if (window.Worker) {<br/><br/>  ...<br/><br/>}</span></pre><figure class="lj lk ll lm fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lx"><img src="../Images/4a47202aacb7d116bf759272780dcfde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mVj2YBzHyGLervr-ZQEi3w.png"/></div></div></figure><p id="9b3c" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">只创建一个实例，每次调用<code class="eh ly lz ma lo b">new Worker('worker.js')</code>都要加载<code class="eh ly lz ma lo b">worker.js</code>文件。所以，你可能会在网络上看到类似的东西。</p><figure class="lj lk ll lm fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mb"><img src="../Images/37fe53e272b8f953a80fbebe135342a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TSAbHo6MfsSjXqgOdYlVXg.png"/></div></div></figure><h1 id="649c" class="kg kh ik bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">反应+还原</h1><p id="4b01" class="pw-post-body-paragraph jh ji ik jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">用Redux更新存储很简单。因此，我们将有一个位置或一个文件，在那里我们创建一个工人实例，导出它并监听<code class="eh ly lz ma lo b">onmessage</code>事件，当数据来自工人时，我们将调度一个事件。</p><figure class="lj lk ll lm fq hw"><div class="bz el l di"><div class="mc md l"/></div></figure><p id="4df8" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">在<code class="eh ly lz ma lo b">worker.js</code>中，如果我们需要导入一些脚本到全球工人范围，我们可能会<code class="eh ly lz ma lo b">importScripts</code>。在Web Worker中，你可以使用<a class="ae ih" href="https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIXMLHttpRequest" rel="noopener ugc nofollow" target="_blank"> XMLHttpRequest </a>，所以在下面的例子中，我导入了<a class="ae ih" href="https://github.com/axios/axios" rel="noopener ugc nofollow" target="_blank"> axios </a>并将其用于XHR调用。<code class="eh ly lz ma lo b">onmessage</code>每当有新消息通过worker冒泡时，就会调用listener。方法向worker的内部作用域发送消息。</p><figure class="lj lk ll lm fq hw"><div class="bz el l di"><div class="mc md l"/></div></figure><p id="9fa5" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">使用工作实例。导入已经存在的Worker并使用您想要传递给Worker <code class="eh ly lz ma lo b">worker.js</code>的数据调用<code class="eh ly lz ma lo b">postMessage</code>方法</p><figure class="lj lk ll lm fq hw"><div class="bz el l di"><div class="mc md l"/></div></figure><h1 id="9ce7" class="kg kh ik bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">结论</h1><p id="c457" class="pw-post-body-paragraph jh ji ik jj b jk le jm jn jo lf jq jr js lg ju jv jw lh jy jz ka li kc kd ke hn dt translated">Web Workers是一个强大的API，你绝对应该使用它。这是很好的背景同步，预取数据，光线跟踪。使用web workers会对web应用程序的性能产生重大影响。</p><h1 id="d30e" class="kg kh ik bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld dt translated">📃有用的链接</h1><ul class=""><li id="7642" class="me mf ik jj b jk le jo lf js mg jw mh ka mi ke mj mk ml mm dt translated"><a class="ae ih" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers" rel="noopener ugc nofollow" target="_blank">使用Web Workers </a></li><li id="8014" class="me mf ik jj b jk mn jo mo js mp jw mq ka mr ke mj mk ml mm dt translated"><a class="ae ih" href="https://developer.mozilla.org/en-US/docs/Web/API/Worker" rel="noopener ugc nofollow" target="_blank">工人界面</a></li><li id="bb71" class="me mf ik jj b jk mn jo mo js mp jw mq ka mr ke mj mk ml mm dt translated"><a class="ae ih" href="https://johnresig.com/blog/web-workers/" rel="noopener ugc nofollow" target="_blank">使用JavaScript Web Workers进行计算</a></li><li id="b066" class="me mf ik jj b jk mn jo mo js mp jw mq ka mr ke mj mk ml mm dt translated"><a class="ae ih" href="https://blog.teamtreehouse.com/using-web-workers-to-speed-up-your-javascript-applications" rel="noopener ugc nofollow" target="_blank">使用Web Workers加速您的JavaScript应用程序</a></li><li id="43e1" class="me mf ik jj b jk mn jo mo js mp jw mq ka mr ke mj mk ml mm dt translated"><a class="ae ih" href="https://html.spec.whatwg.org/multipage/workers.html" rel="noopener ugc nofollow" target="_blank">网络工作者规范</a></li></ul></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><p id="1e89" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">👏<strong class="jj il">感谢您的阅读。欢迎提出建议、意见和想法</strong>👍</p><p id="c5dd" class="pw-post-body-paragraph jh ji ik jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj il">如果你喜欢这个，鼓掌，跟着我上</strong> <a class="ae ih" rel="noopener" href="/@shystruk"> <strong class="jj il">中</strong></a><strong class="jj il"/><a class="ae ih" href="https://twitter.com/shystrukk" rel="noopener ugc nofollow" target="_blank"><strong class="jj il">推特</strong></a><strong class="jj il"/><a class="ae ih" href="https://github.com/shystruk" rel="noopener ugc nofollow" target="_blank"><strong class="jj il">github</strong></a><strong class="jj il">与你的朋友分享</strong>😎</p></div></div>    
</body>
</html>