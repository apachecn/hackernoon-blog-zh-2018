<html>
<head>
<title>React Higher-Order Components</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ååº”é«˜é˜¶æˆåˆ†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/react-higher-order-components-5a8e918106f4?source=collection_archive---------16-----------------------#2018-10-23">https://medium.com/hackernoon/react-higher-order-components-5a8e918106f4?source=collection_archive---------16-----------------------#2018-10-23</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/a7709ada0f9ac70a42095ccae075ee52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XVbWGtpaFV8S4Q1aSrsJNg.png"/></div></div></figure><p id="f068" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">æœ¬å¸–æ˜¯æˆ‘ä»¬</em> <a class="ae kb" href="https://tylermcginnis.com/courses/react-fundamentals/" rel="noopener ugc nofollow" target="_blank"> <em class="ka"> ReactåŸºç¡€</em> </a> <em class="ka">è¯¾ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œå°±å»çœ‹çœ‹å§ã€‚</em></p></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><blockquote class="kj kk kl"><p id="702d" class="jc jd ka je b jf jg jh ji jj jk jl jm km jo jp jq kn js jt ju ko jw jx jy jz hn dt translated">åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæœ‰ä¸¤ä»¶é‡è¦çš„äº‹æƒ…éœ€è¦æ³¨æ„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬è¦è®¨è®ºçš„åªæ˜¯ä¸€ç§æ¨¡å¼ã€‚ä¸å…¶è¯´å®ƒæ˜¯Reactï¼Œä¸å¦‚è¯´å®ƒæ˜¯ç»„ä»¶æ¶æ„ã€‚å…¶æ¬¡ï¼Œè¿™ä¸æ˜¯æ„å»ºReactåº”ç”¨ç¨‹åºæ‰€å¿…éœ€çš„çŸ¥è¯†ã€‚ä½ å¯ä»¥è·³è¿‡è¿™ç¯‡æ–‡ç« ï¼Œæ°¸è¿œä¸çŸ¥é“æˆ‘ä»¬å°†è¦è°ˆè®ºçš„å†…å®¹ï¼Œä½†ä»ç„¶å¯ä»¥æ„å»ºè‰¯å¥½çš„Reactåº”ç”¨ç¨‹åºã€‚ç„¶è€Œï¼Œå°±åƒå»ºé€ ä»»ä½•ä¸œè¥¿ä¸€æ ·ï¼Œä½ æ‹¥æœ‰çš„å·¥å…·è¶Šå¤šï¼Œç»“æœå°±è¶Šå¥½ã€‚å¦‚æœä½ ç¼–å†™Reactåº”ç”¨ç¨‹åºï¼Œä½ çš„â€œå·¥å…·ç®±â€é‡Œæ²¡æœ‰è¿™ä¸ªä¸œè¥¿ä¼šç»™ä½ è‡ªå·±é€ æˆä¼¤å®³ã€‚</p></blockquote><p id="0629" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ä½ å¬åˆ°<code class="eh kp kq kr ks b">Don't Repeat Yourself</code>æˆ–<code class="eh kp kq kr ks b">D.R.Y</code>(è¿‘ä¹ç‹‚çƒ­)çš„å’’è¯­ä¹‹å‰ï¼Œä½ æ— æ³•æ·±å…¥ç ”ç©¶è½¯ä»¶å¼€å‘ã€‚æœ‰æ—¶è¿™å¯èƒ½æœ‰ç‚¹è¿‡åˆ†ï¼Œä½†åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰ä»·å€¼çš„ç›®æ ‡ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹åœ¨Reactä»£ç åº“ä¸­å®ç°DRYçš„æœ€æµè¡Œçš„æ¨¡å¼ï¼Œé«˜é˜¶ç»„ä»¶ã€‚ç„¶è€Œï¼Œåœ¨æˆ‘ä»¬æ¢ç´¢è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»é¦–å…ˆå……åˆ†äº†è§£é—®é¢˜ã€‚</p><p id="28c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å‡è®¾æˆ‘ä»¬è´Ÿè´£é‡æ–°åˆ›å»ºä¸€ä¸ªç±»ä¼¼Stripeçš„ä»ªè¡¨æ¿ã€‚æ­£å¦‚å¤§å¤šæ•°é¡¹ç›®ä¸€æ ·ï¼Œç›´åˆ°æœ€åï¼Œä¸€åˆ‡éƒ½å¾ˆé¡ºåˆ©ã€‚å°±åœ¨æ‚¨è®¤ä¸ºå³å°†å®Œæˆæ—¶ï¼Œæ‚¨æ³¨æ„åˆ°ä»ªè¡¨æ¿ä¸Šæœ‰ä¸€å †ä¸åŒçš„å·¥å…·æç¤ºï¼Œå½“é¼ æ ‡æ‚¬åœåœ¨æŸäº›å…ƒç´ ä¸Šæ—¶ï¼Œå®ƒä»¬éœ€è¦å‡ºç°ã€‚</p><figure class="ku kv kw kx fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff kt"><img src="../Images/05df659210b80b4e3fce6d6c6c6e656d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*57Kctm4l_Jj3Dgps.gif"/></div></div></figure><p id="a6f1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æœ‰å‡ ç§æ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚æ‚¨å†³å®šé‡‡ç”¨çš„æ–¹æ³•æ˜¯æ£€æµ‹å„ä¸ªç»„ä»¶çš„æ‚¬åœçŠ¶æ€ï¼Œå¹¶æ ¹æ®è¯¥çŠ¶æ€æ˜¾ç¤ºæˆ–ä¸æ˜¾ç¤ºå·¥å…·æç¤ºã€‚æ‚¨éœ€è¦æ·»åŠ ä¸‰ä¸ªç»„ä»¶æ¥å®ç°æ‚¬åœæ£€æµ‹åŠŸèƒ½â€” <code class="eh kp kq kr ks b">Info</code>ã€<code class="eh kp kq kr ks b">TrendChart</code>å’Œ<code class="eh kp kq kr ks b">DailyChart</code>ã€‚</p><p id="6d27" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å…ˆè¯´<code class="eh kp kq kr ks b">Info</code>ã€‚ç°åœ¨å®ƒåªæ˜¯ä¸€ä¸ªç®€å•çš„SVGå›¾æ ‡ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="a8ae" class="lc ld hu ks b fv le lf l lg lh">class Info extends React.Component {<br/>  render() {<br/>    return (<br/>      &lt;svg<br/>        className="Icon-svg Icon--hoverable-svg"<br/>        height={this.props.height}<br/>        viewBox="0 0 16 16" width="16"&gt;<br/>          &lt;path d="M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" /&gt;<br/>      &lt;/svg&gt;<br/>    )<br/>  }<br/>}</span></pre><p id="d006" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬éœ€è¦ç»™å®ƒæ·»åŠ åŠŸèƒ½ï¼Œè¿™æ ·å®ƒå°±å¯ä»¥æ£€æµ‹åˆ°å®ƒæ˜¯å¦è¢«æ‚¬åœã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Reacté™„å¸¦çš„<code class="eh kp kq kr ks b">onMouseOver</code>å’Œ<code class="eh kp kq kr ks b">onMouseOut</code>é¼ æ ‡äº‹ä»¶ã€‚å½“ç»„ä»¶æ‚¬åœæ—¶ï¼Œæˆ‘ä»¬ä¼ é€’ç»™<code class="eh kp kq kr ks b">onMouseOver</code>çš„å‡½æ•°å°†è¢«è°ƒç”¨ï¼Œå½“ç»„ä»¶ä¸å†æ‚¬åœæ—¶ï¼Œæˆ‘ä»¬ä¼ é€’ç»™<code class="eh kp kq kr ks b">onMouseOut</code>çš„å‡½æ•°å°†è¢«è°ƒç”¨ã€‚ä¸ºäº†ä»¥Reactçš„æ–¹å¼åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†å‘ç»„ä»¶æ·»åŠ ä¸€ä¸ª<code class="eh kp kq kr ks b">hovering</code>çŠ¶æ€å±æ€§ï¼Œè¿™æ ·å½“<code class="eh kp kq kr ks b">hovering</code>çŠ¶æ€æ”¹å˜æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡æ–°å‘ˆç°ï¼Œæ˜¾ç¤ºæˆ–éšè—æˆ‘ä»¬çš„å·¥å…·æç¤ºã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="f8e9" class="lc ld hu ks b fv le lf l lg lh">class Info extends React.Component {<br/>  state = { hovering: false }<br/>  mouseOver = () =&gt; this.setState({ hovering: true })<br/>  mouseOut = () =&gt; this.setState({ hovering: false })<br/>  render() {<br/>    return (<br/>      &lt;&gt;<br/>        {this.state.hovering === true<br/>          ? &lt;Tooltip id={this.props.id} /&gt;<br/>          : null}<br/>        &lt;svg<br/>          onMouseOver={this.mouseOver}<br/>          onMouseOut={this.mouseOut}<br/>          className="Icon-svg Icon--hoverable-svg"<br/>          height={this.props.height}<br/>          viewBox="0 0 16 16" width="16"&gt;<br/>            &lt;path d="M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" /&gt;<br/>        &lt;/svg&gt;<br/>      &lt;/&gt;<br/>    )<br/>  }<br/>}</span></pre><p id="526e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">çœ‹èµ·æ¥ä¸é”™ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦å‘å¦å¤–ä¸¤ä¸ªç»„ä»¶<code class="eh kp kq kr ks b">TrendChart</code>å’Œ<code class="eh kp kq kr ks b">DailyChart</code>æ·»åŠ ç›¸åŒçš„åŠŸèƒ½ã€‚å¦‚æœæ²¡æœ‰åï¼Œå°±ä¸è¦ä¿®ã€‚æˆ‘ä»¬å¯¹<code class="eh kp kq kr ks b">Info</code>çš„æ‚¬åœé€»è¾‘å·¥ä½œå¾—å¾ˆå¥½ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ç›¸åŒçš„ä»£ç ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="863f" class="lc ld hu ks b fv le lf l lg lh">class TrendChart extends React.Component {<br/>  state = { hovering: false }<br/>  mouseOver = () =&gt; this.setState({ hovering: true })<br/>  mouseOut = () =&gt; this.setState({ hovering: false })<br/>  render() {<br/>    return (<br/>      &lt;&gt;<br/>        {this.state.hovering === true<br/>          ? &lt;Tooltip id={this.props.id}/&gt;<br/>          : null}<br/>        &lt;Chart<br/>          type='trend'<br/>          onMouseOver={this.mouseOver}<br/>          onMouseOut={this.mouseOut}<br/>        /&gt;<br/>      &lt;/&gt;<br/>    )<br/>  }<br/>}</span></pre><p id="263e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½ å¤§æ¦‚çŸ¥é“ä¸‹ä¸€æ­¥ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æœ€åçš„<code class="eh kp kq kr ks b">DailyChart</code>ç»„ä»¶åšåŒæ ·çš„äº‹æƒ…ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="76e0" class="lc ld hu ks b fv le lf l lg lh">class DailyChart extends React.Component {<br/>  state = { hovering: false }<br/>  mouseOver = () =&gt; this.setState({ hovering: true })<br/>  mouseOut = () =&gt; this.setState({ hovering: false })<br/>  render() {<br/>    return (<br/>      &lt;&gt;<br/>        {this.state.hovering === true<br/>          ? &lt;Tooltip id={this.props.id}/&gt;<br/>          : null}<br/>        &lt;Chart<br/>          type='daily'<br/>          onMouseOver={this.mouseOver}<br/>          onMouseOut={this.mouseOut}<br/>        /&gt;<br/>      &lt;/&gt;<br/>    )<br/>  }<br/>}</span></pre><p id="da07" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å°±è¿™æ ·ï¼Œæˆ‘ä»¬éƒ½å®Œäº†ã€‚ä½ å¯èƒ½ä»¥å‰å†™è¿‡è¿™æ ·çš„Reactã€‚ä¸æ˜¯ä¸–ç•Œæœ«æ—¥(#shipit)ï¼Œä½†ä¹Ÿä¸æ˜¯å¾ˆâ€œå¹²â€ã€‚å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬åœ¨æ¯ä¸ªç»„ä»¶ä¸­é‡å¤å®Œå…¨ç›¸åŒçš„æ‚¬åœé€»è¾‘ã€‚</p><p id="95ba" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ­¤æ—¶ï¼Œ<strong class="je hv">é—®é¢˜</strong>åº”è¯¥å¾ˆæ¸…æ¥šäº†ï¼Œ<strong class="je hv">æˆ‘ä»¬å¸Œæœ›é¿å…åœ¨æ–°ç»„ä»¶éœ€è¦æ—¶å¤åˆ¶æˆ‘ä»¬çš„æ‚¬åœé€»è¾‘</strong>ã€‚é‚£ä¹ˆæœ‰ä»€ä¹ˆ<strong class="je hv">è§£å†³æ–¹æ¡ˆ</strong>ï¼Ÿåœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œè®©æˆ‘ä»¬æ¥è°ˆè°ˆä¸€äº›ç¼–ç¨‹æ¦‚å¿µï¼Œè¿™äº›æ¦‚å¿µå°†ä½¿ç†è§£è§£å†³æ–¹æ¡ˆå˜å¾—æ›´åŠ å®¹æ˜“ï¼Œ<code class="eh kp kq kr ks b">callbacks</code>å’Œ<code class="eh kp kq kr ks b">higher-order functions</code>ã€‚</p><p id="8429" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨JavaScriptä¸­ï¼Œå‡½æ•°æ˜¯â€œç¬¬ä¸€ç±»å¯¹è±¡â€ã€‚è¿™æ„å‘³ç€ï¼Œå°±åƒå¯¹è±¡/æ•°ç»„/å­—ç¬¦ä¸²å¯ä»¥èµ‹ç»™å˜é‡ï¼Œä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œæˆ–è€…ä»å‡½æ•°è¿”å›ä¸€æ ·ï¼Œå…¶ä»–å‡½æ•°ä¹Ÿå¯ä»¥ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="e344" class="lc ld hu ks b fv le lf l lg lh">function add (x, y) {<br/>  return x + y<br/>}</span><span id="b9f8" class="lc ld hu ks b fv li lf l lg lh">function addFive (x, addReference) {<br/>  return addReference(x, 5)<br/>}</span><span id="e239" class="lc ld hu ks b fv li lf l lg lh">addFive(10, add) // 15</span></pre><p id="7de2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœä½ ä¸ä¹ æƒ¯ï¼Œä½ çš„å¤§è„‘å¯èƒ½ä¼šæœ‰ç‚¹å¥‡æ€ªã€‚æˆ‘ä»¬å°†<code class="eh kp kq kr ks b">add</code>å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ç»™<code class="eh kp kq kr ks b">addFive</code>å‡½æ•°ï¼Œå°†å…¶é‡å‘½åä¸º<code class="eh kp kq kr ks b">addReference</code>ï¼Œç„¶åæˆ‘ä»¬è°ƒç”¨å®ƒã€‚</p><p id="a52c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å½“ä½ è¿™æ ·åšçš„æ—¶å€™ï¼Œä½ ä½œä¸ºå‚æ•°ä¼ é€’çš„å‡½æ•°å«åš<strong class="je hv">å›è°ƒ</strong>å‡½æ•°ï¼Œä½ ä¼ é€’å›è°ƒå‡½æ•°çš„å‡½æ•°å«åš<strong class="je hv">é«˜é˜¶å‡½æ•°</strong>ã€‚</p><p id="6064" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å› ä¸ºè¯æ±‡å¾ˆé‡è¦ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ç›¸åŒçš„ä»£ç ï¼Œå˜é‡è¢«é‡æ–°å‘½åä»¥åŒ¹é…å®ƒä»¬æ‰€æ¼”ç¤ºçš„æ¦‚å¿µã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="84c1" class="lc ld hu ks b fv le lf l lg lh">function add (x,y) {<br/>  return x + y<br/>}</span><span id="ba1c" class="lc ld hu ks b fv li lf l lg lh">function higherOrderFunction (x, callback) {<br/>  return callback(x, 5)<br/>}</span><span id="887d" class="lc ld hu ks b fv li lf l lg lh">higherOrderFunction(10, add)</span></pre><p id="908f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™ç§æ¨¡å¼åº”è¯¥çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ï¼Œåˆ°å¤„éƒ½æ˜¯ã€‚å¦‚æœæ‚¨æ›¾ç»ä½¿ç”¨è¿‡ä»»ä½•JavaScriptæ•°ç»„æ–¹æ³•ã€jQueryæˆ–ç±»ä¼¼lodashçš„åº“ï¼Œé‚£ä¹ˆæ‚¨å·²ç»ä½¿ç”¨è¿‡é«˜é˜¶å‡½æ•°å’Œå›è°ƒã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="d3a6" class="lc ld hu ks b fv le lf l lg lh">[1,2,3].map((i) =&gt; i + 5)</span><span id="b8ec" class="lc ld hu ks b fv li lf l lg lh">_.filter([1,2,3,4], (n) =&gt; n % 2 === 0 );</span><span id="5389" class="lc ld hu ks b fv li lf l lg lh">$('#btn').on('click', () =&gt;<br/>  console.log('Callbacks are everywhere')<br/>)</span></pre><p id="0db6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è®©æˆ‘ä»¬å›åˆ°æˆ‘ä»¬çš„ä¾‹å­ã€‚å¦‚æœä¸ä»…ä»…æ˜¯åˆ›å»ºä¸€ä¸ª<code class="eh kp kq kr ks b">addFive</code>å‡½æ•°ï¼Œæˆ‘ä»¬è¿˜æƒ³è¦ä¸€ä¸ª<code class="eh kp kq kr ks b">addTen</code>å‡½æ•°ã€<code class="eh kp kq kr ks b">addTwenty</code>å‡½æ•°ç­‰ç­‰ï¼Œé‚£ä¼šæ€ä¹ˆæ ·ï¼Ÿä½¿ç”¨æˆ‘ä»¬å½“å‰çš„å®ç°ï¼Œæ¯å½“æˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ–°åŠŸèƒ½æ—¶ï¼Œæˆ‘ä»¬éƒ½å¿…é¡»å¤åˆ¶å¤§é‡çš„é€»è¾‘ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="388c" class="lc ld hu ks b fv le lf l lg lh">function add (x, y) {<br/>  return x + y<br/>}</span><span id="7255" class="lc ld hu ks b fv li lf l lg lh">function addFive (x, addReference) {<br/>  return addReference(x, 5)<br/>}</span><span id="40ac" class="lc ld hu ks b fv li lf l lg lh">function addTen (x, addReference) {<br/>  return addReference(x, 10)<br/>}</span><span id="d0a8" class="lc ld hu ks b fv li lf l lg lh">function addTwenty (x, addReference) {<br/>  return addReference(x, 20)<br/>}</span><span id="c22f" class="lc ld hu ks b fv li lf l lg lh">addFive(10, add) // 15<br/>addTen(10, add) // 20<br/>addTwenty(10, add) // 30</span></pre><p id="dc0a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å†è¯´ä¸€æ¬¡ï¼Œè¿™å¹¶ä¸å¯æ€•ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨é‡å¤å¾ˆå¤šç›¸åŒçš„é€»è¾‘ã€‚è¿™é‡Œçš„ç›®æ ‡æ˜¯èƒ½å¤Ÿæ ¹æ®æˆ‘ä»¬çš„éœ€è¦åˆ›å»ºå°½å¯èƒ½å¤šçš„â€œåŠ æ³•å™¨â€å‡½æ•°(<code class="eh kp kq kr ks b">addFive</code>ã€<code class="eh kp kq kr ks b">addTen</code>ã€<code class="eh kp kq kr ks b">addTwenty</code>ç­‰)ï¼ŒåŒæ—¶å°½é‡å‡å°‘ä»£ç é‡å¤ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œå¦‚æœæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª<code class="eh kp kq kr ks b">makeAdder</code>å‡½æ•°ä¼šæ€ä¹ˆæ ·ï¼Ÿè¿™ä¸ªå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°å­—å’Œå¯¹æœ€åˆçš„<code class="eh kp kq kr ks b">add</code>å‡½æ•°çš„å¼•ç”¨ã€‚å› ä¸ºè¿™ä¸ªå‡½æ•°çš„ç›®æ ‡æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„åŠ æ³•å™¨å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è®©å®ƒè¿”å›ä¸€ä¸ªå…¨æ–°çš„å‡½æ•°ï¼Œæ¥å—è¦ç›¸åŠ çš„æ•°å­—ã€‚è¯´äº†å¾ˆå¤šè¯ã€‚è®©æˆ‘ä»¬çœ‹ä¸€äº›ä»£ç ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="238b" class="lc ld hu ks b fv le lf l lg lh">function add (x, y) {<br/>  return x + y<br/>}</span><span id="43c9" class="lc ld hu ks b fv li lf l lg lh">function makeAdder (x, addReference) {<br/>  return function (y) {<br/>    return addReference(x, y)<br/>  }<br/>}</span><span id="716e" class="lc ld hu ks b fv li lf l lg lh">const addFive = makeAdder(5, add)<br/>const addTen = makeAdder(10, add)<br/>const addTwenty = makeAdder(20, add)</span><span id="ab3a" class="lc ld hu ks b fv li lf l lg lh">addFive(10) // 15<br/>addTen(10) // 20<br/>addTwenty(10) // 30</span></pre><p id="ca08" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">é…·æ¯™äº†ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦åˆ›å»ºå°½å¯èƒ½å¤šçš„â€œåŠ æ³•å™¨â€åŠŸèƒ½ï¼ŒåŒæ—¶å°½é‡å‡å°‘æˆ‘ä»¬å¿…é¡»ç¼–å†™çš„é‡å¤ä»£ç ã€‚</p><blockquote class="kj kk kl"><p id="534a" class="jc jd ka je b jf jg jh ji jj jk jl jm km jo jp jq kn js jt ju ko jw jx jy jz hn dt translated">å¦‚æœä½ åœ¨æ„çš„è¯ï¼Œè¿™ç§è®©ä¸€ä¸ªå¤šå‚æ•°å‡½æ•°è¿”å›ä¸€ä¸ªå‚æ•°æ›´å°‘çš„æ–°å‡½æ•°çš„æ¦‚å¿µè¢«ç§°ä¸ºâ€œéƒ¨åˆ†åº”ç”¨â€ï¼Œè¿™æ˜¯ä¸€ç§å‡½æ•°å¼ç¼–ç¨‹æŠ€æœ¯ã€‚JavaScriptçš„â€ã€‚bindâ€æ–¹æ³•å°±æ˜¯ä¸€ä¸ªå¸¸è§çš„ä¾‹å­ã€‚</p></blockquote><p id="c844" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¥½å§ï¼Œä½†æ˜¯è¿™å’ŒReactæœ‰ä»€ä¹ˆå…³ç³»ï¼Œä»¥åŠæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„åœ¨æ–°ç»„ä»¶éœ€è¦æ—¶å¤åˆ¶æ‚¬åœé€»è¾‘çš„é—®é¢˜ï¼Ÿæ­£å¦‚åˆ›å»ºæˆ‘ä»¬çš„<code class="eh kp kq kr ks b">makeAdder</code>é«˜é˜¶å‡½æ•°å…è®¸æˆ‘ä»¬æœ€å°åŒ–ä»£ç é‡å¤ä¸€æ ·ï¼Œåˆ¶ä½œä¸€ä¸ªç±»ä¼¼çš„â€œé«˜é˜¶ç»„ä»¶â€ä¹Ÿèƒ½ä»¥åŒæ ·çš„æ–¹å¼å¸®åŠ©æˆ‘ä»¬ã€‚ç„¶è€Œï¼Œä¸æ˜¯é«˜é˜¶å‡½æ•°è¿”å›è°ƒç”¨å›è°ƒçš„æ–°å‡½æ•°ï¼Œè€Œæ˜¯é«˜é˜¶ç»„ä»¶å¯ä»¥è¿”å›å‘ˆç°â€œå›è°ƒâ€ç»„ä»¶çš„æ–°ç»„ä»¶ğŸ¤¯ã€‚å¤ªå¤šäº†ã€‚æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹ã€‚</p><p id="ab1e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">(æˆ‘ä»¬çš„)é«˜é˜¶å‡½æ•°</p><ul class=""><li id="05bd" class="lj lk hu je b jf jg jj jk jn ll jr lm jv ln jz lo lp lq lr dt translated">æ˜¯ä¸€ä¸ªå‡½æ•°</li><li id="bd84" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">æ¥å—å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°</li><li id="5a30" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">è¿”å›ä¸€ä¸ªæ–°å‡½æ•°</li><li id="8aeb" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">å®ƒè¿”å›çš„å‡½æ•°å¯ä»¥è°ƒç”¨ä¼ å…¥çš„åŸå§‹å›è°ƒå‡½æ•°</li></ul><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="67e3" class="lc ld hu ks b fv le lf l lg lh">function higherOrderFunction (callback) {<br/>  return function () {<br/>    return callback()<br/>  }<br/>}</span></pre><p id="fc5d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">(æˆ‘ä»¬çš„)é«˜é˜¶åˆ†é‡</p><ul class=""><li id="bf9a" class="lj lk hu je b jf jg jj jk jn ll jr lm jv ln jz lo lp lq lr dt translated">æ˜¯ä¸€ä¸ªç»„ä»¶</li><li id="e2c5" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">æ¥å—ä¸€ä¸ªç»„ä»¶ä½œä¸ºå‚æ•°</li><li id="07b6" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">è¿”å›ä¸€ä¸ªæ–°ç»„ä»¶</li><li id="047c" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">å®ƒè¿”å›çš„ç»„ä»¶å¯ä»¥å‘ˆç°ä¼ å…¥çš„åŸå§‹ç»„ä»¶</li></ul><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="68c1" class="lc ld hu ks b fv le lf l lg lh">function higherOrderComponent (Component) {<br/>  return class extends React.Component {<br/>    render() {<br/>      return &lt;Component /&gt;<br/>    }<br/>  }<br/>}</span></pre><p id="5f60" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å¯¹é«˜é˜¶å™¨ä»¶çš„åŠŸèƒ½æœ‰äº†åŸºæœ¬çš„äº†è§£ï¼Œè®©æˆ‘ä»¬å¼€å§‹æ„å»ºè‡ªå·±çš„å™¨ä»¶ã€‚å¦‚æœä½ è¿˜è®°å¾—ï¼Œä¹‹å‰çš„é—®é¢˜æ˜¯æˆ‘ä»¬åœ¨æ‰€æœ‰éœ€è¦è¯¥åŠŸèƒ½çš„ç»„ä»¶ä¹‹é—´å¤åˆ¶äº†æˆ‘ä»¬æ‰€æœ‰çš„æ‚¬åœé€»è¾‘ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="f067" class="lc ld hu ks b fv le lf l lg lh">state = { hovering: false }<br/>mouseOver = () =&gt; this.setState({ hovering: true })<br/>mouseOut = () =&gt; this.setState({ hovering: false })</span></pre><p id="ebeb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„é«˜é˜¶ç»„ä»¶(æˆ‘ä»¬ç§°ä¹‹ä¸º<code class="eh kp kq kr ks b">withHover</code>)èƒ½å¤Ÿå°†æ‚¬åœé€»è¾‘å°è£…åœ¨å…¶è‡ªèº«ä¸­ï¼Œç„¶åå°†<code class="eh kp kq kr ks b">hovering</code>çŠ¶æ€ä¼ é€’ç»™å®ƒæ‰€å‘ˆç°çš„ç»„ä»¶ã€‚è¿™å°†å…è®¸æˆ‘ä»¬é¿å…å¤åˆ¶æ‰€æœ‰çš„æ‚¬åœé€»è¾‘ï¼Œè€Œæ˜¯å°†å®ƒæ”¾å…¥ä¸€ä¸ªå•ç‹¬çš„ä½ç½®(<code class="eh kp kq kr ks b">withHover</code>)ã€‚</p><p id="87b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æœ€ç»ˆï¼Œè¿™æ˜¯æœ€ç»ˆç›®æ ‡ã€‚æ¯å½“æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªçŸ¥é“å®ƒçš„<code class="eh kp kq kr ks b">hovering</code>çŠ¶æ€çš„ç»„ä»¶æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†åŸå§‹ç»„ä»¶ä¼ é€’ç»™æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">withHover</code>é«˜é˜¶ç»„ä»¶ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="3149" class="lc ld hu ks b fv le lf l lg lh">const InfoWithHover = withHover(Info)<br/>const TrendChartWithHover = withHover(TrendChart)<br/>const DailyChartWithHover = withHover(DailyChart)</span></pre><p id="d0c2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç„¶åï¼Œæ¯å½“<code class="eh kp kq kr ks b">withHover</code>è¿”å›çš„ä»»ä½•ç»„ä»¶è¢«æ¸²æŸ“æ—¶ï¼Œä»–ä»¬å°†æ¸²æŸ“åŸå§‹ç»„ä»¶ï¼Œä¼ é€’ç»™å®ƒä¸€ä¸ª<code class="eh kp kq kr ks b">hovering</code>é“å…·ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="8627" class="lc ld hu ks b fv le lf l lg lh">function Info ({ hovering, height }) {<br/>  return (<br/>    &lt;&gt;<br/>      {hovering === true<br/>        ? &lt;Tooltip id={this.props.id} /&gt;<br/>        : null}<br/>      &lt;svg<br/>        className="Icon-svg Icon--hoverable-svg"<br/>        height={height}<br/>        viewBox="0 0 16 16" width="16"&gt;<br/>          &lt;path d="M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" /&gt;<br/>      &lt;/svg&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span></pre><p id="34ee" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬éœ€è¦åšçš„æœ€åä¸€ä»¶äº‹å°±æ˜¯å®é™…å®æ–½<code class="eh kp kq kr ks b">withHover</code>ã€‚æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çœ‹åˆ°çš„ï¼Œå®ƒéœ€è¦åšä¸‰ä»¶äº‹</p><ul class=""><li id="ae81" class="lj lk hu je b jf jg jj jk jn ll jr lm jv ln jz lo lp lq lr dt translated">æ¥å—ä¸€ä¸ªâ€œç»„ä»¶â€å‚æ•°ã€‚</li><li id="79c6" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">è¿”å›æ–°ç»„ä»¶</li><li id="26b0" class="lj lk hu je b jf ls jj lt jn lu jr lv jv lw jz lo lp lq lr dt translated">å‘ˆç°â€œç»„ä»¶â€å‚æ•°ï¼Œä¼ é€’ç»™å®ƒä¸€ä¸ªâ€œæ‚¬åœâ€é“å…·ã€‚</li></ul><p id="937d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ¥å—ä¸€ä¸ªâ€œç»„ä»¶â€å‚æ•°ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="0471" class="lc ld hu ks b fv le lf l lg lh">function withHover (Component) { }</span></pre><p id="c456" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿”å›æ–°ç»„ä»¶</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="76b3" class="lc ld hu ks b fv le lf l lg lh">```js<br/>function withHover (Component) {<br/>  return class WithHover extends React.Component {</span><span id="4937" class="lc ld hu ks b fv li lf l lg lh">  }<br/>}</span></pre><h2 id="94bf" class="lc ld hu bd lx ly lz ma mb mc md me mf jn mg mh mi jr mj mk ml jv mm mn mo mp dt translated">å‘ˆç°â€œç»„ä»¶â€å‚æ•°ï¼Œä¼ é€’ç»™å®ƒä¸€ä¸ªâ€œæ‚¬åœâ€é“å…·ã€‚</h2><p id="779b" class="pw-post-body-paragraph jc jd hu je b jf mq jh ji jj mr jl jm jn ms jp jq jr mt jt ju jv mu jx jy jz hn dt translated">ç°åœ¨é—®é¢˜å˜æˆäº†ï¼Œæˆ‘ä»¬å¦‚ä½•å¾—åˆ°<code class="eh kp kq kr ks b">hovering</code>çŠ¶æ€ï¼Ÿæˆ‘ä»¬å·²ç»æœ‰äº†ä¹‹å‰æ„å»ºçš„ä»£ç ã€‚æˆ‘ä»¬åªéœ€è¦å°†å®ƒæ·»åŠ åˆ°æ–°ç»„ä»¶ä¸­ï¼Œç„¶ååœ¨å‘ˆç°å‚æ•°<code class="eh kp kq kr ks b">Component</code>æ—¶å°†<code class="eh kp kq kr ks b">hovering</code>çŠ¶æ€ä½œä¸ºé“å…·ä¼ é€’ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="c7d1" class="lc ld hu ks b fv le lf l lg lh">function withHover(Component) {<br/>  return class WithHover extends React.Component {<br/>    state = { hovering: false }<br/>    mouseOver = () =&gt; this.setState({ hovering: true })<br/>    mouseOut = () =&gt; this.setState({ hovering: false })<br/>    render() {<br/>      return (<br/>        &lt;div <br/>          onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;<br/>            &lt;Component hovering={this.state.hovering} /&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }<br/>  }<br/>}</span></pre><p id="9b1d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘å–œæ¬¢è¿™æ ·æƒ³(ä»¥åŠåœ¨Reactæ–‡æ¡£ä¸­æ˜¯å¦‚ä½•æåˆ°çš„)æ˜¯<strong class="je hv">ä¸€ä¸ªç»„ä»¶å°†propsè½¬æ¢æˆUIï¼Œä¸€ä¸ªé«˜é˜¶ç»„ä»¶å°†ä¸€ä¸ªç»„ä»¶è½¬æ¢æˆå¦ä¸€ä¸ªç»„ä»¶ã€‚</strong>åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">Info</code>ã€<code class="eh kp kq kr ks b">TrendChart</code>å’Œ<code class="eh kp kq kr ks b">DailyChart</code>ç»„ä»¶è½¬æ¢æˆæ–°çš„ç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶é€šè¿‡<code class="eh kp kq kr ks b">hovering</code> propçŸ¥é“å®ƒä»¬çš„æ‚¬åœçŠ¶æ€ã€‚</p><p id="20b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»è®¨è®ºäº†é«˜é˜¶å…ƒä»¶çš„æ‰€æœ‰åŸºç¡€çŸ¥è¯†ã€‚ä¸è¿‡ï¼Œè¿˜æœ‰å‡ ä¸ªæ›´é‡è¦çš„é¡¹ç›®éœ€è¦è®¨è®ºã€‚</p><p id="d3ff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœä½ å›å¤´çœ‹çœ‹æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">withHover</code> HOCï¼Œå®ƒçš„ä¸€ä¸ªå¼±ç‚¹æ˜¯å®ƒå‡è®¾æ¶ˆè´¹è€…å¯ä»¥æ¥å—ä¸€ä¸ªåä¸º<code class="eh kp kq kr ks b">hovering</code>çš„é“å…·ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œè¿™å¯èƒ½æ˜¯å¥½çš„ï¼Œä½†åœ¨æŸäº›ç”¨ä¾‹ä¸­å´ä¸æ˜¯è¿™æ ·ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç»„ä»¶å·²ç»æœ‰äº†ä¸€ä¸ªåä¸º<code class="eh kp kq kr ks b">hovering</code>çš„é“å…·è¯¥æ€ä¹ˆåŠï¼Ÿæˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªå‘½åå†²çªã€‚æˆ‘ä»¬å¯ä»¥åšçš„ä¸€ä¸ªæ”¹å˜æ˜¯å…è®¸æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">withHover</code> HOCçš„æ¶ˆè´¹è€…æŒ‡å®šå½“æ‚¬åœçŠ¶æ€ä½œä¸ºé“å…·ä¼ é€’ç»™ä»–ä»¬çš„ç»„ä»¶æ—¶ï¼Œä»–ä»¬å¸Œæœ›æ‚¬åœçŠ¶æ€çš„åç§°æ˜¯ä»€ä¹ˆã€‚å› ä¸º<code class="eh kp kq kr ks b">withHover</code>åªæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒæ”¹ä¸ºæ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ƒæŒ‡å®šäº†æˆ‘ä»¬å°†ä¼ é€’ç»™ç»„ä»¶çš„é“å…·çš„åç§°ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="0b89" class="lc ld hu ks b fv le lf l lg lh">function withHover(Component, propName = 'hovering') {<br/>  return class WithHover extends React.Component {<br/>    state = { hovering: false }<br/>    mouseOver = () =&gt; this.setState({ hovering: true })<br/>    mouseOut = () =&gt; this.setState({ hovering: false })<br/>    render() {<br/>      const props = {<br/>        [propName]: this.state.hovering<br/>      }</span><span id="1bb5" class="lc ld hu ks b fv li lf l lg lh">      return (<br/>        &lt;div <br/>          onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;<br/>            &lt;Component {...props} /&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }<br/>  }<br/>}</span></pre><p id="7864" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬å·²ç»è®¾ç½®äº†é»˜è®¤çš„é“å…·åä¸º<code class="eh kp kq kr ks b">hovering</code>(é€šè¿‡ES6çš„é»˜è®¤å‚æ•°)ï¼Œä½†æ˜¯å¦‚æœ<code class="eh kp kq kr ks b">withHover</code>çš„æ¶ˆè´¹è€…æƒ³è¦æ”¹å˜å®ƒï¼Œä»–ä»¬å¯ä»¥é€šè¿‡ä¼ å…¥æ–°çš„é“å…·åä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="f1f4" class="lc ld hu ks b fv le lf l lg lh">function withHover(Component, propName = 'hovering') {<br/>  return class WithHover extends React.Component {<br/>    state = { hovering: false }<br/>    mouseOver = () =&gt; this.setState({ hovering: true })<br/>    mouseOut = () =&gt; this.setState({ hovering: false })<br/>    render() {<br/>      const props = {<br/>        [propName]: this.state.hovering<br/>      }</span><span id="74da" class="lc ld hu ks b fv li lf l lg lh">      return (<br/>        &lt;div <br/>          onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;<br/>            &lt;Component {...props} /&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }<br/>  }<br/>}</span><span id="5c42" class="lc ld hu ks b fv li lf l lg lh">function Info ({ showTooltip, height }) {<br/>  return (<br/>    &lt;&gt;<br/>      {showTooltip === true<br/>        ? &lt;Tooltip id={this.props.id} /&gt;<br/>        : null}<br/>      &lt;svg<br/>        className="Icon-svg Icon--hoverable-svg"<br/>        height={height}<br/>        viewBox="0 0 16 16" width="16"&gt;<br/>          &lt;path d="M9 8a1 1 0 0 0-1-1H5.5a1 1 0 1 0 0 2H7v4a1 1 0 0 0 2 0zM4 0h8a4 4 0 0 1 4 4v8a4 4 0 0 1-4 4H4a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4zm4 5.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" /&gt;<br/>      &lt;/svg&gt;<br/>    &lt;/&gt;<br/>  )<br/>}</span><span id="e0f2" class="lc ld hu ks b fv li lf l lg lh">const InfoWithHover = withHover(Info, 'showTooltip')</span></pre><p id="68e4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">withHover</code>å®ç°çš„å¦ä¸€ä¸ªé—®é¢˜ã€‚æŸ¥çœ‹æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">Info</code>ç»„ä»¶ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°å®ƒè¿˜åº”è¯¥æ¥å—ä¸€ä¸ª<code class="eh kp kq kr ks b">height</code>å±æ€§ã€‚æŒ‰ç…§ç›®å‰æˆ‘ä»¬è®¾ç½®çš„æ–¹å¼ï¼Œ<code class="eh kp kq kr ks b">height</code>å°†æ˜¯æœªå®šä¹‰çš„ã€‚åŸå› æ˜¯å› ä¸ºæˆ‘ä»¬çš„<code class="eh kp kq kr ks b">withHover</code>ç»„ä»¶æ˜¯å‘ˆç°<code class="eh kp kq kr ks b">Component</code>çš„ç»„ä»¶ã€‚ç›®å‰æˆ‘ä»¬æ˜¯å¦‚ä½•è®¾ç½®çš„ï¼Œé™¤äº†æˆ‘ä»¬åˆ›å»ºçš„<code class="eh kp kq kr ks b">hovering</code>é“å…·ä¹‹å¤–ï¼Œæˆ‘ä»¬æ²¡æœ‰ä¼ é€’ä»»ä½•é“å…·ç»™<code class="eh kp kq kr ks b">&lt;Component /&gt;</code>ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="afac" class="lc ld hu ks b fv le lf l lg lh">const InfoWithHover = withHover(Info)</span><span id="b4ac" class="lc ld hu ks b fv li lf l lg lh">...</span><span id="ff43" class="lc ld hu ks b fv li lf l lg lh">return &lt;InfoWithHover height="16px" /&gt;</span></pre><p id="c7d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh kp kq kr ks b">height</code>å±æ€§è¢«ä¼ é€’ç»™<code class="eh kp kq kr ks b">InfoWithHover</code>ç»„ä»¶ã€‚ä½†æ˜¯é‚£ä¸ªç»„ä»¶åˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿè¿™æ˜¯æˆ‘ä»¬ä»<code class="eh kp kq kr ks b">withHover</code>è¿”å›çš„ç»„ä»¶ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="d436" class="lc ld hu ks b fv le lf l lg lh">function withHover(Component, propName = 'hovering') {<br/>  return class WithHover extends React.Component {<br/>    state = { hovering: false }<br/>    mouseOver = () =&gt; this.setState({ hovering: true })<br/>    mouseOut = () =&gt; this.setState({ hovering: false })<br/>    render() {<br/>      console.log(this.props) // { height: "16px" }</span><span id="663b" class="lc ld hu ks b fv li lf l lg lh">      const props = {<br/>        [propName]: this.state.hovering<br/>      }</span><span id="7c9e" class="lc ld hu ks b fv li lf l lg lh">      return (<br/>        &lt;div <br/>           onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;<br/>              &lt;Component {...props} /&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }<br/>  }<br/>}</span></pre><p id="9478" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨<code class="eh kp kq kr ks b">WithHover</code>ç»„ä»¶<code class="eh kp kq kr ks b">this.props.height</code>çš„å†…éƒ¨æ˜¯<code class="eh kp kq kr ks b">16px</code>ï¼Œä½†æ˜¯ä»é‚£é‡Œæˆ‘ä»¬ä¸åšä»»ä½•äº‹æƒ…ã€‚æˆ‘ä»¬éœ€è¦ç¡®ä¿å°†å®ƒä¼ é€’ç»™æˆ‘ä»¬æ­£åœ¨å‘ˆç°çš„<code class="eh kp kq kr ks b">Component</code>å‚æ•°ã€‚</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="db03" class="lc ld hu ks b fv le lf l lg lh">render() {<br/>      const props = {<br/>        [propName]: this.state.hovering,<br/>        ...this.props,<br/>      }</span><span id="fbb2" class="lc ld hu ks b fv li lf l lg lh">      return (<br/>        &lt;div <br/>          onMouseOver={this.mouseOver} onMouseOut={this.mouseOut}&gt;<br/>            &lt;Component {...props} /&gt;<br/>        &lt;/div&gt;<br/>      );<br/>    }</span></pre><p id="a687" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ä½¿ç”¨é«˜é˜¶ç»„ä»¶åœ¨å„ç§ç»„ä»¶ä¹‹é—´é‡ç”¨ç»„ä»¶é€»è¾‘è€Œä¸é‡å¤ä»£ç çš„å¥½å¤„ã€‚ä½†æ˜¯ï¼Œå®ƒæœ‰ä»€ä¹ˆç¼ºé™·å—ï¼Ÿæ˜¯çš„ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†ã€‚</p><p id="e1da" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½¿ç”¨HOCæ—¶ï¼Œä¼šå‘ç”Ÿ<a class="ae kb" href="https://en.wikipedia.org/wiki/Inversion_of_control" rel="noopener ugc nofollow" target="_blank">æ§åˆ¶åè½¬</a>ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨åƒReactè·¯ç”±å™¨çš„<code class="eh kp kq kr ks b">withRouter</code> HOCé‚£æ ·çš„ç¬¬ä¸‰æ–¹HOCã€‚æ ¹æ®ä»–ä»¬çš„æ–‡æ¡£ï¼Œâ€œæ— è®ºä½•æ—¶æ¸²æŸ“ï¼Œ<code class="eh kp kq kr ks b">withRouter</code>éƒ½ä¼šå°†<code class="eh kp kq kr ks b">match</code>ã€<code class="eh kp kq kr ks b">location</code>å’Œ<code class="eh kp kq kr ks b">history</code>é“å…·ä¼ é€’ç»™è¢«åŒ…è£…çš„ç»„ä»¶ã€‚â€</p><pre class="ku kv kw kx fq ky ks kz la aw lb dt"><span id="c144" class="lc ld hu ks b fv le lf l lg lh">class Game extends React.Component {<br/>  render() {<br/>    const { <br/>      match, <br/>      location, <br/>      history <br/>    } = this.props // From React Router</span><span id="7b5d" class="lc ld hu ks b fv li lf l lg lh">    ...<br/>  }<br/>}</span><span id="ee1b" class="lc ld hu ks b fv li lf l lg lh">export default withRouter(Game)</span></pre><p id="5e16" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ³¨æ„æˆ‘ä»¬ä¸æ˜¯åˆ›å»º<code class="eh kp kq kr ks b">Game</code>å…ƒç´ çš„äºº(å³<code class="eh kp kq kr ks b">&lt;Game /&gt;</code>)ã€‚æˆ‘ä»¬æŠŠæˆ‘ä»¬çš„ç»„ä»¶å®Œå…¨äº¤ç»™äº†React Routerï¼Œæˆ‘ä»¬ç›¸ä¿¡ä»–ä»¬ä¸ä»…ä¼šæ¸²æŸ“å®ƒï¼Œè¿˜ä¼šä¼ é€’ç»™å®ƒæ­£ç¡®çš„é“å…·ã€‚æˆ‘ä»¬ä¹‹å‰åœ¨è®¨è®ºä¸<code class="eh kp kq kr ks b">hovering</code>çš„å‘½åå†²çªæ—¶çœ‹åˆ°äº†è¿™ä¸ªé—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å†³å®šè®©æˆ‘ä»¬çš„<code class="eh kp kq kr ks b">withHover</code> HOCçš„æ¶ˆè´¹è€…ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°æ¥é…ç½®æ­£ç¡®çš„åç§°ã€‚æœ‰äº†ç¬¬ä¸‰æ–¹<code class="eh kp kq kr ks b">withRouter</code>ç‰¹è®¾ï¼Œæˆ‘ä»¬æ²¡æœ‰é‚£ä¸ªé€‰é¡¹ã€‚å¦‚æœæˆ‘ä»¬çš„<code class="eh kp kq kr ks b">Game</code>ç»„ä»¶å·²ç»åœ¨ä½¿ç”¨<code class="eh kp kq kr ks b">match</code>ã€<code class="eh kp kq kr ks b">location</code>æˆ–<code class="eh kp kq kr ks b">history</code>ï¼Œæˆ‘ä»¬å°±ä¸èµ°è¿äº†ã€‚æˆ‘ä»¬è¦ä¹ˆå¿…é¡»åœ¨ç»„ä»¶ä¸­ä¿®æ”¹è¿™äº›åç§°ï¼Œè¦ä¹ˆå¿…é¡»åœæ­¢ä½¿ç”¨<code class="eh kp kq kr ks b">withRouter</code> HOCã€‚</p></div><div class="ab cl kc kd hc ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="hn ho hp hq hr"><p id="fe32" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">è¿™ç¯‡æ–‡ç« æœ€åˆå‘è¡¨äºtylermcginnis.com</strong><a class="ae kb" href="https://tylermcginnis.com/react-higher-order-components/" rel="noopener ugc nofollow" target="_blank"><strong class="je hv"/></a><strong class="je hv">ï¼Œæ˜¯ä»–ä»¬</strong> <a class="ae kb" href="https://tylermcginnis.com/courses/react-fundamentals/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">ååº”åŸºç¡€</strong> </a> <strong class="je hv">è¯¾ç¨‹çš„ä¸€éƒ¨åˆ†ã€‚</strong></p><p id="a494" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><a class="ae kb" href="https://twitter.com/tylermcginnis" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv">æ³°å‹’</strong> </a></p></div></div>    
</body>
</html>