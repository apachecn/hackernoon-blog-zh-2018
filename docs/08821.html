<html>
<head>
<title>Deploy A Backend App As An Android Engineer — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">作为Android工程师部署后端应用程序—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deploy-a-backend-app-as-an-android-engineer-part-2-b572245a3f3e?source=collection_archive---------13-----------------------#2018-10-24">https://medium.com/hackernoon/deploy-a-backend-app-as-an-android-engineer-part-2-b572245a3f3e?source=collection_archive---------13-----------------------#2018-10-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="28fd" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">用Ktor快速迭代</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/0094ebe6b9980ed475d441bf0d3cbde5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0Ceselj2XK2isNnMJNpW2A.png"/></div></div><figcaption class="jv jw fg fe ff jx jy bd b be z ek">Original photo by <a class="ae jz" href="https://unsplash.com/photos/VBNb52J8Trk?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">SpaceX</a> on <a class="ae jz" href="https://unsplash.com/photos/VBNb52J8Trk" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9801" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">在第1部分中，我概述了如何通过部署<strong class="kc hv">来部署AppEngine应用。jar </strong>文件。从那时起，谷歌听取了需要建立服务器端解决方案的移动开发者的意见，并在谷歌云平台上推出了<a class="ae jz" href="https://cloud.google.com/kotlin/" rel="noopener ugc nofollow" target="_blank">kot Lin</a>。</p><div class="kx ky fm fo kz la"><a href="https://hackernoon.com/deploy-a-backend-app-as-an-android-engineer-49bd94b4c367" rel="noopener  ugc nofollow" target="_blank"><div class="lb ab ej"><div class="lc ab ld cl cj le"><h2 class="bd hv fv z el lf eo ep lg er et ht dt translated">作为Android工程师部署后端应用程序</h2><div class="lh l"><h3 class="bd b fv z el lf eo ep lg er et ek translated">用你已经拥有的技能</h3></div><div class="li l"><p class="bd b gc z el lf eo ep lg er et ek translated">hackernoon.com</p></div></div><div class="lj l"><div class="lk l ll lm ln lj lo jt la"/></div></div></a></div><p id="3a9d" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">其中一个突出的解决方案是Ktor，它允许在Kotlin中有一个独立的后端应用程序，可以像在客户端一样与其他库进行交互。Ktor最棒的一点是<a class="ae jz" href="https://stackoverflow.com/questions/52881622/guava-breaking-kotlin-jar-how-to-handle-versioning" rel="noopener ugc nofollow" target="_blank">模糊的库兼容性问题，比如这个</a>与Guava的兼容性问题，这仍然是一个谜，不太是个问题，因为代码的运行方式类似于它在IDE上的运行方式，因为你可以定义应用程序的main方法并让它运行。</p><p id="ec22" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">Google云平台文档还有改进的空间。我浏览了另外两个配置教程，<em class="kw"> Standard </em>和<em class="kw"> Flexible </em> AppEngine设置，以便认识到Ktor是我部署Kotlin应用程序在没有端点的情况下运行服务器任务所需要的。</p><p id="6e71" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">尽管使用Jar很慢，但我仍然在一些用例中使用Jar deploy。例如，用Firebase认证Jars中使用的服务帐户简单可靠，而用ktor认证就有我发现的这个问题。</p><p id="1e15" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">罐子被耍了</strong></p><ul class=""><li id="e538" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated">大约10到20分钟的部署时间。</li><li id="2d87" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">必须重建。jar来测试新代码或不同的环境类型。</li><li id="b382" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">库不兼容问题。</li></ul><h1 id="0fc5" class="md me hu bd mf mg mh mi mj mk ml mm mn ja mo jb mp jd mq je mr jg ms jh mt mu dt translated"><strong class="ak">教程:</strong> <a class="ae jz" href="https://cloud.google.com/community/tutorials/kotlin-ktor-app-engine-java8" rel="noopener ugc nofollow" target="_blank"> <strong class="ak">在Google App Engine上运行一个Kotlin Ktor app标准</strong> </a></h1><p id="ec93" class="pw-post-body-paragraph ka kb hu kc b kd mv iv kf kg mw iy ki kj mx kl km kn my kp kq kr mz kt ku kv hn dt translated">本教程快速、清晰、简洁。我强烈推荐！它忽略的一个方面是版本控制，这很重要，因为我喜欢在AppEngine上部署一个<em class="kw">试运行</em>和<em class="kw">生产</em>版本。</p><h2 id="5c10" class="na me hu bd mf nb nc nd mj ne nf ng mn kj nh ni mp kn nj nk mr kr nl nm mt nn dt translated">文件注释</h2><p id="93a0" class="pw-post-body-paragraph ka kb hu kc b kd mv iv kf kg mw iy ki kj mx kl km kn my kp kq kr mz kt ku kv hn dt translated"><em class="kw"> build.gradle </em></p><p id="c4ab" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/flexible/java/gradle-reference" rel="noopener ugc nofollow" target="_blank"> App Engine Gradle插件任务和属性</a></p><p id="8152" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">找到最新版本的Ktor来使用:<a class="ae jz" href="https://github.com/ktorio/ktor/releases" rel="noopener ugc nofollow" target="_blank">github.com/ktorio/ktor/releases</a>。</p><pre class="jk jl jm jn fq no np nq nr aw ns dt"><span id="71a5" class="na me hu np b fv nt nu l nv nw">buildscript {<strong class="np hv"><br/>    </strong>ext.ktor_version = '<em class="kw">1.0.0</em>'<strong class="np hv"><br/>    ...<br/></strong>}</span></pre><p id="ff1e" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">定义AppEngine版本:</p><pre class="jk jl jm jn fq no np nq nr aw ns dt"><span id="9d34" class="na me hu np b fv nt nu l nv nw">appengine {<br/>    deploy {<br/>        version = '1-2-0'<br/>    }<br/>}</span></pre><p id="6172" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw"> ClassWithMainMethod.kt </em></p><p id="5629" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">为了从IntelliJ等IDE中运行<strong class="kc hv"> main </strong>方法，您需要注释掉<strong class="kc hv"> Application.main </strong>方法，并在IntelliJ可以从<em class="kw">运行/调试配置中配置的对象中使用main方法。</em>为了运行AppEngine并进行部署，请使用<strong class="kc hv"> Application.main </strong>方法。</p><pre class="jk jl jm jn fq no np nq nr aw ns dt"><span id="83d2" class="na me hu np b fv nt nu l nv nw">import<strong class="np hv"> </strong>io.ktor.application.Application</span><span id="8119" class="na me hu np b fv nx nu l nv nw">fun Application.main() {<br/>    // App logic here.<br/>}</span></pre><p id="5dac" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">使用IntelliJ运行:</p><pre class="jk jl jm jn fq no np nq nr aw ns dt"><span id="031d" class="na me hu np b fv nt nu l nv nw">object<strong class="np hv"> </strong>Initialization {<br/>    @JvmStatic<br/>    fun<strong class="np hv"> </strong>main(args: Array&lt;String&gt;) {<br/>        // App logic here.<br/>    }<br/>}</span></pre><p id="45ae" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/standard/java/config/appref" rel="noopener ugc nofollow" target="_blank"><em class="kw">app engine-web . XML</em></a><em class="kw"/>示例用途:</p><ul class=""><li id="5b26" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/standard/java/migrating-to-java8" rel="noopener ugc nofollow" target="_blank">指定Java 8运行时</a></li><li id="70b4" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">缩放比例</li><li id="7053" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">使用include的资源文件</li><li id="2127" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">SSL已启用(HTTP与HTTPs)</li></ul><p id="a1b0" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/standard/java/config/webxml" rel="noopener ugc nofollow" target="_blank"> <em class="kw"> web.xml </em> </a>:下<em class="kw">src/main/WEB app/we b-INF/</em>示例使用:</p><ul class=""><li id="a549" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated">web.xml:定义URL路径和使用这些路径处理请求的servlets之间的映射</li></ul><h1 id="21fe" class="md me hu bd mf mg mh mi mj mk ml mm mn ja mo jb mp jd mq je mr jg ms jh mt mu dt translated"><a class="ae jz" href="https://cloud.google.com/sdk/docs/configurations" rel="noopener ugc nofollow" target="_blank">管理SDK配置</a></h1><p id="1a5a" class="pw-post-body-paragraph ka kb hu kc b kd mv iv kf kg mw iy ki kj mx kl km kn my kp kq kr mz kt ku kv hn dt translated">命令行可以快速帮助您创建AppEngine项目并在项目间导航，运行您的应用程序进行测试，并部署到服务器，而不是在IntelliJ中重复构建工件。</p><p id="9214" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated">请参见本<a class="ae jz" href="https://github.com/AdamSHurwitz/open-dev-guide/blob/master/gcp/gcp.md#terminal-commands" rel="noopener ugc nofollow" target="_blank">终端命令指南</a>来使用它。</p></div><div class="ab cl ny nz hc oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="hn ho hp hq hr"><p id="e13c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><em class="kw">我是亚当·赫维茨——点击拍手图标，看看我剩下的</em> <a class="ae jz" rel="noopener" href="/@AdamHurwitz"> <em class="kw">写作</em> </a> <em class="kw">如果你喜欢以上内容。感谢阅读！</em></p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff of"><img src="../Images/8d30ab065284bfc08db9285c7cfef221.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aqtxhMAJEHcL0PhVB1I8Fg.png"/></div></div></figure></div><div class="ab cl ny nz hc oa" role="separator"><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od oe"/><span class="ob bw bk oc od"/></div><div class="hn ho hp hq hr"><h1 id="8b0c" class="md me hu bd mf mg og mi mj mk oh mm mn ja oi jb mp jd oj je mr jg ok jh mt mu dt translated">资源</h1><p id="5d96" class="pw-post-body-paragraph ka kb hu kc b kd mv iv kf kg mw iy ki kj mx kl km kn my kp kq kr mz kt ku kv hn dt translated"><strong class="kc hv"> GCP </strong></p><ul class=""><li id="5d3c" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/sdk/docs/#install_the_latest_cloud_tools_version_cloudsdk_current_version" rel="noopener ugc nofollow" target="_blank">安装最新的云工具……</a></li><li id="8d6c" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/tools/intellij/docs/quickstart-IDEA" rel="noopener ugc nofollow" target="_blank">快速入门</a></li><li id="8309" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://console.cloud.google.com/cloud-resource-manager" rel="noopener ugc nofollow" target="_blank"> GCP控制台</a></li><li id="630a" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/pricing" rel="noopener ugc nofollow" target="_blank"> AppEngine定价</a></li></ul><p id="d12c" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv"> IntelliJ </strong></p><ul class=""><li id="bc11" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/standard/java/building-app/environment-setup#configuring_your_development_environment" rel="noopener ugc nofollow" target="_blank">配置您的开发环境</a></li><li id="47cd" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/standard/java/building-app/environment-setup#creating_a_new_app_engine_project" rel="noopener ugc nofollow" target="_blank">创建新的应用引擎项目</a></li><li id="8399" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/tools/intellij/docs/create-flexible#framework" rel="noopener ugc nofollow" target="_blank">添加(GCP)框架支持(到IntelliJ) </a></li><li id="6eee" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/tools/intellij/docs/create-flexible#creating_a_new_application" rel="noopener ugc nofollow" target="_blank">创建新的(IntelliJ)应用程序(用于GCP) </a></li><li id="80bb" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/tools/intellij/docs/create-flexible#checking_out_an_existing_project" rel="noopener ugc nofollow" target="_blank">签出现有的(IntelliJ)项目(与GCP一起使用)</a></li></ul><p id="c5bd" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">科特林</strong></p><ul class=""><li id="cce9" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/community/tutorials/kotlin-ktor-app-engine-java8" rel="noopener ugc nofollow" target="_blank"> <strong class="kc hv">在谷歌应用引擎上运行一个Kotlin Ktor应用标准</strong> </a></li><li id="6b3f" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/appengine/docs/flexible/java/gradle-reference" rel="noopener ugc nofollow" target="_blank">应用引擎梯度插件任务和属性</a></li><li id="6d7c" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="http://github.com/ktorio/ktor-samples" rel="noopener ugc nofollow" target="_blank">github.com/ktorio/ktor-samples</a></li><li id="8e5d" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://console.cloud.google.com/logs?_ga=2.214847829.-399896800.1533853483" rel="noopener ugc nofollow" target="_blank">测井控制台</a></li><li id="7401" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://ktor.io/" rel="noopener ugc nofollow" target="_blank"> ktor </a></li><li id="b72e" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/kotlin/" rel="noopener ugc nofollow" target="_blank">谷歌云平台上的科特林</a></li></ul><p id="b4ce" class="pw-post-body-paragraph ka kb hu kc b kd ke iv kf kg kh iy ki kj kk kl km kn ko kp kq kr ks kt ku kv hn dt translated"><strong class="kc hv">社区</strong></p><ul class=""><li id="cb13" class="lp lq hu kc b kd ke kg kh kj lr kn ls kr lt kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/support/docs/groups" rel="noopener ugc nofollow" target="_blank">讨论谷歌云平台</a></li><li id="a2b2" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://www.cloudconnectcommunity.com/ccc/" rel="noopener ugc nofollow" target="_blank">云连接社区</a></li><li id="2d9b" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://cloud.google.com/support/" rel="noopener ugc nofollow" target="_blank">谷歌云平台支持</a></li><li id="dba3" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://stackoverflow.com/questions/tagged/google-cloud-kotlin" rel="noopener ugc nofollow" target="_blank">stackoverflow.com/questions/tagged/google-cloud-kotlin</a></li><li id="b613" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://groups.google.com/forum/#!forum/cloud-kotlin" rel="noopener ugc nofollow" target="_blank">云科特林谷歌集团</a></li><li id="023c" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://github.com/GoogleCloudPlatform/kotlin-samples" rel="noopener ugc nofollow" target="_blank">github.com/GoogleCloudPlatform/kotlin-samples</a></li><li id="5125" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://github.com/googleapis" rel="noopener ugc nofollow" target="_blank">github.com/GoogleApis</a></li><li id="e818" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated"><a class="ae jz" href="https://github.com/googleapis/google-cloud-java" rel="noopener ugc nofollow" target="_blank">github.com/google-cloud-java</a></li><li id="6d06" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">【github.com/GoogleCloudPlatform T2】号</li><li id="9dd5" class="lp lq hu kc b kd ly kg lz kj ma kn mb kr mc kv lu lv lw lx dt translated">【github.com/app-gradle-plugin T4】</li></ul></div></div>    
</body>
</html>