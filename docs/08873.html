<html>
<head>
<title>cTesting a Facebook chatbot with Nightmare.js [pt. 1]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Nightmare.js测试脸书聊天机器人。1]</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/testing-a-facebook-chatbot-with-nightmare-js-pt-1-d2fc1501113e?source=collection_archive---------6-----------------------#2018-10-26">https://medium.com/hackernoon/testing-a-facebook-chatbot-with-nightmare-js-pt-1-d2fc1501113e?source=collection_archive---------6-----------------------#2018-10-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/1ddca5723396e0dbc673a60bfd6b9d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pSHz3NSk4ok6LJXkcUtRXg.png"/></div></div></figure><p id="c6a1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我们将看到如何用<a class="ae ka" href="https://github.com/segmentio/nightmare" rel="noopener ugc nofollow" target="_blank">nightman . js</a>创建一个端到端的测试来测试一个<a class="ae ka" href="https://hackernoon.com/tagged/facebook" rel="noopener ugc nofollow" target="_blank">脸书</a>T4】聊天机器人。</p><p id="cb45" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">假设你已经有一个脸书聊天机器人在运行，因为我们不会在这里看到如何建立一个。</p><p id="1687" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本文的第一部分<strong class="je hv">中，</strong>我们将着重于在脸书上创建一个<em class="kb">测试用户</em>和一个<em class="kb">测试页面</em>。这个<em class="kb">测试用户</em>将有能力登录到脸书，并与我们的机器人聊天。为此，我们将使用一个<em class="kb">测试页面</em>，以便我们的聊天机器人可以通过它发送和接收消息。</p><p id="b8cd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">可选地，在本教程的最后，我们将看到如何配置Azure Bot服务来连接Bot和<em class="kb">测试页面</em>。</p><p id="01ff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">等我写完<strong class="je hv">第二部</strong>，我会把链接<a class="ae ka" href="#" rel="noopener ugc nofollow">贴在这里</a>。这将是最后一部分，我们将在Nightmare.js上编写一个简单的问题&amp;答案api来测试聊天机器人。</p><h2 id="0ac3" class="kc kd hu bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">索引:</h2><ol class=""><li id="136c" class="kx ky hu je b jf kz jj la jn lb jr lc jv ld jz le lf lg lh dt translated">创建测试用户</li><li id="3f26" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz le lf lg lh dt translated">创建测试页面</li><li id="cdd9" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz le lf lg lh dt translated">将测试页面与BOT应用程序链接起来</li><li id="ebe1" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz le lf lg lh dt translated">(可选)将BOT与Azure上的测试页面连接起来</li></ol><p id="68bd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们开始吧…</p><h1 id="419a" class="ln kd hu bd ke lo lp lq ki lr ls lt km lu lv lw kp lx ly lz ks ma mb mc kv md dt translated">创建测试用户</h1><p id="aa4f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">根据脸书，测试用户被描述为:</p><blockquote class="mh mi mj"><p id="6139" class="jc jd kb je b jf jg jh ji jj jk jl jm mk jo jp jq ml js jt ju mm jw jx jy jz hn dt translated">测试用户是可以用来测试你的应用的特殊用户。他们对真实用户账户是隐藏的<a class="ae ka" href="https://developers.facebook.com/docs/apps/test-users#rules" rel="noopener ugc nofollow" target="_blank">，你用测试用户生成的任何数据将只对该应用上的其他测试用户可见，或者对该应用上具有管理员、开发者或测试者角色的真实用户可见。测试用户也免受我们的垃圾邮件和虚假账户检测系统的影响，因此当您使用他们测试您的应用程序时，他们不会被禁用。</a></p></blockquote><p id="317b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="kb">要了解更多关于测试用户的信息，您可以访问</em> <a class="ae ka" href="https://developers.facebook.com/docs/apps/test-users" rel="noopener ugc nofollow" target="_blank"> <em class="kb">这个链接。</em>T29】</a></p><p id="4b93" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">由于我们正在尝试测试我们的机器人，很可能我们必须设置一个脸书应用程序，以便机器人可以与Messenger交换消息。</p><p id="17fb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们可以在脸书应用页面上创建测试用户，该页面可以在<a class="ae ka" href="https://developers.facebook.com/apps/" rel="noopener ugc nofollow" target="_blank">应用仪表板</a>上访问。</p><p id="501d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在App页面，点击<em class="kb">功能</em>打开子菜单，然后点击<em class="kb">测试用户</em>。这将打开允许我们创建测试用户的页面，如图<strong class="je hv">图1 </strong>所示。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/66021c5a2a49d126a46d6b34c69f1a8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kOOmJyoZFVmNpDdsA02maA.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 1 —Test Users page</figcaption></figure><p id="176a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击添加打开一个模态，如图<strong class="je hv">图2 </strong>所示。然后，为“授权测试用户使用此应用程序”选择“是”。</p><p id="8dc4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有必要给测试用户正确的权限来创建和发送消息到我们将要创建的测试页面。登录权限有:<em class="kb"> manage_pages </em>、<em class="kb"> pages_show_list </em>和<em class="kb"> pages_messaging </em>。</p><p id="5511" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们可以保留其他选项的默认值。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="fe ff mw"><img src="../Images/237de3ff825a91b31974a020e68ef890.png" data-original-src="https://miro.medium.com/v2/resize:fit:822/format:webp/1*suR-Yfot0JfMKJBWB-GvBw.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 2 — Creating the Test User</figcaption></figure><p id="d7eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来我们需要设置一个密码。否则，我们无法使用测试用户登录脸书(或Messenger)。在获取令牌之前设置密码非常重要，因为每次密码更改时，我们都需要生成一个新的令牌。</p><p id="5eb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">点击<em class="kb">编辑</em>打开一个小菜单，然后点击“更改该测试用户的名称或密码”，如图<strong class="je hv">图3 </strong>所示。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mx"><img src="../Images/d0dc04cab11a894e7bfa95fd4c5f95ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5aK22IPbu0CPm4iSzybnVQ.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 3 — Setting the test user password</figcaption></figure><p id="16bb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">更改用户密码后，再次点击<em class="kb">编辑</em>。这一次，点击“为这个测试用户获取一个访问令牌”，如图<strong class="je hv">图4 </strong>所示。不要忘记保存生成的令牌以备后用。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff my"><img src="../Images/e35a3b6fcb2eb78571c32380a55a36d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wzh0XFEH-pIK1AMdkATjzw.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 4— Getting an access token for the test user</figcaption></figure><p id="379b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">既然测试用户已经设置好了。我们现在可以用他的电子邮件和密码登录Facebook Messenger。试试吧，因为这就是我们如何登录<strong class="je hv">nightman . js</strong>应用程序的。</p><p id="5e7d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请注意，该用户还不能发送消息。我们也不能和他一起给机器人发信息。这就是我们将在下一步创建测试页面的原因。</p><p id="620c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">BOT也需要配置为从测试页面发送和接收消息。最后，我们将有两个(或者更多)页面与我们的BOT应用程序相连接。</p><h1 id="014a" class="ln kd hu bd ke lo lp lq ki lr ls lt km lu lv lw kp lx ly lz ks ma mb mc kv md dt translated"><strong class="ak">创建一个测试页面</strong></h1><p id="d065" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">测试页面允许我们在不使用产品页面的情况下测试机器人的应用程序。创建一个测试页面非常简单，我们只需要使用<a class="ae ka" href="https://developers.facebook.com/tools/explorer" rel="noopener ugc nofollow" target="_blank">脸书图形API </a>发送一个POST请求。</p><pre class="mo mp mq mr fq mz na nb nc aw nd dt"><span id="c130" class="kc kd hu na b fv ne nf l ng nh">POST /v3.1/:testUserId/accounts</span></pre><p id="5a35" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">应用</strong>:选择你的BOT应用名称</p><p id="98eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">访问令牌</strong>:粘贴上一步得到的测试用户访问令牌。</p><p id="4997" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">查询参数</strong>(必填):</p><ul class=""><li id="c6c0" class="kx ky hu je b jf jg jj jk jn ni jr nj jv nk jz nl lf lg lh dt translated">名称:页面名称。</li><li id="7fac" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">category_enum:页面类别。</li><li id="2b04" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">关于:这一页是关于。</li><li id="e245" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">图片:页面的一些有效图片。</li><li id="1c9e" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">封面照片:一些有效的封面照片</li></ul><p id="d6db" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在<em class="kb">链接</em>部分查看关于这个API的更多信息。现在，我们将使用以下查询参数来创建测试页面。</p><ul class=""><li id="436c" class="kx ky hu je b jf jg jj jk jn ni jr nj jv nk jz nl lf lg lh dt translated">名字:杰克逊·阿尔比耶克德·里斯库个人博客</li><li id="8ba0" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">类别枚举:个人博客</li><li id="af7d" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">关于:Jackson Albiejejcdjhd Liescu测试页</li><li id="7a2e" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">图片:<a class="ae ka" href="https://avatars1.githubusercontent.com/u/149531?v=3&amp;s=460" rel="noopener ugc nofollow" target="_blank">https://avatars1.githubusercontent.com/u/149531?v=3&amp;s = 460</a></li><li id="4324" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">cover _ photo:{ " URL ":" https://orig 00 . deviantart . net/7db 9/f/2016/303/7/5/nature _ beautiful _ wheat _ field _ _ _ Facebook _ cover _ by _ tweaker tea-dams gob . jpg " }</li></ul><pre class="mo mp mq mr fq mz na nb nc aw nd dt"><span id="4e83" class="kc kd hu na b fv ne nf l ng nh">POST /v3.1/100470524281527/accounts?name=Jackson Albiejejcdjhd Liescu Personal Blog&amp;category_enum=PERSONAL_BLOG&amp;about=Jackson Albiejejcdjhd Liescu test page&amp;picture=<a class="ae ka" href="https://avatars1.githubusercontent.com/u/149531?v=3&amp;s=460&amp;cover_photo={" rel="noopener ugc nofollow" target="_blank">https://avatars1.githubusercontent.com/u/149531?v=3&amp;s=460&amp;cover_photo={</a>"url":"<a class="ae ka" href="https://orig00.deviantart.net/7db9/f/2016/303/7/5/nature_beautiful_wheat_field___facebook_cover_by_tweakertea-damsgob.jpg" rel="noopener ugc nofollow" target="_blank">https://orig00.deviantart.net/7db9/f/2016/303/7/5/nature_beautiful_wheat_field___facebook_cover_by_tweakertea-damsgob.jpg</a>"}</span></pre><p id="7330" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">图5 </strong>显示了我们向脸书图形API发送POST请求后的结果。如果成功，将返回测试页面ID。留着以后用。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nm"><img src="../Images/3898ef43bdedac161a787a4b3b0afb15.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xr-TtMn2rG3gc6PO3qkLHw.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 5 — Creating a Test Page</figcaption></figure><h1 id="6209" class="ln kd hu bd ke lo lp lq ki lr ls lt km lu lv lw kp lx ly lz ks ma mb mc kv md dt translated">将测试页面与BOT应用程序链接起来</h1><p id="4545" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">为了让聊天机器人通过测试页面接收和发送消息，我们需要获取页面的访问令牌。但是，默认情况下注册到页面的访问令牌是短期访问令牌，这意味着它会在很短的时间内过期。</p><p id="8dfe" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们接下来要做的是将这个访问令牌“转换”成一个长期访问令牌，其生存期为60天。我们总是可以使用默认(短期)访问期限来刷新我们的长期访问令牌。</p><h2 id="a47a" class="kc kd hu bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">检索测试页面的<em class="nn">短期</em>页面访问令牌</h2><pre class="mo mp mq mr fq mz na nb nc aw nd dt"><span id="de57" class="kc kd hu na b fv ne nf l ng nh">GET /v3.1/me/accounts</span></pre><p id="6ccb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">应用</strong>:选择你的BOT应用名称</p><p id="df7f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">访问令牌</strong>:测试用户访问令牌</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff no"><img src="../Images/f9589f6ecefcc2ac3ea014e13f23c884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fw6_SnJdN9_YNZTdKSF1Eg.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 6</figcaption></figure><p id="902b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要订阅该页面，我们只需发送另一个POST请求。但是首先，用测试页面访问令牌更改访问令牌。这将在当前选定的应用程序上订阅应用程序。如果正确定义了所有权限，我们应该会收到一条<em class="kb">成功</em>消息。</p><pre class="mo mp mq mr fq mz na nb nc aw nd dt"><span id="5ce0" class="kc kd hu na b fv ne nf l ng nh">POST /me/subscribed_apps</span></pre><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff np"><img src="../Images/48c79dd69751f342c28fce506d435b10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DKzieaHq3hnvsGhAZ6cqvA.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 7</figcaption></figure><h2 id="fc2c" class="kc kd hu bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">为测试页面获取一个长期页面访问令牌</h2><p id="a1dd" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">我们可以通过另一个API调用来检索我们的长期访问令牌。然而，这次我们将使用<em class="kb"> CURL </em>命令，因为这个API不能在Graph API Explorer上访问。</p><p id="60d8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你没有CURL，你可以选择任何你想要的可以发送POST请求的应用程序。</p><p id="1b1f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下<strong class="je hv"> curl </strong>命令查询参数:</p><ul class=""><li id="1cdc" class="kx ky hu je b jf jg jj jk jn ni jr nj jv nk jz nl lf lg lh dt translated">客户端标识:脸书应用标识</li><li id="6e91" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">客户端秘密:脸书应用程序秘密</li><li id="b6e0" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">fb交换令牌:页面令牌</li></ul><pre class="mo mp mq mr fq mz na nb nc aw nd dt"><span id="de6e" class="kc kd hu na b fv ne nf l ng nh">curl -X GET "https://graph.facebook.com/oauth/access_token?grant_type=fb_exchange_token&amp;client_id=&amp;client_secret=&amp;fb_exchange_token="</span><span id="9e34" class="kc kd hu na b fv nq nf l ng nh">----------------------------------------</span><span id="1a26" class="kc kd hu na b fv nq nf l ng nh">Response:<br/>{<br/>  "access_token": "EAAcJ5P3IBycBAEencptoDloIKrAfDP0WZCTl3zMKCSCUiZBD14hja7DhGczPWdDDXVYKesZABugggCrg0AkUYHiySb1dm3VzHRuwURxHIHM1373KFFiPPW7U6Xse3tAGOYYAecaaHjiKl0XmR5NxfE3v40vrZCKFtby253wvcotO8QueTLuEZBVVl38ZD",<br/>  "token_type": "bearer",<br/>  "expires_in": 5184000<br/>}</span></pre><p id="3986" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，如果我们尝试登录Facebook Messenger，我们可以看到可以向我们刚刚创建的测试页面发送消息。</p><p id="95e5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为此，只需在搜索栏上搜索测试页面名称，该页面就会出现在结果中。<strong class="je hv">图8 </strong>显示了本教程的最终结果。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nr"><img src="../Images/97bebaf17dd28806652812901d7ad4fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wWBnZesRDQx0O6-nDcDIhQ.png"/></div></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 8 — Chatting with the Test Page</figcaption></figure><h1 id="cb03" class="ln kd hu bd ke lo lp lq ki lr ls lt km lu lv lw kp lx ly lz ks ma mb mc kv md dt translated">(可选)将BOT与Azure上的测试页面连接起来</h1><p id="f785" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn me jp jq jr mf jt ju jv mg jx jy jz hn dt translated">这一步假设您正在使用Azure Bot服务创建聊天机器人。</p><p id="08ff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<em class="kb"> Bot频道注册</em>资源，点击<em class="kb">频道</em>&gt;<em class="kb">Facebook Messenger</em>。在这个页面上，您可以将您的BOT应用程序链接到Facebook Messenger。</p><p id="b1ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要将BOT与测试页面连接，请单击“+ Add a new page”并插入测试页面ID和测试页面长期访问令牌。现在你应该有两个链接到你的机器人的页面:原始页面和测试页面。</p><p id="d4b4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">聊天机器人现在应该链接到您的测试页面了。要检查这一点，请使用测试用户凭据登录Messenger，并尝试向测试页面发送消息。如果一切正常，机器人会发回一个答案。图9 给出了一个例子。</p><figure class="mo mp mq mr fq iv fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/a0057f97ce89b1288d0a39469e00ccdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/format:webp/1*4jHYaFQ_z5UTYxQA8-UKCA.png"/></div><figcaption class="ms mt fg fe ff mu mv bd b be z ek">Figure 9 — BOT chatting with the Test Page</figcaption></figure><p id="785c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们已经成功地创建了一个测试用户和一个测试页面。现在我们已经掌握了为聊天机器人创建端到端测试所需的一切:测试用户的电子邮件和密码，以及一个机器人可以与用户聊天的测试页面。</p><p id="9b74" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程的第二部分，我们将看到如何使用我们在这里所做的来测试我们的聊天机器人集成。</p><p id="5c62" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">回头见！</p></div><div class="ab cl nt nu hc nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="hn ho hp hq hr"><h2 id="06ff" class="kc kd hu bd ke kf kg kh ki kj kk kl km jn kn ko kp jr kq kr ks jv kt ku kv kw dt translated">链接:</h2><ul class=""><li id="97f0" class="kx ky hu je b jf kz jj la jn lb jr lc jv ld jz nl lf lg lh dt translated">https://developers.facebook.com/docs/apps/test-users<a class="ae ka" href="https://developers.facebook.com/docs/apps/test-users" rel="noopener ugc nofollow" target="_blank"/></li><li id="cffc" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated">【https://developers.facebook.com/docs/apps/test-pages T4】</li><li id="e351" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated"><a class="ae ka" href="https://developers.facebook.com/docs/graph-api/reference/page-category/" rel="noopener ugc nofollow" target="_blank">https://developers . Facebook . com/docs/graph-API/reference/page-category/</a></li><li id="a3ec" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated"><a class="ae ka" href="https://developers.facebook.com/tools/explorer" rel="noopener ugc nofollow" target="_blank">https://developers.facebook.com/tools/explorer</a></li><li id="0bf3" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated"><a class="ae ka" href="https://www.messenger.com" rel="noopener ugc nofollow" target="_blank">https://www.messenger.com</a></li><li id="23b1" class="kx ky hu je b jf li jj lj jn lk jr ll jv lm jz nl lf lg lh dt translated"><a class="ae ka" href="https://azure.microsoft.com/pt-br/services/bot-service/" rel="noopener ugc nofollow" target="_blank">https://azure.microsoft.com/pt-br/services/bot-service/</a></li></ul><figure class="mo mp mq mr fq iv"><div class="bz el l di"><div class="oa ob l"/></div></figure></div></div>    
</body>
</html>