<html>
<head>
<title>The Madness that is Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">编程的疯狂</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-madness-that-is-programming-cba8794f0995?source=collection_archive---------8-----------------------#2018-10-26">https://medium.com/hackernoon/the-madness-that-is-programming-cba8794f0995?source=collection_archive---------8-----------------------#2018-10-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/daf97407f56f9ee15a902d2b36308f14.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/format:webp/1*J9deIml784szaNCbR2sKZQ.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Hereee’s a problem!</figcaption></figure><p id="8990" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">每个人都喜欢大骂典型工作日的无休止的苦差事。会议，同事打扰，设备不足，Reddit..感觉时间都花在了其他事情上，除了手头的任务。</p><p id="e566" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是让我们暂时把这些放在一边。你在你的区域。视线中没有分心或干扰。Reddit也不行。我们花大量的时间不是写代码，而是在浏览器上寻找答案。你不想问的问题的答案。最愚蠢的事情可能需要几天才能解决，让你发疯，让你思考你的职业选择。但是我们在找什么呢？为什么任何时候都有50个标签打开，其中一半是堆栈溢出？</p><p id="4409" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我最近从头到尾写了一个<a class="ae ka" href="https://github.com/ration/betman" rel="noopener ugc nofollow" target="_blank"> app </a>想回答这个问题。该项目是一个开发者的梦想，因为它完全是绿地，只有一个人(我)负责，我有一个非常具体的功能列表要做，它们不太可能改变或增加。我做了完整的堆栈(Kotlin、Spring、Bootstrap、Angular)——从项目创建到在Docker容器中部署到云中的一切。这花了大约两个月的日历时间，在我的新生儿允许的情况下，大多是一两个小时。</p><p id="2a12" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">栈是典型的，因为它包含了一些我非常熟悉的东西(Spring)，一些知识有限的东西(Kotlin，Angular，Bootstrap)到全新的领域，比如Google Cloud和Spring Webflux。它也有一些我纯粹出于学术兴趣添加的元素(JWT令牌，暴露)。</p><p id="e983" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">那么时间去哪里做这样的东西呢？基本上所有的编程任务都是从分而治之开始的——你设计整体架构，然后将问题分成更易管理的部分，并开始一个接一个地解决它们。数据库。UI视图。REST请求处理。认证。CSS。开着开着。对于任何有经验的程序员来说，这种类型的划分就像是第二天性，当你遇到这种情况时，你会觉得生活是值得的。然后是惊喜。“我的应急威士忌在哪里”——那些让你拔光头发的东西(我是秃头)。</p><p id="eb0f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">不应该是问题的事情需要两天才能解决，这种问题让你抓狂。例子不管用。构建突然失败。配置选项似乎不起作用。对您的依赖关系发布的补丁打破了一切。奇怪的错误代码。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff kb"><img src="../Images/744524c41e3918db2db321dbecfe7ce9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*hogqNRxhGyeuTWOA1VdBKA.png"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek"><a class="ae ka" href="https://xkcd.com/1024/" rel="noopener ugc nofollow" target="_blank">xkcd 1024</a></figcaption></figure><p id="0b5e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">出于兴趣，我写下了路上遇到的最令人惊讶的问题，这些问题花了两个多小时才解决，让我更加接近疯狂的边缘。其中许多可能是他们自己的帖子，并为下一个傻瓜留一些头发，但我将简要介绍其中一些和决议。</p></div><div class="ab cl kg kh hc ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hn ho hp hq hr"><h2 id="b916" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">JWT与Spring Boot的代币没有用</h2><p id="3c1b" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">有<a class="ae ka" href="https://auth0.com/blog/implementing-jwt-authentication-on-spring-boot/" rel="noopener ugc nofollow" target="_blank">指令</a>存在，但是会话数据没有保存在Spring中。根据Spring，不管我如何认证自己，我总是匿名用户。我对Spring请求处理的内部进行了最长时间的调试，但毫无结果，直到我弄明白为止。事实证明，使用@Autowire将Spring <a class="ae ka" href="https://docs.spring.io/spring-security/site/docs/4.2.4.RELEASE/apidocs/org/springframework/security/core/context/SecurityContext.html" rel="noopener ugc nofollow" target="_blank"> SecurityContext </a>传递给类并不是一个好主意。每次使用<em class="ln">security context holder</em><strong class="je hv">。</strong></p><p id="1e7b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训</strong>:如果你在使用库的时候遇到了麻烦，并且足够幸运地拥有所有的代码，那么看看这些代码。盯着它调试足够长的时间，你可能会发现它。</p><p id="9f56" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也许我应该试试汽车修理工的工作？</p><h2 id="955d" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">如何从公开的事务中返回数据？</h2><p id="4c8d" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">(<a class="ae ka" href="https://github.com/JetBrains/Exposed" rel="noopener ugc nofollow" target="_blank"> Exposed </a>是Kotlin的ORM)。在该框架中，您将数据库操作封装到如下事务中:</p><pre class="kc kd ke kf fq lo lp lq lr aw ls dt"><span id="2be7" class="kn ko hu lp b fv lt lu l lv lw">transaction {<br/> val dao = UserDao.find{ name eq someName }<br/> dao.password = newPass<br/> return toPojo(dao) // <strong class="lp hv">Error<br/>}</strong></span></pre><p id="0742" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我想从那个事务中返回一些东西(带有更新数据的POJO)，但是不允许使用return关键字。我甚至不知道该用什么谷歌来解决这个问题。</p><p id="6bc1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训</strong> : Kotlin高阶函数返回最后一条语句，而那个事务只是一个带有lambda参数的方法。所以最后一个例子是:</p><pre class="kc kd ke kf fq lo lp lq lr aw ls dt"><span id="cebf" class="kn ko hu lp b fv lt lu l lv lw">transaction {<br/> val dao = UserDao.find{ name eq someName }<br/> dao.password = newPass<br/> toPojo(dao)<strong class="lp hv"><br/>}</strong></span></pre><p id="0144" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">出于某种无法解释的原因，我的大脑就是无法与科特林T14兰姆达斯T15联系起来，我以为这是某种别的魔法。我真正需要做的是查看如何定义<em class="ln">事务</em>功能，并正确地将其内部化。</p><blockquote class="lx ly lz"><p id="baa1" class="jc jd ln je b jf jg jh ji jj jk jl jm ma jo jp jq mb js jt ju mc jw jx jy jz hn dt translated">没有魔法这种东西，只有你不懂的东西。如果魔法失效了，你就停下来，在使用它之前想清楚。疯狂地搜索你不理解的问题的解决方案不会让你有任何进展。</p></blockquote><p id="a504" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也许有机会在酝酿？</p><h2 id="be38" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">弹簧布线中的角度布线误差</h2><p id="2a61" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">在Spring中，您使用<em class="ln">WebSecurityConfigurerAdapter</em>类来声明如何解析每个URI的安全规则，这可以绕过会话认证等。但是如果我使用角度路由，即不同的控制器具有不同的URIs。斯普林生气了，吐出了错误。</p><p id="3e8e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">吸取的教训:事实证明你需要这样的东西:</p><figure class="kc kd ke kf fq iv"><div class="bz el l di"><div class="md me l"/></div></figure><p id="ce0f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这确保所有请求(不匹配其他Spring路由规则)被转发到<em class="ln">index.html</em>，并从那里转发到正确的角度控制器。谷歌会给你各种过时的不再工作的版本。</p><p id="cfc9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">或许是水管工？</p><h2 id="1fc3" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">Spring JUnit测试困境</h2><p id="7ce5" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我同时遇到了两个问题，Spring上下文加载没有按照我想要的方式运行，自动布线字段也不稳定。例如，上下文没有加载用YML编写的配置文件，尤其是在集成测试中。字段注入在测试环境中不太适用。</p><p id="1197" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训:</strong>结果<a class="ae ka" href="https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/test/context/TestPropertySource.html" rel="noopener ugc nofollow" target="_blank">你不能在测试属性</a>中使用YML(查看支持的格式)。另外<a class="ae ka" href="https://www.vojtechruzicka.com/field-dependency-injection-considered-harmful/" rel="noopener ugc nofollow" target="_blank">如果可以避免的话不要注入磁场</a>。更好的是，如果可以的话，在测试中完全避免Spring。</p><p id="db1d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">垃圾人？</p><h2 id="ae52" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">通过配置属性进行配置</h2><p id="7a19" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">与前一个部分相关的是，<a class="ae ka" href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html" rel="noopener ugc nofollow" target="_blank">配置属性</a>，虽然很酷，但是工作起来却非常痛苦。神奇的因素又一次有点太高了——定义的配置POJO经常只说null，我不知道该怎么办。他们不在单元测试中工作也没有帮助。</p><p id="1f21" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">吸取的教训:有时你只能做无休止的修补。</p><p id="6787" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">蒸馏怎么样？</p><h2 id="6c67" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">公开的多表查询</h2><p id="940c" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">再次暴露了困境。我不知道如何编写涉及多个表的查询。最后我问了<a class="ae ka" href="https://stackoverflow.com/questions/50143775/how-do-i-search-from-multiple-tables-with-dao" rel="noopener ugc nofollow" target="_blank">栈溢出</a>得到了答案。</p><p id="32c7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训:</strong>生成SQL查询DAO框架魔术在设计上是失败的。在我开始之前我就有这种感觉，现在我又来了。也许这次他们会成功，我对自己说。没有。您头脑中有一个干净快速的SQL查询，但是您花了几个小时无休止地修改DAO层，希望它能正确地生成查询，并且不会慢得吓人。安卓<a class="ae ka" href="https://developer.android.com/topic/libraries/architecture/room" rel="noopener ugc nofollow" target="_blank">房间</a>之类的东西简直就是高人一等。</p><p id="3340" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">或许是酿酒？</p><h2 id="d1cf" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">因果报应拒绝和幻像一起工作</h2><p id="5145" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">如果我运行PhantomJS浏览器引擎，单元测试会失败。我会得到类似<code class="eh mf mg mh lp b"><a class="ae ka" href="https://github.com/karma-runner/karma/issues/2852" rel="noopener ugc nofollow" target="_blank">[object ErrorEvent]</a></code>的东西，测试会随机失败。</p><p id="af5b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验:</strong>JavaScript生态系统一团糟。但是我已经知道了。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/f2800757d3927c4354b26f55a00b6777.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*ZpPMgFYumXc64K1zcWPB7Q.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">I wonder if you can even throw a newer flat screen through a window or will just bounce</figcaption></figure><p id="2dec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有组织犯罪呢？</p><h2 id="3494" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">霍克的安全漏洞</h2><p id="064a" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我不知道Hoek是什么，但是Github抱怨说它有一个漏洞，所以我花了很多时间来解决这个问题。这个问题已经解决了，但我不认为它已经解决了。</p><p id="e961" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训:</strong> JavaScript一团糟。您的依赖关系中的安全问题也总是您的问题。</p><p id="c4f1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">住在桥下靠社保过活？</p><h2 id="96bf" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">角度5-&gt;6</h2><p id="9c9e" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">在我的开发过程中，Angular 6发布了。在我无限的智慧中，我认为升级应该是轻而易举的，我只有几百行代码，对吗？我也认为我会咬紧牙关，不使用兼容层，因为代码基数很小。我运行了自动升级程序，然后…出了点问题。这里有一个列表:</p><ul class=""><li id="1177" class="mj mk hu je b jf jg jj jk jn ml jr mm jv mn jz mo mp mq mr dt translated">我大量使用Observable.of和Rx流操作符，两者都没有正确升级。尤其是<a class="ae ka" href="https://github.com/ReactiveX/rxjs/blob/6.2.0/MIGRATION.md#pipe-syntax" rel="noopener ugc nofollow" target="_blank">流管()变</a>很痛苦。</li><li id="69ad" class="mj mk hu je b jf ms jj mt jn mu jr mv jv mw jz mo mp mq mr dt translated">进口货被胡乱摆弄了一番。我觉得他们只是在耍我们。他们知道这打破了一切，对不对？</li><li id="044b" class="mj mk hu je b jf ms jj mt jn mu jr mv jv mw jz mo mp mq mr dt translated">WebStorm失去了运行测试的能力</li></ul><p id="610c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训</strong> : <strong class="je hv">使用任何最新最棒的东西时都要格外小心。如果我只是等待事情解决，也许所有这些都可以避免。</strong></p><p id="ca3c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">种田？</p><h2 id="725c" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">TypeScript编译错误</h2><p id="8a80" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">突然，有棱有角的一切都崩溃了。我有:</p><pre class="kc kd ke kf fq lo lp lq lr aw ls dt"><span id="c249" class="kn ko hu lp b fv lt lu l lv lw">ERROR in src/app/auth.interceptor.ts(6,2): error TS2345: Argument of type 'typeof AuthInterceptor' is not assignable to parameter of type '({ providedIn: Type&lt;any&gt; | "root"; } &amp; ValueSansProvider)</span><span id="0074" class="kn ko hu lp b fv mx lu l lv lw">| ({ providedIn: Type&lt;any&gt; | "root"; } ...'.</span><span id="1624" class="kn ko hu lp b fv mx lu l lv lw">Type 'typeof AuthInterceptor' is not assignable to type '{ providedIn: Type&lt;any&gt; | "root"; } &amp; ClassSansProvider'.</span><span id="6d60" class="kn ko hu lp b fv mx lu l lv lw">Type 'typeof AuthInterceptor' is not assignable to type '{ providedIn: Type&lt;any&gt; | "root"; }'.</span><span id="c5d3" class="kn ko hu lp b fv mx lu l lv lw">Property 'providedIn' is missing in type 'typeof AuthInterceptor'.</span></pre><p id="9c1b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">谷歌没有提供任何帮助。是的，错误在<em class="ln"> auth.interceptor.ts </em>的第6行，但是我没有看到。我重写了这个类，并通过比较结果来找出错误。我遗漏了@ Injectable注释中的括号。</p><p id="4c66" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">吸取的教训:</strong>休息一会儿我马上就看出了错误。检查你的基本面当“你好世界！”水平的东西不管用。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff my"><img src="../Images/c960981aaa6fede80c90a0b9a43725f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:854/1*zTn2rD_cH0klscVI3XonkA.gif"/></div></figure><p id="27ea" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">或许是流浪汉？</p><h2 id="db7c" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">Kotlin中的Json列表类型</h2><p id="ed5d" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我在将JSON列表映射到Kotlin Pojos时遇到了麻烦。基本上<a class="ae ka" href="https://stackoverflow.com/questions/39679180/kotlin-call-java-method-with-classt-argument" rel="noopener ugc nofollow" target="_blank">这个问题</a>。虽然我确实弄明白了，但它看起来如此丑陋和古怪，我选择了B计划，只是改变了JSON。</p><p id="8bf3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训:</strong>变通办法永远是一种选择。</p><p id="c618" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">公园管理员？</p><h2 id="c3c2" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">Gradle 4的Spring集成测试</h2><p id="b549" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我没有运气做春季集成测试，我得到的是:</p><pre class="kc kd ke kf fq lo lp lq lr aw ls dt"><span id="6724" class="kn ko hu lp b fv lt lu l lv lw">java.lang.NoClassDefFoundError: org/hamcrest/SelfDescribing</span></pre><p id="cfdb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我到处看，所有的东西都静止不动，毫无用处。</p><p id="c439" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验:</strong>您可以随时打开更多搜索标签。没完没了的谷歌搜索让我找到了正确的魔法:</p><pre class="kc kd ke kf fq lo lp lq lr aw ls dt"><span id="cd0b" class="kn ko hu lp b fv lt lu l lv lw">configurations {<br/>   integrationTestImplementation.extendsFrom testImplementation <br/>   integrationTestRuntimeOnly.extendsFrom testRuntimeOnly<br/>}</span></pre><p id="4aff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这仍然是魔法。我甚至不知道读什么来解除它。</p><p id="b762" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">职业高尔夫球手？这在37岁时仍然是一个选择，对吗？</p><h2 id="1b55" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">我的Rest控制器返回HTML</h2><p id="2801" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我的一个rest端点顽固地返回HTML而不是JSON。我费力的翻了一遍注释，也看不懂是怎么回事。我添加了各种接受和返回类型的注释，但都不起作用。</p><p id="a2f6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我没有注意到这个类是用@Controller注释的，而不是正确的@RestController。叹气。</p><p id="5a4a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">吸取的教训:</strong>又有了基本面。</p><p id="d42f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">建筑？我听说它们很受欢迎。</p><h2 id="aff5" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">如果用户没有访问权限，如何返回403</h2><p id="f35a" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">Spring有一个名为<a class="ae ka" href="https://docs.spring.io/spring-security/site/docs/4.2.6.RELEASE/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html" rel="noopener ugc nofollow" target="_blank"><em class="ln">UserDetailsService</em></a>的接口，可以用来定义如何从数据库加载用户。但我不知道如何区分认证和授权，即用户是已知的，但不允许在该页面中。我一无所获。我在前端破解了一个解决方案。</p><p id="bf5c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">经验教训:</strong>失败永远是一个选项。</p><p id="69ef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">保姆？哦，等等，我已经做了。</p><h2 id="ca71" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">电脑崩溃</h2><p id="5eb3" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我的旧Surface Pro 3在压力下开始变形，所以我买了一台新电脑。我的单元测试执行时间从15秒变成了2秒。不再有完全的IntelliJ冻结。我可以在Docker容器中同时运行WebStorm、IDEA和应用程序，并且仍然有多余的内存。</p><p id="c576" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">吸取的教训:假设你有钱，用钱解决问题永远是个好主意。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff mz"><img src="../Images/d6a6465952547eba150582311330e03d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*iO-HDjLbtdAP4tH7KMPiVQ.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">Urge to kill fading..</figcaption></figure><h2 id="52d3" class="kn ko hu bd kp kq kr ks kt ku kv kw kx jn ky kz la jr lb lc ld jv le lf lg lh dt translated">角度路线参数</h2><p id="b21e" class="pw-post-body-paragraph jc jd hu je b jf li jh ji jj lj jl jm jn lk jp jq jr ll jt ju jv lm jx jy jz hn dt translated">我需要在控制器之间发送参数。当然有<a class="ae ka" href="https://angular-2-training-book.rangle.io/handout/routing/routeparams.html" rel="noopener ugc nofollow" target="_blank">向导在那里</a>，但是魔法因素还是太高了。感觉就像从示例中偏离了一毫米，突然<code class="eh mf mg mh lp b">route.params</code>是空的或者什么的。这对于因果报应测试来说更是如此。为什么这个<a class="ae ka" href="https://angular.io/api/router/testing/RouterTestingModule" rel="noopener ugc nofollow" target="_blank">路由测试模块</a>现在是必需的，而以前不是这种东西。尤其是如何设置控制器的参数似乎大相径庭。我最终把它分解成这样的东西，把参数传递给控制器:</p><pre class="kc kd ke kf fq lo lp lq lr aw ls dt"><span id="567a" class="kn ko hu lp b fv lt lu l lv lw">TestBed.<em class="ln">configureTestingModule</em>({<br/>  declarations: [GroupComponent],<br/>  imports: [FormsModule, RouterTestingModule.<em class="ln">withRoutes</em>([]), HttpClientTestingModule],<br/>  providers: [GroupsService, UserService, AlertService, AuthenticationService,<br/>    [GroupComponent, {<br/>      <strong class="lp hv">provide: ActivatedRoute,<br/>      useValue: {snapshot: {params: {'group': '123'}}}</strong><br/>    }]]<br/>}).<em class="ln">compileComponents</em>();</span></pre><p id="01c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是你能想到的最难看的了，因为它通过了所有的测试，但是，嘿，它很有效。</p><p id="6fd6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">吸取教训:</strong>再次使用魔法。出血边缘魔术与有限的文件。</p></div><div class="ab cl kg kh hc ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="hn ho hp hq hr"><p id="8e6d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">还有更多，但我想你明白了。</p><figure class="kc kd ke kf fq iv fe ff paragraph-image"><div class="fe ff na"><img src="../Images/663d8b1a24081b2034c8f432e175cfa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*Pssm_QtGXzD5bCWkwUT1VA.jpeg"/></div><figcaption class="iy iz fg fe ff ja jb bd b be z ek">I wish I were Jack</figcaption></figure></div></div>    
</body>
</html>