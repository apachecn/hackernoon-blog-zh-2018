<html>
<head>
<title>Bitcoin Cash Smart contracts</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">比特币现金智能合约</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/bitcoin-cash-smart-contract-a2c92e8f07a1?source=collection_archive---------14-----------------------#2018-10-28">https://medium.com/hackernoon/bitcoin-cash-smart-contract-a2c92e8f07a1?source=collection_archive---------14-----------------------#2018-10-28</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/886c5b2bed7ab7adb01af6b7f4014e53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*exl_u_8doyH_qm2_LOwKNg.png"/></div></div></figure><p id="9900" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">今天我想讲一些有趣的事情。它是关于比特币现金区块链之上的智能合约。对于不知道什么是比特币现金的人来说。比特币现金是比特币区块链的一个硬分支，其中人们谈到了可扩展性和交易费，即交易量。换句话说，就是比特币，社区决定创建一个新的区块链，它可以容纳更大尺寸的区块和更少的交易费用。除了所有的即时交易会让你大吃一惊，我的意思是几乎没有即时交易，但它真的比比特币交易速度更快。如果你不知道什么是分叉，我来帮你理解一下，硬分叉是从区块链的前一版本永久分叉，运行前一版本的节点将不再被最新版本接受。</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div class="fe ff ka"><img src="../Images/8392bf9d13b9fbfbfeeecd8b6d240084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*dMQgOgHjyPfo6iJXkF3brA.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">hard fork</figcaption></figure><p id="3335" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">比特币现金有什么特别的？</p><p id="40e3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">比特币和比特币现金没有太大区别。它们都是为了同样的目的“点对点数字现金”而建立的。以下是一些关于比特币和比特币现金的有趣事实。</p><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div class="fe ff kj"><img src="../Images/e430af99cec4f133a870da966e276490.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*hKw32oTY3gUnzLgQ-CbxCQ.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Bitcoin vs Bitcoin Cash</figcaption></figure><p id="858c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们能在比特币现金上创建智能合约吗？</p><p id="5152" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">是啊！我们可以在比特币现金上写智能合约。好吧，让我来告诉你我们在写比特币现金智能合约时会面临什么困难。</p><ul class=""><li id="2f5a" class="kk kl hu je b jf jg jj jk jn km jr kn jv ko jz kp kq kr ks dt translated">致力于编写比特币现金的社区和开发者正处于早期阶段。所以，做好准备，你需要自己做好准备，目前没有多少人能帮你编写比特币现金合约。</li><li id="fed2" class="kk kl hu je b jf kt jj ku jn kv jr kw jv kx jz kp kq kr ks dt translated">我们将使用名为“Spedn”的高级语言来编写我们的智能合约。</li><li id="fe34" class="kk kl hu je b jf kt jj ku jn kv jr kw jv kx jz kp kq kr ks dt translated">Haskell用于测试比特币现金智能合约。</li></ul><p id="69d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们编写第一份比特币现金智能合约:</p><ol class=""><li id="26a2" class="kk kl hu je b jf jg jj jk jn km jr kn jv ko jz ky kq kr ks dt translated">在你的设备上安装Haskell工具包。</li></ol><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="bbef" class="le lf hu la b fv lg lh l li lj">$ curl -sSL https://get.haskellstack.org/ | sh</span></pre><p id="4092" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">2.创建新项目:</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="42cd" class="le lf hu la b fv lg lh l li lj">$ stack new my-project<br/>$ cd my-project<br/>$ stack setup<br/>$ stack build<br/>$ stack exec my-project-exe</span></pre><p id="9289" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">3.要启动run:</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="47d1" class="le lf hu la b fv lg lh l li lj">$ stack ghci</span></pre><p id="af44" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">4.有关Haskell命令的列表:</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="3a9b" class="le lf hu la b fv lg lh l li lj">$ stack </span></pre><p id="2a86" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">5.克隆“Spedn”</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="dec3" class="le lf hu la b fv lg lh l li lj">$ git clone https://github.com/sriharikapu/Spedn.git <br/><br/>or <br/><br/>$ git clone https://bitbucket.org/o-studio/spedn.git</span></pre><p id="2a36" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">6.构建“Spedn”</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="e74b" class="le lf hu la b fv lg lh l li lj">$ cd spedn/spedn<br/>$ stack install</span></pre><p id="376e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">7.为智能合同创建目录:</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="8fb9" class="le lf hu la b fv lg lh l li lj">$ mkdir samplecontract<br/>$ touch ExiringTip.spedn<br/>$ nano ExiringTip.spedn</span></pre><p id="388b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">8.让我们考虑一个编写智能合同的案例:</p><p id="e518" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们假设Alice想用纸钱包给服务员Bob小费，但是她想确保硬币不会因为Bob丢失纸而丢失。</p><p id="0382" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这份合同锁定了一枚硬币，鲍勃可以在任何时候赎回它，但如果他在7天内没有赎回，那么爱丽丝可以取回它。</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="2c5b" class="le lf hu la b fv lg lh l li lj">contract ExpiringTip(Ripemd160 alice, Ripemd160 bob) {<br/><br/>    challenge receive(Sig sig, PubKey pubKey) {<br/>        verify hash160(pubKey) == bob;<br/>        verify checkSig(sig, pubKey);<br/>    }<br/><br/>    challenge revoke(Sig sig, PubKey pubKey) {<br/>        verify checkSequence(7d);<br/>        verify hash160(pubKey) == alice;<br/>        verify checkSig(sig, pubKey);<br/>    }<br/>     challenge cancel(Sig Sig) {<br/>        verify checkSequence(8b);<br/>        verify checkSig(Sig, PubKey);<br/>    }<br/>}</span></pre><p id="0486" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">9.编译您的智能合同:</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="9aef" class="le lf hu la b fv lg lh l li lj">$ spedn compile -c mycontract.spedn</span></pre><p id="ddad" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">10.已编译的合同模板:</p><pre class="kb kc kd ke fq kz la lb lc aw ld dt"><span id="8928" class="le lf hu la b fv lg lh l li lj">&lt;alice&gt; &lt;bob&gt; 2 PICK TRUE EQUAL IF 3 PICK HASH160 OVER EQUALVERIFY (...)</span></pre></div><div class="ab cl lk ll hc lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="hn ho hp hq hr"><figure class="kb kc kd ke fq iv fe ff paragraph-image"><div class="ab fr cl lr"><img src="../Images/6758180a2eca1a1d2bbb2e1ca2a65c0f.png" data-original-src="https://miro.medium.com/v2/format:webp/0*N7UYK2m6Y64G11xM.png"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek">Open source</figcaption></figure></div></div>    
</body>
</html>