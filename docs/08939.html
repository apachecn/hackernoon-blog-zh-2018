<html>
<head>
<title>Test Driven Development with Alexa SDK</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Alexa SDK进行测试驱动开发</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/test-driven-development-with-alexa-sdk-777f6b5e5486?source=collection_archive---------20-----------------------#2018-10-29">https://medium.com/hackernoon/test-driven-development-with-alexa-sdk-777f6b5e5486?source=collection_archive---------20-----------------------#2018-10-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/8519a3e19120e14eed76eaafc2c105cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AuWXxLk4-yvxwnWF"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Photo by <a class="ae ih" href="https://unsplash.com/@andresurena?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Andres Urena</a> on <a class="ae ih" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="53b7" class="pw-subtitle-paragraph jh ij ik bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy ek translated">Alexa技能构建和单元测试快速指南</h2></div><h1 id="12fb" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">什么是测试驱动开发？</h1><p id="8789" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">根据<a class="ae ih" href="https://en.wikipedia.org/wiki/Test-driven_development" rel="noopener ugc nofollow" target="_blank">维基百科</a>的说法，它的意思是“需求被转化为非常具体的<a class="ae ih" href="https://en.wikipedia.org/wiki/Test_case" rel="noopener ugc nofollow" target="_blank">测试用例</a>，然后软件被改进以通过新的测试，只是。”基本上，在开始开发软件/特性本身之前，你必须首先编写你正在开发的软件/特性的测试。</p><p id="4223" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">这里还有几篇关于TDD的好处以及为什么你应该应用TDD的文章:<br/> - <a class="ae ih" rel="noopener" href="/mobile-quality/test-driven-development-d16fd216d45c">测试驱动开发</a>作者<a class="ls lt gr" href="https://medium.com/u/b13c3ea3a356?source=post_page-----777f6b5e5486--------------------------------" rel="noopener" target="_blank">Jan Olbrich</a><br/>-<a class="ae ih" href="http://Isn’t TDD(Test Driven Development) twice the work? Why should you care?" rel="noopener ugc nofollow" target="_blank">TDD不是事半功倍吗？你为什么要在乎？</a>作者<a class="ls lt gr" href="https://medium.com/u/ecfc4ed36c8e?source=post_page-----777f6b5e5486--------------------------------" rel="noopener" target="_blank">纳夫迪普·辛格</a></p><h1 id="8305" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">准备</h1><p id="fa6b" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">在开始之前，您可能需要设置或安装以下几项:</p><ul class=""><li id="df52" class="lu lv ik kt b ku ln kx lo la lw le lx li ly lm lz ma mb mc dt translated">亚马逊网络服务账户(免费的也可以)</li><li id="c2cb" class="lu lv ik kt b ku md kx me la mf le mg li mh lm lz ma mb mc dt translated"><a class="ae ih" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> node.js </a>(虽然我个人更喜欢通过<a class="ae ih" href="https://github.com/creationix/nvm" rel="noopener ugc nofollow" target="_blank"> nvm </a>来安装和维护)</li><li id="337a" class="lu lv ik kt b ku md kx me la mf le mg li mh lm lz ma mb mc dt translated">您选择的文本编辑器</li></ul><h1 id="dde2" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">安装</h1><ol class=""><li id="6c0f" class="lu lv ik kt b ku kv kx ky la mi le mj li mk lm ml ma mb mc dt translated">创建一个新的项目文件夹(<code class="eh mm mn mo mp b">mkdir project-name</code>)</li><li id="db9e" class="lu lv ik kt b ku md kx me la mf le mg li mh lm ml ma mb mc dt translated">导航到新文件夹(<code class="eh mm mn mo mp b">cd project-name</code>)</li><li id="5b96" class="lu lv ik kt b ku md kx me la mf le mg li mh lm ml ma mb mc dt translated">初始化npm ( <code class="eh mm mn mo mp b">npm init</code>)</li><li id="0bcd" class="lu lv ik kt b ku md kx me la mf le mg li mh lm ml ma mb mc dt translated">按照你的喜好完成所有的事情(如果你不知道它是什么，只要按下回车键，它就会保持默认)，除了<code class="eh mm mn mo mp b">test command:</code>，输入<code class="eh mm mn mo mp b">node test/testflow.js</code>。命令行应该类似于下面的代码片段。</li></ol><pre class="mq mr ms mt fq mu mp mv mw aw mx dt"><span id="80b7" class="my ka ik mp b fv mz na l nb nc">This utility will walk you through creating a package.json file.<br/>It only covers the most common items, and tries to guess sensible defaults.</span><span id="be8a" class="my ka ik mp b fv nd na l nb nc">See `npm help json` for definitive documentation on these fields<br/>and exactly what they do.</span><span id="0c6d" class="my ka ik mp b fv nd na l nb nc">Use `npm install &lt;pkg&gt;` afterwards to install a package and<br/>save it as a dependency in the package.json file.</span><span id="0f93" class="my ka ik mp b fv nd na l nb nc">Press ^C at any time to quit.<br/>package name: (emptyproject) <br/>version: (1.0.0) <br/>description: <br/>entry point: (index.js) <br/>test command: node test/testflow.js<br/>git repository: <br/>keywords: <br/>author: <br/>license: (ISC)</span></pre><p id="6ce1" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">现在您已经为项目设置了node.js。</p><h1 id="9881" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">单元测试</h1><p id="15bd" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">为维护为Alexa技能提供单元测试的<a class="ae ih" href="https://github.com/robm26/testflow" rel="noopener ugc nofollow" target="_blank"> testflow </a>向<a class="ls lt gr" href="https://medium.com/u/6fe2a060fc58?source=post_page-----777f6b5e5486--------------------------------" rel="noopener" target="_blank"> robmccauley </a>大声疾呼。以下是以下命令将执行的操作:</p><ul class=""><li id="a9d7" class="lu lv ik kt b ku ln kx lo la lw le lx li ly lm lz ma mb mc dt translated">将测试流存储库克隆到项目的“test”文件夹中。(如果这个项目本身也是git项目，我建议做<code class="eh mm mn mo mp b">git submodule add</code>而不是<code class="eh mm mn mo mp b">git clone</code>。)</li><li id="932a" class="lu lv ik kt b ku md kx me la mf le mg li mh lm lz ma mb mc dt translated">创建一个名为“对话框”的文件夹</li><li id="ad4f" class="lu lv ik kt b ku md kx me la mf le mg li mh lm lz ma mb mc dt translated">在“对话框”文件夹中创建名为“default.txt”的文件</li><li id="4233" class="lu lv ik kt b ku md kx me la mf le mg li mh lm lz ma mb mc dt translated">编辑克隆的“testflow”存储库中的“SourceCodeFile”行，使其指向文件夹基本级别中的“index.js ”(您可以根据个人喜好随意编辑它)。</li></ul><pre class="mq mr ms mt fq mu mp mv mw aw mx dt"><span id="533a" class="my ka ik mp b fv mz na l nb nc">git clone <a class="ae ih" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:robm26/testflow.git test<br/>mkdir dialogs<br/>touch dialogs/default.txt<br/>sed -i '9c const SourceCodeFile = "../index.js"' test/testflow.js</span></pre><p id="a5db" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">在“dialogs”文件夹的“default.txt”文件中，应该有您要测试的意图。测试流存储库中的缺省值包括以下内容，但是你应该根据你的技能添加一些定制的内容。</p><pre class="mq mr ms mt fq mu mp mv mw aw mx dt"><span id="ba16" class="my ka ik mp b fv mz na l nb nc">LaunchRequest<br/>AMAZON.HelpIntent<br/>AMAZON.StopIntent</span></pre><p id="2275" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">如果你通过话语获取变量，你可以这样做:</p><pre class="mq mr ms mt fq mu mp mv mw aw mx dt"><span id="7411" class="my ka ik mp b fv mz na l nb nc">DoSomething Input1=userInput1 Input2=userInput2</span></pre><p id="32a6" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">为了更深入地了解如何使用testflow，我建议查看一下它的<a class="ae ih" href="https://github.com/robm26/testflow/blob/master/tutorial/TUTORIAL.md" rel="noopener ugc nofollow" target="_blank">教程页面</a>和作者本人的<a class="ae ih" href="https://developer.amazon.com/blogs/alexa/post/35eb8ae8-2cd8-4de7-86c5-97a1abc239b9/testflow-simulate-conversations-with-your-alexa-skill-code-to-ease-debugging" rel="noopener ugc nofollow" target="_blank">博客帖子</a>。</p><h1 id="91ad" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">发展技能</h1><p id="26ef" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">说实话，这个话题我没有太多可说的。下面是一些示例代码，展示了一个示例技能的样子。(也记得做<code class="eh mm mn mo mp b">npm install --save alexa-sdk</code>。)</p><figure class="mq mr ms mt fq hw"><div class="bz el l di"><div class="ne nf l"/></div></figure><p id="3107" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">我建议查看官方的<a class="ae ih" href="https://github.com/alexa/alexa-cookbook" rel="noopener ugc nofollow" target="_blank"> Alexa GitHub知识库</a>，它提供了各种你可以在上面工作的示例技能。</p><h1 id="8cee" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">部署</h1><h2 id="c23b" class="my ka ik bd kb ng nh ni kf nj nk nl kj la nm nn kl le no np kn li nq nr kp ns dt translated">Alexa技能包</h2><p id="f158" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">进入<a class="ae ih" href="https://developer.amazon.com/alexa/console/" rel="noopener ugc nofollow" target="_blank">页面</a>并选择“创建技能”。在那里你应该看到选项“添加意图”和“自定义插槽类型”。您应该从上面相应地添加适当的插槽类型和意图。完成后，从边栏中选择“端点”并选择“AWS Lambda ARN”作为技能的服务端点。制作技能ID的副本，因为您稍后会需要它。</p><h2 id="7441" class="my ka ik bd kb ng nh ni kf nj nk nl kj la nm nn kl le no np kn li nq nr kp ns dt translated">自动气象站λ</h2><p id="eb94" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">选择“从头开始”创建AWS Lambda函数。之后，你应该有一个选项来“添加触发器”，你会选择“Alexa技能包”。现在，在配置对话框中，您应该输入先前复制的技能ID，然后选择“添加”。</p><p id="5013" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">之后，选择回到标有项目名称的框中。下面应该会出现一个“功能代码”对话框。虽然您肯定可以将您的代码复制并粘贴到在线文本编辑器中，但您已经安装并在代码中使用的包可能会默认包含在内。也有可能你有一个以上的技能JavaScript文件。</p><p id="9409" class="pw-post-body-paragraph kr ks ik kt b ku ln jl kw kx lo jo kz la lp lc ld le lq lg lh li lr lk ll lm hn dt translated">在这种情况下，您可以在“代码输入类型”下选择“上传. ZIP文件”。在本地，将所有JavaScript文件连同<code class="eh mm mn mo mp b">node_modules</code>文件夹一起压缩，然后上传结果zip文件。</p><h1 id="1b8d" class="jz ka ik bd kb kc kd ke kf kg kh ki kj jq kk jr kl jt km ju kn jw ko jx kp kq dt translated">提交</h1><p id="8ac3" class="pw-post-body-paragraph kr ks ik kt b ku kv jl kw kx ky jo kz la lb lc ld le lf lg lh li lj lk ll lm hn dt translated">完成后，您可以返回Alexa技能工具包页面，选择“分配”选项卡并填写适当的信息，然后提交您的技能进行审核。希望一切顺利，你的技能在Alexa技能商店发布！</p></div><div class="ab cl nt nu hc nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="hn ho hp hq hr"><h1 id="b97a" class="jz ka ik bd kb kc oa ke kf kg ob ki kj jq oc jr kl jt od ju kn jw oe jx kp kq dt translated">信用</h1><ul class=""><li id="918d" class="lu lv ik kt b ku kv kx ky la mi le mj li mk lm lz ma mb mc dt translated"><a class="ae ih" href="https://developer.amazon.com/docs/ask-overviews/build-skills-with-the-alexa-skills-kit.html" rel="noopener ugc nofollow" target="_blank">使用Alexa技能工具包培养技能</a></li><li id="9cb7" class="lu lv ik kt b ku md kx me la mf le mg li mh lm lz ma mb mc dt translated"><a class="ae ih" href="https://developer.amazon.com/blogs/alexa/post/35eb8ae8-2cd8-4de7-86c5-97a1abc239b9/testflow-simulate-conversations-with-your-alexa-skill-code-to-ease-debugging" rel="noopener ugc nofollow" target="_blank">测试流程:用你的Alexa技能代码模拟对话，以简化调试</a></li></ul></div></div>    
</body>
</html>