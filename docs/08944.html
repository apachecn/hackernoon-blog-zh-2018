<html>
<head>
<title>Technical Overview of Circle’s USDC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Circle USDC的技术概述</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/technical-overview-of-circles-usdc-760bca6a90a0?source=collection_archive---------25-----------------------#2018-10-29">https://medium.com/hackernoon/technical-overview-of-circles-usdc-760bca6a90a0?source=collection_archive---------25-----------------------#2018-10-29</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/23c6423967bc9d8307b2abffeb7aabb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HI0tsfnmzEOfq_W8yY2CJw.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">by Aleksey Shmatov</figcaption></figure><p id="b2a2" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">比特币基地<a class="ae ke" href="https://www.coindesk.com/coinbase-adds-its-first-stablecoin-tied-to-the-us-dollar/" rel="noopener ugc nofollow" target="_blank">增加</a>第一个与美元挂钩的稳定货币。我们已经进入了一个合法稳定收入的新时代。由高盛支持的Circle发行的USDC。使它尽可能的官方和合法。</p><p id="7e59" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">与在比特币的Omni层上实现的Tether相反，USDC在以太坊上实现了ERC-20令牌。</p><p id="64e5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">由<a class="ae ke" href="https://www.centre.io/" rel="noopener ugc nofollow" target="_blank"> centre.io </a>编写的USDC源代码<a class="ae ke" href="https://github.com/centrehq/centre-tokens/tree/master/contracts" rel="noopener ugc nofollow" target="_blank">可在GitHub</a>上获得，并有一个像样的<a class="ae ke" href="https://github.com/centrehq/centre-tokens/blob/master/doc/tokendesign.md" rel="noopener ugc nofollow" target="_blank">文档</a>。源代码在<a class="ae ke" href="https://etherscan.io/address/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48#code" rel="noopener ugc nofollow" target="_blank">以太扫描</a>上验证。让我们来看看。</p><h1 id="a082" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">代理合同</h1><p id="13c2" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">原<a class="ae ke" href="https://etherscan.io/address/0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48#code" rel="noopener ugc nofollow" target="_blank">地址</a>指向<a class="ae ke" href="https://github.com/zeppelinos/zos/blob/master/packages/lib/contracts/upgradeability/Proxy.sol" rel="noopener ugc nofollow" target="_blank">代理合同</a>，由OpenZeppelin编写。本质上，它使管理员能够在任何时候用任何代码替换USDC的实现。这完全破坏了EVM契约的不变性，以及智能契约的不信任。换句话说，<strong class="ji hv"> USDC是100%基于信任的企业</strong>。我猜老银行真的喜欢把权力握在手里随时拧谁。</p><p id="9f17" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">然而与此同时，它也代表了USDC自身失败的临界点。在管理私钥被盗的情况下，整个USDC令牌可能会被销毁，所有用户/余额都会丢失，因为新合同可能会故意覆盖数据。那将是一场灾难。</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><h1 id="bdfc" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">ERC-20</h1><p id="7137" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">代理本身指向ERC-20令牌实现。<a class="ae ke" href="https://etherscan.io/address/0x0882477e7895bdc5cea7cb1552ed914ab157fe56#code" rel="noopener ugc nofollow" target="_blank">代码</a>在etherscan上可用并经过验证。该合同名为<code class="eh lo lp lq lr b">FiatTokenV1</code>，是ERC-20 Token heavy的定制实现，受OpenZeppelin的影响，增加了许多功能。</p><pre class="li lj lk ll fq ls lr lt lu aw lv dt"><span id="90f0" class="lw kg hu lr b fv lx ly l lz ma">contract FiatTokenV1 is Ownable, ERC20, Pausable, Blacklistable</span></pre><p id="ab4b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">FiatTokenV1实现了ERC-20协议，几乎没有例外:</p><ul class=""><li id="ab0a" class="mb mc hu ji b jj jk jn jo jr md jv me jz mf kd mg mh mi mj dt translated">黑名单中的地址将无法调用transfer、transferFrom或approve，并且无法接收令牌。</li><li id="5461" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">如果合同已暂停，则转移、转移自和批准将失败。</li></ul><p id="af98" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">换句话说，<strong class="ji hv">他们可以把任何人踢出系统</strong>，让他的资金变得毫无用处。并且<strong class="ji hv">他们可以阻止整个USDC令牌移动任何东西</strong>。</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/80524337b384f4f22b3505571615c50a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1250/format:webp/0*wGn8LBpRBCC_2b0v.jpg"/></div></figure><h1 id="653f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">管理</h1><p id="6e2e" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">我真正喜欢FiatTokenV1的是角色的分离。它定义了以下角色:</p><ul class=""><li id="764e" class="mb mc hu ji b jj jk jn jo jr md jv me jz mf kd mg mh mi mj dt translated">主铸币商—添加和删除铸币商，并增加他们的铸币余量</li><li id="e970" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">铸币者—创建和销毁令牌</li><li id="a271" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">暂停合约，这将阻止所有转移、铸造和刻录</li><li id="43b3" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">黑名单—阻止所有往来于特定地址的传输，并阻止该地址被伪造或烧毁</li><li id="32cf" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">所有者—重新分配除管理员之外的任何角色</li><li id="c12d" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">管理—升级合同，并重新分配合同本身</li></ul><p id="64c7" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这种模式看起来像是对区块链的正确治理！再一次与Tether比较，本质上一个公司/个人可能经营它全部。我们有一份清晰的分工合同。</p><h1 id="cb18" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">实施细节</h1><p id="b77b" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">让我们深入研究源代码。我们不打算讨论Ownable、Pausable和Blacklistable的实现，因为它们很琐碎。相反，我们关注FiatTokenV1。</p><p id="be99" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">第一件看起来很奇怪的事情是，所有的<code class="eh lo lp lq lr b">internal</code>变量都是用驼峰命名的，比如<code class="eh lo lp lq lr b">balances</code>、<code class="eh lo lp lq lr b">allowed</code>等等。然而<code class="eh lo lp lq lr b">totalSupply_</code>的末尾有下划线。这是令人困惑的。它与其他字段不一致，并且与OpenZeppelin在开始使用下划线来标记合同字段<code class="eh lo lp lq lr b">_field</code>的符号相矛盾。</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="0823" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">此外，FiatTokenV1对某些函数使用<code class="eh lo lp lq lr b">_parameter</code>符号，对其他函数使用<code class="eh lo lp lq lr b">parameter</code>符号。高度不一致。</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="cba5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我会说这可能是由不同的人编写代码的不同部分引起的，但我不明白为什么它可以被检查和修复。</p><p id="a095" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">FiatTokenV1也与其断言不一致。在一些函数中，它会检查不是<code class="eh lo lp lq lr b">0</code>的地址，但是在一些函数中，它不会。证明。</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><p id="49c8" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">同样，这只是不一致，并可能导致未来的混乱和错误。OpenZeppelin的规范<a class="ae ke" href="https://github.com/OpenZeppelin/openzeppelin-solidity/blob/master/contracts/token/ERC20/ERC20.sol" rel="noopener ugc nofollow" target="_blank"> ERC-20实现</a>每次都会检查<code class="eh lo lp lq lr b">0</code>地址是否相等。</p><p id="e292" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><a class="ae ke" href="https://solidity.readthedocs.io/en/v0.4.24/style-guide.html" rel="noopener ugc nofollow" target="_blank">实体风格指南</a>定义了功能的顺序。我明白这只是一个建议，但FiatTokenV1的所有功能都混在一起了。它们按以下顺序排列:</p><ul class=""><li id="62df" class="mb mc hu ji b jj jk jn jo jr md jv me jz mf kd mg mh mi mj dt translated">构造器</li><li id="cc3c" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">修饰语</li><li id="2b5f" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">公众的</li><li id="ef5b" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">修饰语</li><li id="7297" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">公共<br/> …</li></ul><p id="d8ec" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我认为在200行代码中投入一些努力是合理的，这些代码每天将处理数十亿美元。</p><p id="f26f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">GitHub上有相当多的<a class="ae ke" href="https://github.com/centrehq/centre-tokens/tree/master/test" rel="noopener ugc nofollow" target="_blank">测试</a>，这总是一件好事。我还没有深入研究过。</p><h1 id="2f07" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">攻击媒介</h1><p id="7d2f" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">只有三种角色代表了明显的攻击目标:管理员、所有者和主控者。无论如何，他们都可以为攻击者提供铸造USDC的途径。假设在不久的将来，USDC将在包括分散式交换机在内的许多交换机上得到支持。攻击者可以迅速将USDC兑换成Monero或其他私人硬币。因此，必须建立对这些地址的持续监控，以防止此类事件的发生。对于管理员角色，情况甚至更糟。管理员实际上可以用攻击者的合同替换合同，这可能会破坏用户的余额和其他数据。使用日志进行恢复可能会花费大量时间，而且有问题。此外，只有管理员密钥可以解决所有者/主密钥的问题。因为管理私钥保护对于整个USDC令牌生态系统至关重要。</p><h1 id="9e36" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">结论</h1><p id="9b5e" class="pw-post-body-paragraph jg jh hu ji b jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz lh kb kc kd hn dt translated">喀尔刻的USDC是与美元挂钩的稳定货币的ERC-20版。从交易货币的成功来看，USDC在比特币基地和高盛的支持下可能会取得更大的成功。对所有相关方来说，清楚地理解技术上的细微差别是至关重要的，因为它们在区块链世界举足轻重。臭名昭著的例子是平价钱包<a class="ae ke" href="https://www.theregister.co.uk/2017/11/10/parity_280m_ethereum_wallet_lockdown_hack/" rel="noopener ugc nofollow" target="_blank">黑客</a>。我们不希望我们的钱卡住了一天，由于有人窃取管理私钥。</p><h1 id="6b7c" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">TL；速度三角形定位法(dead reckoning)</h1><ul class=""><li id="bc4e" class="mb mc hu ji b jj ld jn le jr mq jv mr jz ms kd mg mh mi mj dt translated">使用代理合同实现可升级性。</li><li id="123d" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">提供透明性和互操作性。</li><li id="501b" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">上帝用角色模型分离治理。</li><li id="8bc2" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">实现为ERC-20令牌。</li><li id="4d7e" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">可以将用户列入黑名单，并暂停整个令牌。</li><li id="0c4e" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">代理契约模型是一个严重的漏洞，因为它允许用全新的契约替换契约，并擦除/重写所有数据。</li></ul><h2 id="ba0d" class="lw kg hu bd kh mt mu mv kl mw mx my kp jr mz na kt jv nb nc kx jz nd ne lb nf dt translated">如果这篇文章有帮助，请点击拍手👏按钮下面几下，以示支持！⬇⬇</h2><h1 id="cac5" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">社会的</h1><ul class=""><li id="b6e3" class="mb mc hu ji b jj ld jn le jr mq jv mr jz ms kd mg mh mi mj dt translated">在<a class="ae ke" href="https://www.linkedin.com/in/ylv-io/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>上与我联系。</li><li id="53ab" class="mb mc hu ji b jj mk jn ml jr mm jv mn jz mo kd mg mh mi mj dt translated">在推特上关注我。</li></ul><h1 id="7d7f" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">阅读更多</h1><div class="ng nh fm fo ni nj"><a href="https://hackernoon.com/how-to-create-and-deploy-your-own-eos-token-1f4c9cc0eca1" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab ej"><div class="nl ab nm cl cj nn"><h2 class="bd hv fv z el no eo ep np er et ht dt translated">如何创建和部署您自己的EOS令牌</h2><div class="nq l"><h3 class="bd b fv z el no eo ep np er et ek translated">我们将弄清楚什么是EOS令牌，以及您如何自己创建和部署它。</h3></div><div class="nr l"><p class="bd b gc z el no eo ep np er et ek translated">hackernoon.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx ja nj"/></div></div></a></div><div class="ng nh fm fo ni nj"><a href="https://hackernoon.com/how-much-does-it-costs-to-run-dapp-in-2018-87ee11fe1d5d" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab ej"><div class="nl ab nm cl cj nn"><h2 class="bd hv fv z el no eo ep np er et ht dt translated">2018年办DApp要花多少钱</h2><div class="nq l"><h3 class="bd b fv z el no eo ep np er et ek translated">你认为你的AWS或网站的数字海洋账单正在杀死你吗？</h3></div><div class="nr l"><p class="bd b gc z el no eo ep np er et ek translated">hackernoon.com</p></div></div><div class="ns l"><div class="ny l nu nv nw ns nx ja nj"/></div></div></a></div></div><div class="ab cl nz oa hc ob" role="separator"><span class="oc bw bk od oe of"/><span class="oc bw bk od oe of"/><span class="oc bw bk od oe"/></div><div class="hn ho hp hq hr"><p id="7060" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated"><em class="og">原载于2018年10月29日</em> <a class="ae ke" href="https://ylv.io/circle-usdc-technical-overview/" rel="noopener ugc nofollow" target="_blank"> <em class="og"> ylv.io </em> </a> <em class="og">。</em></p></div></div>    
</body>
</html>