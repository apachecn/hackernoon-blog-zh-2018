<html>
<head>
<title>Up and running with ClojureScript in 2018</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在2018年启动并运行ClojureScript</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/up-and-running-with-clojurescript-in-2018-7c7a1facfe46?source=collection_archive---------6-----------------------#2018-10-31">https://medium.com/hackernoon/up-and-running-with-clojurescript-in-2018-7c7a1facfe46?source=collection_archive---------6-----------------------#2018-10-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div class="fe ff ir"><img src="../Images/fbe6666abd3100d99cfa5410dce5941b.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*Q--Klb3tWGtxeAAqiscNjw.png"/></div></figure><p id="7264" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">近几年来，ClojureScript (CLJS)的发展如此之快，以至于偶尔有必要撰写一篇关于如何尽可能简单地开始一个高效开发环境的快速帖子。</p><p id="d492" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">下面是我2018年末(11月)的版本。</p><p id="8a03" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">TL；博士，开始行动的最佳方式就是现在</p><ul class=""><li id="d361" class="jw jx hu ja b jb jc jf jg jj jy jn jz jr ka jv kb kc kd ke dt translated"><a class="ae kf" href="https://figwheel.org/" rel="noopener ugc nofollow" target="_blank">飞轮</a>(最新版本，<a class="ae kf" href="https://github.com/bhauman/figwheel-main" rel="noopener ugc nofollow" target="_blank">飞轮主</a>)</li><li id="50c3" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv kb kc kd ke dt translated"><a class="ae kf" href="https://clojure.org/guides/deps_and_cli" rel="noopener ugc nofollow" target="_blank"> CLJ命令行构建工具</a></li><li id="cff7" class="jw jx hu ja b jb kg jf kh jj ki jn kj jr kk jv kb kc kd ke dt translated"><a class="ae kf" href="https://reagent-project.github.io/" rel="noopener ugc nofollow" target="_blank">试剂</a>给你反应绑定</li></ul><p id="d690" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">首先你需要一个新的最新的Clojure。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="1c96" class="ku kv hu kq b fv kw kx l ky kz">$ brew install clojure</span></pre><p id="ca0e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">(或者<code class="eh la lb lc kq b">brew upgrade clojure</code>如果您已经有了1.9+版本并想获得最新版本)</p><p id="51f1" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">创建基本项目结构:</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="2aa0" class="ku kv hu kq b fv kw kx l ky kz">mkdir -p my-project/src/my-project<br/>cd my-project<br/>mkdir -p resources/public</span></pre><p id="f3da" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">在项目根中创建一个<code class="eh la lb lc kq b">deps.edn</code>——这实际上是您的构建文件，对于一个简单的项目来说，它可以代替Leiningen或Boot。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="8238" class="ku kv hu kq b fv kw kx l ky kz">{:deps {org.clojure/clojure       {:mvn/version "1.9.0"}<br/>        org.clojure/clojurescript {:mvn/version "1.10.339"}<br/>        reagent                   {:mvn/version "0.8.1"}}<br/> :paths ["src" "resources"]<br/> :aliases {:fig {:extra-deps<br/>                 {<br/>                  com.bhauman/rebel-readline-cljs {:mvn/version "0.1.4"}<br/>                  com.bhauman/figwheel-main       {:mvn/version "0.1.9"}}<br/>                 :extra-paths ["target" "test" "resources"]}<br/>           :build {:main-opts ["-m" "figwheel.main" "-b" "dev" "-r"]}           <br/>           }}</span></pre><p id="096d" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这定义了你的构建配置文件，在“构建”下面键入(你可以添加更多，像一个生产化的，缩小的——见未来的博客帖子！)</p><p id="6f70" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">但是，我们需要提供一些额外的运行时上下文，以获得热重载的好处。</p><p id="5f09" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">同样在项目根中，创建<code class="eh la lb lc kq b">dev.cljs.edn</code>,包含:</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="1339" class="ku kv hu kq b fv kw kx l ky kz">^{:watch-dirs ["src"]<br/>  :css-dirs ["resources/public"]<br/>  :auto-testing true}<br/>{:main my-project.core<br/> :output-to "target/public/main.js"}</span></pre><p id="fbaa" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">让我们通过创建一个引用我们编译的JS的索引页面来创建一种进入浏览器的方法。把这个放进<code class="eh la lb lc kq b">resources/public/index.html</code>:</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="b0d0" class="ku kv hu kq b fv kw kx l ky kz"><strong class="kq hv">&lt;!DOCTYPE html&gt;</strong><br/>&lt;html&gt;<br/>  &lt;head&gt;<br/>    &lt;link rel="stylesheet" href="/styles.css" /&gt;<br/>  &lt;/head&gt;</span><span id="da5a" class="ku kv hu kq b fv ld kx l ky kz">  &lt;body&gt;<br/>    &lt;div id="app"&gt;&lt;/div&gt;<br/>    &lt;script src="/main.js"&gt;&lt;/script&gt;<br/>  &lt;/body&gt;<br/>&lt;/html&gt;</span></pre><p id="ee5c" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">和一个CSS文件在<code class="eh la lb lc kq b">resources/public/styles.css:</code></p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="1c3a" class="ku kv hu kq b fv kw kx l ky kz">body {<br/>  font-family: Arial;<br/>  text-align: center;<br/>}</span></pre><p id="652a" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，我们需要一些实际的ClojureScript！</p><p id="b25e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">创建<code class="eh la lb lc kq b">src/my-project/core.cljs</code></p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="973b" class="ku kv hu kq b fv kw kx l ky kz">(ns ^:figwheel-hooks my-project.core<br/>    (:require [reagent.core :as r]))</span><span id="e659" class="ku kv hu kq b fv ld kx l ky kz">(defn my-component []<br/>  [:p "My first React component"])</span><span id="3699" class="ku kv hu kq b fv ld kx l ky kz">(defn ^:export main []<br/>  (r/render <br/>    [my-component]<br/>    (.getElementById js/document "app")))</span><span id="d013" class="ku kv hu kq b fv ld kx l ky kz">(main)</span></pre><p id="fdb3" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，您可以只使用</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="7151" class="ku kv hu kq b fv kw kx l ky kz">$ clojure -A:fig:build</span></pre><p id="9de5" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这应该会立即弹出一个浏览器窗口，显示您闪亮的新React应用程序，并通过新的Rebel Readline命令行编辑功能将您的终端放入REPL。</p><figure class="kl km kn ko fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff le"><img src="../Images/559cff8db1b0340426258237f70ff78a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rOtPytgpFcZvZs9vdg3F3w.png"/></div></div></figure><p id="e704" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">编辑ClojureScript(或CSS)应该会导致您在浏览器中看到的立即热重新加载。</p><pre class="kl km kn ko fq kp kq kr ks aw kt dt"><span id="5f0c" class="ku kv hu kq b fv kw kx l ky kz">body {<br/>  font-family: Arial;<br/>  text-align: center;<br/>  font-size: 22pt;<br/>  color: red;<br/>}</span></pre><figure class="kl km kn ko fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="fe ff le"><img src="../Images/7da13db0b8dccd05bd76cc12863499e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lFFlPKh_Jcf-JWAeR7saIA.png"/></div></div></figure><p id="e54e" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><strong class="ja hv">补遗</strong></p><p id="2571" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我在创建<a class="ae kf" href="https://trolley.link" rel="noopener ugc nofollow" target="_blank">手推车</a>时发现了这一切——这是一个为黑客、制造商、创业者和初创公司设计的简单支付系统&amp;购物车。</p><p id="d959" class="pw-post-body-paragraph iy iz hu ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这都是用Clojure(脚本)编写的，尽管它可以与任何技术一起工作。随着我最近对现代CLJ/CLJS web开发的了解，还会有更多的博客帖子出现！</p></div></div>    
</body>
</html>