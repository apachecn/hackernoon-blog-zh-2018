<html>
<head>
<title>Headless Wordpress CMS on AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AWS上的无头Wordpress CMS</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/headless-wordpress-cms-on-aws-b64c9da8b9b5?source=collection_archive---------2-----------------------#2018-11-02">https://medium.com/hackernoon/headless-wordpress-cms-on-aws-b64c9da8b9b5?source=collection_archive---------2-----------------------#2018-11-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="5957" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">使用Docker快速启动AWS上的无头Wordpress CMS</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff jj"><img src="../Images/1e3cdd11e97d97eb64a0a21a66858bd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*SM7tUCrfZ03EevwvLgvAtw.jpeg"/></div><figcaption class="jr js fg fe ff jt ju bd b be z ek">Credit — <a class="ae jv" href="https://www.superdesk.org/news/headless-cms" rel="noopener ugc nofollow" target="_blank">https://www.superdesk.org/news/headless-cms</a></figcaption></figure><p id="bc15" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">无头CMS目前很流行。但是什么是无头CMS，为什么我应该开始使用它？</p><p id="2bd9" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">一个无头的CMS是一个从它的前端解耦的后端。后端是创建和发布内容的地方。而前端是显示内容的地方(网络、移动应用、机顶盒、Alexa等)。</p><p id="bf41" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">例如，传统的CMS是一个单一的网站。添加内容和显示内容使用的是同一个网站。后端和前端是<strong class="jy hv">耦合</strong>。</p><p id="ac65" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">无头CMS仅用于创建和发布内容。该内容随后可通过API获得。用于显示内容的网站或移动应用程序是独立的。</p><p id="eb31" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">但是为什么解耦更好呢？以下是一些原因:</p><ul class=""><li id="4d1e" class="ks kt hu jy b jz ka kc kd kf ku kj kv kn kw kr kx ky kz la dt translated">比传统内容管理系统更快、更灵活的内容交付</li><li id="891d" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">面对用户界面变化的弹性(经得起未来考验)</li><li id="e089" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">快速设计迭代</li><li id="a86a" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">增强的安全性</li><li id="5c52" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">更少的发行者和开发者依赖性</li><li id="2e54" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">更简单的部署</li></ul><p id="c1dc" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><em class="lg"> ***感谢列表</em> <a class="ae jv" href="https://www.brightspot.com/blog/decoupled-cms-and-headless-cms-platforms" rel="noopener ugc nofollow" target="_blank"> <em class="lg">亮点</em> </a></p><p id="7366" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">既然我们都一致认为无头CMS是正确的选择。让我们来看看这些令人敬畏的<a class="ae jv" href="https://github.com/rgfindl/headless-wordpress" rel="noopener ugc nofollow" target="_blank"> CloudFormation模板</a>，我创建它们是为了帮助你运行和管理你的headless (Wordpress) CMS。</p><p id="3e04" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">需要明确的是，这是一个运行在AWS上的Wordpress安装，使用基础设施作为代码和Docker。</p><p id="9408" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">等等……为什么使用Wordpress，而不是像<a class="ae jv" href="https://contently.com/" rel="noopener ugc nofollow" target="_blank"> Contently </a>或<a class="ae jv" href="https://cosmicjs.com/" rel="noopener ugc nofollow" target="_blank"> Cosmic JS </a>这样的酷的新的无头CMS服务？嗯，这些服务真的很棒，但它们要花很多钱，如果可以的话，我通常喜欢自己管理一切。还有… Wordpress在管理内容方面真的很好。</p><p id="00ac" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">但是Wordpress怎么会是无头CMS呢？简单，它有一个API。</p><p id="bf1a" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">诀窍是让Wordpress成为无状态的，这样它就可以自动缩放，并在AWS上运行，实现零停机部署。</p><p id="61ca" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">好了，无头CMS很酷，Wordpress也挺酷的，我们继续。</p><div class="lh li fm fo lj lk"><a href="https://github.com/rgfindl/headless-wordpress" rel="noopener  ugc nofollow" target="_blank"><div class="ll ab ej"><div class="lm ab ln cl cj lo"><h2 class="bd hv fv z el lp eo ep lq er et ht dt translated">rgfindl/headless-wordpress</h2><div class="lr l"><h3 class="bd b fv z el lp eo ep lq er et ek translated">AWS -简单设置。</h3></div><div class="ls l"><p class="bd b gc z el lp eo ep lq er et ek translated">github.com</p></div></div><div class="lt l"><div class="lu l lv lw lx lt ly jp lk"/></div></div></a></div><h1 id="1531" class="lz ma hu bd mb mc md me mf mg mh mi mj ja mk jb ml jd mm je mn jg mo jh mp mq dt translated">体系结构</h1><p id="c55d" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">我们的Wordpress实例使用Docker作为<a class="ae jv" href="https://aws.amazon.com/ecs/" rel="noopener ugc nofollow" target="_blank">弹性容器服务</a>运行。</p><p id="3b68" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">首先我们有<a class="ae jv" href="https://aws.amazon.com/vpc/" rel="noopener ugc nofollow" target="_blank"> VPC </a>，然后是<a class="ae jv" href="https://aws.amazon.com/ecs/" rel="noopener ugc nofollow" target="_blank"> ECS </a>集群，然后是EC2实例，最后是带有任务的<a class="ae jv" href="https://aws.amazon.com/ecs/" rel="noopener ugc nofollow" target="_blank"> ECS </a>服务。我们的Wordpress服务通过一个<a class="ae jv" href="https://aws.amazon.com/elasticloadbalancing/" rel="noopener ugc nofollow" target="_blank">弹性负载平衡器</a>向外界公开。我们使用RDS作为我们的MySQL数据库。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="mx my di mz bf na"><div class="fe ff mw"><img src="../Images/88b332ab01449c7a8a0c5224aa5f4d19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MrSuro302zzXfbYtfchUBg.png"/></div></div></figure><p id="921d" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">我们的Wordpress服务是无状态的，这意味着我们不能像Wordpress媒体或插件那样依赖文件系统来存储内容。每次我们的Wordpress服务的一个实例被产生时，它将只有被烘焙到我们的Docker映像中的文件。</p><p id="84e9" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">让我们先看看我们是如何处理Wordpress媒体的。</p><p id="f546" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">我们使用一个叫做<a class="ae jv" href="https://wordpress.org/plugins/amazon-s3-and-cloudfront/" rel="noopener ugc nofollow" target="_blank"> WP卸载媒体</a>的插件。这个插件允许我们将媒体存储在<a class="ae jv" href="https://aws.amazon.com/s3/" rel="noopener ugc nofollow" target="_blank"> S3 </a>中，并将<a class="ae jv" href="https://aws.amazon.com/cloudfront/" rel="noopener ugc nofollow" target="_blank"> CloudFront </a>用作CDN。看看下面的图表。我们也使用相同的CDN来缓存Wordpress API…</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff nb"><img src="../Images/3eb25b2ec1820c0fc362d702f50f0238.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*UWcQSgbSfxKcdzySQc9qxA.png"/></div></figure><p id="2d68" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">现在我们如何处理插件？(我们可以忽略模板，因为这是无头的😃)</p><p id="eda1" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">还记得我说过把东西烤成我们码头工人的形象吗？就是这样…我们必须在Docker图像中包含插件。让我们看一下那个文档并浏览一遍。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nc nd l"/></div></figure><p id="fcc3" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">如你所见，我们的Dockerfile非常简单。它扩展了最新的Wordpress图片，然后安装了3个插件。它下载、解压并复制每个插件到<code class="eh ne nf ng nh b">wordpress/wp-content/</code>目录。当你第一次启动你的Wordpress站点时，你必须激活这些插件。激活状态存储在MySQL中，因此您不必在每次ECS任务回收时都这样做。</p><h1 id="d6a4" class="lz ma hu bd mb mc md me mf mg mh mi mj ja mk jb ml jd mm je mn jg mo jh mp mq dt translated">装置</h1><p id="0496" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">好了，让我们安装这个架构。首先几个先决条件。</p><h2 id="6913" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">先决条件</h2><p id="e53d" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">安装以下必备组件:</p><ul class=""><li id="c609" class="ks kt hu jy b jz ka kc kd kf ku kj kv kn kw kr kx ky kz la dt translated"><a class="ae jv" href="https://aws.amazon.com/" rel="noopener ugc nofollow" target="_blank"> AWS账户</a></li><li id="7030" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated"><a class="ae jv" href="https://console.aws.amazon.com/ec2/v2/home" rel="noopener ugc nofollow" target="_blank"> EC2密钥对</a></li><li id="ead5" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">cim — ( <code class="eh ne nf ng nh b">npm install -g cim</code>)</li><li id="1261" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated"><a class="ae jv" href="https://docs.aws.amazon.com/cli/latest/userguide/installing.html" rel="noopener ugc nofollow" target="_blank"> AWS CLI </a></li></ul><h2 id="b821" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">大量</h2><p id="cb88" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">现在让我们一次安装一个堆栈。</p><ul class=""><li id="b082" class="ks kt hu jy b jz ka kc kd kf ku kj kv kn kw kr kx ky kz la dt translated">VPC</li><li id="ffa1" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">精英公司</li><li id="ca1f" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">无线电数据系统</li><li id="566c" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">electroniccashregister电子现金出纳机</li><li id="9ff1" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">wordpress软件</li></ul><h2 id="a3e1" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">VPC</h2><p id="2d09" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">这创建了<a class="ae jv" href="https://aws.amazon.com/vpc/" rel="noopener ugc nofollow" target="_blank"> Amazon虚拟私有云</a>，我们的ECS集群和RDS数据库将在其中运行。</p><blockquote class="nw nx ny"><p id="98e5" class="jw jx lg jy b jz ka iv kb kc kd iy ke nz kg kh ki oa kk kl km ob ko kp kq kr hn dt translated"><em class="hu">亚马逊虚拟专用云(亚马逊VPC)允许您提供AWS云的逻辑隔离部分，您可以在您定义的虚拟网络中启动AWS资源。</em></p></blockquote><pre class="jk jl jm jn fq oc nh od oe aw of dt"><span id="9fd7" class="ni ma hu nh b fv og oh l oi oj">cd vpc<br/>cim stack-up</span></pre><h2 id="b550" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">精英公司</h2><p id="85a4" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">这创建了一个<a class="ae jv" href="https://aws.amazon.com/ecs/" rel="noopener ugc nofollow" target="_blank">弹性容器服务</a>，我们的EC2将在其中运行。</p><blockquote class="nw nx ny"><p id="398f" class="jw jx lg jy b jz ka iv kb kc kd iy ke nz kg kh ki oa kk kl km ob ko kp kq kr hn dt translated"><em class="hu">Amazon Elastic Container Service(Amazon ECS)是一种高度可扩展的高性能容器编排服务，支持Docker容器，允许您在AWS上轻松运行和扩展容器化应用。</em></p></blockquote><pre class="jk jl jm jn fq oc nh od oe aw of dt"><span id="8a7a" class="ni ma hu nh b fv og oh l oi oj">cd vpc<br/>cim stack-up</span></pre><h2 id="773a" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">无线电数据系统</h2><p id="ee4e" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">这创建了一个我们的Wordpress应用程序将使用的<a class="ae jv" href="https://aws.amazon.com/rds/" rel="noopener ugc nofollow" target="_blank">关系数据库服务</a>数据库集群。</p><blockquote class="nw nx ny"><p id="39bd" class="jw jx lg jy b jz ka iv kb kc kd iy ke nz kg kh ki oa kk kl km ob ko kp kq kr hn dt translated"><em class="hu">亚马逊关系数据库服务(Amazon RDS)使得在云中建立、操作和扩展关系数据库变得非常容易。</em></p></blockquote><pre class="jk jl jm jn fq oc nh od oe aw of dt"><span id="93f0" class="ni ma hu nh b fv og oh l oi oj">cd rds<br/>export DatabaseUsername="???"; export DatabasePassword="???"; cim stack-up</span></pre><h2 id="0cbb" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">electroniccashregister电子现金出纳机</h2><p id="f9a3" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">这创建了一个<a class="ae jv" href="https://aws.amazon.com/ecr/" rel="noopener ugc nofollow" target="_blank">弹性容器注册表</a>，它将保存我们的wordpress服务的docker图像。</p><blockquote class="nw nx ny"><p id="bfe9" class="jw jx lg jy b jz ka iv kb kc kd iy ke nz kg kh ki oa kk kl km ob ko kp kq kr hn dt translated"><em class="hu">Amazon Elastic Container Registry(ECR)是一个完全托管的Docker容器注册表，它使开发人员可以轻松地存储、管理和部署Docker容器映像。</em></p></blockquote><pre class="jk jl jm jn fq oc nh od oe aw of dt"><span id="4e07" class="ni ma hu nh b fv og oh l oi oj">cd ecr<br/>cim stack-up</span></pre><h2 id="daf5" class="ni ma hu bd mb nj nk nl mf nm nn no mj kf np nq ml kj nr ns mn kn nt nu mp nv dt translated">wordpress软件</h2><p id="6bd0" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">在我们发射这个云阵之前。我们需要把我们的Wordpress图片推送到ECR。</p><p id="947f" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><strong class="jy hv">推送图像</strong></p><pre class="jk jl jm jn fq oc nh od oe aw of dt"><span id="15be" class="ni ma hu nh b fv og oh l oi oj">cd wordpress/src</span></pre><p id="fb4f" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><a class="ae jv" href="http://docs.aws.amazon.com/AmazonECR/latest/userguide/Registries.html#registry_auth" rel="noopener ugc nofollow" target="_blank">注册表认证</a></p><ul class=""><li id="b1a1" class="ks kt hu jy b jz ka kc kd kf ku kj kv kn kw kr kx ky kz la dt translated"><code class="eh ne nf ng nh b">aws ecr get-login --registry-ids &lt;account-id&gt;</code></li><li id="43ec" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated">复制/粘贴输出以执行docker登录，还将<code class="eh ne nf ng nh b">/headless-wp</code>附加到存储库url。</li></ul><p id="cf51" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">构建图像</p><ul class=""><li id="fbaf" class="ks kt hu jy b jz ka kc kd kf ku kj kv kn kw kr kx ky kz la dt translated"><code class="eh ne nf ng nh b">docker build -t headless-wp:&lt;version&gt; .</code></li></ul><p id="933b" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><a class="ae jv" href="http://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-push-ecr-image.html" rel="noopener ugc nofollow" target="_blank">推送图像</a></p><ul class=""><li id="ffae" class="ks kt hu jy b jz ka kc kd kf ku kj kv kn kw kr kx ky kz la dt translated"><code class="eh ne nf ng nh b">docker tag headless-wp:&lt;version&gt; &lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/headless-wp:latest</code></li><li id="3013" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated"><code class="eh ne nf ng nh b">docker tag headless-wp:&lt;version&gt; &lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/headless-wp:&lt;version&gt;</code></li><li id="d8e7" class="ks kt hu jy b jz lb kc lc kf ld kj le kn lf kr kx ky kz la dt translated"><code class="eh ne nf ng nh b">docker push &lt;account-id&gt;.dkr.ecr.&lt;region&gt;.amazonaws.com/headless-wp</code></li></ul><p id="f34f" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><strong class="jy hv">更新版本</strong></p><p id="03e8" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">确保<code class="eh ne nf ng nh b">Version</code>参数in _cim.yml与上面的<code class="eh ne nf ng nh b">version</code>标签匹配。ECS任务定义将从ECR中提取图像。</p><p id="b6fd" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><strong class="jy hv">叠加起来</strong></p><p id="f27e" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">一旦<code class="eh ne nf ng nh b">Version</code>被设置，你可以使用<code class="eh ne nf ng nh b">cim stack-up</code>用新版本更新堆栈。</p><pre class="jk jl jm jn fq oc nh od oe aw of dt"><span id="e8f3" class="ni ma hu nh b fv og oh l oi oj">cd wordpress<br/>cim stack-up</span></pre><p id="2fc9" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">祝贺你，你的新Wordpress网站现在可用了。</p><p id="18e0" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">首先运行Wordpress安装向导。</p><p id="59e8" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">接下来启用我们添加的一些插件。</p><p id="22e7" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">添加一些博客文章和页面。</p><p id="c7c4" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">然后查看API。例:<code class="eh ne nf ng nh b">https://&lt;cdn-url&gt;/wp-json/wp/v2/posts</code></p><h1 id="6a85" class="lz ma hu bd mb mc md me mf mg mh mi mj ja mk jb ml jd mm je mn jg mo jh mp mq dt translated">环境变量</h1><p id="ac5a" class="pw-post-body-paragraph jw jx hu jy b jz mr iv kb kc ms iy ke kf mt kh ki kj mu kl km kn mv kp kq kr hn dt translated">祝贺你安装了无头Wordpress。如果你在路上遇到什么困难，请不要犹豫，向我寻求帮助。</p><p id="e132" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">我想解释的一件事是Wordpress环境变量，因为它们确实把所有东西都联系在一起了。它们告诉我们的Wordpress安装关于RDS数据库、媒体S3桶和CloudFront CDN URL。让我们来看看。这些可以在Wordpress栈的<a class="ae jv" href="https://github.com/rgfindl/headless-wordpress/blob/master/wordpress/wp.stack.yml#L233" rel="noopener ugc nofollow" target="_blank">AWS::ECS::task definition</a>中找到。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="nc nd l"/></div></figure><p id="7cd5" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><code class="eh ne nf ng nh b">WORDPRESS_DB_*</code>变量直接来自RDS堆栈。CloudFormation允许您导出可以在其他堆栈中导入的输出变量。</p><p id="bc5a" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated"><code class="eh ne nf ng nh b">WORDPRESS_CONFIG_EXTRA</code>变量是我们配置<a class="ae jv" href="https://wordpress.org/plugins/amazon-s3-and-cloudfront/" rel="noopener ugc nofollow" target="_blank"> WP卸载媒体</a>插件的地方。首先，我们通过<code class="eh ne nf ng nh b">AS3CF_AWS_USE_EC2_IAM_ROLE</code> var告诉它使用我们的任务角色<a class="ae jv" href="https://github.com/rgfindl/headless-wordpress/blob/master/wordpress/wp.stack.yml#L208" rel="noopener ugc nofollow" target="_blank"> AWS::IAM::Role </a>。然后我们使用<code class="eh ne nf ng nh b">AS3CF_SETTINGS</code> var来设置插件。</p></div><div class="ab cl ok ol hc om" role="separator"><span class="on bw bk oo op oq"/><span class="on bw bk oo op oq"/><span class="on bw bk oo op"/></div><div class="hn ho hp hq hr"><p id="00d9" class="pw-post-body-paragraph jw jx hu jy b jz ka iv kb kc kd iy ke kf kg kh ki kj kk kl km kn ko kp kq kr hn dt translated">感谢阅读。我希望你喜欢它！</p></div></div>    
</body>
</html>