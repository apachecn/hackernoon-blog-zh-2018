<html>
<head>
<title>We can do better failure detection in serverless applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们可以在无服务器应用程序中进行更好的故障检测</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/we-can-do-better-failure-detection-in-serverless-applications-e2ff0cb94972?source=collection_archive---------30-----------------------#2018-11-06">https://medium.com/hackernoon/we-can-do-better-failure-detection-in-serverless-applications-e2ff0cb94972?source=collection_archive---------30-----------------------#2018-11-06</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="dbdb" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">传统上，在白盒监控中，错误报告是通过第三方库实现的，第三方库捕捉并向外部服务传达故障，并在出现问题时通知开发人员。我想说的是，对于托管服务来说，这可以通过更少的工作、没有代理和没有性能开销来实现。</p><p id="47b2" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">事实上，有很多理由说明为什么你<strong class="it hv">不应该</strong>在<a class="ae jp" href="https://hackernoon.com/tagged/aws" rel="noopener ugc nofollow" target="_blank"> AWS </a> Lambda中使用经典的错误报告工具。其中最关键的是代码中的错误处理库对特定于Lambda的故障视而不见，比如超时、错误配置的包和内存不足故障。此外，还有一个关于覆盖率的问题——为每个功能实现错误报告需要大量的工作。每当您向基础设施中添加服务时，您都必须为其设置错误跟踪和监控，忘记这样做可能会导致系统中出现盲点。</p><p id="ad2d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">幸运的是，这些问题很容易解决，在大多数情况下，只需要采用新的工具和开发实践。</p><h1 id="bff3" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">关于“可观察性”这个词</h1><p id="3d3f" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">在进入细节之前，理解可观察性背后的思想是很重要的。这并不意味着您将拥有可见性，或者您甚至可以立即监控您的服务。这意味着系统通过输出数据使自己变得可以理解，这使得开发人员可以提出任何关于系统当前或过去状态的任意问题。幸运的是，信息发布方面在AWS中实现得很好，例如，<a class="ae jp" href="https://hackernoon.com/tagged/serverless" rel="noopener ugc nofollow" target="_blank">无服务器</a>用户有机会获得可见性，而无需在他们的代码中专门实现额外的东西。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff kt"><img src="../Images/96416fd0b139e2798970a8b67b332285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SQkSJjw3kkG_Y85k.jpg"/></div></div></figure><p id="36dd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">除了CloudWatch日志，我们还可以利用AWS APIs进行资源发现，利用X-ray和CloudTrail跟踪和连接执行流。</p><h1 id="1e7b" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">今天，我们可以更好地检测故障</h1><p id="b3e6" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">跨所有功能检测故障并将它们与特定调用关联起来、查看日志并提取X射线跟踪的能力显著减少了故障场景中的平均解决时间。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lf"><img src="../Images/e80d3f5e0181a1cf67d6fc577f2ce006.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uOU836gBhcrhedRi.png"/></div></div></figure><h1 id="8de7" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">我们来分解一下</h1><p id="82ba" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">一般来说，基于日志的错误检测和可见性的唯一先决条件是将日志推送到CloudWatch(大多数情况下这是默认的)。从那里开始，我们可以做一些智能模式匹配和推断来检测故障场景。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff lg"><img src="../Images/242db40d115a749e7080d6ee55e44640.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fpSD1DRr0i7IQgbF.png"/></div></div></figure><p id="164a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">最重要的是，日志包含许多其他数据，这些数据指示延迟和内存使用情况，并允许我们将请求与AWS X-ray联系起来，并搜索特定请求的跟踪报告。所有这些使我们能够收集大量的背景信息，以便了解在特定情况下哪里出了问题。</p><figure class="ku kv kw kx fq ky fe ff paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="fe ff kt"><img src="../Images/707497bdff746aad403754a63f6dd747.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*roZZT9tPKucvZR_O.jpg"/></div></div></figure><p id="971a" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">当您为特定的Lambda请求搜索X射线跟踪时，下面是它包含的内容。这使您能够捕捉Lambda函数所涉及的服务中的错误。</p><h1 id="b4d7" class="jq jr hu bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn dt translated">结论</h1><p id="165c" class="pw-post-body-paragraph ir is hu it b iu ko iw ix iy kp ja jb jc kq je jf jg kr ji jj jk ks jm jn jo hn dt translated">随着托管和分布式服务的出现，监控环境必须经历重大变革，才能跟上现代云应用的步伐。目前，devops开销是那些希望在生产中使用无服务器并依赖它运行关键任务应用程序的公司面临的最大障碍之一。我们在Dashbird的团队希望一次解决一个问题。</p></div><div class="ab cl lh li hc lj" role="separator"><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm ln"/><span class="lk bw bk ll lm"/></div><div class="hn ho hp hq hr"><p id="228d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">设置Dashbird大约需要5分钟，之后您将可以全面了解您的无服务器应用程序。在这里报名 <a class="ae jp" href="https://dashbird.io/" rel="noopener ugc nofollow" target="_blank"> <em class="lo">试试吧。</em> </a></p></div></div>    
</body>
</html>