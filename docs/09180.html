<html>
<head>
<title>Functional JavaScript â€” Functors, Monads, and Promises</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å‡½æ•°å¼JavaScript â€”å‡½å­ã€å•å­å’Œæ‰¿è¯º</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/functional-javascript-functors-monads-and-promises-679ce2ab8abe?source=collection_archive---------5-----------------------#2018-11-07">https://medium.com/hackernoon/functional-javascript-functors-monads-and-promises-679ce2ab8abe?source=collection_archive---------5-----------------------#2018-11-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/b39012dde84e772a699570e1fc3b0616.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l7qpSg3swpubAQIv"/></div></div></figure><p id="a2a6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æœ‰äººè¯´è¿‡ä¸€ä¸ª<code class="eh ka kb kc kd b">Promise</code>å°±æ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Monad</code>ã€‚åˆ«äººéƒ½è¯´ä¸€ä¸ª<code class="eh ka kb kc kd b">Promise</code>ä¸æ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Monad</code>ã€‚ä»–ä»¬éƒ½é”™äº†...ä»–ä»¬éƒ½æ˜¯å¯¹çš„ã€‚</p><p id="0983" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å½“ä½ è¯»å®Œè¿™ç¯‡æ–‡ç« æ—¶ï¼Œä½ ä¼šæ˜ç™½ä»€ä¹ˆæ˜¯<code class="eh ka kb kc kd b">Functor</code>å’Œ<code class="eh ka kb kc kd b">Monad</code>ï¼Œä»¥åŠå®ƒä»¬ä¸<code class="eh ka kb kc kd b">Promise</code>çš„ç›¸ä¼¼å’Œä¸åŒä¹‹å¤„ã€‚</p><p id="bf8a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">https://dev.to/joelnet/functional-javascript-å‡½å­-å•å­-æ‰¿è¯º-1pol ã€‚å¦‚æœä½ æƒ³çœ‹åˆ°å½©è‰²çš„ä»£ç ï¼Œè¯·åœ¨DEV.toä¸Šé˜…è¯»ã€‚</p><h1 id="9c3a" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">ä¸ºä»€ä¹ˆæ²¡äººèƒ½è§£é‡Šä¸€ä¸ªå•å­ï¼Ÿ</h1><p id="5700" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">å¦‚æœæ²¡æœ‰ç†è§£å•å­æ‰€éœ€çš„å¿…å¤‡è¯æ±‡ï¼Œå¾ˆéš¾è§£é‡Šå•å­æ˜¯ä»€ä¹ˆã€‚</p><p id="f7b0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘å–œæ¬¢ç†æŸ¥å¾·Â·è´¹æ›¼çš„è¿™ä¸ªè§†é¢‘ï¼Œå½“ä»–è¢«è¦æ±‚æè¿°ä¸¤ä¸ªç£é“ä¹‹é—´â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€æ—¶ã€‚</p><p id="0028" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ•´ä¸ªè§†é¢‘æ˜¯æƒŠäººçš„å’Œä»¤äººå…´å¥‹çš„ï¼Œä½†æ˜¯å¦‚æœä½ å¯¹å­¦ä¹ æœ‰äº›åŒæ¶ï¼Œä½ å¯ä»¥ç›´æ¥è·³åˆ°6:09ã€‚</p><figure class="li lj lk ll fq iv"><div class="bz el l di"><div class="lm ln l"/></div></figure><blockquote class="lo lp lq"><p id="70f9" class="jc jd lr je b jf jg jh ji jj jk jl jm ls jo jp jq lt js jt ju lu jw jx jy jz hn dt translated"><em class="hu">æˆ‘æ— æ³•ç”¨ä½ æ‰€ç†Ÿæ‚‰çš„å…¶ä»–äº‹ç‰©æ¥è§£é‡Šè¿™ç§å¸å¼•åŠ›â€”â€”ç†æŸ¥å¾·Â·è´¹æ›¼@ </em> <a class="ae ke" href="https://www.youtube.com/watch?v=MO0r930Sn_8#t=6m9s" rel="noopener ugc nofollow" target="_blank"> <em class="hu"> 6:09 </em> </a></p></blockquote><p id="f7e1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ‰€ä»¥è®©æˆ‘ä»¬åé€€å‡ æ­¥ï¼Œå­¦ä¹ ç†è§£ä»€ä¹ˆæ˜¯<code class="eh ka kb kc kd b">Monad</code>æ‰€éœ€çš„è¯æ±‡ã€‚</p><h1 id="c5da" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">æˆ‘ä»¬å‡†å¤‡å¥½ç†è§£å‡½å­äº†å—ï¼Ÿ</h1><p id="7363" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">å®šä¹‰:â€œå‡½å­â€æ˜¯â€œå¯æ˜ å°„â€çš„ä¸œè¥¿ï¼Œæˆ–è€…æ˜¯å¯ä»¥åœ¨ä¸€ä¸ªç±»åˆ«ä¸­çš„å¯¹è±¡ä¹‹é—´æ˜ å°„çš„ä¸œè¥¿ã€‚</p><p id="cc6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¥½å§â€¦è¿˜æ²¡æœ‰ã€‚ä½†æ˜¯ä¸è¦å®³æ€•ï¼Œå¦‚æœä½ ç”¨è¿‡<code class="eh ka kb kc kd b">Array</code>çš„<code class="eh ka kb kc kd b">map</code>åŠŸèƒ½ï¼Œä½ å°±å·²ç»ç†Ÿæ‚‰<code class="eh ka kb kc kd b">Functors</code>äº†ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="3613" class="lz kg hu kd b fv ma mb l mc md">[1, 2, 3].map(x =&gt; x * 2) //=&gt; [2, 4, 6]</span></pre><p id="2aff" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨æˆ‘ä»¬èƒ½å¤Ÿå®Œå…¨ç†è§£ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>ä¹‹å‰ï¼Œæˆ‘ä»¬ä¹Ÿå¿…é¡»ç†è§£æˆä¸º<code class="eh ka kb kc kd b">Mappable</code>æ„å‘³ç€ä»€ä¹ˆï¼Œå¹¶ä¸”ç†è§£æˆ‘ä»¬ä¹Ÿå¿…é¡»ç†è§£ä¸€ä¸ª<code class="eh ka kb kc kd b">Category</code>æ˜¯ä»€ä¹ˆã€‚æ‰€ä»¥è®©æˆ‘ä»¬ä»è¿™é‡Œå¼€å§‹ã€‚</p><h1 id="ee91" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated"><strong class="ak">ç±»åˆ«ã€å¯¹è±¡å’Œè´´å›¾(æ€å°„)</strong></h1><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff me"><img src="../Images/00c113d15fffef633e30a53f4c2da309.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/0*OXp6yGo5kW5Onpmm"/></div></figure><p id="ba8e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸€ä¸ª<code class="eh ka kb kc kd b">category</code>ç”±èŠ‚ç‚¹(å¯¹è±¡)å’Œæ€å°„(å‡½æ•°)çš„é›†åˆç»„æˆã€‚ä¸€ä¸ªå¯¹è±¡å¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€URLã€å®¢æˆ·ï¼Œæˆ–è€…ä»»ä½•å…¶ä»–ä½ æƒ³ç»„ç»‡çš„ä¸œè¥¿ã€‚(å›¾ä¸­çš„Xã€Yå’ŒZæ˜¯å¯¹è±¡ã€‚)</p><p id="4dea" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh ka kb kc kd b">map</code>æ˜¯ä¸€ä¸ªå°†æŸç‰©ä»ä¸€ä¸ªå¯¹è±¡è½¬æ¢åˆ°å¦ä¸€ä¸ªå¯¹è±¡çš„å‡½æ•°ã€‚(fï¼Œgï¼Œé›¾æ˜¯è´´å›¾)ã€‚ğŸ”è°·æ­Œæç¤º:å¯¹è±¡ä¹‹é—´çš„ä¸€ä¸ª<code class="eh ka kb kc kd b">map</code>è¢«ç§°ä¸ºä¸€ä¸ª<code class="eh ka kb kc kd b">Morphism</code>ã€‚</p><p id="c0b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç¤ºä¾‹:ä½¿ç”¨<code class="eh ka kb kc kd b">toString()</code>æ–¹æ³•å¯ä»¥å°†å¯¹è±¡<code class="eh ka kb kc kd b">Number Type</code>ä¸­çš„å¯¹è±¡è½¬æ¢ä¸ºå¯¹è±¡<code class="eh ka kb kc kd b">String Type</code>ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="6b00" class="lz kg hu kd b fv ma mb l mc md">// A map of Number -&gt; String<br/>const numberToString = num =&gt; num.toString()</span></pre><p id="2fa8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½ ä¹Ÿå¯ä»¥åˆ›å»º<code class="eh ka kb kc kd b">maps</code>å›è‡ªå·±çš„å¯¹è±¡æˆ–æ›´å¤æ‚çš„å¯¹è±¡ç±»å‹ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="31df" class="lz kg hu kd b fv ma mb l mc md">// A map of Number -&gt; Number<br/>const double = num =&gt; num * 2</span><span id="ffbe" class="lz kg hu kd b fv mf mb l mc md">// A map of Array -&gt; Number<br/>const arrayToLength = array =&gt; array.length</span><span id="e2ab" class="lz kg hu kd b fv mf mb l mc md">// A map of URL -&gt; Promise (JSON)<br/>const urlToJson = url =&gt;<br/>  fetch(url)<br/>    .then(response =&gt; response.json())</span></pre><p id="e574" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ‰€ä»¥ä¸€ä¸ªå¯¹è±¡å¯ä»¥å¾ˆç®€å•ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•°å­—æˆ–è€…ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯¹è±¡ä¹Ÿå¯ä»¥æ›´æŠ½è±¡ï¼Œå¦‚ç”¨æˆ·åã€ç”¨æˆ·API URLã€ç”¨æˆ·API HTTPè¯·æ±‚ã€ç”¨æˆ·APIå“åº”ã€ç”¨æˆ·APIå“åº”JSONã€‚ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨æ¯ä¸ªå¯¹è±¡ä¹‹é—´åˆ›å»ºæ˜ å°„æˆ–å˜å½¢æ¥è·å¾—æˆ‘ä»¬æƒ³è¦çš„æ•°æ®ã€‚</p><p id="e2cb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ€å°„çš„ä¾‹å­:</p><ul class=""><li id="a0a7" class="mg mh hu je b jf jg jj jk jn mi jr mj jv mk jz ml mm mn mo dt translated">ç”¨æˆ·å-&gt;ç”¨æˆ·API Url</li><li id="cbe4" class="mg mh hu je b jf mp jj mq jn mr jr ms jv mt jz ml mm mn mo dt translated">ç”¨æˆ·API Url -&gt;ç”¨æˆ·API HTTPè¯·æ±‚</li><li id="4b6e" class="mg mh hu je b jf mp jj mq jn mr jr ms jv mt jz ml mm mn mo dt translated">ç”¨æˆ·API HTTPè¯·æ±‚-&gt;ç”¨æˆ·APIå“åº”</li><li id="5621" class="mg mh hu je b jf mp jj mq jn mr jr ms jv mt jz ml mm mn mo dt translated">ç”¨æˆ·APIå“åº”-&gt;ç”¨æˆ·APIå“åº”JSON</li></ul><p id="9a10" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ğŸ”Googleæç¤º:<code class="eh ka kb kc kd b">Function Composition</code>æ˜¯ä¸€ç§ç»„åˆå¤šä¸ª<code class="eh ka kb kc kd b">map</code>æˆ–<code class="eh ka kb kc kd b">morphisms</code>æ¥åˆ›å»ºæ–°çš„<code class="eh ka kb kc kd b">maps</code>çš„æ–¹æ³•ã€‚ä½¿ç”¨<code class="eh ka kb kc kd b">Function Composition</code>æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªä»<code class="eh ka kb kc kd b">Username</code>ç›´æ¥åˆ°<code class="eh ka kb kc kd b">User API Response JSON</code>çš„åœ°å›¾</p><h1 id="c194" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">å›åˆ°å‡½å­</h1><p id="450c" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">ç°åœ¨æˆ‘ä»¬æ˜ç™½äº†æˆä¸º<code class="eh ka kb kc kd b">Mappable</code>æ„å‘³ç€ä»€ä¹ˆï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥æ˜ç™½ä»€ä¹ˆæ˜¯<code class="eh ka kb kc kd b">Functor</code>äº†ã€‚</p><p id="29e0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>æ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Mappable</code>çš„ä¸œè¥¿ï¼Œæˆ–è€…å¯ä»¥åœ¨ä¸€ä¸ªç±»åˆ«ä¸­çš„å¯¹è±¡ä¹‹é—´æ˜ å°„çš„ä¸œè¥¿ã€‚</p><p id="f637" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¸€ä¸ª<code class="eh ka kb kc kd b">Array</code>æ˜¯<code class="eh ka kb kc kd b">Mappable</code>ï¼Œæ‰€ä»¥æ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘å°†ä¸€ä¸ª<code class="eh ka kb kc kd b">Array of Numbers</code>å˜å½¢ä¸ºä¸€ä¸ª<code class="eh ka kb kc kd b">Array of Strings</code>ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="9b59" class="lz kg hu kd b fv ma mb l mc md">const numberToString = num =&gt; num.toString()</span><span id="644b" class="lz kg hu kd b fv mf mb l mc md">const array = [1, 2, 3]</span><span id="5e9a" class="lz kg hu kd b fv mf mb l mc md">array.map(numberToString)<br/>//=&gt; ["1", "2", "3"]</span></pre><p id="f71e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ³¨æ„:ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>çš„ç‰¹æ€§ä¹‹ä¸€æ˜¯å®ƒä»¬æ€»æ˜¯ä¿æŒåŒä¸€ç±»å‹çš„<code class="eh ka kb kc kd b">Functor</code>ã€‚æ‚¨å¯ä»¥å°†åŒ…å«<code class="eh ka kb kc kd b">Strings</code>çš„<code class="eh ka kb kc kd b">Array</code>å˜å½¢ä¸º<code class="eh ka kb kc kd b">Numbers</code>æˆ–ä»»ä½•å…¶ä»–å¯¹è±¡ï¼Œä½†æ˜¯<code class="eh ka kb kc kd b">map</code>å°†ç¡®ä¿å®ƒå§‹ç»ˆæ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Array</code>ã€‚ä½ ä¸èƒ½æŠŠ<code class="eh ka kb kc kd b">Number</code>çš„ä¸€ä¸ª<code class="eh ka kb kc kd b">map</code>å˜æˆä»…ä»…ä¸€ä¸ª<code class="eh ka kb kc kd b">Number</code>ã€‚</p><p id="f25e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™ç§<code class="eh ka kb kc kd b">Mappable</code>ç”¨é€”æ‰©å±•åˆ°å…¶ä»–ç‰©ä½“ä¸Šï¼è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªç®€å•çš„<code class="eh ka kb kc kd b">Thing</code>çš„ä¾‹å­ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="63be" class="lz kg hu kd b fv ma mb l mc md">const Thing = value =&gt; ({<br/>  value<br/>})</span></pre><p id="34f1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœæˆ‘ä»¬æƒ³è®©<code class="eh ka kb kc kd b">Thing</code>åƒ<code class="eh ka kb kc kd b">Array</code>ä¸€æ ·å¯æ˜ å°„ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™å®ƒä¸€ä¸ª<code class="eh ka kb kc kd b">map</code>å‡½æ•°ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="c443" class="lz kg hu kd b fv ma mb l mc md">const Thing = value =&gt; ({<br/>  value,<br/>  map: morphism =&gt; Thing(morphism(value))<br/>//                 ----- -------- -----<br/>//                /        |            \<br/>// always a Thing          |             value to be morphed<br/>//                         |<br/>//             Morphism passed into map<br/>})</span><span id="f806" class="lz kg hu kd b fv mf mb l mc md">const thing1 = Thing(1)               // { value: 1 }<br/>const thing2 = thing1.map(x =&gt; x + 1) // { value: 2 }</span></pre><p id="8d4f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">é‚£æ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>ï¼çœŸçš„å°±è¿™ä¹ˆç®€å•ã€‚</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/e0d87ebb8a09490e037e85e1b4f4e6b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:556/0*29o2qihaLTJwbPjo"/></div></figure><p id="eda9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ğŸ”è°·æ­Œæç¤º:æˆ‘ä»¬åˆ›å»ºçš„<code class="eh ka kb kc kd b">"Thing"</code> <code class="eh ka kb kc kd b">Functor</code>è¢«ç§°ä¸º<code class="eh ka kb kc kd b">Identity</code>ã€‚</p><h1 id="1390" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">å›åˆ°å•å­ä¸Š</h1><p id="268e" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">æœ‰æ—¶å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå·²ç»åŒ…è£…å¥½çš„å€¼ã€‚è¿™å¯èƒ½ä¸æ–¹ä¾¿ä¸<code class="eh ka kb kc kd b">Functor</code>ä¸€èµ·ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šå°†<code class="eh ka kb kc kd b">Functor</code>é‡æ–°åŒ…è£¹åœ¨å¦ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>ä¸­ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="0be9" class="lz kg hu kd b fv ma mb l mc md">const getThing = () =&gt; Thing(2)</span><span id="83c3" class="lz kg hu kd b fv mf mb l mc md">const thing1 = Thing(1)</span><span id="c4f2" class="lz kg hu kd b fv mf mb l mc md">thing1.map(getThing) //=&gt; Thing (Thing ("Thing 2"))</span></pre><p id="d6a8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¯¥è¡Œä¸ºä¸<code class="eh ka kb kc kd b">Array</code>çš„è¡Œä¸ºç›¸åŒã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="fa73" class="lz kg hu kd b fv ma mb l mc md">const doSomething = x =&gt; [x, x + 100]<br/>const list = [1, 2, 3]</span><span id="70f7" class="lz kg hu kd b fv mf mb l mc md">list.map(doSomething) //=&gt; [[1, 101], [2, 102], [3, 103]]</span></pre><p id="49eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™å°±æ˜¯<code class="eh ka kb kc kd b">flatMap</code>æ´¾ä¸Šç”¨åœºçš„åœ°æ–¹ã€‚å®ƒç±»ä¼¼äº<code class="eh ka kb kc kd b">map</code>ï¼Œé™¤äº†æ€å°„ä¹Ÿè¢«æœŸæœ›æ‰§è¡ŒåŒ…è£…å€¼çš„å·¥ä½œã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="22c5" class="lz kg hu kd b fv ma mb l mc md">const Thing = value =&gt; ({<br/>  value,<br/>  map: morphism =&gt; Thing(morphism(value)),<br/>  flatMap: morphism =&gt; morphism(value)<br/>})</span><span id="8bce" class="lz kg hu kd b fv mf mb l mc md">const thing1 = Thing(1)                          //=&gt; Thing (1)<br/>const thing2 = thing1.flatMap(x =&gt; Thing(x + 1)) //=&gt; Thing (2)</span></pre><p id="96e2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™æ ·çœ‹èµ·æ¥æ›´å¥½ï¼</p><p id="d9b8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å½“ä½ å¯èƒ½éœ€è¦ä»<code class="eh ka kb kc kd b">Just</code>åˆ‡æ¢åˆ°<code class="eh ka kb kc kd b">Nothing</code>æ—¶ï¼Œè¿™åœ¨<code class="eh ka kb kc kd b">Maybe</code>ä¸­ä¼šæ´¾ä¸Šç”¨åœºï¼Œä¾‹å¦‚å½“é“å…·ä¸¢å¤±æ—¶ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="395b" class="lz kg hu kd b fv ma mb l mc md">import Just from 'mojiscript/type/Just'<br/>import Nothing from 'mojiscript/type/Nothing'</span><span id="e78e" class="lz kg hu kd b fv mf mb l mc md">const prop = (prop, obj) =&gt;<br/>  prop in obj<br/>    ? Just(obj[prop])<br/>    : Nothing</span><span id="ecc9" class="lz kg hu kd b fv mf mb l mc md">Just({ name: 'Moji' }).flatMap(x =&gt; prop('name', x))<br/>//=&gt; Just ("Moji")</span><span id="ea38" class="lz kg hu kd b fv mf mb l mc md">Just({}).flatMap(x =&gt; prop('name', x))<br/>//=&gt; Nothing</span></pre><p id="2506" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¯¥ä»£ç å¯ä»¥ç¼©çŸ­ä¸º:</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="cee7" class="lz kg hu kd b fv ma mb l mc md">const Just = require('mojiscript/type/Just')<br/>const Nothing = require('mojiscript/type/Nothing')<br/>const { fromNullable } = require('mojiscript/type/Maybe')</span><span id="a9c0" class="lz kg hu kd b fv mf mb l mc md">const prop = prop =&gt; obj =&gt; fromNullable(obj[prop])</span><span id="413d" class="lz kg hu kd b fv mf mb l mc md">Just({ name: 'Moji' }).flatMap(prop('name'))<br/>//=&gt; Just ("Moji")</span><span id="47da" class="lz kg hu kd b fv mf mb l mc md">Just({}).flatMap(prop('name'))<br/>//=&gt; Nothing</span></pre><p id="cd97" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ğŸ”Googleæç¤º:è¿™ä¸ªä»£ç ç¼©çŸ­æ˜¯é€šè¿‡<code class="eh ka kb kc kd b">currying</code>ã€<code class="eh ka kb kc kd b">partial application</code>å’Œ<code class="eh ka kb kc kd b">point-free style</code>å®ç°çš„ã€‚</p><p id="8423" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘å¸Œæœ›åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªæ¯”ä½ æœ€åˆè®¤ä¸ºçš„æ›´å®¹æ˜“çš„æ—…ç¨‹ã€‚æˆ‘ä»¬å·²ç»è®²è¿°äº†<code class="eh ka kb kc kd b">Functors</code>å’Œ<code class="eh ka kb kc kd b">Monads</code>ä»¥åŠæ¥ä¸‹æ¥çš„<code class="eh ka kb kc kd b">Promise</code>ï¼</p><h1 id="90dd" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">æ‰¿è¯º</h1><p id="a907" class="pw-post-body-paragraph jc jd hu je b jf ld jh ji jj le jl jm jn lf jp jq jr lg jt ju jv lh jx jy jz hn dt translated">å¦‚æœè¿™äº›ä»£ç çœ‹èµ·æ¥å¾ˆç†Ÿæ‚‰ï¼Œé‚£æ˜¯å› ä¸º<code class="eh ka kb kc kd b">Promise</code>çš„è¡Œä¸ºç±»ä¼¼äº<code class="eh ka kb kc kd b">map</code>å’Œ<code class="eh ka kb kc kd b">flatMap</code>ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="8ea3" class="lz kg hu kd b fv ma mb l mc md">const double = num =&gt; num * 2</span><span id="f6ef" class="lz kg hu kd b fv mf mb l mc md">const thing1 = Thing(1)             //=&gt; Thing (1)<br/>const promise1 = Promise.resolve(1) //=&gt; Promise (1)</span><span id="580d" class="lz kg hu kd b fv mf mb l mc md">thing1.map(double)    //=&gt; Thing (2)<br/>promise1.then(double) //=&gt; Promise (2)</span><span id="267a" class="lz kg hu kd b fv mf mb l mc md">thing1.flatMap(x =&gt; Thing(double(x)))<br/>//=&gt; Thing (2)</span><span id="1927" class="lz kg hu kd b fv mf mb l mc md">promise1.then(x =&gt; Promise.resolve(double(x)))<br/>//=&gt; Promise (2)</span></pre><p id="a990" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå½“è¿”å›ä¸€ä¸ªå±•å¼€çš„å€¼æ—¶ï¼Œ<code class="eh ka kb kc kd b">Promise</code>æ–¹æ³•<code class="eh ka kb kc kd b">then</code>åƒ<code class="eh ka kb kc kd b">map</code>ä¸€æ ·å·¥ä½œï¼Œå½“å®ƒè¢«åŒ…è£…åœ¨<code class="eh ka kb kc kd b">Promise</code>ä¸­æ—¶ï¼Œåƒ<code class="eh ka kb kc kd b">flatMap</code>ä¸€æ ·å·¥ä½œã€‚è¿™æ ·ï¼Œ<code class="eh ka kb kc kd b">Promise</code>ç±»ä¼¼äº<code class="eh ka kb kc kd b">Functor</code>å’Œ<code class="eh ka kb kc kd b">Monad</code>ã€‚</p><p id="2427" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™ä¹Ÿæ˜¯å®ƒä¸ä¼—ä¸åŒçš„åœ°æ–¹ã€‚</p><pre class="li lj lk ll fq lv kd lw lx aw ly dt"><span id="32ac" class="lz kg hu kd b fv ma mb l mc md">thing1.map(x =&gt; Thing(x + 1))              // Thing (Thing (2))<br/>promise1.then(x =&gt; Promise.resolve(x + 1)) // Promise (2)</span><span id="fd17" class="lz kg hu kd b fv mf mb l mc md">thing1.flatMap(x =&gt; x + 1) //=&gt; 2<br/>promise1.then(x =&gt; x + 1)  //=&gt; Promise (2)</span></pre><p id="7190" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¦‚æœæˆ‘æƒ³åŒ…è£…ä¸€ä¸ªå€¼ä¸¤æ¬¡(æƒ³æƒ³åµŒå¥—çš„<code class="eh ka kb kc kd b">Arrays</code>)æˆ–è€…æ§åˆ¶è¿”å›ç±»å‹ï¼Œæˆ‘ä¸èƒ½ç”¨<code class="eh ka kb kc kd b">Promise</code>ã€‚è¿™æ ·ï¼Œå®ƒè¿åäº†<code class="eh ka kb kc kd b">Functor</code>å®šå¾‹ï¼Œä¹Ÿè¿åäº†<code class="eh ka kb kc kd b">Monad</code>å®šå¾‹ã€‚</p><h1 id="f0ea" class="kf kg hu bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc dt translated">æ‘˜è¦</h1><ul class=""><li id="9cef" class="mg mh hu je b jf ld jj le jn mv jr mw jv mx jz ml mm mn mo dt translated">ä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>æ˜¯ä¸€ä¸ª<code class="eh ka kb kc kd b">Mappable</code>æˆ–è€…å¯ä»¥åœ¨ä¸€ä¸ªç±»åˆ«ä¸­çš„å¯¹è±¡ä¹‹é—´æ˜ å°„çš„ä¸œè¥¿ã€‚</li><li id="1c2f" class="mg mh hu je b jf mp jj mq jn mr jr ms jv mt jz ml mm mn mo dt translated">ä¸€ä¸ª<code class="eh ka kb kc kd b">Monad</code>ç±»ä¼¼äºä¸€ä¸ª<code class="eh ka kb kc kd b">Functor</code>ï¼Œä½†æ˜¯åœ¨ç±»åˆ«ä¹‹é—´æ˜¯<code class="eh ka kb kc kd b">Flat Mappable</code>ã€‚</li><li id="6e3f" class="mg mh hu je b jf mp jj mq jn mr jr ms jv mt jz ml mm mn mo dt translated"><code class="eh ka kb kc kd b">flatMap</code>ä¸<code class="eh ka kb kc kd b">map</code>ç›¸ä¼¼ï¼Œä½†æ˜¯äº§ç”Ÿäº†å¯¹æ˜ å°„å‡½æ•°è¿”å›ç±»å‹åŒ…è£…çš„æ§åˆ¶ã€‚</li><li id="b103" class="mg mh hu je b jf mp jj mq jn mr jr ms jv mt jz ml mm mn mo dt translated">æ‰¿è¯ºè¿åäº†<code class="eh ka kb kc kd b">Functor</code>å’Œ<code class="eh ka kb kc kd b">Monad</code>å®šå¾‹ï¼Œä½†ä»æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„ã€‚ç›¸åŒä½†ä¸åŒã€‚</li></ul><p id="5f00" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç»§ç»­é˜…è¯»:<a class="ae ke" href="https://dev.to/joelnet/null-the-billion-dollar-mistake-maybe-just-nothing-1cak" rel="noopener ugc nofollow" target="_blank">ç©ºï¼Œâ€œåäº¿ç¾å…ƒçš„é”™è¯¯â€ï¼Œä¹Ÿè®¸ä»€ä¹ˆéƒ½æ²¡æœ‰</a></p><p id="6548" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘çš„æ–‡ç« å±•ç¤ºäº†å¯¹å‡½æ•°å¼JavaScriptçš„çƒ­çˆ±ã€‚å¦‚æœä½ éœ€è¦æ›´å¤šçš„FPï¼Œåœ¨è¿™é‡Œæˆ–è€…åœ¨Twitterä¸Šå…³æ³¨æˆ‘<a class="ae ke" href="https://twitter.com/joelnet" rel="noopener ugc nofollow" target="_blank"> @joelnet </a>ï¼</p><p id="acde" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ„Ÿè°¢æˆ‘çš„å¥½å‹Joonè¯æ˜äº†è¿™ä¸€ç‚¹:)</p><figure class="li lj lk ll fq iv fe ff paragraph-image"><div class="fe ff my"><img src="../Images/30b90d46a9b2745d8e966e41afc4649a.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*mDOf9L4OtuaRexe8.jpg"/></div></figure></div></div>    
</body>
</html>