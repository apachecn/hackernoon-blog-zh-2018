<html>
<head>
<title>Using Neovim for Javascript Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Neovim进行Javascript开发</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/using-neovim-for-javascript-development-4f07c289d862?source=collection_archive---------6-----------------------#2018-11-07">https://medium.com/hackernoon/using-neovim-for-javascript-development-4f07c289d862?source=collection_archive---------6-----------------------#2018-11-07</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/e13c5ec00bc14ab38f697e071b09f51f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xEmTjxzCj1w7YKqHdxSY_Q.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Courtesy of Fotis Fotopoulos on Unsplash</figcaption></figure><p id="467f" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于我们许多人来说，Neovim已经成为一种绝对的必需品。在过去的几年里，我使用Neovim编程、写作，甚至作为一个窗口管理器。最近几周，我觉得有必要编辑大量的Javascript文件，并且需要配置Neovim来处理Javascript。</p><p id="81ed" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">本文详细介绍了我用来为Javascript编辑、完成和林挺配置Neovim的所有插件和配置。</p><p id="58ea" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">首先，我们需要从Python 安装<a class="ae ke" href="https://github.com/neovim/python-client" rel="noopener ugc nofollow" target="_blank"> Neovim包。我们还需要Node的最新版本和一些Neovim的基础知识。</a></p><p id="1964" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我使用<a class="ae ke" href="https://github.com/junegunn/vim-plug" rel="noopener ugc nofollow" target="_blank"> Vim-Plug </a>作为我的插件管理器已经有一段时间了，我将在这里使用它，但是你可以使用其他任何一个(比如Vundle或Pathogen)。</p><p id="9145" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我做的第一件事是导航到我的Neovim配置文件。与Vim 8之前的版本不同，我们不寻找<em class="kf">。vimrc </em>文件。在Neovim中，我们正在寻找<strong class="ji hv"> <em class="kf"> ~/。config/nvim/init.vim </em> </strong>文件。</p><p id="9eef" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">要使用Vundle安装新插件，我们需要在配置文件中包含以下代码块:</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="db51" class="kp kq hu kl b fv kr ks l kt ku"><br/>call plug#begin()<br/>call plug#end()<br/></span></pre><p id="16a5" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这两行之间的所有内容都是需要安装的引用插件。</p><h1 id="aff5" class="kv kq hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">自动完成</h1><p id="63e1" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hn dt translated">我想安装的第一件事是某种代码分析器，它可以帮助我自动完成。我决定用<em class="kf"> Tern换Vim </em>。</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="47f1" class="kp kq hu kl b fv kr ks l kt ku">call plug#begin()<br/>Plug ‘ternjs/tern_for_vim’, { ‘do’: ‘npm install &amp;&amp; npm install -g tern’ }<br/>call plug#end()</span></pre><p id="4ec3" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">对于那些不熟悉TernJs的人来说，它是一个独立的、独立于编辑器的JavaScript分析器，可以用来改进现有编辑器的JavaScript集成。</p><p id="699e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">此外，正如我们所看到的，我还安装了插件依赖项和一个全局tern包。这只是为了让插件与我电脑上安装的全局ternjs包保持同步。</p><p id="744c" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">每当我们想要真正安装我们添加到列表中的插件时，只需在Neovim中运行<strong class="ji hv"> <em class="kf"> :PlugInstall </em> </strong>即可，他会为我们完成所有工作。</p><p id="ad45" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">现在，tern已经安装好了，我们必须实际配置它，这样他才能知道要检查什么以及在哪里检查。于是，在我创造了一个<strong class="ji hv"> <em class="kf">。tern-config </em> </strong>文件在我的主目录下，内容如下:</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="1dd4" class="kp kq hu kl b fv kr ks l kt ku"><br/>{<br/>  “plugins”: <br/>  {<br/>    “node”: {}<br/>  }<br/>}</span></pre><p id="4ef9" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我创建了一个全局配置文件，但是这也可以通过将文件添加到项目的根目录中来本地完成。运行<strong class="ji hv"> <em class="kf">之后:PlugInstall </em> </strong>我们现在准备开始使用tern。为此，我们使用全补命令<strong class="ji hv"><em class="kf">&lt;C-x&gt;&lt;C-o&gt;</em></strong>来触发补全候选。</p><p id="9239" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这是伟大的，但它只是抓到了表面。Neovim给我们带来了异步执行。那么，当我们想要自动补全时，为什么我们需要使用Omnicompletion命令呢？尼奥维姆应该为我们做到这一点。</p><p id="2e87" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">这就是<a class="ae ke" href="https://github.com/Shougo/deoplete.nvim" rel="noopener ugc nofollow" target="_blank">de complete</a>开始发挥作用的地方。</p><p id="ac30" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Deoplete是一个非常酷的插件，它为neovim/Vim8提供了一个可扩展的异步完成框架。</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="6404" class="kp kq hu kl b fv kr ks l kt ku"><br/>call plug#begin()<br/> Plug ‘Shougo/deoplete.nvim’, { ‘do’: function(‘DoRemote’) }<br/> Plug ‘ternjs/tern_for_vim’, { ‘do’: ‘npm install &amp;&amp; npm install -g tern’ }<br/> Plug ‘carlitux/deoplete-ternjs’<br/>call plug#end()</span><span id="3bed" class="kp kq hu kl b fv lx ks l kt ku">let g:deoplete#enable_at_startup = 1<br/>let g:deoplete#enable_ignore_case = 1<br/>let g:deoplete#enable_smart_case = 1<br/>let g:deoplete#enable_camel_case = 1<br/>let g:deoplete#enable_refresh_always = 1<br/>let g:deoplete#max_abbr_width = 0<br/>let g:deoplete#max_menu_width = 0<br/>let g:deoplete#omni#input_patterns = get(g:,’deoplete#omni#input_patterns’,{})</span><span id="68ff" class="kp kq hu kl b fv lx ks l kt ku">let g:tern_request_timeout = 1<br/>let g:tern_request_timeout = 6000<br/>let g:tern#command = [“tern”]<br/>let g:tern#arguments = [“ — persistent”]</span></pre><p id="ac04" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">Deoplete允许其他人连接到它，并在屏幕上为候选人提供完整信息。它预配置了文件路径完成、ctags完成和出现在每个vim缓冲区中的字符串。de complete-ternjs是另一个插入de complete的包，它使用tern js服务器提供完成。</p><p id="ab87" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我们还为Deoplete和tern增加了许多配置。这些帮助我们塑造我们的插件行为。</p><p id="375e" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">在再次运行<strong class="ji hv"><em class="kf">:plug install</em></strong>l之后，我们应该有完全工作的异步完成。尝试输入一些Javascript相关的东西，自动补全应该会自动触发。</p><h1 id="9859" class="kv kq hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">林挺</h1><p id="9c02" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hn dt translated">林挺是我想做的下一件事。因为我不是一个Javascript天才，林挺真的在我需要的地方。这让我对代码更加放松，因为我知道任何错误都会很快被发现。</p><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/1dad74a95fa6f2aad7fe36eb502da5d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*1Kf20wq3t2f5L3XoeYBB7g.png"/></div></figure><p id="c003" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">我决定用<a class="ae ke" href="https://github.com/neomake/neomake" rel="noopener ugc nofollow" target="_blank"> Neomake </a>，因为它已经被使用和证明。我补充了以下内容:</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="95f8" class="kp kq hu kl b fv kr ks l kt ku">Plug ‘neomake/neomake’, { ‘on’: ‘Neomake’ }</span></pre><p id="074b" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">添加到我的插件列表</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="8cf9" class="kp kq hu kl b fv kr ks l kt ku">let g:neomake_javascript_enabled_makers = [‘eslint’]</span></pre><p id="4831" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">到配置。我们使用的是<strong class="ji hv"> <em class="kf"> eslint </em> </strong>，但是我们可以根据需要在列表中添加或删除linters。</p><h1 id="1ee8" class="kv kq hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">文件跳转</h1><p id="6cd9" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hn dt translated">最后，我还想要某种“跳转到声明”的功能。在Vim中，我们通常使用Ctags来实现这种效果。但是<a class="ae ke" href="https://github.com/ludovicchabant/vim-gutentags" rel="noopener ugc nofollow" target="_blank"> vim-gutentags </a>负责管理vim中急需的标记文件。它会在你工作的时候(重新)生成标签文件，同时完全不碍事。这将省去我们手动生成和重新生成标记文件的工作。</p><p id="958d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">因此，我在插件列表中添加了:</p><pre class="kg kh ki kj fq kk kl km kn aw ko dt"><span id="f921" class="kp kq hu kl b fv kr ks l kt ku">Plug ‘ludovicchabant/vim-gutentags’</span></pre><p id="c98d" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">再次运行<strong class="ji hv"> <em class="kf"> :PlugInstall </em> </strong>并打开一个项目后，我们应该能够使用ctags跳转到定义。只需将鼠标悬停在已定义的变量或导入语句上，然后键入<strong class="ji hv"><em class="kf">&lt;【C-】&gt;</em></strong>。</p><h1 id="3b4b" class="kv kq hu bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr dt translated">结论</h1><p id="c683" class="pw-post-body-paragraph jg jh hu ji b jj ls jl jm jn lt jp jq jr lu jt ju jv lv jx jy jz lw kb kc kd hn dt translated">这是我对Javascript编程的基本设置。有更多的插件和配置可以用来把这变成一个更好的体验。</p><p id="6199" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">你在用Neovim进行Javascript开发时使用了哪些插件和配置？</p></div><div class="ab cl lz ma hc mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="hn ho hp hq hr"><figure class="kg kh ki kj fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mg"><img src="../Images/053f3cacbb0c0a4d951a5d9075cfbc3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4ZjfXGpUJUWfbJIlMY0XtA.png"/></div></div></figure><p id="aa46" class="pw-post-body-paragraph jg jh hu ji b jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd hn dt translated">想了解更多关于Vim的知识？想学习如何将其用作IDE？看看我的新书<a class="ae ke" href="https://leanpub.com/anidecalledvim/" rel="noopener ugc nofollow" target="_blank">一个叫做Vim </a>的IDE。从基本的Vim使用到文件查找、自动完成、文件管理器等等，它都有。</p></div></div>    
</body>
</html>