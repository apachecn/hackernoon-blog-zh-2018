<html>
<head>
<title>🍝 Cooking a Deliveroo clone with Next.js (React), GraphQL, Strapi and Stripe</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">🍝用Next.js (React)、GraphQL、Strapi和Stripe制作一个Deliveroo克隆</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/cooking-a-deliveroo-clone-with-next-js-react-graphql-strapi-and-stripe-3159b255bd45?source=collection_archive---------12-----------------------#2018-11-12">https://medium.com/hackernoon/cooking-a-deliveroo-clone-with-next-js-react-graphql-strapi-and-stripe-3159b255bd45?source=collection_archive---------12-----------------------#2018-11-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="bed2" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">本教程改编自Pierre的Nuxt和Strapi Deliveroo克隆版本。</h2></div><p id="a4a7" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">本教程将被改编为在前端使用<strong class="jm hv">next . js</strong>(React)over Nuxt(Vue)，并使用<strong class="jm hv"> GraphQL、Stripe、Strapi和React Context </strong>。</p><p id="910b" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">准备开发一个<strong class="jm hv"> Deliveroo克隆人，使用令人惊叹的技术:</strong><a class="ae jj" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jm hv">next . js</strong></a><strong class="jm hv">(</strong><a class="ae jj" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jm hv">React</strong></a><strong class="jm hv">)，</strong><a class="ae jj" href="https://graphql.org/" rel="noopener ugc nofollow" target="_blank"><strong class="jm hv">graph QL</strong></a><strong class="jm hv">，</strong> <a class="ae jj" href="http://stripe.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv">条纹</strong> </a> <strong class="jm hv">和</strong> <a class="ae jj" href="https://strapi.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv"> Strapi </strong>从注册到点餐，你将让用户发现餐馆、菜肴并选择他们的快乐套餐。</a></p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff kg"><img src="../Images/17fd4f8e0a6c2ef378c3a731f2e29db4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cTvsoNrSpjdQjyXU.png"/></div></div></figure><p id="9f22" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">最终结果的<strong class="jm hv">演示应该让你饿了:</strong></p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div class="fe ff ks"><img src="../Images/867ca50eb3bc425b78c80a9ca9fc4aff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*dWtsLk6F7IO0fiXH.gif"/></div></figure><p id="ef8c" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><em class="kt">注:</em> <strong class="jm hv"> <em class="kt">源代码</em> </strong> <em class="kt">是</em> <strong class="jm hv"> <em class="kt">在GitHub</em></strong><em class="kt">:</em><a class="ae jj" href="https://github.com/strapi/strapi-examples/tree/master/nextjs-react-strapi-deliveroo-clone-tutorial" rel="noopener ugc nofollow" target="_blank"><em class="kt">https://GitHub . com/strapi/strapi-examples/tree/master/next js-react-strapi-deliver oo-clone-tutorial</em></a>。</p><p id="66c7" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">最终产品的截图:</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/5c457513f87412e5623ac954806f4010.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mHVe0cwQKAg509V5.png"/></div></div></figure><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/2168e665dadf31148bb7525b456dc7a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bXnMecSaw1iLhbPX.png"/></div></div></figure><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/869cc8bc8f68c19da8bbccc5c4d145d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a0ojPbGk4FeYRaW9.png"/></div></div></figure><h1 id="0dfa" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">斯特拉皮:</h1><p id="01e4" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated"><a class="ae jj" href="https://github.com/strapi/strapi" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv"> Strapi </strong> </a>是最先进的开源<strong class="jm hv"> Node.js无头内容管理系统</strong>用于快速高效地构建可扩展、安全、生产就绪的api，节省开发人员无数的开发时间。</p><p id="3934" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">凭借其可扩展的插件系统，它提供了大量的内置功能:管理面板、认证和权限管理、内容管理、API生成器等。与在线CMS不同，<strong class="jm hv"> Strapi是100%开源的</strong>(看看<a class="ae jj" href="https://github.com/strapi/strapi" rel="noopener ugc nofollow" target="_blank"> GitHub库</a>)，这意味着:</p><ul class=""><li id="75a5" class="ls lt hu jm b jn jo jq jr jt lu jx lv kb lw kf lx ly lz ma dt translated">Strapi是完全自由的。</li><li id="8e2f" class="ls lt hu jm b jn mb jq mc jt md jx me kb mf kf lx ly lz ma dt translated">你可以<strong class="jm hv">在你自己的服务器</strong>上托管它，所以你拥有数据。</li><li id="3c13" class="ls lt hu jm b jn mb jq mc jt md jx me kb mf kf lx ly lz ma dt translated">多亏了插件系统，它完全是可定制和可扩展的。</li></ul><h1 id="723f" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">Next.js:</h1><p id="3ded" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated"><a class="ae jj" href="https://github.com/zeit/next.js/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv">下一个</strong> </a>是一个轻量级开发框架，用于在<strong class="jm hv"> React </strong>中创建静态的、服务器渲染的应用。Next.js将负责应用程序的繁重工作，如<em class="kt">代码分割、HMR(热模块替换)和SSR(服务器端渲染)</em>，并允许我们专注于应用程序。</p><h1 id="10fe" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">反应:</h1><p id="efe6" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated"><a class="ae jj" href="https://github.com/facebook/react" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv"> React </strong> </a>是最流行的前端Javascript框架之一，由facebook开发，被包括<em class="kt">网飞、Airbnb和Github </em>在内的无数科技公司用于构建应用。React是一个声明性的库，它使创建交互式用户界面变得容易，通过其基于组件的架构保持代码库的组织性。</p><h1 id="0d8a" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">GraphQL:</h1><p id="bd98" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated"><a class="ae jj" href="https://github.com/graphql" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv"> GraphQL </strong> </a>也是脸书开发的一种查询语言，允许应用的前端轻松查询应用的API。每个查询只请求当前视图需要呈现的数据。这使得开发人员能够在多种设备和屏幕尺寸上创造出色的用户体验。</p><h1 id="1eb9" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">条纹:</h1><p id="2aa6" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated"><a class="ae jj" href="https://github.com/stripe" rel="noopener ugc nofollow" target="_blank"> <strong class="jm hv"> Stripe </strong> </a>是当今应用的支付处理器之一(如果不是最大的)。Stripe开发了工具和SDK，允许开发人员轻松地将<em class="kt">安全、合规的支付处理</em>集成到任何应用中。</p><h1 id="60c2" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">目录</h1><h1 id="c1da" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">🏗️设置</h1><h1 id="f33c" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">然后</h1><p id="adfb" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated">要设置Next.js，我们需要一个空目录来安装库并托管我们的项目根目录。</p><p id="30b2" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">我们将把我们的项目分成两部分，一部分用于前端(Next.js代码)，一部分用于后端(Strapi代码)。</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="7824" class="ml kw hu mh b fv mm mn l mo mp">mkdir strapi-deliveroo<br/>cd strapi-deliveroo<br/>mkdir frontend<br/>cd frontend</span><span id="18ed" class="ml kw hu mh b fv mq mn l mo mp">yarn add next react react-dom</span></pre><p id="cbfa" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><em class="kt">注意:我使用yarn作为我的包管理器，你也可以使用npm并执行</em> <code class="eh mr ms mt mh b"><em class="kt">npm install --save next react react-dom</em></code>。</p><p id="d3e0" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">将以下内容添加到您的<code class="eh mr ms mt mh b">package.json</code>文件中:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="90ec" class="ml kw hu mh b fv mm mn l mo mp">"scripts": {<br/>  "dev": "next",<br/>  "build": "next build",<br/>  "start": "next start"<br/>}</span></pre><p id="3619" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">因此您的文件看起来像这样(您的包依赖项可能有不同的版本，这取决于安装的时间):</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="9452" class="ml kw hu mh b fv mm mn l mo mp">{<br/>  "dependencies": {<br/>    "next": "^7.0.2",<br/>    "react": "^16.6.1",<br/>    "react-dom": "^16.6.1",<br/>  },<br/>  "scripts": {<br/>    "dev": "next",<br/>    "build": "next build",<br/>    "start": "next start"<br/>  }<br/>}</span></pre><p id="e045" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">Next.js使用<code class="eh mr ms mt mh b">/pages</code>目录中的任何JavaScript文件作为应用程序的路径。要进行设置，只需创建<code class="eh mr ms mt mh b">/pages</code>目录并添加一个<code class="eh mr ms mt mh b">index.js</code>文件，包含:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="89d0" class="ml kw hu mh b fv mm mn l mo mp">mkdir pages<br/>cd pages<br/>touch index.js</span></pre><p id="edb0" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">现在我们有了我们的主路径(index.js)，它将在每次浏览器URL位于根位置时被加载(即<a class="ae jj" href="http://www.yourapp.com)." rel="noopener ugc nofollow" target="_blank"> www.yourapp.com)。</a>要测试这一点，您可以将以下内容插入index.js文件:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="b83b" class="ml kw hu mh b fv mm mn l mo mp">export default () =&gt; &lt;div&gt;Welcome to next.js!&lt;/div&gt;</span></pre><p id="b902" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">要查看正在运行的应用程序，请使用以下命令启动本地dev服务器:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="580a" class="ml kw hu mh b fv mm mn l mo mp">yarn dev</span></pre><p id="a9b3" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">您的应用程序现在应该在<a class="ae jj" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>上可见。</p><p id="51ae" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">确保在项目根目录下创建一个<code class="eh mr ms mt mh b">.gitignore</code>，并在其中添加<code class="eh mr ms mt mh b">.next</code>和<code class="eh mr ms mt mh b">node_modules</code>目录:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="9763" class="ml kw hu mh b fv mm mn l mo mp">cd .. <br/>touch .gitignore</span></pre></div><div class="ab cl mu mv hc mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hn ho hp hq hr"><pre class="mg mh mi mj aw mk dt"><span id="6480" class="ml kw hu mh b fv nb nc nd ne nf mn l mo mp">/* .gitignore */ <br/>node_modules <br/>.next</span></pre><p id="0bc5" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><strong class="jm hv">添加引导程序</strong></p><p id="cc22" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">对于本教程，我们将使用<a class="ae jj" href="https://reactstrap.github.io/" rel="noopener ugc nofollow" target="_blank">反应带</a>在我们的应用程序中实现引导4。对于CSS样式，我们将直接从CDN导入。</p><p id="c72e" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">首先安装反应器陷阱:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="3dee" class="ml kw hu mh b fv mm mn l mo mp">yarn add reactstrap bootstrap</span></pre><p id="e456" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><strong class="jm hv"> reactstrap </strong>只是一个前端库，可以轻松创建引导组件和样式。</p><p id="6ae4" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">为了导入CSS并在所有页面之间共享布局组件，我们将在<strong class="jm hv">页面目录</strong>中使用一个定制的<code class="eh mr ms mt mh b">_app.js</code>文件。</p><p id="676a" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这个文件将覆盖Next使用的默认App.js，并呈现在每个页面上，允许我们在一个地方设置全局样式/共享组件。</p><p id="20af" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">你可以在这里阅读更多关于【https://nextjs.org/docs/#custom-app】处理<a class="ae jj" href="https://nextjs.org/docs/#custom-app" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="f0e3" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这将允许我们导入一个<code class="eh mr ms mt mh b">&lt;Head&gt;</code>组件，并在标题中全局设置样式表。</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="3c5e" class="ml kw hu mh b fv mm mn l mo mp">cd pages<br/>touch _app.js</span></pre><p id="6218" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">路径:<code class="eh mr ms mt mh b">/frontend/pages/_app.js</code></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="cc32" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">现在，如果我们在<code class="eh mr ms mt mh b">index.js</code>中添加一些reactstrap组件，一旦重启服务器，我们应该会看到应用了引导样式。</p><p id="bd71" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">路径:<code class="eh mr ms mt mh b">/frontend/pages/index.js</code></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="017f" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">重启服务器以应用新的更改。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/8ea524d93170431e6496ceac4753e5fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*OKZv_5hhRIon5orR.png"/></div></div></figure><h2 id="e567" class="ml kw hu bd kx ni nj nk lb nl nm nn lf jt no np lh jx nq nr lj kb ns nt ll nu dt translated">设计页面</h2><p id="0241" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated">现在我们已经在Next.js项目中运行了Bootstrap，我们可以开始设计基本的共享前端组件了，比如navbar。</p><p id="df5c" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">首先创建一个文件夹来存储我们的组件，并创建我们的布局组件:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="2e27" class="ml kw hu mh b fv mm mn l mo mp">cd ..  <br/>mkdir components  <br/>cd components  <br/>touch Layout.js</span></pre><p id="4217" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">Nextjs使用<code class="eh mr ms mt mh b">&lt;Link&gt;</code>组件来执行页面之间的客户端路由。链接组件只是一个高阶组件，可以接受任何能够处理onClick处理程序的html标签(<code class="eh mr ms mt mh b">&lt;a&gt;</code>、<code class="eh mr ms mt mh b">&lt;button&gt;</code>、<code class="eh mr ms mt mh b">&lt;div&gt;</code>等)。).</p><p id="612c" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">这将导致我们不得不在reactstrap文档之外做一些修改。为了给我们的navbar设置样式，我们可以使用nextjs默认提供的JS <code class="eh mr ms mt mh b">&lt;style jsx&gt;</code>中的内置CSS。</p><p id="d2bc" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">在JS中插入CSS，如下所示:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="654d" class="ml kw hu mh b fv mm mn l mo mp">&lt;style jsx&gt; {`  <br/>  a { color: yellow }<br/>`}<br/>&lt;/style&gt;</span></pre><p id="a900" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">允许我们将CSS的范围扩展到呈现样式标签的组件，也可以传入全局选项来设置一个全局样式:<code class="eh mr ms mt mh b">&lt;style jsx global&gt;</code></p><p id="9010" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">你可以在接下来的文档<a class="ae jj" href="https://nextjs.org/docs/#css-in-js" rel="noopener ugc nofollow" target="_blank">中阅读更多关于JS中CSS的内容。</a></p><p id="7b29" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">打开<code class="eh mr ms mt mh b">Layout.js</code>文件，创建共享布局组件，并插入条带脚本(稍后使用),如下所示:</p><p id="7a92" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">路径:<code class="eh mr ms mt mh b">/frontend/components/Layout.js</code></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="6288" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">编辑<code class="eh mr ms mt mh b">index.js</code>文件以使用新的布局组件:</p><p id="9e1a" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">路径:<code class="eh mr ms mt mh b">/frontend/pages/index.js</code></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="af6b" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">现在，您的所有页面都应该有一个共享的标题栏:</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff ku"><img src="../Images/b612554c205977245e7a9e1c0c821fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nXvwkwbKs0BvvvLS.png"/></div></div></figure><p id="e41a" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">我们将创建两个额外的页面，允许用户分别在<code class="eh mr ms mt mh b">/signin</code>和<code class="eh mr ms mt mh b">/signup</code>登录和注册。</p><p id="3d16" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">您需要在<code class="eh mr ms mt mh b">/pages</code>目录中创建相应的文件，以便next识别路由。</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="cbdd" class="ml kw hu mh b fv mm mn l mo mp">cd ..  <br/>cd pages<br/><br/>touch signin.js  <br/>touch signup.js</span></pre><p id="207e" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">用下面的代码填充这些文件，一旦我们的Strapi服务器设置好了，我们将会回来。</p><p id="7fb8" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">路径:<code class="eh mr ms mt mh b">/frontend/pages/signup.js</code></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="a20b" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">路径:<code class="eh mr ms mt mh b">/frontend/pages/signin.js</code></p><figure class="kh ki kj kk fq kl"><div class="bz el l di"><div class="ng nh l"/></div></figure><p id="7e2d" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">您现在应该可以在<a class="ae jj" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank"> http://localhost:3000 </a>上看到这些路由。</p><h1 id="4923" class="kv kw hu bd kx ky kz la lb lc ld le lf ja lg jb lh jd li je lj jg lk jh ll lm dt translated">斯特拉皮</h1><p id="4e89" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated">有一个前端是好的，但是你的应用显然需要一个后端来管理用户、餐厅、菜品和订单。为了创造奇迹，让我们创建一个Strapi API。</p><h2 id="b924" class="ml kw hu bd kx ni nj nk lb nl nm nn lf jt no np lh jx nq nr lj kb ns nt ll nu dt translated">安装Strapi</h2><p id="3167" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated"><em class="kt">要求:请确保使用</em><a class="ae jj" href="https://nodejs.org/en/download" rel="noopener ugc nofollow" target="_blank"><em class="kt">Node 9</em></a><em class="kt">(或以上)，并且在您的机器上安装并运行</em><a class="ae jj" href="https://docs.mongodb.com/manual/installation/" rel="noopener ugc nofollow" target="_blank"><em class="kt">MongoDB</em></a><em class="kt">、Postgres或MySQL。</em></p><p id="3ba0" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">使用npm安装Strapi:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="6a86" class="ml kw hu mh b fv mm mn l mo mp">npm i strapi@alpha -g</span></pre><p id="5d89" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><em class="kt">注:Strapi v3仍然是alpha版本，但对于本教程来说就没问题了。</em></p><p id="269a" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">生成一个Strapi项目</p><p id="02a9" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">通过一个命令行在<code class="eh mr ms mt mh b">strapi-deliveroo</code>中搭建您的API:</p><p id="bf67" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">在名为<code class="eh mr ms mt mh b">backend</code>的目录中安装一个strapi服务器:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="619a" class="ml kw hu mh b fv mm mn l mo mp">cd ..  <br/>cd ..  <br/>strapi new backend</span></pre><p id="d8d4" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">CLI将要求您选择您的数据库:选择MongoDB、Postgres或MySQL。然后，填入数据库信息。如果您在机器上正确安装了数据库系统，缺省值应该有效。</p><p id="7e7d" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">启动服务器</p><p id="5b9e" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">启动Node.js服务器:</p><pre class="kh ki kj kk fq mg mh mi mj aw mk dt"><span id="dcaa" class="ml kw hu mh b fv mm mn l mo mp">cd backend  <br/>strapi start</span></pre><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff nv"><img src="../Images/c914830006f8d8273dfa952c569c2e10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mJuLklua4to-weBO.png"/></div></div></figure><p id="da47" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">从现在开始，您应该能够访问项目的管理面板:<a class="ae jj" href="http://localhost:1337/admin" rel="noopener ugc nofollow" target="_blank">http://localhost:1337/admin</a>。</p><h2 id="f338" class="ml kw hu bd kx ni nj nk lb nl nm nn lf jt no np lh jx nq nr lj kb ns nt ll nu dt translated">创建您的第一个用户</h2><p id="bd86" class="pw-post-body-paragraph jk jl hu jm b jn ln iv jp jq lo iy js jt lp jv jw jx lq jz ka kb lr kd ke kf hn dt translated">从<a class="ae jj" href="http://localhost:1337/admin/plugins/users-permissions/auth/register" rel="noopener ugc nofollow" target="_blank">注册页面</a>添加您的第一个用户。</p><figure class="kh ki kj kk fq kl fe ff paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="fe ff nw"><img src="../Images/31f335ab419a2e9df12051335cca2dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*0M1T8On-YXssJfe9.gif"/></div></div></figure><p id="c9d4" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">干得好，您成功地设置了Next.js和Strapi项目！🎉</p><p id="fbce" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated">🏠在下一节中，您将学习如何显示https://blog.strapi.io/strapi-next-restaurants/的:<a class="ae jj" href="https://blog.strapi.io/strapi-next-restaurants/" rel="noopener ugc nofollow" target="_blank"/>餐馆的<strong class="jm hv">列表。</strong></p></div><div class="ab cl mu mv hc mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hn ho hp hq hr"><p id="b140" class="pw-post-body-paragraph jk jl hu jm b jn jo iv jp jq jr iy js jt ju jv jw jx jy jz ka kb kc kd ke kf hn dt translated"><em class="kt">最初由Ryan Belke于2018年11月12日在</em><a class="ae jj" href="https://blog.strapi.io/strapi-next-setup/" rel="noopener ugc nofollow" target="_blank"><em class="kt">blog . strapi . io</em></a><em class="kt">发布。</em></p></div></div>    
</body>
</html>