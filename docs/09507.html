<html>
<head>
<title>How to get started with Sanity as a headless CMS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何作为一个无头CMS开始理智</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/how-to-get-started-with-sanity-as-a-headless-cms-b755a9de1770?source=collection_archive---------23-----------------------#2018-11-20">https://medium.com/hackernoon/how-to-get-started-with-sanity-as-a-headless-cms-b755a9de1770?source=collection_archive---------23-----------------------#2018-11-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/313d17bfd929a13283ae3fb9293e7e66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBnXvzJXKPj_y-pN3ey5Gg.png"/></div></div></figure><div class=""/><p id="4a8a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">当你想开始使用JAMstack，或者你的项目只需要API时，Sanity是一个完美的伴侣。在本教程中，您将学习如何开始使用Sanity——从用</em><a class="ae kb" href="https://hackernoon.com/tagged/javascript" rel="noopener ugc nofollow" target="_blank"><em class="ka">JavaScript</em></a><em class="ka">配置</em> <a class="ae kb" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank"> <em class="ka"> React </em> </a> <em class="ka">编辑器，到查询API和迁移内容数据集。</em></p><p id="3f2b" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你发现自己需要一些后端，理智很可能是最快的开始方式之一，而不会在以后惩罚你。为你的周末项目策划一个新的健全项目。那时你需要一个API来快速测试一些东西。或者你可以用它来做更严肃的事情。例如，当您需要在遗留系统和您喜欢使用的技术之间建立一个通道时。当你需要人类控制数字内容时，Sanity有一个开源编辑器，你可以用简单的JavaScript进行配置，用React进行定制，并在任何你想要的地方托管——无论是在<a class="ae kb" href="https://netify.com/" rel="noopener ugc nofollow" target="_blank"> Netlify </a>、现在的<a class="ae kb" href="https://zeit.co/now" rel="noopener ugc nofollow" target="_blank">还是在Sanity的云上。</a></p><p id="af17" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是我工作过的最好的、经过深思熟虑的内容后端之一，这就是为什么我现在为理智而工作——并且热爱它的每一天。</p><figure class="kc kd ke kf fq hw"><div class="bz el l di"><div class="kg kh l"/></div><figcaption class="ki kj fg fe ff kk kl bd b be z ek"><em class="km">Watch the video “Getting Started with Sanity”</em></figcaption></figure><p id="d32c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以创建尽可能多的自由健全项目，并在开发人员层完成大量工作，而且<a class="ae kb" href="https://www.sanity.io/pricing" rel="noopener ugc nofollow" target="_blank">定价</a>是透明和灵活的。</p><p id="c8cc" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你应该在几分钟内启动并运行——只需使用你的Google或GitHub登录，接受<a class="ae kb" href="https://www.sanity.io/legal/tos" rel="noopener ugc nofollow" target="_blank">服务条款</a>，就可以了。从安装Sanity CLI开始，并启动一个新项目:</p><p id="5f11" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh kn ko kp kq b">npm i -g @sanity/cli &amp;&amp; sanity init</code></p><p id="e26a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh kn ko kp kq b">sanity init</code>命令的指令将带您创建一个项目并在本地下载Sanity Studio。如果您在项目文件夹中运行【the CLI将打开一个带有热模块重载的本地服务器，这样您就可以配置它，而不必手动刷新浏览器。工作室总是连接到托管的实时后端，这意味着，一旦您开始在其中处理内容，该内容也将在API中可用和可查询。换句话说，在你的编辑可以开始处理内容的地方，你可以很快得到一个项目，你可以在你的项目中获取和使用这些内容。</p><p id="3593" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">第一次尝试一些预配置的模板可能会很有用，但是为了向您展示使用模式配置Studio <a class="ae kb" href="https://www.sanity.io/docs/content-studio/the-schema" rel="noopener ugc nofollow" target="_blank">是多么容易，让我向您展示一个带有标题字段的简单帖子条目的代码:</a></p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="0450" class="kv kw if kq b fv kx ky l kz la">export default {<br/>  name: 'post',<br/>  title: 'Post',<br/>  type: 'document',<br/>  fields: [<br/>    {<br/>      name: 'title',<br/>      title: 'Title',<br/>      type: 'string'<br/>    }<br/>  ]<br/>}</span></pre><p id="9ab1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">工作室现在看起来像这样:</p><figure class="kc kd ke kf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lb"><img src="../Images/5c168dedb20f04007361742f306091f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v6k_mKWQQ6I-_48HXGriFw.png"/></div></div></figure><p id="9f0a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你不在乎工作室，那完全没问题。您可以轻松地使用Sanity的补丁API来创建和编辑文档。要创建一个可查询的文档，只需要一个<a class="ae kb" href="https://www.sanity.io/docs/http-auth" rel="noopener ugc nofollow" target="_blank">写令牌</a>，一个<code class="eh kn ko kp kq b">_type</code>键，并且对于不同的数据类型有一些约定，你将很快学会。使用<a class="ae kb" href="https://www.sanity.io/docs/client-libraries/js-client" rel="noopener ugc nofollow" target="_blank"> JavaScript客户端</a>，您可以创建这样一个文档:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="8681" class="kv kw if kq b fv kx ky l kz la">import sanityClient from '@sanity/cli'<br/>const client = <strong class="kq ig">sanityClient</strong>({<br/>  projectId: '&lt;projectId&gt;',<br/>  dataset: '&lt;datasetName&gt;',<br/>  token: '&lt;tokenWithWritePermissions&gt;'<br/>})</span><span id="989d" class="kv kw if kq b fv lc ky l kz la"><br/>client.<strong class="kq ig">create</strong>({ _type: "post", title: "Hello World" }).<strong class="kq ig">then</strong>(console.log)</span><span id="ac01" class="kv kw if kq b fv lc ky l kz la">&gt; { _createdAt: '2018-11-10T20:06:56Z',<br/>_id: 'wK0NtpsoCZRvwU3EDtEub2',<br/>_rev: 'wK0NtpsoCZRvwU3EDtEuYI',<br/>_type: 'test',<br/>_updatedAt: '2018-11-10T20:06:56Z',<br/>title: 'hello world' }</span></pre><p id="8ba1" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您想要更改(或添加另一个)值:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="c28e" class="kv kw if kq b fv kx ky l kz la">client.<strong class="kq ig">patch</strong>('wK0NtpsoCZRvwU3EDtEub2').set({ title: 'Hello Worlds!'}).<strong class="kq ig">then</strong>(console.log)</span><span id="9430" class="kv kw if kq b fv lc ky l kz la">&gt; { _createdAt: '2018-11-10T20:06:56Z',<br/>_id: 'wK0NtpsoCZRvwU3EDtEub2',<br/>_rev: 'FUGFhuJJo756q4bO12e29f',<br/>_type: 'test',<br/>_updatedAt: '2018-11-10T20:10:31Z',<br/>title: 'Hello Worlds!' }</span></pre><p id="a3df" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您可以使用Sanity CLI并使用sanity documents创建一个新文档，在您喜欢的文本编辑器中创建和写入数据。</p><figure class="kc kd ke kf fq hw"><div class="bz el l di"><div class="kg kh l"/></div><figcaption class="ki kj fg fe ff kk kl bd b be z ek">Example of ”<em class="km">sanity documents create”</em></figcaption></figure><h1 id="ad9b" class="ld kw if bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz dt translated">用GROQ查询数据</h1><p id="bc17" class="pw-post-body-paragraph jc jd if je b jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz hn dt translated">现在您有了一个文档，您可以使用GROQ(面向图形的查询语言)通过API查询它。它是一种声明性语言，旨在查询大量无模式JSON文档的集合。它的主要设计目标是表达性过滤，将几个文档合并成一个响应，并调整响应以适应客户端应用程序。为了进行试验，当您在项目文件夹中时，也可以在CLI中这样做，如下所示:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="5795" class="kv kw if kq b fv kx ky l kz la">sanity documents query "*[_type == 'post']"</span></pre><p id="b9e3" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当您想从前端查询内容时，可以使用其中一个客户端库。有<a class="ae kb" href="https://packagist.org/packages/sanity/sanity-php" rel="noopener ugc nofollow" target="_blank"> PHP </a>、<a class="ae kb" href="https://github.com/oslofjord/sanity-linq" rel="noopener ugc nofollow" target="_blank">的库。NET </a>和<a class="ae kb" href="https://www.npmjs.com/package/@sanity/client" rel="noopener ugc nofollow" target="_blank"> JavaScript </a>，使用后一种，您获取的文档如下:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="a5c0" class="kv kw if kq b fv kx ky l kz la">client.fetch("*[_type == 'post']").then(documents =&gt; console.log(documents))</span></pre><p id="aab5" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你也可以把这个输入到你的浏览器中，在那里查看数据，或者使用任何可以发送HTTPS请求的东西:<code class="eh kn ko kp kq b">https://&lt;yourProjectId&gt;.api.sanity.io/v1/data/query=*[_type == "post"]</code></p><p id="3f0a" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用GROQ你还可以做一些叫做<a class="ae kb" href="https://www.sanity.io/docs/groq/groq-pipeline-components" rel="noopener ugc nofollow" target="_blank"> <em class="ka">的投影</em> </a>的事情，在这里你可以对你的数据如何被格式化有很多控制。它是通过在过滤器后插入花括号<code class="eh kn ko kp kq b">{}</code>来使用的，在这里你可以选择你想要的字段。例如，如果我们希望我们的帖子只包含“标题”字段，我们可以这样做:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="90d1" class="kv kw if kq b fv kx ky l kz la">sanity documents query "*[_type == 'post']{_id, title}"</span></pre><h1 id="d55b" class="ld kw if bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz dt translated">迁移您的内容很容易</h1><p id="785f" class="pw-post-body-paragraph jc jd if je b jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz hn dt translated">托管内容后端的全部意义在于，对你来说，迁移、复制和移动你的数据应该很简单。特别是如果您想在生产中使用它，您应该有一种简单的方法将内容复制到您可以测试和实验的环境中。明智地说，使用CLI将您所有的内容和资产导出到一个整洁的<a class="ae kb" href="http://ndjson.org/" rel="noopener ugc nofollow" target="_blank"> ndjson文件</a>(以及一个包含您所有资产的文件夹)中是非常简单的:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="57fb" class="kv kw if kq b fv kx ky l kz la">sanity dataset export &lt;datasetName&gt;</span></pre><p id="7550" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">反之亦然:</p><pre class="kc kd ke kf fq kr kq ks kt aw ku dt"><span id="1dd2" class="kv kw if kq b fv kx ky l kz la">sanity dataset import datasetExport.ndjson</span></pre><p id="8240" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您甚至可以使用导出API获得所有内容的即时ndjson转储(这是🚀太快了！):<code class="eh kn ko kp kq b">https://&lt;yourProjectId&gt;.api.sanity.io/v1/data/export/&lt;datasetName&gt;</code></p><h1 id="fa28" class="ld kw if bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz dt translated">后续步骤…</h1><p id="8685" class="pw-post-body-paragraph jc jd if je b jf ma jh ji jj mb jl jm jn mc jp jq jr md jt ju jv me jx jy jz hn dt translated">你现在应该对理智可以做的事情有了基本的了解。还有更多的东西有待发现，但好的一面是，随着你的需求和抱负的增长，你可以一步一步地去做。你可能想了解更多关于如何<a class="ae kb" href="https://www.sanity.io/docs/content-studio/structure-builder" rel="noopener ugc nofollow" target="_blank">根据客户需求</a>完全定制你的工作室，或者<a class="ae kb" href="https://css-tricks.com/five-interesting-ways-to-use-sanity-io-for-image-art-direction/" rel="noopener ugc nofollow" target="_blank">利用丰富的图像元数据</a>，或者钻研一些高级的<a class="ae kb" href="https://www.sanity.io/docs/http-api/http-patches" rel="noopener ugc nofollow" target="_blank">修补和突变技术</a>。还可以查看<a class="ae kb" href="https://github.com/sanity-io/example-app-react-native" rel="noopener ugc nofollow" target="_blank"> React Native </a>、<a class="ae kb" href="https://github.com/sanity-io/example-frontend-vue-js" rel="noopener ugc nofollow" target="_blank"> Vue </a>、<a class="ae kb" href="https://github.com/sanity-io/example-frontend-next-js" rel="noopener ugc nofollow" target="_blank"> Next.js </a>和<a class="ae kb" href="https://github.com/sanity-io/example-ecommerce-snipcart-vue" rel="noopener ugc nofollow" target="_blank"> Nuxt </a>中的前端示例。</p><p id="b68c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无论你选择用理智来做什么，也有一个<a class="ae kb" href="https://slack.sanity.io/" rel="noopener ugc nofollow" target="_blank">社区</a>乐于听到它，并在你遇到障碍时提供帮助。</p></div><div class="ab cl mf mg hc mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="hn ho hp hq hr"><p id="125c" class="pw-post-body-paragraph jc jd if je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">原载于</em><a class="ae kb" href="https://www.sanity.io/blog/getting-started-with-sanity-as-a-headless-cms" rel="noopener ugc nofollow" target="_blank"><em class="ka">www . sanity . io</em></a><em class="ka">。</em></p><figure class="kc kd ke kf fq hw"><div class="bz el l di"><div class="mm kh l"/></div></figure></div></div>    
</body>
</html>