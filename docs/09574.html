<html>
<head>
<title>Animations in React at 60fps! An introduction to React-Pose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React中的动画速度为60fps！反应式简介</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/animations-in-react-at-60fps-an-introduction-to-react-pose-6db5a1c1e0ae?source=collection_archive---------2-----------------------#2018-11-24">https://medium.com/hackernoon/animations-in-react-at-60fps-an-introduction-to-react-pose-6db5a1c1e0ae?source=collection_archive---------2-----------------------#2018-11-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div class="fe ff hs"><img src="../Images/47e1cb76ee4ef658258da71f69dc62e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/1*dEjBLyJL7RHGGxr1phGDvw.gif"/></div></figure><div class=""/><p id="e6a3" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">PopMotion/Pose是一个简单的React、React Native、Vue甚至vanilla JavaScript的动画库。在本文中，我将通过React中的一个简单的实际例子来教您许多关于react-pose的知识。你可以在他们的<a class="ae jw" href="https://popmotion.io/pose/" rel="noopener ugc nofollow" target="_blank">官方文件</a>中找到更多信息。</p><h1 id="b7d9" class="jx jy ib bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">CSS的问题是</h1><p id="4309" class="pw-post-body-paragraph iy iz ib ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hn dt translated">CSS对于简单的UI动画，状态到状态的转换，甚至是组件入口动画来说都是很棒的。然而，当涉及到更多的交互式动画，弹簧效果，或者列表插入/删除/重新排序转换时，CSS就有所欠缺。这就是第三方动画库的用武之地。有很多很棒的，比如<em class="la"> React-Spring </em> <strong class="ja ic"> <em class="la">，</em> </strong> <em class="la">但是react-pose </em>更具声明性&amp;将逻辑从主渲染树中取出，改善了整体开发者体验<em class="la">。</em></p><h1 id="d6c9" class="jx jy ib bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dt translated">构建可刷卡列表</h1><p id="6ec2" class="pw-post-body-paragraph iy iz ib ja b jb kv jd je jf kw jh ji jj kx jl jm jn ky jp jq jr kz jt ju jv hn dt translated">我决定选择一个实际的例子，我们都可以在我们的材料设计应用程序中使用。在官方的材料设计网站上，我们可以找到这个手势概念:</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div class="fe ff lb"><img src="../Images/b318e9689429d08f2dacd069566d5b82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*SvayIDjv6lEOmcFX1YYWeg.gif"/></div></figure><p id="e943" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这就是我们要做的。如果你已经想看最后的结果，<a class="ae jw" href="https://codesandbox.io/s/l9qjm1op6z" rel="noopener ugc nofollow" target="_blank"> <em class="la">看这里的演示</em> </a>。首先，我们需要定义一个列表项。</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff lg"><img src="../Images/8bc4f2a0b38ed7aabb2d94b0627bbd5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzhkHp5g2PzhrbqTf1I4bw.png"/></div></div></figure><p id="02da" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">React-posed允许我们通过设置<code class="eh ll lm ln lo b">draggable</code>属性使其易于滑动。在这种情况下，我只想允许在x轴上拖动:</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff lp"><img src="../Images/2f0df4fbebbed6fb08a58fce8725ad8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r69DdIWAxMh0_y1Wa5smxg.png"/></div></div></figure><p id="8007" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，让我们添加一些css并看看它的运行情况(最终的CSS代码在这里<a class="ae jw" href="https://codesandbox.io/s/l9qjm1op6z?module=%2Fsrc%2Fstyles.css" rel="noopener ugc nofollow" target="_blank">提供</a>):</p><div class="lc ld le lf fq ab cb"><figure class="lq hw lr ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/4a0e861f5ddebbd4aca3944732494825.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*oC7YYQDzfOmB6tPDFWYS5w.png"/></div></figure><figure class="lq hw lw ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/8c23cc42953bd92f3b185e99465ffa14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/1*IiZYBBRR-LhQelXq2MlNGw.gif"/></div></figure></div><p id="02e0" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，我将在我们的可拖动覆盖图下面添加一个元素，当我们向左/向右滑动时，它将出现在那里:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw lx ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/97032a9ff798495a4846a403d2e97025.png" data-original-src="https://miro.medium.com/v2/resize:fit:650/format:webp/1*2bjly6f_3oTE4g9HQZ8rPw.png"/></div></figure><figure class="lq hw ly ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/19b406f9b65ce0c859bf8153f5c63b47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/1*tk9SC27dEgWDRYvbwV7P4g.gif"/></div></figure></div><p id="483e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">我还想防止用户从左向右拖动:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw lz ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/6d2492bba32aae77a3de821aa356c9d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:798/format:webp/1*Vinw1h5b-ELgfp4smp_RLQ.png"/></div></figure><figure class="lq hw ma ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/0f290b9f23ecfb89ae2c0026528490dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/1*-bXyYAfH1kS-DfXOx_jUPQ.gif"/></div></figure></div><p id="dbf9" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，我要用一个实际的材料设计列表项来替换这个难看的条:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mb ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/01a1040f392919d0bea63cd2b2294748.png" data-original-src="https://miro.medium.com/v2/resize:fit:642/format:webp/1*l4dqLkWg701Lw5TZyb3Ozg.png"/></div></figure><figure class="lq hw mc ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/b0b848fd2328e3719d25c55190c09287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/1*H_tvsI8IOFk8QCIKdyYM7g.gif"/></div></figure></div><p id="086e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">你可能注意到了，当我们放开这个项目时，它不会向左滑动并消失，这是我接下来要做的。幸运的是，react-pose有一个很棒的声明性转换API:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw md ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/ff9912e86b33d5764a271f8a3918a006.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*gWXBBrF4Dp0F6TYSaXL2sA.png"/></div></figure><figure class="lq hw me ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/f0111a720b736f13595cbc9e6b0841b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1466/1*DNZW05aqEjt01MPVGAlRPg.gif"/></div></figure></div><p id="3a9e" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">如您所见，react-posed使用一个名为<code class="eh ll lm ln lo b">triggerDistance</code>的变量(在本例中设置为60)来确定用户是否已经滑动了足够的距离来执行滑动，如果没有，它将返回。</p><p id="4d52" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，如果用户滑过<code class="eh ll lm ln lo b">triggerDistance</code>，我需要改变后面元素的颜色。与原始动画不同，我不打算使用波纹动画，以使本文专注于反应动画，而不是实现材质设计波纹。我要建立一个颜色混合动画。</p><p id="6a36" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了在react-pose中做到这一点，我需要创建一个新的<code class="eh ll lm ln lo b">posed</code>元素，当用户滑动时，它将从灰色渐变到紫色:</p><figure class="lc ld le lf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mf"><img src="../Images/21dc61056d1513f9613d79367f77a8d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*el2tBzKFKm2f-wAjI2gLug.png"/></div></div></figure><p id="db92" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated"><code class="eh ll lm ln lo b">passive</code>表示过渡将基于组件的拖动值。管道用于选择颜色将如何褪色。我不会讲太多细节，但是你可以在这里阅读更多关于管道的内容。</p><p id="0926" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">然而，因为这些组件无法相互交互，我们需要存储指示用户拖动了多少项的<code class="eh ll lm ln lo b">x</code>的值，并将其传递给<code class="eh ll lm ln lo b">SwipeableForeground</code>组件。在<code class="eh ll lm ln lo b">react-pose</code>中，我们可以很容易地用他们叫做<code class="eh ll lm ln lo b">value</code>的反应数据类型做到这一点。</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mg ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/5f200a9b5f2202e37094e4b89b0050b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*jZmnvpkNhRcDR3W_pd2IkQ.png"/></div></figure><figure class="lq hw mh ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/2d379c26e80430cdbfee825c3d3cd412.png" data-original-src="https://miro.medium.com/v2/resize:fit:1218/1*Yp2pOJUs5SXenstq11vn0g.gif"/></div></figure></div><p id="dc33" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">为了检测<code class="eh ll lm ln lo b">App</code>类中的滑动，我可以使用当用户放开<code class="eh ll lm ln lo b">Swipeable</code>组件时触发的<code class="eh ll lm ln lo b">onDragEnd</code>事件。我还必须设置一个超时，以便在转换完全完成时触发事件:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mi ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/dc5c9a4db3c1bd1da876e7a6598b1954.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*74RGMaMA2sVBzBwij432Fw.png"/></div></figure><figure class="lq hw mj ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/cfc4cc4b8dd284237eb46671c70bd5a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/1*G0NfSybOq4n9NPD_1kKjGA.gif"/></div></figure></div><p id="2942" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在，让我们向列表中添加更多项目，并确保每个项目都有自己的项目:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mk ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/82f7beefbdcd67c9ff565f93d9118a62.png" data-original-src="https://miro.medium.com/v2/resize:fit:442/format:webp/1*lm4wzDZB-RU17KlT4neccg.png"/></div></figure><figure class="lq hw ml ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/7db52c972fc9a50350048a0ab011531c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1476/1*OsKCaxz3kiCJyduq7mWLmA.gif"/></div></figure></div><p id="f055" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">现在我需要让被偷的东西消失:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mm ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/80a8f44db4312db6d030bededb8ed7f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:498/format:webp/1*YSPZqN--49qcgaC0ID5FJg.png"/></div></figure><figure class="lq hw mn ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/dababa9b714bfa564a1fafa3af4bac0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1476/1*8IchDs-GJ8ZtxmfcUwa12g.gif"/></div></figure></div><p id="9ec6" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，我们可以使用<code class="eh ll lm ln lo b">PoseGroup</code>来制作元素消失的动画，只需将<code class="eh ll lm ln lo b">Slideable</code>列表包装在<code class="eh ll lm ln lo b">PoseGroup</code>组件中，并使<code class="eh ll lm ln lo b">Slideable</code>成为<code class="eh ll lm ln lo b">posed.li</code>:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mo ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/5a888862c3b6059ca2085c5214a258a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1178/format:webp/1*wGENOkKHSyGrGaHgBctxeg.png"/></div></figure><figure class="lq hw mp ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/8029022b99898e9e88708f3c40ff7c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*xk3ZAUUktWgoKwcYK8jI6Q.png"/></div></figure></div><figure class="lc ld le lf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="fe ff mq"><img src="../Images/475327e31029c944f66d87417ec2da76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*vegRJ3Kjng_PN2bkQNXXFA.gif"/></div></div></figure><p id="61a9" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">最后，我只想在删除每个项目后将弹性动画更改为简单的“ease ”,使其更像我试图复制的动画:</p><div class="lc ld le lf fq ab cb"><figure class="lq hw mr ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/3915f00e5eea1e28a008e1a3d04cc834.png" data-original-src="https://miro.medium.com/v2/resize:fit:598/format:webp/1*IZU3R7WTYHZwBqhS9dAH0g.png"/></div></figure><figure class="lq hw ms ls lt lu lv paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><img src="../Images/06609961ee99310f0d00e1608b47c6f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1404/1*X8ttc_mD8YKnavwwxDneCA.gif"/></div></figure></div><p id="9e25" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">这是最后的结果:</p><figure class="lc ld le lf fq hw"><div class="bz el l di"><div class="mt mu l"/></div></figure><p id="2a2a" class="pw-post-body-paragraph iy iz ib ja b jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv hn dt translated">就这样，我们做到了！</p></div><div class="ab cl mv mw hc mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="hn ho hp hq hr"><blockquote class="nc"><p id="964d" class="nd ne ib bd nf ng nh ni nj nk nl jv ek translated">如果你想看到更多这种类型的内容，给这篇文章鼓掌，或者两次，或者50次👏。我会很快发布更多类似的react教程🎉。</p></blockquote></div></div>    
</body>
</html>