<html>
<head>
<title>Building a Location-based App with React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ä½¿ç”¨React Nativeæ„å»ºåŸºäºä½ç½®çš„åº”ç”¨ç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/how-to-develop-a-location-based-application-using-react-native-ce819814925d?source=collection_archive---------3-----------------------#2018-11-26">https://medium.com/hackernoon/how-to-develop-a-location-based-application-using-react-native-ce819814925d?source=collection_archive---------3-----------------------#2018-11-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><p id="944c" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å½“æˆ‘ä»¬åœ¨è¦æ±‚è®¿é—®æˆ‘ä»¬ä½ç½®çš„å¼¹å‡ºçª—å£ä¸Šç‚¹å‡»â€œå…è®¸â€æ—¶ï¼Œä¼šæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿä¸€äº›åº”ç”¨æä¾›äº†æ›´å¥½çš„ä½“éªŒï¼Œæ¯”å¦‚è„¸ä¹¦æ¨èé™„è¿‘çš„æ´»åŠ¨ã€‚å…¶ä»–â€”â€”ä¸çŸ¥é“è®¾å¤‡ä½ç½®å°±æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå¦‚ä¼˜æ­¥æˆ–è°·æ­Œåœ°å›¾ã€‚</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff jq"><img src="../Images/6d45d976044d7ace024020dcafaf87ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*60ktdEoFKREKlVs1NXeHPw.png"/></div></div></figure><blockquote class="kc kd ke"><p id="4c78" class="ir is jp it b iu iv iw ix iy iz ja jb kf jd je jf kg jh ji jj kh jl jm jn jo hn dt translated">è¿™ç¯‡å…³äº<a class="ae ki" href="https://djangostars.com/blog/how-to-develop-a-location-based-application-using-react-native/?utm_source=medium&amp;utm_medium=hackernoon.com&amp;utm_campaign=location-based%20app%20with%20react%20native&amp;utm_content=building%20a%20location-based%20app" rel="noopener ugc nofollow" target="_blank">ç”¨react nativeæ„å»ºåŸºäºä½ç½®çš„åº”ç”¨</a>çš„æ–‡ç« æ˜¯ç”±Julia Korsunæ’°å†™çš„ã€‚</p></blockquote><p id="531b" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™äº›åŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºä½¿ç”¨è®¾å¤‡ä½ç½®æ¥å¯ç”¨å’Œæ§åˆ¶ä¸€äº›åŠŸèƒ½ã€‚ä»é€å¤–å–åˆ°æ‰¾æˆ‘çš„iPhoneï¼ŒåŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºåªè¦çŸ¥é“æˆ‘ä»¬åœ¨å“ªé‡Œï¼Œå°±èƒ½å¸®åŠ©æˆ‘ä»¬å®Œæˆæ—¥å¸¸ä»»åŠ¡ã€‚</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kj"><img src="../Images/1f419ce8e6546d57279a2a476238e9db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V_j918VTUfiRuy96"/></div></div></figure><p id="e286" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä½ç½®å¯ä»¥æ˜¯ä¸»è¦åŠŸèƒ½ï¼Œå¦‚Tinderæˆ–è€…è¾…åŠ©ï¼Œæ¯”å¦‚åœ¨Instagramä¸­:ä¸Šä¼ ç…§ç‰‡æ—¶ï¼ŒInstagramä¼šç»™ä½ å»ºè®®ä¸€ä¸ªåœ°æ–¹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æ ‡è®°ä½ çš„ä½ç½®ã€‚ä¸ç®¡æ˜¯ä¸æ˜¯ä¸»è¦åŠŸèƒ½ï¼Œä½ç½®ç¡®å®æå‡äº†ç”¨æˆ·ä½“éªŒã€‚</p><p id="7554" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨åŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºçš„ä¸»è¦æŠ€æœ¯ç»„ä»¶ï¼Œæ‚¨å°†äº†è§£å¦‚ä½•ä½¿ç”¨React Nativeå¼€å‘ä¸€ä¸ªåº”ç”¨ç¨‹åºã€‚é¦–å…ˆï¼Œæˆ‘ç®€å•æè¿°ä¸€ä¸‹React Nativeï¼Œå¹¶å°†å…¶ä¸åŸç”Ÿappå¼€å‘è¿›è¡Œæ¯”è¾ƒã€‚ç„¶åï¼Œæˆ‘å°†åˆ†äº«åœ¨åº”ç”¨ç¨‹åºä¸­æ”¶é›†å’Œæ˜¾ç¤ºä½ç½®çš„æ–¹æ³•ï¼Œæœ€åï¼Œåœ¨ä¸€ç¯‡çŸ­æ–‡ä¸­ï¼Œæˆ‘å°†æè¿°ä¸€äº›è®¾è®¡æŒ‘æˆ˜ä»¥åŠReact Nativeå¦‚ä½•åº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚</p><h1 id="ebf1" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">ä½ å¯èƒ½ä¹Ÿå–œæ¬¢</h1><div class="li lj fm fo lk ll"><a href="https://djangostars.com/blog/building-backend-location-based-service/?utm_source=medium&amp;utm_medium=hackernoon.com&amp;utm_campaign=location-based%20app%20with%20react%20native&amp;utm_content=youmayalsolike" rel="noopener  ugc nofollow" target="_blank"><div class="lm ab ej"><div class="ln ab lo cl cj lp"><h2 class="bd hv fv z el lq eo ep lr er et ht dt translated">ä¸ºåŸºäºä½ç½®çš„æœåŠ¡æ„å»ºåç«¯æ—¶éœ€è¦è€ƒè™‘ä»€ä¹ˆ</h2><div class="ls l"><h3 class="bd b fv z el lq eo ep lr er et ek translated">å¦‚æœä½ å¿«é€Ÿæµè§ˆå„ç§ç±»åˆ«çš„åº”ç”¨ç¨‹åºï¼Œå¦‚åŒ»ç–—ä¿å¥ã€æ¸¸æˆã€é‡‘èç­‰ï¼Œå°±ä¼šå‘ç°è¯¥è®¾å¤‡â€¦</h3></div><div class="lt l"><p class="bd b gc z el lq eo ep lr er et ek translated">djangostars.com</p></div></div><div class="lu l"><div class="lv l lw lx ly lu lz ka ll"/></div></div></a></div><h1 id="8dc9" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">åŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºå¼€å‘å·¥å…·:React Native</h1><p id="8e5c" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">åœ¨è¿™ä¸€éƒ¨åˆ†ï¼Œæˆ‘å°†ç®€è¦æè¿°ReactåŸç”Ÿæ¡†æ¶ï¼Œå®ƒçš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠä¸ºä»€ä¹ˆå®ƒéå¸¸é€‚åˆæ„å»ºåŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºã€‚React Nativeæ˜¯ä¸€ä¸ªå¼€æºçš„JavaScriptæ¡†æ¶ï¼Œå…è®¸å¼€å‘äººå‘˜ä½¿ç”¨å…¶æœ¬æœºè¡Œä¸ºåˆ›å»ºè·¨å¹³å°çš„åº”ç”¨ç¨‹åºã€‚</p><p id="c66d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™ç§æè¿°ä¸­çš„è¡Œä¸ºæ˜¯ä»€ä¹ˆï¼Ÿè®©æˆ‘è§£é‡Šä¸€ä¸‹ã€‚iOSå’ŒAndroidæ˜¯ä¸åŒçš„â€”â€”å®ƒä»¬çš„ç•Œé¢ä¸åŒï¼ŒåŠ¨ç”»ä¸åŒï¼Œå¾ˆå¤šä¸œè¥¿éƒ½ä¸åŒã€‚ä¸ºiOSå’ŒAndroidå¼€å‘ç›¸åŒçš„åº”ç”¨ç¨‹åºéœ€è¦å¼€å‘ä¸¤ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºã€‚è¿™æ›¾ç»æ˜¯ä¸€ä¸ªè´¹åŠ›çš„è¿‡ç¨‹ï¼Œä½†ä½¿ç”¨React Nativeï¼Œå¼€å‘äººå‘˜åªéœ€ç¼–å†™ä¸€ä¸ªä»£ç ï¼Œå°±å¯ä»¥åœ¨ä¸¤ä¸ªå¹³å°ä¸Šæ­£å¸¸å·¥ä½œã€‚</p><p id="cd90" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™ä½¿å¾—ä¼ä¸šå¯ä»¥å‘iOSå’ŒAndroidç”¨æˆ·æä¾›ä»–ä»¬çš„åº”ç”¨ç¨‹åºï¼Œè¿™æ„å‘³ç€æ›´å¤§çš„å¸‚åœºä»½é¢ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¸å¤šå…¬å¸æ›´å–œæ¬¢React Nativeâ€”â€”ä»–ä»¬è´Ÿæ‹…ä¸èµ·å¼€å‘ä¸¤ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºï¼Œæˆ–è€…å¯¹ä»–ä»¬çš„ç”¨æˆ·ä½¿ç”¨çš„æ˜¯iOSè¿˜æ˜¯Androidå……æ»¡ä¿¡å¿ƒã€‚è€ƒè™‘åˆ°è·¨å¹³å°å¸‚åœºæœ‰å¯èƒ½åœ¨2020å¹´å¢é•¿åˆ°800äº¿ç¾å…ƒï¼Œè¿™å¯¹åˆ›ä¸šå…¬å¸æ¥è¯´ä¼¼ä¹æ˜¯ä¸€ä¸ªç†æ€§çš„é€‰æ‹©ã€‚</p><p id="9215" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç°åœ¨ï¼Œæˆ‘å°†è§£é‡ŠReact Nativeåœ¨å¼€å‘åŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºæ–¹é¢çš„ä¼˜ç¼ºç‚¹ã€‚</p><h1 id="8ba2" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">ååº”æœ¬åœŸä¸“ä¸šäººå£«</h1><ul class=""><li id="5df4" class="mf mg hu it b iu ma iy mb jc mh jg mi jk mj jo mk ml mm mn dt translated"><strong class="it hv">è·¨å¹³å°ã€‚ä¸å…¶ä¸ºæ¯ä¸ªç³»ç»Ÿ(iOSå’ŒAndroid)ç¼–å†™å•ç‹¬çš„ä»£ç ï¼Œä¸å¦‚æ„å»ºä¸€ä¸ªæ¥è¿è¡Œå®ƒä»¬ã€‚ä½ ä¹Ÿä¸è®¾è®¡ä¸åŒçš„ç”¨æˆ·ç•Œé¢å’ŒUXã€‚</strong></li><li id="0b4e" class="mf mg hu it b iu mo iy mp jc mq jg mr jk ms jo mk ml mm mn dt translated"><strong class="it hv">é«˜æ€§èƒ½ã€‚</strong> React Nativeä½¿ç”¨åŸç”Ÿæ§ä»¶å’Œæ¨¡å—ã€‚ä»£ç ä¸ç›¸åº”çš„æœ¬æœºiOSå’ŒAndroidç»„ä»¶è¿›è¡Œäº¤äº’ï¼Œå¹¶å°†ä»£ç å‘ˆç°ç»™æœ¬æœºAPIã€‚æœ¬æœºAPIæ˜¯é‡ç‚¹â€”â€”é€šè¿‡ä½¿ç”¨ç‹¬ç«‹äºUIçš„çº¿ç¨‹ï¼Œå®ƒæé«˜äº†åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚</li><li id="57e6" class="mf mg hu it b iu mo iy mp jc mq jg mr jk ms jo mk ml mm mn dt translated"><strong class="it hv">å¼€æºã€‚</strong>ReactåŸç”Ÿç¤¾åŒºæ¯å¤©éƒ½åœ¨å¢é•¿ï¼Œå¼€æºç»„ä»¶çš„æ•°é‡ä¹Ÿåœ¨å¢é•¿ã€‚è¿™å…è®¸åœ¨ç¤¾åŒºæˆå‘˜ä¹‹é—´å…±äº«ç»éªŒï¼Œæ”¹è¿›æ¡†æ¶ï¼Œå¹¶æ‰¾åˆ°ç°æœ‰ç¼ºé™·çš„è§£å†³æ–¹æ¡ˆã€‚æ‰€æœ‰è¿™äº›ç»“åˆèµ·æ¥åŠ é€Ÿäº†å¼€å‘è¿‡ç¨‹ã€‚</li><li id="a6d8" class="mf mg hu it b iu mo iy mp jc mq jg mr jk ms jo mk ml mm mn dt translated">å®ƒçœé’±ã€‚å‰ä¸‰ç‚¹æ€»ç»“æˆä¸€ä¸ªç›¸å½“å¤§çš„ä¼˜åŠ¿â€”â€”React Nativeä¸ºæ‚¨çœé’±ã€‚è¿™æ¯”æ„å»ºä¸¤ä¸ªç‹¬ç«‹çš„åº”ç”¨ç¨‹åºæ›´å¿«ï¼Œå› æ­¤æµ‹è¯•å’Œå‘å¸ƒMVPèŠ±è´¹çš„æ—¶é—´æ›´å°‘ã€‚</li></ul><p id="94cd" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ç„¶è€Œï¼Œæœ‰äº›æƒ…å†µä¸‹ä½ å¯èƒ½ä¸æƒ³ä½¿ç”¨React Nativeã€‚</p><p id="fa37" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å®ƒä»¬åŒ…æ‹¬:</p><ul class=""><li id="da16" class="mf mg hu it b iu iv iy iz jc mt jg mu jk mv jo mk ml mm mn dt translated"><strong class="it hv">ä¸éœ€è¦è·¨å¹³å°appã€‚</strong>å¦‚æœä½ çŸ¥é“ä½ çš„å—ä¼—æ›´å–œæ¬¢æŸä¸ªç‰¹å®šçš„å¹³å°ï¼Œæˆ‘å»ºè®®ä½ é€‰æ‹©åŸç”Ÿå¼€å‘ã€‚é¦–å…ˆï¼Œè¯¥åº”ç”¨å°†è¢«å®šåˆ¶ä»¥åŒ¹é…æ“ä½œç³»ç»Ÿçš„ç»†èŠ‚ï¼Œå…¶æ¬¡ï¼Œä½ å°†èƒ½å¤Ÿä½¿ç”¨å¹³å°ç‰¹å®šçš„åŠŸèƒ½ï¼Œå¦‚ARKit for iOSã€‚</li><li id="8028" class="mf mg hu it b iu mo iy mp jc mq jg mr jk ms jo mk ml mm mn dt translated"><strong class="it hv">ä½ éœ€è¦æ¯”ReactåŸç”Ÿæä¾›æ›´å¤šçš„APIã€‚</strong>æˆ‘ç‰¹åˆ«ä¸å–œæ¬¢çš„ä¸€ç‚¹æ˜¯React Nativeæ”¯æŒçš„åŸç”ŸAPIæ•°é‡æœ‰é™ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯æœ‰è¶³å¤Ÿçš„ä¸œè¥¿æ¥æ„å»ºä¸€ä¸ªåŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨éœ€è¦å…¶ä»–ä»£ç ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æœ¬æœºä»£ç æ¡¥æ¥å®ƒä»¬ã€‚</li></ul><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kj"><img src="../Images/bbe4da55232b7f74829823a6894a6a16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VXveylzubvi9nF_i"/></div></div></figure><h1 id="0c4a" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">å¦‚ä½•æ”¶é›†å’Œæ˜¾ç¤ºç”¨æˆ·ä½ç½®</h1><p id="decc" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">è¿™ä¸€éƒ¨åˆ†æ˜¯å…³äºæ”¶é›†å’Œæ˜¾ç¤ºä½ç½®æ•°æ®ã€‚æ ¹æ®ä½ çš„åº”ç”¨ç¨‹åºçš„å…·ä½“æƒ…å†µï¼Œä½ ä¼šé€‰æ‹©ä¸€ç§ç‰¹å®šçš„æ–¹å¼ã€‚</p><h1 id="6571" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">æ”¶é›†ä½ç½®æ•°æ®</h1><p id="c6b4" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">æˆ‘æŒ‘é€‰äº†ä¸‰ç§æ–¹æ³•æ¥æ”¶é›†è®¾å¤‡ä½ç½®ã€‚</p><p id="d27e" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">æ³¨æ„:</em>è¿™æ˜¯ä¸€ä¸ªé€šç”¨æ¦‚è¿°ï¼Œå¸®åŠ©æ‚¨äº†è§£ä½•æ—¶é€‰æ‹©æ¯ç§æƒ…å†µä»¥åŠå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ã€‚</p><h1 id="1640" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">ä½¿ç”¨Reactæœ¬æœºAPI</h1><p id="384d" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">æœ‰ä¸€ä¸ª<a class="ae ki" href="https://w3c.github.io/geolocation-api/" rel="noopener ugc nofollow" target="_blank">æœ¬åœ°JavaScript API </a>å¯ä»¥è¯†åˆ«è®¾å¤‡çš„ä½ç½®ã€‚å®ƒå¾ˆå®¹æ˜“å®‰è£…å’Œä½¿ç”¨ï¼Œä½†æœ‰ä¸€ä¸ª'<em class="jp">ä½†</em> ' â€”å®ƒæ—¢ä¸åœ¨åå°å·¥ä½œï¼Œä¹Ÿä¸æ˜¾ç¤ºä½ç½®æä¾›å•†(3Gï¼ŒWi-Fiï¼ŒGPS)ã€‚</p><h1 id="f187" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">ååº”-æœ¬åœ°-èƒŒæ™¯-åœ°ç†å®šä½</h1><p id="fbc0" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">å®ƒæ˜¯ä¸€ä¸ªåŒ…ï¼Œå¯ä»¥ç¡®å®šè®¾å¤‡åœ¨0åˆ°1000ç±³(0.6è‹±é‡Œ)èŒƒå›´å†…çš„ä½ç½®ã€‚è¿™éœ€è¦æ›´å¤šçš„ç”µæ± èƒ½é‡ï¼Œä½†å¦ä¸€æ–¹é¢ï¼Œè¿™å–å†³äºæ‚¨é…ç½®è·Ÿè¸ªä½ç½®çš„é¢‘ç‡ã€‚è¯¥è½¯ä»¶åŒ…è¿˜é›†æˆäº†SQLite â€”æ‚¨å¯ä»¥å­˜å‚¨è®°å½•çš„ä½ç½®æ•°æ®ï¼Œå¹¶é€šè¿‡HTTPå°†å…¶åŒæ­¥åˆ°æ‚¨çš„æ•°æ®åº“ã€‚</p><pre class="jr js jt ju fq mw mx my mz aw na dt"><span id="dbed" class="nb kl hu mx b fv nc nd l ne nf">import { NativeModules, DeviceEventEmitter, PermissionsAndroid } from 'react-native'  <br/>import Config from 'react-native-config'  <br/>import get from 'lodash/get'  <br/>const { GeoLocation } = NativeModules</span><span id="9aac" class="nb kl hu mx b fv ng nd l ne nf">class BackgroundGeoLocation {  <br/>  constructor(token, user_id) {<br/>    this.state = null<br/>  }<br/>  start(dispatch, nextState) {<br/>    this.dispatch = dispatch<br/>    const token = get(nextState, 'session.data.token')<br/>    const user_id = get(nextState, 'user.data.user_id')<br/>    const id = get(nextState, 'user.data.id')<br/>    this.state = {<br/>      user_id,<br/>      token,<br/>    }</span><span id="ded9" class="nb kl hu mx b fv ng nd l ne nf">return PermissionsAndroid.check(PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION)<br/>      .then(is_granted =&gt; is_granted === PermissionsAndroid.RESULTS.GRANTED<br/>        ? is_granted<br/>        : PermissionsAndroid.requestMultiple([<br/>          PermissionsAndroid.PERMISSIONS.ACCESS_FINE_LOCATION,<br/>          PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION,<br/>        ])<br/>      )<br/>      .then(_ =&gt; PermissionsAndroid.check(PermissionsAndroid.PERMISSIONS.ACCESS_COARSE_LOCATION))<br/>      .then(is_granted =&gt; is_granted === PermissionsAndroid.RESULTS.GRANTED ? true : new Error())<br/>      .then(_ =&gt; setTimeout(() =&gt; GeoLocation.startService(token, user_id, id, `${Config.API_URL}/live/car-tracking/gps-pos/`), 300))<br/>      .catch(e =&gt; console.log(e))<br/>  }<br/>  stop() {<br/>    return GeoLocation.stopService()<br/>      .then(_ =&gt; console.log(_))<br/>  }</span><span id="dd60" class="nb kl hu mx b fv ng nd l ne nf">handleLocationChange(geo) {<br/>    console.log(geo)<br/>  }<br/>}</span><span id="fe09" class="nb kl hu mx b fv ng nd l ne nf">export default BackgroundGeoLocation</span></pre><p id="3328" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä½œä¸ºä¸€ä¸ªè½¯ä»¶åŒ…ï¼Œå®ƒéœ€è¦å®šæœŸç»´æŠ¤å’Œæ›´æ–°ï¼Œä½†æ˜¯åœ¨GitHubä¸Šæœ‰ä¸€ä¸ªæ¥è‡ªè½¯ä»¶åŒ…åˆ›å»ºè€…çš„æ”¯æŒé¢‘é“ã€‚</p><p id="e119" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">æ³¨:</em>å¥—é¤ä»·æ ¼:iOS â€”å…è´¹ï¼›å®‰å“â€”â€”ä¸€ä¸ªåº”ç”¨300ç¾å…ƒã€‚</p><h1 id="d85d" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">Combo:å°†æœ¬æœºä»£ç è¿æ¥åˆ°JavaScript API</h1><p id="d17e" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">ç¬¬ä¸€ç§æ–¹æ³•(ä½¿ç”¨æœ¬åœ°JavaScript API)çš„ä¸»è¦é—®é¢˜å¯ä»¥é€šè¿‡æ·»åŠ æœ¬åœ°ä»£ç æ¥è§£å†³ï¼Œè¯¥ä»£ç å°†åœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­å¯åŠ¨å‰å°æœåŠ¡ã€‚è¿™æ­£æ˜¯æˆ‘ä»¬åœ¨<a class="ae ki" href="https://djangostars.com/case-studies/azyan/?utm_source=medium&amp;utm_medium=hackernoon.com&amp;utm_campaign=location-based%20app%20with%20react%20native&amp;utm_content=developing%20our%20food%20delivery" rel="noopener ugc nofollow" target="_blank">å¼€å‘æˆ‘ä»¬çš„é€é¤äº§å“Azyan </a>æ—¶æ‰€åšçš„ã€‚éƒ¨åˆ†åŸå› æ˜¯ï¼Œæˆ‘ä»¬é€‰æ‹©è¿™ç§æ–¹å¼æ˜¯å› ä¸ºReact Nativeå¯ä»¥å¾ˆå®¹æ˜“åœ°å°†æœ¬æœºä»£ç è¿æ¥åˆ°React Nativeç»„ä»¶ã€‚</p><pre class="jr js jt ju fq mw mx my mz aw na dt"><span id="ba05" class="nb kl hu mx b fv nc nd l ne nf">package com.djangostars.azyan;</span><span id="636d" class="nb kl hu mx b fv ng nd l ne nf">import android.app.Notification;  <br/>import android.app.NotificationChannel;  <br/>import android.app.NotificationManager;  <br/>import android.content.Context;  <br/>import android.content.Intent;  <br/>import android.content.pm.PackageManager;  <br/>import android.location.Criteria;  <br/>import android.location.Location;  <br/>import android.location.LocationManager;  <br/>import android.os.Build;  <br/>import android.support.v4.content.ContextCompat;</span><span id="b97e" class="nb kl hu mx b fv ng nd l ne nf">import com.facebook.react.bridge.Arguments;  <br/>import com.facebook.react.bridge.Promise;  <br/>import com.facebook.react.bridge.ReactApplicationContext;  <br/>import com.facebook.react.bridge.ReactContextBaseJavaModule;  <br/>import com.facebook.react.bridge.ReactMethod;  <br/>import com.facebook.react.bridge.WritableMap;  <br/>import com.facebook.react.bridge.WritableNativeMap;</span><span id="0487" class="nb kl hu mx b fv ng nd l ne nf">/**<br/> * Created by AGulchenko on 5/7/18.<br/> */</span><span id="7c6a" class="nb kl hu mx b fv ng nd l ne nf">public class GeoLocationModule extends ReactContextBaseJavaModule {  <br/>    public static final String CHANNEL_ID = "ExampleService_Channel";<br/>    public GeoLocationModule(ReactApplicationContext reactContext) {<br/>        super(reactContext);<br/>        if(Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {<br/>            NotificationChannel channel = new NotificationChannel(CHANNEL_ID,"testName", NotificationManager.IMPORTANCE_DEFAULT);<br/>            NotificationManager manager = reactContext.getSystemService(NotificationManager.class);<br/>            manager.createNotificationChannel(channel);<br/>        }<br/>    }</span><span id="7952" class="nb kl hu mx b fv ng nd l ne nf">@Override<br/>    public String getName() {<br/>        return "GeoLocation";<br/>    }</span><span id="c472" class="nb kl hu mx b fv ng nd l ne nf">@ReactMethod<br/>    public void startService(String token, String user_id, String id, String url_string, Promise promise) {<br/>        WritableMap result = Arguments.createMap();<br/>        result.putString("ststus", "success");<br/>        try {<br/>            Intent serviceIntent = new Intent(getReactApplicationContext(), GeoLocationService.class);<br/>            serviceIntent.putExtra("token", token);<br/>            serviceIntent.putExtra("user_id", user_id);<br/>            serviceIntent.putExtra("id", id);<br/>            serviceIntent.putExtra("url_string", url_string);<br/>            getReactApplicationContext().startService(serviceIntent);<br/>            promise.resolve(result);<br/>        } catch (Exception e) {<br/>            e.printStackTrace();<br/>            promise.reject("rrrrr",e);<br/>            return;<br/>        }</span><span id="098a" class="nb kl hu mx b fv ng nd l ne nf">}</span><span id="4c00" class="nb kl hu mx b fv ng nd l ne nf">@ReactMethod<br/>    public void stopService(Promise promise) {<br/>        String result = "Success";<br/>        try {<br/>            Intent serviceIntent = new Intent(getReactApplicationContext(), GeoLocationService.class);<br/>            getReactApplicationContext().stopService(serviceIntent);<br/>        } catch (Exception e) {<br/>            promise.reject(e);<br/>            return;<br/>        }<br/>        promise.resolve(result);<br/>    }</span><span id="1d1f" class="nb kl hu mx b fv ng nd l ne nf">@ReactMethod<br/>    public void getLocation( Promise promise) {<br/>        WritableMap res = Arguments.createMap();<br/>        try {<br/>            LocationManager locationManager = null;</span><span id="92c2" class="nb kl hu mx b fv ng nd l ne nf">locationManager = (LocationManager) this.getReactApplicationContext().getSystemService(Context.LOCATION_SERVICE);<br/>            int permissionCheck = ContextCompat.checkSelfPermission(this.getReactApplicationContext(),<br/>                    android.Manifest.permission.ACCESS_FINE_LOCATION);<br/>            if (permissionCheck == PackageManager.PERMISSION_GRANTED) {<br/>                Criteria criteria = new Criteria();<br/>                String bestProvider = locationManager.getBestProvider(criteria, false);<br/>                Location location = locationManager.getLastKnownLocation(bestProvider);<br/>                if(location != null) {<br/>                    res.putDouble("latitude", location.getLatitude());<br/>                    res.putDouble("longitude", location.getLongitude());<br/>                    promise.resolve(res);<br/>                }</span><span id="87f9" class="nb kl hu mx b fv ng nd l ne nf">}<br/>        } catch (Exception e) {<br/>            promise.reject(e);<br/>            return;<br/>        }<br/>    }<br/>}</span></pre><p id="0854" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è·å¾—è®¿é—®ä½ç½®æ•°æ®çš„è®¸å¯æœ‰æ—¶ä¼šå¸¦æ¥éº»çƒ¦ï¼Œä½†è¿™äº›éº»çƒ¦æ˜¯å¯ä»¥å¿å—çš„ã€‚React Nativeæ²¡æœ‰å¤ªå¤§çš„éº»çƒ¦å°±è§£å†³äº†é—®é¢˜ã€‚</p><p id="b47d" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä¸åŒçš„ç³»ç»Ÿåœ¨ä¸åŒçš„é˜¶æ®µè¦æ±‚è®¿é—®ä½ç½®æ•°æ®çš„æƒé™:iOSåœ¨ä½ ç¬¬ä¸€æ¬¡æ‰“å¼€ä¸€ä¸ªåº”ç”¨æ—¶è¦æ±‚æƒé™ï¼›å®‰å“â€”â€”ä¸‹è½½åã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨æœ¬åœ°ä»£ç ï¼Œè¿™å¯èƒ½ä¼šå¸¦æ¥éº»çƒ¦ï¼Œç„¶è€Œï¼ŒReact Nativeä½¿ç”¨<em class="jp">æ£€æŸ¥å¯¹ä½ç½®æ•°æ®çš„è®¿é—®</em>æ¨¡å—ç®€åŒ–äº†è¿™ä¸ªè¿‡ç¨‹ã€‚å®ƒå…è®¸è®¿é—®ä½ç½®æ•°æ®è€Œä¸è§¦å‘è®¸å¯è­¦æŠ¥ã€‚</p><h1 id="ea4b" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">é˜…è¯»å®Œæ•´çš„Azyanæ¡ˆä¾‹ç ”ç©¶:</h1><figure class="jr js jt ju fq jv fe ff paragraph-image"><a href="https://djangostars.com/case-studies/azyan/?utm_source=medium&amp;utm_medium=hackernoon.com&amp;utm_campaign=location-based%20app%20with%20react%20native&amp;utm_content=azyan_banner"><div class="fe ff nh"><img src="../Images/fc6109afb604720a5fc4e0d1d04c63a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LCH0LbMYVz3RLz3VoRP3-Q@2x.png"/></div></a></figure><blockquote class="kc kd ke"><p id="9d19" class="ir is jp it b iu iv iw ix iy iz ja jb kf jd je jf kg jh ji jj kh jl jm jn jo hn dt translated"><a class="ae ki" href="https://djangostars.com/blog/how-to-develop-a-location-based-application-using-react-native/?utm_source=medium&amp;utm_medium=hackernoon.com&amp;utm_campaign=location-based%20app%20with%20react%20native&amp;utm_content=read%20on%20ds%20blog" rel="noopener ugc nofollow" target="_blank"> <em class="hu">åœ¨</em> <strong class="it hv"> <em class="hu"> Django Starsåšå®¢ä¸Šé˜…è¯»åŸæ–‡ã€‚</em> </strong> </a></p></blockquote><h1 id="d47b" class="kk kl hu bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh dt translated">æ˜¾ç¤ºä½ç½®</h1><p id="6318" class="pw-post-body-paragraph ir is hu it b iu ma iw ix iy mb ja jb jc mc je jf jg md ji jj jk me jm jn jo hn dt translated">ä½ç½®æ•°æ®å¹¶ä¸æ€»æ˜¯ç²¾ç¡®çš„ã€‚ä½ ä¸€å®šè§è¿‡è¿™æ ·çš„ä¸œè¥¿:</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><div role="button" tabindex="0" class="jw jx di jy bf jz"><div class="fe ff kj"><img src="../Images/0e06fb71479f2bf4df52fda513425470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T3XoCiek94nwjpw-"/></div></div></figure><p id="6461" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">è¿™æ˜¯å¯èƒ½å‘ç”Ÿçš„åŸå› :è¯¥è®¾å¤‡ä»ä¸‰ä¸ªæ¥æºæ”¶é›†ä½ç½®æ•°æ®:Wi-Fiã€æ‰‹æœºå’ŒGPSï¼Œåè€…æ˜¯æœ€ä¸å‡†ç¡®çš„ã€‚æˆ‘ä»¬çš„è®¾å¤‡ä¸€ç›´åœ¨æ£€æŸ¥æ˜¯å¦æœ‰è‰¯å¥½çš„äº’è”ç½‘è¿æ¥ã€‚å¦‚æœæ²¡æœ‰ï¼Œè®¾å¤‡å°†å¯ç”¨GPSã€‚å¦‚æœä»4Gåˆ°GPSæœ‰ä¸€ä¸ªå¿«é€Ÿçš„é£è·ƒï¼Œè¿™ä¸ªè®¾å¤‡å°±<em class="jp">â€™</em>ä¸¢äº†ã€‚</p><p id="6009" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘æ¨èGoogleçš„<em class="jp">èåˆä½ç½®å®¢æˆ·ç«¯</em>ã€‚å®ƒå…è®¸æ‚¨è®¾ç½®ä½ç½®æ•°æ®æ›´æ–°çš„æ—¶é—´å’Œè·ç¦»:ä¾‹å¦‚ï¼Œæ¯50ç±³å’Œæ¯10ç§’æ›´æ–°ä¸€æ¬¡æ•°æ®ã€‚æ‚¨å°†é¿å…å˜ˆæ‚çš„æ•°æ®ï¼Œå› ä¸ºè¿™ä¸ªAPIå°†æ‰€æœ‰è®¾å¤‡ä½ç½®ä¸é“è·¯å’Œäººè¡Œé“åŒ¹é…ã€‚ç„¶è€Œï¼Œå¦‚æœè®¾å¤‡ç¦»è¿™ä¸¤è€…éƒ½å¾ˆè¿œï¼Œå®ƒå°±ä¸ä¼šæœ‰æ•ˆã€‚</p><p id="1827" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">å…³äºè®¾è®¡çš„å‡ å¥è¯</strong></p><p id="0012" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">åœ¨è¿™ä¸ªç®€çŸ­çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†å‘Šè¯‰æ‚¨æ„å»ºåŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºå¯èƒ½ä¼šé‡åˆ°çš„éšœç¢ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨Reactæœ¬åœ°ç»„ä»¶æ¥è§£å†³å®ƒä»¬ã€‚</p><p id="8ab9" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">React Nativeå…è®¸ä»¥ç®€å•çš„æ–¹å¼æ˜¾ç¤ºåœ°å›¾ã€‚ç”¨äº<em class="jp">ææ–™è®¾è®¡</em>çš„It UIç»„ä»¶ç®€åŒ–äº†å·¥ç¨‹å¸ˆçš„å·¥ä½œã€‚æˆ‘ä»¬å°†ä½¿ç”¨ææ–™è®¾è®¡æ¥åˆ›å»ºä¸€ä¸ªè°·æ­Œåœ°å›¾åŒ…è£…å™¨ï¼Œç„¶åReact Nativeå°†æ ¹æ®æ¯ä¸ªå¹³å°çš„ç‰¹å®šåŠŸèƒ½æ¥è°ƒæ•´å®ƒä»¬ã€‚</p><p id="e0c5" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><em class="jp">æ— é™åˆ—è¡¨</em>æ˜¯Reactçš„ä¸€ä¸ªåŸç”Ÿç‰¹æ€§ï¼Œå¯ä»¥ç”Ÿæˆæ— é™çš„æœç´¢ç»“æœåˆ—è¡¨ã€‚åœ¨ä¼˜æ­¥ï¼Œå¦‚æœä½ å¼€å§‹è¾“å…¥ä¸€ä¸ªåœ°å€ï¼Œä½ ä¼šå¾—åˆ°ä»ä½ è¾“å…¥çš„å¼€å§‹çš„æ‰€æœ‰ç›®çš„åœ°ã€‚æ‰€ä»¥è¯•è¯•<em class="jp">ç¬¬ä¸‰å¤§é“</em>ï¼Œå®ƒä¼šæ˜¾ç¤ºå‘¨å›´æ‰€æœ‰çš„ç¬¬ä¸‰å¤§é“ã€‚è¿™æ ·çš„åˆ—è¡¨å¹¶ä¸æ˜¯æ— æ­¢å¢ƒçš„â€”â€”å®ƒä»¬åªæ˜¯åœ¨æˆ‘ä»¬å‘ä¸‹æ»šåŠ¨æ—¶è½½å…¥æ›´å¤šçš„ç»“æœã€‚<em class="jp">å¹³é¢åˆ—è¡¨â€” </em>å¦ä¸€ä¸ªå†…ç½®UIç»„ä»¶åŒ…æ‹¬å›ºå®šçš„é¡µçœ‰ã€é¡µè„šå’Œæœç´¢åˆ†éš”ç¬¦ã€‚å¦‚æœæ‚¨è¦ä»å¤´å¼€å§‹åˆ›å»ºè¿™æ ·çš„ç»“æœåˆ—è¡¨ï¼Œè¿™å°†æ¯”æ„å»ºä¸€ä¸ªå®Œæ•´çš„ReactåŸç”Ÿåº”ç”¨ç¨‹åºèŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚</p><pre class="jr js jt ju fq mw mx my mz aw na dt"><span id="4dd4" class="nb kl hu mx b fv nc nd l ne nf">&lt;FlatList  <br/>        data={get(props, 'order.data.items', [])}<br/>        renderItem={listItem}<br/>        keyExtractor={({ id }) =&gt; id}<br/>        style={style.list}<br/>      /&gt;</span><span id="c77d" class="nb kl hu mx b fv ng nd l ne nf">function listItem({ item: { quantity, name } }) {  <br/>  return (<br/>    &lt;View style={style.main}&gt;<br/>      &lt;Text style={[style.count, style.listItemText]}&gt;{quantity}&lt;/Text&gt;<br/>      &lt;Text style={[style.listItemText, style.name]}&gt;{name}&lt;/Text&gt;<br/>    &lt;/View&gt;<br/>  )<br/>}</span></pre><p id="5303" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated"><strong class="it hv">åº•çº¿</strong></p><p id="38d6" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">å¦‚æœæ‚¨æ‰“ç®—æ„å»ºä¸€ä¸ªåŸºäºä½ç½®çš„åº”ç”¨ç¨‹åºï¼ŒReact Nativeå¯èƒ½æ˜¯æ­£ç¡®çš„é€‰æ‹©ã€‚å¦‚æœå¤§éƒ¨åˆ†æè¿°çš„ä¼˜åŠ¿å¯¹ä½ æ¥è¯´éƒ½æ˜¯çœŸçš„ï¼Œé‚£å°±å»å¯¹è¿™é¡¹æŠ€æœ¯åŠå…¶èƒ½åŠ›åšæ›´æ·±å…¥çš„ç ”ç©¶å§ã€‚</p><p id="c745" class="pw-post-body-paragraph ir is hu it b iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo hn dt translated">æˆ‘ç°åœ¨é¼“åŠ±ä½ å¤šå…³æ³¨ä½ ä½¿ç”¨çš„åº”ç”¨ç¨‹åºã€‚ä½ ä¼šæƒŠè®¶åœ°å‘ç°ï¼Œå¤§å¤šæ•°äººéƒ½è¦æ±‚å…è®¸è¿›å…¥ä½ çš„ä½ç½®ã€‚å¯¹äºè®¸å¤šå…¬å¸æ¥è¯´ï¼Œäº†è§£ç”¨æˆ·ä½ç½®ä»¥æä¾›é«˜è´¨é‡å’Œæ›´é¢å‘ç”¨æˆ·çš„æœåŠ¡æ˜¯è‡³å…³é‡è¦çš„ã€‚ä½ ä¸ºä»€ä¹ˆä¸è¯•è¯•ï¼Ÿ</p><figure class="jr js jt ju fq jv fe ff paragraph-image"><a href="https://djangostars.com/services/mobile-app-development/?utm_source=medium&amp;utm_medium=hackernoon.com&amp;utm_campaign=location-based%20app%20with%20react%20native&amp;utm_content=banner_end"><div class="fe ff ni"><img src="../Images/da4e4e9f8b0e35dad04f65bdac98bbae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Em3kwOGRgu3FLaKpXJGzLw.png"/></div></a></figure><blockquote class="nj"><p id="3f71" class="nk nl hu bd nm nn no np nq nr ns jo ek translated">å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰ç”¨ï¼Œè¯·ç‚¹å‡»ğŸ‘ä¸‹é¢çš„æŒ‰é’®:)</p></blockquote></div></div>    
</body>
</html>