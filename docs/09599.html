<html>
<head>
<title>Progressive Web Apps (PWAs) FTW — Pt. 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">渐进式网络应用(PWAs) FTW — Pt。一</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/pwas-ftw-pt-1-37729432d529?source=collection_archive---------8-----------------------#2018-11-26">https://medium.com/hackernoon/pwas-ftw-pt-1-37729432d529?source=collection_archive---------8-----------------------#2018-11-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/cfa3a3e8187fb59d499e1c17623e635d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oGZniVn0jfVzLYkNgX4dQA.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Progressive Web Apps</figcaption></figure><h2 id="4552" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">介绍</h2><p id="f80c" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky hn dt translated">上个月，我有幸在令人惊叹的<a class="ae kz" href="https://summit2018.reversim.com/session/5b1041fd892ac30014816955.html" rel="noopener ugc nofollow" target="_blank"> Reversim峰会</a>上谈论了渐进式网络应用。本系列将总结该演讲的内容。如果你喜欢看视频，你可以在这里看到它:</p><figure class="la lb lc ld fq iv"><div class="bz el l di"><div class="le lf l"/></div></figure><h2 id="4428" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">为什么</h2><p id="aa90" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky hn dt translated">渐进式网络应用程序在这里帮助我们在移动网站和应用程序之间架起UX的桥梁。但是在我们开始之前，让我们先了解一下原因。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lg"><img src="../Images/fe8efb21c9aa0ac77887dfb184c9f1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sM0ekWDJqnvj6Fb6omilvQ.png"/></div></div></figure><p id="37e5" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">去年<a class="ae kz" href="https://hackernoon.com/tagged/google" rel="noopener ugc nofollow" target="_blank">谷歌</a>公布，手机网站的月独立访客比本地应用多了近3倍<strong class="kg hv"/>。如果是这样的话，那么我们为什么还要开发移动应用程序呢？答案是用户参与度。用户在原生应用上的参与度几乎是移动网站的10倍。太惊人了！</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lm"><img src="../Images/fb03cfc0a8989e7144601b1b91589728.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rwem56YNbLLv3Rm-7dmn2w.png"/></div></div></figure><p id="3365" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">这是因为本地应用程序有更好的工具来保持用户参与，从而增加了用户在应用程序中花费的时间。推送通知、用户主屏幕上的应用程序图标以及对硬件API(如<a class="ae kz" href="https://hackernoon.com/tagged/gps" rel="noopener ugc nofollow" target="_blank"> GPS </a>、摄像头和Wi-Fi管理器)的访问等功能只是帮助创建更好的沉浸式体验的一部分。但对我们来说幸运的是，web UX正在以PWAs的形式快速改进。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ln"><img src="../Images/736e30515d830e2ed083f4f1aded7180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BvyZFWXsFO53_Ker69gZTg.png"/></div></div></figure><blockquote class="lo lp lq"><p id="a4f2" class="ke kf lr kg b kh lh kj kk kl li kn ko ls lj kq kr lt lk kt ku lu ll kw kx ky hn dt translated">在这一点上，必须提到pwa是非二进制的。不是说你要么有PWA要么没有。相反，PWAs描述了一套新的web APIs，使web应用程序能够提供更好的体验。</p></blockquote><p id="cb6b" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">此外，您可以选择使用特定的PWA API。此外，可以使用这样的API，这样，如果用户的浏览器不支持新的API，他们可以继续获得完全正常的体验。正是由于这些原因，PWA正在被整个行业迅速采用。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lv"><img src="../Images/bc6bd8a43f0e67bf49a59e97f08e4c93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1DKUksgSujD50i-gdArfpg.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Companies using PWA in production</figcaption></figure><p id="2699" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">查看PWAs的采用如何改善了福布斯移动用户的UX。</p><figure class="la lb lc ld fq iv"><div class="bz el l di"><div class="le lf l"/></div></figure><h2 id="c7f7" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">PWAs底线</h2><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lw"><img src="../Images/7172bc6a628de6d9ac28bd8f9c138a49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KGr_BOYQ-uml2hKFrwLdJA.png"/></div></div></figure><h2 id="e074" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">怎么</h2><p id="b643" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky hn dt translated">让我们开始讨论如何将我们现有的网站转换成PWAs。我们将首先在用户的主屏幕上添加一个图标。在这篇文章中，我将使用我的<a class="ae kz" href="https://omergoldberg.com" rel="noopener ugc nofollow" target="_blank">作品集网站</a>作为我们转换为PWA的网站的例子。图标最终在主屏幕上会是这样的。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div class="fe ff lx"><img src="../Images/11eaef5af704ede9ad2015c2cdd9b7b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*ru0hG8qzJLuMvZlezhZXGA.png"/></div></figure><p id="3183" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">该网站将提示用户以两种不同的方式添加到主屏幕，如下图所示。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ly"><img src="../Images/42541fa8a7d4bbcf35df62f13e6185e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZKpKhSzMPjsedSl7oc0Bow.png"/></div></div></figure><h2 id="997f" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">如何将图标添加到主屏幕</h2><p id="be65" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky hn dt translated">为了让浏览器提示用户在主屏幕上添加图标，我们需要三样东西。</p><ol class=""><li id="8225" class="lz ma hu kg b kh lh kl li jr mb jv mc jz md ky me mf mg mh dt translated">包括web清单</li><li id="e600" class="lz ma hu kg b kh mi kl mj jr mk jv ml jz mm ky me mf mg mh dt translated">通过https服务我们的网站</li><li id="7231" class="lz ma hu kg b kh mi kl mj jr mk jv ml jz mm ky me mf mg mh dt translated">注册服务人员</li></ol><p id="6c90" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">如果你曾经开发过chrome扩展或任何类型的基于节点的应用程序，那么<em class="lr"> manifest.json </em>看起来会很熟悉。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/8c85edabaf76a864a166232d239eb1b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qI-nEHA5ynY84EJ42ioyFw.png"/></div></div></figure><p id="d8bb" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">当然，我们想告诉我们的web应用程序的主要入口点(例如index.html ),我们的清单是存在的。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mo"><img src="../Images/d469b74424939ade7e6a3e637497295e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0GMZkBMjBfxRxNTCJVa2AQ.png"/></div></div></figure><p id="5385" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">我们来分析一下清单文件。<em class="lr">显示</em>键描述了当用户从主屏幕启动我们的web应用程序时，他们将如何看到它。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/c6c054c72ce958c69135f2c8c556bdf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n1Y9YHwL8b7R7zNE05CIow.png"/></div></div></figure><p id="b670" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated"><em class="lr">独立</em>看起来像一个独立的应用程序(惊人的命名),给了我们的网站很大的屏幕空间。以下是<em class="lr">显示</em>键可以采用的一些其他值。</p><pre class="la lb lc ld fq mq mr ms mt aw mu dt"><span id="24dd" class="jg jh hu mr b fv mv mw l mx my">fullscreen -&gt; All available display area is used (great for a game)<br/>standalone -&gt; Look &amp; feel like a standalone app (wide support)<br/>minimal-ui -&gt; “light browser” UI. Doesn’t have own window. (when you click on a link on a website and see the minimal ui, like only the share button)<br/>browser -&gt; Conventional web app in a browser (default value, if you specify nothing at all, wide support)</span></pre><p id="fe10" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">现在让我们来看看强制名称字段。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/371a0a76ae193daff73e1f2bd9e190cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SWrB7tHnkiNQGm6WMRkVKw.png"/></div></div></figure><p id="5908" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">您必须至少提供<em class="lr"> short_name </em>或<em class="lr"> name </em>属性。如果两者都提供，<em class="lr"> short_name </em>用于用户的主屏幕、启动器或其他空间有限的地方。<em class="lr">名称</em>用于app安装提示。</p><p id="a617" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">现在让我们看看清单中重要的<em class="lr">图标</em>键。如果我们想在用户的主屏幕上显示一个图标，我们需要这些:)</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/d1a8cc3ebf54c34f6a26ec92afea161b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*waD7-bNRIS5oXxWSf90vEg.png"/></div></div></figure><p id="a8de" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">当用户将您的站点添加到他们的主屏幕时，您可以定义一组图标供操作系统使用。这些图标用在主屏幕、应用程序启动器、任务切换器、闪屏等地方。<br/> <em class="lr"> icons </em>是一个图像对象的数组，每个对象都应该包括src，一个sizes属性，以及图像的类型。这些尺寸对于PWA是强制性。对于更清晰的图标，我们可以提供40px增量的图标大小。然后，操作系统将决定何时何地显示哪个尺寸的图标，以获得最佳的外观和感觉。</p><p id="79bc" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">最后，让我们看看<em class="lr">背景色</em>键值对。</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nb"><img src="../Images/01ad5a3dd925af7cc339626baf37c98d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QHp5K0nXfWBJeA4VfofB9Q.png"/></div></div></figure><p id="b74b" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">当应用程序启动时，PWA会为我们生成一个闪屏。闪屏是由应用程序图标和背景色创建的。</p><p id="61ba" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">最后，我们可以测试我们的manifest.json是否有效，方法是检查浏览器是否已经加载了它，并且可以读取所有的值。您可以打开开发工具，导航到<em class="lr">应用程序</em>选项卡，然后单击manifest。它应该是这样的:</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nc"><img src="../Images/a4bcb5052638c25962af1433a806976a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wj9Lh9clZyk8A6onS8u_-w.png"/></div></div></figure><figure class="la lb lc ld fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nd"><img src="../Images/cb45891cda52104086aa69a4ed63bb2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84J3w9RPJNl2HJeGZju33A.png"/></div></div></figure><p id="fe34" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">当用户从主屏幕点击新添加的图标时，他们将看到以下内容:</p><figure class="la lb lc ld fq iv fe ff paragraph-image"><div class="fe ff ne"><img src="../Images/68560982edebfe02cf2970f2fb92923d.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*EBi7pdLr7jQ_nF6SfTsgCg.png"/></div></figure><p id="5278" class="pw-post-body-paragraph ke kf hu kg b kh lh kj kk kl li kn ko jr lj kq kr jv lk kt ku jz ll kw kx ky hn dt translated">这只是艾滋病人的冰山一角。本系列的下一篇文章将深入研究服务工作者，这是支持许多PWA APIs的核心技术。</p><h2 id="08db" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">如果这篇文章有帮助，请订阅并点击鼓掌👏按钮以示支持！⬇⬇</h2><p id="7f78" class="pw-post-body-paragraph ke kf hu kg b kh ki kj kk kl km kn ko jr kp kq kr jv ks kt ku jz kv kw kx ky hn dt translated">你可以在<a class="ae kz" href="https://www.instagram.com/omeragoldberg/" rel="noopener ugc nofollow" target="_blank"> Instagram </a>、<a class="ae kz" href="https://www.linkedin.com/in/omer-goldberg-680b40100/" rel="noopener ugc nofollow" target="_blank"> Linkedin </a>和<a class="ae kz" rel="noopener" href="/@omergoldberg"> Medium </a>上关注我，了解更多科技相关内容！</p><figure class="la lb lc ld fq iv"><div class="bz el l di"><div class="nf lf l"/></div></figure></div></div>    
</body>
</html>