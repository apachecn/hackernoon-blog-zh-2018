<html>
<head>
<title>Deprecations and Changes for PHP 7.3 [Avoid Errors]</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PHP 7.3的弃用和变更[避免错误]</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/deprecations-and-changes-for-php-7-3-avoid-errors-7a5c4dbeaa8b?source=collection_archive---------0-----------------------#2018-11-27">https://medium.com/hackernoon/deprecations-and-changes-for-php-7-3-avoid-errors-7a5c4dbeaa8b?source=collection_archive---------0-----------------------#2018-11-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/65ac23d3e513421b28c59bce23120af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QeBopjQE49Zcn_c-DiJLVw.jpeg"/></div></div></figure><p id="2b2d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">随着<a class="ae ka" href="https://hackernoon.com/tagged/php" rel="noopener ugc nofollow" target="_blank"> PHP </a> 7.3的发布，你准备好迎接新的变化了吗？</p><p id="a355" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这篇博文中，我将指导你完成更新代码的<strong class="je hv">过程</strong>，这样你就可以避免错误并尽可能顺利地工作。</p><h1 id="4c9b" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">介绍</h1><p id="c847" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">我们最喜欢的<a class="ae ka" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程语言</a>的新版本PHP 7.3的官方发布日期已经不多了，</p><p id="fa88" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为一名Web开发人员，我既兴奋又担忧。</p><p id="445d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你阅读了我发表的另一篇文章，你就会知道，在新版本中，新的特性已经被添加，这将有助于工作并提高代码的质量，但同时，当你是最新的时，你必须<strong class="je hv">关注那些不再兼容的特性，这些特性会给已经存在的代码带来问题</strong>。</p><p id="11e2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这篇文章中，</p><p id="7c3f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我分享的正是您开始成功迁移应用程序所需了解的内容，</p><p id="05cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">包括:</p><p id="8696" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">删除所有不推荐使用的功能</strong>，如果保留这些功能会导致错误，而<strong class="je hv">会让您了解新的改进</strong>，比如散列密码和创建常数的新系统</p><p id="d749" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">听起来像个计划吗？让我们开始吧！</p><h1 id="6447" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">跟随系列…</h1><p id="faf9" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这篇博文是“<a class="ae ka" href="https://amzn.to/2OfCZej" rel="noopener ugc nofollow" target="_blank"> <strong class="je hv"> PHP 7.3及其圣诞礼物</strong></a><strong class="je hv">”</strong>的第三部分</p><p id="46b3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你还没有阅读其他部分</p><p id="adc6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以点击下面的链接查看其他博客文章<br/><a class="ae ka" href="http://anastasionico.uk/blog/php-73" rel="noopener ugc nofollow" target="_blank">PHP 7.3简介和新语法</a><br/><a class="ae ka" href="http://anastasionico.uk/blog/php-7-3-new-features" rel="noopener ugc nofollow" target="_blank">PHP 7.3的新特性</a><br/><a class="ae ka" href="http://anastasionico.uk/blog/php-7-3-deprecations-changes" rel="noopener ugc nofollow" target="_blank">弃用和变化</a></p><h1 id="acdc" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">贬值</h1><figure class="lf lg lh li fq iv fe ff paragraph-image"><div class="fe ff le"><img src="../Images/d4de2974e19c5eef5f657f63c92c2fe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/0*bGvgLtp-_d_uqRh8.png"/></div></figure><h1 id="2385" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">正在删除image2wbmp()</h1><p id="394f" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">让我们从分解这个函数的名字开始！</p><p id="a17e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">图像— 2 — wbmp()</p><p id="b821" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我必须说这个函数的目的很简单。</p><p id="cd21" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> Wbmp格式也称为无线位图，是针对移动设备优化的单色图像。</strong></p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="f7df" class="lo kc hu lk b fv lp lq l lr ls">bool imagewbmp(resource $image [, mixed $to [, int $foreground]]);</span></pre><p id="1769" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该函数接受3个参数(资源、带有保存文件路径的字符串和整数格式的前景色),并根据所提供图像的wbmp版本的保存输出返回一个布尔值。</p><p id="e219" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个函数之所以被弃用，并且在PHP的未来版本中肯定会被删除，是因为已经有一个函数具有完全相同的功能。</p><p id="17ca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它是imagewbmp()，</p><p id="60eb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从快速研究GitHub <a class="ae ka" href="https://github.com/search?l=PHP&amp;q=imagewbmp&amp;type=Code" rel="noopener ugc nofollow" target="_blank"> <em class="lt"> imagewbmp </em> </a>和<a class="ae ka" href="https://github.com/search?l=PHP&amp;q=image2wbmp&amp;type=Code" rel="noopener ugc nofollow" target="_blank"><em class="lt">image2 BMP</em></a>。</p><p id="4b7b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你会看到imagewbmp()的使用率要高得多，所以创建者所做的只是消除了较少使用的。</p><p id="4d79" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从PHP的下一个版本开始，对image2wbmp()的每次调用都会抛出一个弃用警告，而在接下来的版本中，当它肯定会被删除时，它会抛出一个致命错误。</p><p id="4f3b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了更新您的脚本，如果您正在使用image2wbmp()，您需要做的只是用imagewbmp()替换它，</p><p id="0366" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">代码会做同样的事情，并且不会有警告或错误。</p><h1 id="a96d" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">已弃用FILTER_FLAG_SCHEME_REQUIRED和FILTER_FLAG_HOST_REQUIRED</h1><p id="3926" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">这两个标志属于filter_var()函数。</p><p id="986f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> filter_var()使用web开发者指定的标志过滤变量。</strong></p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="e92e" class="lo kc hu lk b fv lp lq l lr ls">mixed filter_var(mixed $variable<!-- --> <!-- -->[, int $filter<!-- --> <!-- -->= FILTER_DEFAULT [, mixed $options<!-- --> <!-- -->]]);</span></pre><p id="2c22" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">第一个参数是需要过滤或验证的变量，</strong></p><p id="52cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">第二个参数称为flag，包含需要应用的过滤器的ID。</strong></p><p id="3d33" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这里列出了PHP  中所有可用的<a class="ae ka" href="https://secure.php.net/manual/en/filter.filters.php" rel="noopener ugc nofollow" target="_blank"> <em class="lt">过滤器类型。</em></a></p><p id="4212" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">第三个参数its是强制的，需要以数组或标志位析取的形式出现。</strong></p><p id="8c98" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您不熟悉方括号，它们的意思是里面的参数不是强制的，您可以避免插入它们，以确保不会出现任何错误。</p><p id="d1fa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于filter参数，原因是默认情况下PHP将使用FILTER_DEFAULT。</p><p id="c0b5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是PHP 7.3的变化。</p><p id="a766" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从PHP 5.2.1开始，这两个标志被包含在FILTER_VALIDATE_URL中，即使你没有指定它们。</p><p id="ee01" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">总而言之，</p><p id="1a7c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">这两个常量是无用的</strong>，正如RFC中所写的，它们已经造成了错误的印象，即方案和主机都可以被禁用。</p><p id="68f3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果你有使用这两个标志的代码，把它们移除就可以了。</p><h1 id="b3d4" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">弃用不区分大小写的常量</h1><p id="5fc7" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">目前，PHP 7.2版本支持区分大小写和不区分大小写的常量。</p><p id="4cb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这些字母不经常使用，但使用时会导致不一致。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="7adf" class="lo kc hu lk b fv lp lq l lr ls">bool define(string $name<!-- --> <!-- -->, mixed $value<!-- --> <!-- -->[, bool $case_insensitive<!-- --> <!-- -->= FALSE ]);</span></pre><p id="efa2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">函数的最后一个参数是一个布尔值，如果设置为TRUE，常量将被定义为不区分大小写。</p><p id="706e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也就是说圣诞老人和圣诞老人会代表不同的价值观。</p><p id="b989" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如其名，</p><p id="4274" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">常量必须是常量</strong>，也就是说声明后不能更改。</p><p id="cfdc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于不区分大小写的常量，此规则不成立。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="2d8b" class="lo kc hu lk b fv lp lq l lr ls">define('SANTA', 42);<br/>var_dump(SANTA); // int(42)<br/>define('SANTA', 24); // Notice: Constant FOO already defined<br/>var_dump(SANTA); // int(42)</span></pre><p id="2920" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果区分大小写和不区分大小写的常量混合使用:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="f10a" class="lo kc hu lk b fv lp lq l lr ls">define('santa', 42, true);<br/>var_dump(SANTA); // int(42)<br/>define('SANTA', 24);<br/>var_dump(SANTA); // int(24)</span></pre><p id="fd83" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">前面的代码实际上改变了已定义常量的值，这不是我们想要的行为。</p><p id="7f54" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">PHP 7.3中会有各种不同:</p><ul class=""><li id="8c34" class="lu lv hu je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc dt translated">将第三个参数定义为TRUE的可能性已被否决，并将在8.0.0版中明确删除；</li><li id="91f8" class="lu lv hu je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc dt translated">不可能再用不同于define函数中使用的格式来访问不区分大小写的常量。</li></ul><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="1460" class="lo kc hu lk b fv lp lq l lr ls">define('Santa', 'Claus', true);</span></pre><p id="e6ce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">前面的代码会抛出“<em class="lt">已弃用:define():不区分大小写的常量声明已弃用</em>”，</p><p id="cae1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您尝试使用另一种大小写来访问刚刚定义的常量，将会导致“不推荐使用:不区分大小写的常量不推荐使用。</p><p id="bb02" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该常量的正确大小写是“Santa”</p><p id="f50e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">与其他更新不同，</p><p id="6a3e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要修复代码中所有可能出现的问题，您需要参考一些资源。</p><p id="e889" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">你一定在寻找所有不区分大小写的常量。</strong></p><p id="8b28" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">好消息是，你必须直接声明常量，只需检查第三个参数设置为真的define function。</p><h1 id="5fd8" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">变化</h1><h1 id="cbc9" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">PCRE到PCRE2迁移</h1><p id="9ac0" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae ka" href="http://www.pcre.org/pcre.txt" rel="noopener ugc nofollow" target="_blank"> <em class="lt"> Perl兼容正则表达式</em> </a>，也叫PCRE，是PHP用来处理正则表达式的库。</p><p id="7bef" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv"> PCRE由一组函数组合而成，这些函数实现了与Perl 5相同的语法和语义相匹配的正则表达式模式，</strong></p><p id="42a2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它不能再被禁用了。</p><p id="2b16" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当您意识到PHP仍然使用1.0版的未被利用的库时，问题就来了，</p><p id="9aeb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">与此同时，新版本PCRE2于2005年发布。</p><p id="b56b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这主要是PHP的核心功能，因此在大多数情况下，它不会影响该语言的用户，但你需要注意一些可能影响你当前使用PHP的修改。</p><p id="1e74" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是一些不同之处</p><ul class=""><li id="359c" class="lu lv hu je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc dt translated">默认情况下，修改器S现在是打开的。PCRE做了一些额外的优化。</li><li id="55d6" class="lu lv hu je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc dt translated">默认情况下，选项X是禁用的。它使PCRE比以前做更多的语法验证。</li><li id="a9ef" class="lu lv hu je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc dt translated">使用的是Unicode 10，而它是Unicode 7。这意味着更多的表情符号，更多的字符，和更多的集合。Unicode正则表达式可能会受到影响。</li><li id="912a" class="lu lv hu je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc dt translated">一些无效模式可能会受到影响。</li></ul><p id="7377" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">简单来说，</p><p id="354e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">PSRE2在模式验证方面更加严格，因此在升级之后，一些现有的模式无法再编译。</p><p id="e5f2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是在php.net使用的简单片段</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="a009" class="lo kc hu lk b fv lp lq l lr ls">preg_match('/[\w-.]+/', ''); // this will not work in PHP7.3<br/>preg_match('/[\w\-.]+/', ''); // the hyphen need to be escaped</span></pre><p id="086f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">正如你从上面的例子中看到的，这两行之间有一点点但是实质性的不同。</p><p id="6913" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">现在需要对连字符进行转义，</strong></p><p id="3991" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这可能是你会遇到的最常见的不兼容原因之一。</p><p id="42d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此外，PHP在林挺时间期间不lint regex，</p><p id="08a2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">建议检查你在应用程序中使用的所有正则表达式，并用PHP 7.3测试它们。</p><p id="89e1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Exakat.io提供了一个<a class="ae ka" href="https://phpa.me/exakat-regex-ci" rel="noopener ugc nofollow" target="_blank"> <em class="lt">完整的regex清单</em> </a></p><p id="20f8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">实现这个新特性可能比之前看到的其他特性更有问题，</p><p id="287b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">事实上，一些对<em class="lt"> preg_match() </em>的调用可能会停止工作。</p><p id="849f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在把你的PHP升级到7.3版本之前，我建议检查一下，如果需要的话，更新或者重写你需要的模式。</p><p id="3af9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">还有，</p><p id="4d4c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">运行单元测试以查找编译期间的错误。</p><h1 id="ff55" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">compact()中未定义的变量</h1><p id="8d89" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">compact()是一个神奇的数组函数，它允许通过使用一个或多个变量的名称作为参数来创建数组。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="a404" class="lo kc hu lk b fv lp lq l lr ls">$name<!-- -->  <!-- -->= "Claus";</span><span id="4950" class="lo kc hu lk b fv mi lq l lr ls">$title<!-- --> <!-- -->= "Santa";</span><span id="d8aa" class="lo kc hu lk b fv mi lq l lr ls">$residency<!-- --> <!-- -->= "North Pole";</span><span id="0c25" class="lo kc hu lk b fv mi lq l lr ls">$result<!-- --> <!-- -->= compact("name", "title", "residency", "reindeer");</span><span id="f820" class="lo kc hu lk b fv mi lq l lr ls">Array</span><span id="a11a" class="lo kc hu lk b fv mi lq l lr ls">[</span><span id="4bbf" class="lo kc hu lk b fv mi lq l lr ls">    [name] =&gt; Claus</span><span id="0268" class="lo kc hu lk b fv mi lq l lr ls">    [title] =&gt; Santa</span><span id="d5a4" class="lo kc hu lk b fv mi lq l lr ls">    [residency] =&gt; North Pole</span><span id="21bf" class="lo kc hu lk b fv mi lq l lr ls">];</span></pre><p id="bc47" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在前面的示例中，变量<em class="lt"> $result </em>是一个数组，包含以键的形式选择的变量的名称和以值的形式选择的变量的值。</p><p id="82de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在过去的十年中，由于PHP框架的指数级使用，以及后者在MVC模型上使用模板引擎的事实，</p><p id="6b86" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个功能的使用已经增加了很多。</p><p id="1205" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">在PHP 5.3版本之前，该方法提供的一个特性是，如果我们插入一个引用不存在的变量的字符串，脚本将简单地忽略该参数。</strong></p><p id="cb8f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">从长远来看，特别是对于注意力分散的web开发人员，这通常会导致视图中缺少变量(在MVC的情况下)或缺少数据。</p><p id="068a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">有了出色的32 vs 5，最后，在安装了新版本的编程语言之后，compact()将开始用下面的通知来报告这些丢失的变量。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="1325" class="lo kc hu lk b fv lp lq l lr ls">// Notice: compact(): Undefined variable: reindeer</span></pre><p id="690c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">请小心，因为当更新您当前的项目时，您可能会遇到大量刚才提到的通知。</p><p id="8b8e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果修复所有实例导致压倒性的结果，一个好主意可能是通过使用<em class="lt"> @操作符</em>并一个接一个地修复案例来回到旧的情况。</p><h1 id="54be" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">Argon2密码哈希增强</h1><p id="0e3e" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">开发人员总是致力于增强安全性和密码哈希，这是一件好事。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mj"><img src="../Images/26924bd4ba21359821d6dc3d78c4cc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*49TDEalvCDtt9Z-D.jpg"/></div></div></figure><p id="8ec9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">努力实现更好的保护级别至关重要，尤其是在讨论我们的数据时。</p><p id="6761" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">PHP 7.2实现了一种叫做Argon2的新散列算法，这是Bcrypt的替代方案。</p><p id="9ec2" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Argon2有三种不同的版本</p><p id="c34f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">它们是:</p><ul class=""><li id="08f9" class="lu lv hu je b jf jg jj jk jn lw jr lx jv ly jz lz ma mb mc dt translated">Argon2d是其中最快的，它使用数据依赖的内存访问，最大限度地抵抗GPU攻击。</li><li id="b869" class="lu lv hu je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc dt translated">Argon2i则使用与数据无关的内存访问，这是密码哈希的首选方法，但速度较慢，因为为了防止攻击，会对内存进行哈希处理</li><li id="39aa" class="lu lv hu je b jf md jj me jn mf jr mg jv mh jz lz ma mb mc dt translated">然后我们有Argon2id，它是结合了其他两个版本的版本</li></ul><p id="4fae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在PHP7.3中，您可以添加常量PASSWORD_ARGON2ID作为<em class="lt"> password_hash() </em>函数的标志。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="35e9" class="lo kc hu lk b fv lp lq l lr ls">password_hash('password', PASSWORD_ARGON2ID);</span></pre><p id="94f3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">关于这种新方法有几个细节，如并行度因子、内存成本和时间成本计算，但我会将它们保存下来，并简单地向您展示在您想要选择这种类型的哈希时可以使用的语法。</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="1c91" class="lo kc hu lk b fv lp lq l lr ls">$options = ['memory_cost' =&gt; 1&lt;&lt;11, 'time_cost' =&gt; 4, 'threads' =&gt; 2];<br/>password_hash('password', PASSWORD_ARGON2ID, $options);</span></pre><p id="31bb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接受这个新算法的另一个函数是<em class="lt"> password_needs_rehash() </em>，它检查提供的散列是否实现了算法和提供的选项，并相应地返回一个布尔值。</p><p id="7798" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">示例:</p><pre class="lf lg lh li fq lj lk ll lm aw ln dt"><span id="fc86" class="lo kc hu lk b fv lp lq l lr ls">$hash = password_hash('password', PASSWORD_ARGON2ID);<br/>password_needs_rehash($hash, PASSWORD_ARGON2ID, ['memory_cost' =&gt; 1&lt;&lt;17]);</span></pre><h1 id="a1f0" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论</h1><p id="2548" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在这篇文章中，</p><p id="f791" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我已经提供了所有相关变化和改进的深度摘要，</p><p id="2e6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果一切按计划进行，再过几天这些改动就会正式发布(PHP 7.3预计在12月13日发布)。</p><p id="319b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">与此同时，你正在等待这些更新(这可能会令人沮丧，我现在)有几个权宜之计，你可以申请，以便为他们做好准备。</p><p id="8cc5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，</p><p id="13dd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">你可以更新你的代码，检查并消除与新版本的所有不兼容之处，</strong></p><p id="3765" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在每一个新特性的每一部分看到是否有任何向后兼容的问题，一个好主意是把这篇文章的所有部分都扔掉(我提醒你，它分为3个主要部分),看看它们在你的代码中是否受支持。</p><p id="e757" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一个例子是获取代码中的所有正则表达式，并用新的PCRE2林挺它们。</p><p id="6fa7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以为PHP 7.3使用<strong class="je hv">poly fill</strong></p><p id="c072" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">此外，运行Exakat并查找问题。</p><p id="15e1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最终，</p><p id="2e88" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当然，<strong class="je hv">运行你的单元测试。</strong></p><p id="1d78" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">如果您的应用程序中没有任何测试，并且您没有使用自动化测试，</p><p id="6d09" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">编写测试，然后运行它们！。</p><p id="741d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最后一点:RFC上PHP 7.3提案的完整列表和GitHub的PHP 7.3注释可以在这些链接上找到。</p><figure class="lf lg lh li fq iv fe ff paragraph-image"><a href="http://eepurl.com/dIZqjf"><div class="fe ff mk"><img src="../Images/81f240e8dd073aab6ad31da0e0d28d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8FKpkkhRhWP0iLk7FpzTbQ.jpeg"/></div></a></figure></div><div class="ab cl ml mm hc mn" role="separator"><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq mr"/><span class="mo bw bk mp mq"/></div><div class="hn ho hp hq hr"><p id="b4bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">回到我的圣诞节，</p><p id="0bf9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">奇怪的是，当你还是个孩子的时候，偷偷溜到圣诞树下，希望得到一双新靴子，在下一场足球比赛中炫耀，或者在试图杀死老板的最后一场视频游戏中让你彻夜难眠。</p><p id="2421" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">而现在，你要等到12月份才能在你最喜欢的编程语言上获得新功能。</p><p id="f8e6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">但是你知道。</p><p id="c27d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">作为一个成年人，</p><p id="0aec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我相信你明白，学习这些东西会让我们的工作更轻松，减少办公室内外的压力，这意味着与你所爱的人共度更幸福的生活，</p><p id="7659" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这才是真正独特的圣诞节精神。</p><p id="7e0d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">所以，</p><p id="0c5c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">尽管还不是时候<em class="lt">圣诞快乐，新法典快乐。</em></p><figure class="lf lg lh li fq iv fe ff paragraph-image"><div class="fe ff ms"><img src="../Images/bd9c1a1abd55e6b8e4a6c7a83826e162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1284/format:webp/0*Iiy5e4Z74V55M1Xy.jpg"/></div></figure><p id="af09" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lt">这篇博文是Kindle book“</em><a class="ae ka" href="https://amzn.to/2PpbxeS" rel="noopener ugc nofollow" target="_blank"><em class="lt">PHP 7.3及其圣诞礼物</em></a><em class="lt">”</em>的一段</p><p id="e044" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="lt">点击提供的链接获取完整版本</em></p><figure class="lf lg lh li fq iv"><div class="bz el l di"><div class="mt mu l"/></div></figure></div></div>    
</body>
</html>