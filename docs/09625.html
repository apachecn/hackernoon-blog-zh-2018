<html>
<head>
<title>Webhooks Explained: What They Are &amp; How to Use Them</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Webhooks解释了:它们是什么以及如何使用它们</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/webhooks-explained-what-they-are-how-to-use-them-862169b82755?source=collection_archive---------1-----------------------#2018-11-27">https://medium.com/hackernoon/webhooks-explained-what-they-are-how-to-use-them-862169b82755?source=collection_archive---------1-----------------------#2018-11-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/71ce15912fe8e8f22c9b0a66ce72ca3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0n0NX3rgHf2bzldy1uvmiQ.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">Photo by <a class="ae jg" href="https://unsplash.com/photos/PDxYfXVlK2M?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">JJ Ying</a> on <a class="ae jg" href="https://unsplash.com/search/photos/link?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3bfe" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我们的神经系统真是一个奇迹。</p><p id="693e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">想象一下我们的大脑……不断地向我们的身体传递信息。当我们需要吃饭、睡觉或把手从炉子上拿开时，会通知我们。</p><p id="3f00" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你能想象必须有意识地问你的大脑你是饿了、受伤了还是累了吗？</p><p id="a7a7" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">生活会变得不可收拾。</p><p id="3ad2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好消息是同样的自动化和通知系统也可以成为你的网络开发项目的核心。</p><p id="43c3" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">一种方法是使用webhooks。你可能经常使用它们，甚至不知道它们到底是什么。在这一点上，你甚至可能会把它们<a class="ae jg" href="https://snipcart.com/blog/apis-integration-usage-benefits" rel="noopener ugc nofollow" target="_blank">和API</a>混淆。</p><p id="5792" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">因此，今天让我们花点时间来解释什么是webhooks，以及如何利用它们来提升您的开发水平。</p><p id="9702" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你会在这篇文章中发现什么:</p><ul class=""><li id="7da5" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">webhook定义</li><li id="2653" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">现实生活中的webhook示例</li><li id="f128" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">webhooks集成的开发流程</li><li id="489a" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">开发工具列表</li><li id="46bc" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">(略微)高级功能</li></ul><p id="d5e1" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">相信我，戴夫·学徒，webhooks会改变你的生活。</p><h1 id="d85d" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">什么是webhooks？</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lr"><img src="../Images/c7915b12dd5d1c7d766959ebb9419b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4mploCZA_LooCzCh.jpg"/></div></div></figure><p id="33dd" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">直截了当地说:<strong class="jj hv"> webhooks是应用程序之间自动通信的一种方式。</strong></p><ul class=""><li id="2f28" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">MailChimp使用webhook将用户从您的网站注册到您的时事通讯中。</li><li id="2ab8" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">Paypal用它来告诉你的会计应用程序你的客户什么时候付钱给你。</li><li id="0499" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">Shopify提供webhooks来更新你的商务系统，这样你就不必手动输入新的交易细节。</li></ul><p id="3afb" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">类比很有用——我能想到的最简单的编程比较是<a class="ae jg" href="https://en.wikipedia.org/wiki/Observer_pattern" rel="noopener ugc nofollow" target="_blank"> <strong class="jj hv">观察者模式</strong> </a>。</p><p id="ee74" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">以<strong class="jj hv">浏览器通知</strong>为例。</p><p id="3089" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">当事件发生时，浏览器(主体)通知用户(观察者)，比如收到一封电子邮件。</p><p id="76d0" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">观察者主体的这种动态性使得在事件驱动的系统中利用异步性变得非常容易。一旦你掌握了这一点，管理有大量用户交互的用例就容易多了。</p><p id="d477" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">不是用户<em class="lw">轮询</em>服务器询问状态是否改变，用户只能说:“嘿，你知道吗？你告诉我什么时候状态变了”。</p><p id="348e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">这种互动效率更高，但一开始设置和理解起来有点困难。</strong></p><p id="b832" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们把这些知识转移到我们最初的主题:webhooks。</p><p id="afb2" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">观察者模式可以在任何<em class="lw">事件驱动系统</em>中实现，但是webhooks仅限于<strong class="jj hv"/><strong class="jj hv">web</strong>。这意味着它们必须通过web协议进行通信——几乎所有情况下都是HTTP。</p><blockquote class="lx ly lz"><p id="354a" class="jh ji lw jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated">事件驱动架构是一种促进事件的产生、检测、消费和反应的软件。事件可以定义为“状态的重大变化”</p></blockquote><h1 id="6bad" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">webhook是如何操作的？</h1><p id="f179" class="pw-post-body-paragraph jh ji hu jj b jk md jm jn jo me jq jr js mf ju jv jw mg jy jz ka mh kc kd ke hn dt translated">您可以通过注册URL来注册一个webhook，以便在给定事件发生时进行通知。这第一步通常通过UI或API来完成。</p><p id="61f1" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">创建的路由包含事件发生后要执行的逻辑。</p><p id="ab87" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这样，系统不必知道需要执行什么的性质，它只需要跟踪要通知的路线。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/6b639d257fb376647fa8baca60c515b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/0*9LvgJH-3dPK8ZmVX.png"/></div></figure><p id="379d" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">它非常强大，因为一切都保持解耦。通过所选URL接收通知的系统B不仅知道另一个系统上发生的事件，而且还可以对其做出反应。</p><p id="a9cc" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">保存逻辑的路由必须可以通过HTTP POST请求访问。</p><blockquote class="lx ly lz"><p id="e35a" class="jh ji lw jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated">POST请求是允许通过HTTP在请求体中传输信息的方法。</p></blockquote><p id="5d04" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为什么特别要求张贴？正是因为它使您能够在请求中包含正文。它通常是一个简单的JSON对象，但也可以是一个XML文档(这总是在webhook文档中指定的，所以在开始尝试之前阅读它总是有好处的)。</p><p id="fe35" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">直接在正文中，您会发现识别发生了什么事件的信息(见下面的第二个图形)。此外，它会告诉你哪个用户触发了它，在什么时间，以及更多的事件具体信息。</p><p id="cbfa" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Webhooks功能强大，因为它们可以是公共的，也可以是私有的。</p><p id="6064" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="lw"> Private </em>这里的意思是只有特定系统的账号拥有者才能注册一个webhook。在野外，任何人都无法追踪账户的活动。</p><h1 id="38cb" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">现实生活中的webhook示例</h1><p id="8140" class="pw-post-body-paragraph jh ji hu jj b jk md jm jn jo me jq jr js mf ju jv jw mg jy jz ka mh kc kd ke hn dt translated">所有这些如何转化为现实生活？</p><p id="fb97" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">让我们通过一个特定的Snipcart <a class="ae jg" href="https://docs.snipcart.com/webhooks/introduction" rel="noopener ugc nofollow" target="_blank">事件</a>来展开webhook是如何操作的。对于我们面向开发者的购物车，webhooks用于在购物车中发生事件时通知其他应用程序，例如新订单。</p><blockquote class="lx ly lz"><p id="a07c" class="jh ji lw jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated">注意:我在这里使用Snipcart的webhooks作为例子，因为我对它们了如指掌，但是这个例子适用于大多数webhooks。</p></blockquote><p id="e0e7" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个例子突出显示了<code class="eh mj mk ml mm b">order.completed</code>事件。</p><p id="9e36" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">你可以在这里看到<a class="ae jg" href="https://docs.snipcart.com/webhooks/order-events#order-completed" rel="noopener ugc nofollow" target="_blank">事件的<code class="eh mj mk ml mm b">body</code>，也经常被称为<code class="eh mj mk ml mm b">payload</code>。</a></p><p id="a458" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我现在不会创建一个服务器来运行任何实际的逻辑——我只是假设我有一个服务器。这里的目标是理解信息是如何流动的，以及它是如何被触发的(不是练习我们的服务器设置技能)。</p><p id="be0e" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">假设您创建了一个名为<code class="eh mj mk ml mm b">/completed</code>的HTTP服务器路由，并在Snipcart仪表板中注册了该路由:</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mn"><img src="../Images/cfac8ab379094cd1ddbbbfcf49bd2078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5uyb7XWtINgEp_lz.png"/></div></div></figure><p id="cb69" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">所谓的webhook <strong class="jj hv">就是</strong>包含要执行的逻辑的路由，在Snipcart的仪表盘中添加路由就是我们所说的“注册webhook”</p><p id="f223" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">目前的关键问题是:<strong class="jj hv">“这是如何触发的？”</strong></p><p id="f141" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好吧，让我们假设我是一个参观你的商店的顾客。我逛了一会儿，决定买一件产品。我经历了整个结账过程，订单通过。</p><p id="d7ea" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">Snipcart的服务器可以快速检查是否注册了任何webhook。在这里，<code class="eh mj mk ml mm b">/completed</code>路线需要得到通知。为此，您可以创建一个包含订单信息的HTTP请求，并将它直接发送到URL。</p><p id="1873" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">好了，Snipcart这边的工作完成了；为您询问的事件通知您。</p><p id="dd4b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这很简单，但力量在于你从通知中得到什么。</p><p id="6582" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这里的要点是要理解，因为您可以在通知之后执行您的逻辑，所以它不是静态的。它让你有机会在没有任何人类互动的情况下立即采取行动。</p><p id="792b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">假设刚刚发生了一个<code class="eh mj mk ml mm b">order.completed</code>事件，那么您可以使用Snipcart的<a class="ae jg" href="https://docs.snipcart.com/api-reference/discounts" rel="noopener ugc nofollow" target="_blank">折扣API </a>创建一个新的折扣代码，并通过电子邮件将新代码发送给刚刚从您的网站购买产品的客户。</p><p id="6e38" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">可能性是无穷的。你甚至可以制作可定制的t恤，比如说，一旦下了订单，顾客的名字就会自动印在上面。</p><p id="5ac6" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">我希望你开始掌握webhooks的力量！</p><h1 id="c8bb" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">webhooks集成的开发流程</h1><p id="f14c" class="pw-post-body-paragraph jh ji hu jj b jk md jm jn jo me jq jr js mf ju jv jw mg jy jz ka mh kc kd ke hn dt translated">现在你已经知道它们是如何操作的了，下面是我个人的webhook开发流程，这样你就可以了解开发在现实生活中是什么样子。我还将与您分享我最喜欢的工具，帮助您启动旅程，同时在开发过程中节省大量时间。</p><p id="8407" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">首先要做的是:</p><ul class=""><li id="dff9" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">正如我前面提到的，<strong class="jj hv">总是事先阅读webhook文档。这听起来像是一个愚蠢的暗示，但老实说，当你开始感到舒适时，你可能会觉得你可以跳过这一步，从长远来看，这可能会花费你相当长的时间。</strong></li><li id="8092" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">然后，<strong class="jj hv">您需要检查事件是否真的被发送了</strong>。<em class="lw"> RequestBin </em>是一个方便的工具。您创建一个端点并将该端点注册为您的webhook。该工具将收集发送到该路由任何请求，以便您可以检查它们。这是确认您可以注册路线并充分接收事件数据的简单方法。</li></ul><p id="bd99" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这样做的时候，最好检查数据(请求体)是否对应于文档中显示的正确对象。一旦所有的事情都被确认，你就可以开始着手开发逻辑了！</p><ul class=""><li id="b55b" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated"><strong class="jj hv">启动的一个简单方法是从本地开始</strong>。你将能够在一个受控的环境中使用你想要的技术。但是，你很快就会碰到一个问题。您实现的逻辑在您的计算机上，外界无法访问。在保持安全的同时打开电脑的首选工具是<em class="lw"> ngrok </em>。老实说，我认为每个开发人员都应该了解它，这对你的网站开发来说是一个巨大的价值。</li><li id="06e5" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated">现在，我通常不会打开一个现成的公共路径，因为在开发的时候我的逻辑并不是无懈可击的。因此，<strong class="jj hv">我将模拟请求</strong>来代替。为此，我将使用<em class="lw">邮递员</em>，或者街区里的新小子<em class="lw">失眠</em>。这两个都是简单但功能强大的REST客户端，可以让您手动伪造一个HTTP请求。不用等待实际的第三方事件触发您的逻辑，您将能够手动触发它。</li></ul><p id="9f77" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">如果您使用RequestBin，正如前面所建议的，您将能够复制真实事件的主体来创建您的本地事件。这使得整个过程不那么做作，因为您将使用实际数据来测试您的逻辑。你可以自由地继续你的发展，只要你认为你有什么，就直接从邮递员那里发送伪造的请求。这样你的迭代会很快，你可以随时得到反馈。</p><ul class=""><li id="54a2" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">一旦你对你所拥有的感到满意，你应该使用ngrok来测试实时数据。一旦一切测试正常，那就是你想要托管你的逻辑的时候了。有几种方法可以做到这一点:</li></ul><ol class=""><li id="4801" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke mo kl km kn dt translated">通过托管一个成熟的服务器。整个过程取决于使用的技术，所以我不会在这里涵盖如何操作。</li><li id="a28e" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke mo kl km kn dt translated">通过使用无服务器功能。因为webhooks逻辑通常保持简单明了，所以对他们来说这是一个完美的案例。重要的玩家有<em class="lw"> Webtask.io </em>、<em class="lw"> AWS Lambda </em>、<em class="lw">谷歌云</em>和<em class="lw"> Azure </em>。</li></ol><blockquote class="lx ly lz"><p id="252d" class="jh ji lw jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated">无服务器功能在网络生态系统中越来越多的被使用，所以我肯定会仔细看看。如果您有兴趣更好地了解无服务器功能是如何运行的，请从[这里]开始(https://snipcart . com/blog/web task-baas-server less-tutorial)。</p></blockquote><h1 id="062d" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">Webhook开发工具概述🛠️</h1><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lr"><img src="../Images/5695459e67ab4acc173d7b0e4a204b5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_ES8anBuEX8GLeox.jpg"/></div></div></figure><p id="c844" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这个列表重新组合了我在上一部分提到的工具。</p><ul class=""><li id="6256" class="kf kg hu jj b jk jl jo jp js kh jw ki ka kj ke kk kl km kn dt translated">Webhooks的文档——特定于每个webhook。</li><li id="a923" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><a class="ae jg" href="https://requestbin.fullcontact.com/" rel="noopener ugc nofollow" target="_blank"> RequestBin </a> — HTTP请求检查器。</li><li id="6614" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><a class="ae jg" href="https://ngrok.com/" rel="noopener ugc nofollow" target="_blank"> ngrok </a> —安全本地测试。</li><li id="8e8a" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><a class="ae jg" href="https://www.getpostman.com/" rel="noopener ugc nofollow" target="_blank">邮递员</a>或<a class="ae jg" href="https://insomnia.rest/" rel="noopener ugc nofollow" target="_blank">失眠</a>——休息客户。</li><li id="d401" class="kf kg hu jj b jk ko jo kp js kq jw kr ka ks ke kk kl km kn dt translated"><a class="ae jg" href="https://webtask.io/" rel="noopener ugc nofollow" target="_blank"> Webtask.io </a>，<a class="ae jg" href="https://aws.amazon.com/lambda/" rel="noopener ugc nofollow" target="_blank"> AWS Lambda </a>，<a class="ae jg" href="https://cloud.google.com/functions/" rel="noopener ugc nofollow" target="_blank">Google Cloud</a>&amp;<a class="ae jg" href="https://azure.microsoft.com/en-ca/services/functions/" rel="noopener ugc nofollow" target="_blank">Azure</a>—无服务器功能。</li></ul><h1 id="24c7" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">(稍微)高级webhook特性</h1><p id="a829" class="pw-post-body-paragraph jh ji hu jj b jk md jm jn jo me jq jr js mf ju jv jw mg jy jz ka mh kc kd ke hn dt translated">我想我们有进展了，对吧？</p><p id="e3ff" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">可能是时候揭开我隐藏的细节了，不要让你太困惑。这些是稍微复杂一点的概念，但是如果你继续开发webhook，它们会很快出现在你的面前。</p><p id="cfe5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">webhooks的一个显著的、强大的特性是，它们不仅通过HTTP POST发送通知，还可以用更多的信息来响应相同的请求。之前的例子不需要答案。然而，如果我们注册了，比方说，一个航运网络挂钩，它将是没有用的，没有回应。</p><figure class="ls lt lu lv fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/9cd96cdb9bbed473f2cee2f5064cf949.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MTrhGB3Kw__7Xl8m.png"/></div></div></figure><p id="c10b" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">例如，使用Snipcart的<a class="ae jg" href="https://docs.snipcart.com/webhooks/shipping" rel="noopener ugc nofollow" target="_blank"> shipping webhook </a>，当有人为他的订单获取运费时，就会通知路线。期望然后得到运费回来作为一个答案。</p><p id="1bbc" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">这样，你是一个没有任何第三方参与，通过编程处理运费。如果您有各种定制运输规则要应用，这将非常有用。</p><p id="f070" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">过程和以前一样，但是您需要通过返回您希望在界面中显示的费率来回应请求。在这种情况下，费率必须在JSON对象或XML中定义。一旦最初的通知者得到答案，新的数据就可以用在他的流程中——在本例中，显示购物车中的运费。</p><blockquote class="lx ly lz"><p id="18f7" class="jh ji lw jj b jk jl jm jn jo jp jq jr ma jt ju jv mb jx jy jz mc kb kc kd ke hn dt translated">请记住，有些网页挂钩需要一个答案，有些不需要。如果它需要一个，而您没有提供，那么进程将一直闲置，直到请求超时，从而导致大量的等待时间。所以，请务必先阅读文档。；)</p></blockquote><p id="d222" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><strong class="jj hv">另一个低级webhook的特点是<em class="lw">认证</em>。您可能希望验证通知程序的身份，而由通知程序来提供验证方法。</strong>使用Snipcart，每个webhook HTTP POST请求都有一个名为“HTTP_X_SNIPCART_REQUESTTOKEN”的头条目。</p><p id="6ef5" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">您可以使用该字段的值来确保它确实来自Snipcart。</p><p id="63ac" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">为此，您只需在<code class="eh mj mk ml mm b">https://app.snipcart.com/api/requestvalidation/{your_request_token}</code>使用您的API密钥向Snipcart的服务器发送一个新请求，它就会回答您令牌是否有效。</p><p id="4bb9" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">验证不是强制性的，但是为了安全起见，我强烈建议这样做。</p><h1 id="550d" class="kt ku hu bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq dt translated">结束语</h1><p id="24eb" class="pw-post-body-paragraph jh ji hu jj b jk md jm jn jo me jq jr js mf ju jv jw mg jy jz ka mh kc kd ke hn dt translated">我希望这能成为关于webhooks的一篇全面的介绍性文章。我真正希望你从中得到的是他们能给你的开发游戏带来的好处。这概括起来就是更高的效率、扩展应用的能力以及轻松访问外部功能。</p><p id="2eeb" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">回到文章的第一部分，我使用了观察者模式的比喻。实际上，我的例子更接近于发布-订阅模式。对每个人来说，差异并不明显，解释它们的微妙之处超出了范围，但我认为如果你对这个话题感兴趣的话，分享一下<a class="ae jg" href="https://hackernoon.com/observer-vs-pub-sub-pattern-50d3b27f838c" rel="noopener ugc nofollow" target="_blank">这篇关于这个话题的精彩文章</a>会很棒。</p><p id="eb40" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated">关于webhooks我错过了什么？你认为它们是网站开发的重要组成部分吗？下面评论里讨论一下吧！</p></div><div class="ab cl mq mr hc ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="hn ho hp hq hr"><p id="b5df" class="pw-post-body-paragraph jh ji hu jj b jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke hn dt translated"><em class="lw">我最初在</em> <a class="ae jg" href="https://snipcart.com/blog/what-are-webhooks-explained-example" rel="noopener ugc nofollow" target="_blank"> <em class="lw"> Snipcart博客</em> </a> <em class="lw">上发表了这篇文章，并在</em> <a class="ae jg" href="https://us5.list-manage.com/subscribe?u=c019ca88eb8179b7ffc41b12c&amp;id=3e16e05ea2" rel="noopener ugc nofollow" target="_blank"> <em class="lw">我们的时事通讯</em> </a> <em class="lw">上分享了它。</em></p><figure class="ls lt lu lv fq iv"><div class="bz el l di"><div class="mx my l"/></div></figure></div></div>    
</body>
</html>