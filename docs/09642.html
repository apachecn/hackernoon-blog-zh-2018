<html>
<head>
<title>Adding Tests to Your Laravel CRUD Application: Where to Start?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向Laravel CRUD应用程序添加测试:从哪里开始？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/adding-tests-to-your-laravel-crud-application-where-to-start-e139f49621a7?source=collection_archive---------19-----------------------#2018-11-27">https://medium.com/hackernoon/adding-tests-to-your-laravel-crud-application-where-to-start-e139f49621a7?source=collection_archive---------19-----------------------#2018-11-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><blockquote class="ir is it"><p id="9f08" class="iu iv iw ix b iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js hn dt translated">节选自我即将出版的电子书"<a class="ae jt" href="https://laraveltesting101.com/" rel="noopener ugc nofollow" target="_blank"> Laravel测试101 </a>"</p></blockquote><figure class="ju jv jw jx fq jy fe ff paragraph-image"><a href="https://laraveltesting101.com/"><div class="fe ff fg"><img src="../Images/52bf9e84126f483254abfde8427668f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fh3jPIRkLQOFi35thK-fkQ.png"/></div></a></figure><p id="dd69" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">想象一下，你正在做一个Laravel的副业项目，或者你刚刚加入了一个开发<strong class="ix hv"> Laravel应用</strong>的团队，而它目前还没有一个<strong class="ix hv">测试</strong>。您想要改变这种情况，并向应用程序添加测试。如果你发现自己处于这种情况，你可能甚至不知道从哪里开始。“我应该对一切进行单元测试吗？我应该只测试应用程序最关键的部分吗？”你甚至可能会问自己"<strong class="ix hv">为什么我首先需要测试？</strong>”</p><p id="ef96" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">我正在写一本<a class="ae jt" href="https://laraveltesting101.com/" rel="noopener ugc nofollow" target="_blank">电子书</a>来为你回答所有这些问题，这是入门章节。我写这本电子书的主要目的是试图回答这些问题，我将描述我为我正在开发的一些Laravel应用程序(主要是CRUD应用程序)编写测试的<strong class="ix hv">过程。</strong></p><figure class="ju jv jw jx fq jy fe ff paragraph-image"><div class="fe ff ke"><img src="../Images/e42eb905b16ea50f1652cc0cfb04010a.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/0*-mo5Il05Blv4WMUN"/></div><figcaption class="kf kg fg fe ff kh ki bd b be z ek"><a class="ae jt" href="https://laraveltesting101.com/" rel="noopener ugc nofollow" target="_blank">https://laraveltesting101.com/</a></figcaption></figure><p id="2447" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">您将在本章和接下来的章节中读到的内容不一定是最佳的测试方式，甚至也不一定是最佳实践，而只是在Laravel [CRUD]应用程序中进行测试的一种可能方式，这也是我这些天来对待测试的方式。</p><h1 id="b2a8" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">为什么我们编写的测试比需要的少</h1><p id="83c1" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf kb lj ji jj kc lk jm jn kd ll jq jr js hn dt translated">对我来说，考试就像体育锻炼一样。我们都知道我们应该锻炼(或多锻炼)，但很少有人定期锻炼，如果有的话。</p><p id="20d9" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">许多人决定将每天锻炼作为他们新年决心的一部分。他们在当地的健身房获得年度订阅，以证明他们有多认真，他们甚至可能在一年的第一周连续5天去健身房。但在第一个周末之后，他们开始越来越少，最终只是放弃，因为他们的身体非常疼痛，他们还没有看到任何改善(他们锻炼了整整一周，他们至少应该注意到他们的体重快速下降，不是吗？).另一种情况是，他们可能会对健身房的所有选择感到不知所措:我应该只关注有氧运动吗？也许举重？或者我应该两样都做？也许我只关注我的二头肌…一个分析瘫痪的经典案例。</p><p id="7415" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">几乎同样的事情发生在开发人员和测试人员身上。</p><p id="6bff" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">对于每个新项目，他们决定进行单元测试。他们决定测试每一个类和方法(即使是私有的)，他们甚至会购买一些电子书或在线课程来学习如何在他们的项目中实现测试方法。</p><p id="d628" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">例如，他们将在项目的第一周开始实施TDD，但是在第一个周末过去后，他们将开始考虑放弃。他们不仅看不到他们的开发过程或最终结果有任何改进(看在上帝的份上，他们已经花了整整一周的时间来编写所有的东西)，而且他们会开始为每个类的一两个方法编写测试，然后开始质疑这种方法是否正确，或者他们是否应该完全尝试其他方法，然后，不可避免的事情发生了，他们放弃了所有的东西。</p><p id="227a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">换句话说，测试就像锻炼一样，我们倾向于认为我们应该做得完美(每天锻炼)，或者我们根本不应该费心。实际上，我们所需要的只是一些好的实践，以及我们看待和对待测试的方式的改变。我们必须首先理解为什么我们需要测试，并学习如何在不做太多的情况下最大限度地利用它们。</p><h1 id="97aa" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">为什么我们首先需要测试？</h1><p id="2f4f" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf kb lj ji jj kc lk jm jn kd ll jq jr js hn dt translated">如果你问一群开发人员这个问题，你可能不会得到两次相同的答案。就我个人而言，我编写测试的原因很简单:确保应用程序的每一部分都按照编写时的预期方式运行。换句话说，每次我对代码库进行新的修改或添加新的特性时，我都想确保我没有破坏任何现有的功能。</p><p id="0922" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">如果你想一想，每次你引入一个变化，并开始在浏览器中测试你的应用程序，你只是在检查一切都还在工作。我在这里描述的方法将帮助你自动化整个过程，也就是说，你不用打开应用程序中的随机页面来查看它们是否还在工作，而是执行你的测试套件，并确认一切都还在按预期工作。</p><p id="0d0a" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">让我再重复一次，因为这真的很重要，所有接下来的事情都是建立在这个想法之上的:编写测试来确保当我们引入变化时，当前的功能保持预期的工作</p><p id="63f2" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">换句话说，测试不应该是证明代码是100%正确的，我们所需要的是确保我们将来不会破坏它或者改变它的行为。</p><h1 id="a487" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">那么，我到底应该测试什么呢？</h1><p id="a676" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf kb lj ji jj kc lk jm jn kd ll jq jr js hn dt translated">正如您可能从上面的描述中了解到的，我们应该在这个阶段只测试控制器。仔细想想，如果所有的控制器都按照它们应该的方式运行，那么很可能应用程序的所有底层代码(模型、存储库、服务……)都工作得很好，除非您的测试套件没有覆盖控制器的所有用例。</p><h1 id="2a1d" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">电子书的结构</h1><p id="51bb" class="pw-post-body-paragraph iu iv hu ix b iy lh ja jb jc li je jf kb lj ji jj kc lk jm jn kd ll jq jr js hn dt translated">我不喜欢大多数关于测试的在线资源，因为它们孤立地呈现每个想法/概念。通常，尤其是对于初学者来说，很难说出所有这些概念是如何结合在一起的。</p><p id="46d0" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">因此，我不会这样做，而是将测试添加到我为这本电子书构建的一个小型演示应用程序中。</p><p id="7ab8" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">这是一个小应用程序，允许用户注册，并张贴文章。每个用户都可以编辑和删除自己的文章，并阅读其他用户在网站上发布的内容。</p><p id="a0e7" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">该应用程序很简单，但是正如您将在接下来的章节中看到的，它包含了足够的代码/功能来演示您在测试几乎任何Laravel CRUD应用程序时需要的所有必要的想法。</p><p id="14ac" class="pw-post-body-paragraph iu iv hu ix b iy iz ja jb jc jd je jf kb jh ji jj kc jl jm jn kd jp jq jr js hn dt translated">如果你有兴趣，并且想跟随，请访问<a class="ae jt" href="https://laraveltesting101.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ix hv"/></a><strong class="ix hv"/>并报名。每次我发表新的东西，你都会收到通知。</p></div></div>    
</body>
</html>