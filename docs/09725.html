<html>
<head>
<title>Creating Custom Operators in Swift ☕</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Swift ☕创建定制运营商</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/creating-custom-operators-in-swift-2c8bababbaf6?source=collection_archive---------5-----------------------#2018-12-01">https://medium.com/hackernoon/creating-custom-operators-in-swift-2c8bababbaf6?source=collection_archive---------5-----------------------#2018-12-01</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="4f27" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">使用自定义操作符创建清晰、简洁、偶尔有趣的代码。</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/38481ddd25568ca531ca036dc7e13676.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J7xn5fa1ozcNQcUO4pXPcg.jpeg"/></div></div></figure><p id="9bd2" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">当我第一次看到包含自定义操作符的Swift代码时，我立刻认为它们只是又一种高级语言特性，像我这样的普通修补者根本不需要。然而，在我在早先的<a class="ae kr" rel="noopener" href="/@aclaytonscott/creating-and-distributing-swift-packages-132444f5dd1">文章</a>中把它们作为一个非常基本的包例子之后，我认为除了方便之外，它们还可以让你的代码更具可读性，甚至在使用非标准操作符的时候。</p><h1 id="8c6c" class="ks kt hu bd ku kv kw kx ky kz la lb lc ja ld jb le jd lf je lg jg lh jh li lj dt translated">什么是运算符？</h1><p id="77f4" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">直接摘自<a class="ae kr" href="https://en.wikipedia.org/wiki/Operator_(computer_programming)" rel="noopener ugc nofollow" target="_blank">维基百科</a>:</p><blockquote class="lp lq lr"><p id="1c89" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated">(运算符是)构造，其行为通常类似于函数，但在语法或语义上不同于通常的函数。</p></blockquote><p id="d5a1" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">如果你做过任何<a class="ae kr" href="https://hackernoon.com/tagged/programming" rel="noopener ugc nofollow" target="_blank">编程</a>你都用过操作符。你可能很熟悉这些基础，例如<code class="eh lw lx ly lz b">+</code>、<code class="eh lw lx ly lz b">-</code>和<code class="eh lw lx ly lz b">=&lt;</code>。所有的语言都以不同的方式定义它们的操作符，一些语言如Java和Javascript主要依赖于一小组单独或组合使用的符号，而另一些语言如python使用英语单词作为它的一些操作符，如<code class="eh lw lx ly lz b">and</code>、<code class="eh lw lx ly lz b">or</code>、<code class="eh lw lx ly lz b">is</code>和<code class="eh lw lx ly lz b">not</code>。</p><h2 id="8f12" class="ma kt hu bd ku mb mc md ky me mf mg lc ke mh mi le ki mj mk lg km ml mm li mn dt translated">运算符的类型</h2><p id="5cdf" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">运营商通常分为几大类:</p><blockquote class="lp lq lr"><p id="7981" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated"><strong class="jx hv">赋值</strong> — <strong class="jx hv"> </strong>赋值运算符用于给变量赋值。</p><p id="c105" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated"><strong class="jx hv">算术</strong> —算术运算符用于执行加、减、乘等数学运算。</p><p id="321d" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated"><strong class="jx hv">比较</strong> —比较运算符用于比较值。它根据条件返回<code class="eh lw lx ly lz b">True</code>或<code class="eh lw lx ly lz b">False</code>。</p><p id="3a48" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated"><strong class="jx hv">逻辑</strong> —逻辑运算符用于创建定义布尔逻辑，即<code class="eh lw lx ly lz b">And</code>、<code class="eh lw lx ly lz b">Or</code>和<code class="eh lw lx ly lz b">Not</code>。</p><p id="b996" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated"><strong class="jx hv">按位</strong> —按位运算符对一个或多个位或二进制模式进行运算。</p></blockquote><h2 id="d4db" class="ma kt hu bd ku mb mc md ky me mf mg lc ke mh mi le ki mj mk lg km ml mm li mn dt translated">运算符语法</h2><p id="a33d" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">典型的操作符语法可以分为三种类型的操作符，<code class="eh lw lx ly lz b">prefix</code>、<code class="eh lw lx ly lz b">postfix</code>和<code class="eh lw lx ly lz b">infix</code>。</p><p id="6d07" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">中缀</strong></p><p id="be02" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">Swift和大多数其他编程范围通常支持<code class="eh lw lx ly lz b">infix</code>操作符，因为它们是允许使用多个操作数的操作符类型。<code class="eh lw lx ly lz b">infix</code>运算符有时也被称为二元运算符，因为它们对两个目标进行运算。使用这种思想<code class="eh lw lx ly lz b">prefix</code>和<code class="eh lw lx ly lz b">postfix</code>也被称为一元运算符。Swift和其他几种语言也支持三元运算符。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="e94b" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">前缀</strong></p><p id="12be" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><code class="eh lw lx ly lz b">prefix</code>运算符放在操作数之前，是一元运算符。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="9244" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><strong class="jx hv">后缀</strong></p><p id="5724" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated"><code class="eh lw lx ly lz b">postfix</code>运算符放在操作数之后，是一元运算符。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div></figure><h1 id="7c14" class="ks kt hu bd ku kv kw kx ky kz la lb lc ja ld jb le jd lf je lg jg lh jh li lj dt translated">创建自定义运算符</h1><p id="b666" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">现在我已经简要定义了什么是操作符，我将演示如何在Swift和一些用例中定义自定义操作符。</p><h2 id="bfec" class="ma kt hu bd ku mb mc md ky me mf mg lc ke mh mi le ki mj mk lg km ml mm li mn dt translated">声明自定义运算符</h2><p id="3734" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">苹果在这里描述了声明操作符<a class="ae kr" href="https://docs.swift.org/swift-book/ReferenceManual/Declarations.html#grammar_operator-declaration" rel="noopener ugc nofollow" target="_blank"/>，但是你可以参考这个伪代码样本来简单看看使用的语法。使用<code class="eh lw lx ly lz b">operator</code>关键字及其相关修饰符在全局级别声明新操作符。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div><figcaption class="mq mr fg fe ff ms mt bd b be z ek">Swift Operator Declarations</figcaption></figure><p id="6b54" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">需要注意的一点是，对于如何定义您的操作符名称有一些限制。虽然我很想定义一个🌮或者💩操作员，Swift将您限制在<a class="ae kr" href="https://docs.swift.org/swift-book/ReferenceManual/LexicalStructure.html#ID418" rel="noopener ugc nofollow" target="_blank">定义的unicode字符范围内</a>。</p><h2 id="917f" class="ma kt hu bd ku mb mc md ky me mf mg lc ke mh mi le ki mj mk lg km ml mm li mn dt translated">前缀</h2><p id="f0c6" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">创建自定义<code class="eh lw lx ly lz b">prefix</code>操作符的一个用例是，如果您有一个通用的操作，其中一个通用的符号可能与每次调用一个函数一样容易理解，而且更加简洁。比如求一个数的平方根或立方根。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div></figure><h2 id="d4fa" class="ma kt hu bd ku mb mc md ky me mf mg lc ke mh mi le ki mj mk lg km ml mm li mn dt translated">后缀</h2><p id="70e7" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">一个<code class="eh lw lx ly lz b">postfix</code>操作符有很多很好的用途，比如<code class="eh lw lx ly lz b">--</code>和<code class="eh lw lx ly lz b">++</code>操作符，我在这里用的是<a class="ae kr" rel="noopener" href="/@aclaytonscott/creating-and-distributing-swift-packages-132444f5dd1"/>。但是当我看到镰刀和锤子unicode可以在Swift中使用时..哦天啊。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div></figure><h2 id="8b72" class="ma kt hu bd ku mb mc md ky me mf mg lc ke mh mi le ki mj mk lg km ml mm li mn dt translated">中缀</h2><p id="b6ec" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">正如我前面提到的，<code class="eh lw lx ly lz b">infix</code>操作符是最常见的。这里有一些有趣的例子，我把它们放在一起。</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mo mp l"/></div></figure><p id="3ea4" class="pw-post-body-paragraph jv jw hu jx b jy jz iv ka kb kc iy kd ke kf kg kh ki kj kk kl km kn ko kp kq hn dt translated">这里需要注意的一点是优先组的使用，以及定义<code class="eh lw lx ly lz b">infix</code>操作符的时候。</p><blockquote class="lp lq lr"><p id="a414" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated">运算符<em class="hu">优先级</em>赋予某些运算符比其他运算符更高的优先级；首先应用这些运算符。</p><p id="959f" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated">运算符<em class="hu">结合性</em>定义了相同优先级的运算符如何组合在一起——或者从左边组合，或者从右边组合。你可以把它理解为“他们与左边的表情联系在一起”，或者“他们与右边的表情联系在一起”</p><p id="3627" class="jv jw ls jx b jy jz iv ka kb kc iy kd lt kf kg kh lu kj kk kl lv kn ko kp kq hn dt translated">— <a class="ae kr" href="https://docs.swift.org/swift-book/LanguageGuide/AdvancedOperators.html" rel="noopener ugc nofollow" target="_blank">苹果</a></p></blockquote><h1 id="3399" class="ks kt hu bd ku kv kw kx ky kz la lb lc ja ld jb le jd lf je lg jg lh jh li lj dt translated">摘要</h1><p id="075c" class="pw-post-body-paragraph jv jw hu jx b jy lk iv ka kb ll iy kd ke lm kg kh ki ln kk kl km lo ko kp kq hn dt translated">Swift包含自定义操作符的决定使您能够根据自己的需求创建简洁、可读的代码。如果有人在你的项目中碰巧遇到了☭或⛹，向你的编码同事解释这些也是很有趣的。😉</p><figure class="jk jl jm jn fq jo"><div class="bz el l di"><div class="mu mp l"/></div></figure></div></div>    
</body>
</html>