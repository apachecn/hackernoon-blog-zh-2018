<html>
<head>
<title>Integrating Firebase with React Native</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">集成Firebase和React Native</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/integrating-firebase-with-react-native-967ced8a4a88?source=collection_archive---------14-----------------------#2018-12-05">https://medium.com/hackernoon/integrating-firebase-with-react-native-967ced8a4a88?source=collection_archive---------14-----------------------#2018-12-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/d1c75ea1ff01bf5114a90ea496738ea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ByzWyHGlj16zT-z2.jpg"/></div></div></figure><p id="1536" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">Firebase是一个后端即服务(<em class="ka"> BaaS </em>)，它为使用React Native开发移动应用程序的移动开发者提供了一个优势。作为一名React本地开发人员，通过使用Firebase，您可以开始构建MVP(最小可行产品)，<strong class="je hv">保持低成本并快速构建应用程序原型</strong>。</p><p id="7ab9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，我们将学习如何开始将Firebase与React本机应用程序集成。我们还将在Firebase &amp; React Native的帮助下从头开始创建一个小应用程序，看看它们是如何协同工作的。</p><h1 id="8da8" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">入门指南</h1><p id="fef3" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated"><a class="ae le" href="https://console.firebase.google.com/?pli=1" rel="noopener ugc nofollow" target="_blank"> Firebase </a>是一个被谷歌收购的平台，拥有一个健康活跃的社区。该社区中的大多数用户都是web和移动开发者，因为Firebase可以帮助进行移动分析、推送通知、崩溃报告，并且开箱即可提供电子邮件和社交认证。</p><p id="728f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要开始，你需要一个目标移动操作系统，不管你是选择iOS还是Android或者两者都选。如果是第一次设置React原生开发环境，请参考<a class="ae le" href="https://facebook.github.io/react-native/docs/getting-started" rel="noopener ugc nofollow" target="_blank"> React原生官方文档</a>。你需要sdk工具和Android Studio来为Android设置一个开发环境。对于iOS，只需要在macOS上安装Xcode即可。您还需要具备:</p><ul class=""><li id="644a" class="lf lg hu je b jf jg jj jk jn lh jr li jv lj jz lk ll lm ln dt translated"><a class="ae le" href="http://nodejs.org/" rel="noopener ugc nofollow" target="_blank"> Nodejs </a> ( <code class="eh lo lp lq lr b">&gt;= 8.x.x</code>)和npm/ <a class="ae le" href="https://yarnpkg.com/lang/en/docs/install/" rel="noopener ugc nofollow" target="_blank">纱线</a>安装完毕</li><li id="0f6f" class="lf lg hu je b jf ls jj lt jn lu jr lv jv lw jz lk ll lm ln dt translated"><a class="ae le" href="https://www.npmjs.com/package/react-native-cli" rel="noopener ugc nofollow" target="_blank"> react-native-cli </a> ( <code class="eh lo lp lq lr b">&gt;= 2.0.1</code>)</li></ul><p id="a847" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">React Native作为两个npm包分发，<code class="eh lo lp lq lr b">react-native-cli</code>和<code class="eh lo lp lq lr b">react-native</code>。我们将使用<code class="eh lo lp lq lr b">react-native-cli</code>来生成一个应用程序。从安装<code class="eh lo lp lq lr b">react-native-cli</code>开始:</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="7759" class="mf kc hu lr b fv mg mh l mi mj">npm install -s react-native-cli</span></pre><p id="8d43" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，让我们创建一个名为“rnFirebaseDemo”的新React原生项目:</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="79a6" class="mf kc hu lr b fv mg mh l mi mj">react-native init rnFirebaseDemo</span></pre><p id="d2ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当上面的命令运行完毕后，使用<code class="eh lo lp lq lr b">cd rnFirebaseDemo</code>遍历到项目目录。现在，让我们通过运行以下命令之一来检查一切是否正常工作，以及我们的React本机应用程序是否已正确初始化:</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="e4bb" class="mf kc hu lr b fv mg mh l mi mj"># on macOS<br/>react-native run-ios</span><span id="66bf" class="mf kc hu lr b fv mk mh l mi mj"># For Windows/Unix users<br/>react-native run-android</span></pre><p id="e4fb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该命令将在iOS模拟器或Android模拟器中运行如下所示的默认屏幕，但由于我们是第一次运行该命令，因此需要花费一些时间。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/837bacef168c17ea160444716dcb5ad5.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*yXo7Vps2JVysOKAX.png"/></div></figure><h1 id="0410" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">添加Firebase</h1><p id="082b" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">要将Firebase添加到我们现有的React本机应用程序中，我们需要安装依赖项。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="5fa6" class="mf kc hu lr b fv mg mh l mi mj">yarn add firebase</span></pre><p id="31d7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">当我们在代码编辑器中打开项目时，其结构如下所示:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mm"><img src="../Images/8af420cf8b0f461dded274536dc7c44f.png" data-original-src="https://miro.medium.com/v2/resize:fit:432/format:webp/0*Yp4h3Undqd5Bq8hz.png"/></div></figure><p id="e1bc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们需要做一些修改，然后才能真正开始构建我们的应用程序。在根文件夹中创建一个<code class="eh lo lp lq lr b">src</code>目录。这是我们的应用程序组件和屏幕的位置。此外，在<code class="eh lo lp lq lr b">src</code>目录中，我们将创建两个文件夹:<code class="eh lo lp lq lr b">screens</code>和<code class="eh lo lp lq lr b">components</code>。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mn"><img src="../Images/046c461c5dfb11d8df617d099a098ea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:414/format:webp/0*mPbfafsBYweJp2JR.png"/></div></figure><p id="906c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh lo lp lq lr b">screen</code>目录将包含我们需要向最终用户显示的所有UI相关组件，而<code class="eh lo lp lq lr b">components</code>文件夹将包含任何其他将被使用或重用来显示用户界面的组件。</p><p id="81d9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们用一个新文件<code class="eh lo lp lq lr b">Home.js</code>在<code class="eh lo lp lq lr b">screens/</code>中创建我们的第一个屏幕，主屏幕。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="7ea8" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { View, Text } from 'react-native';</span><span id="8b78" class="mf kc hu lr b fv mk mh l mi mj">export default class Home extends Component {<br/>  render() {<br/>    return (<br/>      &lt;View&gt;<br/>        &lt;Text&gt;Home Screen&lt;/Text&gt;<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="ec42" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的下一个屏幕是<code class="eh lo lp lq lr b">Add Item</code>。创建一个名为<code class="eh lo lp lq lr b">AddItem.js</code>的新文件。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="4547" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { View, Text } from 'react-native';</span><span id="5ce9" class="mf kc hu lr b fv mk mh l mi mj">export default class AddItem extends Component {<br/>  render() {<br/>    return (<br/>      &lt;View&gt;<br/>        &lt;Text&gt;Add Item&lt;/Text&gt;<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="5fce" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们的最后一个屏幕将是我们需要显示的项目列表。在同一个目录中，创建一个名为<code class="eh lo lp lq lr b">List.js</code>的新文件。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="0a99" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { View, Text } from 'react-native';</span><span id="b09d" class="mf kc hu lr b fv mk mh l mi mj">export default class List extends Component {<br/>  render() {<br/>    return (<br/>      &lt;View&gt;<br/>        &lt;Text&gt;List&lt;/Text&gt;<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="d15b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">为了在不同的屏幕之间导航，我们需要添加<code class="eh lo lp lq lr b">react-navigation</code>库。我们将使用最新版本<code class="eh lo lp lq lr b">3.0.0</code>。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="be35" class="mf kc hu lr b fv mg mh l mi mj">yarn add react-navigation</span></pre><p id="2d4e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">接下来，我们将安装<code class="eh lo lp lq lr b">react-native-gesture-handler</code>。如果你使用Expo，你不需要在这里做任何事情。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="3143" class="mf kc hu lr b fv mg mh l mi mj">yarn add react-native-gesture-handler</span></pre><p id="a6e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">下一步显然是运行下面的命令并链接我们刚刚安装的库:</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="48b9" class="mf kc hu lr b fv mg mh l mi mj">react-native link</span></pre><p id="769b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">添加这个包之后，让我们再次运行构建过程:</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="3d2d" class="mf kc hu lr b fv mg mh l mi mj"># on macOS<br/>react-native run-ios</span><span id="88d4" class="mf kc hu lr b fv mk mh l mi mj"># For Windows/Unix users<br/>react-native run-android</span></pre><p id="8154" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，让我们添加Home组件作为我们的第一个屏幕。在<code class="eh lo lp lq lr b">App.js</code>中添加以下代码。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="945a" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { createStackNavigator, createAppContainer } from 'react-navigation';<br/>import Home from './src/screens/Home';</span><span id="ad17" class="mf kc hu lr b fv mk mh l mi mj">// we will use these two screens later in our AppNavigator<br/>import AddItem from './src/screens/AddItem';<br/>import List from './src/screens/List';</span><span id="83f3" class="mf kc hu lr b fv mk mh l mi mj">const AppNavigator = createStackNavigator({<br/>  Home: {<br/>    screen: Home<br/>  }<br/>});</span><span id="1bce" class="mf kc hu lr b fv mk mh l mi mj">const AppContainer = createAppContainer(AppNavigator);</span><span id="a958" class="mf kc hu lr b fv mk mh l mi mj">export default class App extends Component {<br/>  render() {<br/>    return &lt;AppContainer /&gt;;<br/>  }<br/>}</span></pre><p id="e849" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在此阶段，如果我们转到模拟器，我们将看到以下结果:</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff ml"><img src="../Images/106f5427fd4daab27498a16027535431.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/0*wgLY-UY3ONmU0O7V.png"/></div></figure><p id="fd8c" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">主屏幕出现了。我们将添加另外两个屏幕作为到<code class="eh lo lp lq lr b">AppNavigator</code>的路线，以便通过主屏幕导航到它们。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="de51" class="mf kc hu lr b fv mg mh l mi mj">const AppNavigator = createStackNavigator(<br/>  {<br/>    Home,<br/>    AddItem,<br/>    List<br/>  },<br/>  {<br/>    initialRouteName: 'Home'<br/>  }<br/>);</span></pre><p id="410f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，我们的堆栈有三个路由:Home路由、AddItem路由和ListItem路由。Home路径对应于<code class="eh lo lp lq lr b">Home</code>屏幕组件，AddItem对应于<code class="eh lo lp lq lr b">AddItem</code>屏幕，ListItem路径对应于<code class="eh lo lp lq lr b">ListItem</code>组件。堆栈的初始路径是<code class="eh lo lp lq lr b">Home</code>路径，这是在我们有多个屏幕并且需要描述一个起点时定义的。</p><p id="c0b9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">之前，我们定义了一个具有三条路线的堆栈导航器，但是我们没有将它们连接起来以便在它们之间导航。嗯，这也是一个简单的任务。库为我们提供了一种管理从一个屏幕到另一个屏幕以及从一个屏幕到另一个屏幕导航的方法。为了实现这一点，我们将修改<code class="eh lo lp lq lr b">Home.js</code>。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="16e9" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { Button, View, Text } from 'react-native';</span><span id="8daa" class="mf kc hu lr b fv mk mh l mi mj">export default class Home extends Component {<br/>  render() {<br/>    return (<br/>      &lt;View&gt;<br/>        &lt;Text&gt;Home Screen&lt;/Text&gt;<br/>        &lt;Button<br/>          title="Add an Item"<br/>          onPress={() =&gt; this.props.navigation.navigate('AddItem')}<br/>        /&gt;<br/>        &lt;Button<br/>          title="List of Items"<br/>          color="green"<br/>          onPress={() =&gt; this.props.navigation.navigate('List')}<br/>        /&gt;<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span></pre><p id="9aa0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在上面的代码中，我们从<code class="eh lo lp lq lr b">react-native</code> API添加了一个<code class="eh lo lp lq lr b">Button</code>组件。<code class="eh lo lp lq lr b">react-navigation</code>将一个导航道具以<code class="eh lo lp lq lr b">this.props.navigation</code>的形式传递给堆栈导航器中的每一个屏幕。我们必须在<code class="eh lo lp lq lr b">onPress</code>功能上使用与我们在<code class="eh lo lp lq lr b">AppNavigator</code>下的<code class="eh lo lp lq lr b">App.js</code>中定义的相同的屏幕名称进行导航。</p><p id="0dea" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">您也可以在两个屏幕<code class="eh lo lp lq lr b">AddItem</code>和<code class="eh lo lp lq lr b">List</code>上使用您自己的样式手动定制后退按钮，但是在我们的演示中，我们将使用默认按钮。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mo"><img src="../Images/11bb8003b72e42db23b73ada65988605.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*uP2c4EVs7PDPePzX.gif"/></div></figure><h1 id="62e0" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">用Firebase创建数据库</h1><p id="6e99" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">转到<a class="ae le" href="https://firebase.google.com/" rel="noopener ugc nofollow" target="_blank"> Firebase </a>控制台，从你的谷歌账户登录，然后创建一个新项目。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mp"><img src="../Images/3606fbf3be805048f5504a3e0335361f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qd-bZe0roJfg1JG8.png"/></div></div></figure><p id="e5ae" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后，我们将在<code class="eh lo lp lq lr b">src/config.js</code>中的一个新文件中添加数据库配置。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="269f" class="mf kc hu lr b fv mg mh l mi mj">import Firebase from 'firebase';<br/>let config = {<br/>  apiKey: 'AIzaXXXXXXXXXXXXXXXXXXXXXXX',<br/>  authDomain: 'rnfirebXXX-XXXX.firebaseapp.com',<br/>  databaseURL: 'rnfirebXXX-XXXX.firebaseapp.com',<br/>  projectId: 'rnfirebase-XXXX',<br/>  storageBucket: 'rnfirebase-XXXX.appspot.com',<br/>  messagingSenderId: 'XXXXXXX'<br/>};<br/>let app = Firebase.initializeApp(config);<br/>export const db = app.database();</span></pre><p id="7439" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">config对象是你在Firebase中创建一个新项目并进入<strong class="je hv">将Firebase添加到你的web应用</strong>部分后，填写你得到的细节的地方。同样在Firebase控制台中，从左侧栏中，单击<strong class="je hv">数据库</strong>，然后选择第一个选项:((实时数据库))。然后，转到“规则”并粘贴以下内容:</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="0515" class="mf kc hu lr b fv mg mh l mi mj">{ "rules": { ".read": true, ".write": true } }</span></pre><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mq"><img src="../Images/836f34d62b5b0fd0c383584fa4d882f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7gproACxOidA2Opd.png"/></div></div></figure><h1 id="3500" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">将应用程序中的数据添加到Firebase</h1><p id="e335" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在本节中，我们将编辑代表输入字段和按钮的<code class="eh lo lp lq lr b">AddItem.js</code>。用户可以向列表中添加一个项目，它将被保存到Firebase数据中。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="81ba" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import {<br/>  View,<br/>  Text,<br/>  TouchableHighlight,<br/>  StyleSheet,<br/>  TextInput,<br/>  AlertIOS<br/>} from 'react-native';</span><span id="1f84" class="mf kc hu lr b fv mk mh l mi mj">import { db } from '../config';</span><span id="1270" class="mf kc hu lr b fv mk mh l mi mj">let addItem = item =&gt; {<br/>  db.ref('/items').push({<br/>    name: item<br/>  });<br/>};</span><span id="27f0" class="mf kc hu lr b fv mk mh l mi mj">export default class AddItem extends Component {<br/>  state = {<br/>    name: ''<br/>  };</span><span id="d003" class="mf kc hu lr b fv mk mh l mi mj">handleChange = e =&gt; {<br/>    this.setState({<br/>      name: e.nativeEvent.text<br/>    });<br/>  };<br/>  handleSubmit = () =&gt; {<br/>    addItem(this.state.name);<br/>    AlertIOS.alert('Item saved successfully');<br/>  };</span><span id="83bd" class="mf kc hu lr b fv mk mh l mi mj">render() {<br/>    return (<br/>      &lt;View style={styles.main}&gt;<br/>        &lt;Text style={styles.title}&gt;Add Item&lt;/Text&gt;<br/>        &lt;TextInput style={styles.itemInput} onChange={this.handleChange} /&gt;<br/>        &lt;TouchableHighlight<br/>          style={styles.button}<br/>          underlayColor="white"<br/>          onPress={this.handleSubmit}<br/>        &gt;<br/>          &lt;Text style={styles.buttonText}&gt;Add&lt;/Text&gt;<br/>        &lt;/TouchableHighlight&gt;<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span><span id="c8da" class="mf kc hu lr b fv mk mh l mi mj">const styles = StyleSheet.create({<br/>  main: {<br/>    flex: 1,<br/>    padding: 30,<br/>    flexDirection: 'column',<br/>    justifyContent: 'center',<br/>    backgroundColor: '#6565fc'<br/>  },<br/>  title: {<br/>    marginBottom: 20,<br/>    fontSize: 25,<br/>    textAlign: 'center'<br/>  },<br/>  itemInput: {<br/>    height: 50,<br/>    padding: 4,<br/>    marginRight: 5,<br/>    fontSize: 23,<br/>    borderWidth: 1,<br/>    borderColor: 'white',<br/>    borderRadius: 8,<br/>    color: 'white'<br/>  },<br/>  buttonText: {<br/>    fontSize: 18,<br/>    color: '#111',<br/>    alignSelf: 'center'<br/>  },<br/>  button: {<br/>    height: 45,<br/>    flexDirection: 'row',<br/>    backgroundColor: 'white',<br/>    borderColor: 'white',<br/>    borderWidth: 1,<br/>    borderRadius: 8,<br/>    marginBottom: 10,<br/>    marginTop: 10,<br/>    alignSelf: 'stretch',<br/>    justifyContent: 'center'<br/>  }<br/>});</span></pre><p id="ff12" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在上面的代码中，我们从<code class="eh lo lp lq lr b">config.js</code>和<code class="eh lo lp lq lr b">db</code>添加了一个Firebase数据库实例，然后通过<code class="eh lo lp lq lr b">addItem</code>和<code class="eh lo lp lq lr b">handleSubmit()</code>推送用户添加的任何项目。当您按下按钮<strong class="je hv">添加</strong>从输入值中添加项目时，您将得到一条警告消息，如下所示。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mo"><img src="../Images/a52194082d2b21804f23afbc9ee51cc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*aEPQmR5fwXidFeJT.gif"/></div></figure><p id="8975" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要验证数据是否在数据库中，请转到Firebase控制台。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mr"><img src="../Images/7acd323f1e6160726752726d5626d344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/0*HG3J52O7kTvX7UeV.png"/></div></figure><h1 id="5cf3" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">从数据库中提取项目</h1><p id="c6ed" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">为了从Firebase数据库中获取数据，我们将在<code class="eh lo lp lq lr b">List.js</code>中使用对<code class="eh lo lp lq lr b">db</code>的相同引用。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="e38d" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { View, Text, StyleSheet } from 'react-native';<br/>import ItemComponent from '../components/ItemComponent';</span><span id="d912" class="mf kc hu lr b fv mk mh l mi mj">import { db } from '../config';</span><span id="b61f" class="mf kc hu lr b fv mk mh l mi mj">let itemsRef = db.ref('/items');</span><span id="6afb" class="mf kc hu lr b fv mk mh l mi mj">export default class List extends Component {<br/>  state = {<br/>    items: []<br/>  };</span><span id="5ed0" class="mf kc hu lr b fv mk mh l mi mj">componentDidMount() {<br/>    itemsRef.on('value', snapshot =&gt; {<br/>      let data = snapshot.val();<br/>      let items = Object.values(data);<br/>      this.setState({ items });<br/>    });<br/>  }</span><span id="9fb2" class="mf kc hu lr b fv mk mh l mi mj">render() {<br/>    return (<br/>      &lt;View style={styles.container}&gt;<br/>        {this.state.items.length &gt; 0 ? (<br/>          &lt;ItemComponent items={this.state.items} /&gt;<br/>        ) : (<br/>          &lt;Text&gt;No items&lt;/Text&gt;<br/>        )}<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span><span id="88c1" class="mf kc hu lr b fv mk mh l mi mj">const styles = StyleSheet.create({<br/>  container: {<br/>    flex: 1,<br/>    justifyContent: 'center',<br/>    backgroundColor: '#ebebeb'<br/>  }<br/>});</span></pre><p id="452e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于<code class="eh lo lp lq lr b">ItemComponent</code>，我们在<code class="eh lo lp lq lr b">components/ItemComponent.js</code>中创建一个新文件。这是非屏幕组件。只有<code class="eh lo lp lq lr b">List</code>会用它来<code class="eh lo lp lq lr b">map</code>并显示每个项目。</p><pre class="lx ly lz ma fq mb lr mc md aw me dt"><span id="a4f2" class="mf kc hu lr b fv mg mh l mi mj">import React, { Component } from 'react';<br/>import { View, Text, StyleSheet } from 'react-native';<br/>import PropTypes from 'prop-types';</span><span id="d8d3" class="mf kc hu lr b fv mk mh l mi mj">export default class ItemComponent extends Component {<br/>  static propTypes = {<br/>    items: PropTypes.array.isRequired<br/>  };</span><span id="73f9" class="mf kc hu lr b fv mk mh l mi mj">render() {<br/>    return (<br/>      &lt;View style={styles.itemsList}&gt;<br/>        {this.props.items.map((item, index) =&gt; {<br/>          return (<br/>            &lt;View key={index}&gt;<br/>              &lt;Text style={styles.itemtext}&gt;{item.name}&lt;/Text&gt;<br/>            &lt;/View&gt;<br/>          );<br/>        })}<br/>      &lt;/View&gt;<br/>    );<br/>  }<br/>}</span><span id="5841" class="mf kc hu lr b fv mk mh l mi mj">const styles = StyleSheet.create({<br/>  itemsList: {<br/>    flex: 1,<br/>    flexDirection: 'column',<br/>    justifyContent: 'space-around'<br/>  },<br/>  itemtext: {<br/>    fontSize: 24,<br/>    fontWeight: 'bold',<br/>    textAlign: 'center'<br/>  }<br/>});</span></pre><p id="25e9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这一步结束了Firebase数据库与React本地应用程序的集成。您现在可以添加新的数据项并从数据库中获取它们，如下所示。</p><figure class="lx ly lz ma fq iv fe ff paragraph-image"><div class="fe ff mo"><img src="../Images/b044c0cc958be8f1a8ac75d633ef6a41.png" data-original-src="https://miro.medium.com/v2/resize:fit:754/0*Qd0reDeyiRxPL9Z2.gif"/></div></figure><h1 id="1c9f" class="kb kc hu bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky dt translated">结论</h1><p id="dbcf" class="pw-post-body-paragraph jc jd hu je b jf kz jh ji jj la jl jm jn lb jp jq jr lc jt ju jv ld jx jy jz hn dt translated">在本教程中，我们向您展示了如何将Firebase与React本机应用程序集成。你没有一个完整的服务器来创建一个API，并进一步使用一个数据库来原型化或<strong class="je hv">构建你的应用程序的MVP</strong>。</p><p id="d5cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">你可以在<a class="ae le" href="https://github.com/JscramblerBlog/rnFirebaseDemo" rel="noopener ugc nofollow" target="_blank">这个Github repo </a>里面找到完整的代码。有问题可以直接发微博到<a class="ae le" href="https://twitter.com/amanhimself" rel="noopener ugc nofollow" target="_blank">@ amani self</a>问作者。</p></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><p id="7f46" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">原载于</em><a class="ae le" href="https://blog.jscrambler.com/integrating-firebase-with-react-native/" rel="noopener ugc nofollow" target="_blank"><em class="ka">blog.jscrambler.com</em></a><em class="ka">由</em> <a class="ae le" href="https://blog.jscrambler.com/author/aman-mittal" rel="noopener ugc nofollow" target="_blank"> <em class="ka">阿曼米塔尔</em> </a> <em class="ka">。</em></p></div></div>    
</body>
</html>