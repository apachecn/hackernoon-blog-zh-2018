<html>
<head>
<title>What is Serverless — Part 5: Reference Architectures for Common Types of Serverless Applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">什么是无服务器—第5部分:常见类型无服务器应用程序的参考架构</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-is-serverless-part-5-reference-architectures-for-common-types-of-serverless-applications-6b184b65dceb?source=collection_archive---------19-----------------------#2018-12-05">https://medium.com/hackernoon/what-is-serverless-part-5-reference-architectures-for-common-types-of-serverless-applications-6b184b65dceb?source=collection_archive---------19-----------------------#2018-12-05</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/9141978f3b66e1b5dbb5bb7a50ce0576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Ig-i_rcw2BYt8OpQ.jpg"/></div></div></figure><p id="7a38" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这是5部分博客系列的最后一部分。参见<a class="ae ka" href="https://platform9.com/blog/what-is-serverless-and-what-it-means-for-you-part-1/" rel="noopener ugc nofollow" target="_blank">第一部分</a>、<a class="ae ka" href="https://platform9.com/blog/what-is-serverless-part-2-challenges-and-considerations-for-choosing-the-right-serverless-solution/" rel="noopener ugc nofollow" target="_blank">第二部分</a>、<a class="ae ka" href="https://platform9.com/blog/what-is-serverless-part-3-kubernetes-and-serverless/" rel="noopener ugc nofollow" target="_blank">第三部分</a>和<a class="ae ka" href="https://platform9.com/blog/what-is-serverless-part-4-fission-an-open-source-serverless-framework-for-kubernetes/" rel="noopener ugc nofollow" target="_blank">第四部分</a>。</p></div><div class="ab cl kb kc hc kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="hn ho hp hq hr"><p id="9708" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">就其核心而言，无服务器功能就是在一个容器内运行纯粹的业务逻辑或“功能”。这些函数可以是对业务应用程序有意义的任何东西。一些常见的例子包括:</p><ul class=""><li id="737d" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated">支付处理</li><li id="fbe4" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">警报—向安全运营控制台发送警报</li><li id="1375" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">流处理—用客户信息丰富消息</li><li id="1cbe" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">做信用检查</li><li id="0d73" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">提交保险索赔</li></ul><p id="eb6a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无服务器功能的常见使用案例包括关键行业，例如:</p><ol class=""><li id="da94" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kw ko kp kq dt translated">电力和公用事业—截取和分析流数据，以执行需求预测、设备可靠性管理等。</li><li id="4114" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kw ko kp kq dt translated">石油和天然气行业—使用无服务器进行测井分析，以提供油井的单一视图</li><li id="623b" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kw ko kp kq dt translated">广告——根据移动和在线用户的浏览历史、位置和购买者特征，为他们提供即时和相关的优惠。</li><li id="ae20" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kw ko kp kq dt translated">金融服务，如银行和交易应用程序，其中用户数据的各个方面实时填充到客户门户中。</li><li id="1ae1" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kw ko kp kq dt translated">医疗保健—例如，健康管理数据的打印</li></ol><p id="6fbb" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">让我们研究一些常见行业用例的设计模式，看看无服务器如何帮助您加速关键事件驱动应用程序的创新和软件交付。我们将使用开源<a class="ae ka" href="https://fission.io/" rel="noopener ugc nofollow" target="_blank">裂变无服务器框架</a>来说明这些架构，因为它是最灵活的，并且不局限于特定的云提供商或相关服务，因此您的应用程序可以在任何地方运行。您也可以将裂变与您选择的任何无服务器/云产品互换！</p><h1 id="9e66" class="kx ky hu bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">参考架构#1:物联网(IoT)</h1><p id="bfb7" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">通常在物联网中，从工业互联网到可穿戴设备，再到智能汽车，一组自主物理设备，如传感器、执行器、智能电器和可穿戴设备，收集各种类型的数据，并使用IP协议与数据中心(云/内部)中运行的应用程序进行通信。通常，大量数据使用网关进行聚合，然后发送到一个平台，该平台可以分析所有这些变量以获得各种业务洞察(性能、趋势、触发事件等)。)</p><p id="e443" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">物联网应用中的整体流程可以使用裂变进行编排:</p><ul class=""><li id="dd9b" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated">使用网关将数据聚集起来，然后发送到在Kubernetes托管pods上运行的Kafka服务器集群上运行的各种消息队列中</li><li id="5c8a" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">基于整个管道流调用裂变函数:</li><li id="11f2" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">对于放在消息队列中的给定文件，文件的内容被传递给一个裂变函数，该函数首先对其进行规范化，提取感兴趣的变量，然后将输出发送到NoSQL数据库或文件系统。</li><li id="3dd3" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">第二个函数将运行，以响应放置在NoSQL数据库中的规范化文件。它将读取文件的内容，根据需要(基于用例)执行计算，然后调用微服务来执行功能，例如将数据发送到数据湖或数据集市进行进一步分析。</li><li id="cefb" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">可以为事件流中的任何类型的处理动作编写裂变函数。FaaS可根据数据量的变化按需扩展或缩小。</li></ul><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/944f11118cbb1f39f15494ae1cabbbe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mFEtIgasvB2H2iw9.png"/></div></div></figure><p id="6720" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无服务器应用——物联网用例的参考架构</p><h1 id="dec2" class="kx ky hu bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">参考架构#2:金融服务(支付处理、风险计算等。)</h1><p id="6ade" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">在金融服务行业，支付处理、合规性检查和风险指标等关键任务可以使用基于裂变的无服务器架构进行实时计算。</p><ul class=""><li id="85e7" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated">财务应用程序中的整个流程可以使用裂变进行编排:开发人员将裂变功能作为共享功能部署到多个应用程序中，这些应用程序是各种支付处理网关的前端。这些应用程序处理用户认证、注册和支付相关数据的收集。这些系统还在后端与记录交易数据的各种数据库接口。</li><li id="9269" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">创建裂变函数来解析具有以下变量的给定输入数据流:用户的信用卡数据、交易地点、任何其他人口统计信息等。</li></ul><ol class=""><li id="a734" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kw ko kp kq dt translated">第一个函数可以调用欺诈检测API，并根据检查结果将数据保存到内存数据网格中。</li><li id="32b6" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kw ko kp kq dt translated">当检查通过或失败时，调用第二组函数。如果支票已通过，该函数将批准付款并向用户发送确认消息。</li><li id="74e2" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kw ko kp kq dt translated">如果怀疑支付是欺诈性的，则调用另一个函数，向后端的欺诈检测系统发出警报。</li></ol><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/3562da7abe56b79d6d083176a87dee4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wzJwLduX6qfXDaIn.png"/></div></div></figure><p id="9573" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无服务器应用—金融服务使用案例的参考体系结构</p><h1 id="e280" class="kx ky hu bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">参考架构#3: Web应用增强</h1><p id="2072" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">绝大多数企业应用程序都是三层web应用程序。从新客户入职，到与执行一系列业务任务和技术任务(如备份、报告、警报、数据丰富)的各种后台职能部门进行沟通，这些工作无所不包。)</p><p id="8abd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">一种新兴的模式是让无服务器的裂变功能来处理这些任务，而不影响单片n层应用程序的复杂开发和部署方法。</p><p id="5fc8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">web应用程序增强的整个流程可以使用裂变来编排:</p><ul class=""><li id="c474" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated">业务用户继续与(遗留)应用程序交互，但是可以利用裂变功能提供的增强功能</li><li id="b2b2" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">如图所示，为一系列计算和数据处理任务创建函数</li><li id="e97c" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">主应用程序在需要的时候触发这些功能</li><li id="d659" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">专用功能执行所描述的适当逻辑，并且如果需要的话“向应用报告”。</li></ul><p id="7ac4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这可以被视为一种将现有遗留应用逐步重构或分解/增强为微服务的方式，或者轻松添加不依赖于“母船”开发和发布流程的附加功能。</p><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/138afe18d402d1bd6235c8b1dee668fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pEWFWFyzJrFcRUru.png"/></div></div></figure><p id="f0bf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无服务器应用Web应用使用案例的参考架构</p><h1 id="f03b" class="kx ky hu bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">参考架构#4:使遗留系统现代化</h1><p id="7967" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">大型机、N层应用程序等遗留系统非常普遍，并且深深扎根于银行、保险、零售等行业。通常情况下，简单地淘汰和替换这些系统是不可能的(由于复杂性、业务依赖性、重新设计需要的时间，以及这些遗留系统仍然运行良好并具有成熟的使用模式的事实。)为了确保与现代接口(如web服务和移动应用程序)的互操作性，裂变函数可以在这些系统周围提供基于标准的API包装器。</p><p id="d0a5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">例如:</p><ul class=""><li id="c8f3" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated">请求被发送到API网关，该网关执行基本的转换，并根据请求的端点根据需要调用裂变函数</li><li id="7cf0" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">函数接收输入数据(例如JSON)并将其转换成终端系统可以处理的格式，然后调用(遗留)业务系统</li><li id="5f7b" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">一旦系统做出响应，函数就可以获取响应并将其转换为源系统能够理解的格式，然后使用适当的响应调用API网关。</li></ul><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/4cc370ff0ccbe43dcc591c2d56fdfbd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-BuGQf1WGydMYFbS.png"/></div></div></figure><p id="444e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无服务器应用——传统应用现代化的参考架构</p><h1 id="455c" class="kx ky hu bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">参考架构#5:使用Apache Spark的机器学习和深度学习</h1><p id="62ed" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">在各行各业，我们看到应用程序越来越多地将机器学习(ML)功能融入业务流程和大数据。从欺诈检测、客户行为和管道分析、虚拟现实、对话界面、聊天机器人、消费趋势、视频/面部识别等等——似乎ML(和AI)无处不在。</p><p id="66e9" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">对于大多数公司来说，ML和预测分析计划通常局限于组织内的特定项目。为了实现ML的真正价值，跨应用程序共享数据、学习、算法和模型是有利的。裂变与Apache Spark等技术相结合，使您能够提供流处理和趋势预测的数据，供各种最终用户/应用程序使用。</p><p id="cfa5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">机器学习应用程序的整体流程可以使用裂变和Apache Spark进行编排:</p><ul class=""><li id="2b33" class="ki kj hu je b jf jg jj jk jn kk jr kl jv km jz kn ko kp kq dt translated">来自业务运营的数据被实时接收到一个基于Kafka的消息队列集群中。</li><li id="4206" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">Spark Streaming用于微批量接收这些数据，通常基于时间窗口。这些数据存储在一个数据湖中进行批量分析，并发送到存储不同预测模型的Spark MlLib运行时。</li><li id="9c5d" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">这些模型基于Spark上运行的通用ML算法。这些包括监督和非监督算法，例如聚类、分类算法等。</li><li id="e11c" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">一旦模型的结果被写入NoSQL数据库或内存中的数据网格，裂变功能就会被触发。</li><li id="b31f" class="ki kj hu je b jf kr jj ks jn kt jr ku jv kv jz kn ko kp kq dt translated">这些功能实现了一系列业务关键功能。例如:更新业务分析仪表板、发送实时客户报价和提醒客户代理。</li></ul><figure class="mb mc md me fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ma"><img src="../Images/121940bd49093e473cc113b4a446cfa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kQHEXvJ-r3lHWYdQ.png"/></div></div></figure><p id="f163" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">无服务器应用—机器学习和大数据应用的参考架构</p><h1 id="4356" class="kx ky hu bd kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu dt translated">结论</h1><p id="9131" class="pw-post-body-paragraph jc jd hu je b jf lv jh ji jj lw jl jm jn lx jp jq jr ly jt ju jv lz jx jy jz hn dt translated">无服务器拥有巨大的行业份额，是继Kubernetes之后最热门的趋势。然而，与其他转型技术一样，围绕锁定、可扩展性和生态系统集成仍存在重大问题。<a class="ae ka" href="https://fission.io/" rel="noopener ugc nofollow" target="_blank">开源无服务器解决方案</a>使用高度灵活、先进且基于标准的FaaS平台，帮助垂直行业解决其紧迫的业务挑战，该平台可在任何地方运行——内部和任何公共云上。</p></div></div>    
</body>
</html>