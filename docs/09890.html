<html>
<head>
<title>The Right Way To Develop Your Ethereum Dapp is Here: DRIZZLE!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¼€å‘ä½ ä»¥å¤ªåŠDappçš„æ­£ç¡®æ–¹æ³•åœ¨è¿™é‡Œ:æ¯›æ¯›é›¨ï¼</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/the-right-way-to-develop-your-ethereum-dapp-is-here-drizzle-a633af45f031?source=collection_archive---------1-----------------------#2018-12-08">https://medium.com/hackernoon/the-right-way-to-develop-your-ethereum-dapp-is-here-drizzle-a633af45f031?source=collection_archive---------1-----------------------#2018-12-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/514ac49bc86dc189469314697e1ec857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gv0q9o138pz8q2reJs-apQ.png"/></div></div></figure><p id="04bc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">å¼€å§‹ä¹‹å‰:è¯·ä¸è¦é—®æˆ‘ä¸ºä»€ä¹ˆè¦æ”¾é‚£äº›å¤©ä¸Šæ‰ä¸‹æ¥çš„ã€ä»¤äººå‚æ¶çš„ç”œç‚¹ã€‚æˆ‘æ²¡åŠæ³•ã€‚æ¾éœ²ç”·é€‰æ‹©äº†éå¸¸ç¾å‘³çš„åå­—ã€‚æˆ‘ç›¸ä¿¡è¿™äº›ç…§ç‰‡ä¼šè®©devæ›´è¿·äººï¼</em>ğŸ˜‰</p><p id="7ee1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™ç¯‡æ–‡ç« çš„çµæ„Ÿæ¥è‡ªäº<a class="kb kc gr" href="https://medium.com/u/f5bd3cf54c72?source=post_page-----a633af45f031--------------------------------" rel="noopener" target="_blank"> Adrian Li </a>å¯¹æ¾éœ²æ¡†æ¶çš„è´¡çŒ®ã€‚é˜¿å¾·é‡Œå®‰çš„ä½œå“å¯ä»¥åœ¨<a class="ae kd" href="https://truffleframework.com/tutorials/getting-started-with-drizzle-and-react" rel="noopener ugc nofollow" target="_blank">è¿™é‡Œ</a>æ‰¾åˆ°ã€‚å¼ºçƒˆå»ºè®®ä½ è¯»ä¸€è¯»ï¼</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="ccb1" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ‰€ä»¥è®©æˆ‘ä»¬å¼€å§‹å§..</h1><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/c338b26578a80a9919964818b9d35511.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*b46cwWNHwN_L-Y1i.gif"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">Source: <a class="ae kd" href="https://giphy.com/gifs/chris-pratt-jimmy-kimmel-rVbAzUUSUC6dO" rel="noopener ugc nofollow" target="_blank">https://giphy.com/gifs/chris-pratt-jimmy-kimmel-rVbAzUUSUC6dO</a></figcaption></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="3dc4" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ¯›æ¯›é›¨æ˜¯ä»€ä¹ˆï¼Ÿ</h1><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="ls lt l"/></div></figure><p id="e417" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ¯›æ¯›é›¨</strong>äº2018å¹´2æœˆåŠ å…¥æ¾éœ²å¥—ä»¶ã€‚å®ƒæ˜¯Truffleçš„ç¬¬ä¸€ä¸ªå‰ç«¯å¼€å‘å·¥å…·ã€‚å½“ç„¶ï¼Œå®ƒæ˜¯ä¸ºäº†è®©å¼€å‘è€…çš„ç”Ÿæ´»è½»æ¾å¾ˆå¤šã€‚å®ƒåˆ©ç”¨å¼•æ“ç›–ä¸‹çš„<a class="ae kd" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank">ååº”</a>ã€‚</p><h2 id="7cfe" class="lu km hu bd kn lv lw lx kr ly lz ma kv jn mb mc kz jr md me ld jv mf mg lh mh dt translated">æ¯›æ¯›é›¨æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</h2><ul class=""><li id="1a36" class="mi mj hu je b jf mk jj ml jn mm jr mn jv mo jz mp mq mr ms dt translated">å°†æ‚¨çš„æ™ºèƒ½åˆåŒæ•°æ®ä¸å‰ç«¯æ— ç¼åŒæ­¥</li><li id="87b9" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">å°†äº¤æ˜“æ•°æ®ä»<a class="ae kd" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">åŒºå—é“¾</a>è½¬ç§»åˆ°Redux storeå¾ˆå®¹æ˜“ã€‚</li></ul></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><p id="befa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæ¯›æ¯›é›¨çš„çœŸæ­£åŠ›é‡å°†ä»å¤´å¼€å§‹å±•ç¤ºã€‚è¿™å¯èƒ½æ˜¯è¯„ä¼°ä¸€ä¸ªæ¡†æ¶çš„æ½œåŠ›çš„æœ€å¥½æ–¹æ³•ï¼ŒåŒæ—¶äº†è§£æ•´ä¸ªæœºåˆ¶åœ¨å¹•åæ˜¯å¦‚ä½•è¿ä½œçš„ã€‚</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="e90c" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">å¼€å§‹å‰</h1><ul class=""><li id="7cbb" class="mi mj hu je b jf mk jj ml jn mm jr mn jv mo jz mp mq mr ms dt translated">éœ€è¦æ¾éœ²çš„åŸºæœ¬çŸ¥è¯†ã€‚<strong class="je hv">(ä¸æ˜¯æ¯›æ¯›é›¨ï¼)</strong></li><li id="6778" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">JavaScriptçŸ¥è¯†ï¼ŒReactJS</li></ul><h2 id="5a19" class="lu km hu bd kn lv lw lx kr ly lz ma kv jn mb mc kz jr md me ld jv mf mg lh mh dt translated">è®¾ç½®å¼€å‘ç¯å¢ƒ</h2><ul class=""><li id="701e" class="mi mj hu je b jf mk jj ml jn mm jr mn jv mo jz mp mq mr ms dt translated"><a class="ae kd" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js v8+ LTSå’Œnpm </a>ã€‚Npmç‰ˆæœ¬5.2+ã€‚</li><li id="90e0" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">æ¾éœ²:<code class="eh my mz na nb b">npm install truffle -g</code>ã€‚è¦æ£€æŸ¥å®ƒæ˜¯å¦å®‰è£…æ­£ç¡®ï¼Œè¯·åœ¨æ‚¨çš„ç»ˆç«¯ä¸Šé”®å…¥<code class="eh my mz na nb b">truffle version</code>ã€‚</li><li id="0f43" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">åŠ çº³åˆ‡-cli: <code class="eh my mz na nb b">npm install ganache-cli -g</code>ã€‚Ganacheå°†è¢«ç”¨æ¥å»ºç«‹ä¸€ä¸ªä¸ªäººçš„ï¼Œæœ¬åœ°ä»¥å¤ªåŠåŒºå—é“¾ä¸è™šæ‹Ÿè´¦æˆ·ä¸ºå¼€å‘ç›®çš„ã€‚</li><li id="8b0e" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">åˆ›å»º-ååº”-app: <code class="eh my mz na nb b">npm install create-react-app -g</code>ã€‚åªéœ€ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥è®¾ç½®ä¸€ä¸ªç°ä»£åŒ–çš„React webåº”ç”¨ç¨‹åºã€‚æ„Ÿè°¢è„¸ä¹¦ã€‚</li></ul></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="5312" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤1:åˆ›å»ºTruffleé¡¹ç›®</h1><p id="30ac" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">æ­¥éª¤1.1:åˆ›å»ºä½ çš„devæ–‡ä»¶å¤¹ï¼Œå¹¶ç§»å…¥å…¶ä¸­ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="3ba8" class="lu km hu nb b fv nj nk l nl nm">$ mkdir drizzle-tutorial<br/>$ cd drizzle-tutorial</span></pre><p id="5f55" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤1.2:åˆå§‹åŒ–æ¾éœ²</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="3e2c" class="lu km hu nb b fv nj nk l nl nm">$ truffle init</span></pre><p id="548f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="b3bc" class="lu km hu nb b fv nj nk l nl nm">Downloading...</span><span id="2dbd" class="lu km hu nb b fv nn nk l nl nm">Unpacking...</span><span id="80f0" class="lu km hu nb b fv nn nk l nl nm">Setting up...</span><span id="f56c" class="lu km hu nb b fv nn nk l nl nm">Unbox successful. Sweet!</span><span id="2884" class="lu km hu nb b fv nn nk l nl nm">Commands:</span><span id="4897" class="lu km hu nb b fv nn nk l nl nm">Compile:        truffle compile</span><span id="9c84" class="lu km hu nb b fv nn nk l nl nm">Migrate:        truffle migrate</span><span id="09fd" class="lu km hu nb b fv nn nk l nl nm">Test contracts: truffle test</span></pre><p id="8072" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¯¥æ“ä½œåˆ›å»ºäº†ä¸€ä¸ªåŸºæœ¬çš„é¡¹ç›®ç»“æ„ã€‚åœ¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨ä¸­æ‰“å¼€<code class="eh my mz na nb b">drizzle-tutorial</code>æ–‡ä»¶å¤¹ã€‚</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff no"><img src="../Images/d5bbfa6e8648b7ba6525e6cc77b984dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*y6OxbVY1R_6_OPrjtTDrAA.png"/></div></div></figure><ul class=""><li id="9b90" class="mi mj hu je b jf jg jj jk jn np jr nq jv nr jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">contracts/</strong></code>:Solidityæ™ºèƒ½åˆçº¦ç›®å½•</li><li id="2691" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">migrations/</strong></code>:éƒ¨ç½²æ–‡ä»¶çš„ç›®å½•</li><li id="6902" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">test/</strong></code>:ç”¨äºæµ‹è¯•æ‚¨çš„åº”ç”¨ç¨‹åºå’ŒåˆåŒçš„æµ‹è¯•æ–‡ä»¶ç›®å½•</li><li id="64ca" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">truffle.js</strong></code>:æ¾éœ²é…ç½®æ–‡ä»¶(å³å°†å¼ƒç”¨)</li><li id="f4b6" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">truffle-config.js</strong></code> : <strong class="je hv"> </strong>æ¾éœ²é…ç½®æ–‡ä»¶</li></ul></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="db33" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤2:ä½¿ç”¨Ganacheå¯åŠ¨ä¸ªäººåŒºå—é“¾</h1><p id="909c" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">æ‰“å¼€ç»ˆç«¯å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p><p id="bd22" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh my mz na nb b">ganache-cli -b 2</code></p><p id="d172" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh my mz na nb b">-b</code>ä»£è¡¨é—­å¡æ—¶é—´ï¼Œä¸º2ç§’ã€‚æ¢å¥è¯è¯´ï¼Œè¿™ä¸ªä¸ªäººåŒºå—é“¾æ¯2ç§’æŒ–æ˜ä¸€ä¸ªæ–°å—ã€‚è¿™åœ¨è¯·æ±‚æäº¤äº‹åŠ¡å’Œå®é™…æäº¤äº‹åŠ¡ä¹‹é—´äº§ç”Ÿäº†ä¸€ä¸ªå‡çš„æ—¶é—´å»¶è¿Ÿã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGanacheä¼šç«‹å³æ‰§è¡Œã€‚</p><p id="b27a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™ä¸ªè¿‡ç¨‹é»˜è®¤è¿è¡Œåœ¨<a class="ae kd" href="http://127.0.0.1:8545" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8545 </a>ä¸Šã€‚æ‚¨ä¹Ÿå¯ä»¥åœ¨metamaskä¸Šæ‰“å¼€è¿™ä¸ªRPCã€‚</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="3d27" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤3:ç¼–å†™æœ€å°æ™ºèƒ½åå®šå¹¶é…ç½®è¯¥åå®š</h1><p id="2550" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤3.1:åœ¨</strong> <code class="eh my mz na nb b"><strong class="je hv">contracts/</strong></code> <strong class="je hv">ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸º</strong> <code class="eh my mz na nb b"><strong class="je hv">Addition.sol</strong></code> <strong class="je hv">çš„æ–‡ä»¶ã€‚</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f257" class="lu km hu nb b fv nj nk l nl nm">pragma solidity ^0.4.24;</span><span id="846f" class="lu km hu nb b fv nn nk l nl nm">contract Addition {<br/>  int public sum = 0;</span><span id="2589" class="lu km hu nb b fv nn nk l nl nm">function add (int x, int y) public {<br/>    sum = x + y;<br/>  }<br/>}</span></pre><p id="22fd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤3.2:è¦å‘Šè¯‰truffleæˆ‘ä»¬çš„ä¸ªäººåŒºå—é“¾(Ganache)æ­£åœ¨å“ªé‡Œè¿è¡Œï¼Œæˆ‘ä»¬å¿…é¡»æ‰§è¡Œä»¥ä¸‹æ“ä½œ</strong></p><p id="c608" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨<code class="eh my mz na nb b">truffle.js</code>(å¦‚æœä½ ä½¿ç”¨çš„æ˜¯windows <code class="eh my mz na nb b">truffle-config.js</code>)ä¸­ï¼Œåšå¦‚ä¸‹ä¿®æ”¹ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="9f0e" class="lu km hu nb b fv nj nk l nl nm">module.exports = {<br/>  networks: {<br/>    development: {<br/>      host: "localhost",<br/>      port: 8545,<br/>      network_id: "*" // Match any network id<br/>    }<br/>  }<br/>};</span></pre></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="73dd" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤4:ç¼–è¯‘å’Œè¿ç§»æ™ºèƒ½åˆåŒ</h1><p id="51c9" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤4.1:ç¼–åˆ¶æ™ºèƒ½åˆåŒ</strong></p><p id="67e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¯åŠ¨æ‚¨çš„ç»ˆç«¯å¹¶è¿è¡Œå‘½ä»¤:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="26f6" class="lu km hu nb b fv nj nk l nl nm">truffle compile</span></pre><p id="e4ac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä»¥ä¸‹æ˜¯è¯¥å‘½ä»¤çš„è¾“å‡º:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="3f9b" class="lu km hu nb b fv nj nk l nl nm">Compiling ./contracts/Addition.sol...</span><span id="79c4" class="lu km hu nb b fv nn nk l nl nm">Compiling ./contracts/Migrations.sol...</span><span id="8752" class="lu km hu nb b fv nn nk l nl nm">Writing artifacts to ./build/contracts</span></pre><p id="10ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤4.2:å°†å®ƒä»¬è¿ç§»(éƒ¨ç½²)åˆ°æˆ‘ä»¬çš„ä¸ªäººåŒºå—é“¾</strong></p><p id="80b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨<code class="eh my mz na nb b"><strong class="je hv">migrations/</strong></code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code class="eh my mz na nb b"><strong class="je hv">2_deploy_contracts.js</strong></code>çš„æ–°æ–‡ä»¶ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f2b9" class="lu km hu nb b fv nj nk l nl nm">const Addition = artifacts.require("Addition");</span><span id="b1ab" class="lu km hu nb b fv nn nk l nl nm">module.exports = function(deployer) {<br/>  deployer.deploy(Addition);<br/>};</span></pre><p id="06f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ç»ˆç«¯ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:<code class="eh my mz na nb b">truffle migrate</code>ã€‚ç¡®ä¿ganacheæ­£åœ¨è¿è¡Œã€‚æ­¤å¤–ï¼Œç¡®ä¿ä½¿ç”¨çš„Solidityç¼–è¯‘å™¨æ˜¯æœ€æ–°çš„ã€‚</p><p id="2067" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä»¥ä¸‹æ˜¯ä¸Šè¿°å‘½ä»¤çš„è¾“å‡º:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="b930" class="lu km hu nb b fv nj nk l nl nm">Running migration: 1_initial_migration.js</span><span id="1f9a" class="lu km hu nb b fv nn nk l nl nm">Deploying Migrations...</span><span id="105e" class="lu km hu nb b fv nn nk l nl nm">... 0x8c5942b90b785a51ccfe55dcbbc62e0f5469484b72f0ef5ee5fe21e8cef91d3c</span><span id="5453" class="lu km hu nb b fv nn nk l nl nm">Migrations: 0x980b663f1cedfad76349e0c4da1e0c7405b1fd23</span><span id="bdfb" class="lu km hu nb b fv nn nk l nl nm">Saving successful migration to network...</span><span id="3de6" class="lu km hu nb b fv nn nk l nl nm">... 0xe3b1ad2a400d341d894170b8930471ee6d7fcb50314993df3418b4b3a517ba03</span><span id="b31f" class="lu km hu nb b fv nn nk l nl nm">Saving artifacts...</span><span id="f958" class="lu km hu nb b fv nn nk l nl nm">Running migration: 2_deploy_contracts.js</span><span id="03ff" class="lu km hu nb b fv nn nk l nl nm">Deploying Addition...</span><span id="9a2c" class="lu km hu nb b fv nn nk l nl nm">... 0x1629b636f1457d91350d5e069ca6a9e88fde72e3438ad9f6abb83c5dfa4675af</span><span id="c589" class="lu km hu nb b fv nn nk l nl nm">Addition: 0x558c220aac56c27a21215bd77551a51e0070d1b6</span><span id="0063" class="lu km hu nb b fv nn nk l nl nm">Saving successful migration to network...</span><span id="4e32" class="lu km hu nb b fv nn nk l nl nm">... 0xb3530be9102f4b2d914fd07dcdd51d10d7cbc496aab28b278ec35e4e4b476af3</span><span id="f0f1" class="lu km hu nb b fv nn nk l nl nm">Saving artifacts...</span></pre></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="9350" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤5:æµ‹è¯•æˆ‘ä»¬çš„åˆåŒ</h1><p id="e3c0" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">ä¸ºäº†éªŒè¯ä¸€åˆ‡æ˜¯å¦æ­£å¸¸ï¼Œè®©æˆ‘ä»¬ç”¨æ‘©å¡æµ‹è¯•ä¸€ä¸‹æˆ‘ä»¬çš„åˆåŒã€‚</p><p id="fcf8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨<code class="eh my mz na nb b"><strong class="je hv">test/</strong></code>ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code class="eh my mz na nb b"><strong class="je hv">Addition.js</strong></code>çš„æ–°æ–‡ä»¶ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="a62d" class="lu km hu nb b fv nj nk l nl nm">const Addition = artifacts.require("./Addition.sol");</span><span id="9a61" class="lu km hu nb b fv nn nk l nl nm">contract("Addition", accounts =&gt; {<br/>  it("should display 5", async () =&gt; {<br/>    const addition = await Addition.deployed();<br/>    await addition.add(3, 2, { from: accounts[0] });<br/>    const storedSum= await addition.sum.call();</span><span id="85e0" class="lu km hu nb b fv nn nk l nl nm">assert.equal(storedSum, 5);<br/>  });<br/>});</span></pre><p id="d242" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä½¿ç”¨å‘½ä»¤<code class="eh my mz na nb b">truffle test</code>è¿è¡Œæµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯è¾“å‡º:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/e1239bd5aafbcd31d56b11c9919833da.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*iVw9QqAAbuVD9uZF2rrRoA.png"/></div></figure><p id="2bf4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å‰å®³ï¼ç°åœ¨æˆ‘ä»¬çŸ¥é“åˆåŒå®é™…ä¸Šæ˜¯æœ‰æ•ˆçš„ã€‚</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="cfa9" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤6:åˆ›å»ºReactJSé¡¹ç›®</h1><p id="9c4e" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">è¦å¼•å¯¼ä¸€ä¸ªæç®€çš„reacté¡¹ç›®ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤:<code class="eh my mz na nb b">npx create-react-app client</code>ã€‚è¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚</p><p id="df4e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¯¥å‘½ä»¤å°†åˆ›å»º<code class="eh my mz na nb b">client</code>ã€‚</p><p id="15aa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¾“å‡ºå°†å¦‚ä¸‹æ‰€ç¤ºã€‚(è¿™ä¸æ˜¯å®Œæ•´çš„è¾“å‡ºï¼Œå› ä¸ºå®ƒå¾ˆé•¿)ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="2b96" class="lu km hu nb b fv nj nk l nl nm">Creating a new React app in /Users/niharikasingh/Desktop/playground/drizzle-tutorial/client.</span><span id="18e0" class="lu km hu nb b fv nn nk l nl nm">Installing packages. This might take a couple of minutes.</span><span id="3613" class="lu km hu nb b fv nn nk l nl nm">Installing react, react-dom, and react-scripts...</span><span id="b437" class="lu km hu nb b fv nn nk l nl nm"><strong class="nb hv">yarn add v1.10.0</strong></span><span id="0436" class="lu km hu nb b fv nn nk l nl nm">info No lockfile found.</span><span id="8a0c" class="lu km hu nb b fv nn nk l nl nm">[1/4] ğŸ”  Resolving packages...</span><span id="67b5" class="lu km hu nb b fv nn nk l nl nm">warning react-scripts &gt; eslint &gt; file-entry-cache &gt; flat-cache &gt; circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.</span><span id="02ab" class="lu km hu nb b fv nn nk l nl nm">warning react-scripts &gt; jest &gt; jest-cli &gt; prompts &gt; kleur@2.0.2: Please upgrade to kleur@3 or migrate to 'ansi-colors' if you prefer the old syntax. Visit &lt;https://github.com/lukeed/kleur/releases/tag/v3.0.0\&gt; for migration path(s).</span><span id="e755" class="lu km hu nb b fv nn nk l nl nm">[2/4] ğŸšš  Fetching packages...</span><span id="efa3" class="lu km hu nb b fv nn nk l nl nm">[3/4] ğŸ”—  Linking dependencies...</span><span id="b38f" class="lu km hu nb b fv nn nk l nl nm">[4/4] ğŸ“ƒ  Building fresh packages...</span><span id="c7bd" class="lu km hu nb b fv nn nk l nl nm">success Saved lockfile.</span><span id="3eb9" class="lu km hu nb b fv nn nk l nl nm">success Saved 828 new dependencies.</span></pre><p id="067a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<code class="eh my mz na nb b">cd client</code>ã€‚æˆ‘ä»¬å¿…é¡»å°†æˆ‘ä»¬çš„æ™ºèƒ½åˆåŒä¸è¿™ä¸ªReacté¡¹ç›®è”ç³»èµ·æ¥ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥å¤åˆ¶<code class="eh my mz na nb b">client</code>æ–‡ä»¶å¤¹ä¸­çš„<code class="eh my mz na nb b">/build/contracts</code>æ–‡ä»¶å¤¹ï¼Œæˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f8ab" class="lu km hu nb b fv nj nk l nl nm">cd src<br/>ln -s ../../build/contracts contracts</span></pre></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="4889" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">ç¬¬ä¸ƒæ­¥:å®‰è£…æ¯›æ¯›é›¨(è€¶ï¼)</h1><p id="fff3" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">åœ¨è¿è¡Œå®‰è£…å‘½ä»¤ä¹‹å‰ï¼Œç¡®ä¿æ‚¨åœ¨é¡¹ç›®çš„<code class="eh my mz na nb b">client</code>ç›®å½•ä¸­ã€‚ä¸ºæ­¤ï¼Œåœ¨ç»ˆç«¯ä¸­è¿è¡Œ<code class="eh my mz na nb b">cd ..</code>ã€‚</p><p id="d912" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¦å®‰è£…æ¯›æ¯›é›¨ï¼Œè¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼Œå‡†ç¡®åœ°è¯´èŠ±äº†æˆ‘å¤§çº¦3åˆ†é’Ÿçš„æ—¶é—´:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="8c04" class="lu km hu nb b fv nj nk l nl nm">npm install drizzle --save</span></pre><p id="204f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ä¹Ÿæ²¡æœ‰å…¶ä»–ä¾èµ–ï¼å¤šé…·å•Šã€‚ä¸éœ€è¦å®‰è£…Web3.jsæˆ–å…¶ä»–ä»»ä½•ä¸œè¥¿ã€‚æ¯›æ¯›é›¨åŒ…å«äº†æˆ‘ä»¬ä½¿ç”¨æ™ºèƒ½åˆçº¦æ‰€éœ€çš„ä¸€åˆ‡ã€‚</p><p id="0a71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨ç«¯å£3000ä¸Šè¿è¡ŒReactå‰ç«¯ã€‚ä¸ºæ­¤ï¼Œè¿è¡Œ<code class="eh my mz na nb b">npm start</code>ã€‚å¹¶å°†æµè§ˆå™¨æŒ‡å‘<a class="ae kd" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000ã€‚åº”è¯¥ä¼šå‡ºç°ä¸‹é¢çš„é¡µé¢ã€‚</a></p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nt"><img src="../Images/954009b09dee38d879ff9c9f74eea9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bX1pqYu-O3Wkektl94bDxw.png"/></div></div></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="f2c3" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤8:å®ä¾‹åŒ–æ¯›æ¯›é›¨å­˜å‚¨</h1><p id="8531" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">æˆ‘ä»¬å…ˆè¦å¯¹<strong class="je hv"> </strong> <code class="eh my mz na nb b"><strong class="je hv">client/src/index.js</strong></code> <strong class="je hv"> </strong>åšä¸€äº›æ”¹åŠ¨ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="6f47" class="lu km hu nb b fv nj nk l nl nm">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import "./index.css";<br/>import App from "./App";</span><span id="2367" class="lu km hu nb b fv nn nk l nl nm">// import drizzle functions and contract artifact<br/>import { Drizzle, generateStore } from "drizzle";<br/>import Addition from "./contracts/Addition.json";</span><span id="8f6c" class="lu km hu nb b fv nn nk l nl nm">// let drizzle know what contracts we want<br/>const options = { contracts: [Addition] };</span><span id="4722" class="lu km hu nb b fv nn nk l nl nm">// setup the drizzle store and drizzle<br/>const drizzleStore = generateStore(options);<br/>const drizzle = new Drizzle(options, drizzleStore);</span><span id="17f0" class="lu km hu nb b fv nn nk l nl nm">// pass in the drizzle instance<br/>ReactDOM.render(&lt;App drizzle={drizzle} /&gt;, document.getElementById("root"));</span></pre><p id="710f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ³¨æ„ï¼Œ<code class="eh my mz na nb b"><strong class="je hv">drizzle</strong></code>å®ä¾‹ä½œä¸ºé“å…·è¢«ä¼ é€’åˆ°<code class="eh my mz na nb b"><strong class="je hv">App</strong></code>ç»„ä»¶ä¸­ã€‚</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="b30a" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤9:é‡å¡‘client/src/App.js</h1><p id="5220" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤9.1:æ·»åŠ çŠ¶æ€å˜é‡</strong></p><p id="5bc8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬è¦åšçš„æ˜¯åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç»„ä»¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç è¡Œ:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="4648" class="lu km hu nb b fv nj nk l nl nm">state = { loading: true, drizzleState: null };</span></pre><p id="d7c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬å°†åœ¨è¿™é‡Œä½¿ç”¨ä¸¤ä¸ªçŠ¶æ€å˜é‡:</p><ol class=""><li id="5e1c" class="mi mj hu je b jf jg jj jk jn np jr nq jv nr jz nu mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">loading</strong></code> â€”è¡¨ç¤ºæ¯›æ¯›é›¨æ˜¯å¦å·²å®Œæˆåˆå§‹åŒ–ï¼Œåº”ç”¨ç¨‹åºæ˜¯å¦å‡†å¤‡å°±ç»ªã€‚åˆå§‹åŒ–è¿‡ç¨‹åŒ…æ‹¬å®ä¾‹åŒ–<code class="eh my mz na nb b"><strong class="je hv">web3</strong></code>å’Œæˆ‘ä»¬çš„æ™ºèƒ½å¥‘çº¦ï¼Œè·å–ä»»ä½•å¯ç”¨çš„ä»¥å¤ªåŠè´¦æˆ·ï¼Œå¹¶ç›‘å¬(æˆ–è€…ï¼Œåœ¨ä¸æ”¯æŒè®¢é˜…çš„æƒ…å†µä¸‹:è½®è¯¢)æ–°çš„å—ã€‚</li><li id="5ade" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz nu mq mr ms dt translated">è¿™æ˜¯æˆ‘ä»¬å°†åœ¨é¡¶çº§ç»„ä»¶ä¸­å­˜å‚¨æ¯›æ¯›é›¨å•†åº—çŠ¶æ€çš„åœ°æ–¹ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥ä¿æŒè¿™ä¸ªçŠ¶æ€å˜é‡æ˜¯æœ€æ–°çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ç®€å•åœ°ä½¿ç”¨ç®€å•çš„<code class="eh my mz na nb b"><strong class="je hv">props</strong></code>å’Œ<code class="eh my mz na nb b"><strong class="je hv">state</strong></code>æ¥å¤„ç†æ¯›æ¯›é›¨(ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ ä¸å¿…ä½¿ç”¨ä»»ä½•Reduxæˆ–é«˜çº§çš„Reactæ¨¡å¼)ã€‚</li></ol><p id="3edc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤9.2:ç¼–å†™ä¸€äº›åˆå§‹åŒ–é€»è¾‘</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="61bf" class="lu km hu nb b fv nj nk l nl nm">componentDidMount() {<br/>  const { drizzle } = this.props;<br/><br/>  // subscribe to changes in the store<br/>  this.unsubscribe = drizzle.store.subscribe(() =&gt; {<br/><br/>    // every time the store updates, grab the state from drizzle<br/>    const drizzleState = drizzle.store.getState();<br/><br/>    // check to see if it's ready, if so, update local component state<br/>    if (drizzleState.drizzleStatus.initialized) {<br/>      this.setState({ loading: false, drizzleState });<br/>    }<br/>  });<br/>}</span></pre><p id="53d3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤9.3:é€€è®¢å•†åº—</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="159e" class="lu km hu nb b fv nj nk l nl nm">compomentWillUnmount() {<br/>  this.unsubscribe();<br/>}</span></pre><p id="5853" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™å°†åœ¨å¸è½½åº”ç”¨ç¨‹åºç»„ä»¶æ—¶å®‰å…¨åœ°å–æ¶ˆè®¢é˜…ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é˜²æ­¢ä»»ä½•å†…å­˜æ³„æ¼ã€‚</p><p id="3314" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">æ­¥éª¤9.4:ä¿®æ”¹render()æ–¹æ³•</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="7bf6" class="lu km hu nb b fv nj nk l nl nm">render() {<br/>  if (this.state.loading) return "Loading Drizzle...";<br/>  return &lt;div className="App"&gt;Drizzle is ready&lt;/div&gt;;<br/>}</span></pre><p id="f4db" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æœ€ç»ˆæ–‡ä»¶åº”è¯¥å¦‚ä¸‹æ‰€ç¤º:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="fb37" class="lu km hu nb b fv nj nk l nl nm">import React, { Component } from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';</span><span id="9d62" class="lu km hu nb b fv nn nk l nl nm">class App extends Component {<br/>  state = { loading: true, drizzleState: null };</span><span id="7929" class="lu km hu nb b fv nn nk l nl nm">componentDidMount() {<br/>    const { drizzle } = this.props;</span><span id="1041" class="lu km hu nb b fv nn nk l nl nm">// subscribe to changes in the store<br/>    this.unsubscribe = drizzle.store.subscribe(() =&gt; {</span><span id="a348" class="lu km hu nb b fv nn nk l nl nm">// every time the store updates, grab the state from drizzle<br/>      const drizzleState = drizzle.store.getState();</span><span id="d473" class="lu km hu nb b fv nn nk l nl nm">// check to see if it's ready, if so, update local component state<br/>      if (drizzleState.drizzleStatus.initialized) {<br/>        this.setState({ loading: false, drizzleState });<br/>      }<br/>    });<br/>  }</span><span id="7275" class="lu km hu nb b fv nn nk l nl nm">compomentWillUnmount() {<br/>    this.unsubscribe();<br/>  }</span><span id="8025" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    if (this.state.loading) return "Loading Drizzle...";<br/>    return &lt;div className="App"&gt;Drizzle is ready&lt;/div&gt;;<br/>  }<br/>}</span><span id="1995" class="lu km hu nb b fv nn nk l nl nm">export default App;</span></pre><p id="7b37" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨è¿™ä¹‹åï¼Œlocalhost:3000åº”è¯¥æ˜¯è¿™æ ·çš„:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nv"><img src="../Images/7f31e50bc1ddd3ec4173f6c8dd36cc43.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*osufx4qRlbtaxLhKBaI8Rg.png"/></div></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="ab3a" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤10:ä½¿ç”¨æ¯›æ¯›é›¨ä»æ™ºèƒ½åˆåŒä¸­è¯»å–</h1><p id="3ea3" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">åœ¨<code class="eh my mz na nb b"><strong class="je hv">client/src/ReadSum.js</strong></code>åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶ç²˜è´´ä»¥ä¸‹å†…å®¹:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="4dd7" class="lu km hu nb b fv nj nk l nl nm">import React from "react";</span><span id="c488" class="lu km hu nb b fv nn nk l nl nm">class ReadSum extends React.Component {<br/>  componentDidMount() {<br/>    const { drizzle, drizzleState } = this.props;<br/>    console.log(drizzle);<br/>    console.log(drizzleState);<br/>  }</span><span id="1822" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    return &lt;div&gt;ReadSum Component&lt;/div&gt;;<br/>  }<br/>}</span><span id="efc7" class="lu km hu nb b fv nn nk l nl nm">export default ReadSum;</span></pre><p id="4ad7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç„¶ååœ¨<code class="eh my mz na nb b"><strong class="je hv">App.js</strong></code>ä¸­ï¼Œç”¨ä¸‹é¢çš„è¯­å¥å¯¼å…¥æ–°ç»„ä»¶:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="5b3f" class="lu km hu nb b fv nj nk l nl nm">import ReadSum from "./ReadSum";</span></pre><p id="716e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å°†<code class="eh my mz na nb b">App.js</code> render()æ–¹æ³•æ”¹ä¸ºå¦‚ä¸‹:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f805" class="lu km hu nb b fv nj nk l nl nm">render() {<br/>  if (this.state.loading) return "Loading Drizzle...";<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;ReadSum<br/>        drizzle={this.props.drizzle}<br/>        drizzleState={this.state.drizzleState}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="084e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å®é™…æƒ…å†µå¦‚ä¸‹:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nw"><img src="../Images/133848557fbcf0b8ebf8514a865c6ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*9YNUl6CfMd6gbeqdp0V6pw.png"/></div></figure><p id="bacf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç°åœ¨ï¼Œè®©æˆ‘ä»¬å®é™…è¯»å–æ™ºèƒ½åˆçº¦çš„ä»·å€¼ã€‚</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="d1b0" class="lu km hu nb b fv nj nk l nl nm">import React from "react";</span><span id="73cd" class="lu km hu nb b fv nn nk l nl nm">class ReadSum extends React.Component {<br/>  state = { dataKey: null };</span><span id="b053" class="lu km hu nb b fv nn nk l nl nm">componentDidMount() {<br/>    const { drizzle } = this.props;<br/>    const contract = drizzle.contracts.Addition;</span><span id="1e67" class="lu km hu nb b fv nn nk l nl nm">// let drizzle know we want to watch 'sum'<br/>    var dataKey = contract.methods["sum"].cacheCall();</span><span id="0a09" class="lu km hu nb b fv nn nk l nl nm">// save the `dataKey` to local component state for later reference<br/>    this.setState({ dataKey });<br/>  }</span><span id="8716" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    // get the contract state from drizzleState<br/>    const { Addition } = this.props.drizzleState.contracts;</span><span id="fed9" class="lu km hu nb b fv nn nk l nl nm">// using the saved `dataKey`, get the variable we're interested in<br/>    const sum = Addition.sum[this.state.dataKey];</span><span id="0c9a" class="lu km hu nb b fv nn nk l nl nm">// if it exists, then we display its value<br/>    return &lt;p&gt;Sum: {sum &amp;&amp; sum.value}&lt;/p&gt;;<br/>  }<br/>}</span><span id="1284" class="lu km hu nb b fv nn nk l nl nm">export default ReadSum;</span></pre><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nx"><img src="../Images/79fc6f28d26711eff1207679b0ecff31.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*16u2-C5QLyVUBSwR66e5Xg.png"/></div></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="37b0" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">æ­¥éª¤11:ç”¨æ¯›æ¯›é›¨åœ¨åŒºå—é“¾ä¸Šå†™å­—</h1><p id="26e3" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">å¦‚æœæˆ‘ä»¬å¸Œæœ›æ·»åŠ ä¸¤ä¸ªæ–°æ•°å­—å¹¶å°†æ€»å’Œå­˜å‚¨åœ¨åŒºå—é“¾ä¸Šï¼Œè¯·æ‰§è¡Œä»¥ä¸‹æ“ä½œ:</p><p id="1fc5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶<code class="eh my mz na nb b"><strong class="je hv">client/src/SetSum.js</strong></code>å¹¶ç²˜è´´ä»¥ä¸‹å†…å®¹:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="fa5d" class="lu km hu nb b fv nj nk l nl nm">import React from "react";</span><span id="0018" class="lu km hu nb b fv nn nk l nl nm">class SetSum extends React.Component {<br/>  state = { stackId: null};</span><span id="7334" class="lu km hu nb b fv nn nk l nl nm">handleKeyDown1 = e =&gt; {<br/>    // if the enter key is pressed, set the value with the string<br/>    if (e.keyCode === 13) {<br/>      this.setValue(e.target.value1);<br/>    }<br/>  };<br/>  handleKeyDown2 = f =&gt; {<br/>    // if the enter key is pressed, set the value with the string<br/>    if (f.keyCode === 13) {<br/>      this.setValue(f.target.value2);<br/>    }<br/>  };</span><span id="1f3b" class="lu km hu nb b fv nn nk l nl nm">setValue = (value1, value2) =&gt; {<br/>    const { drizzle, drizzleState } = this.props;<br/>    const contract = drizzle.contracts.Addition;</span><span id="6e38" class="lu km hu nb b fv nn nk l nl nm">// let drizzle know we want to call the `add` method with `value1 and value2`<br/>    const stackId = contract.methods["add"].cacheSend(this.textInput1.value, this.textInput2.value, {<br/>      from: drizzleState.accounts[0]<br/>    });</span><span id="3904" class="lu km hu nb b fv nn nk l nl nm">// save the `stackId` for later reference<br/>    this.setState({ stackId });<br/>  };</span><span id="1957" class="lu km hu nb b fv nn nk l nl nm">getTxStatus = () =&gt; {<br/>    // get the transaction states from the drizzle state<br/>    const { transactions, transactionStack } = this.props.drizzleState;</span><span id="4a96" class="lu km hu nb b fv nn nk l nl nm">// get the transaction hash using our saved `stackId`<br/>    const txHash = transactionStack[this.state.stackId];</span><span id="643c" class="lu km hu nb b fv nn nk l nl nm">// if transaction hash does not exist, don't display anything<br/>    if (!txHash) return null;</span><span id="d6f4" class="lu km hu nb b fv nn nk l nl nm">// otherwise, return the transaction status<br/>    return `Transaction status: ${transactions[txHash].status}`;<br/>  };</span><span id="7268" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;input type="number" ref={(input1) =&gt; this.textInput1 = input1} onKeyDown={this.handleKeyDown1} /&gt;<br/>        &lt;input type="number" ref={(input2) =&gt; this.textInput2 = input2} onKeyDown={this.handleKeyDown2} /&gt;<br/>        &lt;div&gt;{this.getTxStatus()}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="9a34" class="lu km hu nb b fv nn nk l nl nm">export default SetSum;</span></pre><p id="5216" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¯¼å…¥å¹¶åŒ…å«åœ¨<code class="eh my mz na nb b"><strong class="je hv">App.js</strong></code>ä¸­</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="25ae" class="lu km hu nb b fv nj nk l nl nm">import SetSum from "./SetSum";</span></pre><p id="c48f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å¹¶å°†<code class="eh my mz na nb b">App.js</code>çš„<code class="eh my mz na nb b">render()</code>æ–¹æ³•æ”¹ä¸º:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="5736" class="lu km hu nb b fv nj nk l nl nm">render() {<br/>    if (this.state.loading) return "Loading Drizzle...";<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;ReadSum<br/>          drizzle={this.props.drizzle}<br/>          drizzleState={this.state.drizzleState}<br/>        /&gt;<br/>        &lt;SetSum<br/>          drizzle={this.props.drizzle}<br/>          drizzleState={this.state.drizzleState}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }</span></pre><p id="db3d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™ä¸ªåº”è¯¥ç®¡ç”¨ï¼</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ny"><img src="../Images/5e30b04ffddd3517f82fe0a7d49d754b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vlGghIBEDNn_2YYM8oYMkA.png"/></div></div></figure><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nz"><img src="../Images/01a7ee28268f06d4e61db940a1f44d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*FW4pCEnms1Y7dq9DWlZqJw.png"/></div></figure><p id="3d6f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">äº¤æ˜“çŠ¶æ€å¯ä»¥æ˜¯â€œå¾…å®šâ€æˆ–â€œæˆåŠŸâ€ã€‚</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><p id="0312" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ¯›æ¯›é›¨101å°±è¿™æ ·ç»“æŸäº†ã€‚</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/629a8f7705d64cbc2e6b64af17c6585e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*EsGUmEkTDzfts72F.gif"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">Source: <a class="ae kd" href="https://gfycat.com/giantindeliblebinturong" rel="noopener ugc nofollow" target="_blank">https://gfycat.com/giantindeliblebinturong</a></figcaption></figure><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="ob lt l"/></div></figure></div></div>    
</body>
</html>