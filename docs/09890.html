<html>
<head>
<title>The Right Way To Develop Your Ethereum Dapp is Here: DRIZZLE!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开发你以太坊Dapp的正确方法在这里:毛毛雨！</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/the-right-way-to-develop-your-ethereum-dapp-is-here-drizzle-a633af45f031?source=collection_archive---------1-----------------------#2018-12-08">https://medium.com/hackernoon/the-right-way-to-develop-your-ethereum-dapp-is-here-drizzle-a633af45f031?source=collection_archive---------1-----------------------#2018-12-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/514ac49bc86dc189469314697e1ec857.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gv0q9o138pz8q2reJs-apQ.png"/></div></div></figure><p id="04bc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ka">开始之前:请不要问我为什么要放那些天上掉下来的、令人垂涎的甜点。我没办法。松露男选择了非常美味的名字。我相信这些照片会让dev更迷人！</em>😉</p><p id="7ee1" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这篇文章的灵感来自于<a class="kb kc gr" href="https://medium.com/u/f5bd3cf54c72?source=post_page-----a633af45f031--------------------------------" rel="noopener" target="_blank"> Adrian Li </a>对松露框架的贡献。阿德里安的作品可以在<a class="ae kd" href="https://truffleframework.com/tutorials/getting-started-with-drizzle-and-react" rel="noopener ugc nofollow" target="_blank">这里</a>找到。强烈建议你读一读！</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="ccb1" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">所以让我们开始吧..</h1><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff lj"><img src="../Images/c338b26578a80a9919964818b9d35511.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*b46cwWNHwN_L-Y1i.gif"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">Source: <a class="ae kd" href="https://giphy.com/gifs/chris-pratt-jimmy-kimmel-rVbAzUUSUC6dO" rel="noopener ugc nofollow" target="_blank">https://giphy.com/gifs/chris-pratt-jimmy-kimmel-rVbAzUUSUC6dO</a></figcaption></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="3dc4" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">毛毛雨是什么？</h1><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="ls lt l"/></div></figure><p id="e417" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">毛毛雨</strong>于2018年2月加入松露套件。它是Truffle的第一个前端开发工具。当然，它是为了让开发者的生活轻松很多。它利用引擎盖下的<a class="ae kd" href="https://hackernoon.com/tagged/react" rel="noopener ugc nofollow" target="_blank">反应</a>。</p><h2 id="7cfe" class="lu km hu bd kn lv lw lx kr ly lz ma kv jn mb mc kz jr md me ld jv mf mg lh mh dt translated">毛毛雨是做什么的？</h2><ul class=""><li id="1a36" class="mi mj hu je b jf mk jj ml jn mm jr mn jv mo jz mp mq mr ms dt translated">将您的智能合同数据与前端无缝同步</li><li id="87b9" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">将交易数据从<a class="ae kd" href="https://hackernoon.com/tagged/blockchain" rel="noopener ugc nofollow" target="_blank">区块链</a>转移到Redux store很容易。</li></ul></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><p id="befa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在本教程中，毛毛雨的真正力量将从头开始展示。这可能是评估一个框架的潜力的最好方法，同时了解整个机制在幕后是如何运作的。</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="e90c" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">开始前</h1><ul class=""><li id="7cbb" class="mi mj hu je b jf mk jj ml jn mm jr mn jv mo jz mp mq mr ms dt translated">需要松露的基本知识。<strong class="je hv">(不是毛毛雨！)</strong></li><li id="6778" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">JavaScript知识，ReactJS</li></ul><h2 id="5a19" class="lu km hu bd kn lv lw lx kr ly lz ma kv jn mb mc kz jr md me ld jv mf mg lh mh dt translated">设置开发环境</h2><ul class=""><li id="701e" class="mi mj hu je b jf mk jj ml jn mm jr mn jv mo jz mp mq mr ms dt translated"><a class="ae kd" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js v8+ LTS和npm </a>。Npm版本5.2+。</li><li id="90e0" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">松露:<code class="eh my mz na nb b">npm install truffle -g</code>。要检查它是否安装正确，请在您的终端上键入<code class="eh my mz na nb b">truffle version</code>。</li><li id="0f43" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">加纳切-cli: <code class="eh my mz na nb b">npm install ganache-cli -g</code>。Ganache将被用来建立一个个人的，本地以太坊区块链与虚拟账户为开发目的。</li><li id="8b0e" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated">创建-反应-app: <code class="eh my mz na nb b">npm install create-react-app -g</code>。只需一个命令，就可以设置一个现代化的React web应用程序。感谢脸书。</li></ul></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="5312" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤1:创建Truffle项目</h1><p id="30ac" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">步骤1.1:创建你的dev文件夹，并移入其中。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="3ba8" class="lu km hu nb b fv nj nk l nl nm">$ mkdir drizzle-tutorial<br/>$ cd drizzle-tutorial</span></pre><p id="5f55" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤1.2:初始化松露</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="3e2c" class="lu km hu nb b fv nj nk l nl nm">$ truffle init</span></pre><p id="548f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输出将如下所示:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="b3bc" class="lu km hu nb b fv nj nk l nl nm">Downloading...</span><span id="2dbd" class="lu km hu nb b fv nn nk l nl nm">Unpacking...</span><span id="80f0" class="lu km hu nb b fv nn nk l nl nm">Setting up...</span><span id="f56c" class="lu km hu nb b fv nn nk l nl nm">Unbox successful. Sweet!</span><span id="2884" class="lu km hu nb b fv nn nk l nl nm">Commands:</span><span id="4897" class="lu km hu nb b fv nn nk l nl nm">Compile:        truffle compile</span><span id="9c84" class="lu km hu nb b fv nn nk l nl nm">Migrate:        truffle migrate</span><span id="09fd" class="lu km hu nb b fv nn nk l nl nm">Test contracts: truffle test</span></pre><p id="8072" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该操作创建了一个基本的项目结构。在任何文本编辑器中打开<code class="eh my mz na nb b">drizzle-tutorial</code>文件夹。</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff no"><img src="../Images/d5bbfa6e8648b7ba6525e6cc77b984dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1184/format:webp/1*y6OxbVY1R_6_OPrjtTDrAA.png"/></div></div></figure><ul class=""><li id="9b90" class="mi mj hu je b jf jg jj jk jn np jr nq jv nr jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">contracts/</strong></code>:Solidity智能合约目录</li><li id="2691" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">migrations/</strong></code>:部署文件的目录</li><li id="6902" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">test/</strong></code>:用于测试您的应用程序和合同的测试文件目录</li><li id="64ca" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">truffle.js</strong></code>:松露配置文件(即将弃用)</li><li id="f4b6" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz mp mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">truffle-config.js</strong></code> : <strong class="je hv"> </strong>松露配置文件</li></ul></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="db33" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤2:使用Ganache启动个人区块链</h1><p id="909c" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">打开终端并运行以下命令:</p><p id="bd22" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh my mz na nb b">ganache-cli -b 2</code></p><p id="d172" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh my mz na nb b">-b</code>代表闭塞时间，为2秒。换句话说，这个个人区块链每2秒挖掘一个新块。这在请求提交事务和实际提交事务之间产生了一个假的时间延迟。默认情况下，Ganache会立即执行。</p><p id="b27a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个过程默认运行在<a class="ae kd" href="http://127.0.0.1:8545" rel="noopener ugc nofollow" target="_blank"> http://127.0.0.1:8545 </a>上。您也可以在metamask上打开这个RPC。</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="3d27" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤3:编写最小智能协定并配置该协定</h1><p id="2550" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated"><strong class="je hv">步骤3.1:在</strong> <code class="eh my mz na nb b"><strong class="je hv">contracts/</strong></code> <strong class="je hv">目录下新建一个名为</strong> <code class="eh my mz na nb b"><strong class="je hv">Addition.sol</strong></code> <strong class="je hv">的文件。</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f257" class="lu km hu nb b fv nj nk l nl nm">pragma solidity ^0.4.24;</span><span id="846f" class="lu km hu nb b fv nn nk l nl nm">contract Addition {<br/>  int public sum = 0;</span><span id="2589" class="lu km hu nb b fv nn nk l nl nm">function add (int x, int y) public {<br/>    sum = x + y;<br/>  }<br/>}</span></pre><p id="22fd" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤3.2:要告诉truffle我们的个人区块链(Ganache)正在哪里运行，我们必须执行以下操作</strong></p><p id="c608" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh my mz na nb b">truffle.js</code>(如果你使用的是windows <code class="eh my mz na nb b">truffle-config.js</code>)中，做如下修改。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="9f0e" class="lu km hu nb b fv nj nk l nl nm">module.exports = {<br/>  networks: {<br/>    development: {<br/>      host: "localhost",<br/>      port: 8545,<br/>      network_id: "*" // Match any network id<br/>    }<br/>  }<br/>};</span></pre></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="73dd" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤4:编译和迁移智能合同</h1><p id="51c9" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated"><strong class="je hv">步骤4.1:编制智能合同</strong></p><p id="67e7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">启动您的终端并运行命令:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="26f6" class="lu km hu nb b fv nj nk l nl nm">truffle compile</span></pre><p id="e4ac" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是该命令的输出:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="3f9b" class="lu km hu nb b fv nj nk l nl nm">Compiling ./contracts/Addition.sol...</span><span id="79c4" class="lu km hu nb b fv nn nk l nl nm">Compiling ./contracts/Migrations.sol...</span><span id="8752" class="lu km hu nb b fv nn nk l nl nm">Writing artifacts to ./build/contracts</span></pre><p id="10ec" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤4.2:将它们迁移(部署)到我们的个人区块链</strong></p><p id="80b7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh my mz na nb b"><strong class="je hv">migrations/</strong></code>目录下创建一个名为<code class="eh my mz na nb b"><strong class="je hv">2_deploy_contracts.js</strong></code>的新文件。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f2b9" class="lu km hu nb b fv nj nk l nl nm">const Addition = artifacts.require("Addition");</span><span id="b1ab" class="lu km hu nb b fv nn nk l nl nm">module.exports = function(deployer) {<br/>  deployer.deploy(Addition);<br/>};</span></pre><p id="06f7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在终端中，运行以下命令:<code class="eh my mz na nb b">truffle migrate</code>。确保ganache正在运行。此外，确保使用的Solidity编译器是最新的。</p><p id="2067" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">以下是上述命令的输出:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="b930" class="lu km hu nb b fv nj nk l nl nm">Running migration: 1_initial_migration.js</span><span id="1f9a" class="lu km hu nb b fv nn nk l nl nm">Deploying Migrations...</span><span id="105e" class="lu km hu nb b fv nn nk l nl nm">... 0x8c5942b90b785a51ccfe55dcbbc62e0f5469484b72f0ef5ee5fe21e8cef91d3c</span><span id="5453" class="lu km hu nb b fv nn nk l nl nm">Migrations: 0x980b663f1cedfad76349e0c4da1e0c7405b1fd23</span><span id="bdfb" class="lu km hu nb b fv nn nk l nl nm">Saving successful migration to network...</span><span id="3de6" class="lu km hu nb b fv nn nk l nl nm">... 0xe3b1ad2a400d341d894170b8930471ee6d7fcb50314993df3418b4b3a517ba03</span><span id="b31f" class="lu km hu nb b fv nn nk l nl nm">Saving artifacts...</span><span id="f958" class="lu km hu nb b fv nn nk l nl nm">Running migration: 2_deploy_contracts.js</span><span id="03ff" class="lu km hu nb b fv nn nk l nl nm">Deploying Addition...</span><span id="9a2c" class="lu km hu nb b fv nn nk l nl nm">... 0x1629b636f1457d91350d5e069ca6a9e88fde72e3438ad9f6abb83c5dfa4675af</span><span id="c589" class="lu km hu nb b fv nn nk l nl nm">Addition: 0x558c220aac56c27a21215bd77551a51e0070d1b6</span><span id="0063" class="lu km hu nb b fv nn nk l nl nm">Saving successful migration to network...</span><span id="4e32" class="lu km hu nb b fv nn nk l nl nm">... 0xb3530be9102f4b2d914fd07dcdd51d10d7cbc496aab28b278ec35e4e4b476af3</span><span id="f0f1" class="lu km hu nb b fv nn nk l nl nm">Saving artifacts...</span></pre></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="9350" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤5:测试我们的合同</h1><p id="e3c0" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">为了验证一切是否正常，让我们用摩卡测试一下我们的合同。</p><p id="fcf8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在<code class="eh my mz na nb b"><strong class="je hv">test/</strong></code>目录下创建一个名为<code class="eh my mz na nb b"><strong class="je hv">Addition.js</strong></code>的新文件。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="a62d" class="lu km hu nb b fv nj nk l nl nm">const Addition = artifacts.require("./Addition.sol");</span><span id="9a61" class="lu km hu nb b fv nn nk l nl nm">contract("Addition", accounts =&gt; {<br/>  it("should display 5", async () =&gt; {<br/>    const addition = await Addition.deployed();<br/>    await addition.add(3, 2, { from: accounts[0] });<br/>    const storedSum= await addition.sum.call();</span><span id="85e0" class="lu km hu nb b fv nn nk l nl nm">assert.equal(storedSum, 5);<br/>  });<br/>});</span></pre><p id="d242" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">使用命令<code class="eh my mz na nb b">truffle test</code>运行测试。以下是输出:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff ns"><img src="../Images/e1239bd5aafbcd31d56b11c9919833da.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*iVw9QqAAbuVD9uZF2rrRoA.png"/></div></figure><p id="2bf4" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">厉害！现在我们知道合同实际上是有效的。</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="cfa9" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤6:创建ReactJS项目</h1><p id="9c4e" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">要引导一个极简的react项目，运行下面的命令:<code class="eh my mz na nb b">npx create-react-app client</code>。这可能需要几分钟时间。</p><p id="df4e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">该命令将创建<code class="eh my mz na nb b">client</code>。</p><p id="15aa" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">输出将如下所示。(这不是完整的输出，因为它很长)。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="2b96" class="lu km hu nb b fv nj nk l nl nm">Creating a new React app in /Users/niharikasingh/Desktop/playground/drizzle-tutorial/client.</span><span id="18e0" class="lu km hu nb b fv nn nk l nl nm">Installing packages. This might take a couple of minutes.</span><span id="3613" class="lu km hu nb b fv nn nk l nl nm">Installing react, react-dom, and react-scripts...</span><span id="b437" class="lu km hu nb b fv nn nk l nl nm"><strong class="nb hv">yarn add v1.10.0</strong></span><span id="0436" class="lu km hu nb b fv nn nk l nl nm">info No lockfile found.</span><span id="8a0c" class="lu km hu nb b fv nn nk l nl nm">[1/4] 🔍  Resolving packages...</span><span id="67b5" class="lu km hu nb b fv nn nk l nl nm">warning react-scripts &gt; eslint &gt; file-entry-cache &gt; flat-cache &gt; circular-json@0.3.3: CircularJSON is in maintenance only, flatted is its successor.</span><span id="02ab" class="lu km hu nb b fv nn nk l nl nm">warning react-scripts &gt; jest &gt; jest-cli &gt; prompts &gt; kleur@2.0.2: Please upgrade to kleur@3 or migrate to 'ansi-colors' if you prefer the old syntax. Visit &lt;https://github.com/lukeed/kleur/releases/tag/v3.0.0\&gt; for migration path(s).</span><span id="e755" class="lu km hu nb b fv nn nk l nl nm">[2/4] 🚚  Fetching packages...</span><span id="efa3" class="lu km hu nb b fv nn nk l nl nm">[3/4] 🔗  Linking dependencies...</span><span id="b38f" class="lu km hu nb b fv nn nk l nl nm">[4/4] 📃  Building fresh packages...</span><span id="c7bd" class="lu km hu nb b fv nn nk l nl nm">success Saved lockfile.</span><span id="3eb9" class="lu km hu nb b fv nn nk l nl nm">success Saved 828 new dependencies.</span></pre><p id="067a" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在让我们来看一下<code class="eh my mz na nb b">cd client</code>。我们必须将我们的智能合同与这个React项目联系起来。我们可以直接复制<code class="eh my mz na nb b">client</code>文件夹中的<code class="eh my mz na nb b">/build/contracts</code>文件夹，或者使用以下命令:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f8ab" class="lu km hu nb b fv nj nk l nl nm">cd src<br/>ln -s ../../build/contracts contracts</span></pre></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="4889" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">第七步:安装毛毛雨(耶！)</h1><p id="fff3" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">在运行安装命令之前，确保您在项目的<code class="eh my mz na nb b">client</code>目录中。为此，在终端中运行<code class="eh my mz na nb b">cd ..</code>。</p><p id="d912" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">要安装毛毛雨，运行下面的命令，准确地说花了我大约3分钟的时间:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="8c04" class="lu km hu nb b fv nj nk l nl nm">npm install drizzle --save</span></pre><p id="204f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">也没有其他依赖！多酷啊。不需要安装Web3.js或其他任何东西。毛毛雨包含了我们使用智能合约所需的一切。</p><p id="0a71" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在端口3000上运行React前端。为此，运行<code class="eh my mz na nb b">npm start</code>。并将浏览器指向<a class="ae kd" href="http://localhost:3000." rel="noopener ugc nofollow" target="_blank"> http://localhost:3000。应该会出现下面的页面。</a></p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nt"><img src="../Images/954009b09dee38d879ff9c9f74eea9dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bX1pqYu-O3Wkektl94bDxw.png"/></div></div></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="f2c3" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤8:实例化毛毛雨存储</h1><p id="8531" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">我们先要对<strong class="je hv"> </strong> <code class="eh my mz na nb b"><strong class="je hv">client/src/index.js</strong></code> <strong class="je hv"> </strong>做一些改动。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="6f47" class="lu km hu nb b fv nj nk l nl nm">import React from "react";<br/>import ReactDOM from "react-dom";<br/>import "./index.css";<br/>import App from "./App";</span><span id="2367" class="lu km hu nb b fv nn nk l nl nm">// import drizzle functions and contract artifact<br/>import { Drizzle, generateStore } from "drizzle";<br/>import Addition from "./contracts/Addition.json";</span><span id="8f6c" class="lu km hu nb b fv nn nk l nl nm">// let drizzle know what contracts we want<br/>const options = { contracts: [Addition] };</span><span id="4722" class="lu km hu nb b fv nn nk l nl nm">// setup the drizzle store and drizzle<br/>const drizzleStore = generateStore(options);<br/>const drizzle = new Drizzle(options, drizzleStore);</span><span id="17f0" class="lu km hu nb b fv nn nk l nl nm">// pass in the drizzle instance<br/>ReactDOM.render(&lt;App drizzle={drizzle} /&gt;, document.getElementById("root"));</span></pre><p id="710f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">注意，<code class="eh my mz na nb b"><strong class="je hv">drizzle</strong></code>实例作为道具被传递到<code class="eh my mz na nb b"><strong class="je hv">App</strong></code>组件中。</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="b30a" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤9:重塑client/src/App.js</h1><p id="5220" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated"><strong class="je hv">步骤9.1:添加状态变量</strong></p><p id="5bc8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们要做的是在我们的应用程序组件中添加以下代码行:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="4648" class="lu km hu nb b fv nj nk l nl nm">state = { loading: true, drizzleState: null };</span></pre><p id="d7c6" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">我们将在这里使用两个状态变量:</p><ol class=""><li id="5e1c" class="mi mj hu je b jf jg jj jk jn np jr nq jv nr jz nu mq mr ms dt translated"><code class="eh my mz na nb b"><strong class="je hv">loading</strong></code> —表示毛毛雨是否已完成初始化，应用程序是否准备就绪。初始化过程包括实例化<code class="eh my mz na nb b"><strong class="je hv">web3</strong></code>和我们的智能契约，获取任何可用的以太坊账户，并监听(或者，在不支持订阅的情况下:轮询)新的块。</li><li id="5ade" class="mi mj hu je b jf mt jj mu jn mv jr mw jv mx jz nu mq mr ms dt translated">这是我们将在顶级组件中存储毛毛雨商店状态的地方。如果我们可以保持这个状态变量是最新的，那么我们可以简单地使用简单的<code class="eh my mz na nb b"><strong class="je hv">props</strong></code>和<code class="eh my mz na nb b"><strong class="je hv">state</strong></code>来处理毛毛雨(也就是说，你不必使用任何Redux或高级的React模式)。</li></ol><p id="3edc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤9.2:编写一些初始化逻辑</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="61bf" class="lu km hu nb b fv nj nk l nl nm">componentDidMount() {<br/>  const { drizzle } = this.props;<br/><br/>  // subscribe to changes in the store<br/>  this.unsubscribe = drizzle.store.subscribe(() =&gt; {<br/><br/>    // every time the store updates, grab the state from drizzle<br/>    const drizzleState = drizzle.store.getState();<br/><br/>    // check to see if it's ready, if so, update local component state<br/>    if (drizzleState.drizzleStatus.initialized) {<br/>      this.setState({ loading: false, drizzleState });<br/>    }<br/>  });<br/>}</span></pre><p id="53d3" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤9.3:退订商店</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="159e" class="lu km hu nb b fv nj nk l nl nm">compomentWillUnmount() {<br/>  this.unsubscribe();<br/>}</span></pre><p id="5853" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这将在卸载应用程序组件时安全地取消订阅，因此我们可以防止任何内存泄漏。</p><p id="3314" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><strong class="je hv">步骤9.4:修改render()方法</strong></p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="7bf6" class="lu km hu nb b fv nj nk l nl nm">render() {<br/>  if (this.state.loading) return "Loading Drizzle...";<br/>  return &lt;div className="App"&gt;Drizzle is ready&lt;/div&gt;;<br/>}</span></pre><p id="f4db" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">最终文件应该如下所示:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="fb37" class="lu km hu nb b fv nj nk l nl nm">import React, { Component } from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';</span><span id="9d62" class="lu km hu nb b fv nn nk l nl nm">class App extends Component {<br/>  state = { loading: true, drizzleState: null };</span><span id="7929" class="lu km hu nb b fv nn nk l nl nm">componentDidMount() {<br/>    const { drizzle } = this.props;</span><span id="1041" class="lu km hu nb b fv nn nk l nl nm">// subscribe to changes in the store<br/>    this.unsubscribe = drizzle.store.subscribe(() =&gt; {</span><span id="a348" class="lu km hu nb b fv nn nk l nl nm">// every time the store updates, grab the state from drizzle<br/>      const drizzleState = drizzle.store.getState();</span><span id="d473" class="lu km hu nb b fv nn nk l nl nm">// check to see if it's ready, if so, update local component state<br/>      if (drizzleState.drizzleStatus.initialized) {<br/>        this.setState({ loading: false, drizzleState });<br/>      }<br/>    });<br/>  }</span><span id="7275" class="lu km hu nb b fv nn nk l nl nm">compomentWillUnmount() {<br/>    this.unsubscribe();<br/>  }</span><span id="8025" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    if (this.state.loading) return "Loading Drizzle...";<br/>    return &lt;div className="App"&gt;Drizzle is ready&lt;/div&gt;;<br/>  }<br/>}</span><span id="1995" class="lu km hu nb b fv nn nk l nl nm">export default App;</span></pre><p id="7b37" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">在这之后，localhost:3000应该是这样的:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nv"><img src="../Images/7f31e50bc1ddd3ec4173f6c8dd36cc43.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*osufx4qRlbtaxLhKBaI8Rg.png"/></div></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="ab3a" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤10:使用毛毛雨从智能合同中读取</h1><p id="3ea3" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">在<code class="eh my mz na nb b"><strong class="je hv">client/src/ReadSum.js</strong></code>创建一个新文件，并粘贴以下内容:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="4dd7" class="lu km hu nb b fv nj nk l nl nm">import React from "react";</span><span id="c488" class="lu km hu nb b fv nn nk l nl nm">class ReadSum extends React.Component {<br/>  componentDidMount() {<br/>    const { drizzle, drizzleState } = this.props;<br/>    console.log(drizzle);<br/>    console.log(drizzleState);<br/>  }</span><span id="1822" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    return &lt;div&gt;ReadSum Component&lt;/div&gt;;<br/>  }<br/>}</span><span id="efc7" class="lu km hu nb b fv nn nk l nl nm">export default ReadSum;</span></pre><p id="4ad7" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">然后在<code class="eh my mz na nb b"><strong class="je hv">App.js</strong></code>中，用下面的语句导入新组件:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="5b3f" class="lu km hu nb b fv nj nk l nl nm">import ReadSum from "./ReadSum";</span></pre><p id="716e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">将<code class="eh my mz na nb b">App.js</code> render()方法改为如下:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="f805" class="lu km hu nb b fv nj nk l nl nm">render() {<br/>  if (this.state.loading) return "Loading Drizzle...";<br/>  return (<br/>    &lt;div className="App"&gt;<br/>      &lt;ReadSum<br/>        drizzle={this.props.drizzle}<br/>        drizzleState={this.state.drizzleState}<br/>      /&gt;<br/>    &lt;/div&gt;<br/>  );<br/>}</span></pre><p id="084e" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">实际情况如下:</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nw"><img src="../Images/133848557fbcf0b8ebf8514a865c6ba3.png" data-original-src="https://miro.medium.com/v2/resize:fit:860/format:webp/1*9YNUl6CfMd6gbeqdp0V6pw.png"/></div></figure><p id="bacf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">现在，让我们实际读取智能合约的价值。</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="d1b0" class="lu km hu nb b fv nj nk l nl nm">import React from "react";</span><span id="73cd" class="lu km hu nb b fv nn nk l nl nm">class ReadSum extends React.Component {<br/>  state = { dataKey: null };</span><span id="b053" class="lu km hu nb b fv nn nk l nl nm">componentDidMount() {<br/>    const { drizzle } = this.props;<br/>    const contract = drizzle.contracts.Addition;</span><span id="1e67" class="lu km hu nb b fv nn nk l nl nm">// let drizzle know we want to watch 'sum'<br/>    var dataKey = contract.methods["sum"].cacheCall();</span><span id="0a09" class="lu km hu nb b fv nn nk l nl nm">// save the `dataKey` to local component state for later reference<br/>    this.setState({ dataKey });<br/>  }</span><span id="8716" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    // get the contract state from drizzleState<br/>    const { Addition } = this.props.drizzleState.contracts;</span><span id="fed9" class="lu km hu nb b fv nn nk l nl nm">// using the saved `dataKey`, get the variable we're interested in<br/>    const sum = Addition.sum[this.state.dataKey];</span><span id="0c9a" class="lu km hu nb b fv nn nk l nl nm">// if it exists, then we display its value<br/>    return &lt;p&gt;Sum: {sum &amp;&amp; sum.value}&lt;/p&gt;;<br/>  }<br/>}</span><span id="1284" class="lu km hu nb b fv nn nk l nl nm">export default ReadSum;</span></pre><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nx"><img src="../Images/79fc6f28d26711eff1207679b0ecff31.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*16u2-C5QLyVUBSwR66e5Xg.png"/></div></figure></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><h1 id="37b0" class="kl km hu bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li dt translated">步骤11:用毛毛雨在区块链上写字</h1><p id="26e3" class="pw-post-body-paragraph jc jd hu je b jf mk jh ji jj ml jl jm jn nc jp jq jr nd jt ju jv ne jx jy jz hn dt translated">如果我们希望添加两个新数字并将总和存储在区块链上，请执行以下操作:</p><p id="1fc5" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">首先，让我们创建一个新文件<code class="eh my mz na nb b"><strong class="je hv">client/src/SetSum.js</strong></code>并粘贴以下内容:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="fa5d" class="lu km hu nb b fv nj nk l nl nm">import React from "react";</span><span id="0018" class="lu km hu nb b fv nn nk l nl nm">class SetSum extends React.Component {<br/>  state = { stackId: null};</span><span id="7334" class="lu km hu nb b fv nn nk l nl nm">handleKeyDown1 = e =&gt; {<br/>    // if the enter key is pressed, set the value with the string<br/>    if (e.keyCode === 13) {<br/>      this.setValue(e.target.value1);<br/>    }<br/>  };<br/>  handleKeyDown2 = f =&gt; {<br/>    // if the enter key is pressed, set the value with the string<br/>    if (f.keyCode === 13) {<br/>      this.setValue(f.target.value2);<br/>    }<br/>  };</span><span id="1f3b" class="lu km hu nb b fv nn nk l nl nm">setValue = (value1, value2) =&gt; {<br/>    const { drizzle, drizzleState } = this.props;<br/>    const contract = drizzle.contracts.Addition;</span><span id="6e38" class="lu km hu nb b fv nn nk l nl nm">// let drizzle know we want to call the `add` method with `value1 and value2`<br/>    const stackId = contract.methods["add"].cacheSend(this.textInput1.value, this.textInput2.value, {<br/>      from: drizzleState.accounts[0]<br/>    });</span><span id="3904" class="lu km hu nb b fv nn nk l nl nm">// save the `stackId` for later reference<br/>    this.setState({ stackId });<br/>  };</span><span id="1957" class="lu km hu nb b fv nn nk l nl nm">getTxStatus = () =&gt; {<br/>    // get the transaction states from the drizzle state<br/>    const { transactions, transactionStack } = this.props.drizzleState;</span><span id="4a96" class="lu km hu nb b fv nn nk l nl nm">// get the transaction hash using our saved `stackId`<br/>    const txHash = transactionStack[this.state.stackId];</span><span id="643c" class="lu km hu nb b fv nn nk l nl nm">// if transaction hash does not exist, don't display anything<br/>    if (!txHash) return null;</span><span id="d6f4" class="lu km hu nb b fv nn nk l nl nm">// otherwise, return the transaction status<br/>    return `Transaction status: ${transactions[txHash].status}`;<br/>  };</span><span id="7268" class="lu km hu nb b fv nn nk l nl nm">render() {<br/>    return (<br/>      &lt;div&gt;<br/>        &lt;input type="number" ref={(input1) =&gt; this.textInput1 = input1} onKeyDown={this.handleKeyDown1} /&gt;<br/>        &lt;input type="number" ref={(input2) =&gt; this.textInput2 = input2} onKeyDown={this.handleKeyDown2} /&gt;<br/>        &lt;div&gt;{this.getTxStatus()}&lt;/div&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="9a34" class="lu km hu nb b fv nn nk l nl nm">export default SetSum;</span></pre><p id="5216" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">导入并包含在<code class="eh my mz na nb b"><strong class="je hv">App.js</strong></code>中</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="25ae" class="lu km hu nb b fv nj nk l nl nm">import SetSum from "./SetSum";</span></pre><p id="c48f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">并将<code class="eh my mz na nb b">App.js</code>的<code class="eh my mz na nb b">render()</code>方法改为:</p><pre class="lk ll lm ln fq nf nb ng nh aw ni dt"><span id="5736" class="lu km hu nb b fv nj nk l nl nm">render() {<br/>    if (this.state.loading) return "Loading Drizzle...";<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;ReadSum<br/>          drizzle={this.props.drizzle}<br/>          drizzleState={this.state.drizzleState}<br/>        /&gt;<br/>        &lt;SetSum<br/>          drizzle={this.props.drizzle}<br/>          drizzleState={this.state.drizzleState}<br/>        /&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }</span></pre><p id="db3d" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">这个应该管用！</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ny"><img src="../Images/5e30b04ffddd3517f82fe0a7d49d754b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vlGghIBEDNn_2YYM8oYMkA.png"/></div></div></figure><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff nz"><img src="../Images/01a7ee28268f06d4e61db940a1f44d33.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/format:webp/1*FW4pCEnms1Y7dq9DWlZqJw.png"/></div></figure><p id="3d6f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">交易状态可以是“待定”或“成功”。</p></div><div class="ab cl ke kf hc kg" role="separator"><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj kk"/><span class="kh bw bk ki kj"/></div><div class="hn ho hp hq hr"><p id="0312" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">毛毛雨101就这样结束了。</p><figure class="lk ll lm ln fq iv fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/629a8f7705d64cbc2e6b64af17c6585e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*EsGUmEkTDzfts72F.gif"/></div><figcaption class="lo lp fg fe ff lq lr bd b be z ek">Source: <a class="ae kd" href="https://gfycat.com/giantindeliblebinturong" rel="noopener ugc nofollow" target="_blank">https://gfycat.com/giantindeliblebinturong</a></figcaption></figure><figure class="lk ll lm ln fq iv"><div class="bz el l di"><div class="ob lt l"/></div></figure></div></div>    
</body>
</html>