<html>
<head>
<title>What should we be testing in a [laravel] CRUD application?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们应该在一个[laravel] CRUD应用程序中测试什么？</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/what-should-we-be-testing-in-a-laravel-crud-application-85bf17106813?source=collection_archive---------17-----------------------#2018-12-12">https://medium.com/hackernoon/what-should-we-be-testing-in-a-laravel-crud-application-85bf17106813?source=collection_archive---------17-----------------------#2018-12-12</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk ir is it iu fe ff paragraph-image"><a href="https://goo.gl/RDUt4v"><div class="fe ff fg"><img src="../Images/52bf9e84126f483254abfde8427668f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fh3jPIRkLQOFi35thK-fkQ.png"/></div></a></figure><p id="4b15" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">这是我即将出版的电子书<a class="ae jv" href="https://laraveltesting101.com/" rel="noopener ugc nofollow" target="_blank">的摘录。如果您还没有阅读前一章(此处免费提供:</a><a class="ae jv" href="https://youghourta.com/2018/11/27/laravel-testing-101-where-to-start/" rel="noopener ugc nofollow" target="_blank">向您的Laravel CRUD应用程序添加测试:从哪里开始？</a>)，请先这样做再看这个。</p><p id="b5a8" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">既然您已经理解了您应该从不同的角度来看待测试，并且我们应该主要测试控制器，那么您可能会开始问，“……但是我到底应该测试什么？”</p><p id="ff24" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">在这一章，我们将回答这个问题，并描述我们将在电子书的其余部分测试什么。</p><p id="b517" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">但是首先，让我们获得本书所基于的演示应用程序。</p><p id="946e" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">克隆以下回购</p><p id="ac63" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated"><code class="eh jw jx jy jz b"><a class="ae jv" href="https://github.com/djug/laraveltesting101" rel="noopener ugc nofollow" target="_blank">https://github.com/djug/laraveltesting101</a></code></p><p id="e766" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">并在遵循了<code class="eh jw jx jy jz b">readme</code>文件中的所有步骤之后运行应用程序。</p><p id="2fc3" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">启动服务器/应用程序后，您应该会看到这个首页:</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/13fb813a6cd560e63157c013c3b956ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yt8ExSjiSaiadowS"/></div></div></figure><p id="2a39" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">到目前为止，您可以在应用程序中执行以下操作:</p><ul class=""><li id="1f24" class="kj kk hu iz b ja jb je jf ji kl jm km jq kn ju ko kp kq kr dt translated">点击“登录”或“注册”查看登录和注册页面。</li><li id="34e0" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju ko kp kq kr dt translated">点击“所有文章”,你会看到/articles，其中包含了由种子生成的所有文章。</li></ul><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/a7c0e89553020ea3c46b453837fd4723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KabeaNl36tbDZthe"/></div></div></figure><ul class=""><li id="034a" class="kj kk hu iz b ja jb je jf ji kl jm km jq kn ju ko kp kq kr dt translated">点击“写一篇新文章”(<code class="eh jw jx jy jz b">/new-article</code>)，你会被重定向到注册页面(因为添加一篇新文章需要注册)。</li><li id="d17f" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju ko kp kq kr dt translated">在“/文章”页面，您可以点击文章名称(例如<code class="eh jw jx jy jz b">/articles/15</code>)或用户名(<code class="eh jw jx jy jz b">/users/5</code>)来查看文章或其作者简介。</li></ul><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/084b06107b308d0d8c951b30379841ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MPvt6TY56WfFMz4d"/></div></div></figure><p id="541d" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">注册后，你将能够查看<code class="eh jw jx jy jz b">/new-article</code>路线(当我们之前尝试不登录时，它被重定向到注册页面)</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/6143275fd42c11456c0c7649da9ca54a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YUMol2Po7uIpRgbd"/></div></div></figure><p id="047a" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">保存您的文章后，您可以查看它，因为这是您自己的文章，您会在页面末尾看到“编辑文章”按钮(您不会在您不拥有的文章上看到它)。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/c929c2ac41a51dbf476e73209d8fe526.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7rutZQYUihASkt3H"/></div></div></figure><p id="bf4a" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">当点击这个按钮时，你得到文章的编辑表单，在这里你可以编辑和保存文章或者删除它。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/887b9e3dc9958d9f217bc21d0c112ebd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ytqze9RnmNSB8tuA"/></div></div></figure><p id="a981" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">当更新文章时，你会再次被重定向到该文章，并显示一条成功消息。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/8bad321449b33fcb9516b3eb1c28f2b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LaU6LeT5lHTPsd5n"/></div></div></figure><p id="56ec" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">但是如果你删除它，你会被重定向到“所有文章”页面，并显示一条不同的成功消息。</p><p id="68c8" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">如果你访问的文章不是你自己创建的，你不会看到“编辑”按钮，但是如果你试图通过URL直接访问一篇不属于你的文章的编辑页面(例如:<code class="eh jw jx jy jz b">articles/16/edit</code>)，你会得到一个403页面。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/66e7c3e34398c6a760cb471ad66401a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vQHZpDdDEWgv_88I"/></div></div></figure><p id="9941" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">让我们回到“写一篇新文章”页面，尝试添加一篇短标题和/或短正文(少于10个字符)的新文章。</p><p id="5e3e" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">您将得到一条错误消息。而剪辑的时候也会发生同样的事情。</p><figure class="kb kc kd ke fq iu fe ff paragraph-image"><div role="button" tabindex="0" class="kf kg di kh bf ki"><div class="fe ff ka"><img src="../Images/c452ffcdf773a2553d373234ec587a91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*u9GAOpZ70ld9z2Hw"/></div></div></figure><p id="9524" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">因此，即使应用程序很小，我们也需要测试许多东西来确保应用程序按预期工作。</p><p id="de09" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">这是清单:</p><ol class=""><li id="5519" class="kj kk hu iz b ja jb je jf ji kl jm km jq kn ju kx kp kq kr dt translated">客人可以访问并获得注册页面</li><li id="3d54" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">客人可以访问并获得登录页面</li><li id="85f0" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">客人在访问/文章时可以看到所有文章</li><li id="3d5b" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">客人可以看到用户简档</li><li id="2282" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">客人不能写新文章，而是被重定向到注册页面</li><li id="18a4" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户(即注册用户)可以写文章</li><li id="2dae" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户可以访问她自己文章的编辑页面</li><li id="ab19" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户可以保存对自己文章的修改，并在编辑成功消息后重定向到文章页面</li><li id="6a9e" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户可以删除自己的文章，并通过成功消息重定向到所有文章页面</li><li id="3a1b" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户不应该在她不拥有的文章上看到编辑按钮</li><li id="20fd" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户不能编辑她不拥有的文章</li><li id="f15e" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">用户不能删除她不拥有的文章</li><li id="c3b0" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">创建文章时，文章不能有短标题或正文</li><li id="e26a" class="kj kk hu iz b ja ks je kt ji ku jm kv jq kw ju kx kp kq kr dt translated">更新文章时，文章不能有短标题或正文</li></ol><p id="4e53" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">因此，如果我们设法自动化测试上面的列表，我们就可以确信，每次我们添加一个新的特性或者改变一个代码，应用程序都会像预期的那样工作。</p><p id="2120" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">在下一章，我们将开始编写与客人用户相关的功能测试。</p><p id="e3ee" class="pw-post-body-paragraph ix iy hu iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju hn dt translated">如果你想继续下去，并得到关于这本书的任何进展的通知(例如新的免费章节)，请在这里注册:<a class="ae jv" href="https://laraveltesting101.com/" rel="noopener ugc nofollow" target="_blank">https://laraveltesting101.com/</a></p></div></div>    
</body>
</html>