<html>
<head>
<title>Building an animated sticky header with custom offset</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">æ„å»ºå¸¦æœ‰è‡ªå®šä¹‰åç§»é‡çš„åŠ¨ç”»ç²˜æ€§æ ‡é¢˜</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/hackernoon/building-an-animated-sticky-header-with-custom-offset-6eb2b29d3eed?source=collection_archive---------7-----------------------#2018-12-13">https://medium.com/hackernoon/building-an-animated-sticky-header-with-custom-offset-6eb2b29d3eed?source=collection_archive---------7-----------------------#2018-12-13</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/5d9e104042278d87361fa1b8044e74ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sr8Acn6cL4VbrQ8PeDsGYw.jpeg"/></div></div></figure><p id="b94f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">ç²˜æ€§å…ƒç´ åœ¨æ•´ä¸ªç½‘ç»œä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚éšç€<code class="eh ka kb kc kd b">position: sticky</code>å±æ€§çš„å‡ºç°ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ç”¨JavaScriptæ’ä»¶æ¥åˆ›å»ºç²˜æ€§å…ƒç´ ã€‚ä½†æ˜¯å¦‚æœæ²¡æœ‰ä¸€ç‚¹JavaScriptï¼Œç”¨åŠ¨ç”»åˆ›å»ºç²˜æ€§å…ƒç´ æ˜¯ä¸å¯èƒ½å®ç°çš„ã€‚</p><h1 id="a7a2" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">è§„æ ¼</h1><p id="c096" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">ä»»åŠ¡æ˜¯æ„å»ºä¸€ä¸ªç²˜æ»æ ‡é¢˜ï¼Œå½“ç”¨æˆ·æ»šåŠ¨é™æ€æ ‡é¢˜æˆ–åœ¨è‡ªå®šä¹‰åç§»ä½ç½®æ—¶å‡ºç°ã€‚å‘ä¸‹æ»šåŠ¨æ—¶ï¼Œé™æ€æ ‡é¢˜åº”è¯¥ä¿æŒåœ¨åŸæ¥çš„ä½ç½®ï¼Œè€Œç²˜æ€§æ ‡é¢˜åº”è¯¥å‘ä¸‹æ»šåŠ¨ã€‚å‘ä¸Šæ»šåŠ¨æ—¶ï¼Œç²˜æ€§æ ‡é¢˜åº”è¯¥æ¶ˆå¤±ï¼Œé™æ€æ ‡é¢˜åº”è¯¥å‘ä¸‹æ»šåŠ¨ã€‚è¯·æ³¨æ„ï¼Œé™æ€æ ‡å¤´å’Œç²˜æ€§æ ‡å¤´çš„å†…å®¹æ˜¯ä¸åŒçš„ã€‚</p><h1 id="75df" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">è§£å†³æ–¹æ¡ˆ</h1><p id="7861" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">ä¸ºäº†æ›´å®¹æ˜“ç†è§£è§„æ ¼ï¼Œè¯·çœ‹è¿™æ”¯åŒ…å«å®Œæ•´è§£å†³æ–¹æ¡ˆçš„ç¬”:</p><figure class="lh li lj lk fq iv"><div class="bz el l di"><div class="ll lm l"/></div></figure><h1 id="0694" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">å´©æºƒ</h1><p id="a135" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">ä¸ºäº†æ›´å¥½åœ°ç†è§£è¿™æ®µä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬åº”è¯¥æ£€æŸ¥ä¸€ä¸‹HTMLç»“æ„ã€‚</p><h1 id="bc6d" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€</h1><p id="ae2b" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">ä¸‹é¢æ˜¯HTMLç»“æ„çš„ç®€åŒ–é¢„è§ˆ:</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="d067" class="lr kf hu kd b fv ls lt l lu lv">&lt;main&gt;<br/>  &lt;header&gt;<br/>    &lt;div class="header header--alpha"&gt;<br/>      ...<br/>    &lt;/div&gt;<br/>    &lt;div class="header header--beta"&gt;<br/>      ...<br/>    &lt;/div&gt;<br/>  &lt;/header&gt;<br/>  &lt;div class="fake-header"&gt;&lt;/div&gt;<br/>  &lt;article&gt;<br/>    ... <br/>  &lt;/article&gt;<br/>&lt;/main&gt;</span></pre><p id="8ecc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨<code class="eh ka kb kc kd b">main</code>å…ƒç´ ä¸­ï¼Œæˆ‘ä»¬æœ‰<code class="eh ka kb kc kd b">header,</code> <code class="eh ka kb kc kd b">.fake-header</code>å’Œ<code class="eh ka kb kc kd b">article</code>å…ƒç´ ã€‚ä¸ºäº†è®©<code class="eh ka kb kc kd b">position: sticky</code>å·¥ä½œï¼Œstickyå…ƒç´ åº”è¯¥åœ¨å¯æ»šåŠ¨å…ƒç´ å†…éƒ¨â€”â€”åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯<code class="eh ka kb kc kd b">main</code>å…ƒç´ ã€‚</p><p id="9526" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ ‡å¤´åŒ…å«ä¸¤ä¸ªå…ƒç´ :</p><ul class=""><li id="5a9e" class="lw lx hu je b jf jg jj jk jn ly jr lz jv ma jz mb mc md me dt translated"><code class="eh ka kb kc kd b">.header--alpha</code>ï¼Œé™æ€å¤´ï¼Œå’Œ</li><li id="a397" class="lw lx hu je b jf mf jj mg jn mh jr mi jv mj jz mb mc md me dt translated"><code class="eh ka kb kc kd b">.header--beta</code>ï¼Œç²˜æ€§è¡¨å¤´ã€‚</li></ul><h1 id="647c" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">åŠé“¸é’¢ËŒé’¢æ€§é“¸é“(Cast Semi-Steel)</h1><p id="6d4a" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¾è®¡åŒ…è£…å…ƒç´ çš„æ ·å¼ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒåº”è¯¥å…·æœ‰ç›¸å¯¹ä½ç½®ï¼Œä¸€æ—¦è¾¾åˆ°åç§»é‡ï¼Œå®ƒå°±å…·æœ‰ç²˜æ€§ã€‚</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="e43a" class="lr kf hu kd b fv ls lt l lu lv">header {<br/>  top: 0;<br/>  position: relative;<br/>  overflow: hidden;<br/>}<br/><br/>header.sticky {<br/>  position: sticky;<br/>}</span></pre><p id="fd46" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å±æ€§<code class="eh ka kb kc kd b">top: 0</code>å°†ç¡®ä¿æˆ‘ä»¬çš„å¤´è¢«å›ºå®šåœ¨é¡¶éƒ¨ï¼Œå±æ€§<code class="eh ka kb kc kd b">overflow: hidden</code>éšè—äº†<code class="eh ka kb kc kd b">header</code>å…ƒç´ ä¹‹å¤–çš„æ‰€æœ‰å†…å®¹ã€‚</p><p id="7b2f" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åº”è¯¥å®šä¹‰æ ‡é¢˜éƒ¨åˆ†çš„è¡Œä¸ºã€‚</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="9037" class="lr kf hu kd b fv ls lt l lu lv">.header--alpha {<br/>  transition: .225s ease-out;<br/>}<br/><br/>.sticky .header--alpha {<br/>  opacity: .5;<br/>  transform: translateY(-100%);<br/>  transition: none;<br/>}</span></pre><p id="0abf" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh ka kb kc kd b">.header--alpha</code>ï¼Œæˆ‘ä»¬çš„é™æ€å¤´é»˜è®¤æ˜¯å¯è§çš„ã€‚å½“ç”¨æˆ·æ»šåŠ¨è¶…è¿‡åç§»é‡æ—¶ï¼ŒåŒ…è£…å™¨<code class="eh ka kb kc kd b">header</code>å…ƒç´ å˜å¾—æœ‰ç²˜æ€§ï¼Œå®ƒå°†ç«‹å³è¢«è½¬æ¢åˆ°åŒ…è£…å™¨å…ƒç´ ä¹‹å¤–ï¼Œæ²¡æœ‰ä»»ä½•è¿‡æ¸¡æ•ˆæœã€‚è¯·æ³¨æ„ï¼Œå½“ç²˜æ»æ•ˆæœä¸æ´»åŠ¨æ—¶ï¼Œå½“å…ƒç´ å›åˆ°åŸå§‹ä½ç½®æ—¶ï¼Œå®ƒå°†è¢«è½¬æ¢ã€‚</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="5094" class="lr kf hu kd b fv ls lt l lu lv">.header--beta {<br/>  position: absolute;<br/>  top: 0;<br/>  left: 0;<br/>  right: 0;<br/>  opacity: .5;<br/>  transform: translateY(-100%);<br/>}<br/><br/>.sticky .header--beta {<br/>  opacity: 1;<br/>  transform: translateY(0);<br/>  transition: .35s ease-out;<br/>}</span></pre><p id="a1cc" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><code class="eh ka kb kc kd b">.header--beta</code>ï¼Œæˆ‘ä»¬çš„ç²˜æ€§å¤´è¢«ç»å¯¹å®šä½å¹¶åœ¨åŒ…è£…å™¨<code class="eh ka kb kc kd b">header</code>å…ƒç´ ä¹‹å¤–è¢«è½¬æ¢ã€‚å½“ç²˜æ€§æ•ˆåº”è¢«æ¿€æ´»æ—¶ï¼Œå®ƒå°†åœ¨åŸå§‹ä½ç½®è¿›è¡Œå¹³ç§»å’Œè¿‡æ¸¡ã€‚</p><h1 id="b76a" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">Java Scriptè¯­è¨€</h1><p id="6db8" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">æ‚¨å¯èƒ½å·²ç»æ³¨æ„åˆ°äº†<code class="eh ka kb kc kd b">.fake-header</code>å…ƒç´ ã€‚</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="5503" class="lr kf hu kd b fv ls lt l lu lv">.fake-header {<br/>  height: 1px;<br/>  position: relative;<br/>}</span></pre><p id="90d8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¯¥å…ƒç´ ç”¨ä½œæ»šåŠ¨çš„åç§»é‡ã€‚å½“å®ƒåˆ°è¾¾è§†çª—é¡¶éƒ¨æ—¶ï¼Œæ ‡é¢˜å˜å¾—ç²˜ç²˜çš„ã€‚è€Œå½“é¡µçœ‰å˜å¾—æœ‰ç²˜æ€§æ—¶ï¼Œä¼ªå…ƒç´ ä¼šè¢«æ¨é«˜é¡µçœ‰çš„é«˜åº¦åŠ ä¸Šä¸€ä¸ªé¢å¤–çš„åƒç´ ã€‚å½“ç”¨æˆ·å‘ä¸Šæ»šåŠ¨å¹¶åˆ°è¾¾æ–°ä½ç½®çš„ä¼ªå…ƒç´ æ—¶ï¼Œç²˜æ€§æ•ˆæœå°†è¢«å…³é—­ã€‚</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="afcb" class="lr kf hu kd b fv ls lt l lu lv">const $realSticky = document.querySelector("header");<br/>const $fakeSticky = document.querySelector(".fake-header");<br/><br/>const stickyHeader = () =&gt; function() {<br/>  const sr1 = $fakeSticky.getBoundingClientRect();<br/>  const sr2 = $realSticky.getBoundingClientRect();<br/><br/>  if (sr1.top &gt; 0) {<br/>    $realSticky.classList.remove("sticky");<br/>    $fakeSticky.style.top = 0;<br/>  } else {<br/>    $realSticky.classList.add("sticky");<br/>    $fakeSticky.style.top = `-${sr2.height + 1}px`;<br/>  }<br/>};<br/><br/>window.addEventListener("scroll", _.debounce(stickyHeader(), 15));</span></pre><p id="fbca" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">åœ¨æœ¬ä¾‹ä¸­ï¼Œ<a class="ae mk" href="https://lodash.com/docs/4.17.10#debounce" rel="noopener ugc nofollow" target="_blank"> lodash debounce </a>å‡½æ•°ç”¨äºåœ¨æ»šåŠ¨äº‹ä»¶æ—¶æ‰§è¡Œä»»åŠ¡ã€‚</p><p id="deb0" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ml">æˆ‘çŸ¥é“æˆ‘å¯ä»¥å†™å‡ºæ›´å¥½çš„JSä»£ç ï¼Œé¿å…æ·»åŠ </em> <code class="eh ka kb kc kd b"><em class="ml">.fake-header</em></code> <em class="ml">å…ƒç´ ï¼Œä½†æ˜¯æˆ‘æƒ³åˆ›å»ºä¸€ä¸ªæ²¡æœ‰å¤ªå¤šè®¡ç®—çš„æ¼”ç¤ºã€‚</em></p><p id="4205" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">å› ä¸ºé™æ€æ ‡é¢˜å†³å®šäº†åŒ…è£…å…ƒç´ çš„é«˜åº¦ï¼Œæ‰€ä»¥ä¸€æ—¦ç²˜æ€§æ ‡é¢˜å‡ºç°ï¼Œæˆ‘ä»¬å°±å¾ˆéš¾é€‰æ‹©æˆ–ç‚¹å‡»å®ƒåé¢çš„å†…å®¹ã€‚</p><p id="2eb8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŒ‡é’ˆäº‹ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜:</p><pre class="lh li lj lk fq ln kd lo lp aw lq dt"><span id="634f" class="lr kf hu kd b fv ls lt l lu lv">header {<br/>  pointer-events: none;<br/>}<br/><br/>.header {<br/>  pointer-events: all;<br/>}</span></pre><p id="b2c8" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">é¦–å…ˆæˆ‘ä»¬å°†<code class="eh ka kb kc kd b">pointer-events</code>åˆ°<code class="eh ka kb kc kd b">none</code>è®¾ç½®ä¸º<code class="eh ka kb kc kd b">header</code>å…ƒç´ æ¥ç¦ç”¨ç‚¹å‡»/æ‚¬åœäº‹ä»¶ï¼Œç„¶åæˆ‘ä»¬å°†<code class="eh ka kb kc kd b">pointer-events</code>è®¾ç½®ä¸º<code class="eh ka kb kc kd b">all</code>æ¥å†æ¬¡å¯ç”¨å®ƒä»¬ã€‚</p><h1 id="9ef4" class="ke kf hu bd kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb dt translated">ç»“è®º</h1><p id="c244" class="pw-post-body-paragraph jc jd hu je b jf lc jh ji jj ld jl jm jn le jp jq jr lf jt ju jv lg jx jy jz hn dt translated">ä½ å¯ä»¥åœ¨æˆ‘çš„ä»£ç ç¬”ä¸Šçœ‹åˆ°å®Œæ•´çš„æ¼”ç¤º<a class="ae mk" href="https://codepen.io/CiTA/pen/BGQPBz" rel="noopener ugc nofollow" target="_blank">ã€‚</a></p><p id="b61b" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">è¿™ä¸ªæ¼”ç¤ºä½¿ç”¨äº†æœ‰é™æ”¯æŒçš„<code class="eh ka kb kc kd b"><a class="ae mk" href="https://caniuse.com/#search=position%3A%20sticky" rel="noopener ugc nofollow" target="_blank">position: sticky</a></code>å’Œ<code class="eh ka kb kc kd b"><a class="ae mk" href="https://caniuse.com/#search=pointer-events" rel="noopener ugc nofollow" target="_blank">pointer-events</a></code>å±æ€§ã€‚</p><p id="4248" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated">çœ‹åˆ°CSSå‘å±•å¦‚æ­¤ä¹‹å¿«ï¼Œæˆ‘çœŸçš„å¾ˆå…´å¥‹ã€‚å…¨æ–°çš„å±æ€§ï¼Œå¦‚<code class="eh ka kb kc kd b">position: sticky</code>å’Œ<code class="eh ka kb kc kd b">pointer-events</code>å…è®¸æˆ‘ä»¬æ›´è½»æ¾ã€æ›´è‡ªç„¶åœ°ä¸ºæœ€ç»ˆç”¨æˆ·åˆ›é€ æ›´å¥½çš„ä½“éªŒã€‚è€Œä¸”æ”¯æŒä¸€å¤©æ¯”ä¸€å¤©å¥½ã€‚ğŸ†</p></div><div class="ab cl mm mn hc mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><p id="79de" class="pw-post-body-paragraph jc jd hu je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz hn dt translated"><em class="ml">åŸè½½äº</em><a class="ae mk" href="https://www.silvestarbistrovic.from.hr/articles/building-an-animated-sticky-header-with-custom-offset/" rel="noopener ugc nofollow" target="_blank"><em class="ml">www . silvestarbitrovic . from . HR</em></a><em class="ml">ã€‚</em></p></div></div>    
</body>
</html>