<html>
<head>
<title>Potential Attack On Ethereum Network to Mint GasTokens</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对以太坊网络的潜在攻击</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/potential-attack-on-ethereum-network-to-mint-gastokens-5cf05a7e0303?source=collection_archive---------12-----------------------#2018-12-26">https://medium.com/hackernoon/potential-attack-on-ethereum-network-to-mint-gastokens-5cf05a7e0303?source=collection_archive---------12-----------------------#2018-12-26</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/e97d844fd4f07e8d88261f4ad1847837.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MFEvSDYX-y2P6z3zCllNhA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://btcmanager.com/overview-of-recent-ethereum-attacks-impact-on-the-network/" rel="noopener ugc nofollow" target="_blank">https://btcmanager.com/overview-of-recent-ethereum-attacks-impact-on-the-network/</a></figcaption></figure><blockquote class="jh ji jj"><p id="25cb" class="jk jl jm jn b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki hn dt translated">由<a class="ae jg" href="https://audits.quillhash.com" rel="noopener ugc nofollow" target="_blank"> QuillAudits </a>的安全审计员Abhishek sharma 。</p></blockquote><h2 id="9aeb" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">以太坊网络漏洞</h2><p id="6b35" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">由<a class="ae jg" href="https://www.levelk.io/" rel="noopener ugc nofollow" target="_blank"> levelk </a>揭露的以太坊框架中的最新漏洞，潜在地允许不良行为者制造大量毒气或耗尽资金。</p><h2 id="8fa8" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">被谁发现的？</h2><p id="cbe5" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">在<a class="ae jg" href="https://www.levelk.io/" rel="noopener ugc nofollow" target="_blank"> levelk的</a>假设研究或案例研究中，有可能在获得ETH或任何ERC20或其他标准令牌的同时铸造大量GasTokens。</p><p id="081b" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">当接收方契约的回退功能能够执行由交易生成方支付费用的反复无常的计算时，该漏洞就会暴露出来，并带来<strong class="jn hv">“griefing”</strong>的风险。</p><h2 id="18a1" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">什么是悲伤者？</h2><p id="7061" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">恶意玩家是指在多人视频游戏中故意激怒和骚扰游戏中的其他玩家，有意或无意地使用游戏的某些方面的玩家。据<a class="ae jg" href="https://www.wikipedia.org/" rel="noopener ugc nofollow" target="_blank">维基百科</a>。</p><h2 id="d960" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">什么是气体？</h2><p id="d1f4" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">气体是以太坊区块链的基本资源，以太坊网络上的每一笔交易都需要一定量的气体来执行一笔交易，它可能是1 gwei，也可能是两三位数。</p><h2 id="3935" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">什么是GasToken？</h2><p id="33bc" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">燃气令牌是一种基于以太坊区块链的智能合约，允许以太坊区块链的用户在燃气价格低时将燃气令牌化，并在燃气价格高时消费。</p><p id="9890" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">这也成为第一个用户或业主能够在以太坊网络上销售和购买天然气的智能合同。</p><h2 id="1788" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">气体令牌是如何工作的？</h2><p id="d33d" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">gas tokens利用以太坊中的存储退款概念，激励智能合同删除存储变量，以太坊网络在存储变量被删除时提供退款，直到合同交易的一半。</p><p id="114c" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">●如果变量从零变为非零值，有<strong class="jn hv">气费</strong> <br/> ●如果变量从非零值变为零，有<strong class="jn hv">气费退款</strong></p><p id="63d9" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated"><strong class="jn hv">从gasToken获利:<br/></strong>●gas price低时造币代币:将一个变量从零值改为非零值。<br/>●gas price高时烧代币:将一个变量从非零改为零。</p><p id="0afa" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated"><strong class="jn hv">举例:</strong></p><p id="7237" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">写永久区块链州耗费了大量的天然气。例如，当向存储器写入非零值时，存储指令当前消耗20000 gas。擦除存储额外花费5000汽油，但也提供15000汽油的退款。</p><p id="7833" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">假设我们在汽油价格低的时候写存储，在汽油价格高的时候用代币兑换退款。我们每个存储字的总费用是:</p><pre class="lm ln lo lp fq lq lr ls lt aw lu dt"><span id="0cf0" class="kj kk hu lr b fv lv lw l lx ly"><strong class="lr hv">20000⋅gaslow + 5000⋅gashigh</strong></span></pre><p id="aae9" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">我们收到每个单词的退款:</p><pre class="lm ln lo lp fq lq lr ls lt aw lu dt"><span id="b37f" class="kj kk hu lr b fv lv lw l lx ly"><strong class="lr hv">15000⋅gashigh</strong></span></pre><p id="bb27" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">无论何时，我们都有望实现节约:</p><pre class="lm ln lo lp fq lq lr ls lt aw lu dt"><span id="534a" class="kj kk hu lr b fv lv lw l lx ly"><strong class="lr hv">gashigh &gt; 2⋅gaslow</strong></span></pre><p id="af23" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated">GasToken实际上有两个版本:一个使用存储来存储天然气(在GST1上使用)，另一个通过创建合同来存储天然气。后者利用删除整个合同(GST2)时获得的气体退款。</p><figure class="lm ln lo lp fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff lz"><img src="../Images/111033fd45dc744058e9b17f044065c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hx2desRJC3oviect6zPHVA.jpeg"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://gastoken.io/#GST2" rel="noopener ugc nofollow" target="_blank">https://gastoken.io</a></figcaption></figure><h1 id="ae54" class="ma kk hu bd kl mb mc md kp me mf mg kt mh mi mj kx mk ml mm lb mn mo mp lf mq dt translated">GasToken两个版本的比较</h1><figure class="lm ln lo lp fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mr"><img src="../Images/fb3e387e58f3298091250db6a96e3f88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H80YU6ynjkzXAaCbTsZE8g.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek"><a class="ae jg" href="https://gastoken.io/#comparison" rel="noopener ugc nofollow" target="_blank">https://gastoken.io/#comparison</a></figcaption></figure><h2 id="8de3" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">攻击者如何获得利益？</h2><p id="13ec" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated">当汽油价格高时，汽油持有者或所有者可以通过燃烧汽油价格低时制造的汽油来降低交易成本，或者通过攻击交易所，或者通过调用发起任何ERC令牌的资金转移的任何交易所的函数withdraw来降低交易成本，该函数调用攻击者的智能合约的回退函数，并且它将能够挖掘汽油或执行可能耗尽交易发起者资金的交易。</p><h2 id="4495" class="kj kk hu bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg dt translated">避免这些类型攻击的建议</h2><p id="c534" class="pw-post-body-paragraph jk jl hu jn b jo lh jq jr js li ju jv ku lj jy jz ky lk kc kd lc ll kg kh ki hn dt translated"><em class="jm">大多数交易所已经意识到这些类型的铸造攻击，但仍然无法覆盖所有的攻击，这些背后的原因是缺乏开发人员的知识，对这些攻击的认识和现有的工具无法验证智能合约中所有潜在的bug和漏洞大多与</em> <strong class="jn hv"> <em class="jm">代表调用</em> </strong> <em class="jm">有关。这种攻击对于没有实现适当的KYC过程的交换来说更加有害，因为攻击者可以使用不同的地址重复地制造GasTokens。</em></p><p id="451d" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated"><em class="jm">对所有交易实施燃气限额，</em></p><pre class="lm ln lo lp fq lq lr ls lt aw lu dt"><span id="b4a2" class="kj kk hu lr b fv lv lw l lx ly">required_gas_limit * gas_price</span></pre><p id="49e1" class="pw-post-body-paragraph jk jl hu jn b jo jp jq jr js jt ju jv ku jx jy jz ky kb kc kd lc kf kg kh ki hn dt translated"><em class="jm">再来讨论一下区块链安全，在我的电报手柄上ping我—</em><a class="ae jg" href="https://t.me/abhi_blockchain" rel="noopener ugc nofollow" target="_blank">@ abhi _区块链</a> <em class="jm">！</em></p></div></div>    
</body>
</html>