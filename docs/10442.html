<html>
<head>
<title>Fetching Crypto Price with React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用React获取加密价格</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/fetching-crypto-price-with-react-3a49f41bf80c?source=collection_archive---------7-----------------------#2018-12-30">https://medium.com/hackernoon/fetching-crypto-price-with-react-3a49f41bf80c?source=collection_archive---------7-----------------------#2018-12-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/9f520470302ee332728e39434fd1182a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DhXb0SBQzsWncUxyPoAiGQ.png"/></div></div></figure><h2 id="f684" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">特色课程</h2><h1 id="0c6d" class="ka jd hu bd je kb kc kd ji ke kf kg jm kh ki kj jq kk kl km ju kn ko kp jy kq dt translated">以太坊和坚固性:完全开发者指南</h1><p id="255c" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">使用以太坊、Solidity和智能合约构建基于区块链的生产就绪型应用<a class="ae lm" href="https://click.linksynergy.com/link?id=qt/jYwyHv8A&amp;offerid=507388.1466612&amp;type=2&amp;murl=https%3A%2F%2Fwww.udemy.com%2Fethereum-and-solidity-the-complete-developers-guide%2F" rel="noopener ugc nofollow" target="_blank">了解更多</a></p><h1 id="0f0f" class="ka jd hu bd je kb kc kd ji ke kf kg jm kh ki kj jq kk kl km ju kn ko kp jy kq dt translated">现代用Redux反应【2019更新】</h1><p id="d2bd" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">(2018年12月更新)掌握React v16.6.3和Redux搭配React路由器、Webpack、Create-React-App。包括钩子！<a class="ae lm" href="https://click.linksynergy.com/link?id=qt/jYwyHv8A&amp;offerid=507388.705264&amp;type=2&amp;murl=https%3A%2F%2Fwww.udemy.com%2Freact-redux%2F" rel="noopener ugc nofollow" target="_blank">了解更多</a></p><p id="1fc4" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在我们深入研究代码之前，让我们谈一谈我们将要做的项目和一些必要条件。<br/>你需要以下方面的知识:</p><ol class=""><li id="58dc" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll lx ly lz ma dt translated"><strong class="kt hv"> HTML </strong>:只有非常基础的知识。</li><li id="945a" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated"><strong class="kt hv"> JavaScript </strong>:写函数的中级(ES6)。</li><li id="c6b9" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated"><strong class="kt hv"> CSS </strong>:可选但首选。我们就不说为什么看起来如此如此了。这就是CSS发挥作用的地方。您可以从提供的starter模板开始，它包含了所有需要的CSS。</li><li id="91de" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated">熟悉任何API、节点或react将是您学习本教程的一大优势。</li></ol><h2 id="2311" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">设置工具:</h2><p id="8adb" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated"><strong class="kt hv"> NodeJS </strong>:从此处<a class="ae lm" href="https://nodejs.org/" rel="noopener ugc nofollow" target="_blank">安装</a>。推荐LTS版本。我们不会为节点运行任何JavaScript，但是我们需要节点来运行react应用程序。</p><p id="3833" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">确保验证npm也随它一起安装。如果你熟悉的话，你也可以使用yarn，一种npm的替代品。本教程将使用npm！</p><p id="b461" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">npm -v</code></p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mk"><img src="../Images/ca13f556e67bc93b6351dccec1e1a0fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:698/0*DzumlXj109Aqm01y"/></div></figure><p id="32ab" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">node -v</code></p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mp"><img src="../Images/eacd8b2fce274481fcc38829d5237184.png" data-original-src="https://miro.medium.com/v2/resize:fit:790/0*PJgsXlqnle7P0Sed"/></div></figure><p id="b103" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">如果两个命令都返回一个版本号，那就没问题了。这些数字可能与上图中出现的数字不同。</p><p id="9c48" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们要做什么？ <br/>用比用文字解释更容易。</p><h2 id="646b" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">设置react应用程序</h2><p id="11ea" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">React的一个复杂的事情是开始。如果不了解中级专家级别的JavaScript开发人员通常使用的多种工具，要设置它是非常困难的。脸书想出了一个可以让这项任务变得简单的工具。这个包叫做<a class="ae lm" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">创建-反应-应用</a>。</p><p id="b8ee" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这个工具配置环境，以便我们可以直接做出反应，而不需要处理复杂的工具。从好的方面来说，它还允许将react应用程序与其本身分离，以便我们可以完全控制它。这是设置和控制的双赢。</p><p id="0cc8" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv">全局安装create-react-app:<br/></strong><code class="eh mg mh mi mj b">$ npm install -g create-react-app</code></p><p id="47ac" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv">用这个包创建一个app:<br/></strong><code class="eh mg mh mi mj b">$ create-react-app crypto-reactdev</code></p><p id="8fb3" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">crypto-reactdev</code>是我们的应用程序名称。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mq"><img src="../Images/e7c75594261d8fecc33b9efe18431457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1354/0*woUzhnt-hGq5Oaha"/></div></figure><p id="0909" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我得到一个错误消息，说<strong class="kt hv"><em class="mr">‘create-react-app’无法识别</em> </strong>。如果您得到同样的错误，有两种解决方案。使用其中一种:</p><ul class=""><li id="3b0e" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll ms ly lz ma dt translated">将node_modules目录添加到path。默认路径是<code class="eh mg mh mi mj b">C:\Users\USERNAME\AppData\Roaming\npm\node_modules</code></li></ul><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mt"><img src="../Images/6f6a29be2a40ce6a21ac58cf02d20e7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/0*Y20kjovM9TaARoZb"/></div></figure><ul class=""><li id="e580" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll ms ly lz ma dt translated">或者使用稍微不同的命令:<br/> <code class="eh mg mh mi mj b">npx create-react-app crypto-reactdev</code></li></ul><p id="e0f7" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我用了第二个。</p><p id="069e" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">它将创建一个新目录，<code class="eh mg mh mi mj b">crypto-reactdev</code>包含所需的文件和文件夹。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mu"><img src="../Images/64c6b17c8b3c2bcb4a5b37660f0d8b89.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/0*pN7AgEiIuuIlHK6K"/></div></figure><h2 id="d9d8" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">每个文件和文件夹的用途是什么？</h2><p id="df00" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated"><code class="eh mg mh mi mj b">package.json</code>包含应用程序使用的模块列表。每个模块执行一个功能或一组功能。<br/> <code class="eh mg mh mi mj b">node_modules</code>存储package.json中列出的所有包。<br/> <code class="eh mg mh mi mj b">src</code>包含所有React源代码文件。<br/> <code class="eh mg mh mi mj b">public</code>包含样式表和图片等静态文件。</p><p id="351d" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">现在，您已经有了一个工作的React应用程序。设置很容易，不是吗？</p><p id="b5bc" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在终端打开目录，很多编辑器都是自带终端的。你也可以利用这点。以下截图将来自VS代码，与Git Bash终端集成。一个简单的命令将启动服务器:<br/> <code class="eh mg mh mi mj b">$ npm start</code></p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mv"><img src="../Images/3bc7e855f1a7d43ff70624432485e2ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/0*mmFcNIGRAWSKKgCb"/></div></figure><p id="1615" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">默认端口是3000，忙的话会要求尝试3001！它还会在网络浏览器上打开网址。浏览器上的输出应该是这样的</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff mw"><img src="../Images/0426edcdc2e5c6b291a06a46ace20094.png" data-original-src="https://miro.medium.com/v2/resize:fit:1364/0*IaxJl3WA_XybxwQc"/></div></figure><p id="2910" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">多亏了<code class="eh mg mh mi mj b">create-react-app</code>，当你修改文件时，它会自动重新加载。</p><h2 id="c8f1" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">反应过来</h2><p id="400e" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">公共目录是可访问的，并呈现给浏览器。</p><p id="1b11" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">基本文件是index.html。它有下面一行:</p><p id="71fa" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">&lt;div id="root"&gt;&lt;/div&gt;</code></p><p id="14a8" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这是我们注入React的<code class="eh mg mh mi mj b">div</code>。我们根本不会碰这个文件。<br/>在<code class="eh mg mh mi mj b">src</code>目录下，看一下<code class="eh mg mh mi mj b">index.js</code>文件。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mx"><img src="../Images/f612a28787ad175e071e3329765055fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*b6hpVfarWMeHbG9X"/></div></div></figure><p id="add2" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">看这一行:<br/> <code class="eh mg mh mi mj b">ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));</code></p><ol class=""><li id="6388" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll lx ly lz ma dt translated">它从<code class="eh mg mh mi mj b">index.html</code>文件中获取根div。</li><li id="96d1" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated">在div中注入<code class="eh mg mh mi mj b">App</code>组件。</li></ol><p id="f56b" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><em class="mr">你也可以使用querySelector，它只是用来选择这个块！</em></p><p id="2637" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">让我们删除服务人员，因为我们不会在这个项目中使用他们。从<code class="eh mg mh mi mj b">index.js</code>中移除导入<code class="eh mg mh mi mj b">registerServiceWorker</code>和<code class="eh mg mh mi mj b">registerServiceWorker();</code>。同时从<code class="eh mg mh mi mj b">src</code>目录中删除<code class="eh mg mh mi mj b">registerServiceWorker.js</code>文件。</p><h2 id="2f88" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">上面这些进口的都是什么？</h2><p id="200d" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">在react中，每个渲染的部分都是一个组件。</p><ul class=""><li id="b49f" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll ms ly lz ma dt translated">需要React来处理JSX。你看到的类似html的代码不是html，而是JSX。<br/>当创建一个div时，它(babel)将代码传输到<code class="eh mg mh mi mj b">React.createElement()</code>。<br/>这需要反应。你可以参考<a class="ae lm" href="https://babeljs.io/" rel="noopener ugc nofollow" target="_blank">巴别塔文件</a>了解关于巴别塔的细节。</li><li id="2779" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll ms ly lz ma dt translated"><code class="eh mg mh mi mj b">import React, { Component } from 'react'</code>从React导入<code class="eh mg mh mi mj b">React</code>和一个名为<code class="eh mg mh mi mj b">Component</code>的方法。<code class="eh mg mh mi mj b">React.Component</code>是指<code class="eh mg mh mi mj b">React</code>内的<code class="eh mg mh mi mj b">Component</code>。<br/>当我们提到<code class="eh mg mh mi mj b">Component</code>时，它是指作为<code class="eh mg mh mi mj b">{Component}</code>导入的组件。用<code class="eh mg mh mi mj b">Component</code>是我个人的喜好。<br/>去掉<code class="eh mg mh mi mj b">{Component}</code>改用<code class="eh mg mh mi mj b">React.Component</code>并不能降低进口成本。这两种方式的工作方式完全相同，在性能上没有任何差异</li><li id="cba6" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll ms ly lz ma dt translated">ReactDOM用于处理包含页面上所有元素的DOM。这曾经是React once的一部分，现在已经被拆分为一个不同的部分。这个包提供了特定于DOM的方法，可以在应用程序的顶层使用。</li></ul><p id="c1b9" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv">让我们进入主文件，</strong> <code class="eh mg mh mi mj b"><strong class="kt hv">src/App.js`</strong></code></p><p id="7b35" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">您在浏览器中看到的内容来自该文件。移除return下的所有内容，使其看起来像下面这样。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff my"><img src="../Images/9315b29ec08f08a6a1d51be74d65827d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*cbkJ6_IwxNlGmZ0N"/></div></div></figure><p id="2538" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv"> <em class="mr">你注意到浏览器中运行的app上的变化了吗？看看变化。</em> </strong></p><p id="3853" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><em class="mr">请忽略我在截图中注入代码的编辑器设置。<br/>import语句右边的import Size和‘edited by You…’是由扩展注入的，不是代码的一部分。<br/>参考</em> <a class="ae lm" href="https://github.com/therj/crypto-reactdev" rel="noopener ugc nofollow" target="_blank"> <em class="mr">上的实际代码本GitHub资源库</em> </a> <em class="mr">。注意提交，我经常提交小的每一个变化。如果没有本地设置，可以在web上的</em> <a class="ae lm" href="https://codesandbox.io/s/0xnx1w361w" rel="noopener ugc nofollow" target="_blank"> <em class="mr"> codesandbox这里</em> </a> <em class="mr">使用。</em></p><p id="6817" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">return语句有几个条件:</p><ol class=""><li id="c9a0" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll lx ly lz ma dt translated">它只能返回一个元素:可能是一个<code class="eh mg mh mi mj b">div</code>或一个<code class="eh mg mh mi mj b">p</code>元素。</li><li id="0f82" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated">如果你必须返回多个元素，创建一个父div并返回父div。</li><li id="9e63" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated">多行时，回车必须包含在括号()中。在单行中返回时，括号是可选的。</li></ol><p id="57a9" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">由于我需要多行回车，我将使用括号。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff mz"><img src="../Images/cf54303fd6021f4145a3bdd6a1d8274a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5rKdw8e4w7CDuzbr"/></div></div></figure><p id="b0bf" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">html中的<code class="eh mg mh mi mj b">class</code>翻译成JSX的<code class="eh mg mh mi mj b">className</code>，因为<code class="eh mg mh mi mj b">class</code>与JavaScript <code class="eh mg mh mi mj b">class</code>冲突。类<code class="eh mg mh mi mj b">App</code>和<code class="eh mg mh mi mj b">App-header</code>在我们在<code class="eh mg mh mi mj b">App.js</code>中导入的<code class="eh mg mh mi mj b">App.css</code>文件中预定义。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff na"><img src="../Images/e414190d611191ff86b395471908b82b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-z9H0DIFOssghxye"/></div></div></figure><p id="a2f0" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这个应用程序没有太多的样式。既然是关于react，就不讨论关于CSS了。如果你的应用看起来不像我们的，你可以随时从库中替换<code class="eh mg mh mi mj b">App.css</code>中的样式。我们强烈建议从提供的启动文件开始，<a class="ae lm" href="https://github.com/therj/crypto-reactdev" rel="noopener ugc nofollow" target="_blank">从这里获取</a>。</p><p id="ce9c" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv">回头反应过来！</strong></p><p id="af7e" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">React由装配在一起的组件组成。这些部件被保持得尽可能小。</p><p id="1582" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">让我们将react应用程序分解成几个组件:</p><ol class=""><li id="a7ac" class="ls lt hu kt b ku ln ky lo jn lu jr lv jv lw ll lx ly lz ma dt translated">个人加密货币。</li><li id="408d" class="ls lt hu kt b ku mb ky mc jn md jr me jv mf ll lx ly lz ma dt translated">父组件来处理所有单个组件的数据。</li></ol><p id="6324" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">保持项目有序是一个更好的主意，所以在<code class="eh mg mh mi mj b">src</code>中创建一个名为<code class="eh mg mh mi mj b">components</code>的目录。</p><p id="fa67" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在<code class="eh mg mh mi mj b">components</code>中创建两个文件:</p><p id="bc2d" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">Crypto.js</code>和<code class="eh mg mh mi mj b">Crypto.css</code>。</p><p id="d78a" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv">T39】crypto . CSST41】</strong></p><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="4e73" class="jc jd hu mj b fv nf ng l nh ni">.crypto {<br/>list-style-type: none;<br/>padding: 0;<br/>display: inline-flex;<br/>}</span></pre><p id="d677" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在进入<code class="eh mg mh mi mj b">Crypto.js</code>之前，我们必须谈谈功能组件React。<br/>在React中有两种方式定义组件。我们在App.js中使用类App extends Components做了一个，那种组件叫做纯组件或者有状态组件。它们看起来像:</p><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="d254" class="jc jd hu mj b fv nf ng l nh ni">Class ClassName extends Component {<br/>Render () {<br/>Return (<br/>&lt;ComponentName&gt;<br/>Any text or resource!<br/>&lt;/ComponentName&gt;<br/>)<br/>}</span></pre><p id="5c8b" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">有一种新的现代方式来声明组件，这些被称为无状态组件。无状态功能组件提供了更好的性能，并且编写起来不那么笨拙。这不是写的代码行，这几乎是相同的。</p><p id="eeda" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">它像ES6函数一样被声明。无状态功能组件对于表示组件很有用。这意味着它们不能使用状态，状态是指声明它的组件所拥有的对象。它仅限于当前组件。它有组件可以跟踪数据。状态可以被初始化，或者数据可以在组件内动态改变。</p><p id="11e3" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">任何不使用状态的组件都应该以无状态的方式声明。箭头函数更加紧凑，为编写函数表达式提供了简洁的语法。</p><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="74ad" class="jc jd hu mj b fv nf ng l nh ni">Const MyComponent = (props) =&gt; {<br/>Return (<br/>&lt;Component&gt;<br/>{prop.myProperty}<br/>&lt;/Component&gt;<br/>)<br/>}</span></pre><p id="ccec" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv">把无状态vs有状态的话题留到另一个讨论，我们继续看app </strong> <code class="eh mg mh mi mj b"><strong class="kt hv">crypto-reactdev</strong></code> <strong class="kt hv">！</strong></p><p id="26e6" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><strong class="kt hv"> Crypto.js </strong></p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff nj"><img src="../Images/9d17beba223b403f5a2c8b8307fdf4d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1162/0*kPKsupWFdgzn5GY-"/></div></figure><p id="b938" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们正在进口<code class="eh mg mh mi mj b">React</code>，和一线的<code class="eh mg mh mi mj b">Component</code>。然后我们导入样式表文件。</p><p id="4d0e" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们正在创建一个类<code class="eh mg mh mi mj b">Crypto</code>,并将其导出为默认类，这样它就可以被导入到其他位置，与其他组件一起使用。</p><p id="645b" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在Crypto组件中创建一个<code class="eh mg mh mi mj b">constructor</code>,这样当我们创建一个元素时，我们的数据就会被设置。我们使用虚拟数据来设置状态，因此<code class="eh mg mh mi mj b">id</code>和<code class="eh mg mh mi mj b">price</code>是固定的。这些值将在以后从API中获得。<code class="eh mg mh mi mj b">super()</code>需要被调用，因为<code class="eh mg mh mi mj b">Crypto</code>扩展了父类，而<code class="eh mg mh mi mj b">super</code>从父类调用构造函数，这是JavaScript规则所强制的。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff nk"><img src="../Images/82c9c44c2e8f4fa8f81a21533bfc2ec3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/0*vle8-rJhtcw8z7kY"/></div></figure><p id="5750" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">每个组件都必须有一个名为render的函数。在构造函数之外的<code class="eh mg mh mi mj b">Crypto</code>类中定义render。</p><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="94ff" class="jc jd hu mj b fv nf ng l nh ni">render () {<br/>return (<br/>           <br/>       )<br/>}</span></pre><p id="8e30" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">Return将包含该类将返回的任何内容。</p><p id="5637" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">让我们用一些代码来填充…</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff nl"><img src="../Images/ff74f06a4403d824af3b695da717ef9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/0*mGaL8CpQwHkRguPo"/></div></figure><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="f389" class="jc jd hu mj b fv nf ng l nh ni">render () {<br/>let crypto = this.state.data.map (<br/>(currency) =&gt; {<br/>&lt;li key={currency.id}&gt;<br/>&lt;h3&gt;{currency.id} &lt;/h3&gt;<br/>&lt;h4&gt;$ {currency.price}&lt;/h4&gt;<br/>&lt;/li&gt;<br/>})<br/>return (<br/>&lt;div className="crypto-container"&gt;<br/>&lt;ul className="crypto"&gt;{crypto}&lt;/ul&gt;<br/>&lt;/div&gt;<br/>)<br/>}</span></pre><p id="d73c" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在渲染中，我们映射这些值。这与ES6中引入的JavaScript map函数相同。定义这个键是为了跟踪价格变化时我们需要更新的<code class="eh mg mh mi mj b">li</code>。它包含其他数据，如屏幕上的<code class="eh mg mh mi mj b">id</code>和<code class="eh mg mh mi mj b">price</code>。</p><p id="d1cb" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">React <code class="eh mg mh mi mj b">{}</code>中的花括号指的是JavaScript代码。<code class="eh mg mh mi mj b">{crypto}</code>指<code class="eh mg mh mi mj b">crypto</code>变量。<br/>return语句返回容器内的单个加密组件。<code class="eh mg mh mi mj b">className</code>用于造型。现在我们的<code class="eh mg mh mi mj b">Crypto</code>组件已经准备好了，但是输出屏幕没有变化，因为我们还没有渲染任何东西。</p><p id="9af4" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">渲染的组件是App。我们使用<br/> <code class="eh mg mh mi mj b">import Crypto from './components/Crypto'</code>在<code class="eh mg mh mi mj b">App</code>中导入<code class="eh mg mh mi mj b">Crypto</code></p><p id="a3ce" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">如下图所示，将<code class="eh mg mh mi mj b">&lt;Crypto/&gt;</code>组件包含在<code class="eh mg mh mi mj b">App</code>中。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff nm"><img src="../Images/a7902c43ac996b557906737f098526f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/0*RnuZNM25pUCdaY_V"/></div></figure><p id="22e5" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">浏览器应该输出类似这样的内容。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff nn"><img src="../Images/05b990ef9eca51ddb5eaf7aeec42040d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/0*oQsLuzQaBsuxCN_f"/></div></figure><h2 id="7ab8" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">添加更多组件</h2><p id="4f9b" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">我们的应用程序已经为处理每种加密货币设置了更多的子组件。这将使我们能够使用相同的组件与特定的功能和风格的每一个。<br/>在组件文件夹内，使用两个文件<code class="eh mg mh mi mj b">Currency.js</code>和<code class="eh mg mh mi mj b">Currency.css</code>。我给<code class="eh mg mh mi mj b">Currency.css</code>添加了一些CSS，在这里找到<a class="ae lm" href="https://github.com/therj/crypto-reactdev" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="213f" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">由于<code class="eh mg mh mi mj b">Currency.js</code>不会使用状态，我们应该将这个组件声明为功能性的(或者无状态的)。</p><p id="06ec" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">const Currency = props =&gt; {<br/>return (<br/>)<br/>}<br/>export default Currency</code></p><p id="9b7f" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这就是它是如何被宣布的。它不需要 <code class="eh mg mh mi mj b"><em class="mr">render</em></code> <em class="mr">功能。</em></p><p id="48a5" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在返回之前，我们需要变量集，所以使用对象析构从props获取变量。所有需要的变量都是结果中的内部数据。我将从<a class="ae lm" href="https://coinmarketcap.com/api/" rel="noopener ugc nofollow" target="_blank"> CoinMarketCap API </a>中得到这个。</p><p id="a5d0" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">还要注意，将它声明为ES5函数而不是使用箭头函数是可能的，但是您可能会经常遇到react的绑定问题。我推荐箭头函数，它们比较不容易混淆！</p><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="771d" class="jc jd hu mj b fv nf ng l nh ni">const {<br/>id,<br/>name,<br/>symbol,<br/>price_usd,<br/>percent_change_1h,<br/>percent_change_24h,<br/>percent_change_7d,<br/>} = props.data</span></pre><p id="b59b" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们想返回单一货币，所以返回</p><p id="0599" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">&lt;li className= {'currency ' + id}&gt;<br/>&lt;p className="currency-name"&gt;<br/>{name} ({symbol})<br/>&lt;/p&gt;<br/>&lt;h1&gt;${(+price_usd). toFixed (2)} &lt;/h1&gt;<br/>&lt;p&gt;{percent_change_1h} % 1hr&lt;/p&gt;<br/>&lt;p&gt;{percent_change_24h} % 24hrs&lt;/p&gt;<br/>&lt;p&gt;{percent_change_7d} % 7days&lt;/p&gt;<br/>&lt;/li&gt;</code></p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff no"><img src="../Images/4c8a8a6b8e0564648bb45d2355a45589.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/0*J55N0A4yLkmgPSAy"/></div></figure><p id="22e4" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">该返回数据表示单一货币。<br/>由于我们现在需要更多的数据字段，我在<code class="eh mg mh mi mj b">Crypto.js</code>中添加了虚拟数据字段</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div class="fe ff np"><img src="../Images/01060d61b5b59b3b88a4c88cb886f496.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/0*BmvHpgOGgf_W6vhw"/></div></figure><p id="7ca9" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">该数据可用于<code class="eh mg mh mi mj b">Currency</code>组件。我们必须在<code class="eh mg mh mi mj b">Crypto.js</code>中导入<code class="eh mg mh mi mj b">Currency</code>组件。我们需要用<code class="eh mg mh mi mj b">h3</code>和<code class="eh mg mh mi mj b">h4</code>来渲染这个组件而不是<code class="eh mg mh mi mj b">li</code>。</p><p id="8fe1" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">const crypto = this.state.data.map (currency =&gt; (<br/>&lt;Currency data={currency} key={currency.id} /&gt;<br/>))</code></p><p id="320d" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这将遍历状态中的所有数据。</p><p id="7f76" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">数据中的单个对象在映射函数中作为货币接收。这作为数据在<code class="eh mg mh mi mj b">Currency</code>组件中传递。我们还通过键来跟踪组件。</p><p id="76e7" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们得到了什么？</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nq"><img src="../Images/8075a4820d316c7edafa32736a76f5f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/0*PYf3f3mfs6S6FltT"/></div></div></figure><p id="3456" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><em class="mr">优秀的输出，除了数据。</em></p><h2 id="bd42" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">获取react组件的数据！</h2><p id="a656" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">有多种方法可以获得数据，使用软件包来帮助我们可能是最简单的方法。</p><p id="8279" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我不期望你熟悉react生命周期方法，你也可以单独使用它！</p><p id="e6c9" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我将使用Axios，使用异步REST API很容易。<br/> Axios不自带<code class="eh mg mh mi mj b">create-react-app</code>。我们使用以下方式添加到我们的应用程序中:</p><p id="154c" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">$ npm install axios –save</code></p><p id="67d5" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">在<code class="eh mg mh mi mj b">Crypto.js</code>中导入axios，那是我们将获取数据的地方。<br/> <code class="eh mg mh mi mj b">import axios from 'axios'</code></p><p id="ec07" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">现在，我们通过API获取货币数据。我们在<code class="eh mg mh mi mj b">Crypto</code>类中创建一个函数来实现这一点。</p><pre class="ml mm mn mo fq nb mj nc nd aw ne dt"><span id="d70f" class="jc jd hu mj b fv nf ng l nh ni">fetchCurrencyData = () =&gt; {</span><span id="f277" class="jc jd hu mj b fv nr ng l nh ni">axios</span><span id="4028" class="jc jd hu mj b fv nr ng l nh ni">.get('https://api.coinmarketcap.com/v1/ticker/?limit=10')</span><span id="680f" class="jc jd hu mj b fv nr ng l nh ni">    .then(response =&gt; {</span><span id="f78d" class="jc jd hu mj b fv nr ng l nh ni">      const wanted = ['bitcoin', 'ethereum']</span><span id="6d3a" class="jc jd hu mj b fv nr ng l nh ni">      const result = response.data.filter(currency =&gt;</span><span id="b315" class="jc jd hu mj b fv nr ng l nh ni">   wanted.includes(currency.id),</span><span id="1518" class="jc jd hu mj b fv nr ng l nh ni">  )<br/>  this.setState({data: result})<br/> }).<br/>  catch(err =&gt; console.log(err))</span><span id="158e" class="jc jd hu mj b fv nr ng l nh ni">}</span></pre><p id="18f7" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">fetchCurrencyData()</code>是必需的功能。我们只过滤比特币和以太坊的结果数据集。我们还在获得结果后将状态数据设置为结果。</p><p id="8326" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">由于数据被修改，react将反映出<code class="eh mg mh mi mj b">Currency</code>组件的变化。</p><p id="e5ff" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">如果你现在检查浏览器，你不会看到任何变化。这是因为我们定义了函数，但从未调用过它。<br/>我们希望在组件加载时以及之后的每一分钟调用这个函数。</p><p id="cc81" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">React有一个叫做生命周期方法的东西，大概有8种方法。这些就像内置函数。这里只说一个。</p><p id="2655" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们将使用<code class="eh mg mh mi mj b">componentDidMount</code>方法。这将在组件可见时执行代码。<br/>在<code class="eh mg mh mi mj b">Crypto</code>组件内，添加该方法如下:</p><p id="a75b" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated"><code class="eh mg mh mi mj b">componentDidMount () {<br/>this. fetchCurrencyData ()<br/>this.interval = setInterval (() =&gt; this. fetchCurrencyData (), 60 *1000)<br/>}</code></p><p id="b9f6" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这将使用我们之前声明的函数获取货币数据。它还使用<code class="eh mg mh mi mj b">setInterval</code>每60秒运行一次以获取新数据。</p><p id="7f27" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">现在，我们应该有一个可用的比特币、以太坊和比特币收报机。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ns"><img src="../Images/ccd99dd0d6a1ea0d1a4aab6896929f81.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t9FfO4VFrvFEPAkO"/></div></div></figure><h2 id="89a2" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">清理react应用！</h2><p id="dcb4" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">总有一些可以纠正的地方，下面是我们在这个项目中可以清理的地方。<br/>在浏览器中检查控制台并移除不使用的组件。</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nt"><img src="../Images/5f58662b76b64e37d9dd73c813a77379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-FUMAfls-4rHUg1o"/></div></div></figure><p id="1192" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">从<code class="eh mg mh mi mj b">App.js</code>中删除徽标导入，从<code class="eh mg mh mi mj b">Currency.js</code>中删除<code class="eh mg mh mi mj b">{Component}</code></p><h2 id="9acb" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">扩大货币</h2><p id="5f6f" class="pw-post-body-paragraph kr ks hu kt b ku kv kw kx ky kz la lb jn lc ld le jr lf lg lh jv li lj lk ll hn dt translated">我们有比特币和以太币报价机，我们可以将其扩展到更多的货币。</p><p id="913e" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">我们使用REST API URL从这个位置获取数据。可以看到可用的<code class="eh mg mh mi mj b">ids</code>。我们依次有<code class="eh mg mh mi mj b">bitcoin</code>、<code class="eh mg mh mi mj b">ethereum</code>、<code class="eh mg mh mi mj b">ripple</code>、<code class="eh mg mh mi mj b">bitcoin-cash</code>、<code class="eh mg mh mi mj b">eos</code>、<code class="eh mg mh mi mj b">litecoin</code>、<code class="eh mg mh mi mj b">stellar</code>、<code class="eh mg mh mi mj b">cardano</code>、<code class="eh mg mh mi mj b">iota</code>、<code class="eh mg mh mi mj b">tron</code>。</p><p id="2082" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">将其中一些添加到<code class="eh mg mh mi mj b">Crypto.js</code>中的<code class="eh mg mh mi mj b">wanted</code>列表中。</p><p id="2eb4" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">这是我的输出</p><figure class="ml mm mn mo fq iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff nu"><img src="../Images/e74cff9b44630889165ed9e05319936b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Mpaz-rPs4kvk2Q8e"/></div></div></figure><p id="8a2c" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">数据应该会自动刷新。</p><p id="2fec" class="pw-post-body-paragraph kr ks hu kt b ku ln kw kx ky lo la lb jn lp ld le jr lq lg lh jv lr lj lk ll hn dt translated">如果没有更新，请等待一段时间。CoinMarketCap每5分钟更新一次数据，我们每分钟获取数据。获取新数据可能需要6分钟。</p><h1 id="2381" class="ka jd hu bd je kb kc kd ji ke kf kg jm kh ki kj jq kk kl km ju kn ko kp jy kq dt translated">结束语:</h1><h2 id="d189" class="jc jd hu bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">如果这篇文章有帮助，请点击拍手👏按钮下面几下，以示支持！⬇⬇</h2></div></div>    
</body>
</html>