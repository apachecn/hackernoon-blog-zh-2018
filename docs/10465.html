<html>
<head>
<title>📚 Summarization With Wine Reviews Using spaCy📋</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">📚使用spaCy的葡萄酒评论摘要📋</h1>
<blockquote>原文：<a href="https://medium.com/hackernoon/summarization-with-wine-reviews-using-spacy-b49f18399577?source=collection_archive---------6-----------------------#2018-12-31">https://medium.com/hackernoon/summarization-with-wine-reviews-using-spacy-b49f18399577?source=collection_archive---------6-----------------------#2018-12-31</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><div class=""><h2 id="892b" class="pw-subtitle-paragraph ir ht hu bd b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ek translated">“吃美食不需要银叉。”</h2></div><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff jj"><img src="../Images/1cca17eb81770f817138fc55b808d9d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*aumiV7qUh-vBCBnffpd8dw.gif"/></div></div></figure><h1 id="f4b4" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">🎬葡萄酒评论简介</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff kn"><img src="../Images/d0058accd19556eb1f3de42666e4d30a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n8wiHEofEfPvuDbfNdE4Ag.png"/></div></div></figure><p id="1230" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">在本文中，我将尝试探索葡萄酒评论数据集。它包含了130k的酒评评论。在这篇文章的最后，我会试着做一个简单的文本摘要器来总结给定的评论。总结评论也可以用作评论标题。我将使用spaCy作为处理这个项目的自然语言处理库。</p><h1 id="4f83" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">📋该项目的目标</h1><p id="28d9" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">这个项目的目标是建立一个模型，可以为葡萄酒评论中的评论创建相关的摘要。该数据集包含超过13万条评论，托管在<a class="ae lp" href="https://www.kaggle.com/zynicide/wine-reviews" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>上。</p><h1 id="0f51" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">什么是文本摘要？</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff lq"><img src="../Images/92ba13301d0417e83e0a7a877303cb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*4d7oCMtJbCcL6NU0ufCODw.png"/></div></figure><blockquote class="lr ls lt"><p id="981c" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated">文本摘要是从一个源(或多个源)中提取最重要的信息以产生特定用户(或多个用户)和任务(或多个任务)的删节版本的过程。</p></blockquote><h1 id="aa80" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">为什么我们需要文本摘要？</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ly"><img src="../Images/4c4786d6b780bae2a3bf72f58b7b909c.png" data-original-src="https://miro.medium.com/v2/resize:fit:414/format:webp/1*RgiCt7qBf4JZAmsqA1vRug.png"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><a class="ae lp" href="https://imgur.com/HyPUqwF" rel="noopener ugc nofollow" target="_blank">Imgur</a></figcaption></figure><p id="9bd6" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">近年来，我们看到文本信息的数量与日俱增。文本信息增长迅速。用户阅读文本信息变得更加困难，并且还会失去兴趣。这就是文本摘要出现的原因，它将解决这个问题。</p><h1 id="b982" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">文本摘要方法的类型</h1><p id="1b6c" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">文本摘要方法可以分为不同的类型。</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff md"><img src="../Images/f5d09fbc98a465634c0de0242c153744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pMwBqRkk7agz30d3IxZ8YA.png"/></div></div></figure><p id="df8f" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated"><strong class="kq hv">一、基于输入类型:</strong></p><ol class=""><li id="d5de" class="me mf hu kq b kr ks ku kv kx mg lb mh lf mi lj mj mk ml mm dt translated">单个文档，其中输入长度较短。许多早期的摘要系统处理单个文档的摘要。</li><li id="bfef" class="me mf hu kq b kr mn ku mo kx mp lb mq lf mr lj mj mk ml mm dt translated">多文档，这里输入的长度可以任意。</li></ol><p id="f434" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated"><strong class="kq hv">二世。基于目的:</strong></p><ol class=""><li id="9bd2" class="me mf hu kq b kr ks ku kv kx mg lb mh lf mi lj mj mk ml mm dt translated">通用，其中模型对要汇总的文本的领域或内容不做任何假设，并将所有输入视为同类。已经完成的大部分工作都围绕着一般的总结。</li><li id="110b" class="me mf hu kq b kr mn ku mo kx mp lb mq lf mr lj mj mk ml mm dt translated">特定于领域，其中模型使用特定于领域的知识来形成更准确的摘要。例如，总结特定领域的研究论文、生物医学文献等。</li><li id="46b8" class="me mf hu kq b kr mn ku mo kx mp lb mq lf mr lj mj mk ml mm dt translated">基于查询，其中摘要仅包含回答关于输入文本的自然语言问题的信息。</li></ol><p id="0ba7" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated"><strong class="kq hv">三。基于输出类型:</strong></p><ol class=""><li id="9ed1" class="me mf hu kq b kr ks ku kv kx mg lb mh lf mi lj mj mk ml mm dt translated">摘录，从输入文本中选择重要的句子形成摘要。今天的大多数摘要方法本质上都是提取的。</li><li id="9b3b" class="me mf hu kq b kr mn ku mo kx mp lb mq lf mr lj mj mk ml mm dt translated">Abstractive，模型形成自己的短语和句子来提供更连贯的摘要，就像人类会生成的一样。这种方法肯定更吸引人，但比提取摘要要困难得多。</li></ol></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><h1 id="8d86" class="jv jw hu bd jx jy mz ka kb kc na ke kf ja nb jb kh jd nc je kj jg nd jh kl km dt translated">先决条件</h1><p id="a362" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">这篇文章做了如下假设:</p><ul class=""><li id="deb7" class="me mf hu kq b kr ks ku kv kx mg lb mh lf mi lj ne mk ml mm dt translated">你对Python很熟悉</li><li id="3f38" class="me mf hu kq b kr mn ku mo kx mp lb mq lf mr lj ne mk ml mm dt translated">您的系统上安装了Python 3.6或更高版本</li><li id="e547" class="me mf hu kq b kr mn ku mo kx mp lb mq lf mr lj ne mk ml mm dt translated">spaCy包。</li></ul><h1 id="d65a" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">spaCy是什么？</h1><p id="e757" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">spaCy是Matt Honnibal在<a class="ae lp" href="https://explosion.ai/" rel="noopener ugc nofollow" target="_blank"> explosion.ai </a>开发的“Python中的工业强度NLP”的一个相对较新的包。它的设计考虑到了应用数据科学家，这意味着它不会让用户在决定使用什么深奥的算法来完成常见任务时感到沉重，而且它很快。非常快(在Cython中实现)。如果你熟悉Python数据科学栈，spaCy就是你的NLP的<code class="eh nf ng nh ni b">numpy</code>——它相当低级，但是非常直观和高性能。然而，由于SpaCy是一个相对较新的NLP库，它没有像NLTK那样被广泛采用。</p><h1 id="e4d5" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">空间安装</h1><p id="c34f" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated"><code class="eh nf ng nh ni b"><strong class="kq hv">spaCy</strong></code>、其数据及其模型可以使用python包索引和设置工具轻松安装。使用以下命令在您的计算机上安装spacy:</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="2234" class="nn jw hu ni b fv no np l nq nr">! pip install spacy</span></pre><p id="28b2" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">对于Python3，将上面命令中的“pip”替换为“pip3”。</p><p id="de31" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">或者从<a class="ae lp" href="https://pypi.org/project/spacy/" rel="noopener ugc nofollow" target="_blank">这里</a>下载源代码，解压后运行以下命令:</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="1928" class="nn jw hu ni b fv no np l nq nr">!python setup.py install</span></pre><p id="bf83" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">要下载所有数据和模型，请在安装后运行以下命令:</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="3793" class="nn jw hu ni b fv no np l nq nr">!python -m spacy.en.download all</span></pre><p id="9c3e" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">您现在已经准备好探索和使用空间。</p><h1 id="6f0f" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">加载空间库</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff ns"><img src="../Images/66ce9508dd428fba8169d0d96a9720be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AxrO0hE3IG2nl_m0P2mk5g.png"/></div></div></figure><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="4edd" class="nn jw hu ni b fv no np l nq nr">import spacy</span></pre></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><h1 id="0829" class="jv jw hu bd jx jy mz ka kb kc na ke kf ja nb jb kh jd nc je kj jg nd jh kl km dt translated">实施部分</h1><h1 id="fb2b" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">1.导入包</h1><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="33ac" class="nn jw hu ni b fv no np l nq nr">import numpy as np <em class="lu"># linear algebra</em><br/>import spacy<br/>nlp = spacy.load('en_core_web_sm')<br/>import pandas as pd <em class="lu"># data processing, CSV file I/O (e.g. pd.read_csv)</em><br/>import seaborn as sns<br/>import matplotlib.pyplot as plt<br/>from wordcloud import WordCloud<br/>import string<br/>import re<br/>from collections import Counter<br/>from time import time<br/><em class="lu"># from sklearn.feature_extraction.stop_words import ENGLISH_STOP_WORDS as stopwords</em><br/>from nltk.corpus import stopwords<br/>import nltk<br/>import plotly.offline as py<br/>import plotly.graph_objs as go<br/>import plotly.tools as tls<br/>%matplotlib inline<br/><br/>stopwords = stopwords.words('english')<br/>sns.set_context('notebook')</span></pre><h1 id="6684" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">2.导入数据集</h1><p id="0c64" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">在本节中，我将为这个笔记本加载所需的数据集。这个数据集有大量的评论。很难处理完整的数据集。因此，为了方便起见，我将随机地将数据集分成更小的块。</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="8634" class="nn jw hu ni b fv no np l nq nr">reviews = pd.read_csv("../input/winemag-data-130k-v2.csv", nrows=5000,usecols =['points', 'title', 'description'],encoding='latin1')<br/>reviews = reviews.dropna()<br/>reviews.head(15)</span></pre><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff nt"><img src="../Images/aafd16cf25c8dc75d4e1a8ad56659256.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*LKsgBLyTmpGyi_ZV7V2zCA.png"/></div></figure><h1 id="6ccb" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">3.文本预处理</h1><p id="eb48" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">在这一步中，我将使用Spacy对文本进行预处理，换句话说，我将清除评论标题中无用的特征，如标点符号、停用词。对于这项任务，Python中有两个有用的库。1.NLTK 2。斯帕西。在这本笔记本中，我将使用Spacy，因为与NLTK相比，它非常快，并且有许多有用的特性。因此，没有进一步做，让我们开始吧！</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="8f99" class="nn jw hu ni b fv no np l nq nr">!python -m spacy download en_core_web_lg<br/>nlp = spacy.load('en_core_web_lg')<br/>def normalize_text(text):<br/>    tm1 = re.sub('&lt;pre&gt;.*?&lt;/pre&gt;', '', text, flags=re.DOTALL)<br/>    tm2 = re.sub('&lt;code&gt;.*?&lt;/code&gt;', '', tm1, flags=re.DOTALL)<br/>    tm3 = re.sub('&lt;[^&gt;]+&gt;©', '', tm1, flags=re.DOTALL)<br/>    return tm3.replace("<strong class="ni hv">\n</strong>", "")</span></pre><p id="b426" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff nu"><img src="../Images/b83cf8ce7c322aadf892b383ae3969c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1338/format:webp/1*UwGzf7d_5XQQigBkSvnVOg.png"/></div></figure><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="bb3d" class="nn jw hu ni b fv no np l nq nr"><em class="lu"># in this step we are going to remove code syntax from text </em><br/>reviews['description_Cleaned_1'] = reviews['description'].apply(normalize_text)</span></pre></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><pre class="nj ni nk nl aw nm dt"><span id="3438" class="nn jw hu ni b fv nv nw nx ny nz np l nq nr">print('Before normalizing text-----<strong class="ni hv">\n</strong>')<br/>print(reviews['description'][2])<br/>print('<strong class="ni hv">\n</strong>After normalizing text-----<strong class="ni hv">\n</strong>')<br/>print(reviews['description_Cleaned_1'][2])</span></pre><p id="af54" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/eff3676ccb156275175c295679c261b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*vtzrh7XYwJgVrS_ePubHIQ.png"/></div></figure><p id="d5d9" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">我们可以看到我们的文本标准化后的巨大差异。现在我们可以看到我们的文本更容易管理。这将有助于我们探索评论，并在以后制作摘要。</p><p id="cc20" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">我们也看到了一些标点符号和停用词。我们也不需要它们。首先，我没有删除它们，因为我们在将来制作摘要生成器时会用到它们。因此，让我们创建另一个列来存储不带标点符号和停用词的规范化文本。</p><h1 id="27fd" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">3.1在将文本输入空间之前清理文本</h1><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="4f1f" class="nn jw hu ni b fv no np l nq nr">punctuations = '!"#$%&amp;<strong class="ni hv">\'</strong>()*+,-/:;&lt;=&gt;?@[<strong class="ni hv">\\</strong>]^_`{|}~©'<br/><em class="lu"># Define function to cleanup text by removing personal pronouns, stopwords, and puncuation</em><br/>def cleanup_text(docs, logging=False):<br/>    texts = []<br/>    doc = nlp(docs, disable=['parser', 'ner'])<br/>    tokens = [tok.lemma_.lower().strip() for tok <strong class="ni hv">in</strong> doc if tok.lemma_ != '-PRON-']<br/>    tokens = [tok for tok <strong class="ni hv">in</strong> tokens if tok <strong class="ni hv">not</strong> <strong class="ni hv">in</strong> stopwords <strong class="ni hv">and</strong> tok <strong class="ni hv">not</strong> <strong class="ni hv">in</strong> punctuations]<br/>    tokens = ' '.join(tokens)<br/>    texts.append(tokens)<br/>    return pd.Series(texts)<br/>reviews['Description_Cleaned'] = reviews['description_Cleaned_1'].apply(lambda x: cleanup_text(x, False))</span></pre></div><div class="ab cl ms mt hc mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="hn ho hp hq hr"><pre class="nj ni nk nl aw nm dt"><span id="77d4" class="nn jw hu ni b fv nv nw nx ny nz np l nq nr">print('Reviews description with punctuatin and stopwords---<strong class="ni hv">\n</strong>')<br/>print(reviews['description_Cleaned_1'][0])<br/>print('<strong class="ni hv">\n</strong>Reviews description after removing punctuation and stopwrods---<strong class="ni hv">\n</strong>')<br/>print(reviews['Description_Cleaned'][0])</span></pre><p id="834d" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff ob"><img src="../Images/1aaed9b0820c4be1b0fe10bf6b032592.png" data-original-src="https://miro.medium.com/v2/resize:fit:1336/format:webp/1*eBU7ikZJIpFraDXUTm50pQ.png"/></div></figure><p id="ab2c" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">哇！看吧！现在我们的文本看起来可读性更好，也不那么杂乱了！</p><h1 id="b2bb" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">4.点数分布</h1><p id="6245" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">在这一节，我将试着理解点的分布。这里的点数表示该描述在社交媒体(如facebook、twitter等)上获得的投票数。</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="af76" class="nn jw hu ni b fv no np l nq nr">plt.subplot(1, 2, 1)<br/>(reviews['points']).plot.hist(bins=30, figsize=(30,5), edgecolor='white',range=[0,150])<br/>plt.xlabel('Number of points', fontsize=17)<br/>plt.ylabel('frequency', fontsize=17)<br/>plt.tick_params(labelsize=15)<br/>plt.title('Number of points description', fontsize=17)<br/>plt.show()</span></pre><p id="1899" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff oa"><img src="../Images/81167bae6e1b8aad792a0ee91be3c957.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/format:webp/1*pnQOIIVSUSLfb4jiqDB_9g.png"/></div></figure><p id="edea" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">分数的描述大部分在80到100之间。大多数描述的得分在80到100分之间。</p><h1 id="4f55" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">5.分析评论描述</h1><p id="8fe9" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">在这一节，我将尝试分析葡萄酒的描述。在葡萄酒评论中，葡萄酒描述起着至关重要的作用。好的描述能让你的酒脱颖而出。这也有助于更快地获得评论。最后，它会帮助你得到一些分数。看看在酒的描述里能找到什么。</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="f475" class="nn jw hu ni b fv no np l nq nr">reviews['Title_len'] = reviews['Description_Cleaned'].str.split().str.len()<br/>rev = reviews.groupby('Title_len')['points'].mean().reset_index()<br/>trace1 = go.Scatter(<br/>    x = rev['Title_len'],<br/>    y = rev['points'],<br/>    mode = 'lines+markers',<br/>    name = 'lines+markers'<br/>)<br/>layout = dict(title= 'Average points by wine description Length',<br/>              yaxis = dict(title='Average points'),<br/>              xaxis = dict(title='wine description Length'))<br/>fig=dict(data=[trace1], layout=layout)<br/>py.iplot(fig)</span></pre><p id="276b" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="fe ff oc"><img src="../Images/e1868292a3573e936118e651073ed8e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kgs8GZjoeeRXh11veiS7NQ.png"/></div></div></figure><h1 id="edaa" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.描述摘要生成器</h1><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff od"><img src="../Images/26b17a2e1abfed457cdbd2911a2a1a6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:954/format:webp/1*nQF_558CKU4TGcL3DLV-4g.jpeg"/></div><figcaption class="lz ma fg fe ff mb mc bd b be z ek"><a class="ae lp" href="https://www.youtube.com/watch?v=ogrJaOIuBx4&amp;t=164s" rel="noopener ugc nofollow" target="_blank">Siraj Raval</a></figcaption></figure><blockquote class="lr ls lt"><p id="3a59" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated">在这一步，我将试着做一个描述摘要。对于文本摘要有大量的研究。但是我将尝试做一个简单的文本摘要技术。该技术描述如下。</p></blockquote><h1 id="95f7" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.1将段落转换成句子</h1><blockquote class="lr ls lt"><p id="238c" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated">我们首先需要将整段文字转换成句子。将段落转换成句子的最常见方法是每当遇到句号时就拆分段落。</p></blockquote><h1 id="284a" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.2文本预处理</h1><blockquote class="lr ls lt"><p id="f977" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated"><em class="hu">将段落转换成句子后，我们需要移除所有句子中的特殊字符、停用词和数字。</em></p></blockquote><h1 id="648e" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.3对句子进行标记</h1><blockquote class="lr ls lt"><p id="9a53" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated"><em class="hu">我们需要对所有的句子进行分词，得到句子中存在的所有单词</em></p></blockquote><h1 id="db0e" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.4找出加权出现频率</h1><blockquote class="lr ls lt"><p id="af9c" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated">接下来我们需要找到所有单词出现的加权频率。我们可以通过将每个单词的频率除以最频繁出现的单词的频率来找到每个单词的加权频率。</p></blockquote><h1 id="0bb8" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.5用加权频率替换原句中的单词</h1><blockquote class="lr ls lt"><p id="c896" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated"><em class="hu">最后一步是插入加权频率来代替原始句子中的相应单词，并找到它们的总和。重要的是要提到预处理过程中移除的单词(停用词、标点符号、数字等)的加权频率。)将为零，因此不需要添加</em></p></blockquote><h1 id="10fe" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">6.6按总和降序排列句子</h1><blockquote class="lr ls lt"><p id="bfeb" class="ko kp lu kq b kr ks iv kt ku kv iy kw lv ky kz la lw lc ld le lx lg lh li lj hn dt translated"><em class="hu">最后一步是按照句子总和的逆序排序。出现频率最高的句子概括了全文。</em></p></blockquote><h1 id="4850" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">文本摘要功能:</h1><p id="64d3" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">这个函数有助于从大文本中提取摘要。所以当我们想从文本中提取摘要时，我们总是需要这个函数。这里的功能如下:</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="aef9" class="nn jw hu ni b fv no np l nq nr">def generate_summary(text_without_removing_dot, cleaned_text):<br/>    sample_text = text_without_removing_dot<br/>    doc = nlp(sample_text)<br/>    sentence_list=[]<br/>    for idx, sentence <strong class="ni hv">in</strong> enumerate(doc.sents): <em class="lu"># we are using spacy for sentence tokenization</em><br/>        sentence_list.append(re.sub(r'[^\w\s]','',str(sentence)))<br/><br/>    stopwords = nltk.corpus.stopwords.words('english')<br/><br/>    word_frequencies = {}  <br/>    for word <strong class="ni hv">in</strong> nltk.word_tokenize(cleaned_text):  <br/>        if word <strong class="ni hv">not</strong> <strong class="ni hv">in</strong> stopwords:<br/>            if word <strong class="ni hv">not</strong> <strong class="ni hv">in</strong> word_frequencies.keys():<br/>                word_frequencies[word] = 1<br/>            else:<br/>                word_frequencies[word] += 1<br/><br/><br/>    maximum_frequncy = max(word_frequencies.values())<br/><br/>    for word <strong class="ni hv">in</strong> word_frequencies.keys():  <br/>        word_frequencies[word] = (word_frequencies[word]/maximum_frequncy)<br/><br/><br/>    sentence_scores = {}  <br/>    for sent <strong class="ni hv">in</strong> sentence_list:  <br/>        for word <strong class="ni hv">in</strong> nltk.word_tokenize(sent.lower()):<br/>            if word <strong class="ni hv">in</strong> word_frequencies.keys():<br/>                if len(sent.split(' ')) &lt; 30:<br/>                    if sent <strong class="ni hv">not</strong> <strong class="ni hv">in</strong> sentence_scores.keys():<br/>                        sentence_scores[sent] = word_frequencies[word]<br/>                    else:<br/>                        sentence_scores[sent] += word_frequencies[word]<br/><br/><br/>    summary_sentences = heapq.nlargest(7, sentence_scores, key=sentence_scores.get)<br/><br/>    summary = ' '.join(summary_sentences)<br/>    print("Original Text:<strong class="ni hv">\n</strong>")<br/>    print(text_without_removing_dot)<br/>    print('<strong class="ni hv">\n\n</strong>Summarized text:<strong class="ni hv">\n</strong>')<br/>    print(summary)</span></pre><p id="e0ef" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">现在我们已经写了函数，让我们试着总结一些描述。</p><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="1a26" class="nn jw hu ni b fv no np l nq nr">generate_summary(reviews['description_Cleaned_1'][8], reviews['Description_Cleaned'][8])</span></pre><p id="0973" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff oe"><img src="../Images/7b980d0576c0388643b88873c2b7df1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*tp9ZkWmqkZEIyQPQWGJFcQ.png"/></div></figure><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="4731" class="nn jw hu ni b fv no np l nq nr">generate_summary(reviews['description_Cleaned_1'][100], reviews['Description_Cleaned'][100])</span></pre><p id="552f" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff oe"><img src="../Images/033adbf997e905c5aea57e0efeae0031.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/format:webp/1*rJo5LUCVcYaFeE8YPzZ1jg.png"/></div></figure><pre class="jk jl jm jn fq nj ni nk nl aw nm dt"><span id="8b17" class="nn jw hu ni b fv no np l nq nr">generate_summary(reviews['description_Cleaned_1'][500], reviews['Description_Cleaned'][500])</span></pre><p id="1e9c" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">输出屏幕:</p><figure class="jk jl jm jn fq jo fe ff paragraph-image"><div class="fe ff of"><img src="../Images/a999388d7c7c3c6e8169f51e9b1cea7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*MmJIEseHLbQF0gTPa269tw.png"/></div></figure><p id="d769" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">太棒了。我们成功地制作了一个简单的winemag描述摘要器。</p><h1 id="39b5" class="jv jw hu bd jx jy jz ka kb kc kd ke kf ja kg jb kh jd ki je kj jg kk jh kl km dt translated">7.结论</h1><p id="d92f" class="pw-post-body-paragraph ko kp hu kq b kr lk iv kt ku ll iy kw kx lm kz la lb ln ld le lf lo lh li lj hn dt translated">感谢阅读这篇文章。如果您有任何建议，请随时在评论中联系我，或者发送<a class="ae lp" href="http://harunspeedy1995@gmail.com" rel="noopener ugc nofollow" target="_blank">邮件</a>或连接<a class="ae lp" href="https://www.linkedin.com/in/harun-ur-rashid6647/" rel="noopener ugc nofollow" target="_blank"> LinkedIn </a>。保持联系，了解更多最新消息。谢谢你。😎</p><p id="9b20" class="pw-post-body-paragraph ko kp hu kq b kr ks iv kt ku kv iy kw kx ky kz la lb lc ld le lf lg lh li lj hn dt translated">完整代码请访问<a class="ae lp" href="https://www.kaggle.com/harunshimanto/summarization-with-wine-reviews-using-spacy" rel="noopener ugc nofollow" target="_blank"> Kaggle </a>。</p><blockquote class="og"><p id="0c86" class="oh oi hu bd oj ok ol om on oo op lj ek translated">"让我们用美酒和甜言蜜语来庆祝这一时刻."</p></blockquote><p id="693d" class="pw-post-body-paragraph ko kp hu kq b kr oq iv kt ku or iy kw kx os kz la lb ot ld le lf ou lh li lj hn dt translated">如果你喜欢这篇文章，然后给👏鼓掌。开心分析！</p></div></div>    
</body>
</html>