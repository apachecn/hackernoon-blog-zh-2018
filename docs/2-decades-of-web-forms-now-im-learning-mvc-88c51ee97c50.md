# 二十年的网络表单。现在，我正在学习 MVC。

> 原文：<https://medium.com/hackernoon/2-decades-of-web-forms-now-im-learning-mvc-88c51ee97c50>

![](img/11a25b8351652c62ab4947b21739fc47.png)

这是一个真实的故事。

首先，我不是 MVC 专家。

这并不是一个博客，里面有过渡到 MVC 的人正在寻找的所有答案。

我和你一样，在互联网上搜索这样的出版物，结果发现所有的内容都是面向任务的，专注于将特定的站点或功能迁移到 MVC。我发现很多博客都在讨论为什么 MVC 更好，它给开发者和营销人员带来的所有惊人的好处，以及为什么 Web 表单应该(？)被深埋地下，再也不见。

我真正想找的是知道 Web 表单并开始使用 MVC 的人。我想知道他们的过程、挑战和对框架的想法，以及他们的技能有多容易关联。所以，我在从我的角度写一篇文章。一位经验丰富的 Web 表单开发人员，投身于 MVC 世界。当然，我已经用. NET 开发了很多网站。实际上，超过 19 年的价值。但那是使用网络表单，这是正式的不适合玩具岛的最新居民。虽然我用微软的遗留框架创建了许多(自称的)令人敬畏的解决方案，但 MVC 从来没有出现过。

直到你成为内容管理系统的技术布道者，宣称 MVC 是他们的主要焦点。然后好戏开始了。

[了解更多关于 Kentico 新 MVC 支持的信息](https://www.kentico.com/product/mvc-transition-guide)

当我两年前开始认真研究 MVC 时，我知道要掌握它需要一些时间。当这个平台的很多部分违背了近 20 年的 Web 表单思维时，我发现有时候很难完全掌握核心概念。虽然 MVC 处理路由、请求和架构的方法并不完全是外来的想法，但它们仍然与我赖以建立职业生涯的许多技术和设计相矛盾。

当然，有很多相似之处，这对事情很有帮助。这两个框架都有划分功能的概念和相同的请求/响应能力。但在引擎盖下，事情完全不同，我花了过去 24 个月的大部分时间试图弄清楚这一切。

为什么花了这么长时间？好吧，当你是一个技术布道者时，你不再真正从事“真正的”项目。当然，我做了很多 POC 和足够杀死一头驴的演示。但是，除非您从事生产级的企业应用程序，否则您永远不会有学习新技术的尝试经验。正因为如此，我不得不以不同的速度工作，通过培训、样板文件和大量的试错来提高我的 MVC 技能。

通过所有这些，这里有一些迄今为止最大的收获。

**免责声明**

在这篇文章的制作过程中，没有驴子受到伤害。

# **建筑**

![](img/fcdca8004643482b51fd6057fe32723c.png)

从一开始，Web 表单和 MVC 之间的架构差异就非常明显。代码隐藏和设计者文件早已成为过去。哦，还有 Web 表单页面生命周期？那也要离开这里。相反，对于所有您喜欢的代码，都有控制器、视图、模型和助手类。这种结构简洁、最小，并且易于管理。大多数示例站点都很好地建立了这个概念，这几乎是每个 MVC 培训课程将涉及的第一件事。理解文件夹结构和命名约定是关键，幸运的是这不是太大的挑战。

多年来，当涉及到构建和存储我的代码(为了可重用性)时，我一直试图采用良好的实践，所以为每个 MVC 组件创建专门的类和文件夹是一个自然的概念。有一些部分仍然让我困惑，比如接口和连接器的最佳位置在哪里，什么时候使用部分/完整视图，以及你到底是如何对表单的发布进行编码的。这些是我在 Web 表单中非常熟悉的概念，所以将它们转换到 MVC 需要一点时间。但是，通过足够的练习，一切皆有可能。

**关键要点**

*   MVC 项目有一个独特的结构，允许应用程序自动完成请求并匹配控制器和视图。
*   拥有一个合适的项目结构是网站正常运行的关键，也是代码移植到其他应用程序的关键。
*   微软基本上规定 MVC 是未来的发展方向，对 Web 表单的长期支持并不是一个保证。这意味着，如果开发人员想拥有工作、金钱和食物，那么过渡到 MVC 是一个必要的自我保护举措。

**概念把握**

*   视图继承是一个关键概念。了解如何以及何时包含“主”布局将有助于您更快地编写站点代码，并使一次性页面更容易开发。
*   默认情况下，MVC 站点都是关于表现的。如果想要捕获数据，通常需要添加组件来接受响应、验证响应并正确处理响应。
*   使用 MVC，开发人员工具适合 NuGet 和包管理。这意味着学习这些系统是使用框架的关键，因为几乎所有的东西都将作为一个单独的库被引入。

# 理解请求

![](img/c2532ad9238adb96df09dfcd7da6ad41.png)

正如我上面提到的，MVC 中的请求与 Web 表单中的请求有很大不同。虽然 MVC 和 web 表单在生命周期的同一阶段处理请求，但是让 Web 服务器解释(并接受)post 是另一个挑战。回到 Web 表单的旧时代，您有可信任的请求对象(从技术上讲，这在 MVC 中是有的，但是框架为您抽象了一些细节)。这种 canyon mule 能够将用户的每一点信息发送到服务器或从服务器接收。你可以快速取出你需要的值，并把其余的存到内存中以备不时之需。

有了 MVC，事情就大不一样了。因为 MVC 是关于模块化和轻量级应用程序的，所以你必须从头开始构建每一点响应。这意味着您的控制器必须具有正确的动作属性，以便应用程序知道调用什么，您的模型需要更新以保存输入的数据，并且您需要确保正确验证所有响应。我发现这在我的学习中是一个挑战，因为我不习惯手动创建所有东西。经过大量实验(并使用一些在线表单模板)，我能够理解这个概念，并学习如何正确地将发布的数据接收到我的 MVC 应用程序中。

**关键要点**

*   使用 MVC，你的表单将从头开始创建。虽然这需要更多的工作，但是您可以确保您的应用程序尽可能的轻量级。
*   MVC 中的一切都是为了让控制器中发生一些事情。确保正确配置您的操作和结果对于您的应用程序正确处理请求至关重要。

**概念把握**

*   当你第一次开始使用 MVC 时，你通常有一个非常基本的模型。对于表单，您必须用适当的属性来更新您的模型/视图模型，以处理您的数据。这可能会违背您最初对数据处理方式的想法，所以请确保您完全理解它在您的场景中的作用。
*   请求与路由密切相关，所以要确保路由定义正确。

# 布局控件

![](img/23dcbf8434b21ee48ba24c6e422f1f97.png)

由于对事物的极简处理方式，MVC 就是对布局的完全控制。将这与 Web 表单“让我们从工具箱中拖动一个控件，并让它连接所有东西”的功能相比，您会很快看到一些非常大的差异。Web 表单是对现有组件的预连接，而 MVC 更多的是从零开始，只添加你需要的东西。

现在，在我开发 WF 的整个过程中，我从来没有真正喜欢过拖放控件，而是选择从头开始构建自己的布局。然而，我确实总是使用服务器端控件来构建我的设计，因为这使我能够从代码隐藏中访问控件。这几乎是每个开发人员的做法，并且是近 20 年来 web 开发的良好模型。

虽然 Web 窗体提供了简单的设计，但它也带来了大量的开销。所有这些服务器控件都具有视图状态、事件处理程序功能和自动生成的 id，可以运行数英里。虽然一些控件，如中继器和网格，提供了基于每个项目的设计选项，但整体设计非常简单，也非常有限。

有了 MVC，情况完全变了，所有的控制权都在开发人员和设计人员手中。设计者完全控制布局，允许他们使用许多内置的 HTML 助手来布局他们的页面，或者使用标准的 HTML 输入控件来获得更整洁的标记。使用显示模板可以轻松处理每个项目的布局，确保没有预先制作的表格布局会被注入到您的其他完美响应站点中。这意味着只有必要的元素被添加到视图中，没有任何 800 磅的大猩猩网络形式的行李。

**关键要点**

*   MVC 的目标是简单。这意味着开发人员可以自由地只添加他们需要的元素和控件。这减少了整个应用程序和页面大小，并极大地提高了性能。
*   可以用简单的 HTML 元素、HTML 助手或两者的组合来创建布局。这使得设计者可以自由地实现他们的设计，而不会与应用程序预先生成的输出相冲突。

**概念把握**

*   MVC 是一种最低限度的开发方法。这意味着任何设计需求都必须由开发人员手动包含。诸如支持 JavaScript、验证器和第三方库之类的东西需要包含在适当的视图中，如果布局依赖于它们的话。
*   让设计师在演示中自由漫游是一种非常强大的能力。您需要与它们密切合作，以便应用程序可以正确地实现它们的布局，并且仍然正常工作。

# 有用的东西

如果你想知道我使用的资源，这里有一个列表。当然还有很多东西，但这应该给你一个好的起点。

*   【ASP.NET MVC 文档
*   [微软 ASP.NET 文档](https://docs.microsoft.com/en-us/aspnet/#pivot=aspnet)
*   [plural sight ASP.NET MVC 5 培训路径](https://www.pluralsight.com/paths/mvc5)
*   [微软 NuGet 文档](https://docs.microsoft.com/en-us/nuget/)
*   [Kentico 12 MVC 文档](https://docs.kentico.com/k12/developing-websites/mvc-development-overview)

# 包扎

这篇文章是关于告诉你我希望在开始过渡到 MVC 之前就知道的事情。当然，这个过程比我介绍的要多，但是，这些是我有疑问的一些重要方面。如果你正在考虑将你的技能集转换到 MVC，我建议你现在就开始学习！无论是在线学习、书籍，还是在你旁边的 MVC-guru 的隔间里偷看，要点是开始。当你完成项目并获得更多经验时，时间很可能是最好的老师。这看起来像是一座要爬的大山，但是相信我，你能做到。最终，这都是 web 开发，也是开发人员工作的一部分。