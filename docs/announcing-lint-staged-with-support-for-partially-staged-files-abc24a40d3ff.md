# ğŸ‰å®£å¸ƒ lint-staged æ”¯æŒéƒ¨åˆ†æš‚å­˜æ–‡ä»¶

> åŸæ–‡ï¼š<https://medium.com/hackernoon/announcing-lint-staged-with-support-for-partially-staged-files-abc24a40d3ff>

ä¸‰å¹´å‰ï¼Œæˆ‘å‘ä¸–ç•Œä»‹ç»äº† lint-stagedã€‚æˆªè‡³ä»Šå¤©ï¼Œåœ¨ 81 å‘å¸ƒä¹‹åï¼Œå®ƒå·²ç»å‡ºç°åœ¨[è¶…è¿‡ 55000 ä¸ª GitHub åº“](https://github.com/okonet/lint-staged/network/dependents)çš„ä¾èµ–å›¾ä¸­ï¼Œå¹¶ä¸”åœ¨ NPM å·²ç»è¶…è¿‡äº†[500000 çš„å‘¨ä¸‹è½½é‡ï¼](https://www.npmjs.com/package/lint-staged)

![](img/551d185103dbd2909fc8a0cc29e2f7ea.png)

å½“æˆ‘åœ¨ 2015 å¹´å‘å¸ƒ lint-staged æ—¶ï¼Œæˆ‘ä»æœªæƒ³åˆ°å®ƒä¼šæˆä¸ºå¦‚æ­¤å—æ¬¢è¿çš„å·¥å…·ã€‚

## ä¸€ä¸ªæˆ‘èŠ±äº†ä¸¤å¹´æ—¶é—´è§£å†³çš„é—®é¢˜

åœ¨ lint-staged è¢«å¼•å…¥åˆ°[react-boilerplate](https://github.com/react-boilerplate/react-boilerplate)â€”â€”ç”±[https://github.com/okonet/lint-staged/issues/62](https://medium.com/u/908fb8fea30c#62 from GitHub. <a class=)

æˆ‘è¯•ç€è§£å†³è¿™ä¸ªé—®é¢˜å‡ æ¬¡éƒ½æ²¡æœ‰æˆåŠŸã€‚ä¸Šä¸€æ¬¡æœ€æ¥è¿‘çš„å°è¯•æ˜¯å¤§çº¦ä¸€å¹´å‰ï¼Œåœ¨å‰å¾€ 2018 å¹´çš„ç«è½¦ä¸Šï¼Œæˆ‘ä¸¾è¡Œäº†ä¸€æ¬¡å…³äº lint-staged çš„æ¼”ç¤ºã€‚

ä¸å¹¸çš„æ˜¯ï¼Œå°½ç®¡æˆ‘èŠ±äº†å‡ ä¹å‡ å¤©æ—¶é—´ç ´è§£å®ƒï¼Œæˆ‘è¿˜æ˜¯æ— æ³•è§£å†³å®ƒã€‚è¿™é¡¹å·¥ä½œä»ç„¶æœ‰ä¸€äº›ç§¯æçš„æˆæœ:

1.  æˆ‘åœ¨ä¼šè®®æœŸé—´é‡åˆ°äº†ä¸€äº›äººï¼Œä»–ä»¬é¼“åŠ±å¹¶å¸®åŠ©æˆ‘ç»§ç»­å°è¯•(æ„Ÿè°¢[Juho vepslinen](https://medium.com/u/a82419fa03ca?source=post_page-----abc24a40d3ff--------------------------------)ã€ [Michel Weststrate](https://medium.com/u/de4496bfa1e2?source=post_page-----abc24a40d3ff--------------------------------) å’Œ Nejc Zdovc)ã€‚
2.  æˆ‘å†™äº†å¾ˆå¤šæµ‹è¯•ï¼Œæ‰€ä»¥åš TDD å’Œå°è¯•ä¸åŒçš„å®ç°æ€æƒ³å˜å¾—æ›´å®¹æ˜“äº†(æˆ‘åšäº†å¾ˆå¤š)ã€‚

## ğŸ‰å¼•å…¥ lint é˜¶æ®µ v8

ä»Šå¤©ï¼Œåœ¨ä¸¤å¹´å¤šå’Œ [138 æ¬¡æäº¤](https://github.com/okonet/lint-staged/pull/75/commits)ä¹‹åï¼Œæˆ‘éå¸¸å…´å¥‹åœ°ç»ˆäºå‘å¸ƒäº† lint-staged çš„ç¬¬ 8 ç‰ˆï¼Œå®ƒæ”¯æŒéƒ¨åˆ†æš‚å­˜æ–‡ä»¶ï¼

å®ƒä½¿ç”¨ä»¥ä¸‹ç®—æ³•:

1.  åœ¨è¿è¡Œ linters ä¹‹å‰ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰éƒ¨åˆ†å£°æ˜çš„æ–‡ä»¶(å³æäº¤ç´¢å¼•å’Œå·¥ä½œå‰¯æœ¬éƒ½æœ‰å˜åŒ–)
2.  éšè—å¹¶ä»å·¥ä½œå‰¯æœ¬ä¸­åˆ é™¤æ‰€æœ‰ä¸åœ¨æäº¤ç´¢å¼•ä¸­çš„æ–‡ä»¶
3.  å¯¹è¿™äº›æ–‡ä»¶æ‰§è¡Œå‘½ä»¤(linters å’Œ formatters)
4.  å°†æ ¼å¼åŒ–ç¨‹åºæ›´æ”¹æ·»åŠ åˆ°ç´¢å¼•ä¸­(é…ç½®ä¸­çš„å•ç‹¬ä»»åŠ¡)
5.  å¦‚æœæ‰€æœ‰ linters éƒ½ä»¥é›¶ä»£ç é€€å‡º(å³æˆåŠŸ)ï¼Œåˆ™æ¢å¤éšè—çš„å·¥ä½œå‰¯æœ¬çŠ¶æ€ã€‚å¦‚æœè¿è¡Œ linters æ—¶å‡ºç°é”™è¯¯ï¼Œæ¢å¤éšè—çš„å·¥ä½œå‰¯æœ¬ã€‚
6.  æ¯”è¾ƒæ–°æäº¤ç´¢å¼•å’Œå·¥ä½œå‰¯æœ¬*å¯¹å·¥ä½œå‰¯æœ¬åº”ç”¨å°½å¯èƒ½å¤šçš„æ ¼å¼æ›´æ”¹*ã€‚å¦‚æœæœ‰å†²çªå—ï¼Œä¸¢å¼ƒæ ¼å¼åŒ–ç¨‹åºçš„æ›´æ”¹ã€‚éšè—çš„ç”¨æˆ·ä¿®æ”¹åº”è¯¥æ€»æ˜¯ä¼˜å…ˆäºæ ¼å¼åŒ–ç¨‹åºã€‚

è¿™æ˜¯å®ƒå®é™…è¿è¡Œçš„æ ·å­:

[](https://asciinema.org/a/199934) [## ğŸš«ğŸ’©lint-stagedï¼Œæ”¯æŒéƒ¨åˆ†æš‚å­˜æ–‡ä»¶

### è¿™æ˜¯éƒ¨åˆ†æš‚å­˜æ–‡ä»¶æ”¯æŒåœ¨ä¸­å¦‚ä½•å·¥ä½œçš„æ¼”ç¤ºğŸš«ğŸ’©æ£‰ç»’é˜¶æ®µã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è§â€¦

asciinema.org](https://asciinema.org/a/199934) 

æœ€é‡è¦çš„æ˜¯ï¼Œy *ä½ ä¸éœ€è¦æ”¹å˜ä½ çš„é…ç½®æ¥è·å¾—å¯¹éƒ¨åˆ†æš‚å­˜æ–‡ä»¶çš„æ”¯æŒï¼*è¯¥ç‰ˆæœ¬å”¯ä¸€çš„â€œçªç ´æ€§å˜åŒ–â€æ˜¯èŠ‚ç‚¹ 8.6 çš„è¦æ±‚ã€‚

```
npm install --save-dev lint-staged@latest
```

æˆ‘å·²ç»åœ¨æˆ‘æ‰€æœ‰çš„é¡¹ç›®ä¸­ä½¿ç”¨äº†ä¸€ä¸ªå¤šæœˆï¼Œå¹¶ä¸”è®¤ä¸ºå®ƒå¾ˆç¨³å®šã€‚å¦‚æœä½ ç¢°å·§é‡åˆ°å®ƒçš„é—®é¢˜ï¼Œè¯·åœ¨ GitHub ä¸ŠæŠ¥å‘Šå¹¶å¸®åŠ©æˆ‘è§£å†³ã€‚

# å¤–å–é£Ÿå“

## ä¸è¦æ”¾å¼ƒä½ çš„æƒ³æ³•ï¼

äººä»¬ä¸€ç›´åœ¨è¯´ï¼Œæˆ‘è¯•å›¾è§£å†³çš„é—®é¢˜æ˜¯ä¸å¯èƒ½è§£å†³çš„ã€‚æˆ‘çš„æŸä¸ªéƒ¨åˆ†ä¸€ç›´å¦è®¤å®ƒâ€¦æˆ‘å­¦åˆ°çš„ä¸€ä»¶äº‹æ˜¯ï¼Œå¦‚æœä½ ç›¸ä¿¡å®ƒï¼Œå®ƒæ˜¯å€¼å¾—å°è¯•çš„ã€‚

## å¼€æºæ˜¯â¤ï¸

æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆæ˜¯åŸºäºæœ€åˆé—®é¢˜çš„[è¯„è®ºä¸­åˆ†äº«çš„æ„è§å’Œæƒ³æ³•ï¼Œå¦‚æœæ²¡æœ‰æ¥è‡ªå…¨çƒäººæ°‘çš„å·¨å¤§æ”¯æŒå’Œé¼“åŠ±ï¼Œè¿™æ˜¯ä¸å¯èƒ½çš„ã€‚æˆ‘è¿˜è¦æ„Ÿè°¢å¸®åŠ©æˆ‘ç»´æŠ¤è¿™ä¸ªé¡¹ç›®çš„è´¡çŒ®è€…:](https://github.com/okonet/lint-staged/issues/62)[è‹å“ˆæ–¯Â·å¡å…°æ€](https://github.com/sudo-suhas)å’Œ[å¢å¤«è’‚Â·ç»´å…°è¾¾](https://github.com/luftywiranda13)ã€‚

## å¼€æºæ˜¯ğŸ’©

äº‹å®ä¸Šï¼Œæˆ‘èŠ±äº†ä¸¤å¹´å¤šçš„æ—¶é—´æ‰æ‰¾åˆ°è§£å†³æ–¹æ¡ˆï¼Œè¿™å¾ˆå¯ç¬‘ï¼Œä½†è¿™åˆè¯æ˜äº†è¿™ç§å·¥ä½œçš„åˆç†æ€§ã€‚æˆ‘èŠ±äº†æ— æ•°çš„æ—¶é—´å¯»æ‰¾æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆã€‚æˆ‘åˆèŠ±äº†å‡ å¤©æ—¶é—´æ¥å®Œæˆå’Œæ¸…ç†ä»£ç ï¼Œåˆå¹¶æ¥è‡ªä¸Šæ¸¸çš„æ›´æ”¹ï¼Œå¹¶æ’°å†™è¿™ç¯‡åšæ–‡ã€‚å°±åœ¨è¿‡å»çš„ä¸¤ä¸ªæœˆé‡Œï¼Œæˆ‘èŠ±äº† 50 å¤šä¸ªå°æ—¶åœ¨ä¸Šé¢ã€‚è€ƒè™‘åˆ°æˆ‘æ˜¯ä¸¤ä¸ªå­©å­çš„çˆ¶äº²ï¼ŒæŠ•å…¥è¿™ä¹ˆå¤šæ—¶é—´å¯¹æˆ‘æ¥è¯´å˜å¾—è¶Šæ¥è¶Šéš¾ä»¥è‡ªåœ†å…¶è¯´ã€‚

**å¦‚æœä½ è®¤ä¸º lint-staged æœ‰ç”¨ï¼Œè¯·è€ƒè™‘** [**åœ¨å¼€æ”¾é›†ä½“**](https://opencollective.com/lint-staged) **èµ„åŠ©è¯¥é¡¹ç›®ã€‚**