# ä½¿ç”¨ Raspberry Pi +ç¡¬ç›˜å¤‡ä»½æ‚¨çš„ YouTube æ’­æ”¾åˆ—è¡¨

> åŸæ–‡ï¼š<https://medium.com/hackernoon/backup-up-your-youtube-playlists-with-a-raspberry-pi-hdd-7aa332b2c5a6>

æœ¬æŒ‡å—å±•ç¤ºäº†å¦‚ä½•ä¸ºä½ çš„ [YouTube](https://hackernoon.com/tagged/youtube) æ”¶è—å¤¹æˆ–ä»»ä½•å…¶ä»–æ’­æ”¾åˆ—è¡¨è®¾ç½®æœ¬åœ°[å¤‡ä»½](https://hackernoon.com/tagged/backup)ã€‚å®ƒåŒ…æ‹¬ä¸€ç§ä½¿ç”¨ cron ä½œä¸šè‡ªåŠ¨æ›´æ–°å¤‡ä»½æ•°æ®åº“çš„æ–¹æ³•ã€‚

![](img/4500684ca1613ad813a4c8988aea7af0.png)

Nothing like a fresh hard drive & Raspberry Pi

è¿™ä¸ªæŒ‡å—æœ‰ä¸¤ä¸ªéƒ¨åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»å¤´å¼€å§‹è®¾ç½® Piã€‚ç„¶åï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•å®‰è£…è¿™ä¸ªåº“ï¼Œå¹¶è®¾ç½® cron ä½œä¸šæ¥è‡ªåŠ¨ä¸‹è½½æ’­æ”¾åˆ—è¡¨ä¸­çš„æ–°è§†é¢‘ã€‚æˆ‘ç”¨çš„æ˜¯å¤–ç½®ç¡¬ç›˜ï¼Œæ‰€ä»¥ä¹Ÿæœ‰è®¾ç½®è¯´æ˜ã€‚

> æ³¨æ„:ä»¥ä¸‹å†…å®¹å·²ç»åœ¨ Raspberry Pi 3 ä¸Šè¿›è¡Œäº†æµ‹è¯•

# ä»å¤´å¼€å§‹è®¾ç½® Pi

## 1.æ ¼å¼åŒ–è¿·ä½  SD å¡å¹¶å®‰è£… Raspbian æ˜ åƒ

è¿™å¯ä»¥ç”¨èš€åˆ»æœºæ¥å®Œæˆ:

[](https://etcher.io/) [## æ ‘è„‚èš€åˆ»æœº

### å®‰å…¨è½»æ¾åœ°å°†å›¾åƒåˆ»å½•åˆ° SD å¡å’Œ USB é©±åŠ¨å™¨ã€‚

etcher.io](https://etcher.io/) 

ä¸‹è½½å®Œé‚£ä¸ªè½¯ä»¶åï¼Œ[è·å–ä¸€ä¸ª Raspbian](https://www.raspberrypi.org/downloads/raspbian/) ç‰ˆæœ¬ã€‚è¿™æ˜¯â€œåŸºé‡‘ä¼šå®˜æ–¹æ”¯æŒçš„æ“ä½œç³»ç»Ÿâ€ã€‚æˆ‘ç”¨çš„æ˜¯ Raspbian Stretch Lite:

![](img/07289b54e835c29a208bd90b91fba954.png)

[https://www.raspberrypi.org/downloads/raspbian/](https://www.raspberrypi.org/downloads/raspbian/)

ä½¿ç”¨èš€åˆ»æœºå°†å›¾åƒåˆ»å½•åˆ° SD å¡ä¸Šã€‚è¿™ä¹Ÿå°†æ ¼å¼åŒ–ç£ç›˜ï¼Œå› æ­¤ç£ç›˜ä¸Šçš„æ‰€æœ‰å†…å®¹éƒ½å°†åœ¨è¿™ä¸€æ­¥è¢«é”€æ¯ã€‚*æ³¨:å¦‚æœæ‚¨çš„ SD å¡æŸåæˆ–æ— æ³•æ­£å¸¸å·¥ä½œï¼Œåœ¨æ­¤è¿‡ç¨‹ä¹‹å‰ä½¿ç”¨ä¸åŒçš„å·¥å…·æ ¼å¼åŒ– SD å¡å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚*

![](img/ae6ec5bfbf26be3c7c775c523b550b1f.png)

[https://etcher.io/](https://etcher.io/)

## 2.å°† SD å¡æ”¾å…¥ Raspberry Piï¼Œå°†å…¶è¿æ¥åˆ°å¸¦æœ‰ HDMI çš„æ˜¾ç¤ºå™¨ï¼Œç„¶åæ’å…¥ç”µæº

![](img/f1cd792e21e8e64f32e35ab3c8bb88e7.png)

Itâ€™s alive!

## **3ã€‚ç™»å½•ï¼Œé…ç½®å¹¶å¯ç”¨ SSH**

ä½¿ç”¨é»˜è®¤ç™»å½•å‡­æ®:

```
username = pi
password = raspberry
```

è¿›å…¥ç»ˆç«¯åï¼Œé€šè¿‡é”®å…¥ä»¥ä¸‹å‘½ä»¤æ‰“å¼€é…ç½®å¯¹è¯æ¡†

```
sudo raspi-config
```

![](img/0db9db55059d6908ba8505de779af03f.png)

åœ¨è¿™é‡Œï¼Œæ‚¨åº”è¯¥æ‰§è¡Œä»¥ä¸‹æ“ä½œ:

*   **æ›´æ”¹å¯†ç **
*   **é…ç½® WiFi ç½‘ç»œ**
*   **å¯ç”¨ SSH(åœ¨â€œæ¥å£é€‰é¡¹â€ä¸­)**
*   **æ›´æ”¹é”®ç›˜å¸ƒå±€(åœ¨â€œæœ¬åœ°åŒ–é€‰é¡¹â€ä¸­)**

å¦‚æœé”®ç›˜å¸ƒå±€ç»™ä½ å¸¦æ¥é—®é¢˜ï¼Œé‚£ä¹ˆå°è¯•é€šè¿‡æ·»åŠ  `XKBLAYOUT="us"`åˆ°`/etc/default/keyboard`æ¥æ”¹å˜å®ƒ

WiFi ç½‘ç»œç»™ä½ å¸¦æ¥äº†é—®é¢˜ï¼Œè¯•ç€åœ¨`/etc/wpa_supplicant/wpa_supplicant.conf`çš„æœ«å°¾æ·»åŠ ä»¥ä¸‹å‡ è¡Œ:

```
network={     
    ssid="WiFi network name"
    psk="WiFi network password" 
}
```

ç„¶åè¿è¡Œ`wpa_cli -i wlan0 reconfigure`ã€‚

## 4.åšä¸€äº›åŸºæœ¬çš„å‡çº§

æ›´æ–°æ“ä½œç³»ç»Ÿå¹¶ä¸‹è½½ vimã€‚

```
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install vim
```

> æ³¨æ„:å¯¹äºæˆ‘çš„è®¾ç½®ï¼Œæˆ‘ä½¿ç”¨è¿™ä¸ªå‘è¡Œç‰ˆ:[https://github.com/jjhelmus/berryconda](https://github.com/jjhelmus/berryconda)å®‰è£…äº† Python 3.6ã€‚Anaconda æ˜¯ä¸€ä¸ªå¾ˆæ£’çš„ python å‘è¡Œç‰ˆï¼Œå®ƒä½¿å¾—å®‰è£…åƒ pandas å’Œ matplotlib è¿™æ ·çš„æ•°æ®ç§‘å­¦åº“å˜å¾—å¾ˆå®¹æ˜“ã€‚

# å°† YouTube æ’­æ”¾åˆ—è¡¨å¤‡ä»½åˆ°ç¡¬ç›˜

ç°åœ¨ï¼Œæˆ‘ä»¬å°†å®‰è£…å·¥å…·å¹¶è®¾ç½®ä¸€ä¸ªè‡ªåŠ¨åŒ–ä½œä¸šæ¥å¤‡ä»½ä¸€äº› YouTube æ’­æ”¾åˆ—è¡¨ã€‚ä½ åªéœ€è¦æ’­æ”¾åˆ—è¡¨çš„ç½‘å€ã€‚

![](img/12b3ec1a149fbca0a1ad0655375e26d9.png)

è§†é¢‘è¢«ä¸‹è½½åˆ°è®¾å¤‡ä¸Šã€‚å› ä¸ºæˆ‘æœ‰å¾ˆå¤šæ”¶è—ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©å°†è¿™äº›æ–‡ä»¶ä¿å­˜åˆ°å¤–ç½®ç¡¬ç›˜ä¸Šã€‚è¿™ç§å¢åŠ çš„å¤æ‚æ€§è®©æˆ‘æœ‰äº›éš¾è¿‡ï¼Œæ‰€ä»¥æˆ‘åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­åŠ å…¥äº†ä½¿ç”¨ç¡¬ç›˜çš„è¯¦ç»†æ­¥éª¤ã€‚

## 1.å®‰è£… youtube-dl

è¿™ä¸ª[å¼€æºå·¥å…·](https://github.com/rg3/youtube-dl)å¯ä»¥å®‰è£…:

```
sudo curl -L [https://yt-dl.org/downloads/latest/youtube-dl](https://yt-dl.org/downloads/latest/youtube-dl) -o /usr/local/bin/youtube-dl
sudo chmod a+rx /usr/local/bin/youtube-dl
```

é”®å…¥`youtube-dl --help`æŸ¥çœ‹é€‰é¡¹åˆ—è¡¨:

![](img/005b827295d2dd6cc95827a285b44cb6.png)

There are a lot moreâ€¦ try for yourself to see

## 2.è¿æ¥å¹¶å®‰è£…ç¡¬ç›˜

æ­¤æ­¥éª¤ä»…é€‚ç”¨äºä½¿ç”¨å¤–ç½®ç¡¬ç›˜å­˜å‚¨è§†é¢‘çš„æƒ…å†µã€‚å¦‚æœä½ åªæ˜¯ä½¿ç”¨ SD å¡ï¼Œç°åœ¨è·³åˆ°ä¸‹ä¸€èŠ‚ã€‚

å¯¹æˆ‘æ¥è¯´ï¼Œæˆ‘å¿…é¡»å®‰è£…ä¸€ä¸ªåŒ…æ¥å…è®¸æˆ‘çš„ NTFS é©±åŠ¨å™¨çš„å†™è®¿é—®ã€‚æˆ‘æ˜¯è¿™æ ·åšçš„:

```
sudo apt-get install ntfs-3g
```

ç„¶åæ’å…¥é©±åŠ¨å™¨å¹¶æ‰¾åˆ°å®ƒçš„è·¯å¾„ã€‚æ‚¨åº”è¯¥å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤çœ‹åˆ°è¿™ä¸€ç‚¹:

```
sudo blkid
```

æˆ‘çš„æ˜¯åœ¨`/dev/sda1`ï¼Œæ‰€ä»¥æ— è®ºä½ åœ¨ä¸‹é¢çš„æ–‡æœ¬ä¸­çœ‹åˆ°ä»€ä¹ˆï¼Œè¯·ç”¨ä½ çš„å€¼æ›¿æ¢å®ƒã€‚

ç„¶åï¼Œæˆ‘ä¸ºè¯¥é©±åŠ¨å™¨åˆ›å»ºäº†ä¸€ä¸ªæŒ‚è½½ç‚¹ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
sudo mkdir /mnt/hdd-1
```

å¹¶åœ¨ç£ç›˜ä¸Šå®‰è£…äº†:

```
sudo mount /dev/sda1 /mnt/hdd-1
```

> æ­¤æ—¶ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿä»é©±åŠ¨å™¨è¯»å–æ•°æ®ï¼Œä¾‹å¦‚`sudo ls /mnt/hdd-1`ï¼Œä¹Ÿå¯ä»¥å‘é©±åŠ¨å™¨å†™å…¥æ•°æ®ï¼Œä¾‹å¦‚`sudo echo "hello world!" > /mnt/hdd-1/test-note.txt`

## 3.åˆ¶ä½œä¸€ä¸ªè„šæœ¬æ¥ä¸‹è½½è§†é¢‘

ç°åœ¨è®©æˆ‘ä»¬æ„å»ºä¸€ä¸ªå¯ä»¥ä¸‹è½½è§†é¢‘çš„ç®€å• shell è„šæœ¬ã€‚æˆ‘å°†æŠŠæ–‡ä»¶ä¿å­˜åœ¨`/home/pi/alex-videos`(æˆ–ç¡¬ç›˜ä¸Šçš„`/mnt/hdd-1/alex-videos`)ä¸­ã€‚

è½¬åˆ°ä¸»æ–‡ä»¶å¤¹å¹¶åˆ›å»ºæ–°ç›®å½•:

```
sudo mkdir alex-videos
```

ç°åœ¨åˆ¶ä½œè„šæœ¬:

```
>>> cat > youtube-playlist-backup.sh
cd /home/pi/alex-videos
/usr/local/bin/youtube-dl -w -i --max-downloads 2 --write-info-json {{your playlist url}}
```

ç¡®ä¿ç”¨ URL æ›¿æ¢`{{your playlist url}}`ã€‚

é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨å¯ä»¥åªä½¿ç”¨`youtube-dl`ä½œä¸ºå‘½ä»¤ï¼Œä½†æ˜¯å½“ä½¿ç”¨ cron ä½œä¸šæ—¶ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨å¯æ‰§è¡Œæ–‡ä»¶çš„å®é™…è·¯å¾„ã€‚

ä½¿ç”¨ä»¥ä¸‹å†…å®¹ä¸ºè„šæœ¬æä¾›æ ‡å‡†æƒé™:

```
chmod +x youtube-playlist-backup.sh
```

ç„¶åè¿è¡Œå®ƒè¿›è¡Œæµ‹è¯•ã€‚å®ƒåº”è¯¥åªä¸‹è½½æœ€è¿‘æ·»åŠ åˆ°æ’­æ”¾åˆ—è¡¨ä¸­çš„ä¸¤ä¸ªå†…å®¹:

```
./youtube-playlist-backup.sh
```

å¦‚æœè¿™æœ‰æ•ˆï¼Œé‚£ä¹ˆä½ å°±å·®ä¸å¤šå®Œæˆäº†ã€‚ä½ åªéœ€è¦å¤‡ä»½å…¶ä½™çš„è§†é¢‘ï¼Œç„¶åè®¾ç½®è‡ªåŠ¨æ›´æ–°ã€‚

è¯·è®°ä½ï¼Œå¤‡ä»½æ•´ä¸ªæ’­æ”¾åˆ—è¡¨éœ€è¦ä¸€æ®µæ—¶é—´ï¼Œå¹¶ä¸”ä¼šå ç”¨å¤§é‡å¸¦å®½ã€‚ä¸ºæ­¤ï¼Œæ‰“å¼€ shell è„šæœ¬å¹¶å¢åŠ  max-downloads é€‰é¡¹ã€‚ä¾‹å¦‚:

```
/usr/local/bin/youtube-dl -w -i --max-downloads 2000 --write-info-json {{your playlist url}}
```

ç„¶åé‡æ–°è¿è¡Œ shell è„šæœ¬æ¥æ‰§è¡Œå¤‡ä»½ã€‚

## 4.ä½¿ç”¨ cron è®¾ç½®è‡ªåŠ¨æ›´æ–°

å…³äºè¿™ä¸ªè®¾ç½®ï¼Œæˆ‘æœ€å–œæ¬¢çš„éƒ¨åˆ†æ˜¯æˆ‘çš„ Pi å°†æ¯å¤©è‡ªåŠ¨æ‰§è¡Œå¤‡ä»½ã€‚è¦è®¾ç½®è¿™ä¸€ç‚¹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ cron ä½œä¸šæ¥è¿è¡Œæ‚¨å·²ç»è®¾ç½®å¥½çš„ shell è„šæœ¬ã€‚æ³¨æ„ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ youtube-dl è°ƒç”¨ä¸­ä½¿ç”¨äº†`-w`é€‰é¡¹ï¼Œæ‰€ä»¥è„šæœ¬ä¼šçŸ¥é“è·³è¿‡å·²ç»ä¸‹è½½çš„è§†é¢‘ã€‚

é¦–å…ˆï¼Œç¡®ä¿ **max-downloads å‚æ•°è®¾ç½®ä¸ºä¸€ä¸ªåˆç†çš„ä½**å€¼ã€‚è¿™æ˜¯ä¸ºäº†é¿å…èŠ±è´¹å¤§é‡çš„æ—¶é—´æ¥é‡å¤æ£€æŸ¥å·²ç»ä¸‹è½½çš„è§†é¢‘ã€‚ç¡®ä¿è®¾ç½®å¾—è¶³å¤Ÿé«˜ï¼Œè¿™æ ·ä½ å°±ä¸ä¼šé”™è¿‡ä»»ä½•æ–°è§†é¢‘ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ åœ¨ä¸€ä¸ªè®¾ç½®ä¸­æ·»åŠ äº†ä¸€å †è§†é¢‘ã€‚æ‚¨çš„ä»·å€¼å°†å–å†³äºæ‚¨æ›´æ–°å¤‡ä»½çš„é¢‘ç‡ä»¥åŠåœ¨ç»™å®šè®¾ç½®ä¸‹æ‚¨å€¾å‘äºæ·»åŠ å¤šå°‘è§†é¢‘ã€‚å› ä¸ºæˆ‘æ¯å¤©éƒ½ä¼šå¤‡ä»½æˆ‘çš„æ”¶è—å¤¹æ’­æ”¾åˆ—è¡¨ï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©å°†æœ€å¤§ä¸‹è½½æ¬¡æ•°è®¾ç½®ä¸º 20ã€‚

ç„¶åè®¾ç½® cron ä½œä¸šã€‚ç”¨ä»¥ä¸‹æ–¹å¼æ‰“å¼€ cron:

```
crontab -e
```

ä½¿ç”¨ä½ æœ€å–œæ¬¢çš„ç¼–è¾‘å™¨ï¼Œåªè¦æ˜¯ vim)

æ·»åŠ ä»¥ä¸‹ä¸€è¡Œ:

```
0 11 * * * /home/pi/youtube-playlist-backup.sh > /home/pi/cron.youtube-playlist-backup.log 2>&1
```

è¿™å°†åœ¨æ¯å¤© 11 ç‚¹è¿è¡Œæ›´æ–°ã€‚

ç¡®ä¿åœ¨è¿™ä¸ªå‘½ä»¤ä¹‹åè‡³å°‘ç•™ä¸‹ä¸€ä¸ªç©ºè¡Œ(è¿™æ˜¯ä¸€ä¸ªå¥‡æ€ªçš„ cron è§„åˆ™/é™·é˜±),ç„¶åä¿å­˜å¹¶é€€å‡ºæ–‡ä»¶ã€‚

å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç¡¬ç›˜è®¾ç½®ï¼Œæˆ‘ä¼šå»ºè®®ä½ åšä¸€äº›æ›´å¤æ‚çš„äº‹æƒ…ï¼Œè®©ä½ åœ¨ä¸€å¤©ä¸­çš„å¤§éƒ¨åˆ†æ—¶é—´é‡Œä¸å®‰è£…ç¡¬ç›˜ï¼Œè€Œè„šæœ¬ä¹Ÿä¸è¿è¡Œã€‚æˆ‘åœ¨æˆ‘çš„ shell è„šæœ¬ä¸­ä½¿ç”¨äº†ä»¥ä¸‹ä»£ç :

```
sudo mount /dev/sda1 /mnt/hdd-1
cd /mnt/hdd-1/alex-videos/
/usr/local/bin/youtube-dl -w -i --max-downloads 20 --write-info-json [https://www.youtube.com/playlist?list=FLHfRYuzfDERvdP5eVz2jupQ](https://www.youtube.com/playlist?list=FLHfRYuzfDERvdP5eVz2jupQ)
cd /
sudo umount /mnt/hdd-1
```

æœ€åï¼Œç­‰å¾… cron ä½œä¸šè¿è¡Œï¼Œå¹¶ç¡®ä¿æ—¥å¿—è¾“å‡º(`cron.youtube-playlist-backup.log`)çœ‹èµ·æ¥æ­£å¸¸ã€‚

å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œé‚£ä¹ˆ**ä½ å°±å®Œæˆäº†**ï¼ğŸ’¥å˜£ï¼

æ„Ÿè°¢é˜…è¯»ğŸ‘ï¼Œæ­å–œä½ å®Œæˆäº†æ‰€æœ‰çš„è®¾ç½®ğŸ‰

å¦‚æœä½ æƒ³èŠå¤©ï¼Œä½ å¯ä»¥åœ¨æ¨ç‰¹ä¸Šè”ç³»æˆ‘:

[](https://twitter.com/agalea91) [## äºšå†å…‹æ–¯Â·åŠ åˆ©äºš(@agalea91) |æ¨ç‰¹

### äºšå†å…‹æ–¯Â·åŠ åˆ©äºšçš„æœ€æ–°æ¨æ–‡(@agalea91)ã€‚@Ayima çš„æ•°æ®åˆ†æå¸ˆå’Œè‡ªç§°çš„è„šæœ¬çŒ´å­ğŸ“Šç†ç§‘ç¡•å£«â€¦

twitter.com](https://twitter.com/agalea91)