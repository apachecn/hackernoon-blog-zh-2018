# 纸质钱包的基础知识

> 原文：<https://medium.com/hackernoon/basics-of-paper-wallets-a40639dec8b2>

![](img/896cdd2d610023819fb5f61029577179.png)

[区块链](https://hackernoon.com/tagged/blockchain)革命一直在快速发展，加密货币现在正被广泛而明智地使用。任何[加密货币](https://hackernoon.com/tagged/cryptocurrency)交易基本上都需要一个地址和一个私钥来发送或接收。您是否知道，您不需要在区块链上使用或注册地址就可以在其中接收或发送资金。让我们更深入地研究地址和私钥的概念，以理解它们是如何工作的，并了解有关纸钱包的所有信息。

在比特币的情况下，地址是一个 **Base58** 编码字符串，在**以太坊**中是一个 40 个字符长的**十六进制(Base16)** 数字。区块链生态系统的任何地址都是通过特定的数学运算(这是任何哈希算法的标准)后由私钥导出的。因此，如果您遵循为特定区块链创建地址的模式，可以在没有任何互联网连接的情况下在本地生成地址和私钥组合。哈希中使用的算法是以这样一种方式开发的，即在私钥和公钥(后来转换为地址)之间有一个特定的数学关系。这种关系有助于区块链验证是否使用了特定的私钥来签署源自特定地址的交易，因为您可以在验证过程中共享该私钥。纸质钱包是使用区块链在其分类帐上生成地址的步骤生成的钱包。

许多网站都提供纸质钱包，它们保证一切都在本地完成，并且不会将你的私人密钥或任何此类敏感数据发送到互联网上。提供纸钱包的网站甚至会要求你在创建纸钱包时关闭互联网，或者在本地下载网站源代码，并在本地主机上运行，以开发地址，这样你的数据是安全的，你不必相信来历不明的东西。你可以用几行简单的代码开发一个纸质钱包，我将给出一个基于**比特币地址创建**的例子。

**创建比特币地址的第一步**是创建私钥。现在，由于 SHA256 是一种标准的散列算法，所以您更喜欢哪种编码语言并不重要，您可以找到所有可用语言的 SHA 库。SHA256 是一种单向散列技术，不可能反转散列值。您必须尝试所有可能的输入，并将输出与生成的散列进行匹配，以获得散列值的输入值。如果您通过 SHA 输入相同的内容，您将始终获得相同的输出，这就是它的美妙之处，也是它在区块链有多个使用案例的原因。要创建私钥，您可以使用您的语言中可用的 KeyGenerator 库生成一个随机散列，或者您可以选择一组随机选取的单词或密码短语，并通过 SHA256 函数传递它。无论输入的大小，它将始终产生一个长度为 64 个字符或更少的值，可以通过前导“0”来固定。它将是一个十六进制数，其中每 2 个字符代表 8 个位或一个字节，因此 64 个字符总共构成 256 个位(SHA256 的名称由此而来)。

下一步是将私钥转换成字节数组，并让它通过一个椭圆曲线乘法算法，在这种情况下是 **secp256k1。**这又是一个我们不需要担心的数学计算，因为这些函数将在您的语言安全或加密提供商(库)中提供。该算法是单向加密，并且输入(即私钥)不能被公钥恢复。这将是我们从私钥中导出的公钥，该公钥稍后将用于生成地址。

接下来的一点可能会有点混乱，所以我会尽可能解释清楚。比特币旧的地址生成标准是 P2PKH，即“**支付公钥哈希**”。顾名思义，这是一个简单的公共密钥的散列派生和支付，这意味着这个散列可以用作地址。经过多次软分叉，即软件升级，并提供更好的安全性和新功能，比特币区块链已经转向一个更新的地址生成标准，后来被称为 P2SH 或“支付脚本哈希”。顾名思义，这个散列不像 P2PKH 中的公钥，而是一个脚本散列。

要生成 P2PKH 密钥，您必须获得公钥的**hash 160**(sha 256 和 RIPEMD160 的组合)。首先使用 **SHA256** 对公钥进行散列，随后使用散列值的 **RIPEMD160** 。这将使 RIPEMD160 的输出位数从 256 位减少到 160 位。现在，如你所见，8 用二进制写成是 1000，但用十进制写成是 8。16 是十进制的 16，而‘F’是十六进制的(以 16 为基数)。您知道 number 的基值越高，数值的位数就越少。因此，如果我们捐赠比 16 大一个字符的数字，地址中的字符数将会更少，因此会产生混淆，害怕遗漏任何字符。

# **例子**

值" **20"** 在十六进制中可以表示为" **14"** ，因为十六进制在由(0–9，A-F)表示的单个字符中包含从 0 到 15 的 16 个值。如果我们将字母表中的字符增加到字符“K ”,我们将得到值 20 作为“K”。

现在，我们在编码格式中也有更高的基数，我们有 Base64，它包含从 0 到 9，a-z，A-Z 和+，/。所以 a-z 给出了前 26 个字符，小写字母 A-Z 给出了另外 26 个值，总共 52 个字符。现在，0–9 再给你 10 个字符，加上“+”和“/”，最后总共是 64 个字符，表示 0–63 之间的值，形成 Base64。由于如果私钥不在你身边，比特币或任何区块链地址都无法使用，因此将资金发送到错误的地址可能会使你在有生之年甚至两辈子都无法找回比特币，因为有人获得该地址的机会非常小。因此，需要小心处理这些地址，并采取必要的预防措施。比特币开发者通过删除一些令人困惑的字符，将 Base64 减为 Base58。像' **0** '和' **O** '、小' **L** '和' **I** '等组合就是几个例子。他们去掉了其中的一对以减少混淆，最终减少到 58 个不同的字符，这仍然是减少冗长地址的好方法。

现在你有了一个 Hash160 类型的 160 位，你所要做的就是用 Base58 对地址进行编码，生成一个更容易理解的小地址，同时该地址仍然保持着与公钥的数学关系，而公钥实际上是从私钥中派生出来的。不需要进入这种关系的细节，已经确定的是，任何由私钥签名的交易总是可以由公钥或地址来验证。在编码为 Base58 之前，您只需在 Hash160 中添加一个 **0x00** 。在 P2SH 格式中，整个步骤是相同的，但是在 Base58 编码之前，您可以添加 **0x05** ，这样更新后的节点仍然可以使用旧地址，并且能够识别不同的地址。Segwit 也有其他形式的地址，但这些是我们已经讨论过的广泛使用的地址格式。