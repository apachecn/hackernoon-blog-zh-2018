# 10 åˆ†é’Ÿå†…å®Œæˆé¢†åŸŸé©±åŠ¨çš„è®¾è®¡

> åŸæ–‡ï¼š<https://medium.com/hackernoon/clean-domain-driven-design-in-10-minutes-6037a59c8b7b>

![](img/06a395af6679bb01e8733af6d0e431e4.png)

[Source](https://pixabay.com/en/water-lily-aquatic-plant-nature-3504363/)

# å…³é”®è¦ç‚¹

*   [é¢†åŸŸé©±åŠ¨çš„è®¾è®¡](https://www.amazon.com/Domain-Driven-Design-Tackling-Complexity-Software/dp/0321125215) (DDD)ä¸[å¹²å‡€çš„æ¶æ„](https://8thlight.com/blog/uncle-bob/2012/08/13/the-clean-architecture.html)(åŠ å·)ä¸€èµ·å·¥ä½œ
*   åˆ‡å®æ¸…æ´ DDD([å¾®æœåŠ¡](https://www.martinfowler.com/microservices/))
*   åœ¨[äº‘ä¸Šæ¸…ç† DDDâ€”â€”åŸç”Ÿæ–¹å¼](https://landscape.cncf.io/)

æˆ‘å»å¹´å†™äº†å…³äº CA çš„è¯é¢˜ï¼Œä»Šå¤©æˆ‘å°†å†™å‡ºå®ƒçš„å¦ä¸€éƒ¨åˆ†ã€‚CA æœ‰åŠ©äºä½¿è½¯ä»¶æ¶æ„æ›´åŠ ç®€æ´å’Œæ˜“äºç®¡ç†ï¼Œä½†æ ·æ¿ä»£ç ä¹Ÿå¾ˆåºå¤§(å¦‚æœä½ æ›¾ç»å®ç°è¿‡å®ƒï¼Œä½ å°±ä¼šæ˜ç™½æˆ‘çš„æ„æ€â€”â€”éœ€è¦åˆ›å»ºå¤§é‡çš„è¯·æ±‚ã€å“åº”ã€äº¤äº’å™¨æˆ–ç”¨ä¾‹ã€æ¥å£å’Œç±»ï¼Œå‚è§æˆ‘åœ¨[https://github.com/thangchung/blog-core](https://github.com/thangchung/blog-core)çš„å®ç°)ã€‚å›åˆ°è¿‡å»ï¼Œå½“æˆ‘ä»¬å®ç°[å‘½ä»¤æŸ¥è¯¢è´£ä»»åˆ†ç¦»](https://martinfowler.com/bliki/CQRS.html) ( [CQRS](https://cqrs.files.wordpress.com/2010/11/cqrs_documents.pdf) )å’Œ[äº‹ä»¶æº](http://codebetter.com/gregyoung/2010/02/20/why-use-event-sourcing/) (ES)æ¨¡å¼æ—¶ï¼Œä¼šè®©è®¸å¤šäººå¯¹é‚£äº›æ ·æ¿ä»£ç æ„Ÿåˆ°ä¸æ»¡ã€‚è¿™å°±æ˜¯æˆ‘ç ”ç©¶å¹¶å†™å‡ºæˆ‘æ‰€çŸ¥é“å’Œå­¦åˆ°çš„ä½¿ CA æ›´å®ç”¨å’Œå¯ç»´æŠ¤çš„æ–¹æ³•çš„åŸå› ã€‚

å¯¹äºé‚£äº›ä¸ç†Ÿæ‚‰ CA çš„äººï¼Œè¯·å‚è§æˆ‘ä»¥å‰çš„æ–‡ç« ï¼Œåœ¨[https://hacker noon . com/applying-clean-architecture-on-web-application-with-modular-pattern-7 b11 f1 b 89011](https://hackernoon.com/applying-clean-architecture-on-web-application-with-modular-pattern-7b11f1b89011)

è®©æˆ‘ä»¬ä»æˆ‘ä»¥ CA æ–¹å¼å·¥ä½œçš„åº”ç”¨ç¨‹åºçš„æ•´ä½“æƒ…å†µå¼€å§‹ï¼Œå¦‚ä¸‹æ‰€ç¤º

![](img/e4e19fe3604390432d64189be7977641.png)

1.  ä¸ä¾èµ–äºä»»ä½•æ¡†æ¶æˆ–åº“çš„é¢†åŸŸä»£ç ã€‚å®ƒä½¿å¾—è¿™äº›æ ¸å¿ƒç»„ä»¶å¯ä»¥åœ¨å°†æ¥é‡å¤ä½¿ç”¨
2.  åŸŸä»£ç çš„ä¸€ä¸ªå¤–å±‚ï¼Œå°±åƒé€‚é…å™¨ä¸€æ ·ï¼Œæˆ‘ä»¬ç”¨å®ƒæ¥å®ç°å·¥ä½œå•å…ƒ(UOW)ã€é€šç”¨å­˜å‚¨åº“(GR)ã€äº‹ä»¶æ€»çº¿ã€ä¾èµ–æ³¨å…¥å’Œè®¸å¤šå…¶ä»–ä¸œè¥¿
3.  å¸¦æœ‰è¯·æ±‚å’Œå“åº” dto åŠå…¶å¤„ç†ç¨‹åºçš„éƒ¨åˆ† CA æ¨¡å¼ã€‚æˆ‘ä»¬åˆ©ç”¨[mediator](https://github.com/jbogard/MediatR)å’Œ [AutoMapper](https://github.com/AutoMapper/AutoMapper) åº“æ¥ç®€åŒ–è¿™ç±»å·¥ä½œï¼Œè¿™ä¹Ÿæ˜¯å®ƒå¾ˆé…·çš„å¦ä¸€ä¸ªåŸå› ğŸ˜è°¢è°¢[å‰ç±³](https://github.com/jbogard)ï¼
4.  Web API çš„éƒ¨åˆ†æ¼”ç¤ºè€…

åœ¨å®ç°ä¹‹åï¼Œå®ƒå°†ä¼šä»¥å¦‚ä¸‹çš„ä»£ç ç»“æ„ç»“æŸ

![](img/2b4edbf5d26ca9bc5ba07f8430cf0cdd.png)

è¿™é‡Œæ²¡æœ‰ä»€ä¹ˆè¦è¯´çš„ï¼Œå¾ˆç®€å•ï¼Œå¾ˆå¹²å‡€ï¼Œå¯¹å—ï¼Ÿè®©æˆ‘ä»¬æ·±å…¥ç»†èŠ‚ï¼Œè¿™æ ·æˆ‘ä»¬ä¼šå¯¹å®ƒæœ‰æ›´å¤šçš„äº†è§£ã€‚æˆ‘å°†å‘æ‚¨å±•ç¤ºè´­ç‰©è½¦æœåŠ¡( [miniservices](https://thenewstack.io/miniservices-a-realistic-alternative-to-microservices) æ¨¡å¼)çš„ä¸šåŠ¡ï¼Œä¾‹å¦‚å‘è´­ç‰©è½¦æ·»åŠ æ–°äº§å“ï¼Œå‘è´­ç‰©è½¦æ·»åŠ æ›´å¤šäº§å“ï¼Œè·å–åŒ…å«äº§å“çš„å½“å‰è´­ç‰©è½¦ï¼Œæ›´æ–°è´­ç‰©è½¦ï¼Œä»å½“å‰è´­ç‰©è½¦ä¸­åˆ é™¤äº§å“ï¼Œæœ€åçš„æ“ä½œæ˜¯æ£€æŸ¥è´­ç‰©è½¦ã€‚

![](img/c52f33675d61775c87de9f69916c8321.png)

[https://www.gartner.com/webinar/3437517](https://www.gartner.com/webinar/3437517)

å°±æ˜¯è¿™æ ·ã€‚ç„¶åæˆ‘ä»¬æœ‰è¿™æ ·çš„ç”¨ä¾‹

![](img/684b02993bee4a2a221d85cca320b2ce.png)

å¦‚æœä½ å–œæ¬¢ API ä¼˜å…ˆçš„æ–¹æ³•ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥æŠŠ OpenAPI ä½œä¸º

![](img/e531a5c163ba87958ee0a361d54292a7.png)

è®©æˆ‘ä»¬ç¼©å°åˆ°ä»£ç ï¼Œå› ä¸ºæˆ‘çŸ¥é“æˆ‘ä»¬éƒ½æ˜¯å¼€å‘äººå‘˜ï¼Œæ‰€ä»¥ä»£ç åº”è¯¥æ›´å®¹æ˜“ç†è§£ï¼Œå¯¹ä¸å¯¹ï¼Ÿ

# é¢†åŸŸç»„ä»¶(ä¸»è¦æ˜¯ DDD æ¨¡å¼)

![](img/a4036db8f23eedfa2013899c1d108502.png)

Cart.cs

CartItem.cs

äº§å“. cs

# åŸºç¡€è®¾æ–½ç»„ä»¶

å·¥ä½œå•å…ƒã€é€šç”¨å­˜å‚¨åº“ã€äº‹ä»¶æ€»çº¿ã€ClientRequestã€ä¾èµ–æ³¨å…¥â€¦ç»„ä»¶éƒ½åœ¨ NetCoreKit ä¸­ï¼ŒNetCoreKit æ˜¯ä¸€ç»„ç”¨äºçš„äº‘åŸç”Ÿå·¥å…·å’Œå®ç”¨ç¨‹åºã€‚NET Coreâ€”â€”è¿™æ˜¯æˆ‘è‡ªå·±å¼€å‘çš„([https://github.com/cloudnative-netcore/netcorekit](https://github.com/cloudnative-netcore/netcorekit))ã€‚

# è¯·æ±‚/å“åº”å¤„ç†ç¨‹åº

*   è·å–è£…æœ‰äº§å“çš„è´­ç‰©è½¦

*   å°†äº§å“æ·»åŠ åˆ°è´­ç‰©è½¦

*   æ›´æ–°è´­ç‰©è½¦ä¸­çš„äº§å“

*   åˆ é™¤è´­ç‰©è½¦ä¸­çš„äº§å“

*   æ£€éªŒ

# Web API æ¼”ç¤ºè€…

# äº‘åŸç”Ÿéƒ¨ä»¶

è¿™æ˜¯äº‘åŸç”Ÿåº”ç”¨ç¨‹åºï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†å…¶æ‰“åŒ…åˆ°ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œå¹¶åœ¨éœ€è¦æ—¶æ‰˜ç®¡åˆ° Kubernetesã€‚è¦åšçš„å·¥ä½œå¦‚ä¸‹

![](img/a21ccc1aa5282d026232ed03a40e0395.png)

Dockerfile æ–‡ä»¶

Kubernetes è½½è´§æ¸…å•

ä»Šå¤©åˆ°æ­¤ä¸ºæ­¢ã€‚å¸Œæœ›å¤§é‡çš„ä»£ç ä¸ä¼šè®©ä½ å¤´æ™•ğŸ™ã€‚

# æ¦‚è¿°

è¿‘å¹´æ¥ï¼Œä¸–ç•Œå‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å­¦ä¹ å’Œé€‚åº”ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å‘æ‚¨å±•ç¤ºäº†å¦‚ä½•å°† CA ä¸ DDD ç»“åˆèµ·æ¥ï¼Œå¹¶å°†å…¶æ‰˜ç®¡åˆ°äº‘åŸç”Ÿå¹³å°(åœ¨æœ¬ä¾‹ä¸­ä¸º Kubernetes)ã€‚è¿™äº›çŸ¥è¯†æ˜¯æˆ‘è‡ªå·±çš„ï¼Œä½ å¯ä»¥ç”¨å¦ä¸€ç§æ–¹å¼æ€è€ƒæˆ–è€…ä¸ºä½ è‡ªå·±åˆ›å»ºå¦ä¸€ä¸ªå †æ ˆã€‚

> *æœ¬æ–‡çš„æºä»£ç å¯ä»¥åœ¨*[https://github.com/vietnam-devs/coolstore-microservices](https://github.com/vietnam-devs/coolstore-microservices)æ‰¾åˆ°

æ„Ÿè°¢é˜…è¯»ï¼å¦‚æœä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼Œè¯·ç‚¹å‡»ğŸ‘ç¬¦å·ï¼Œä»¥ä¾¿å…¶ä»–äººå¯ä»¥çœ‹åˆ°å®ƒã€‚