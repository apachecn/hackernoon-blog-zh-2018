# 面向专家的条件 JavaScript

> 原文：<https://medium.com/hackernoon/conditional-javascript-for-experts-d2aa456ef67c>

## 掌握较短代码的条件表达式

![](img/683a1c1651182d06164284d670f807f7.png)

条件是每种编程语言语法的一个非常重要的方面。如果你已经用任何一种流行的语言对进行了[编程，你应该已经熟悉了`if..elif..else`或`switch`条件语句。它们对程序中的决策非常有用。](https://hackernoon.com/tagged/programming)

例如，假设一个宝箱被设计成只有格莱德(*就是我*)能够打开它。该逻辑可以用编程方式表示(用 Python ),如下所示:

尽管前面的代码片段是用 Python 语法编写的，但本文严格针对的是 [JavaScript](https://hackernoon.com/tagged/javascript) 。然而，这里展示的大多数技术也可以应用于其他一些编程语言。

从这一刻起，我保证你不会在这篇文章中找到任何一行用 JavaScript 之外的其他编程语言的语法编写的代码。

在本文中，更多的重点将放在 JavaScript 中的条件表达式(使用逻辑操作符)上，以及如何使用它们来使代码比条件语句更短。

# 表达式与语句

在继续之前，您需要能够区分 JavaScript 中的表达式和语句。这里有一个非常简单的类比:

> 表达式对于 JavaScript 就像短语对于语法一样，而语句对于 JavaScript 就像句子对于语法一样。

**一个*表达式*是 JavaScript 引擎可以计算并产生一个值的任何短语。**

**例如:**文字、赋值、函数表达式、逻辑、按位或算术运算、对象属性访问、函数调用、求值等。

以下代码片段显示了一些 JavaScript 表达式:

**一个*语句*是 JavaScript 引擎可以执行的任何句子或命令，以使某事发生或引起一些副作用。**

**例如:**条件句、变量或函数声明、循环、抛出、返回、try/catch/finally 等。

一些 JavaScript 表达式，如*赋值*和*函数调用*可能有副作用，因此通常可以用作语句( ***表达式语句*** )。

# 条件和布尔值

每个条件的关键要求是**条件**。`condition`决定了程序中要做出的决定。

在 JavaScript 中，这个`condition`可以是任何有效的表达式。通常，这个`condition`表达式，不管它有多复杂，都会被求值为两个值之一，称为**布尔值**:或者是`true`或者是`false`。

正确理解 JavaScript 引擎如何将这些`condition`表达式转换为布尔值对于编写正确且可预测的条件逻辑是必要的。

这里有两个基本概念可以帮助我们理解这种转换:

*   识别*真值*和*假值*
*   理解逻辑运算中的*短路*

## 真实 vs 虚假

JavaScript 中的每个值都可以被分类为*真值*或*假值*。JavaScript 中的 *falsy* 值如下:

*   `''`或`""`或```` ( *空弦*)
*   `0`或`-0` ( *数字 0* )
*   `null`
*   `undefined`
*   `NaN`
*   `false`

除此列表中的值之外的所有其他值都是真值。每当 JavaScript 需要一个布尔值时， *truthy* 值被隐式强制为`true`，而 *falsy* 值被隐式强制为`false`。

然而，如果您想要谨慎或明确地对待类型强制，您可以使用本机`Boolean`函数将任何值转换为其对应的布尔值。

您也可以使用逻辑**而非** ( `!`)运算符将值转换为布尔值。`!`运算符将其操作数转换为逆布尔值，因此，它总是计算为布尔值。

使用`!`运算符对真值计算为`false`，对假值计算为`true`。要将一个值转换成相应的布尔值，需要使用两次`!`操作符。

## 短路

**和** ( `&&`)和**或** ( `||`)逻辑运算符都需要两个操作数，用于对操作数执行布尔运算。

假设两个操作数是布尔值(`true`或`false`)，

*   `&&`运算只有当两个操作数都是`true`时才返回`true`，否则返回`false`。
*   `||`只有当两个操作数都是`false`时，运算才返回`false`，否则返回`true`。

注意，`&&`操作符比`||`操作符具有更高的优先级，因此，通常首先被求值。因此，当它们在一个表达式中一起使用时，您可以使用括号(`()`)进行分组，以改变求值顺序。考虑下面的代码片段:

使用这些运算符时，总是计算第一个操作数。然而，根据评估第一个操作数的结果，可能永远不会评估第二个操作数。这种行为被称为 ***短路*** 。

`&&`和`||`操作并不总是产生布尔值。一般来说，它们可以产生任何值。下面是基于*短路*的更简洁的行为描述:

*   `&&`运算符首先计算其第一个操作数。如果结果值为*真值*，则计算第二个操作数并返回其值。但是，如果第一个操作数的值是 *falsy* ，则第二个操作数永远不会被求值，它只是从第一个操作数返回 *falsy* 值。

*   `||`运算符首先计算其第一个操作数。如果结果值为*真值*，则不会计算第二个操作数，只会从第一个操作数返回*真值*。但是，如果第一个操作数的值是 *falsy* ，它会计算第二个操作数并返回其值。

# 用表达式替换语句

现在，您对*短路*概念以及`condition`表达式如何转换为布尔值有了清晰的理解。

接下来，您将看到如何将一些条件语句转换成简单的表达式。您还将看到这种转换如何使您的代码看起来更紧凑、更简短。

## 1.简单的 If 语句

通过利用*短路*的概念，非常简单的`if`语句可以很容易地用条件表达式替换。考虑下面的代码片段:

在这个代码片段中，`if`语句确保只有当条件评估为`true`时，才会调用`deletePost()`函数。

这个简单的`if`语句可以替换为一个非常简单的条件表达式，如下面的代码片段所示:

尽管这个条件表达式的工作方式与前面的`if`语句相似，但它们实际上是不同的。

*条件表达式产生一个值，这意味着它可以被赋给一个变量，或者用在任何其他需要值的地方。*

请记住，像这样使用条件表达式意味着您必须非常小心短路警告。很有可能一个操作数没有被求值，就像我们在上一节短路中看到的那样。

## 2.If…Else 语句

考虑以下用于确定密码强度的伪代码片段:

这个代码片段的意图非常简单—检查密码是否超过 7 个字符。如果是，则将`strength`变量设置为`“Strong”`，否则设置为`“Weak”`。

前面的代码片段可以缩短为:

这段代码片段只在一行中做了前一段代码所做的事情。这看起来已经很不错了。以下代码片段尝试检查条件表达式的计算。

有一种更好的方式来编写这种`if...else`条件表达式——使用 ***条件运算符*** 也称为 ***三元运算符*** 。其语法如下所示:

因此，可以使用三元运算符重写前面的代码片段，如下所示:

*虽然使用逻辑运算符的代码片段与使用三元运算符的代码片段工作方式相似(对于本例)，但重要的是要知道它们不是替代品。*

除了您确实知道自己在做什么之外，在这种情况下使用三元运算符会安全得多。

考虑下面的代码片段来理解在这种情况下使用逻辑运算符的危险:

这是另一个非常熟悉的条件语句，通常可以在跨浏览器 AJAX 库中找到。

使用逻辑操作符，前面的代码片段可以改写成这样(*缩进是为了提高可读性*):

但是，使用三元运算符，它可以写成这样:

*注意，在这段代码中，三元运算符是嵌套的，这对于处理更复杂的* `*if...else*` *条件*很有用。

# 提示和快捷方式

在本节中，您将看到一些有用的提示和快捷方式，它们在使用条件和逻辑运算符时会很有用。

## 规范化为布尔值

您已经看到了如何显式地将一个 JavaScript 值转换成它的等价布尔值，要么使用本机的`Boolean`函数，要么使用*double****NOT***(`!!`)运算符。

假设你想规范化`value`，这样你总是得到一个布尔值，如下所示:

*   如果`value`是布尔值，则原样返回`value`。
*   如果`value`不是布尔值，默认为您选择的布尔值——或者`true`或者`false`。

下面的代码片段展示了如何做到这一点(这里使用了*函数*):

## 德摩根定律

如果你熟悉布尔代数，你应该已经知道德摩根的**定律*。这些规律也适用于 JavaScript 逻辑操作符。*

*以下代码片段演示了这些定律:*

## *布尔恒等式*

*在处理布尔型时，有一些已知的恒等式始终为真。假设`A`、`B`和`C`是布尔值，下面的代码片段显示了其中的一些恒等式。*

## *多重三元运算符*

*您在前面的代码片段中已经看到，三元运算符可以嵌套起来处理更复杂的`if...else`条件逻辑。*

*但是，关于三元运算符的优先级和结合性，您需要知道一些事情，以便能够在复杂表达式中有效地使用它们。*

*   ***三元运算符的优先级*低于逻辑运算符和大多数其他运算符***。因此，当它与优先级更高的运算符一起使用时，最后才进行计算。*

*   ***三元运算符有一个*从右到左*结合律**。因此，当在同一个表达式中使用多个三元运算符时，它们是从右向左解析的。*

*当在一个表达式中使用多个三元运算符时，可能需要使用括号(`()`)来改变求值顺序。这里有一个例子:*

# *为专家提供更多 JavaScript*

*如果您对揭示可以改进 JavaScript 代码的其他方法的相关文章感兴趣，请不要犹豫，通读这些文章:*

1.  *[**超酷的 JavaScript 快捷键和日常使用技巧**](https://codeburst.io/cool-javascript-shortcuts-and-tips-for-everyday-use-66cd174ab216)*
2.  *[**创建 JavaScript 数组的技巧**](https://medium.freecodecamp.org/https-medium-com-gladchinda-hacks-for-creating-javascript-arrays-a1b80cb372b)*
3.  *[**JavaScript ES6: 5 改进您代码的新抽象**](https://blog.logrocket.com/javascript-es6-5-new-abstractions-to-improve-your-code-54a369e82407)*
4.  *[**ES6 解构:完整指南**](https://codeburst.io/es6-destructuring-the-complete-guide-7f842d08b98f)*
5.  *[](https://blog.logrocket.com/javascript-typeof-2511d53a1a62)**的 JavaScript 类型***

# ***结论***

***阅读完本文后，我相信您现在能够识别代码中的哪些区域可以像专家一样应用这些技巧和技术来改进代码。***

## ***鼓掌并跟随***

***如果你觉得这篇文章很有见地，如果你不介意的话，请随意鼓掌。***

***你也可以在 Medium ( [Glad Chinda](https://medium.com/u/ddcd0e9719e5?source=post_page-----d2aa456ef67c--------------------------------) )上关注我，获取更多对你有帮助的有见地的文章。也可以在推特上关注我( [@gladchinda](https://twitter.com/@gladchinda) )。***

******享受编码……******