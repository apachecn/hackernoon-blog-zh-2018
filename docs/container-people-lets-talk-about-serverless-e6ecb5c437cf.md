# 容器人，我们来谈谈无服务器

> 原文：<https://medium.com/hackernoon/container-people-lets-talk-about-serverless-e6ecb5c437cf>

你能在 kubernetes 上运行无服务器吗？

可以运行自己的私有无服务器吗？

目前有很多关于无服务器容器的讨论，以及某种形式的容器是否可以被描述为无服务器。主要是 kubernetes 的人建议，因为他们可以用 kubernetes 建立一个“功能即服务”平台(FaaS ),这意味着你可以用 kubernetes 建立一个无服务器的解决方案。

我对此有非常强烈的看法，不是因为我为谁工作，也不是因为他们的看法(完全披露:我为 AWS 工作，是无服务器的高级开发者倡导者)，而是因为我作为 CTO 的背景。

我的服？如果你负责运行容器，即使是在托管的 kubernetes 服务上，你也不是没有服务器的。

事实上，我会这么说:

> ***Kubernetes 上的无服务器 FaaS 是一个矛盾修饰法***

以下是我听到的一些关于为什么人们认为 kubernetes 上的 FaaS 是无服务器的争论，以及我的回应。

# 论点 1:“但是开发者的体验是一样的”

这是我得到的第一个论点。如果你正在构建一个无服务器的解决方案，并且你正在构建函数，它在“哪里”运行并不重要，开发者唯一关心的是他的代码是否正确运行。如果你只关心代码和单元测试，那么这是完全正确的。如果你关心系统测试，并且与其他系统有任何类型的集成，那么你可能要担心它是否在其他地方工作。或者你可能有一组与你想象的不同的约束。你一直希望它能在 AWS Lambda 上运行，突然你的工程主管走过来说:“哦，有人决定让我们在 kubernetes 上运行我们自己的私人 FaaS。没关系吧。这只是代码”。

你的期望是你的团队是孤立的。有人写代码。其他人负责部署和管理它。作为一名首席技术官，我希望我的开发人员了解他们将部署到什么样的环境中，即使他们最终并不对该环境负责。这对我来说很重要，因为开发人员需要理解和构建环境的优点和限制。所以体验是不一样的，只是因为了解您要部署到的环境很重要。

# 论据二:“这和 AWS 给我们的东西是一样的”

我认为这意味着“我们可以为开发人员提供一种部署功能的方式，我们可以按需运行这些功能”。

你可能做不到的是提供与这个神话般的云提供商同等水平的可扩展性、可靠性、支持和维护。

嗯，你也许可以，有海量的人、金钱和时间。

事实上，我非常确定，如果你带着这个观点去找首席技术官，他们要么会困惑地看着你，要么会嘲笑你很长时间。然后，他们可能会要求您在项目的整个生命周期内，比如说三年，针对 AWS 为 it 写一个商业案例，然后带着总体成本效益分析回来。如果没有一些重要的资源、大数据中心和一些重要的人在背后支持你，我估计在成本效益分析方面很难与 AWS 竞争。

这不一样。

# 论据 3:“我们可以为开发/调试提供本地版本”

我对这个论点有些同情。这是一个相对较好的论点。开发人员需要能够在尽可能接近实际交付环境的环境中开发解决方案。这是有道理的。这个论点可以追溯到很难得到一个看起来像我们用来运行东西的服务器的开发环境的时候。开发发生在看起来一点也不像我们要部署的机器上。事实上，部署是一场噩梦。然而，让我们稍微改变一下论点。如果您正在部署到云环境中，并且使用某种形式的基础设施作为代码或模板，例如 AWS CloudFormation，那么您可以在另一个帐户中生成您的环境的副本。

所以给开发者一个 AWS 账号，给他们 CloudFormation 栈，运行栈，你就有了一个环境的工作副本。

这样做的好处是，它实际上运行在与生产环境相同的环境中。不是“本地”。

不一样，肯定不一样，但不“错”。

# 论点 4:“这是一个连续体。有些东西基本上是不需要服务器的”

我不认为这是真的。我认为我们应该将某样东西定义为无服务器，或者将某样东西定义为“大部分无服务器”，而不是将所有东西都包含在一个保护伞下，说“都是无服务器的，但这比那更无服务器”。我认为我们需要在定义方面达成共识，否则每个人都会创造一些东西，称之为“无服务器的”(这就是现在正在发生的)。

去年我的[个人定义](/@PaulDJohnston/a-simple-definition-of-serverless-8492adfb175a)是这样的:

> *无服务器解决方案是指在无人使用的情况下，无需任何运行成本(不包括数据存储)*

AWS 在 [AWS 无服务器](https://aws.amazon.com/serverless)页面上有更完整的定义:

*   无服务器管理
*   灵活缩放
*   高可用性
*   没有闲置产能

我认为这些定义非常有力和可靠。

这些定义将 kubernetes 解决方案排除在无服务器解决方案之外，除非它们由能够提供可扩展性和高可用性的提供商运营，而这在**是可能的**。

但是你还有“服务器管理”的问题。它仍然是容器。您仍然需要管理和维护容器。

如果你假设你必须管理运行逻辑的代码(就像你在 AWS Lambda 环境中做的一样)，你可以看到你仍然必须管理和更新容器本身。

你还在管理容器。因此，在我看来，它不是无服务器的。

我不认为无服务器是一个连续体。要么是无服务器的，要么不是。

# kubernetes 上的 FaaS 不是没有服务器的

对于您的用例或组织来说，在 kubernetes 上运行 FaaS 可能有很好的和有效的理由。

但不是无服务器。这只是 FaaS。

不要相信容器人群说无服务器只是他们世界的一部分。它不是。

无服务器是一种不同的范式。它不应该被视为相同的，我个人不认为有明显的等价。

# 放弃

我目前在 T21 AWS 公司工作，是总部设在英国、在 EMEA 工作的无服务器软件的高级开发人员。

本博客中表达的观点是我的，可能反映也可能不反映我的雇主的观点。