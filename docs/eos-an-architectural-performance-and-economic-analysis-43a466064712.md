# EOS:建筑、性能和经济分析

> 原文：<https://medium.com/hackernoon/eos-an-architectural-performance-and-economic-analysis-43a466064712>

> 以下研究由 [Whiteblock](http://www.whiteblock.io) 团队进行。这篇报道是由[扎克·科尔](http://www.twitter.com/0xzak)、[布伦特·徐](https://twitter.com/xubrent888)、[德茹夫·鲁特拉](https://twitter.com/gruvydhruvy)和内特·布莱克利撰写的。点击下载 PDF 格式的完整报告[。](https://whiteblock.io/library/eos-test-report.pdf)

**摘要:**EOS 系统为智能合约开发和分散存储提供了一个平台，试图解决以太坊和比特币等流行的区块链系统中常见的可扩展性问题。EOS 系统通过实现委托利益证明(dPoS)共识和专注于并行处理和全双工通信的架构设计，试图提供一个分散的应用程序开发环境，该环境提供高事务吞吐量。自从 EOS mainnet 公开发布以来，多方已经推测并声称该系统能够提供每秒 5，000 到 1，000，000 次交易的处理能力。然而，这样的性能还没有在生产网络中观察到。没有对地球观测系统体系结构进行全面的分析来确定网络的能力。以下文件概述了一项为期三个月的研究计划的结果，该计划旨在分析 EOS 系统的架构，并对其在各种环境条件下的功能性能进行基准测试。通过在受控实验室环境中的实际测试和实验，本研究提供了其设计、性能和经济性的全面和客观的模型，以便为区块链社区提供参考。

# **一、简介**

2017 年的加密资产市场获得了显著的主流关注，区块链空间前所未有地引入了新用户。这种高容量的活动同样产生了各种基于区块链的项目，这些项目是由首次发行硬币(ICO)的融资承诺推动的。在一个新的不受监管的市场中，通过一种简单的方法来筹集开发实用解决方案所需的资本，迄今为止，超过 500 个项目已经筹集了超过 120 亿美元的资金。

其中一个项目是 EOS，开发该项目是为了提供一个类似操作系统的结构，以允许快速扩展分散式应用程序。为了解决在流行的区块链项目中发现的主要缺点，EOS 架构采用了几种新颖的解决方案，以提供更高的处理能力和吞吐量。由于专注于提供优化的智能合约导向平台，围绕 EOS ICO 的许多信息将该系统定位为以太坊的竞争对手和继任者，为区块链 3.0 奠定了基础。

声称该系统能够提供数百万的交易吞吐量，引起了加密货币社区的极大关注。这项研究的目标是验证围绕 EOS 的任何推测性声明，并提供对系统设计和能力的全面理解。

**A .概述**

1)架构:在本节中，我们将检查组成 EOS 系统的以下组件的功能和设计:

*   **账户:**如何在 EOS 网络中定义用户，包括账户、钱包和密钥之间的关系。
*   **交易与契约:**交易与契约是如何在网络中构建的。
*   **状态管理和区块链:**EOS 协议如何管理与去中心化应用相关的状态和资源。
*   **执行环境:**智能合约和去中心化应用如何在 EOS 网络中由块生产者执行。
*   **共识:**EOS 网络如何建立关于交易、动作或合同是否有效的共识，并遵守协议的规则。

2)性能:本部分介绍了我们在 Whiteblock 实验室中使用 Whiteblock 区块链测试框架进行的性能基准测试的结果。这些测试主要集中在以下三个方面:

*   EOS 网络在各种环境条件下的事务吞吐量，包括事务量、网络延迟和数据包丢失。
*   EOS 系统的容错性，包括分析系统如何响应网络分区、分叉以及不同数量的块生产者的存在与否。
*   EOS 系统的安全性，包括块生产者操纵状态的能力以及他们对网络施加的控制程度。

3)经济系统分析:报告的这一部分旨在更好地理解 EOS 系统的经济学，如令牌设计，它激励用户的行为，以及它如何影响网络功能。本节还将 EOS 代币销售置于背景中，提供关于代币各种用途的信息，总结代币供应、需求和价值驱动因素，评估平台的现有博弈理论，并提出 EOS 经济模型的一些潜在问题。

# **二。架构**

架构分析将包括评估平台的各个层，并确定支持其正常功能的基本组件。

**A .概述**

EOS 是在分布式数据库结构中交互的应用程序的集合。如图 1 所示，软件系统由三个主要组件组成:Nodeos、Cleos 和 Keosd。用户通过命令行工具 Cleos 与网络交互，Cleos 随后通过 Nodeos 连接到数据库管理系统(DBMS)的其余部分。该系统被组织为具有松散耦合架构的互连计算单元的网络。这允许过程的复制，使得系统能够基于 EOS 数据库的改变而被更新，同时在块生产者之间分配计算工作量。

1)通用架构:EOS 架构为点对点区块链系统，利用系统优化方法在特定的执行环境中运行。该系统是非自主的，基于其共识模型，严重依赖于 21 个区块生产商。数据和计算分布在网络中的 21 个块生产者之间，创建中央/主 DBMS，其协调整个网络的更新。分布式数据库是同构的，因为 21 个区块生产商正在处理事务，以便在 EOS 网络内的所有独立数据库之间达成一致。EOS 创建了自己的 LLVM 前端，通过 EOS C++工具链来编译合同。实现的节点应该遵循相同的协议来处理和验证网络上的事务和契约。

2)组件:

*   **Nodeos** :节点设置的核心组件被配置为一个守护进程，使用各种插件允许节点运行。节点可以是生产节点(数据块生产者)，也可以是仅与某个帐户相关的非生产节点。非生产节点可以作为开发人员的公共 HTTP-RPC API 来实现。这些节点还可以充当希望利用计算基础设施进行本地开发的应用程序的私有端点。
*   Cleos :客户端可以通过 Cleos 命令行界面(CLI)工具访问 eos 网络。该工具允许通过 Nodeos 与整个网络进行交互，并配置网络内的交互。网络中的块生产者托管、交付和管理客户端消耗的大部分资源，允许它们直接访问关于事务的信息。

![](img/8303bf184155cb4a809526ad577f90d3.png)

**Fig. 1\. Overview of EOS System Architecture**

运行 EOS 的系统需要预先构建的 Cleos 和 Nodeos 实例，这些实例在运行网络中的节点之前运行。

当创建网络时，各种组件允许特定的动作在整个网络中持续。这些操作完成了几项任务:

*   加载基本插件
*   设置服务器地址
*   启用 CORS
*   添加协定调试

当 Nodeos 在网络中验证/同步块时，可以认为网络配置正确。在本地系统上创建与 Cleos 工具相关的别名时，会在 Nodeos 应用程序中处理一个命令。这种网络设置对于网络不同组件之间的适当协调是必要的。由于接口是为跨节点操作而创建的，因此网络允许使用块生产者的共享计算资源高效地处理事务。

3)合同开发工具包(CDT):CDT 旨在组织合同编制和 ABI 生成所需的工具。与 eosio.cdt 关联的二进制文件安装在本地机器上。eosio.cdt 存储库包含 eosio-cpp 组件，该组件将 C++代码编译成 WASM。这也是 ABI 生成的方式，允许用户操作在 JSON 和二进制形式之间转换。

**B .账户**

1)概述:EOS 实现了一种基于帐户的机制来维护状态记录。理解这些帐户将有助于理解系统的基本组件以及系统中状态和契约之间的关系。

![](img/7bc06e4d636694bc16812d6454276b02.png)

**Fig. 2\. How Accounts Fit Into the EOS System**

2)账户配置:在 EOS 架构中，账户被呈现为授权结构，可以定义动作的发送者和接收者。分级授权可以通过权限管理和契约来授予。可以授予帐户权限并对其进行配置，以提供个人或团体访问权限来验证交易。它们充当基本单元数据模块，允许在系统中发送和接收事务。

帐户的创建与密钥生成同时进行，其中创建的密钥与其对应的钱包相关联。这种互动是通过 Cleos 应用程序实现的。Cleos、Keosd 和 Nodeos 协调一致地在网络中发布帐户。钱包是用来通过 Cleos 与网络互动的。这一工作流程如图 2 所示。

钱包被表示为用于授权在系统中执行的操作的公共-私有密钥对的容器:Keosd 管理钱包，并且通过 Cleos 促进访问以允许用户访问账户。

3)帐户架构和设置:帐户依赖于基于权限的结构，该结构定义了系统中的角色。Nodeos 是 eos 网络的接口，通过 Cleos 发布帐户并管理它们在网络中的交互。Cleos 为用户提供了生成额外的密钥对并与 RESTful 界面交互的能力。

Cleos 用于请求 Nodeos 创建帐户并将其发布到网络中。由于 Cleos 工具用于导入私钥，因此在网络中执行的操作将由附属于帐户的密钥签名。当运行多个钱包时，用户必须将必要的密钥导入钱包，以便为交易创建签名。成功的钱包导入执行导致系统内私钥和公钥之间的成功对应。由于钱包包含密钥，因此可以预期钱包文件存储在 data-dir 或/eosio-wallet 文件夹中。

4)帐户功能:帐户用于通过向块生产者发送结构化动作来执行合同。这些动作通过网络的其余部分被路由，以便到达目的地账户。EOS 通过行动和行动处理脚本定义合同，这将在第 II.C 节中描述。帐户有两个级别的权限:活动和所有者。

Active 是最通用的帐户权限结构，用于转移资金、为制作者投票以及提交 EOS 系统中的高级更改。它允许你赌注，转让，投票，购买内存和改变活跃的关键。

所有者帐户可以执行任何会影响帐户权限的操作。它允许活动权限所做的一切，但也可以更改帐户的所有者。

cleos create account 命令将从 Nodeos 执行，以创建一个具有用户指定的唯一名称的帐户。这些帐户需要使用 EOS 令牌，以便保留维护帐户所需的 RAM。命名约定允许字符[1–5a-z .]，最多 12 个字符。

可以在该系统中创建分级许可，其中许可对于交易有效的必要签名具有不同的阈值。这意味着一个帐户可以允许另一个帐户进行某种类型的访问。新获得许可的帐户同样可以被赋予允许其他帐户拥有更多访问权限的权利，这意味着一个帐户的权限可以由多方链接在一起。软件架构的客户端将登录到 Cleos 来解锁钱包，这些钱包管理如何将密钥授予不同的帐户权限。总结一下与帐户相关的权限系统:

*   当涉及交易时，许可管理系统持续检查正确的签名验证。
*   权限在用户之间进行分配和划分，以便创建分层的授权结构。
*   与帐户相关的控制通过允许多用户控制帐户的分层结构进行加权。

EOS 可以根据帐户和权限之间的关系来定义对必要密钥的访问。通过这种配置，可以通过 eosio.msg 合同创建多签名帐户和自定义权限级别，并且可以授权密钥和帐户的组合向其他帐户发送操作。这个层次链允许帐户代表其他帐户。

5)分析:对 EOS 架构中的帐户的分析表明，帐户管理 EOS 网络上的权限和资金。EOS 中的账户遵循传统配置，类似于其他基于加密的分布式系统。然而，除了公钥/私钥对之外，EOS 帐户还有另一层抽象。帐户与用户配置文件一致，其中具有不同权限的多个密钥对和钱包可以绑定到一个帐户。为了管理这些，用户通过命令行工具 Cleos 与 Nodeos 和 Keosd 进行交互。

相比之下，Ethereum 实现了两种类型的帐户(合同帐户和外部拥有的帐户)，其中帐户地址和帐户状态的映射通过验证其状态的加密证据来关联。以太坊帐户实际上不是用户配置文件，而是代表区块链架构中普遍存在的公钥/私钥对。与 EOS 相比，以太坊帐户不依赖于类似于用户配置文件的结构，而是与底层加密技术相集成。

EOS 帐户依靠传统的信任机制来验证操作。如果一个帐户违反了这种信任，那么该帐户可以被块生产者冻结，这个概念将在后面的部分中更详细地讨论。然而，尽管有这种机制，也不能保证协商一致总能导致淘汰坏的行为者。这种设置和在以太坊中创建账户的主要区别在于加密证明和有效性。在以太坊中，Patricia Merkle 树巩固了账户的状态，而在 EOS 中，状态是在用于流状态的数据库或表中实例化的(更多信息将在第二节中探讨)。d)。

基于对 EOS 系统中的账户模型的分析，很明显，EOS 账户不是由在其他加密货币(如比特币或以太坊)中实现的简单的公钥/私钥对组成的:EOS 账户模型更类似于具有传统的、基于许可的账户系统的分布式数据库。像使用用户配置文件一样使用帐户，而不是使用简单的公钥/私钥对进行加密验证。基于这种评估，EOS 网络不一定是基于区块链的加密货币网络，而是允许不同用户账户通过分布式数据库网络进行通信和交互的同构分布式数据库网络。

**C .交易和合同**

1)概述:本节探讨智能合约和交易执行之间的关系。在区块链环境中，事务充当指示状态转换的计算事件。交易调用现有合同或启动新合同的方式取决于这些合同的配置以及系统界面的设计方式。交易和合同与区块链系统交互的方式定义了基础设施中存在的某些稳健性级别。

![](img/8dc3f04cfa40ae16d48ad81775366007.png)

**Fig. 3\. EOS Actions**

2)契约:EOS 中的智能契约由动作和动作处理程序的组合来定义。动作处理器被设计成通过发送动作来访问不同的账户，这些动作可以与每个账户所附属的私有数据库进行交互。块生产者安排交易，以便优化网络内存储器和资源密集型动作的冲突。

3) Web Assembly: Web Assembly (WASM)可以作为 C++/C/Rust 等很多高级语言的编译目标。WASM 是 EOS 虚拟机理解的指令格式，这意味着 EOS 库和 WASM 二进制代码之间的交互通过 Web 汇编模块进行。

4)组件:合同:在网络中注册并在 EOS 节点上执行的程序。合同可以由存储在 EOS 数据库框架中的行动请求组成。契约代码被编译成低级字节码，可以由块生产者执行。

**动作:**这些是操作的单个原子单位。动作代表合同和账户之间的通信接口。大多数 EOS 网络都是使用彼此交互的动作构建的，并形成了底层架构。

**事务:**事务代表动作的执行。事务可以由单个操作或多个操作组成。事务的成功执行决定了 EOS 区块链中的状态变化。事务和动作之间的关系如图 3 所示。

EOS 使用常见的合同功能来允许帐户代表用户执行操作。EOS 合同在功能上类似于基于以太坊的 ERC-20 代币发行合同。

5)通信和动作:EOS 契约可以相互通信和协调，允许当前和未来动作之间的依赖性。契约之间的通信是异步的。资源分配算法的进一步迭代被设计来减轻这些问题中的一些。在 EOS 中，契约是由网络中的节点注册的软件。发送 EOS 合同的过程如图 4 所示。

![](img/dce0e370c912b5b3c6ab6b7018561c1c.png)

**Fig. 5\. Action Handlers Can Apply Multiple Contexts**

合同和账户显示为通过单个动作进行通信。当几个动作组合在一起时，它们被打包成事务，这些事务按顺序执行一系列动作，如图 5 所示。交易被生成，并且收据以散列的形式被导出。当节点收到事务收据/散列时，尽管尚未 100%确认，但块生产者处理事务的可能性很高。

事务可以通过两种不同类型的通信模型来构建，如图 6 所示。这些模型旨在为需要立即关注的操作提供粒度控制，而不是需要更复杂业务逻辑的延迟操作。

执行契约的方式对于数据库模型执行必要的数据库管理系统(DBMS)功能是很重要的。动作的上下文引用三个变量:

*   接收者:当前正在执行流程的帐户
*   代码:授权合同的帐户
*   Action:当前运行的操作的 ID

动作上下文还包含:

*   当前交易数据:

–交易标题

–所有原始动作的有序向量

–上下文无关动作的向量

–可编辑的上下文无关数据集

–blob 的完整索引

*   交易副作用:

–EOS 持久性存储中的状态变化

–通知当前交易的接收方

–发送给新接收者的内嵌动作请求

–新(延期)交易的产生

–取消现有(正在进行的)延期交易(即取消已经提交的延期交易请求)

![](img/0bab308c18dbbf87f406ee6dce07b65a.png)

**Fig. 6\. Two Basic EOS Communication Models**

一个动作的工作内存不与同一事务中的其他动作共享，因为访问是基于跨帐户的许可而关闭的。变量在动作上下文中是不可用的，状态只能通过保存在 EOS 数据库中在动作间传递。系统中的组件进行了划分，以便在处理方面实现最高效率。

6)分析:EOS 使用基于合同的模型来构建整个系统。该模型渗透到协议的最低层，因为许多系统合同，包括定义 EOS 令牌的合同，都遵循该模型。EOS 中的契约比使用以太坊协议定义和创建的智能契约模型更符合设计用于执行计算功能的传统代码行。它们本质上是块生成器中的插件或模块，用户必须与之交互。以太坊中的智能合约与状态转换、价值转移以及定义经济系统的密码算法直接相关。以太坊中的 Gas 被设计用来测量执行某些操作所需要的计算量。以太坊网络的参与者也受到加密经济的激励，因为这些费用是从运行合同中产生的。由于以太坊中的状态是由 Patricia Merkle 树数据结构形式的实例化以密码方式确定的，因此智能合约是导致状态变化的计算逻辑组件。在以太坊交易中，状态转换导致对区块链状态的底层组成的密码验证的改变，这可以通过对 Patricia Merkle 树数据结构的改变来辨别。相反，EOS 中的事务主要导致底层数据库的更改，而不是对底层区块链数据结构(如以太坊)进行加密验证的状态更改。

正如我们之前对 EOS 系统架构的分析所展示的，通信模型导致数据通过客户端被调用，最终由 Nodeos 处理。所有这些操作都是在缺乏合同和交易的加密验证的环境中进行的。此外，没有实施经济激励机制来促进系统中的正确执行。这种交互提供了没有密码经济系统的传统计算环境的服务，这将在第四节中讨论。因为 EOS 是在普通数据库体系结构的上下文中利用 WASM 构建的，所以 EOS 和传统的客户机/服务器体系结构中所期望的没有实质性的区别。

在 EOS 中，当生成 ABI 以允许 JSON-二进制转换时，所处理的代码依赖于为人类可读 JSON 和机器可读二进制之间的交互指定序列化/接口，并且不展示区块链上智能合约的对等特征。或者，在以太坊交易中，智能合约代码由以太坊虚拟机(EVM)中的所有节点复制，以保持代码的有效性并确保一致性，这有助于合约的实际不变性和对等执行。智能合约在 EVM 的编译方式与 WASM 在 EOS 中的解释方式有很大不同，因为 WASM 用于广义计算，EVM 字节码属于区块链计算。这种区别进一步表明，EOS 不一定实现区块链平台，而是一个通用的计算平台。在 EOS 中，合同是特别可修改的，并且合同的历史构成可以被改变。这种契约模型对于分布式数据库中的命令和控制系统架构是有效的，而不是区块链。

正如《区块链与 DLT:第一部分》中所详述的，客户端/服务器和数据库架构的动态性是根据它们与以太坊的关系来探讨的。Oracle 和 IBM 等传统的 Web 2.0 公司已经为客户机/服务器体系结构设定了标准，这种模型已经在分布式系统的设计中被引用。我们今天在分析软件平台时注意到的一个动态是，分布式分类账系统和同构分布式数据库系统(如 EOS)仍然受到传统客户端/服务器架构的严重影响。这是一种传统上被接受的配置，但重要的是要认识到以太坊和其他加密货币网络是为点对点配置而设计的。在以太坊协议中，计算和验证分布在参与系统的每个节点上，因此没有客户端必须请求访问的集中式服务器架构。节点运行自己的 EVM 实现并处理相关代码，这与 EOS 系统形成鲜明对比，在 EOS 系统中，合同的计算和验证主要由 21 个区块生产商执行。

**D .状态管理和区块链**

1)概述:状态便于在计算环境中表示信息和事件。它定义了不同合同之间发生的相互作用，并且在探索与区块链和传统数据库系统相关的概念时可以有不同的背景。正如 Gavin Wood 在黄皮书中所描述的，区块链是一种加密安全的、具有共享状态的事务性单机。这些环境中的状态结构定义了基础设施级平台的系统完整性的各个方面。基础层技术需要适当的状态管理，以确保可以在其上构建从属协议的高可靠性数据结构。区块链基础设施的组成对于确定与状态相关的底层技术的可用性和稳定性是必要的。为了在强大的基础层协议中建立内聚级别，系统必须确保系统状态的有效性和维护。随着区块链成为一种专注于价值创造和新形式数字资产的系统化实施的技术，需要坚决的基础层组件来处理综合环境负载的需求。

2)资源:我们生态系统中各种系统和网络之间的一个关键区别因素是在计算框架内如何管理状态和资源。EOS 状态高度集成到令牌模型的内部工作中。为了分配资源，代币持有者用他们的代币做赌注。这使他们有权获得适当比例的资源。在 EOS 分布式系统体系结构中有三种主要的资源。

**带宽和日志存储(磁盘):**带宽可以分为瞬时带宽和长期带宽，它本质上充当网络中发生的所有行为的日志存储。该动作存储由分布式计算环境中的所有节点下载。动作日志用于重新创建在同构分布式数据库管理系统上运行的所有应用程序的状态，该系统包括 EOS 架构的主体。带宽是在部分预留的基础上分配的，这意味着未使用的带宽可以出租或委托给不同的帐户。

**计算和计算积压(CPU):** 计算也有即时使用和长期使用。计算积压(债务)被认为是重新生成存储在日志存储中的操作日志的状态所必需的计算。计算积压需要仔细管理，因为当计算需求增长过快时，它可能会面临限制因素。与带宽和日志存储类似，计算也是通过部分预留基础来管理的。状态

**存储(RAM):** 在 EOS 架构中，状态存储表示与应用逻辑一致的信息。块生产者将公布他们的带宽日志存储、计算债务和状态存储的可用容量。状态存储可用性取决于帐户持有的令牌数量。与带宽和计算不同，状态存储不能出租或委托给其他帐户。应用程序状态的存储要求帐户在网络中有标记。

3)定义状态:状态通过 EOSs DBMS 基础设施跨动作持久化。这优化了主动存储在 multiindex 表中的操作和事务的便利性。状态持久性是系统保持交易和数据记录所必需的；在此架构中，应用程序状态的修改需要写访问权限，并且是按顺序进行的。通过验证逻辑，用于从日志存储中重新创建应用程序状态的计算负担可以分为三个部分:

*   验证行动是否内部一致
*   验证是否满足前提条件
*   应用程序状态的修改

该过程的只读方面可以并行进行，而当如共享锁/排他锁系统中所预期的那样涉及状态改变时，需要写访问的修改必须顺序进行。由于契约中的操作在操作上下文中操作，因此提供了几个服务来更好地促进操作的执行:

*   动作被给予对工作记忆的访问，工作记忆允许工作状态存在。
*   当执行新的动作时，会分配一个新的工作记忆储备，因为动作的上下文是相互隔离的，因为每个动作都是独立操作的，没有任何其他动作的后验知识。
*   该网络的持久状态通过 EOS 数据库分配给这些动作上下文，该数据库存储和分发该状态信息。

4) EOS 数据库:用于对象存储的模型允许通过 eosio::multi index C++类利用多个索引的检索功能。这允许契约读取和修改存在于 EOS 数据库中的状态历史。与传统数据库一样，eosio::multi index 允许用户在一系列列和行上定义表的索引函数。

*   C++接口提供了一个同构的容器，该容器通过从对象派生的键由多个索引来组织。
*   这种结构可以与 Boost 多索引容器相媲美，从概念上讲，它可以被视为传统数据库设置中的表。
*   EOS 多索引数据库也有类似于 C++数据库迭代器的迭代器。

![](img/259ff0d8dd48aebbf3e88e4ffa80b9de.png)

**Fig. 7\. Overview of How EOS MultiIndex DB Works**

5)多索引表:EOS 的 RAM 基础结构利用多索引表来存储状态数据，并允许创建、读取、更新和删除(CRUD)操作。该数据库提供了一种可访问的方法来存储与智能合约相关的数据，其中操作无法访问其他操作的上下文。两个主要组件包括:

*   代表合同帐户的代码
*   代表负责 RAM 费用和合同用户的特定账户的范围；部署合同的位置

这些多索引表的设置如图 7 所示。

EOS 数据库的多索引表用作与网络相关的状态的直接参考来源。由于定义了表的模式，eosio::multi index 将负责设置实例化表的契约。Nodeos 实例通过读取数据库的 REST API 提供访问，将数据库保存在内存中。有多种查询数据库的方法。在客户端，使用 RPC API 的 Cleos 可以访问数据库状态。帐户之间的访问也可以通过 eosio.cdt 提供的 require auth 方法进行授权，该方法接受参数帐户名并指定访问授权。eosio.token 契约跟踪数据库中用户的余额。

6)分析:如前面分析所述，根据传统定义，EOS 系统架构不是一个区块链，而是一个非自治的同质分布式数据库系统。正如 EOS 架构规范中所述，该系统是基于分布式数据库结构创建的。它不具有传统定义区块链的相同特征，但更类似于 DBMS，并且更特别地用作非自治的同构分布式数据库。EOS 系统旨在复制可从最终数据库中获得的重要功能。该系统旨在将关系数据库属性分配给 boost 多索引表。这存储了通过 boost 库调用在网络参与者之间共享的数据，boost 库调用在每个用户之间传输数据。虽然大多数交易和信息的移动都存储在系统的数据库结构中，但是它的表会随着动作在系统中的推进而更新。EOS 中的状态依赖于存储在数据库中的数据，其中不使用加密证明或验证。EOS 系统基础设施中的状态主要取决于数据在多索引表中的存储方式。在 EOS 中，没有用于访问未决事务的内存池，因为多索引表不是开源的。交易在黑箱中处理，导致进一步的混乱。就加密属性而言，存在与彼此之间的事务散列相关的松散属性，以及增量 Merkle 组件，尽管似乎大多数数据在系统内的数据库存储库之间流动。整个数据库可以无限回滚。在这个系统中，共识不是为了验证交易而设计的，而是为了最大化系统处理更高级交易的能力。从这个架构设计中，可以进一步看出这个系统不应该被描述为区块链。

**E .执行环境**

1)概述:网络内设置的执行环境和节点决定了基础设施级别的趋势。节点设置将决定现实环境中的分散性、可伸缩性、网络健壮性和整体容错性的某些方面。控制配置差异，了解消息如何在底层系统中传播是很重要的。

2)设置:EOS 是一个全面的网络，具有大量的服务器和用户生态系统，旨在将该平台用于托管网络环境中的计算资源和应用实例化。该网络似乎划分在三个主要层之间，如 8:

*   EOS 核心网络:最内层
*   EOS 接入网:封装核心网
*   EOS 消费者:由全球社区访问的网络

在这种软件体系结构中，要做的一个区别是，不同的层确实允许域之间的移动，其中在栈之间没有强制边界。同构分布式数据库中的这种设置允许在整个系统中自由共享信息，从而允许不同的用户访问在块生产商的服务器架构中控制的计算。

3) EOS 核心网络:EOS 核心网络由块生产者组成，这些块生产者由工业规模的服务器组成，这些服务器被设计成向网状网络中的所有用户提供分布式计算，如图 9 所示。21 个块生产者节点被设计为容纳高级计算，以便接收对等体从生产者获得最大计算能力。主服务器网络的架构提供了必要的冗余，以便在主服务器无法运行时激活故障保护服务器。服务器被设计为由强大的防火墙保护。单个块生产者可以由多个具有冗余磁盘空间和补充容量的工业级服务器组成。为了网络的安全，块生产者的身份和位置是匿名的。这些服务器旨在为网络处理提供高可用性，同时阻止任何独立第三方的访问。

![](img/72e0a07c52604858e6cdfbcb0c6215cc.png)

**Fig. 8\. Network Access Layers of the EOS System**

![](img/f8d1fcbdb5baf14d01c2941e229b10bc.png)

**Fig. 9\. The Role of The Core Network in EOS**

块生产者使用他们拥有的过高的计算能力来同步执行，以提供通过同构数据库架构分布的吞吐量和处理。

4) EOS 接入网络:EOS 网络被设计成在分布式网络环境中提供水平可伸缩性。这种可扩展性是通过将大部分处理能力放在 EOS 核心网络中实现的。为了确保核心网络能够专注于提供更高的计算处理能力，EOS 接入网络过滤来自 EOS 消费者的请求，如图 10 所示。接入网络层设计为减轻核心网络的处理开销，而不是处理事务。

![](img/1d2487123f5345f20e1944cc3b66755c.png)

**Fig. 10\. The Role of the Access Network in EOS**

接入网络依靠几种相同的安全预防措施和防火墙来防止外部进入该网络。如果建立了可信度，并且令牌持有者成功地对节点进行了投票，则接入网络节点有朝一日也可以成为核心网络中的块生产者。主要角色的指定依赖于一组插件，而节点理论上能够执行任何动作。接入网络的正式功能包括:代理服务、负载平衡和 DDoS 保护。接入网络包含两种附加类型的节点:API 节点和种子节点。

负载的 API 节点从其他节点工作，并在代理或负载平衡器后运行。它们旨在处理预处理事务，并降低事务到达生产节点的可能性。API 节点还处理操作请求，过滤掉错误的事务，并将正确的事务转发给块生成器或其他节点。每个生成器都有一个关联的 API 节点。

种子节点帮助连接到网络并跟踪区块链。它们负责在整个网络中传播块，尽管不是所有的种子节点都会验证这些块。通过保持与块生产者的同步，如果种子节点正确运行并获得足够的投票，它们可能能够成为块生产者。种子节点仅使用 EOS 网络协议进行通信，但不处理事务，不配置为运行 HTTP 协议，但不能通过 Cleos 访问。块生成器都至少有一个关联的种子节点。

5) EOS 消费者网络:消费者网络由所有访问 EOS 的群体组成。消费者通常通过 Cleos 或直接使用 EOS RPC API 来获得访问权限。验证节点通过在块生产者和消费者之间传递信息来提供帮助。为了让网络用户访问系统的计算资源，他们需要首先通过接入网络请求访问，然后最终从核心网络层获得计算资源。

6)分析:通过理解执行环境设置和生态系统中节点的配置，可以阐明关于 EOS 架构的更多信息。为了让消费者能够访问网络中的 EOS 计算资源，他们需要绕过几个控制层，最终获得对网络的访问。

由于网络是从自上而下的角度构建的，这限制了在执行基本网络功能时的分散参与，因此用户必须浏览软件层次结构的几层。这在核心网和接入网之间的关系中得到进一步说明。

这种类型的集中式配置对于自上而下的命令和控制系统基础设施来说是最佳的，尽管对于被设计为基础层区块链协议的分散式系统来说不一定有效。EOS 核心网络由不透明的服务器组成，由于防火墙和网络隔离，这些服务器不共享正在处理的源代码。给定这种结构，实施算法或加密证明，以验证块生产者实际上正在运行公开可用的 EOS 存储库中提供的相同软件或客户端(这将在第 III 节中进一步探讨)。

正如前面的分析中提到的，EOS 架构反映了像 Amazon Web Services (AWS)这样的客户端/服务器模型中的预期，其中对软件的大部分计算和存储功能的访问由资源提供商集中存储。在 EOS 的情况下，资源提供者是 21 个区块生产者及其服务器架构，它们被设计为向客户提供计算资源。EOS 用户不共享任何资源，在获得任何资源之前，必须通过服务器同意请求访问。

或者，以太坊减少了客户机/服务器交互之间的区别。因为节点通过对等架构进行通信，所以参与以太坊的每个节点或客户端都能够参与网络验证以及访问网络。以太坊节点展示了该网络中客户端和服务器的特征，展示了在 Web 3.0 对等空间中如何实现这种新的去中心化模型的基石。在以太坊中，任何个人都可以建立一个以太坊节点并加入网络。不需要从网络中的中间层请求访问，也不需要从集中式服务器请求权限。建立一个以太坊节点将授权个人参与网络并验证交易。在 EOS 中，消费者无权享有这一权利，因为他们需要向区块生产商请求访问。基于这些发现，很明显，EOS 从根本上类似于没有区块链或对等网络的基本组件的集中式云计算架构。EOS 块生产者高度集中，用户只能使用块生产者作为中介来访问网络。块生产者是整个系统的单点故障。

**F .共识**

1)概述:分散系统的最后一个组成部分是不同的节点如何就网络中发生的事情达成一致。在未经许可的网络中，具有防止网络上的垃圾邮件和 Sybil 攻击的机制也很重要。EOS 协议使用一种 DPoS 机制，该机制实现了一种投票机制，旨在帮助防止参与者控制网络中的多个节点来为自己谋利。大部分共识来自网络中的投票和授权。

2)多阶段:DPoS 算法有两个阶段。第一阶段是赌注投票，这是算法允许实体在网络中承担块生产者角色以处理交易的方式。在这个投票方案中，代币持有者持有代币来投票给潜在的区块生产者。拥有最多投票令牌的前 21 个块生产者成为下一个时期的块生产者。投票系统对 EOS 设计至关重要，因为理论上它使令牌持有者能够投票给为网络提供大量资源的块生产者，并投票淘汰恶意行为的块生产者。一旦为下一个时期选择了块生产者，该算法就在块生产者之间使用传统的事务处理机制来就事务和合同执行达成一致。调度允许每个块生产者以 0.5 秒的间隔连续产生 6 个块。每个时期持续大约 126 秒(足以让每个块生产者各自产生 12 个块),然后重新计算系统中的投票以识别下一组块生产者

3)执行:当块生产者在他们的数据库中生成下一个块时，他们应该执行和验证网络中的客户端发送给他们的事务和契约。块生成器处理有效的事务和合同，并将它们包含在存储层中，同时过滤掉无效的事务和合同。一旦数据集被处理和构建，块生产者就将信息广播给网络中的其他块生产者。一旦 15 个区块生产商中的大多数验证并签署了数据集，交易就完成了。如果一个块生产者在活动时没有产生一组事务，则其他块生产者确认一个空的事务集，并继续到下一个时隙，以确保网络的生产率。

4)作为利害关系证明的交易:在 EOS 中，每笔交易指的是实现额外共识层的区块号。块生产者不一定验证块，而是以数据流服务中预期的方式捆绑事务。事务与网络中的先前块相关联，并且增量 Merkle 与多索引表并行实现。增量 Merkle 不直接与状态交互，而是作为一种数据结构短暂使用。

5)分析:因为大部分共识依赖于投票和授权，所以这些行为可能被破坏的任何实例完全否定了拜占庭容错的存在(BFT)。DPoS 旨在阻止行动者团体控制网络，尽管在实践中，投票系统主要用于确定哪些块生产者可以控制整个网络。由于令牌的集中，EOS 令牌持有者确保被投票选入系统的一群块生产者被允许处理事务，而不受非块生产者的阻碍。同时，一旦选择了块生产者，该算法的操作类似于其他传统的 DBMSs，其中事务吞吐量被最大化用于数据处理。

如果一个块生产者失败或以恶意的方式行动，EOS 协议的目的是让这些块生产者被投票淘汰。正如本报告后面所讨论的，有时这种投票系统的经济性可以阻止这种情况发生。基于投票系统和区块生产商的治理，EOS 系统在防止集中化的同时充分处理这些不良因素的能力存在严重问题。从概念上讲，EOS 是不可能实现拜占庭容错的。一个真正的 BFT 体系不容易形成卡特尔。正如将在包括绩效基准部分和经济部分在内的其他部分中描述的，在 EOS 中很容易形成卡特尔，因此否定了任何要求 BFT 的努力。

EOS 中实施的交易作为状态证明系统也存在问题。网络易受攻击，在攻击中，网络可能被与过去合法交易相关联的虚假交易所填充。该系统的数据库结构可以被描述为短暂的，而并发的更改可以无限地回滚。增量 Merkle 容易受到计时攻击，因为事务不一定是按顺序处理的，而是主观地基于处理的容易程度(更多内容将在第三节中探讨)。EOS 中的数据结构是连续的，而不是离散的。与提供概率最终性的工作证明系统不同，EOS 不一定提供任何最终性。由于整个数据库结构是基于位共享的，因此一个关键的定义特征是能够恢复状态并做出可以追溯到起源块的更改。

在 EOS 中，共识机制缺乏确定性或算法执行。块生产者主观地对从其他块生产者接收的事务达成共识，而不必依赖任何特定的密码证明来验证状态。在区块链技术中，努力使状态以离散的方式通过，尽管在像 EOS 这样的旨在实现并行处理的系统中，在处理非确定性以及死锁和竞争条件时存在许多问题。在交易已经在一个区块内实施之前，区块生成者对交易没有直接的可见性，这意味着区块生成者只能对错误的/恶意的交易采取追溯性的行动，这进一步增加了对共识验证的怀疑。EOS 具有非常有限的加密证明，并且没有算法上的强制执行，这导致了这样的结论:理论上，BFT 共识在 EOS 中是不可能的，并且网络不应该被描述为具有任何形式的 BFT。

# **三世。性能**

![](img/096551febf552f6924409e3e67bb4d07.png)

**Fig. 11\. Z. Cole’s Triangle**

**A .简介**

在评估区块链系统的架构时，重要的是要了解表征其设计的三个特定指标，如图 11 所示。

这三个指标在本质上是相关的:一个只能通过牺牲另一个来优化。由于它们本质上通常是异步和分布式的，与传统的客户机-服务器体系结构相比，区块链协议往往表现出较低的事务吞吐量。这通常是为了消除在固有的敌对环境中传输数据时对信任的需求而实施的计算穷举一致算法和安全机制的结果。进行无信任的点对点交易的能力，由加密证据验证和确保，使区块链技术成为在日益互联的全球社区中针对隐私和审查阻力的独特和创新的解决方案。上述定义了以比特币、以太坊或 ZCash 等流行的区块链系统为特征的去中心化和安全性。

确定状态变化的有效性是一项安全功能。提高这个过程的速度是一种性能优化。性能优化通常是以牺牲安全性为代价的，因为减少计算开销往往会在系统本身的整体安全性中出现漏洞。然而，这并不意味着计算穷举共识算法是安全的专有，因为当仔细设计和实现时，博弈论动力学可以补偿这种折衷。由于机制设计可能是一项艰巨的任务，因此可以通过限制公众参与或与区块链网络核心治理系统的直接互动来弥补这一损失，从而实现更高程度的集中化。

这些性能测试的目的是评估 EOS 系统相对于上面列出的三个指标所做的权衡，观察其性能的实际限制，并引用区块链开发社区倾向于识别和解决性能瓶颈的方式中的一个基本误解。

**B .概述**

测试系列和系统分析是在白块区块链测试平台上进行的，该平台提供了一个确定性框架，该框架提供了多节点供应、配置这些节点之间的网络条件以及在确定性和受控测试环境中自动化它们的事务和行为等功能。

由于区块链领域目前没有标准化的测试方法，以下方法将遵循白块测试方法，该方法结合了性能、安全性和并发测试模型，以适应区块链系统的动态、分布式和异步特性。

为了获得对 EOS 系统整体功能性能的结论性和客观的理解，在实验室环境中设计了一个实时网络。下一节将概述该环境及其附带模块的规格。后续章节描述了所采用的基准测试方法和这些实验的结果。最后，我们展示了与 EOS 系统评估中的关键性能指标相关的数据。

**C .范围**

1)软件版本:将要测试的 EOS 软件的版本将是 EOS GitHub 上主分支的最新版本，或者是作为生产使用的主要活动分支的任何版本，如果两者之间有差异的话。

![](img/fb6bb77734117f9762397bf96ade0eb5.png)

**TABLE I — SYSTEM SPECIFICATIONS**

2)客户端配置:每个客户端的配置文件将基于 EOS 开发人员门户中推荐的最佳实践进行配置，除非被认为是次优的，在这种情况下将提供推理和支持数据。

3)资源:为了对 EOS 系统的整体功能性能能力有一个结论性和客观的了解，将在白块框架内编制和部署一个实时网络。该环境及其附带模块的规格将在后面的章节中概述。

**D .测试环境**

1)概述:提议的测试计划将在 6 台机架安装式机箱服务器中进行，这些服务器经过精心设计，以最准确地反映 EOS 块生产商自己提供的计算环境。EOS block 生产商自我报告系统规格的示例可在 EOS 纽约网站上找到。

2)系统规格:测试环境由 6 台独立的高性能机器组成，旨在最准确地反映 EOS 模块生产商自己提供的计算环境。EOS block 生产商自我报告系统规格的示例可在纽约 EOS 网站上找到。

每台机器托管许多虚拟机，这些虚拟机在不同的测试场景中有所不同。这些虚拟机充当 EOS 网络中的客户端节点。每个节点运行 Ubuntu 18.04 LTS 操作系统。EOS 客户端的单个实例在每个节点上运行，这些节点通过 Whiteblock 平台进行配置和管理，以通过块生成器提交操作。在每项测试中，根据 EOS 文件中的客户规格配置了 21 个区块生产商。每个都有一个配置文件并运行 Nodeos 客户端。源代码是从 EOS GitHub 库下载并编译的。

3)网络拓扑:节点在单个链内对等，即，网络指的是单个起源块。这些节点与外界断开连接，因此只能相互对等，但是，每个节点都在自己的隔离网络中运行，并被分配了自己的 IP 地址，以确保彼此之间的逻辑隔离，从而允许 Whiteblock 框架配置和实施网络条件，如延迟和数据包丢失，以高度准确地模拟现实性能。

**E .测试配置**

处于暂停状态时，配置分布在节点之间，因此客户端初始化不包括在任何基准中。

1)每个测试案例的测试程序:

1.  建立新网络
2.  创建帐户
3.  配置块生产者节点
4.  配置客户端/用户节点
5.  除非另有规定，假设每个测试场景有 21 个区块生产商
6.  投票选出 21 个指定的制作人
7.  对适当数量的事务进行排队
8.  发送交易记录
9.  超时 10 秒
10.  将原始数据输出到数据库
11.  每次测试后解析并平均数据
12.  拆除网络
13.  格式化数据并推送至适当的回购

**F .性能指标和数据点**

1)块大小:测量单个块占用的平均存储空间；随时间绘制。

2)块时间:测量在区块链中生成下一个块所花费的平均时间量；随时间绘制。

3)交易吞吐量:衡量一个价值单位从一个个人持有人的账户转移到另一个持有人的账户所需的时间。

1.  块吞吐量:根据块中的事务数量除以创建该块所用的时间来计算。
2.  链吞吐量:是基于块吞吐量值的历史平均值计算的总吞吐量。

根据特定的变量和其他网络条件，这两个指标可能会有很大的不同。为了简单起见，除非另有说明，否则当提到吞吐量时，我们指的是块吞吐量。

4) CPU 使用率:测量平均 CPU 使用率；绘制一段时间内的 CPU 使用情况

5)网络使用情况:测量整体网络使用情况；绘制一段时间内的整体网络使用情况

6)交易 ID:与单个交易相关的唯一散列。

7)事务大小:测量并记录单个事务占用的内存空间总量，包括块头和任何附带的元数据。有时也称为交易权重。

3)资源:为了对 EOS 系统的整体功能性能能力有一个结论性和客观的了解，将在白块框架内编制和部署一个实时网络。该环境及其附带模块的规格将在后面的章节中概述。

**D .测试环境**

1)概述:提议的测试计划将在 6 台机架安装式机箱服务器中进行，这些服务器经过精心设计，以最准确地反映 EOS 块生产商自己提供的计算环境。EOS block 生产商自我报告系统规格的示例可在 EOS 纽约网站上找到。

2)系统规格:测试环境由 6 台独立的高性能机器组成，旨在最准确地反映 EOS 模块生产商自己提供的计算环境。EOS block 生产商自我报告系统规格的示例可在纽约 EOS 网站上找到。

每台机器托管许多虚拟机，这些虚拟机在不同的测试场景中有所不同。这些虚拟机充当 EOS 网络中的客户端节点。每个节点运行 Ubuntu 18.04 LTS 操作系统。EOS 客户端的单个实例在每个节点上运行，这些节点通过 Whiteblock 平台进行配置和管理，以通过块生成器提交操作。在每项测试中，根据 EOS 文件中的客户规格配置了 21 个区块生产商。每个都有一个配置文件并运行 Nodeos 客户端。源代码是从 EOS GitHub 库下载并编译的。

3)网络拓扑:节点在单个链内对等，即，网络指的是单个起源块。这些节点与外界断开连接，因此只能相互对等，但是，每个节点都在自己的隔离网络中运行，并被分配了自己的 IP 地址，以确保彼此之间的逻辑隔离，从而允许 Whiteblock 框架配置和实施网络条件，如延迟和数据包丢失，以高度准确地模拟现实性能。

**E .测试配置**

处于暂停状态时，配置分布在节点之间，因此客户端初始化不包括在任何基准中。

1)每个测试案例的测试程序:

1.  建立新网络
2.  创建帐户
3.  配置块生产者节点
4.  配置客户端/用户节点
5.  除非另有规定，假设每个测试场景有 21 个区块生产商
6.  投票选出 21 个指定的制作人
7.  对适当数量的事务进行排队
8.  发送交易记录
9.  超时 10 秒
10.  将原始数据输出到数据库
11.  每次测试后解析并平均数据
12.  拆除网络
13.  格式化数据并推送至适当的回购

**F .性能指标和数据点**

1)块大小:测量单个块占用的平均存储空间；随时间绘制。

2)块时间:测量在区块链中生成下一个块所花费的平均时间量；随时间绘制。

3)交易吞吐量:衡量一个价值单位从一个个人持有人的账户转移到另一个持有人的账户所需的时间。

1.  块吞吐量:根据块中的事务数量除以创建该块所用的时间来计算。
2.  链吞吐量:是基于块吞吐量值的历史平均值计算的总吞吐量。

根据特定的变量和其他网络条件，这两个指标可能会有很大的不同。为了简单起见，除非另有说明，否则当提到吞吐量时，我们指的是块吞吐量。

4) CPU 使用率:测量平均 CPU 使用率；绘制一段时间内的 CPU 使用情况

5)网络使用情况:测量整体网络使用情况；绘制一段时间内的整体网络使用情况

6)交易 ID:与单个交易相关的唯一散列。

7)事务大小:测量并记录单个事务占用的内存空间总量，包括块头和任何附带的元数据。有时称为交易重量。

![](img/2d31b82662dc7322572f2c79720a6967.png)

**TABLE II — TEST SERIES A: NETWORK LATENCY**

8)账户:维护与交易活动相关的特定账户相关的活动日志。在 EOS 系统中，账户被定义为 12 个字符的可读字符串。每个帐户都指一个用户的公共和私人密钥。关键帧是使用从比特币借来的 sekp256k1 椭圆曲线参数生成的。

1.  发送方账户:指发送交易的账户。
2.  收款账户:指收到交易的账户。

9)发送时间:维护一个日志，该日志由每次向网络广播事务的时间戳组成。

10)接收时间:维护一个由时间戳组成的日志，记录接收账户中何时有已发送的交易。

11)总时间:维护特定测试用例或系列运行总时间的日志。测试环境中每个新测试用例或系列的第一个动作标记开始时间，最后一个动作标记结束时间。

12)块高度:为特定的测试系列或测试用例维护一个链中块总数的日志。

13)成功的事务:另一个需要注意的重要指标是，尽管事务吞吐量在各种测试中保持相当一致，但成功的事务数量呈指数级下降。

**G .性能测试**

这项调查的绩效测试是在 6 个不同指标的系列中进行的。

*   系列 A:网络延迟
*   B 系列:每个客户的交易数量
*   系列 C:每个客户的交易量
*   D 系列:数据包丢失
*   E 系列:砌块生产商数量
*   F 系列:客户数量增加

每一系列的测试都涉及三个测试用例。表 II-VII 显示了拓扑设置、测试的变量以及与每个测试系列相关的指标。

![](img/f496b949ad18e475443ad26b34fd9d24.png)

**TABLE III — TEST SERIES B: NUMBER OF TRANSACTIONS PER CLIENT**

![](img/6c07b57d87587582da02b5580fdc5992.png)

**TABLE IV — TEST SERIES C: SIZE OF TRANSACTIONS PER CLIENT**

![](img/b6c31c73ec3e5ea391cb6612706caa7c.png)

**TABLE V — TEST SERIES D: PACKET LOSS**

![](img/e821cd33137b8937d1060a815510aef5.png)

**TABLE VI — TEST SERIES E: NUMBER OF BLOCK PRODUCERS**

![](img/4f2ae50d94e55104e1214aeec86e660b.png)

**TABLE VII — TEST SERIES F: HIGHER NUMBER OF CLIENTS**

**H .共识测试**

1)投票:与 BitShares 类似，EOS 系统内的共识是通过委托的利益证明(dpo)建立的，这完全取决于社区参与，以便有效投票或委托哪些节点将成为区块生产者。

该投票机制假设大部分社区将实际参与该投票过程，但是，实际令牌所有者的百分比似乎很低，这意味着那些投票的人很可能与特定的块制作者结盟。由于没有办法从算法上防止卡特尔的形成，我们可以假设大多数选民这样做只是为了确保他们自己的利益。这是一个无形的数据点，无法通过我们的测试计划进行确定性测量，但是，我们可以测试网络中允许的投票操纵程度。由于用户可以通过代理投票，这些代理对投票过程的控制程度如何？我们可以通过尝试故意拒绝网络投票，而不是广播投票或将投票推给负责投票的智能合约来测试这一点。

当用户为块生产者投票时，该投票作为交易被广播到网络。如果帐户被列入黑名单/冻结，投票将不会通过。这表明，如果将正确的账户列入黑名单/冻结，大宗商品生产商将能够保住他们的头寸。这可能需要一些共谋，因为黑名单将需要在大多数块生产商之间共享。

砌块生产商每天生产大量的 EOS(10000 美元以上)。这意味着这些区块生产商可以简单地创建新账户和/或使用代理，并将他们的 EO 重新分配给这些账户，以投票给他们自己或他们可能选择与之结盟的其他区块生产商，从而形成某种区块生产商卡特尔。这样，这些块生产者可以保持块生产者，即使它是作为不同的节点/帐户，并且它们的盟友保持对网络的控制。

2) Sybil 攻击:Block 制作者有能力将账号列入黑名单。如果恶意行为者(或一组恶意行为者)试图在网络上执行拒绝服务攻击，块制作者可以通过黑名单来简单地限制帐户的可访问性，但是，这种阻止类似 Sybil 的行为的方法只能在块制作者识别出恶意行为者、达成共识以便将有问题的帐户列入黑名单，并且该帐户已被手动列入黑名单时实施。尽管创建一个帐户只需花费极少量的 EOS，但是黑名单过程比创建新帐户和提交交易的速度要慢，这使得该过程在减少这种攻击的发生方面无效。

防止这种事件的另一种机制是通过使用 API 节点来解决的，这些 API 节点是代表块生成器实现的，以提供类似于负载平衡器的功能。由于新账户的创建是无关紧要的，并且交易不会产生相关费用，所以可以假设这些负载平衡器/代理的存在对于任何具有攻击 EOS 网络的技术能力的人来说是一个微小的不便。可以通过确定测试环境中事务处理能力的上限，然后有意地长时间超出这些上限，以观察对网络的影响，来测试这一假设。

EOS 黑名单机制要求所有 21 个块生产者共享同一个黑名单，该黑名单不在所有块生产者之间广播。每个区块生产商黑名单都存储在本地，但生产商在某种程度上需要彼此共享他们的黑名单。此功能的限制可以通过评估某个账户(一旦被某个特定的大宗商品生产商列入黑名单)是否可以简单地等待另一个生产商的下一轮大宗商品生产，以确保其交易通过另一个生产商推送，来进行实际测试。这也揭示了节点(特别是本例中的块生产者)缺乏广播/同步，这表明 EOS 网络不依赖于对等通信，并且块生产者之间存在巨大的脱节。

3)客户端软件:在他 2004 年描述可重用工作证明的研究中，Hal Finney 还提出了透明服务器的概念，其中分布式网络服务器提供了一定程度的证明，证明它们运行的程序确实是由它们提供给公众的代码生成的。为了将这一概念带入上下文，EOS 网络内的区块生产商只提供他们决定提供的透明度。不能保证块生成器运行的是正确的客户端。由于 EOS 系统内的大多数安全机制依赖于块生产者本身的意图，所以没有算法强制或可用的方法来验证块生产者正在运行的 EOS 软件。

虽然更传统的区块链系统唤起了某种程度的博弈论，以避免在固有的敌对环境中对信任的需求，但 EOS 网络中的参与者需要简单地相信，块生产者正在以他们的最大利益行事，而没有任何将区块链系统与传统金融结构区分开来的加密或算法机制。dPoS 共识的支持者会声称，这些安全性牺牲是为了增强网络的整体性能，但这些数据点可以在该测试系列中进行客观评估。

源代码可以改到什么程度？我们通过对源代码进行修改并分析输出性能数据来测试这一点。

4) TPOS 漏洞:发现 TPOS 具有一些固有的漏洞，其原因如下:

*   事务只需要最近的块头的散列，以防止不同链上的事务重放，并通知网络用户和他们的股份在特定分支上。对于要添加到块中的事务，不需要额外的验证。
*   事务由多索引表引用，但这不能确保块生产者没有篡改状态(参见上面的容错部分)。

**一、结果**

1)系列 A:测试系列 A 的目的是在不同的网络延迟条件下评估网络，并建立一个基础案例，以便将结果与其他测试系列进行比较。网络内的往返时间(RTT)在 0 毫秒、50 毫秒和 100 毫秒之间变化。如表 II 所示，高水平的 TPS 在 0 毫秒的往返延迟下持续。当 50 毫秒的 RTT 添加到系统中时，性能立即下降到 50 TPS 以下，表明延迟对吞吐量有显著影响。一旦 RTT 增加到 100 毫秒，性能会进一步下降。

2)B 系列:B 系列旨在改变每个客户发送的交易数量。从数据中可以看出，就 TPS 而言，每个客户端发送的事务数量对整体性能的影响有限。尽管可以对交易成功率进行进一步的研究，因为它与每个客户端发送的交易数量有关。

3)系列 C:系列 C 表明事务大小对总吞吐量有明显的影响。空事务大约为 137 btyes，吞吐量显示在 Series A test trial 1 中。随着事务大小的增加，性能会下降。

4)D 系列:数据表明丢包对性能有直接影响。在真实世界的分组丢失条件下，例如 0.001%分组丢失或 0.01%分组丢失，TPS 遭受巨大的损失，其性能接近与 TPS 的以太坊水平相当的程度。

5)E 系列:E 系列改变了网络中砌块生产商的数量。结果表明，生产者数量和生产能力之间存在正相关关系。然而，进一步的研究是必要的，以更好地了解这一趋势。

6)F 系列:系统中的客户数量从 100、200 到 300 不等。从数据中可以看出，增加网络中客户端数量的效果并不明显。该测试可以进一步推广到更多的客户端，以测试网络对现实环境的整体适应能力。

![](img/6354ac76937fa99cc0a6639ff47ad354.png)

**Fig. 12\. Throughput By Test Case**

![](img/0294637af3788aa54e069562f299df51.png)

**TABLE VIII — SUCCESSFULLY PROCESSED TRANSACTIONS**

**J .分析**

实施真实世界网络延迟和数据包丢失等因素时观察到的性能指标表明，EOS 中的 TPS 接近与以太坊相当的水平。同时，事务大小的增加也会导致事务吞吐量的降低。这导致了一种预测，即营销文档中展示的高水平交易吞吐量是在理想的网络条件下实现的，而不是在现实世界的网络条件下。此外，应当注意，EOS 能够选择性地选择要在系统中处理的交易，而不是使用预定的算法。这可以导致网络挑选出较小/较容易处理的事务，以便最大化事务吞吐量。

当评估已处理事务的成功率时，很明显，网络并没有减轻拥塞，而是避开了拥塞。由于在某些试验中，事务成功率可能下降到 1%以下，因此可以假设未处理的事务保存在堆中。这些事务的命运目前是未知的，因为忽略堆中的事务可能是用来增加感知的事务吞吐量的另一种机制。

![](img/4439ae39a9331a13970d97793cd58ad3.png)

**Fig. 13\. Transaction Sent from blacc2 to blacc3**

1) Sybil 攻击测试:

a)概述:

*   由大多数块生产者将帐户列入黑名单
*   从黑名单帐户发送多笔交易
*   检查这些交易将被成功处理还是拒绝
*   观察哪个块生产者已经将列入黑名单的账户交易包括到块中

b)步骤:

*   创建 3 个 BPs 节点
*   创建 3 个客户端节点
*   2 块生产者黑名单所有客户
*   向 config . ini 添加黑名单
*   " actor-blacklist = blacc1 "，
*   “actor-blacklist = blacc2”，
*   " actor-blacklist = blacc3 "，
*   对 BP 节点 1 和 2 重复上述步骤
*   杀死 nodeos
*   使用更新的配置文件重新初始化节点操作系统
*   有黑名单账户发送交易
*   检查块日志，查看块中是否包含任何事务

c)结果:

在该系统中，创建了三个块生产者来代表网络。该装置由一个用于建立网络的 genesis 区块生产商和三个区块生产商组成；EOSIO、制作人 2、制作人 3 和制作人 4。网络中的每个账户；blacc1、blacc2 和 blacc3 各分配了 10 个系统。在该网络中，块生产者 1 和生产者 2 具有黑名单账户 blacc1、blacc2 和 blacc3，而生产者 3 没有更新他们的黑名单。当连续的事务被发送到系统中时，块生产者 1 和 2 由于其更新的黑名单而停止事务的发生，尽管当由第三块生产者处理时事务被成功执行，如图 13 所示。

如图 14 和图 15 所示，账户 blacc1 具有 9 个 SYS，而 blacc2 具有 11 个 SYS，表明交易被成功处理，因为每个账户最初以 10 个 SYS 开始。

d)分析:

这一成功交易的含义是，黑名单没有一个协调的共识机制来在算法上实施其规则。黑名单只是一个注册表，需要受信任的块生产者来管理和实现。这进一步意味着在 BFT 环境中没有真正的一致算法，因为系统经常容易受到垃圾邮件和 DDoS 攻击。事实上，这是系统中的一个大漏洞，因为欺诈用户创建恶意帐户的速度远远快于黑名单制作者就黑名单内容达成共识的速度。区块生产商实际上并不基于任何共识算法处理交易，而是以机械的方式处理交易，因为没有交易有效性的正式验证。

恶意行为者能够发送欺诈性的交易，只要他们在块生产者能够达成社会协议将他们的帐户列入黑名单并一致更新他们的黑名单之前采取行动。需要注意的是，为了更新黑名单，必须关闭<nodeos>，然后重启系统，同时使用更新的<con>文件重新进入网络。一个熟练的对手能够以最低的成本创建多个帐户，比所有块生产者在黑名单上达成社会协议、更新他们的配置文件并重新启动他们的 nodeos 实例要快得多。在进行该过程所需的时间范围内，恶意行为者已经可以绕过任何黑名单执行多次后续垃圾邮件攻击。</con></nodeos>

2)投票:

![](img/d464ea99e50acaa7c5c0551a9b49dbc3.png)![](img/7beafc57f5a72c5a59825ede202b0d45.png)

a)概述:

*   每个街区制作商会将所有投票者列入黑名单
*   客户端节点为不同的 BP 投票
*   调查英国石油公司是否会保住他们的位置

b)步骤:

*   创建 22 个 BP 节点
*   创建 1 个客户端节点
*   给予客户端节点大部分网络 SYS
*   BP1–21 会将客户端节点列入黑名单
*   向 config . ini 添加黑名单
*   " actor-blacklist = blacc1 "，
*   杀死 nodeos
*   使用更新的配置文件重新初始化节点操作系统
*   客户端节点将尝试投票给 BP22
*   检查 BP22 是否已成为 21 个 BP 中的一个

c)结果:

图 16 表示所有块生产者拥有的投票。在此测试中，一个帐户被手动分配了网络中的大部分 SYS。SYS 直接从 EOSIO 中提取，并直接发送到帐户 blacc1。一个协调的努力被执行，块生产者将这个帐户列入黑名单。

如图 17 所示，账户和产生的交易现在在协调黑名单上。如图所示，帐户 blacc1 试图向其帐户分配带宽，但未被允许。这意味着黑名单中的帐户:blacc1 不能再委托带宽、投票给块生产者或发送事务。该账户现已完全冻结。

d)分析:

这种类型的攻击可以通过块生产者简单地访问浏览器来辨别具有最大投票权的 EOS 持有者，并合谋将威胁其作为块生产者存在的权威的帐户列入黑名单来执行。区分系统中的这种类型的漏洞很重要，因为没有算法规则阻止块生产者以这种方式行事。没有建立适当的协议来防止块生产者相互勾结以维持他们作为块生产者的角色。这进一步证明了 EOS 网络中存在的高度集中以及这些区块生产商拥有的巨大力量。

3)源代码和客户端软件:

a)概述:

*   对其中一个 BP 的源代码进行更改
*   重建网络
*   看看 BP 和客户能否在网络中交流和参与

b)步骤:

*   制造 21 个基点
*   创建 5 个客户端节点
*   损坏位于“chain plugin.go”中的源代码
*   第 360–363 行
*   如果(！已知未到期交易(id))f…g
*   第 354–358 行
*   auto id = Trx-> id()；
*   if(fc::时间点(Trx-> expiration())> = block time)f…g
*   杀死 nodeos
*   使用损坏的源代码重新初始化节点操作系统
*   检查源代码被破坏的块生产者是否可以加入网络

c)结果:

在该网络中，其中一个数据块生产商配置了客户端软件，该软件可阻止所有处理的交易。块生成器按照预设的时间表以循环方式处理事务。在这个网络中不断地发送事务，并且每当激活具有被破坏软件的块生产者来处理事务时，在这个系统中记录错误。

图 18 表示在该网络中不断处理事务，如节点<warning: transaction="" executed="" locally="" but="" may="" not="" be="" con="" by="" the="" network="" yet="">所示。尽管重要的是要注意与网络中出现的重复交易相关的错误。每次代码错误的块生成器处理事务时，都会出现重复事务错误。在复制事务错误之后，非故障块生产者继续成功地处理事务。这里要强调的一点是，只有运行修改后的源代码的块生产者才能注意到重复的事务错误。系统中没有任何内容允许其他区块生产商审核出错区块生产商的日志，因为系统依赖于社会信任，即每个区块生产商都正确运行正确的软件，并且没有对该软件的正式验证。</warning:>

d)分析:

这是系统中的一个严重漏洞。如果块生产者不需要透露他们正在运行的代码，块生产者可以改变他们的系统，以一种邪恶的方式行动。由于该系统的黑盒性质，块生产者有能力在没有得到网络其余部分同意的情况下恶意改变块交易。这种特殊的漏洞进一步表明，由于网络的底层基础设施没有配置为区块链，而是一个不透明的数据中心网络，因此整个网络没有可行的一致性算法。

![](img/84926f8b0890df9f61aff0b9eb80cfc9.png)

4)作为股权脆弱性证据的交易:

a)概述:

*   划分网络
*   发送不同的事务来构建不同的多索引表
*   重新引入节点
*   从客户端节点发送事务
*   检查交易记录是否已包括在该块中

b)结果:

发现了该测试的局限性。如前所述，多索引表充当一个内存池，用于包含未处理的事务。然而，除了让进程作为带有堆检查的调试器的从属进程运行之外，没有任何方法可以查看内存池的当前状态。与直觉相反，在这种软件架构中，只有软件本身能够访问网络的多索引，这使得开源开发者忽略了关于未处理事务的信息。

c)分析:

这种可访问性的缺乏不是开源软件的特征。通常在开源生态系统中，开发人员应该能够访问这些类型的数据库。期望开发者应该能够访问多索引表，以便验证交易是合法的。遗憾的是，从源代码中可以看出，除了块生产商将事务包含在事务中之外，没有正式的验证协议来验证事务。该系统的配置引入了进一步的怀疑，正如我们在对网络未成功处理的孤立交易的命运的性能测试中所提到的。在以太坊中，孤立的和陈旧的事务对于网络来说是显而易见的，可以在可用的内存池中看到，而经济学被用来确定是挖掘者还是验证者选择处理那些事务。

在 EOS 中，没有真正的机制来决定未处理事务的命运。在我们的性能部分提到的一个理论是，有选择地选择事务是为了最大化系统中的事务吞吐量，同时绕过会导致网络拥塞的困难事务。以这种方式挑选事务并不能缓解网络拥塞，反而会忽略网络拥塞。这意味着未处理的事务被保存在计算机堆中，而只有简单的事务被成功处理。未处理的事务基本上被遗留下来，因为无法访问存放这些事务的多索引表。这一证据进一步质疑了 EOS 的设计，以及它作为一个软件如何不能成功地优化发送到网络的交易处理的一致性。

# **四。经济系统分析**

在以区块链为基础的网络中，实施有效的博弈论设计对系统的成功至关重要。这些系统着手这样做的方法通常依赖于适当的象征经济学，它试图使用某种程度的经济奖励来激励人类行为。EOS 系统试图提供它自己的这种模型，下面的部分说明了 EOS 令牌的经济性。

**a . EOS 令牌的上下文**

在讨论 EOS 令牌经济学的细节之前，提供一些关于 EOS 令牌历史的背景是很重要的，包括系统中涉及的技术、令牌销售及其分发的流程，以及生态系统中各种利益主体的背景。EOS 在 2017 年成为一个潜在的去中心化应用平台，当时市场领先的去中心化应用平台以太坊遇到了显著的性能和扩展挑战，包括高费用、区块链膨胀增加和次优交易时间，这对用户体验产生了巨大影响。

EOS 平台由 Dan Larimer 提出，他有开发不同区块链项目的历史，最著名的是 Bitshares 和 Steem.it 平台的许多技术架构首次用于这些平台和系统，因此我们可以在适当的时候进行比较。从 Bitshares 和 Steem 继承来的主要内容是 Larimers 对授权的利害关系证明拜占庭容错(DPoS-BFT)共识机制的承诺，用于推动节点之间的协议。虽然该系统的性能和容错性将在其他章节中讨论，但我们将讨论 DPoS-BFT 系统如何影响 EOS 网络。

1)最初的代币销售:EOS 通过其代币销售的规模在媒体中作为一股力量出现。在其代币销售期间，EOS 在一年的时间里筹集了 40 亿美元，这是迄今为止最大的代币销售。这些代币最初在以太坊网络上作为 ERC-20 代币出售。当 EOS 网络接近发布时，负责编写和构建 EOS 软件的团队 Block.one 执行了一项令牌交换，将 ERC-20 令牌交换为本机 EOS 令牌。代币互换是 EOS main-net 启动的关键组成部分，因为在 2018 年 6 月 2 日之前没有互换代币的代币持有者将失去兑换代币的机会。许多交易所同意为持有者自动交换代币，这有助于代币交换过程；最终，只有 0.3%的令牌没有被计算在内。

2)跨帐户分发令牌:在令牌销售的上下文中，了解谁拥有 EOS 令牌非常重要。EOS 令牌持有者的分布提供了对系统的经济集中化水平的洞察。正如后面将要讨论的，这种经济集中化深深地影响了系统的行为，因为 EOS 使用了 dpo。成员持有超过 10%的代币供应是违反 EOS 章程的。然而，这一规则很难执行，因为一个成员可以控制多个账户。截至 2018 年 6 月 3 日(EOS 主网推出时)，EOS 网络中的前十个地址控制了 10 亿个令牌中的 496 735 539 个(即 49.67%)，而前 100 个地址持有所有令牌的 74.82%。从这些数字来看，EOS 令牌似乎集中在少数几个地址中。即使在接受其中一些地址代表 exchange 钱包之后，这也会对 EOS 块生产者的治理产生影响，如第 IV.E 节所述。

3)代币通货膨胀:虽然在 EOS 首次发行硬币期间最初售出了 10 亿代币，但代币也有 5%的年通货膨胀率。EOS 之所以有这样的收费，是因为收费是为了取代网络用户的交易费。1%的收入支付给砌块生产商，作为保护网络的费用。在这百分之一中，0.25%的奖励给了区块生产者，而另外的 0.75%奖励给了获得 100 张以上 EOS 令牌票的备用区块生产者。其余的 4%存入一个名为工人提案基金的智能合同。据推测，工人提案基金由 EOS 令牌持有者管理，以进一步发展 EOS 生态系统，尽管目前没有这样做的流程。在 EOS 社区中有一些关于取消工人提案基金并改为燃烧这些令牌的讨论(这将使 EOS 令牌的年通胀率保持在 1%)。这些讨论是在 EOS 网络中不断增加的不确定因素的大背景下进行的:即，现在包括 RAM 市场交易的 1%费用。

**B. EOS 令牌实用程序**

在本节中，我们将重点介绍 EOS 令牌的各种实用程序。虽然加密货币市场目前充斥着许多被高估的项目，但在有效的市场中，各种代币的价值将与其系统中相应代币的基本效用相关联。因此，理解 EOS 网络中令牌的基本效用对于理解令牌的价值是重要的。

除了理解代币的经济价值之外，理解 EOS 代币效用对于分析围绕代币的加密经济系统也很重要，包括不同利益相关者之间的互动和关系。在大多数加密货币系统中，围绕系统本地资产的激励需要设计成鼓励各种属性:安全性、审查阻力和去中心化。这三个属性彼此紧密相连。通过理解 EOS 令牌实用程序，我们可以更好地理解其激励结构，从而更好地评估系统将如何根据这些属性发展。

1)为区块生产者投票:EOS 令牌的主要目的之一是为 DPoS 共识系统中的区块生产者投票。在委托的利害关系证明共识机制中，投票过程中的参与者使用他们的令牌来表示他们希望在下一个纪元中构造哪些块生产者。在每一轮投票中，获得最多支持的 21 个区块生产商。然后是砌块生产商之间的循环赛。每个块生成器构造 6 个块，块时间为 0.5 秒。如果一个块生产者错过了一个块，那么一个空的块被简单地提交给链。投票者不断地为区块生产者投票，如果他们不喜欢区块生产者的行为，就改变他们的投票。在每个块生产者构建他们的块集合之后，投票被重新评估以生成块生产者的净集合。在这个方案中，街区生产者向代币持有者征集选票以便当选。

EOS 中的投票系统有许多关键的细微差别。首先，帐户可以投票最多 30 块生产者。第二，一个帐户获得的票数是该帐户拥有的赌注代币的数量，因此未下注的代币不能用于投票。第三，当一个帐户为多个区块生产者投票时，区块生产者接收整个帐户余额的投票，即投票不会在区块生产者之间分开。例如，如果一个帐户有 10 个 EOS 令牌，并为 3 个不同的数据块生成者投票，那么这三个数据块生成者中的每一个都会收到 10 票。

2)资源的委托:EOS 令牌提供的第二个关键实用程序是委托网络资源。EOS 白皮书确定了区块链系统中资源的三个不同类别:带宽和日志存储、计算和计算积压以及状态存储。带宽是已发生的所有不同操作的日志，通过向分类帐添加字节的速率来衡量；从该日志中，可以重建系统的当前状态。计算指标是可以计费的 CPU 时间量(最大值为每秒 400 毫秒，EOS 网络上的平均值为每秒 40 毫秒)。CPU 时间分配给帐户，与帐户下注的令牌数量成比例。最后的资源是状态存储，在 EOS 白皮书中称为 RAM，它代表各种应用逻辑所需的信息。为了分发这些资源，EOS 协议利用 EOS 令牌。根据白皮书，如果一个帐户持有流通中的 EOS 令牌总数的 1%,则该帐户有权使用网络带宽、计算和状态存储(RAM)的 1%。

EOS 网络中资源的一个重要特征是令牌持有者如何出租带宽和计算。这意味着，如果令牌持有者没有使用分配给他们的全部带宽和计算，那么他们可以将额外的资源委托或出租给网络上的其他用户。然而，与带宽和计算不同，RAM 不能被委托。相反，可以根据之前确定的市场价格从 EOS 系统合同中购买 RAM。这些动态对 EOS 经济性的影响将在第 IV.E 节中进一步讨论。

3)RAM 市场中的费用:EOS 令牌的最终关键用途是 EOS 令牌用于支付 RAM 市场中的 1%费用。费用在 RAM 市场系统合同中烧掉。该费用的目的是抵消系统中的通货膨胀，抑制 RAM 市场中的投机者。

**C .了解 EOS 供需**

与任何经济体系一样，理解两个最基本的价格驱动因素很重要:供给和需求。

1) EOS 供应:代币发售期间共发售 10 亿代币。这一总数中的大部分是在主网上赎回的，而不是全部，这稍微减少了供应量。其次，EOS 令牌的通货膨胀率为 5%。其中 1%分配给砌块生产商(0.25%分配给当选砌块生产商，0.75%由获得投票的备用砌块生产商分配)。第三，EOS 令牌的流动性供应取决于当前有多少令牌被用于网络上的资源。如果应用程序开发者使用这些令牌来预订资源，则这些令牌基本上从供应中移除，因为应用程序开发者不打算出售这些令牌。第四，从控制 RAM 市场的 EOS 系统合约中购买 RAM 时，EOS 令牌作为费用被烧掉。最后，EOS 网络的第五个阻力是名称空间拍卖，令牌持有者可以在 EOS 网络中购买各种域名。这些代币被烧毁并停止供应。

如果 EOS 治理流程批准了变更，EOS 令牌的供应也可能会发生变化。为了实现这一点，15/21 区块的生产商必须在实施该变更前的 30 天内投票赞成该变更。

2) EOS 需求:对 EOS 令牌的需求基本上是由第 IV 节中讨论的各种实用程序驱动的。因此，需求应该基于 1)谁想要投票给块生产者(以及他们愿意为该权利支付多少)以及 2)谁想要访问网络上的资源(以及他们想要多少资源)。除了这两个因素，对 EOS 令牌的需求还受到加密货币市场总体动态的影响，在加密货币市场中，投机者通常依赖波动的繁荣-萧条周期来获取回报。

**d . EOS 代币的激励结构**

本节将试图说明 EOS 网络中不同利益相关者的不同激励结构，特别是关于 EOS 令牌。我们在 EOS 系统中确定了 4 个不同的利益相关者:用户、应用程序开发者、块生产者和备用块生产者。这些不同的利益相关者以不同的方式与 EOS 令牌交互。

1)用户:EOS 协议的主要目标之一是消除用户为了使用分散式应用而付费的需要。这是基于以太坊的分散化应用程序的用户体验中的一个较大的摩擦点，这些应用程序实现了一个 gas 模型，让用户负责支付在以太坊区块链上执行交易和其他操作所需的计算开销。这种汽油费还有助于防止网络上的垃圾邮件攻击，并对智能合同的复杂性进行了硬性限制，从而防止恶意代码阻碍网络(无限循环、暴力攻击等)。EOS 试图通过代表用户消除交易费用的需求来解决这一棘手问题。然而，在某种程度上，这进一步降低了用户持有代币的动机。

用户持有 EOS 令牌的主要动机是能够将授权委托给他们选择在验证交易和块的过程中代表他们行事的块生产者，但是，这可能会被块生产者自己破坏，因为没有确定性的机制来防止他们串通或为自己投票的能力。

2)应用开发者:在 EOS 网络中，开发者负责维护与运行他们的应用相关联的成本，并且在这样做时，EOS 系统能够提供免于服务相关费用的用户体验。这种机制意味着应用程序开发人员持有和持有 EOS 令牌以换取对必要资源的访问的强烈动机，这些资源确保了与他们的应用程序的低摩擦交互。或者，应用程序开发人员可以要求用户标记他们自己的令牌，以便与他们的应用程序进行交互。这类似于以太坊的 gas 模型，它将补偿与应用程序交互的成本的责任放在了用户身上。然而，这种范式可能意味着一种危险的 Web 2.0 模型:用户因此要依赖于应用程序开发人员才能访问他们与应用程序相关的数据或状态，因为这是在应用程序开发人员的控制之下，他们可以选择实现哪种模型，这也成为 EOS 经济模型允许甚至鼓励的一种应用程序级审查形式。

3)区块生产者:因为区块生产者使用 EOS 代币投票到位，所以区块生产者有强烈的动机持有 EOS 代币，以便他们可以为自己投票。大宗商品生产商也有强烈的动机去争取 EOS 令牌持有者的投票，以进一步确保他们作为大宗商品生产商的地位。这一投票过程引入了一种政治动态，将在第四. e 节中进一步讨论。

4)备用区块生产者:因为只选择了 21 个区块生产者，所以仍然有一大群人想要成为区块生产者，但是被卡在外面看不到。这些团体要么没有足够的 EOS 代币来投票让自己成为 block 制作人，要么没有获得足够的选票。出于多种原因，这些备用块生产者对于 EOS DPoS 模型至关重要。

备用区块生产商为现有区块生产商带来竞争。如果一个区块生产者表现不佳或不履行其职责，备用区块生产者将取代他们的位置。第二，备用块生产者充当容错机制；如果块生成器在 24 小时内没有生成块，则备用块生成器应该替换它们。备用区块生产商受到激励继续游说投票，因为每个区块产生的一部分投资奖励在他们之间分配。

【the EOS 区块生产商的投票和治理

如第四节所述。B.1，EOS 令牌的一个基本功能是为块生产者投票。这一功能的出现是因为 EOS 使用了委托利益证明，即令牌持有者投票决定他们希望谁来创建区块。然而，更高层次的管理，包括对协议的修改，是通过块生产者进行调解的。因此，块生产者的投票过程也是 EOS 网络在审查和升级方面进行管理的机制。

代币持有者不断投票给区块生产者。每个时期(126 个块)，前 21 个块生产者被选择用于下一个时期。通过赢得选举，块生产者在系统中被赋予巨大的权力:1)他们可以投票冻结帐户，2)他们可以改变恶意帐户代码，3)他们投票对协议进行更改和升级。因为投票过程与系统的经济性直接相关，所以理解 EOS 令牌价值、供给和激励的动态可以洞察网络是如何治理的。

很明显，EOS 网络是可以审查的，因为白皮书明确指出，块生产者可以同意冻结帐户更改恶意代码。我们已经看到账户被冻结，显示了网络的治理结构是如何允许审查的。这是因为 EOS 协议没有针对恶意参与者的算法、编码防御。相反，EOS 协议依赖于选定的块生产者的社会和仁慈的治理来保证安全性。通过扩展，协议的安全性基于 EOS 投票过程的健壮性。

理解 EOS 治理与令牌分发密切相关。在 EOS 网络中，当 21 个区块生产者中的 15 个同意时，就达成了共识(关于区块、行动和升级)。这为 EOS 治理的任何分析提供了基础。由于 EOS 令牌是少数账户中高度集中的金额，因此少数账户控制着大宗商品生产商的投票流程。事实上，有一些账户可以保证他们作为大宗商品生产商的地位，因为他们持有 EOS 令牌。

一个更大的担忧是，大型令牌持有者共同努力巩固他们的地位，使得恶意块生产者更难被投票淘汰。如果不同的令牌持有者相互通信，那么他们协调网络上的各种行动，包括审查账户和升级协议以加强他们自己的权威。然而，除了理论上的区块生产商勾结之外，有证据表明，区块生产商一直在相互交易选票，目的就是为了:维持他们作为区块生产商的角色。在被指控的报告中，一个主要的区块生产商和代币持有人 Huobi 提出为其他区块生产商投票，以换取一些区块生产商的股份。值得注意的是，这种行为违反了 EOS 章程。然而，我们还没有看到参与这种卡特尔化的账户被冻结，从而对 EOS 治理流程的公平性提出了质疑。

EOS 的治理体系从根本上依赖于区块生产商的问责。如果块生产者没有提供足够的资源或者没有遵守协议，那么令牌持有者必须能够投票淘汰他们。如果大宗商品生产商不公平地审查交易或智能合约，那么代币持有者必须能够投票否决它们。如果 block producer 支持令牌持有者不支持的网络升级或更改，那么令牌持有者必须能够投票否决它们。EOS 安全模型中的核心假设是令牌持有者有能力投票将坏人赶出他们的权力位置。块生产者可以一起工作，以确保他们在网络中的权威，这从根本上违背了对安全、分散和抵制审查的智能合约平台的要求。

**f . EOS 网络上的资源市场**

1)资源市场概述:EOS 系统的一个重要经济特征是资源的市场。EOS 使用与以太坊不同的资源分配模型。在 EOS 模型中，三种资源(带宽、计算和 RAM)是根据特定帐户拥有多少 EOS 令牌来分配的。块生产者负责分配与要求特定资源的令牌数量成比例的资源。如前所述，令牌持有者可以委托或出租他们有权获得的额外带宽或计算；然而，RAM 的情况并非如此。

在 EOS 资源市场中，资源是租用的。目标是长期租赁合同降低价格波动，减少由于高费用导致的短期拒绝服务攻击，并且更容易进行经济核算。然而，这种模式也带来了自身的挑战。首先，当代币在租赁合同中被锁定时，EOS 代币的流动性降低。随着流动性降低，EOS 令牌(以及最终带宽和计算的基础资产)的价格发现变得更加困难。其次，租金模式向大型代币持有者的寻租开放了资源市场。鉴于 EOS 令牌集中在少数账户中，寻租是一个更大的问题:因为少数账户控制了如此多的 EOS 令牌，资源的市场价格可以由系统中少数行为者控制。

投机和市场操纵的问题在 RAM 市场中尤为突出。我们已经看到区块生产商通过囤积 RAM 来抬高 RAM 的价格。通过囤积 RAM，令牌持有者实质上可以抬高价格，从试图访问这种资源的人那里榨取金钱。围绕 RAM 市场的这种投机使得 RAM 的价格变得难以承受，使得分散式应用难以运行。为了解决这个问题，EOS 团队实现了 Bancor 风格的定价算法。Bancor 中继令牌是一种智能合约，它确保两种资产的汇率永远不会达到零；当一种资产的供给减少时，这种资产的汇率就会上升。

Block.one 和 EOS 开发团队已经为 RAM 市场实现了这种算法。系统契约充当 RAM 资源的管理者，理论上有助于价格发现。该系统合同使令牌持有者能够以之前规定的市场价格回购 RAM。为了限制投机，每一笔有系统合约的交易都要烧 1%的 EOS 令牌费。然而，尚不清楚这种新的算法定价系统是否有效地抑制了投机，因为围绕投机的动力仍然存在。如果 Bancor 继电器的汇率较低，那么令牌持有者将持有他们已经购买的 RAM，直到 RAM 的价格上涨。当少数令牌持有者可以在价格较低时购买大量 RAM 时，这种行为会更加明显。虽然 1%的费用理论上限制了投机，但这实际上使市场的力量平衡更加偏向大宗商品生产商，因为他们有能力支付 1%的费用，因为他们获得了 EOS 代币作为奖励。

2)了解 RAM Bancor 算法的效果:通过检查 EOS RAM 生成合同，可以深入了解 RAM 是如何创建的。从源代码来看，RAM 的供应是根据 Bancor 中继连接器算法，根据 RAM 交易的价格，根据可用性进行调整的。然而，RAM 的实际供应更多地基于用于运行网络的硬件的计算资源，而不是算法所说的。有人试图根据预定义的公式通过算法来设定 RAM 的价格，但在某些情况下，对网络中计算价格的猜测可能会导致承诺的计算资源供应超过硬件的实际限制，因为算法的经济性与硬件的计算能力无关。

EOS 网络的容量由 EOS 模块生成器硬件的计算能力决定。根据该协议，块生产者向网络公布他们的总计算能力，以便令牌持有者可以使用这些信息进行投票，并适当地购买和下注令牌。然而，这带来了两个主要挑战:1)很难验证块生产商实际上拥有他们声称拥有的计算资源(尤其是在网络没有压力的情况下),以及 2)很难验证块生产商是否根据协议公平地分配计算资源。所有这些不对称意味着这些资源的价格发现很困难，如果不是不可能的话。考虑到如何管理和实施 EOS 块生成器硬件的黑盒子性质，几乎不可能确定所生产的 RAM 的公平市场价值，这同样会影响 EOS 令牌的价格发现。

根据协议，块生产者应该根据标记来划分计算资源。然而，很难确认他们正在这样做，因为没有办法知道块生产者正在运行什么代码。这与以太坊形成鲜明对比。以太坊协议定义了节点必须遵守的一组强规则；因为这些规则是如此强大，如果一个节点不遵守规则，他们就不能参与网络。这使得不同的节点能够运行不同的代码。然而，EOS 白皮书没有同样详细的规范。类似地，以太坊协议的严格规则可以通过 Merkle 证明进行加密验证。EOS 协议的问题在于，块生产者的许多行为不能通过计算或算法来验证。这突出了 EOS 协议的两个主要问题。第一，如前所述，EOS 协议依靠社会治理来对付坏人。其次，这在加密货币市场已经处理的各种市场效率之外又增加了一层效率(特别是在信息访问方面)。

3)博弈论和加密经济机制设计:如 EOS 令牌部分的激励结构中所述，拥有 EOS 令牌的主要激励围绕着令牌价格升值的价值积累以及对由赌注 EOS 令牌产生的计算资源的价值的投机。此外，还有一种激励机制，鼓励区块生产商累积代币，以便在投票过程中保持其作为区块生产商的地位。这些机制旨在鼓励令牌持有者购买令牌，尽管没有为 RAM 市场的投机者设计的内部反馈机制来公平行事并确保网络本身的健康。

相反，在以太坊，交易费旨在激励矿商优先处理某些交易。更高的天然气价格会让矿商赚更多的钱，但与此同时，这些费用会阻止垃圾邮件交易，因为攻击者不花费大量资金就无法向网络发送垃圾邮件。该系统旨在激励矿商在积累费用的同时协调相同的行动，以确保交易验证网络的安全。在这个生态系统中，存在一个正反馈循环，在这个循环中，验证者保护网络安全的愿望和产生费用的愿望之间存在耦合。由于 EOS 缺乏一种机制来耦合帮助网络的愿望，同时为自身利益积累价值，因此可以得出结论，EOS 没有使用博弈论激励结构来保护网络。

# **五、结论**

**A .建筑**

基于对整个系统的全面评估，EOS 最初被设计成一个区块链，尽管最终的平台没有达到区块链系统的必要组成。相反，该平台是作为分布式数据库系统构建的。这从对体系结构的实质性依赖中变得显而易见，在该体系结构中，密码验证不一定被实例化，而是被近似实现。

**B .性能**

正如在“性能”一节中所观察到的，即使在 0 毫秒延迟和 0%数据包丢失的最佳设置下，系统中的事务吞吐量也不超过 250 TPS。在往返延迟为 50 毫秒、数据包丢失率为 0.01%的真实条件下进行测试时，性能下降到 50 TPS 以下，使系统的性能非常接近以太坊中的性能。EOS 中的一致性不表现出拜占庭容错。在系统中使用 21 个块生产者是任意的，因为生产者以循环方式处理事务，当块生产者恶意行为时没有算法逻辑。在网络测试中，出现了各种形式的一致性失败。共识完全依赖于基于社会共识的投票机制，而不是基于算法的 BFT 共识。

**C .经济学**

对 EOS 令牌系统的分析表明，网络充当了可用计算的市场。该网络提供计算服务，这些服务实质上是 21 个区块生产商产生的计算信用。因为 21 个块生产者的配置和处理能力对公众是屏蔽的，所以没有办法辨别令牌所承诺的网络中可用的计算量。块生产者的这种黑箱性质创建了一个系统，其中未验证的计算值被引入到系统中，产生了不稳定的可能性。

**婷总结**

通过对 EOS 系统的全面分析，很明显，为了使 EOS 能够成功地充当基础层协议，它需要重新设计其基础设施的重要部分。EOS 可以潜在地作为附加到其他更基本安全的网络上的侧链，尽管该系统需要重建以解决本报告中详述的问题。

# **确认**

来自不同组织的许多不同的人协助了这项研究。我们要感谢来自 Whiteblock 团队的和 Trey Zhong 来自 Consensys PegaSys 团队的 Shahan Khatchadourian、Ben Edgington 和 Nicolos LioshonConsenSys 高山团队的 Wayne Chang、Grec Rocco 和 Steve Gattuso 以及来自 ConsenSys 核心工程团队的 Antione Toulme。

我们还要感谢来自 ConsenSys 的 Andreas Freund、John Wolpert、Ray Valdes 和 Joe Lubin 所做的额外贡献。

这项研究也得到了杜克大学杜克区块链实验室成员的支持和审查。

最后，我们要感谢以下团体对这一开放生态系统研究工作的坚定支持:Cosmos、以太坊社区基金、IMToken、Amis、Status、Maker Dao、Transference Fund、1KX、CoinFund、企业以太坊联盟、Loom、Grid+、PlaTON、MixLabs、Web3 Foundation、Ledger Capital、微软、谷歌、ConsenSys 和 Bo Shen(Fenbushi Capital 的创始合伙人和 Bitshares 的联合创始人)。