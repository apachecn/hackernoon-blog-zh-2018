# 现代 JavaScript 中的函数式编程范例:Currying

> 原文：<https://medium.com/hackernoon/functional-programming-paradigms-in-modern-javascript-currying-5652e489cce8>

![](img/28b0f7b6bf17578321119d22758aee5a.png)

我记得我决定扩展函数式编程技能的那一刻。那是一个寒冷的十月夜晚，我下班回家，听着我最喜欢的播客之一——JavaScript Jabber。

我不记得具体是谁了，但是他详细地讲述了函数式编程如何帮助了他的团队，以及他们为正在开发的产品解决了哪些问题。

这听起来真的很有趣，所以我回到家，做了一些谷歌搜索，看看这个功能性的东西是什么，它有什么特别之处。当我经历纯函数甚至不可变数据结构的想法时，我能够保持冷静。

但是在某一点上，我对**奉承**达成了一种解释，并很快放弃了它，认为这是我在项目中永远不会做的事情。我只是不能理解它背后的想法。

函数式编程有一个陡峭的学习曲线，但是当你通过基础知识时，这个斜坡变得更难爬了。我怀疑我是唯一有这种感觉的人，所以在这篇文章中，我们将尝试用最简单的方式来审视**的谄媚。**

# 什么是 currying？

Currying 是一种以特定方式构造函数的技术。如果你读过其他一些关于函数式编程的文章，你肯定会看到它和**部分应用**一起被提及。

在本文的范围内，我们将完全集中在**奉承**，为什么它是有用的，以及如何应用它。

我们已经知道，我们应该主要用纯函数来编写程序，以尽可能地减少副作用。我们知道纯函数将参数作为输入，并基于这些参数返回输出。

现在，有不同 **arity** 的功能。 **Arity** 是一个术语，它指定一个函数接受的参数数量。例如，一个以单个数字作为参数的函数的 arity**为 1。接受两个数字或两个字符串的函数，或者一个字符串和一个数字的 **arity** 为 2，依此类推。**

> Currying 是一种帮助我们将一个 arity 大于 1 的函数转换成一系列 arity 为 1 的函数的技术。

这是我们需要理解的所有术语。我们将使用 currying 将其转换为两个链式函数，每个链式函数的 arity 为 1，而不是使用一个带有两个参数的函数(arity 为 2 的函数)。

# 简单的例子

我尽量远离数学例子，因为它们在实际项目中是如此普遍和不适用，但是对于大多数函数式编程概念来说，数学解释是最简单的。

第一个`add`函数接受两个参数并返回它们的和。这里没有我们没见过的东西。

另一方面，`addCurried`功能乍看起来像是在施展某种黑魔法，多个`=>`符号一开始会让人非常困惑。

让我们看一下`curriedAdd`函数中发生了什么。它首先接受一个参数`x`，然后返回一个函数。此时它不做任何计算。

返回的函数接受一个参数`y`，并返回`y`与前一个函数的`x`之和。

起初这可能有点令人困惑，尤其是如果您是这门语言的新手，并且没有完全理解 [***闭包***](https://hackernoon.com/understanding-javascript-closures-4188edf5ea1b) 。总而言之，*闭包*是一个嵌套函数，即使在词法范围之外被调用，它也可以访问词法范围。

所以当我们创建函数`addTwo`时，即使它只有一个参数，因为它在`curriedAdd`上有一个闭包，它仍然可以访问`x`，因此调用它将返回它们的和。

通过一个使用旧函数语法的例子，这种工作方式会变得更加清晰。

# 这为什么有用？

一开始，谄媚似乎是不可思议的不必要，主要是因为我们正在用一个简单到将两个数相加的操作来说明它。这项技术非常强大，因为它让我们能够更好地控制自己的功能。

通过对函数有更多的控制，我们可以编写更多的描述性代码，并实现更好的代码可重用性。看看`addTwo`函数调用是多么容易理解。它基本上读起来像简单的英语。

每当我们想使用更抽象的函数并隐藏实现时，Currying 就很有用。一个更适用的例子是一些 curried 异步操作。

这里我们需要注意一些重要的事情。首先是我们如何抽象出对服务的实际调用。每个函数都在前一个函数的基础上提供了另一个抽象层，所以最终保存一篇文章就像将对象传递给`saveArticle`函数一样简单。

对于以前没有接触过 currying 技术的人来说，函数本身看起来有点复杂，但是使用它实际上提高了代码的简单性。我们不必担心参数的顺序，因为每个函数都可以取一个参数。

然后，我们还应该注意我们实现的灵活性。大多数程序可能需要发出更多的`POST`请求，所以`makePostRequest`函数可以为我们不同的实体重用。

如果我们利用箭头函数，我们可以大大*减少*我们需要编写简化函数的代码量，同时*大大*增加我们工作的复杂性。

一旦你熟悉了这个概念，这看起来真的很干净，但是对于任何阅读你的代码而不理解 currying 的人来说，这将带来更多的头痛。

# 应该吃什么咖喱？

像 Haskell 这样的纯函数式语言在默认情况下将它们的函数化。你不能调用一个有多个参数的函数，所以你创建的每一个函数都会被自动编译。

在 JavaScript 中，函数可以接受任意多的参数，这就是为什么很多人认为在 JS 中 currying 是不必要的。在我看来，这个话题没有正确的答案。

您是否将使用 currying 完全取决于您的团队对函数式编程的看法和知识。无论你的团队对这种编程技术是兴奋还是怀疑，天平都会向一个方向倾斜。

我的建议是阅读题目，练习但不要强迫。尝试实现我们最近学到的新模式或新技术是很常见的。俗话说，如果你有一把锤子，所有东西看起来都像钉子。

我们可以强制我们的函数是纯的，我们可以通过在我们的 **Redux** 存储中集成 **ImmutableJS** 来强制不变性，但是当涉及到 **currying** 和 **partial application** (我们将在下一次讨论这个问题)时，只在有明显好处时使用这些技术。

函数式编程的主要目标是编写更具描述性的代码。它应该让我们想得更少，并从它提供的抽象中受益。如果使用带有几个参数的普通函数会给开发者带来更好的体验，那么我们应该一直这样做。

# 结论

在本文中，我们介绍了 currying 的基础知识，currying 是一种函数式编程技术，它帮助我们将函数分割成更小的函数——每个函数接受一个参数。

我们讨论了一些好处，并浏览了一些代码。我们看到了如何最大限度地使用函数，我计划继续使用一种叫做**部分应用**的类似技术。

如果你没看过前面的文章，这里有链接。如果你想收到我发的邮件，你可以从 [**这里**](https://buttondown.email/kondov) 订阅。希望这是有帮助的，不要忘记与朋友分享，并保持鼓掌按钮！

[](https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-pure-functions-797d9abbee1) [## 现代 JavaScript 中的函数式编程范例:纯函数

### JavaScript 是最流行的编程语言之一。它可以在浏览器、桌面、手机上运行…

hackernoon.com](https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-pure-functions-797d9abbee1) [](https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-immutability-4e9751ca005c) [## 现代 JavaScript 中的函数式编程范式:不变性

### 这是实用函数式编程范例系列文章的第二章。如果你没有读过…

hackernoon.com](https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-immutability-4e9751ca005c) [](https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-function-composition-109670038859) [## 现代 JavaScript 中的函数式编程范式:函数组合

### 在前两章中，我们介绍了函数式编程的一些基本范例——纯函数和…

hackernoon.com](https://hackernoon.com/functional-programming-paradigms-in-modern-javascript-function-composition-109670038859)