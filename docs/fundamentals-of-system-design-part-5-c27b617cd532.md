# 系统设计基础——第五部分

> 原文：<https://medium.com/hackernoon/fundamentals-of-system-design-part-5-c27b617cd532>

你可以在这里阅读本系列[的上一篇帖子。在这篇文章中，我将介绍分区。](/@v_aparimit/fundamentals-of-system-design-part-4-d6a62f3fa779)

分区或分片是一种分解大型数据集并将其分布在多个磁盘上的技术。分区后，读取/写入可以在许多节点上并行执行。[分区](https://hackernoon.com/tagged/partitioning)与复制相结合，以实现可扩展性。

实现分区的一个简单方法是根据一些固定的标准划分整个数据集。例如，对于一个电子商务网站，您可以将手机的所有交易放在节点 1 上，将鞋子放在节点 2 上，等等。这种方法的问题是，这会导致分布不均匀。如果手机是最受欢迎的物品，处理手机交易的节点就会一直超负荷。一个简单的解决方法是随机分配分区。这确保了所有数据在节点间均匀分布，但是您肯定已经猜到了这种方法的问题。当您发出读取查询时，需要将它发送到所有节点，这使得读取成本更高。

处理这个问题的另一个方法是[设计](https://hackernoon.com/tagged/design)基于键的范围分区。您可以首先创建一个键散列，然后将一系列结果散列值分配给某些分区。如果您使用 32 位散列函数，您的密钥可以映射到 2^32-1 散列值之一。然后，您可以选择将键 1-10 分配给分区 1，依此类推。可以随机或手动选择分区边界。

虽然基于散列的分区范围有助于减少非对称负载，但是至少在数据库级别，没有简单的方法来完全解决这个问题。如果对于上述电子商务网站，iPhone X 是一个月内收入最高的产品，则托管 iPhone X 交易的节点分区将受到压力。在这种情况下，应用程序开发人员可以将一个 2 位数的随机密钥添加到原始密钥哈希中，从而将一个密钥的负载分布到 100 个分区上。挑战将再次是读取，因为现在需要启动 100 个并行读取来找到 iPhone X 的一个交易。因此，向少数几个“热”键添加随机数字是有意义的。

这就是我在这篇文章中要写的全部内容。我将在一两周之后发布本系列的下一篇文章。在那之前，我希望听到你的评论和反馈。