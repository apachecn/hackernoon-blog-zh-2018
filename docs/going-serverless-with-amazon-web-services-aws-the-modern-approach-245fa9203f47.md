# ä½¿ç”¨äºšé©¬é€Šç½‘ç»œæœåŠ¡(AWS)å®ç°æ— æœåŠ¡å™¨åŒ–â€”â€”ç°ä»£æ–¹æ³•

> åŸæ–‡ï¼š<https://medium.com/hackernoon/going-serverless-with-amazon-web-services-aws-the-modern-approach-245fa9203f47>

> è¿™æ˜¯ä¸¤ä¸ªåšå®¢ç³»åˆ—ä¸­çš„ç¬¬äºŒä¸ªåšå®¢ï¼Œä½¿ç”¨äºšé©¬é€Šç½‘ç»œæœåŠ¡(AWS)
> 
> [1ã€‚ä¼ ç»Ÿæ–¹æ³•*ğŸš¶*](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2)
> 
> 2.ç°ä»£æ–¹æ³•*ğŸš´*

![](img/43cc4aa613a4afd9d0039d2f997d43fc.png)

Jump out, Think Serverless!

åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡åšå®¢[ä½¿ç”¨ Amazon Web Services (AWS)å®ç°æ— æœåŠ¡å™¨â€”ä¼ ç»Ÿæ–¹æ³•](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2)ä¸­ï¼Œæˆ‘è®¨è®ºå¹¶æ¼”ç¤ºäº†é€šè¿‡ AWS æ§åˆ¶å°æ‰‹åŠ¨éƒ¨ç½²ä¸€ä¸ªéå¸¸åŸºæœ¬çš„æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åº*çš„è¿‡ç¨‹ã€‚å¦‚æœæ‚¨æµè§ˆè¿‡é‚£ä¸ªåšå®¢ï¼Œæˆ–è€…æ‚¨æ›¾ç»è¿™æ ·éƒ¨ç½²è¿‡æ‚¨è‡ªå·±çš„æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œæ‚¨å¯èƒ½å·²ç»çŸ¥é“åœ¨ä¼ ç»Ÿé€”å¾„ä¸­è¿™æ ·åšçš„ç—›è‹¦ã€‚*

è®©æˆ‘å¿«é€Ÿå›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢æ‰€åšçš„å·¥ä½œã€‚

æˆ‘ä»¬æ­£åœ¨ä¸ºä¸€ä¸ªç®€å•çš„*è”ç³»æˆ‘ä»¬*çš„é™æ€ç½‘ç«™æ„å»ºåç«¯ã€‚

![](img/8ee71eba5ef90898f2116e0a3426b191.png)

Contact Us form

## **ç—›è‹¦çš„æ•…äº‹**

æˆ‘ä»¬é¦–å…ˆå°è¯•åœ¨ AWS æ§åˆ¶å°ä¸­ç¼–å†™ä¸€ä¸ªç®€å•çš„ lambda å‡½æ•°ï¼Œå®ƒç”± API ç½‘å…³äº‹ä»¶è§¦å‘ã€‚åæ¥ï¼Œæˆ‘ä»¬æƒ³åœ¨æˆ‘çš„å‡½æ•°ä¸­ä½¿ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹ NodeJS åº“ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æˆ‘çš„æœ¬åœ°è®¡ç®—æœºä¸­ç¼–å†™ lambda å‡½æ•°ï¼Œå¹¶é€šè¿‡ AWS æ§åˆ¶å°ä»¥ zip æ ¼å¼ä¸Šä¼ ã€‚

é€šè¿‡éµå¾ªæœ€ä½³å®è·µï¼Œæˆ‘ä»¬ç”šè‡³ä¸ºæˆ‘çš„ lambda å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ª AWS IAM è§’è‰²ï¼Œè¯¥è§’è‰²åªä¸ºè¯¥å‡½æ•°å¯ç”¨å¿…è¦çš„æƒé™ã€‚

æˆ‘ä»¬å¯ä»¥ä» lambda æ§åˆ¶å°æœ¬èº«åˆ›å»ºä¸€ä¸ª API ç½‘å…³ç«¯ç‚¹ï¼Œä½†æ˜¯å¿…é¡»é‡æ–°è®¿é—® APIG æ§åˆ¶å°æ¥åº”ç”¨ä¸€äº›æŠ€æœ¯ã€‚

å¬èµ·æ¥å·²ç»å¾ˆç—›è‹¦äº†ï¼Œå¯¹å§ï¼ŸğŸ¤•

è¿™åªæ˜¯æ•…äº‹çš„å¼€å§‹ã€‚

**é¢å¤–ç—›è‹¦ 1:æ›´æ”¹ç°æœ‰ä»£ç **

è®©æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æƒ³è¦æ›´æ”¹æˆ‘çš„å‡½æ•°çš„ä»£ç ï¼Œä»¥åŒ…å«æ›´å¤šçš„éªŒè¯ã€‚

åœ¨ AWS æ§åˆ¶å°ä¸­å®Œæˆè¿™ä¸€æ›´æ–°éå¸¸å®¹æ˜“ï¼ğŸ˜‰

ä¸€æ—¦ä½ ä¸Šä¼ äº†è¿™ä¸ªå‡½æ•°ï¼ŒLambda console å°±ä¼šè§£å‹ç¼©å®ƒï¼Œå¹¶åœ¨ä»ªè¡¨ç›˜ä¸­å‘æˆ‘ä»¬å±•ç¤ºä¸€ä¸ªå¯ç¼–è¾‘çš„ä»£ç ã€‚æˆ‘ä»¬åªéœ€ç¼–è¾‘æˆ‘ä»¬çš„ä»£ç ï¼Œç„¶åç‚¹å‡»å¤§æ©™è‰²çš„**ä¿å­˜**æŒ‰é’®ã€‚ğŸ¤ 

**é¢å¤–çš„ç—›è‹¦ 2:æ·»åŠ æ–°çš„ç¬¬ä¸‰æ–¹åº“/ä¾èµ–å…³ç³»**

å‡è®¾ï¼Œæˆ‘ä»¬æƒ³è¦æ·»åŠ ä¸€ä¸ªæ–°çš„ç¬¬ä¸‰æ–¹åº“æ¥ä¸ºæˆ‘ä»¬çš„ lambda å‡½æ•°æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ã€‚(æˆ‘ä»¬æƒ³åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ç”¨ä¾‹ä¸­æ·»åŠ  [*éªŒè¯ js*](https://validatejs.org/) )

çœŸæ‰«å…´ã€‚ä½ ä¸èƒ½åœ¨ Lambda æ§åˆ¶å°ä¸­è¿™æ ·åšã€‚ğŸ˜¦

ç°åœ¨ï¼Œæˆ‘æ­£é€€å›åˆ°æœ¬åœ°è®¡ç®—æœºä¸­çš„ä»£ç ã€‚æˆ‘å¿…é¡»æ‰‹åŠ¨å®‰è£…æˆ‘çš„èŠ‚ç‚¹æ¨¡å—ï¼Œå¹¶ç”¨ä¾èµ–é¡¹é‡æ–°æ‰“åŒ…ä»£ç ã€‚

ä¸å¯¹ä¸å¯¹ï¼ï¼å› ä¸ºæˆ‘ä»¥å‰åœ¨ AWS æ§åˆ¶å°ä¸­ç¼–è¾‘è¿‡è¿™æ®µä»£ç ï¼Œæ‰€ä»¥ç°åœ¨æˆ‘åœ¨æœ¬åœ°æœ‰ä¸€ä¸ªè¿‡æ—¶çš„ç‰ˆæœ¬ã€‚å¿…é¡»å›åˆ° Lambda æ§åˆ¶å°æ¥å¤åˆ¶æˆ–ä¸‹è½½æœ€æ–°çš„ä»£ç ã€‚ğŸ˜£

**é¢å¤–çš„ç—›è‹¦ 3:å°† lambda ä¸æ›´å°‘çš„ AWS èµ„æºç›¸å…³è”**

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ lambda åªæƒ³ä¸ DynamoDB å¯¹è¯ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ lambda ä¹Ÿèƒ½ä¸ S3 å¯¹è¯(å‡è®¾æˆ‘ä»¬ä¸ºè”ç³»æˆ‘ä»¬è¡¨å•æ·»åŠ äº†æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½)ã€‚ç°åœ¨è¿‡ç¨‹å¦‚ä¸‹ï¼Œ

*   å¯¼èˆªåˆ° S3 æ§åˆ¶å°å¹¶åˆ›å»ºä¸€ä¸ªå­˜å‚¨æ¡¶
*   **é˜…è¯» S3 çš„ javascript SDK æ–‡æ¡£ï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“å®ƒæ˜¯ APIã€‚**
*   å‘ç°æœ‰ä»£ç æ·»åŠ å¿…è¦çš„è¡¥ä¸ä»¥å¤„ç†æ–‡ä»¶ä¸Šä¼ ã€‚
*   é€šè¿‡ AWS lambda æ§åˆ¶å°ä¸Šä¼ ä»£ç ï¼Œç‚¹å‡»å¤§æ©™è‰²**ä¿å­˜**æŒ‰é’®ã€‚

å¥½å§ï¼ğŸ˜«ã€‚ç°åœ¨æˆ‘çš„ lambda å¯ä»¥ä¸Šä¼ åˆ° S3 äº†ï¼ï¼

ä½†æ˜¯å½“æˆ‘æµ‹è¯•æˆ‘çš„è®¾ç½®æ—¶ï¼Œå½“æˆ‘è¯•å›¾å°†æˆ‘çš„å†…å®¹ä¸Šä¼ åˆ° S3 æ—¶ï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå¤§é”™è¯¯ã€‚

![](img/0e01b65bb2d48dea557cfa1e5e486028.png)

Lambda fails to access S3

**åŸå› ï¼Ÿ**

æˆ‘éµå¾ªæˆ‘çš„æ—§ç¼–ç¨‹ä¹¦ç±ä¸­çš„æœ€ä½³å®è·µï¼Œæœ€åˆåªç»™ Lambda å¿…è¦çš„æƒé™ã€‚ç°åœ¨æˆ‘çš„æ‹‰å§†è¾¾ä¸èƒ½å’Œ S3 è¯´è¯äº†ã€‚

æ‰€ä»¥æˆ‘å¿…é¡»ç¼–è¾‘åˆ†é…ç»™ lambda çš„ IAM è§’è‰²ï¼Œé€šè¿‡æ·»åŠ æ–°çš„æƒé™æ¥ä¸ S3 å¯¹è¯ã€‚

This is someone who just started Serverless development on traditional approach

åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œè®©æˆ‘å‘æ‚¨å±•ç¤ºä¸€ç§æ›´æ–¹ä¾¿çš„æ–¹æ³•æ¥å¼€å‘æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼Œè€Œæ— éœ€ç»å†å¦‚æ­¤ç—›è‹¦çš„è¿‡ç¨‹ã€‚æˆ‘æƒ³æŠŠè¿™ä¸ªè¿‡ç¨‹ä½œä¸º**æ— æœåŠ¡å™¨å¼€å‘çš„ç°ä»£æ–¹æ³•æ¥ä»‹ç»ã€‚**

# ğŸš´*ç°ä»£æ–¹æ³•â€”é€‚é©¬*

[é€‚é©¬](https://sigma.slappforge.com/)æ˜¯ä¸€ä¸ªç°ä»£çš„ã€åŠŸèƒ½ä¸°å¯Œçš„åŸºäºæµè§ˆå™¨çš„ IDEï¼Œç”±æ¥è‡ª[æ–¯é‡Œå…°å¡](http://srilanka.travel/)çš„[å·¥ç¨‹å¸ˆå›¢é˜Ÿ](https://www.slappforge.com/)å¼€å‘ï¼Œä»–ä»¬åœ¨[å¼€å‘ä¼ä¸šé›†æˆè§£å†³æ–¹æ¡ˆ](https://www.adroitlogic.com/)çš„è¿‡ç¨‹ä¸­ç»å†äº†ä¸Šè¿°ç—›è‹¦çš„è¿‡ç¨‹ã€‚æˆ‘æƒ³ä»‹ç»ä¸€ä¸‹ä½œä¸ºæ— æœåŠ¡å™¨å¼€å‘çš„ç°ä»£æ–¹æ³•çš„[é€‚é©¬](https://sigma.slappforge.com/)ï¼Œå› ä¸ºå®ƒè§£å†³äº†å¼€å‘äººå‘˜åœ¨å¼€å‘æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºæ—¶å¿…é¡»é¢å¯¹çš„å¤§éƒ¨åˆ†æ£˜æ‰‹é—®é¢˜ã€‚

åªéœ€é€šè¿‡ä»¥ä¸‹æ­¥éª¤æ¥å®ç°æˆ‘ä»¬åœ¨[*ä¸­é‡åˆ°çš„ä½¿ç”¨äºšé©¬é€Šç½‘ç»œæœåŠ¡(AWS)å®ç°æ— æœåŠ¡å™¨çš„ç›¸åŒç”¨ä¾‹â€”â€”ä¼ ç»Ÿæ–¹æ³•*](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2) å’Œ**äº²è‡ªä½“éªŒæ‰“é€  SLApps(æ— æœåŠ¡å™¨åº”ç”¨)**çš„ç®€åŒ–æµç¨‹ã€‚

## æ­¥éª¤ 1 â€”åˆ›å»ºæ–°é¡¹ç›®

é€šè¿‡ç»™å‡ºåç§°ã€æè¿°å’Œ AWS ä½ç½®æ¥åˆ›å»ºé¡¹ç›®ï¼Œä»¥éƒ¨ç½²èµ„æºã€‚

![](img/fd9dc01f1b9a30fd64884d26d770f1a8.png)

Creating a new Project in Sigma

ä¸€æ—¦ä½ åˆ›å»ºäº†ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œé€‚é©¬å°†å‘ä½ å±•ç¤ºä¸»ç¼–è¾‘å™¨è§†å›¾ã€‚

![](img/d7dc62a08e7b3494a689d483ff552117.png)

Sigma main editor view

å½“æ‚¨ç¬¬ä¸€æ¬¡åŠ è½½ç¼–è¾‘å™¨è§†å›¾æ—¶ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°ä¸€äº›åœ¨å…¶ä»–ç¼–è¾‘å™¨ä¸­çœ‹ä¸åˆ°çš„ä¸œè¥¿ã€‚

1.  å‰é¢å¸¦æœ‰æ•°å­—æ ‡è®°çš„ AWS èµ„æºåˆ—è¡¨ã€‚
2.  Lambda å‡½æ•°å¤„ç†ç¨‹åºä¸­çš„çº¢è‰²è­¦å‘Š

## å‰é¢å¸¦æœ‰æ•°å­—æ ‡è®°çš„ AWS èµ„æºåˆ—è¡¨ã€‚

![](img/36dcc601c0327cfc43fbce6d629a9940.png)

Currently supported AWS resources in SIgma

è¿™æ˜¯é€‚é©¬ç›®å‰æ”¯æŒçš„ AWS èµ„æºåˆ—è¡¨ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ ä¸èƒ½åœ¨é€‚é©¬ä»£ç ä¸­ä½¿ç”¨å…¶ä»– AWS èµ„æºã€‚è¿™äº›åªæ˜¯ç›®å‰æ”¯æŒçš„è¶…çº§èµ„æºï¼Œæˆ‘ä»¬æ­£åœ¨åŠªåŠ›å¢åŠ è¿™ä¸ªåˆ—è¡¨ã€‚

**è¿™äº›èµ„æºæœ‰ä»€ä¹ˆç‰¹åˆ«çš„ï¼Ÿ**

æ‚¨å¯ä»¥å°†è¿™äº›èµ„æºæ‹–æ”¾åˆ°æ‚¨çš„ç¼–è¾‘å™¨ä¸­ï¼æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ã€‚

> æ‹–æ”¾ï¼ï¼æ‹–æ”¾ï¼ï¼æ‹–æ”¾ï¼ï¼

![](img/6a19e1ba58f88c4e6e550d51358b0456.png)

Drag and Drop resources to editor

æ•°å­—æ ‡è®°è¡¨ç¤ºå½“å‰é¡¹ç›®ä¸­å·²ç»ä½¿ç”¨çš„åŒä¸€ç±»å‹çš„å”¯ä¸€èµ„æºçš„æ•°é‡ã€‚ä¸€æ—¦æ‚¨åœ¨é¡¹ç›®ä¸­åˆ›å»ºäº†ä¸€ä¸ªèµ„æºï¼Œè¿™ä¸ªè®¡æ•°å°†ä¼šå¢åŠ ï¼Œå¹¶ä¸”è¿™äº›èµ„æºå°†ä¼šæ˜¾ç¤ºåœ¨ä¸€ä¸ªå­åˆ—è¡¨ä¸­ï¼Œåœ¨è¿™ä¸ªå­åˆ—è¡¨ä¸­ï¼Œæ‚¨å¯ä»¥åœ¨éœ€è¦æ—¶ç›´æ¥ä½¿ç”¨ç›¸åŒçš„èµ„æº(æ— éœ€é‡æ–°é…ç½®)ã€‚

![](img/fac3e9a42a629759f8e5a2cdf08f7ec6.png)

Resource List with usage

å“¦ï¼éå¸¸ç³Ÿç³•ï¼Œæˆ‘æ‰“é”™äº†[æ–¯é‡Œå…°å¡](http://srilanka.travel/)çš„åå­—ã€‚

æˆ‘å¯ä»¥ç”¨ä¸¤ç§æ–¹æ³•çº æ­£è¿™ä¸ªé”™åˆ«å­—ã€‚

1.  ç‚¹å‡»å·¦ä¸Šè§’çš„è“è‰² DynamoDB å›¾æ ‡ï¼Œåœ¨ UI ä¸­è¿›è¡Œä¿®æ”¹ã€‚

![](img/07c7dc1e3645639ccae3b68dc4a14dd2.png)

Editing the generated Code by UI

2.å°±åƒæˆ‘ä»¬é€šå¸¸åšçš„é‚£æ ·ã€‚ä»£ç ä¸­çš„å˜åŒ–ä¼šè‡ªåŠ¨åæ˜ åœ¨ UI ä¸­ï¼ï¼

![](img/f561ff3c13fc005dfb109c3d5cec3099.png)

Editing the generated code in the editor

## æ­¥éª¤ 2 â€”åˆ›å»º DynamoDB è¡¨

å¯¹äºæˆ‘ä»¬åœ¨æœ¬ç³»åˆ—çš„ç¬¬ä¸€ç¯‡åšå®¢ä¸­è¯¦ç»†è§£é‡Šçš„ç”¨ä¾‹ï¼Œ[ä½¿ç”¨ Amazon Web Services (AWS)å®ç°æ— æœåŠ¡å™¨â€”ä¼ ç»Ÿæ–¹æ³•](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2)ï¼Œæˆ‘ä»¬æƒ³è¦åˆ›å»ºä¸€ä¸ªåä¸º *contact_us* çš„æ–° DynamoDB è¡¨ï¼Œä½¿ç”¨ *email* ä½œä¸ºåˆ†åŒºé”®ï¼Œä½¿ç”¨ *date* ä½œä¸ºæ’åºé”®ã€‚

å› ä¸ºæˆ‘ä»¬å¸Œæœ›ä¿å­˜æ¯ä¸ª contact_us æ¡ç›®æ—¥æœŸï¼Œæ‰€ä»¥è®©æˆ‘å…ˆåœ¨ä»£ç ä¸­å£°æ˜è¯¥å˜é‡ã€‚

![](img/cf5c10955d87b5a362850fcca811fd05.png)

Declaring date variable

ä½ æ³¨æ„åˆ°äº†ï¼Œå¯¹å—ğŸ˜ã€‚æˆ‘ä»¬åœ¨é€‚é©¬ IDE ä¸­å†…ç½®äº†æ™ºèƒ½ä»£ç å»ºè®®ã€‚

è®©æˆ‘ç»§ç»­åˆ›å»ºæ–°çš„ DynamoDB è¡¨ã€‚

![](img/15c48f11c2fb6b61a1f5d13adcae4b90.png)

Creating a new DynamoDB table

**æå®šï¼ï¼ï¼**æˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªè¡¨ï¼Œç”šè‡³æˆ‘ä»¬å·²ç»**ç”Ÿæˆäº†ä»£ç **æ¥åœ¨åŒä¸€ä¸ªè¡¨ä¸Šæ‰§è¡Œ *put æ“ä½œ*ã€‚æˆ‘ä»¬ä¸ä¼šåƒä½ åœ¨ä¼ ç»Ÿæ–¹æ³•ä¸­æ‰€åšçš„é‚£æ ·ï¼Œå¼ºè¿«ä½ ç¦»å¼€ä½ çš„ä»£ç ï¼Œä»è€Œæ‰°ä¹±ä½ çš„ç¼–ç èŠ‚å¥ã€‚æˆ‘ä»¬ç®€åŒ–äº†åˆ›å»ºå’Œä½¿ç”¨èµ„æºçš„æµç¨‹ï¼

ä½ åˆæ³¨æ„åˆ°äº†ï¼Œå¯¹å—ğŸ˜ã€‚æ™ºèƒ½ä»£ç å»ºè®®ç”šè‡³å¯ä»¥åœ¨èµ„æºå¼¹å‡ºçª—å£ä¸­ä½¿ç”¨ï¼ï¼

## Lambda å‡½æ•°å¤„ç†ç¨‹åºä¸­çš„çº¢è‰²è­¦å‘Š

åœ¨ Lambda å‡½æ•°å¤„ç†ç¨‹åºä¸­ï¼Œæˆ‘ä»¬ä»ç„¶æœ‰æ‰€è°“çš„çº¢è‰²è­¦å‘Šã€‚

![](img/99b06fe155e982debcfd11c65ff2b14c.png)

Warning in the lambda handler

æ­£å¦‚æˆ‘ä»¬æ‰€çŸ¥ï¼Œä¸ºäº†æ‰§è¡Œä¸€ä¸ª lambda å‡½æ•°ï¼Œæˆ‘ä»¬å¿…é¡»ç”¨ä¸€ä¸ªäº‹ä»¶æ¥è§¦å‘å®ƒã€‚é€šè¿‡è¿™ä¸ªçº¢è‰²è­¦å‘Šï¼Œ [sigma](https://sigma.slappforge.com/) æé†’æˆ‘ä»¬ï¼Œæˆ‘ä»¬çš„ lambda ä»ç„¶æ²¡æœ‰é™„åŠ äº‹ä»¶ã€‚

è®©æˆ‘ä»¬ç»§ç»­è§£å†³è¿™ä¸ªé—®é¢˜å§ã€‚åœ¨æˆ‘ä»¬çš„ç”¨ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ API ç½‘å…³äº‹ä»¶(POST è¯·æ±‚)æ¥è§¦å‘è¿™ä¸ª lambdaã€‚

## æ­¥éª¤ 3 â€”åˆ›å»ºä¸€ä¸ª API ç½‘å…³ç«¯ç‚¹å¹¶å°†å…¶æ·»åŠ ä¸ºè§¦å‘å™¨

è¿™æ ·åšä¸æˆ‘ä»¬å¯¹ DynamoDB æ‰€åšçš„éå¸¸ç›¸ä¼¼ã€‚ç»§ç»­æ‹–æ‹½å°±å¥½ï¼

![](img/90049ab4634600db725131cf9820c7e1.png)

Creating an API gateway trigger

åªéœ€ç‚¹å‡»å‡ ä¸‹é¼ æ ‡å’Œé”®ç›˜ï¼Œæˆ‘å°±å®Œæˆäº†ä¸‹é¢çš„ä»»åŠ¡åˆ—è¡¨ã€‚

1.  åˆ›å»ºäº†ä¸€ä¸ªåä¸º*çš„ API è”ç³»æˆ‘ä»¬ç«¯ç‚¹ã€‚*
2.  å‘æ¥å— POST è¯·æ±‚çš„ç«¯ç‚¹(/contact)æ·»åŠ äº†èµ„æºã€‚
3.  åœ¨è¯¥ç«¯ç‚¹ä¸Šå¯ç”¨ CORSã€‚(è®°ä½ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ä¼ ç»Ÿæ–¹æ³•[ä¸­å¯¼èˆªå› API Gatway æ§åˆ¶å°](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2)ï¼Œæ‰èƒ½åšåˆ°è¿™ä¸€ç‚¹)
4.  ç”¨é˜¶æ®µå *prod éƒ¨ç½²æˆ‘çš„ APIã€‚*
5.  æ·»åŠ æˆ‘æ–°åˆ›å»ºçš„ API ä½œä¸º lambda å‡½æ•°çš„è§¦å‘å™¨ã€‚

é€šè¿‡è¿™ä¸€æ­¥ï¼Œæˆ‘åˆšåˆšå®Œæˆäº†æˆ‘çš„è”ç³»æˆ‘ä»¬è¡¨å•åç«¯çš„ç¬¬ä¸€ä¸ª**ç‰ˆæœ¬**ï¼ï¼

ç­‰ç­‰â€¦æˆ‘ä»¬åˆšåˆšç¢°åˆ°å…³é”®è¯ ***ç‰ˆæœ¬*ã€‚**æˆ‘æ¥ç»™ä½ ä»‹ç»ä¸€ä¸‹[é€‚é©¬](https://sigma.slappforge.com/)çš„ä¸‹ä¸€å¤§ç‰¹è‰²ã€‚

**ç‰ˆæœ¬æ§åˆ¶å†…ç½®äºé€‚é©¬ IDE ä¸­ã€‚é€‚é©¬ä¸ Github(T21)ç´§å¯†é›†æˆï¼ŒGithub æ˜¯æœ€æµè¡Œçš„åŸºäºç½‘ç»œçš„æ‰˜ç®¡æœåŠ¡ï¼Œä½¿ç”¨ git è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚ä½ å¯ä»¥ç›´æ¥å°†ä½ çš„é¡¹ç›®æäº¤ç»™ githubï¼Œåªéœ€ç‚¹å‡»å‡ ä¸‹é¼ æ ‡ã€‚**

A person who never expected this much of features from a browser based IDE which is still in beta

**ç¬¬å››æ­¥â€”â€”å°†ç¬¬ä¸€ä¸ªç‰ˆæœ¬æäº¤ç»™ github**

æˆ‘ä»¬æœ‰æ‰€æœ‰å¿…è¦çš„å·¥å…·æ¥æ“ä½œæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæ•´åˆåˆ°ä¸€ä¸ªå•ä¸€çš„å·¥å…·æ åœ¨é€‚é©¬ã€‚

![](img/d4d58a5f34360e7e4feb48a42421bb45.png)

Sigma toolbar

è®©æˆ‘ä»¬ç‚¹å‡»ä¿å­˜æŒ‰é’®ï¼Œå°†æˆ‘ä»¬çš„é¡¹ç›®æäº¤ç»™ Githubã€‚

![](img/3dd55062a65dd99f7eca7dc22ce33a44.png)

Committing the code to Github

![](img/a8f71519bb6193e3d2dccb2c08f6c65f.png)

Sigma, silently doing itâ€™s job for you

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬é€šè¿‡è™šæ‹Ÿåˆ›å»ºèµ„æº(DynamoDB è¡¨ã€API ç«¯ç‚¹ã€Lambda å‡½æ•°)åœ¨æµè§ˆå™¨ä¸­æ„å»ºæ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºã€‚ç°åœ¨æ˜¯æ—¶å€™åœ¨ AWS ä¸­éƒ¨ç½²æˆ‘ä»¬çš„é¡¹ç›®äº†ã€‚

## æ­¥éª¤ 4â€”â€”åœ¨ AWS ä¸­éƒ¨ç½²é¡¹ç›®

ä¸ºäº†å°†é¡¹ç›®éƒ¨ç½²åˆ° AWSï¼Œæˆ‘ä»¬åªéœ€å•å‡»å·¥å…·æ ä¸­çš„ deploy æŒ‰é’®ã€‚

ç„¶åï¼Œé€‚é©¬å°†å‘æ‚¨æ˜¾ç¤ºä¸€ä¸ªæ›´æ”¹åˆ—è¡¨ï¼Œè¿™äº›æ›´æ”¹å°†åœ¨æ‚¨çš„ AWS å¸æˆ·ä¸Šæ‰§è¡Œã€‚

![](img/20c84623424f4096274c2c08268e27d9.png)

List of changes that are going to be done by Sigma on your AWS account

æ‚¨ç”šè‡³å¯ä»¥åœ¨æ‰§è¡Œéƒ¨ç½²æ—¶æŸ¥çœ‹è¯¦ç»†çš„æ—¥å¿—ã€‚

![](img/397ad4d90185391e296cf4b33bcd2242.png)

Deployment Logs

éƒ¨ç½²å®Œæˆåï¼Œé€‚é©¬å°†å‘æ‚¨å±•ç¤ºè¯¥è¿‡ç¨‹çš„æ‘˜è¦ã€‚

![](img/0a236c37ce6b7f100417e325c2115213.png)

Sigma deployment summary

é€‚é©¬çš„éƒ¨ç½²æ‘˜è¦ç”šè‡³åŒ…æ‹¬éƒ¨ç½²çš„ API ç½‘å…³ç«¯ç‚¹çš„ URLï¼ï¼

![](img/256fca8bc50f514889b6e2f8192800a6.png)

URL of the deployed API gateway endpoint

æ‰€ä»¥æˆ‘ä»¬å·²ç»å®Œæˆäº†æ— æœåŠ¡å™¨åº”ç”¨ç¨‹åºçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºç°åœ¨åœ¨äº‘ä¸Šè¿è¡Œï¼ï¼

![](img/424628199b6306362311738f72615229.png)

They just deployed a serverless application developed by modern approach (Sigma)

è®©æˆ‘ç»™ä½ çœ‹çœ‹æ›´å¤šå…³äºé€‚é©¬çš„æœ‰è¶£çš„äº‹æƒ…ã€‚

## è‡ªåŠ¨å¯¼å…¥/æ³¨å…¥ AWS åº“ã€‚

è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹æˆ‘ä»¬çš„ä»£ç ã€‚

![](img/be0b819e88327b6271357a40e0632645.png)

A close look at your code!

å¥½çš„ï¼Œç­‰ç­‰â€¦æˆ‘ä»¬ä»æ¥æ²¡æœ‰è¾“å…¥ä»£ç çš„å‰ä¸¤è¡Œã€‚

è°å¹²çš„ï¼ŸğŸ˜³

è°ä¸º AWS åº“æ·»åŠ äº† imports å¹¶ä¸ºæˆ‘åˆ›å»ºäº† DynamoDB æ–‡æ¡£å®¢æˆ·ç«¯ï¼Ÿ

é€‚é©¬ä¸ºä½ åšäº†è¿™ä¸€åˆ‡ï¼ï¼æ¯å½“æ‚¨å°†èµ„æºæ‹–æ”¾åˆ°ä»£ç ç¼–è¾‘å™¨æ—¶ï¼Œé€‚é©¬ä¼šè‡ªåŠ¨å¯¼å…¥æ‰€éœ€çš„ AWS åº“å¹¶åˆ›å»ºç›¸åº”èµ„æºçš„å®ä¾‹ã€‚

## æ·»åŠ ç¬¬ä¸‰æ–¹åº“

æ ¹æ®æˆ‘åœ¨[ç”¨äºšé©¬é€Šç½‘ç»œæœåŠ¡(AWS)å®ç°æ— æœåŠ¡å™¨åŒ–â€”â€”ä¼ ç»Ÿæ–¹æ³•](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2)ä¸­è§£é‡Šçš„ç”¨ä¾‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å€ŸåŠ©åä¸º [*validate js*](https://validatejs.org/) çš„ç¬¬ä¸‰æ–¹åº“æŒä¹…åŒ–ä¹‹å‰éªŒè¯ä¼ å…¥çš„è¯·æ±‚ã€‚

åªéœ€ç‚¹å‡»å‡ ä¸‹é¼ æ ‡ï¼Œæ‚¨å°±å¯ä»¥è½»æ¾åœ°å°†ä¾èµ–é¡¹æ·»åŠ åˆ°é€‚é©¬é¡¹ç›®ä¸­ã€‚

![](img/8f149e7324c547f5e4426cb0d0d6f671.png)

Adding dependencies in SIgma

å°±æ˜¯è¿™æ ·ã€‚ç°åœ¨ï¼Œæ‚¨å¯ä»¥åœ¨é¡¹ç›®çš„ä»»ä½• JS æ–‡ä»¶ä¸­ä½¿ç”¨æ–°æ·»åŠ çš„ä¾èµ–é¡¹äº†ï¼ï¼ï¼

è¿™åªæ˜¯å¯¹æ— æœåŠ¡å™¨å¼€å‘çš„**ç°ä»£æ–¹æ³•**çš„ç®€å•ä»‹ç»ã€‚

# è®©æˆ‘ä»¬å›è¿‡å¤´æ¥ï¼Œçœ‹çœ‹æˆ‘ä»¬ç”¨ç°ä»£æ–¹æ³•å®é™…ä¸Šè§£å†³äº†å“ªäº›ç—›ç‚¹ã€‚

## æ›´æ”¹ç°æœ‰çš„ lambda ä»£ç 

ä¸ä¼ ç»Ÿæ–¹æ³•[ä¸åŒï¼Œåœ¨ä¼ ç»Ÿæ–¹æ³•](/@cwidanage/going-serverless-with-amazon-web-services-aws-the-traditional-approach-fb45a7cc5dc2)ä¸­ï¼Œæ‚¨å¿…é¡»ç¼–è¾‘æœ¬åœ°ä»£ç å¹¶å°†ä»£ç åŒ…é‡æ–°ä¸Šä¼ åˆ° AWSï¼Œè€Œåœ¨ç°ä»£æ–¹æ³•ä¸­ï¼Œæ‚¨åªéœ€åœ¨æµè§ˆå™¨ä¸­å®Œæˆæ‰€æœ‰å·¥ä½œï¼Œå¹¶åœ¨éœ€è¦æ—¶å•å‡»é¼ æ ‡å³å¯é‡æ–°éƒ¨ç½²ã€‚

## æ·»åŠ ç¬¬ä¸‰æ–¹ä¾èµ–å…³ç³»

åªéœ€ç‚¹å‡»**æœç´¢ç‚¹å‡»**å‘æ‚¨çš„é¡¹ç›®æ·»åŠ æ–°çš„ä¾èµ–é¡¹ã€‚ä¸å†éœ€è¦ï¼Œ**ä¸‹è½½è§£å‹ç¼© *npm å®‰è£…*é‡æ–°å‹ç¼©ä¸Šä¼ ç‚¹å‡»ä¿å­˜**æ·»åŠ åº“ã€‚

## **ä¸æ›´å¤š AWS èµ„æºå…³è”**

è¿˜è®°å¾—å½“æˆ‘ä»¬æƒ³è¦è¿æ¥æ–°çš„ AWS èµ„æºæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»å¦‚ä½•æ›´æ–° Lambda è§’è‰²å—ï¼Ÿ**ç°ä»£æ–¹æ³•**ä¸ºæ‚¨å®ç°è‡ªåŠ¨åŒ–ï¼ã€‚é€‚é©¬ä¿è¯åªç»™ä½ çš„ lambda é™„åŠ å¿…è¦çš„æƒé™ã€‚é€‚é©¬äº†è§£æœ€ä½³å®è·µï¼Œå¹¶ä¼šä¸ºæ‚¨æä¾›æœ€ä½³å®è·µğŸ˜Šã€‚

## æ²¡æœ‰æ›´å¤šå®è´µçš„æ—¶é—´èŠ±è´¹åœ¨ AWS æ–‡æ¡£ä¸Š

é€‚é©¬è‡ªåŠ¨ä¸ºä½ ç”Ÿæˆ API è°ƒç”¨ã€‚é€‚é©¬ç”šè‡³ä¸ºä½ è¿›å£é™„å±å“ï¼åªéœ€åœ¨ UI ä¸­å¡«å……ä¸€äº›å­—æ®µï¼Œå…¶ä½™çš„å°±ä¸ç”¨ç®¡äº†ã€‚åªéœ€æ‹…å¿ƒæ‚¨çš„åº”ç”¨ç¨‹åºé€»è¾‘ï¼

æ‰€ä»¥è¿™æ˜¯æˆ‘åœ¨å¸–å­ç»“å°¾å¯¹ä¼ ç»Ÿæ–¹æ³•çš„æ‰¿è¯ºã€‚

> å¿˜è®°**èµ„æºä¾›åº”**å’Œ**ä»£ç **ï¼Œåªå…³æ³¨**åº”ç”¨é€»è¾‘**ã€‚

## äº†è§£æ›´å¤šå…³äºé€‚é©¬çš„ä¿¡æ¯

Think Serverless!

# è¡ŒåŠ¨å‘¼å

*   **æ‹æ‰‹ã€‚**æ¬£èµå¹¶è®©åˆ«äººå‘ç°è¿™ç¯‡æ–‡ç« ã€‚
*   **è¯„è®ºã€‚**åˆ†äº«ä¸€ä¸‹ä½ å¯¹è¿™ç¯‡æ–‡ç« çš„çœ‹æ³•ã€‚
*   è·Ÿæˆ‘æ¥ã€‚[chat hura wid anage](/@cwidanage)**æ¥æ”¶ç±»ä¼¼æ–‡ç« çš„æ›´æ–°ã€‚**
*   ****ä¿æŒè”ç³»ã€‚** [LinkedIn](https://www.linkedin.com/in/cwidanage/) ï¼Œ [Twitter](https://twitter.com/cwidanage)**