# å¦‚ä½•å°† Spotlight æ”¯æŒæ·»åŠ åˆ°æ‚¨çš„ iOS åº”ç”¨ç¨‹åº

> åŸæ–‡ï¼š<https://medium.com/hackernoon/how-to-add-spotlight-support-to-your-ios-app-4a89054aff89>

## Swift æ•™ç¨‹å°†ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨ Spotlight search ä¸­å¯ç”¨

![](img/08f1a4a22231c86a71c6f8e6857b37da.png)

[http://apple.co/2CrlXDf](http://apple.co/2CrlXDf)

å¯¹äºä»»ä½•æ‹¥æœ‰ç§»åŠ¨åº”ç”¨çš„ä¸ªäººæˆ–åˆ›ä¸šå…¬å¸æ¥è¯´ï¼Œæœ€å¤§çš„æŒ‘æˆ˜æ˜¯å¦‚ä½•æé«˜ç”¨æˆ·ç•™å­˜ç‡ã€‚ä½ å¯ä»¥å¸å¼•ç”¨æˆ·ä¸‹è½½ appï¼Œä½†æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨åä¼šæ€æ ·ï¼Ÿ

æœ‰çš„ç”¨æˆ·ä¼šæŠŠä½ çš„ app åˆ äº†ï¼Œæœ‰çš„è§‰å¾—æœ‰ç”¨å°±ç•™ç€ã€‚ä½†æ˜¯ï¼Œè¿™å¹¶ä¸æ€»æ˜¯æ„å‘³ç€ä»–ä»¬ä¼šä½¿ç”¨å®ƒï¼Œå¦‚æœä»–ä»¬æŠŠå®ƒå®‰è£…åœ¨ä»–ä»¬çš„æ‰‹æœºä¸Šã€‚é€šå¸¸ï¼Œè¿™æ¬¾åº”ç”¨ç¨‹åºå¯èƒ½ä¼šè¢«éšè—åœ¨æŸä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œæˆ–è€…æ•°ç™¾ä¸ªå·²å®‰è£…çš„åº”ç”¨ç¨‹åºä¸­ã€‚

> è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦æƒ³åŠæ³•**æé†’**ç”¨æˆ·æˆ‘ä»¬çš„åº”ç”¨æ˜¯å­˜åœ¨çš„ã€‚

è‹¹æœä¸ºæˆ‘ä»¬æä¾›äº†è®¸å¤š [iOS](https://hackernoon.com/tagged/ios) åŠŸèƒ½ï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥æé«˜æˆ‘ä»¬åº”ç”¨çš„å¯è§æ€§ï¼Œå³ä½¿ç”¨æˆ·ä¸ä½¿ç”¨å®ƒã€‚æ¯”å¦‚åƒ [*èšå…‰ç¯*](https://hackernoon.com/tagged/spotlight) *ï¼Œä»Šæ—¥ Widget* ï¼Œ *iMessage* ï¼Œ*æ¨é€é€šçŸ¥ï¼ŒSiri ç­‰ç­‰åŠŸèƒ½..*ã€‚

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘å°†ä»‹ç»å¦‚ä½•ä¸ºæ‚¨çš„ iOS åº”ç”¨ç¨‹åºæ­£ç¡®ä½¿ç”¨ Spotlight åŠŸèƒ½ã€‚æˆ‘æœ€è¿‘åœ¨æˆ‘çš„æœ€æ–° iOS åº”ç”¨ç¨‹åº [*ä¸­å®ç°äº†è¿™ä¸ªåŠŸèƒ½ï¼Œåä¸º 1BET*](http://apple.co/2CrlXDf) ï¼Œæ‰€ä»¥ä½ å°†çœ‹åˆ°çš„æ‰€æœ‰æˆªå›¾éƒ½æ¥è‡ªé‚£é‡Œã€‚

# èšå…‰ç¯

Spotlight æ˜¯ iOS ä¸­ä¸€ä¸ªè¶…çº§å¼ºå¤§çš„æœç´¢åŠŸèƒ½ï¼Œå¯ä»¥æœç´¢æ”¯æŒå®ƒçš„å·²å®‰è£…åº”ç”¨ç¨‹åºçš„å†…å®¹ã€‚è¿™ç±»ä¼¼äºä½ åœ¨ Safari ä¸Šçš„æœç´¢ä½“éªŒã€‚å®ƒè¿˜ä¸ Siri åŒæ­¥ï¼Œå¹¶ä¸ºæ‚¨æä¾›çƒ­é—¨æ­Œæ›²éƒ¨åˆ†ã€‚ä½ å¯ä»¥é€šè¿‡ä»ä¸»èœå•å‘ä¸‹æ»‘åŠ¨æ¥å®šä½ Spotlightã€‚

**æˆ‘å°†è®²è¿°å…³äº Spotlight æœ€é‡è¦çš„ä¸¤ä»¶äº‹:**

1.  è®©æ‚¨çš„å†…å®¹å¯ä»¥åœ¨ Spotlight ä¸Šæœç´¢åˆ°ï¼›
2.  å°†æŒ‰ä¸‹çš„é¡¹ç›®æ‹¦æˆªå›æ‚¨çš„ iOS åº”ç”¨ç¨‹åºï¼›

## #1 åˆ›å»ºå¯æœç´¢çš„å†…å®¹

å¦‚æœæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå†…å®¹å‡ºç°åœ¨ Spotlight ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ [CoreSpotlight](https://developer.apple.com/documentation/corespotlight) æ¡†æ¶ã€‚ä¸ºäº†åˆ›å»ºå¯æœç´¢çš„å†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦ç†Ÿæ‚‰:

*   [CSSearchableItemAttributeSet](https://developer.apple.com/documentation/corespotlight/cssearchableitemattributeset)-æŒ‡å®šæ‚¨å¸Œæœ›åœ¨ Spotlight ä¸­æ˜¾ç¤ºçš„å±æ€§(å³æ ‡é¢˜ã€å†…å®¹æè¿°ã€ç¼©ç•¥å›¾)ã€‚
*   [CSSearchableItem](https://developer.apple.com/documentation/corespotlight/cssearchableitem) -è¿™ä¸ªç±»è¡¨ç¤ºæœç´¢é¡¹ã€‚æˆ‘ä»¬å¯ä»¥åˆ†é…ä¸€ä¸ª ***å”¯ä¸€æ ‡è¯†ç¬¦*** ç”¨äºå¼•ç”¨å¯¹è±¡ï¼Œä¸€ä¸ª ***åŸŸ*** ç”¨äºç®¡ç†ç»„ä¸­çš„é¡¹ç›®ï¼Œä¸€ä¸ª ***å±æ€§é›†*** ç”¨äºä¼ é€’æˆ‘ä»¬ä¸ºè¯¥å¯¹è±¡åˆ›å»ºçš„*CSSearchableItemAttributeSet*ã€‚
*   [CSSearchableIndex](https://developer.apple.com/documentation/corespotlight/cssearchableindex)â€”â€”ä¸€ä¸ªè´Ÿè´£ç´¢å¼• Spotlight ä¸Šå†…å®¹çš„ç±»ã€‚å®ƒéœ€è¦ä¸€ä¸ªæ•°ç»„ *CSSearchableItemã€‚*

ç°åœ¨ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸‰ä¸ªç±»ä¸€èµ·å·¥ä½œçš„ä¾‹å­ã€‚ğŸ‘‡

è¿™æ˜¯æˆ‘åœ¨ [1BET](http://apple.co/2CrlXDf) ä¸­å¤„ç†èšå…‰ç¯æ”¯æŒçš„æ–¹å¼â€¦

CoreSpotlight æ¡†æ¶æœ‰è‡ªå·±çš„è§„åˆ™ï¼Œæˆ‘ä»¬å¿…é¡»éµå®ˆã€‚ *CSSearchableItem* æ˜¯æˆ‘ä»¬éœ€è¦åˆ©ç”¨çš„æ•°æ®æ¨¡å‹ï¼Œä»¥ä¾¿è®©èšå…‰ç¯æ­£å¸¸å·¥ä½œã€‚å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘æ­£åœ¨è¿­ä»£æˆ‘çš„æ•°æ®æ¨¡å‹ï¼Œå¹¶ä½¿ç”¨æˆ‘éœ€è¦çš„å±æ€§åˆ›å»º *CSSearchableItem* å¯¹è±¡ã€‚ä¹‹åï¼Œåªéœ€å°†æ‰€æœ‰æ–°åˆ›å»ºçš„é¡¹ç›®æ·»åŠ åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ *CSSearchableIndexã€‚*

æ­¤æ—¶ï¼Œå½“æ‚¨å¼€å§‹æœç´¢æ—¶ï¼Œæ‚¨éœ€è¦åœ¨ Spotlight ä¸­çœ‹åˆ°ç»“æœã€‚å°±æ˜¯è¿™æ ·ï¼ğŸ˜‰

![](img/89b9cee995c38d9c5181057b7d8430c2.png)

> æ³¨æ„:å½“ç„¶è¿˜æœ‰æ¯”ä¸Šé¢çœ‹åˆ°çš„æ›´å¤šçš„å±æ€§ã€‚ä½ å¯ä»¥åœ¨è‹¹æœå®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°ã€‚

**åŸŸåä»€ä¹ˆæ—¶å€™æœ‰ç”¨ï¼Ÿ** *CSSearchableItem*åŸŸå±æ€§å¯èƒ½ç›¸å½“æœ‰ç”¨ã€‚å¦‚æœä½ å¯¹æˆ‘ä»¬ä¸ºä»€ä¹ˆéœ€è¦åŸŸåæœ‰ä»»ä½•å›°æƒ‘ï¼Œæˆ‘ç°åœ¨å°†è§£é‡Šä¸€ç§æƒ…å†µâ€¦åœ¨æˆ‘çš„ä¾‹å­ä¸­ï¼Œæˆ‘æœ‰ 2 ä¸ªä¸åŒçš„åŸŸå`matches`å’Œ`news`ã€‚*æ¯”èµ›*åŸŸå¡«å……æœ‰æ¯”èµ›æŠ•æ³¨æç¤ºï¼Œ*æ–°é—»*å¡«å……æœ‰æœ€æ–°çš„ä½“è‚²æ–‡ç« ã€‚

ç°åœ¨ï¼Œæˆ‘åªåœ¨æŸäº›ç‰¹å®šæƒ…å†µä¸‹æ˜¾ç¤º*æ–°é—»*ã€‚è¿™æ„å‘³ç€æœ‰æ—¶æˆ‘ä¸æƒ³è®©ä»–ä»¬å‡ºç°åœ¨èšå…‰ç¯ä¸‹ã€‚å¦‚æœä½ å·²ç»æŠŠå®ƒä»¬æ·»åŠ åˆ°äº†ç´¢å¼•ä¸­ï¼Œå®ƒä»¬å°†ä¼šç•™åœ¨é‚£é‡Œã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥åˆ é™¤è¯¥åŸŸ(ç»„)ä¸­çš„æ‰€æœ‰æ¡ç›®ã€‚ğŸ‘‡

ä½¿ç”¨ CSSearchableIndexï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°åˆ é™¤ç‰¹å®šé¢†åŸŸçš„æ‰€æœ‰å¯æœç´¢é¡¹ç›®ã€‚æ‚¨ä¹Ÿå¯ä»¥åŒæ—¶æ·»åŠ å¤šä¸ªåŸŸã€‚

## #2 æˆªå–æŒ‰ä¸‹çš„é¡¹ç›®

åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”¨æˆ·å‘ç°æ‚¨åœ¨ Spotlight ä¸Šçš„ä¸€äº›æœç´¢ç»“æœå¾ˆæœ‰è¶£ï¼Œå¹¶å¸Œæœ›çœ‹åˆ°æ›´å¤šä¿¡æ¯ã€‚ç”¨æˆ·ç‚¹å‡»è¯¥é¡¹ç›®ï¼Œä¼šè‡ªåŠ¨é‡å®šå‘åˆ°æ‚¨çš„åº”ç”¨ç¨‹åºã€‚ä½†æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰æ­£ç¡®æ‹¦æˆªè¯¥é¡¹ç›®ï¼Œç”¨æˆ·å°†åªä¼šå‡ºç°åœ¨åº”ç”¨ç¨‹åºçš„åˆå§‹å±å¹•ä¸Šï¼Œè€Œä¸æ˜¯è¢«é‡å®šå‘åˆ°ç‰¹å®šçš„å†…å®¹ã€‚

![](img/3a02c914fde4d98b4afd2a6bcfa25c1b.png)

[http://apple.co/2CrlXDf](http://apple.co/2CrlXDf)

è¿™æ˜¯ä¸€ä¸ªç”¨æˆ·å¦‚ä½•æ‰“å¼€ Spotlightï¼Œè¿›è¡Œæœç´¢ï¼Œå¹¶é€šè¿‡ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªé¡¹ç›®é‡å®šå‘åˆ°æ¯”èµ›æ¦‚è§ˆå±å¹•çš„æµç¨‹ã€‚

**App Delegate** é¦–å…ˆï¼Œè½¬åˆ°`AppDelegate.swift`æ·»åŠ ä¸‹é¢çš„ç‰‡æ®µã€‚è¿™ä¸ªæ–¹æ³•å°†è§¦å‘æ ¹è§†å›¾æ§åˆ¶å™¨å†…éƒ¨çš„`restoreUserActivityState()`ã€‚æ‚¨è¿˜å¯ä»¥æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬æ­£åœ¨ä¼ é€’åŒ…å«å·²æŒ‰ä¸‹é¡¹ç›®æ•°æ®çš„ [NSUserActivity](https://developer.apple.com/documentation/foundation/nsuseractivity) å¯¹è±¡ã€‚ğŸ‘‡

> *æ³¨æ„:æˆ‘çš„æ ¹è§†å›¾æ§åˆ¶å™¨çš„ä½ç½®å¦‚ç¤ºä¾‹æ‰€ç¤ºã€‚ä½ å¿…é¡»ç”¨ä½ è‡ªå·±çš„é€»è¾‘å»æ”¹å˜å®ƒã€‚*

**UIViewController** æœ€åä¸€æ­¥æ˜¯æ‰“å¼€æ‚¨åœ¨ AppDelegate æ–¹æ³•ä¸­è½¬æ¢çš„è§†å›¾æ§åˆ¶å™¨ï¼Œå¹¶åœ¨é‚£é‡Œè¦†ç›–*restoreuractivitystate()*ã€‚ğŸ‘‡

å¦‚æœæ‚¨ä»ä¸€å¼€å§‹å°±éµå¾ªäº†æœ¬æ•™ç¨‹ï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æˆ‘ä»¬æ­£åœ¨å°†ä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦*ä¼ é€’ç»™æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ª*[*CSSearchableItem*](https://developer.apple.com/documentation/corespotlight/cssearchableitem)ã€‚restoreUserActivityState å°†å‘æˆ‘ä»¬è¿”å›è¯¥æ ‡è¯†ç¬¦ï¼Œè¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ‰¾åˆ°åˆé€‚çš„å¯¹è±¡ï¼Œå¹¶æä¾›ç”¨æˆ·åº”è¯¥å¯¼èˆªåˆ°çš„åˆé€‚çš„è§†å›¾æ§åˆ¶å™¨ã€‚**

****è¿™å°±æ˜¯è¿™ç¯‡æ•™ç¨‹ï¼Œæˆ‘å¸Œæœ›å®ƒèƒ½å¸®åŠ©ä½ å­¦ä¼šå¦‚ä½•ä¸ºä½ çš„ iOS åº”ç”¨ç¨‹åºæ·»åŠ  Spotlight æ”¯æŒã€‚æˆ‘ä¹Ÿå¸Œæœ›è¿™ä¸ªç‰¹æ€§èƒ½ç»™ä½ çš„åˆ†æè½¯ä»¶å¸¦æ¥ç§¯æçš„æ¨åŠ¨ã€‚ğŸ“ˆ****

**å¦‚æœä½ èƒ½ï¼Œæˆ‘å°†ä¸èƒœæ„Ÿæ¿€ğŸ‘æˆ–è€…åˆ†äº«è¿™ä¸ªæ•…äº‹ï¼Œä»¥ä¾¿å…¶ä»–äººå¯ä»¥æ‰¾åˆ°å®ƒå¹¶ä»ä¸­å­¦ä¹ ã€‚å¹²æ¯ï¼**

**[![](img/3b10192bfb279b218705b94b67cf09cd.png)](http://bit.ly/2KkkwGL)**

## **æŸ¥çœ‹æˆ‘çš„æœ€æ–°é¡¹ç›®:**

**[](https://play.google.com/store/apps/details?id=betting.tips.goals) [## BetScore:Google Play ä¸Šçš„è¶³çƒåšå½©æŠ€å·§ã€æ¯”åˆ†å’Œèµ”ç‡åº”ç”¨

### æˆ‘ä»¬æä¾›é«˜èƒœç‡çš„ä¸“ä¸šè¶³çƒæŠ€å·§ã€‚æ¯ä¸ªæ¯”èµ›æ¨¡æ‹ŸåŒ…å«ä¸‰ä¸ªé¢„æµ‹â€¦

play.google.com](https://play.google.com/store/apps/details?id=betting.tips.goals) [](https://play.google.com/store/apps/details?id=betting.tips.sportsbet) [## Google Play ä¸Šçš„ç¯®çƒã€æ›²æ£çƒå’Œæ‰‹çƒåº”ç”¨ç¨‹åºçš„ä¸‹æ³¨æŠ€å·§

### è¶…è¿‡ 500ï¼Œ000 åèŒä¸šåšå½©å®¢æˆ·ã€ä½“å½©æŠ•æ³¨è€…å’Œä½“è‚²åšå½©çˆ±å¥½è€…ä¿¡ä»»æˆ‘ä»¬çš„æ—¥å¸¸ä½“è‚²åšå½©â€¦

play.google.com](https://play.google.com/store/apps/details?id=betting.tips.sportsbet) 

## é˜…è¯»æ›´å¤šæˆ‘åœ¨åª’ä½“ä¸Šçš„ä½œå“:

[](https://hackernoon.com/introducing-clean-swift-architecture-vip-770a639ad7bf) [## å¼•å…¥å¹²å‡€çš„ Swift æ¶æ„(VIP)

### å¿˜äº† MVC å§ï¼Œç°åœ¨ï¼

hackernoon.com](https://hackernoon.com/introducing-clean-swift-architecture-vip-770a639ad7bf) [](https://medium.freecodecamp.org/how-you-can-use-the-google-maps-sdk-with-ios-using-swift-4-a9bba26d9c4d) [## ä½¿ç”¨ Swift 4 åœ¨ iOS ä¸Šä½¿ç”¨ Google Maps SDK çš„ç»ˆææŒ‡å—

### è®¸å¤š iOS åº”ç”¨ç¨‹åºä½¿ç”¨è°·æ­Œåœ°å›¾ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„ç‰¹ç‚¹ï¼Œæ‰€ä»¥æˆ‘å†³å®šå‡†å¤‡ä¸€ä¸ªç»ˆææŒ‡å—â€¦

medium.freecodecamp.org](https://medium.freecodecamp.org/how-you-can-use-the-google-maps-sdk-with-ios-using-swift-4-a9bba26d9c4d) [](/theappspace/swift-custom-uiview-with-xib-file-211bb8bbd6eb) [## SWIFT â€”å¸¦æœ‰ XIB æ–‡ä»¶çš„è‡ªå®šä¹‰ UIView

### ç”¨ XIB æ–‡ä»¶å®šåˆ¶ UIView æ˜¯ iOS å¼€å‘ä¸­éå¸¸å¸¸è§çš„åšæ³•ã€‚è‡ªå®šä¹‰ UIView ç±»ä¸åŒ…å« XIB æ–‡ä»¶â€¦

medium.com](/theappspace/swift-custom-uiview-with-xib-file-211bb8bbd6eb) [](https://hackernoon.com/how-to-add-spotlight-support-to-your-ios-app-4a89054aff89) [## å¦‚ä½•å°† Spotlight æ”¯æŒæ·»åŠ åˆ°æ‚¨çš„ iOS åº”ç”¨ç¨‹åº

### Swift æ•™ç¨‹å°†ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºåœ¨ Spotlight search ä¸­å¯ç”¨

hackernoon.com](https://hackernoon.com/how-to-add-spotlight-support-to-your-ios-app-4a89054aff89) [](https://hackernoon.com/core-data-relationships-d813ed66ba8c) [## æ ¸å¿ƒæ•°æ®å…³ç³»

### ç†è§£ä¸€å¯¹ä¸€å’Œä¸€å¯¹å¤šå…³ç³»

hackernoon.com](https://hackernoon.com/core-data-relationships-d813ed66ba8c) [](https://hackernoon.com/understanding-auto-layout-in-xcode-9-2719710f0706) [## äº†è§£ Xcode 9 ä¸­çš„è‡ªåŠ¨å¸ƒå±€

### æ‰€æœ‰ä½ éœ€è¦çŸ¥é“çš„å…³äºè‡ªåŠ¨å¸ƒå±€

hackernoon.com](https://hackernoon.com/understanding-auto-layout-in-xcode-9-2719710f0706) 

## è®¢é˜…æˆ‘çš„æ—¶äº‹é€šè®¯:**