# å¦‚ä½•ä½¿ç”¨ Webpack 4 å’Œ Babel ä»å¤´æ„å»ºä¸€ä¸ª React é¡¹ç›®

> åŸæ–‡ï¼š<https://medium.com/hackernoon/how-to-build-a-react-project-from-scratch-using-webpack-4-and-babel-56d4a26afd32>

![](img/2c6610b2e6f9e8a4be561cd44008dff2.png)

â€œMan wearing headphones at desk with window view of sunset in backgroundâ€ by [Simon Abrams](https://unsplash.com/@flysi3000?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

æˆ‘æœ€è¿‘ä¸€ç›´åœ¨å­¦ä¹  [react](https://reactjs.org/) ï¼Œæˆ‘å·²ç»ä½¿ç”¨ [create-react-app](https://github.com/facebook/create-react-app) ä»¥æœ€å°‘çš„åŠªåŠ›å’Œé…ç½®è½»æ¾åœ°åˆ›å»ºäº†æˆ‘çš„ React é¡¹ç›®ï¼Œæˆ‘çŒœä½ ä¹Ÿå¾ˆå¯èƒ½ä½¿ç”¨è¿‡ [create-react-app](https://github.com/facebook/create-react-app) æˆ–[React-slings](https://github.com/coryhouse/react-slingshot)æ¥åˆ›å»ºä½ çš„ React åº”ç”¨ã€‚å¦‚æœæ‚¨åªæƒ³ä¸“æ³¨äº React å¹¶è®©ä»–ä»¬è´Ÿè´£é…ç½®ï¼Œè¿™äº›æ˜¯éå¸¸æ£’çš„å·¥å…·ã€‚ä½†è¿™æ˜¯ä½ æƒ³å­¦çš„ååº”æ–¹å¼å—ï¼Ÿ

å¯èƒ½ä¸æ˜¯ï¼Œè¿™å°±æ˜¯ä½ åœ¨è¿™é‡Œçš„åŸå› ã€‚æ‰€ä»¥æˆ‘ä»¬å¼€å§‹å§:)

# å¼€å§‹ä½¿ç”¨:

åœ¨å¼€å§‹ä¹‹å‰ï¼Œä½ å¿…é¡»åœ¨ä½ çš„ç”µè„‘ä¸Šå®‰è£… npmï¼Œå®ƒä¸ [Node.js](https://nodejs.org/en/) æ†ç»‘åœ¨ä¸€èµ·ï¼Œä½ å¯ä»¥ä»[è¿™é‡Œ](https://nodejs.org/en/download/)å®‰è£…å®ƒã€‚

## æ–‡ä»¶å¤¹ç»“æ„:

![](img/e2cd827920d729b6c1f4e6ad9cbcb0df.png)

Folder structure for the React app

æ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å‘½ä»¤åˆ›å»ºä¸Šè¿°ç›®å½•ã€‚

```
mkdir react-boilerplate
cd react-boilerplate
mkdir -p src/components src/styles
```

# åˆå§‹åŒ–é¡¹ç›®:

æ‰€æœ‰ä½¿ç”¨èŠ‚ç‚¹åŒ…ç®¡ç†å™¨(npm)çš„é¡¹ç›®éƒ½å¿…é¡»åˆå§‹åŒ–ã€‚è¦åˆå§‹åŒ–é¡¹ç›®ï¼Œè¯·åœ¨ç»ˆç«¯ä¸­è¾“å…¥ä»¥ä¸‹å‘½ä»¤ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ª **package.json** æ–‡ä»¶ã€‚

```
npm init
```

æ‚¨å°†è¢«é—®åŠå‡ ä¸ªä¸é¡¹ç›®ç›¸å…³çš„é—®é¢˜ï¼Œæ‚¨å¯ä»¥é€šè¿‡æŒ‰ enter è·³è¿‡å®ƒä»¬ï¼Œå¦‚æœæ‚¨æƒ³è·³è¿‡æ‰€æœ‰é—®é¢˜ï¼Œè¯·æ·»åŠ -y æ ‡å¿—ã€‚

```
npm init -y
```

ç°åœ¨ï¼Œæ‚¨çš„ package.json æ–‡ä»¶å°†å¦‚ä¸‹æ‰€ç¤ºã€‚

```
{
"name": "react-boilerplate",
"version": "1.0.0",
"description": "",
"main": "index.js",
"scripts": {
  "test": "echo \"Error: no test specified\" && exit 1"
},
"keywords": [],
"author": "",
"license": "ISC"
}
```

# å®‰è£… Webpack:

Webpack æ˜¯ä¸€ä¸ªæ¨¡å—æ†ç»‘å™¨ï¼Œå¯ä»¥è®©æˆ‘ä»¬å°†é¡¹ç›®æ–‡ä»¶æ†ç»‘æˆä¸€ä¸ªæ–‡ä»¶ç”¨äºç”Ÿäº§ã€‚å› æ­¤ï¼Œè®©æˆ‘ä»¬å°† webpack æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚

```
npm install **webpack** **webpack-cli** --save-dev
```

ä¸Šé¢çš„å‘½ä»¤å°†æŠŠ **webpack** å’Œ **webpack-cli** ä½œä¸ºå¼€å‘ä¾èµ–é¡¹æ·»åŠ åˆ°æˆ‘ä»¬çš„é¡¹ç›®ä¸­ã€‚æˆ‘ä»¬å®‰è£…äº† **webpack-cli** ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨ **webpack** ã€‚

# å®‰è£… React:

å°† **react** å’Œ **react-dom** ä½œä¸ºä¾èµ–é¡¹å®‰è£…ã€‚

```
npm install **react** **react-dom** --save
```

# å®‰è£… Babel:

ä¸ºäº†è®© React å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®ƒæ—è¾¹å®‰è£… Babelã€‚æˆ‘ä»¬éœ€è¦å·´åˆ«å¡”ç©¿è¶Š ES6ï¼ŒJSX ç©¿è¶Š ES5ã€‚

å®‰è£… **babel-core** ã€ **babel-loader** ã€ **babel-preset-env** ã€ **babel-preset-react** ä½œä¸ºå¼€å‘ä¾èµ–ã€‚

```
npm install **@babel/core** **babel-loader** **@babel/preset-env** **@babel/preset-react** --save-dev
```

*   **å·´åˆ«æ ¸å¿ƒ:**å°† ES6 ä»£ç è½¬æ¢ä¸º ES5
*   **babel-loader:** ç»™å®šé¢„è®¾ï¼ŒWebpack åŠ©æ‰‹ç”¨äºä¼ è¾“ä»£ç ã€‚
*   **babel-preset-env** :å¸®åŠ© babel å°† ES6ã€ES7ã€ES8 ä»£ç è½¬æ¢ä¸º ES5 çš„é¢„ç½®ã€‚
*   **å·´åˆ«å¡”-é¢„è®¾-ååº”:**å°† JSX è½¬æ¢ä¸º JavaScript çš„é¢„è®¾ã€‚

**Index.js :**

åœ¨ ***/src*** æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª index.js æ–‡ä»¶ï¼Œç°åœ¨åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚è¿™ä¸ªæ–‡ä»¶å°†æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹ã€‚

```
console.log("hello");
```

**Index.html:**

åœ¨ ***/src*** æ–‡ä»¶å¤¹çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª index.html æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚

# å…¥å£å’Œè¾“å‡ºæ–‡ä»¶:

åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª **webpack.config.js** ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ºæˆ‘ä»¬çš„åŠ è½½å™¨å®šä¹‰è§„åˆ™ã€‚

åœ¨ **webpack.config.js** ä¸­å®šä¹‰æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹å’Œè¾“å‡ºç›®å½•

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼ŒWebpack å°†æˆ‘ä»¬æ‰€æœ‰çš„ JavaScript æ–‡ä»¶æ†ç»‘åˆ° ***/dist*** ç›®å½•ä¸­çš„ **index-bundle.js** æ–‡ä»¶ä¸­ã€‚

# Webpack åŠ è½½å™¨:

ç°åœ¨åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­æ·»åŠ ä¸€äº›åŠ è½½å™¨ï¼Œå®ƒä»¬å°†è´Ÿè´£åŠ è½½å’Œæ†ç»‘æºæ–‡ä»¶ã€‚

åœ¨ **webpack.config.js ä¸­ï¼Œ**æ·»åŠ ä»¥ä¸‹ä»£ç è¡Œ:

è¿™é‡Œ **babel-loader** ç”¨äºåŠ è½½æˆ‘ä»¬çš„ JSX/JavaScript æ–‡ä»¶ï¼Œè€Œ **css-loader** ç”¨äºåŠ è½½å’Œæ†ç»‘æ‰€æœ‰çš„ css æ–‡ä»¶åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œ **style-loader** å°†åœ¨æ–‡æ¡£çš„ style æ ‡ç­¾ä¸­æ·»åŠ æ‰€æœ‰çš„æ ·å¼ã€‚

åœ¨ Webpack å¯ä»¥ä½¿ç”¨ **css åŠ è½½å™¨**å’Œ**æ ·å¼åŠ è½½å™¨**ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»å°†å®ƒä»¬ä½œä¸ºå¼€å‘ä¾èµ–é¡¹è¿›è¡Œå®‰è£…ã€‚

```
npm install **css-loader** **style-loader** --save-dev
```

*è¯·è®°ä½ï¼Œwebpack ä»æœ€ååˆ°ç¬¬ä¸€ä¸ªæ‰§è¡ŒåŠ è½½ç¨‹åºï¼Œå³ä»å³åˆ°å·¦ã€‚*

## ã€‚babelrc:

ç°åœ¨ï¼Œåœ¨é¡¹ç›®ç›®å½•çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª. babelrc æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ã€‚

```
{
  "presets": ["@babel/preset-env", "@babel/preset-react"]
}
```

è¿™ä¸ªæ–‡ä»¶å°†å‘Šè¯‰ babel ä½¿ç”¨å“ªäº›é¢„ç½®æ¥ç¼–è¯‘ä»£ç ã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ä¸¤ç§é¢„è®¾:

*   **env** :è¯¥é¢„ç½®ç”¨äºå°† ES6/ES7/ES8 ä»£ç è½¬æ¢åˆ° ES5ã€‚
*   **ååº”**:è¯¥é¢„ç½®ç”¨äºå°† JSX ä»£ç è½¬æ¢æˆ ES5ã€‚

# ä½¿ç”¨ Webpack ç¼–è¯‘æ–‡ä»¶:

å°†ä»¥ä¸‹ä»£ç è¡Œæ·»åŠ åˆ° package.json æ–‡ä»¶çš„è„šæœ¬å¯¹è±¡ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```
"start": "webpack --mode development --watch",
"build": "webpack --mode production"
```

è¿™é‡Œæˆ‘ä½¿ç”¨äº† **watch** æ ‡å¿—ï¼Œæ‰€ä»¥æ¯å½“æºæ–‡ä»¶æœ‰å˜åŒ–æ—¶ï¼Œwebpack ä¼šè‡ªåŠ¨ç¼–è¯‘æ‰€æœ‰çš„æºæ–‡ä»¶ã€‚

webpack 4 ä¸­æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ç”Ÿäº§æ¨¡å¼ï¼Œç”¨äºç”Ÿæˆå¯ç”¨äºç”Ÿäº§çš„ä¼˜åŒ–æ–‡ä»¶ï¼›å¦ä¸€ç§æ˜¯å¼€å‘æ¨¡å¼ï¼Œç”¨äºç”Ÿæˆæ˜“äºé˜…è¯»çš„ä»£ç ï¼Œä¸ºæ‚¨æä¾›æœ€ä½³å¼€å‘ä½“éªŒã€‚`--mode`æ ‡å¿—è®©æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨å“ªç§æ¨¡å¼ã€‚

ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ç¼–è¯‘é¡¹ç›®:

```
npm start
```

æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œæ‚¨å°†çœ‹åˆ°åœ¨ ***/dist*** ç›®å½•ä¸‹åˆ›å»ºçš„ **index_bundle.js** æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å°†åŒ…å«ä» **index.js** æ–‡ä»¶ä¸­è½¬ç¼–è¯‘çš„ ES5 ä»£ç ã€‚

## App.js

åœ¨ ***src*** æ–‡ä»¶å¤¹çš„ ***components*** æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª App.js æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ã€‚

## App.css:

åœ¨ ***src*** æ–‡ä»¶å¤¹çš„ ***styles*** æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ª App.css æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ã€‚

è¿™ä¸ª css æ–‡ä»¶ç”¨äºç¡®ä¿ CSS åŠ è½½å™¨å’Œæ ·å¼åŠ è½½å™¨æ­£å¸¸å·¥ä½œã€‚

ç°åœ¨ä¿®æ”¹æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„ **index.js** æ–‡ä»¶ï¼Œä½¿å…¶åŒ…å«ä»¥ä¸‹ä»£ç è¡Œã€‚

# æ­£åœ¨å®‰è£… Html-webpack-plugin:

ç°åœ¨æˆ‘ä»¬è¿˜éœ€è¦å®‰è£… **html-webpack-plugin** ï¼Œè¿™ä¸ªæ’ä»¶ç”Ÿæˆä¸€ä¸ª html æ–‡ä»¶ï¼Œå°†è„šæœ¬æ³¨å…¥ HTML æ–‡ä»¶å†…éƒ¨ï¼Œå¹¶å°†è¿™ä¸ªæ–‡ä»¶å†™å…¥ **dist/index.html** ã€‚

å°† html-webpack-plugin ä½œä¸ºå¼€å‘ä¾èµ–é¡¹å®‰è£…:

```
npm install **html-webpack-plugin** --save-dev
```

ç°åœ¨æˆ‘ä»¬éœ€è¦åœ¨ **webpack.config.js** æ–‡ä»¶ä¸­é…ç½®è¿™ä¸ªæ’ä»¶ï¼Œåœ¨å…¶ä¸­æ·»åŠ ä¸‹é¢å‡ è¡Œä»£ç ã€‚

è¿™é‡Œæ¨¡æ¿é”®å€¼æ˜¯æˆ‘ä»¬ä¹‹å‰åˆ›å»ºçš„æ–‡ä»¶**index.html**ï¼Œå®ƒä½¿ç”¨è¿™ä¸ªæ–‡ä»¶ä½œä¸ºæ¨¡æ¿ï¼Œåœ¨ ***/dist*** æ–‡ä»¶å¤¹å†…ç”Ÿæˆåä¸º**index.html**çš„æ–°æ–‡ä»¶ï¼Œå¹¶æ³¨å…¥è„šæœ¬ã€‚

è®¾ç½®å‡ ä¹å®Œæˆäº†ï¼Œæˆ‘ä»¬è¦åšçš„å°±æ˜¯ä½¿ç”¨ webpack ç¼–è¯‘æºæ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤è¿è¡Œé¡¹ç›®:

```
npm start
```

ä½ ä¼šåœ¨é¡¹ç›®çš„/ ***dist*** æ–‡ä»¶å¤¹ä¸­å¾—åˆ°è¾“å‡ºï¼Œç°åœ¨åœ¨ç½‘é¡µæµè§ˆå™¨ä¸­æ‰“å¼€**index.html**ï¼Œä½ ä¼šçœ‹åˆ°æ–‡æœ¬**â€œæˆ‘çš„ React åº”ç”¨ï¼â€**å®ƒçš„å†…éƒ¨ã€‚

ä½†æ˜¯è¿™ç§æ–¹æ³•æœ‰ä¸€ä¸ªç¼ºç‚¹ï¼Œä½ å¿…é¡»æ‰‹åŠ¨åˆ·æ–°ç½‘é¡µï¼Œæ‰èƒ½çœ‹åˆ°ä½ æ‰€åšçš„æ”¹å˜ã€‚ä¸ºäº†è®© webpack ç›‘è§†æˆ‘ä»¬çš„æ›´æ”¹å¹¶åœ¨æˆ‘ä»¬çš„ç»„ä»¶å‘ç”Ÿä»»ä½•æ›´æ”¹æ—¶åˆ·æ–°ç½‘é¡µï¼Œæˆ‘ä»¬å¯ä»¥å®‰è£… **webpack-dev-serverã€‚**

# æ­£åœ¨å®‰è£… Webpack-dev-server:

å®‰è£… **webpack-dev-server** ä½œä¸ºå¼€å‘ä¾èµ–é¡¹

```
npm install **webpack-dev-server** --save-dev
```

å¹¶ä¿®æ”¹ **package.json** å¯åŠ¨è„šæœ¬å¦‚ä¸‹:

```
"start": "webpack-dev-server --mode development --open --hot"
```

æˆ‘æ·»åŠ äº†ä¸¤ä¸ªæ ‡å¿—`--open`å’Œ`--hot`,æ¯å½“ç»„ä»¶å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒä»¬éƒ½ä¼šæ‰“å¼€å¹¶åˆ·æ–°ç½‘é¡µã€‚

ç°åœ¨åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
npm start
```

æ‚¨åº”è¯¥çœ‹åˆ°æµè§ˆå™¨çª—å£æ‰“å¼€å¹¶æ˜¾ç¤ºå†…å®¹ï¼Œå°±åƒä¸‹é¢çš„æˆªå›¾ã€‚

![](img/e7bf5b77f95bbe4c5a73d5d36f32313d.png)

Output in a browser window

å°±è¿™æ ·ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†è‡ªå·±çš„ React æ ·æ¿æ–‡ä»¶ï¼Œå¯ä»¥ç”¨æ¥åˆ›å»º React é¡¹ç›®ã€‚ä½ ä¹Ÿå¯ä»¥ä»æˆ‘çš„ [**Github**](https://github.com/SukhjinderArora/react-boilerplate) ä¸‹è½½è¿™ä¸ª react è®¾ç½®ã€‚

å¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©ï¼Œè¯·ç‚¹å‡»ğŸ‘æŒ‰é’®ã€‚å¦‚æœä½ æœ‰ä»»ä½•ç–‘é—®ï¼Œå¯ä»¥åœ¨ä¸‹é¢è¯„è®ºï¼Œæˆ‘å¾ˆä¹æ„å¸®å¿™:)