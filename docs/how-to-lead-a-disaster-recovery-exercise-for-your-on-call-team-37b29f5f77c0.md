# 如何领导您的待命团队进行灾难恢复练习

> 原文：<https://medium.com/hackernoon/how-to-lead-a-disaster-recovery-exercise-for-your-on-call-team-37b29f5f77c0>

![](img/43406f28947cc3477e8be60cbf36fc1f.png)

初创公司的随叫随到团队有三个大问题:他们规模小，覆盖的基础设施范围广，最后两点通常意味着他们缺乏维护和编写 DevOps 工具套件文档的带宽。在 SigOpt，我们的待命团队通过一年两次的“灾难恢复演习”或模拟停机来应对这些挑战。

在这篇博文中，我将向您展示什么是灾难恢复练习，它如何诊断您的基础架构中的弱点，以及它如何成为您的待命团队的学习经历。我希望到最后您会考虑为您的待命团队进行一次灾难恢复练习！

# 什么是灾难恢复练习？

灾难恢复练习是针对您的待命团队的消防演习。尽可能真实的练习是最有用的。一个设计良好的练习将包括工程师搜索您的生产代码库，试图找到在类似生产的环境中操作的工具。

我们的灾难恢复工作遵循四个基本原则:

*   所有待命的工程师都聚集在一个房间里
*   无菌环境(像产品，但不是产品)
*   明确的目标
*   限时恢复

在 SigOpt，我们在 [AWS](https://hackernoon.com/tagged/aws) 上运行，所以我们的第一个练习是在我们的备份区域从头开始构建一个 API。我们的无菌环境是 us-east-1，无法访问生产区域中的 ami、实例或数据库。我们的目标是触及 dr-api.sigopt.com，并为 API 请求提供服务。我们的时间盒是 4 小时，这是我们从一个[工程](https://hackernoon.com/tagged/engineering) OKR 中选择的。

> 提示:为每个练习创建新的 AWS 键，以避免意外删除生产资源(并临时停用当前的键，以确保使用新的键！)

# 作为基础设施诊断的灾难恢复练习

我们运行了最初的灾难恢复练习，以诊断我们恢复基础架构的能力中的漏洞。按照我们的目标，这个练习产生了几个月的项目。

虽然我们发现了许多更大的项目，但有趣的是，最快的修复通常是最不明显的错误。例如:

*   我们的安装脚本一天运行多次，依赖于预先存在的“sigopt”目录，这在新的 Ubuntu AMIs 上是不存在的
*   新的工程师不知道我们的机器管理脚本的存在

为了发现大大小小的问题，我们召开了一次汇报会议来结束练习。在这次会议中，我们坦率地讨论了哪些有效，哪些无效，并参考了练习中所做的笔记。

以下是我们在述职时问自己的一些问题:

*   目标实现了吗？如何更快地满足它？
*   使用了哪些工具？哪些不是(但应该是)？
*   什么工具坏了？什么是慢的？
*   我们没能恢复什么？

# 在 SigOpt，灾难恢复练习是一种团队学习体验

在 SigOpt，我们一直在努力学习。虽然灾难恢复练习最初是作为诊断基础架构的一种方式，但很快证明它是我们小团队的一个绝佳的试射学习机会，工程师们报告说，他们对自己的随叫随到问题解决能力越来越有信心。

我们使用以下原则为练习建立团队动力:

*   由新成员来领导练习的恢复部分，这样他们就有最大的机会从实践经验中学习
*   团队领导计划练习并领导总结，在恢复部分坐下来做笔记
*   为了定下基调，我们事先与团队进行了明确的沟通，这是每个人的学习机会，而不是对工程师个人能力的测试

此外，因为所有团队成员都在一个房间里处理一个问题，所以灾难恢复练习是一种独特的团队建设练习。为了在总结会议后扩大团队建设的氛围，我们开始在场外提供晚餐和饮料！

# 结论

灾难恢复演习对我们来说意义重大。这是一次消防演习，向新成员证明他们有能力成为我们随叫随到轮值的一员。这是识别坏的、坏的或难以找到的工具的诊断。而且，这是一个团队合作的练习，每个人坐在一起几个小时来解决一个挑战。下次你为你的待命团队计划团队活动时，我希望你能考虑你自己的灾难恢复练习！如果你有，我很想听听。