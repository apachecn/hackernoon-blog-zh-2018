# 我在 24 小时内建造了一个世界杯 2018 Slack 机器人

> 原文：<https://medium.com/hackernoon/i-built-a-world-cup-2018-slack-bot-in-24h-8518907a0ab0>

## 当你的球队出局时，你必须想办法消磨时间。

![](img/4f017c0db0b2c009ce28ff1d0bbb6398.png)

Photo by [Fauzan Saari](https://unsplash.com/@fznsr_?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

唉，意大利不参加 2018 年世界杯了。

作为一个只在国家队比赛时才关注足球的意大利人，这是一场变成现实的噩梦。从小到大，我等待着每 4 年一次的世界杯到来，以支持意大利，并在每个进球时失声尖叫。

不过，不必关注比赛给了我一些空闲时间。如果我不能以支持者的身份参加这次全球活动，我仍然可以以开发者的身份参加。

这就是为什么我想出了为 2018 年世界杯创造一个 Slack Bot 的想法。

为了增加任务的趣味，我决定只给我 24 小时，看看我能想出什么。

这个机器人的目标(双关语)很简单。

它必须能够**在一个空闲频道上通知当前每场比赛的细节**。特别是关于开始，结束和半场时间，进球，黄牌和红牌，换人。

你可以在这里看到我的小实验[的结果。你可以很容易地克隆并安装在你自己的 Slack 账户上。](https://github.com/nicolopignatelli/wc2018-slack-bot)

在这篇文章的剩余部分，我将解释这个机器人是如何设计和开发的。

# 基本想法

bot 是一个简单的 Go 应用程序，它执行以下操作:

1.  从 [worldcup.sfg.io](http://worldcup.sfg.io/) 获取今天比赛的信息(谢谢， [Eric S](https://medium.com/u/d4af42ab81c0?source=post_page-----8518907a0ab0--------------------------------) )
2.  判断是否有现场比赛。
3.  计算出自我们上次获取以来在现场比赛中发生了什么；
4.  提取最新的比赛集锦；
5.  《松弛》中的高光大喊。

该应用程序是 dockerized 的，用于准备就绪的开发体验和可执行文件的编译。 **Make + Docker 是一个杀手级组合，可以轻松而强大地自动化您的开发任务**。

该应用程序还可以根据轮询时间、机器人外观和空闲通道进行配置。

# 应用程序设计

机器人的设计围绕 3 个主要部分:

*   行程安排
*   Slack 机器人
*   世界杯领域模型

每个组件都反映在它自己的 Go 包中。

## 行程安排

当应用程序启动时，会创建一个调度程序来控制操作。

调度程序以可配置的时间间隔执行以下步骤:

*   获取当前匹配
*   获取当前比赛的最新集锦
*   将这些亮点发送给 slack bot

## Slack 机器人

Slack bot 是对令人惊叹的 golang Slack API 的一个非常简单的抽象。

它有一个方法`Say(something string)`来发送消息到在构造时配置的通道。

## 世界杯领域模型

所有的队，比赛，事件和集锦的定义属于这里。

它还定义了用于获取当前匹配的*库*。在引擎盖下，存储库调用/today[world cup . SFG . io](http://worldcup.sfg.io/)API，并判断是否有现场比赛正在进行。

# 结论

用 Go 构建和部署后端应用程序的简单和快速总是让我感到惊讶。作为一个例子，我发现`<-time.After(duration)`是一个非常优雅的实现滴答机制的一行解决方案。

24 小时限制是一个有效的方法，它防止我提前添加一个又一个特性，并且永远不发布功能性的东西。

我必须说，我有很多乐趣建立这个机器人。然而，我希望 4 年后我能花时间支持我的国家队，而不是再造一个世界杯机器人:-)

# 准备好成为更好的开发者了吗？

我为你创建了一个**开发者工具包**。免费下载并开始[学习](https://hackernoon.com/tagged/learning)如何编写令你自豪的代码。如果你不断地应用这些技术，你会成为一名顶尖的软件开发人员。

在这里获得免费的开发者工具包！

## 如果你喜欢这篇文章，请点击👏按钮并分享，帮助其他人找到它！欢迎在下方留言评论。

## 你也可以在这里订阅我的软件开发简讯:[http://eepurl.com/dfQQaz](http://eepurl.com/dfQQaz)