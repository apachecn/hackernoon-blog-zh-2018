# 调查远程攻击

> 原文：<https://medium.com/hackernoon/investigating-long-range-attack-2bce0887a2da>

## 对利害关系证明的理论攻击

![](img/0a3d595af907bcf65eeb38602a69f2f5.png)

Long Range — Photo by [William Daigneault](https://unsplash.com/photos/QPJnkgucg1k?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/long-range?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

对于我的忠实读者，我想你已经知道我要说的关于远程攻击的话了…但是如果你需要更多的说服力，请继续读下去。

远程攻击是怀疑利害关系证明算法和“弱主观性”概念的一个普遍原因。这个想法是，在某个时间点(最有可能是在创世纪块)，攻击者可以使用[区块链](https://hackernoon.com/tagged/blockchain)的现有状态，连同令牌余额的重要部分，来创建一个与真实链无法区分的链。攻击者然后欺骗用户使用他的恶意链，而不是真正的链。

正如我之前在关于[【无关紧要】](https://hackernoon.com/thoughts-about-nothing-at-stake-b93b13bb5d6e)攻击的文章中所观察到的，这种看似简单的攻击在实践中从未被观察到。考虑到事情的利害关系，这当然是一件奇怪的怪事。

我们的朋友 evil Bob 受到关于这个主题的[文章](https://blog.ethereum.org/2014/05/15/long-range-attacks-the-serious-problem-with-adaptive-proof-of-work/)的启发，决定对 Nxt 发动远程攻击。Bob 可以很容易地复制任意给定积木高度的链条状态，只需将区块链下载到该高度即可。现在，他需要在这个街区高度获得 Nxt 令牌的重要股份，以创建一个比真正的链难度更好的链。

如果 Bob 是一个大股东，拥有超过 50%的股份，他总是可以使用正常的 51%攻击来攻击 Nxt。因此，让我们首先假设 Bob 目前没有显著的 Nxt 余额。

对 Bob 来说幸运的是，当 Nxt 在 2013 年分发时，它只分发给了 72 名幸运的股东。鲍勃所要做的就是找到这些人，并得到他们的账户密码。事实上，Bob 并不需要跟踪所有这些人，他只需要获得比 Genesis block 时的 forging 股份更高的股份，当时 forging 股份只有 20%左右。找到或多或少 5 个创世纪的大股东并得到他们的密码就足够了。这些股东中的大多数已经把他们的资金转移到另一个账户或者卖掉了，所以把这些旧的账户密码给 Bob 不会有什么风险。也就是说，鲍勃无法强行进入这些账户。如果 Bob 不能获得超过创世纪赌注余额的密码，整个攻击可能就此结束。

考虑到 Nxt 分发是一个相对简单的情况，大多数股权凭证被分发到 Genesis 块的更多帐户。例如，Ardor 在 2016 年分发给了超过 10 万名 Nxt 持有者。尽管如此，我认为，对于像鲍勃这样资金雄厚、实力强大的攻击者来说，在创世纪区块发布时获得比锻造力量更大的区块链令牌股份是可能的，而不需要任何股份硬币的证明。

配备了安装 Nxt 软件后任何人都可以使用的 genesis block，以及 Genesis block 当时 20%的股份，Bob 开始打造自己的恶意链。唉，什么也没发生，所有其他 Nxt 节点都将他的节点和任何其他已经在使用 Bob 的 fork 的节点列入黑名单。新用户从不连接到 Bob 的节点。

Nxt 软件似乎实现了几个简单的远程攻击防护层:

1.  软件本身分发时带有一个引导节点列表，这些节点在发布时已知位于正确的分支上。
2.  Nxt 软件在给定的块高度实现区块链状态的检查点。任何不能再现这种精确状态的分叉都将被拒绝。
3.  事务在提交给区块链时使用指向现有块的指针。这些指针防止多个分支包括具有不同块历史的相同事务。
4.  节点永远不会切换到其链相差超过 720 个块的另一个分支。你可以把它想象成一个滚动的检查点。

正如我们将看到的，这些功能没有一个单独提供万无一失的保护，但放在一起，它们使实施远程攻击变得非常困难。

在我之前的文章中，我解释了 Bob 很难创建一个没有实现这些保护的新版本的 Nxt。即使他这么做了，其他用户也不太可能使用他修改后的软件版本。因此，我的结论是 Bob 可以在自己的节点上使用修改后的版本，但要有效地实施任何针对 Nxt 的攻击，他需要欺骗使用官方 Nxt 软件的用户，而不需要他的修改。

通过一些努力，Bob 可以避开保护#1，将他的节点放入产品提供的引导节点列表中。他将需要设置一些中心节点，并遵循正常链一段时间，直到他的一些节点进入引导列表。一旦他开始攻击，阻止其他节点将他的节点列入黑名单将更加困难。也许他可以维护两个分支，一个诚实的分支他将显示连接到他的节点的现有节点，另一个恶意的分支他将显示新用户。实现这一点将非常棘手，但仍然是可能的。

这样 Bob 就可以吸引一些新用户到他的恶意分叉上。接下来，Bob 需要绕过保护#2 -内置的检查点。这是不可能的，除非他能说服新用户使用他的软件版本，而我们认为这不太可能。为了解决这个问题，Bob 可以尝试在最近的内置检查点之后启动他的 fork。假设最近的检查点不是最近的，使用上面的一些技术这仍然是可能的。

Bob 的 fork 的另一个弱点是，由于保护#3，它将不能接受现有的事务，这意味着他的 fork 历史将与真实的链明显不同，这将很容易使用任何块浏览器来检测。

最后，由于保护#4，即滚动检查点，Bob 将无法欺骗现有节点进入他的恶意分支。

鲍勃可能造成的最大损失是，如果他能够说服一家大型交易所或企业使用他的叉子。但是交易所和企业可以很容易地防止这种情况，通过检查他们的分支与一个众所周知的块浏览器，这是保证在正确的分支。

这就带来了一个问题，Bob 能否在不到 720 个数据块内实施远程攻击，以超越保护#4(滚动检查点)？

对于 Bob 对 Genesis block 或一些非常旧的 block height 的攻击，用户向 Bob 透露旧的帐户密码短语并没有损失太多。对最近区块的短程攻击的问题是，Bob 不能期望任何人在没有付费的情况下放弃他们当前的密码短语。为了创建远程攻击的短程版本，Bob 将需要购买比当前锻造股份更多的令牌，但是如果他这样做，他可以只实施简单的 51%攻击。

总之，对利益相关证明的远程攻击是一种理论上的威胁，使用简单的实际步骤可以有效地缓解这种威胁。

**海报**

创建私有/公共密钥对的常见过程是基于从 1626 个单词的字典中随机选择的 12 个单词。这就是 Nxt 钱包为新账户生成密码短语的方式。大致有 3.41*10 个⁸组合，略多于 2 个⁸.用密码术语来说，这提供了 128 位的[安全性](https://hackernoon.com/tagged/security)，这被认为是永远安全的，即使对量子计算机也是如此。

然而，如果有人能够从地球上所有的 10⁴⁹硅原子中创建存储单元，并使用它们来存储所有可能的单词组合及其哈希的预图像，他们可以在一瞬间根据公钥破解每个私钥。尽管如此，使用 128 位密钥被认为是安全的，也是正确的。关键是，我们倾向于接受算法是安全的，即使存在对它们的理论攻击。Nxt 的利害关系证明算法也是如此。