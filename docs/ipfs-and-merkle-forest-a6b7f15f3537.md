# IPFSğŸ‘½å’Œé»˜å…‹æ£®æ—ğŸŒ³

> åŸæ–‡ï¼š<https://medium.com/hackernoon/ipfs-and-merkle-forest-a6b7f15f3537>

![](img/0cdc428e482db1a357ea1aa272a15887.png)

# ä»€ä¹ˆæ˜¯ IPFSï¼Ÿ

IPFS æ˜¯è¡Œæ˜Ÿé—´æ–‡ä»¶ç³»ç»Ÿçš„ç¼©å†™ã€‚å®ƒæ˜¯ä¸€ä¸ªç‚¹å¯¹ç‚¹çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼Œä½¿ç½‘ç»œæ›´å¿«ã€æ›´å®‰å…¨ã€æ›´å¼€æ”¾ã€‚è¦ä»å½“å‰ç‰ˆæœ¬çš„ web è½¬ç§»åˆ°åˆ†å¸ƒå¼ç‰ˆæœ¬çš„ webï¼Œæˆ‘ä»¬éœ€è¦ IPFSã€‚æœ¬è´¨ä¸Šï¼Œç›®æ ‡æ˜¯å–ä»£ HTTPã€‚

## **ä½†æ˜¯ï¼Œå˜¿ï¼Œä¸ºä»€ä¹ˆè¦æ›¿æ¢ HTTPï¼Ÿ**

1.  **ç–¯ç‹‚çš„å¸¦å®½æˆæœ¬:****ç°åœ¨çš„ Web ä½¿ç”¨HTTPï¼ŒåŸºäºå•ä¸€çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å¼ã€‚äººä»¬æ€»æ˜¯ä¸å¾—ä¸æ¥è¿‘ä¸­å¤®æœåŠ¡å™¨æ¥ä¸‹è½½ä»»ä½•ç±»å‹çš„æ–‡ä»¶ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœæ‚¨å¯ä»¥ä»æ‚¨é™„è¿‘çš„èŠ‚ç‚¹è·å¾—ç›¸åŒæ–‡ä»¶çš„ç‰‡æ®µï¼Œä¼šæ€ä¹ˆæ ·ï¼Ÿæ‚¨å¯ä»¥ä½¿ç”¨æ›´å°‘çš„å¸¦å®½æ›´å¿«åœ°ä¸‹è½½æ–‡ä»¶ã€‚[é€šè¿‡è§†é¢‘ä¼ è¾“ï¼ŒP2P æ–¹æ³•å¯ä»¥èŠ‚çœ 60%çš„å¸¦å®½æˆæœ¬ã€‚](http://math.oregonstate.edu/~kovchegy/web/papers/p2p-vdn.pdf)**

> **IPFS ä½¿é«˜æ•ˆåˆ†å‘å¤§é‡æ•°æ®æˆä¸ºå¯èƒ½ã€‚é›¶é‡å¤æ„å‘³ç€èŠ‚çœå­˜å‚¨ç©ºé—´ã€‚**

**2. **404 å¤ªæ™®é€šäº†**ï¼ä¸€ä¸ªç½‘é¡µçš„å¹³å‡å¯¿å‘½æ˜¯ 100 å¤©ã€‚åœ¨é‚£ä¹‹åï¼Œä½ ä¼šçœ‹åˆ°ä¸€æ¡ 404 æ¶ˆæ¯ã€‚ç°åœ¨çš„ç½‘æ˜¯å¦‚æ­¤è„†å¼±ã€‚é“¾æ¥æ€»æ˜¯ä¼šæ–­å¼€ã€‚å’Œç„šä¹¦ä¸€æ ·å¥½ã€‚**

> **IPFS æä¾›äº†å†å²ç‰ˆæœ¬æ§åˆ¶(å¦‚ git ),å¹¶ç®€åŒ–äº†ä¸ºæ•°æ®é•œåƒå»ºç«‹å¼¹æ€§ç½‘ç»œçš„è¿‡ç¨‹ã€‚**

**3.**é›†ä¸­å¼åŸºç¡€è®¾æ–½ï¼Œå‘ƒ**:æˆ‘ä»¬æ•°æ®çš„æ‰€æœ‰æƒåŠ›éƒ½æŒæ¡åœ¨ä¸»æœåŠ¡å™¨ä¸Šã€‚å¦‚æœå¤±è´¥äº†ï¼Œæˆ‘ä»¬å°±å®Œäº†ã€‚å¦‚æœæ¨ç‰¹ç˜«ç—ªäº†ï¼Œæˆ‘ä»¬å°±ä¸èƒ½å†å‘æ¨ç‰¹äº†ã€‚å¦‚æœè„¸ä¹¦å´©æºƒäº†ï¼Œé‚£ä¹ˆå®ƒå·²ç»å´©æºƒäº†å“ˆå“ˆã€‚**

> **IPFS ä»ç„¶å¿ äºå¼€æ”¾å’Œæ‰å¹³ç½‘ç»œçš„æœ€åˆæ„¿æ™¯ï¼Œä½†æä¾›äº†ä½¿è¿™ä¸€æ„¿æ™¯æˆä¸ºç°å®çš„æŠ€æœ¯ã€‚**

**4.**çº¿ä¸‹æ˜¯æ–°çº¿ä¸Š**:åœ¨å‘å±•ä¸­å›½å®¶ï¼Œåœ¨è‡ªç„¶ç¾å®³æœŸé—´ï¼Œä¸´æ—¶ç½‘ç»œä¸å¥½ï¼Œæˆ‘ä»¬æ€ä¹ˆåŠï¼Ÿåªæ˜¯åç€ï¼Ÿæˆ‘ä»¬ä½¿ç”¨çš„ç½‘ç»œæ˜¯ 20 ä¸–çºªçš„ã€‚æˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ã€‚**

> **IPFS æ¨åŠ¨äº†å¤šæ ·åŒ–å¼¹æ€§ç½‘ç»œçš„åˆ›å»ºï¼Œæ— è®ºæœ‰æ— äº’è”ç½‘ä¸»å¹²è¿æ¥ï¼Œéƒ½èƒ½å®ç°æŒç»­å¯ç”¨æ€§ã€‚**

# **IPFS æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ(ç®€å•æ¥è¯´)**

**å› æ­¤ï¼Œå¦‚æœä½ æƒ³æ£€ç´¢ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–è€…ä¸€ä¸ªæ–‡ä»¶ä¿å­˜åœ¨ç½‘ä¸Šä½¿ç”¨ IPFSï¼Œä½ ä¸ä¼šå‡»ä¸­ä¸­å¤®æœåŠ¡å™¨ã€‚ä½ ä¼šè¦æ±‚ç½‘ç»œä¸­çš„åŒä¼´ç»™ä½ ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ã€‚ä½ çš„åŒäº‹ä¼šç»™ä½ ä¸€ä¸ªæ–‡ä»¶çš„â€œåŠ å¯†æ•£åˆ—â€ã€‚è¿™æ˜¯è¯¥æ–‡ä»¶çš„å”¯ä¸€æŒ‡çº¹ã€‚**

**å‡è®¾ä½ æƒ³å¾—åˆ°/foo/bar/baz.pngï¼Œå®ƒçš„åŠ å¯†å“ˆå¸Œæ˜¯ wmxgtagwtx 1 uutfsb 2s bavarmevlk 4 qec 4g 5 bv 7 wwdz 1uã€‚(è¿™å¯ä»¥ä½¿ç”¨ SHA1ã€SHA2 æˆ–ä»»ä½•å…¶ä»–ç®—æ³•æ¥ç”Ÿæˆ)ã€‚ä½ ç”¨è¿™ä¸ªé“¾æ¥ä¸Šç½‘ã€‚**

**![](img/8845de585101e6f85a64480de4bf4a94.png)**

**ç»´åŸºç™¾ç§‘å·²ç»å¼€å§‹ä½¿ç”¨ IPFS:**

**[](https://ipfs.io/ipfs/QmT5NvUtoM5nWFfrQdVrFtvGfKFmG7AHE8P34isapyhCxX/wiki/Anasayfa.html) [## åœŸè€³å…¶è¯­ç»´åŸºç™¾ç§‘

ipfs.io](https://ipfs.io/ipfs/QmT5NvUtoM5nWFfrQdVrFtvGfKFmG7AHE8P34isapyhCxX/wiki/Anasayfa.html) 

ç½‘å€æ ¼å¼ä¸º:[**https://ipfs . io/ipfs/qmt 5 nvutom 5 nwffrqdvrftvgfkfmg 7 ahe 8 p 34 isapyhcxx/wiki/anasayfa . html**](https://ipfs.io/ipfs/QmT5NvUtoM5nWFfrQdVrFtvGfKFmG7AHE8P34isapyhCxX/wiki/Anasayfa.html)** 

# **å…³äº Merkle æ ‘çš„ä¸€ç‚¹ä¿¡æ¯**

***å…³äº Merkle link çš„ç ”ç©¶è®ºæ–‡å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°*[](https://people.eecs.berkeley.edu/~raluca/cs261-f15/readings/merkle.pdf)**ã€‚Ralph Merkle æ˜¯ Merkle æ•°æ®ç»“æ„èƒŒåçš„å¤§è„‘ã€‚****

****ä¸€ä¸ªç¾ä¸½çš„æ’å›¾ä»€ä¹ˆæ˜¯ç§¯å°‘æˆå¤šæ ‘å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°*[](https://media.consensys.net/ever-wonder-how-merkle-trees-work-c2f8b7100ed3)**ã€‚*****

****Merkle æ ‘åœ¨ C++ä¸­çš„åŸºæœ¬å®ç°****

```
**#include <stdio.h>
#include <stdlib.h>
#include <iterator>
#include <vector>

using namespace std;

// Hashing functions.                                                                                                                                                                                                                                                                                                                                                
int multiplyThem(int a, int b) {
  return a*b;
}

int addThem(int a, int b) {
  return a+b;
}

class Merkle {
private:
  vector<int> values;
  int (*hasher)(int, int);

public:
  Merkle(int (*f)(int,int)) {
    this->hasher = f;
  }

  int size() {
    return values.size();
  }

  void add(int value) {
    values.push_back(value);
  }

  int root() {
    vector<int> current;

    current = getHashedParents(this->values);
    while (current.size() != 1) {
      current = getHashedParents(current);
    }
    return current[0];
  }

private:
  vector<int> getHashedParents(const vector<int> &children) {
    vector<int> result;

    for (int i=0; i < children.size(); ) {
      int a = children[i], b = children[i];
      if (++i < children.size()) {
        b = children[i++];
      }
      int hash = this->hasher(a,b);
      printf("hash(%d, %d)=>%d ", a, b, hash);
      result.push_back(hash);
    }
    printf("\n");
    return result;
  }
};

int main(int argc, char** argv) {
    Merkle merkle(multiplyThem);
    merkle.add(1);
    merkle.add(2);
    merkle.add(3);
    merkle.add(4);
    merkle.add(5);

    printf("Merkle Root = %d\n\n", merkle.root());

    merkle = Merkle(addThem);
    merkle.add(1);
    merkle.add(2);
    merkle.add(3);
    merkle.add(4);
    merkle.add(5);

    printf("Merkle Root = %d\n\n", merkle.root());
    return 0;
}**
```

# ****IPFS çš„å¿ƒè„æ˜¯ IPLDã€‚****

****IPLD æ˜¯è¡Œæ˜Ÿé—´å…³è”æ•°æ®çš„ç¼©å†™ã€‚æ–‡ä»¶/æ•°æ®ç»“æ„ä½¿ç”¨ Merkle é“¾æ¥ç›¸äº’é“¾æ¥ã€‚****

****![](img/53d4b5541ecd0111cbffe93aa8034c43.png)****

*******(ä»€ä¹ˆæ˜¯é»˜å…‹å°”è¾¾æ ¼ï¼Ÿè¿™æ˜¯ä¸€ä¸ª Merkle æœ‰å‘æ— ç¯å›¾ã€‚å®ƒç±»ä¼¼äº Merkle æ ‘ã€‚ç„¶è€Œï¼ŒMerkle DAG ä¸éœ€è¦å¹³è¡¡ï¼Œå¹¶ä¸”å®ƒçš„éå¶èŠ‚ç‚¹è¢«å…è®¸åŒ…å«æ•°æ®ã€‚)*******

****åœ¨ IPFS ä¸­ï¼Œä¸¤ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„é“¾æ¥é‡‡ç”¨åŠ å¯†å“ˆå¸Œçš„å½¢å¼ã€‚ç”±äº Merkle DAG æ•°æ®ç»“æ„ï¼Œè¿™æ˜¯å¯èƒ½çš„ã€‚Merkle DAGs ä¸º IPFS æä¾›äº†è®¸å¤šæœ‰ç”¨çš„å±æ€§ï¼ŒåŒ…æ‹¬:****

1.  ******å†…å®¹å¯»å€**:æ‰€æœ‰å†…å®¹éƒ½é€šè¿‡å…¶åŠ å¯†å“ˆå¸Œè¿›è¡Œå”¯ä¸€æ ‡è¯†ï¼ŒåŒ…æ‹¬é“¾æ¥ã€‚****
2.  ******é˜²ç¯¡æ”¹**:æ‰€æœ‰å†…å®¹éƒ½é€šè¿‡å…¶æ ¡éªŒå’Œè¿›è¡ŒéªŒè¯ã€‚å¦‚æœæ•°æ®è¢«ç¯¡æ”¹æˆ–æŸåï¼ŒIPFS ä¼šæ£€æµ‹åˆ°ï¼Œå› ä¸ºå“ˆå¸Œä¼šæ”¹å˜ã€‚****
3.  ******æ— é‡å¤**:ä¿å­˜å®Œå…¨ç›¸åŒå†…å®¹çš„æ‰€æœ‰å¯¹è±¡éƒ½æ˜¯ç›¸ç­‰çš„(å³å®ƒä»¬çš„å“ˆå¸Œå€¼ç›¸ç­‰)ï¼Œå¹¶ä¸”åªå­˜å‚¨ä¸€æ¬¡ã€‚****

****åªè¦æŠŠ **merkle root** äº¤ç»™æŸäººï¼Œä½ å°±å¯ä»¥æŠŠå¤§é‡çš„æ•°æ®äº¤ç»™é‚£ä¸ªäººã€‚å› ä¸ºï¼Œmerkle æ ¹æœ¬è´¨ä¸ŠæŒæœ‰å…¶ä¸‹æ‰€æœ‰å—çš„ç­¾åã€‚****

****ç³»ç»Ÿçš„äº’æ“ä½œæ€§ä¹Ÿå¯ä»¥åœ¨ merkle æ£®æ—ä¸­ä¿æŒï¼Œå…¶ä¸­æ¯æ£µæ ‘ä»£è¡¨ä¸€ä¸ªå•ç‹¬çš„ merkle æ ‘ã€‚åœ¨ä¸€ä¸ªæ£®æ—é‡Œï¼Œä¸€æ£µæ ‘å¯ä»¥æ˜¯[æ¯”ç‰¹å¸](https://hackernoon.com/tagged/bitcoin)ï¼Œä¸€æ£µæ ‘å¯ä»¥æ˜¯ä»¥å¤ªåŠï¼Œä¸€æ£µæ ‘å¯ä»¥æ˜¯å¸¸è§„çš„ SQL æ•°æ®åº“ã€‚å› æ­¤ï¼Œä¸ºäº†åœ¨è¿™äº›æ ‘ä¹‹é—´äº¤æ¢ä¿¡æ¯ï¼Œè¿™äº›åŸºäºå†…å®¹çš„åŠ å¯†æ•£åˆ—å‡½æ•°æ˜¯æœ‰æ•ˆçš„ã€‚ä¸æ˜¯å‘é€æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯åªå‘é€æ•£åˆ—ã€‚æƒ³è±¡ä½¿ç”¨ä»¥å¤ªåŠè¿›è¡Œä¸€äº›äº¤æ˜“ï¼Œå¹¶åœ¨äº¤æ˜“ä¸­æ·»åŠ ä¸€ä¸ª Git é¡µé¢ã€‚****

****ç›®å‰ä½¿ç”¨è¿™ç§ç³»ç»Ÿçš„æœ‰:****

1.  ****æ¯”ç‰¹å¸****
2.  ****ä»¥å¤ªåŠ****
3.  ****é¥­æ¡¶****
4.  ****æ¯”ç‰¹æ´ªæµ****

****è¿˜æœ‰æ›´å¤šï¼Œä½†è¿™äº›æ˜¯ä¸»è¦çš„ã€‚****

****ç°åœ¨å°±ä» IPFS å¼€å§‹å§ï¼****

****[](https://ipfs.io/docs/getting-started/) [## å¼€å§‹ä½¿ç”¨| IPFS æ–‡æ¡£

### å¦‚æœæ‚¨è¿˜æ²¡æœ‰è¿™æ ·åšï¼Œå®‰è£… IPFSã€‚å®‰è£… IPFS ç°åœ¨åœ¨è¿™ä¸ªæ•™ç¨‹ä¸­ï¼Œå¦‚æœä½ æœ‰ä»»ä½•é—®é¢˜ï¼Œéšæ—¶â€¦

ipfs.io](https://ipfs.io/docs/getting-started/) 

è¿™åˆæ˜¯ä¸€é¡¹çªç ´æ€§çš„æŠ€æœ¯ï¼Œå°†ç½‘ç»œä» Web2.0 æ¨å‘ Web3.0

![](img/2cdfc05b485b9851198834e62c74b048.png)****