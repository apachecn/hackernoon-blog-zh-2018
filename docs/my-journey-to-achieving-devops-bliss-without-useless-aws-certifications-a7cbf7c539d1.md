# 我实现 DevOps 幸福的旅程，没有无用的 AWS 认证

> 原文：<https://medium.com/hackernoon/my-journey-to-achieving-devops-bliss-without-useless-aws-certifications-a7cbf7c539d1>

关于我如何从一个天真的全栈工程师，与 AWS 和 PaaS 提供商斗争，转变为热爱生活并实现 DevOps 幸福的故事。

**确保阅读到最后，找到免费的每日电子邮件课程！**

![](img/463a1abacb33976a0cfdb6a48fb7a169.png)

**“哔哔哔哔哔”**

“闪亮的手机”对着我大喊大叫，闪烁着它的光，就像一辆小小的救护车每次照亮黑暗的房间几分之一秒。

我一直害怕这一刻。

我用床单蒙住眼睛，紧紧地闭上眼睛。也许如果我在毯子下多躲 10 秒钟，它就会停下来。

**“哔哔哔”**

闪亮手机的闹铃嗡嗡作响。

“再也不会了。”我想，当我拖着自己从床上爬起来，跌跌撞撞地穿过房间来到电灯开关前，差点被我昨晚扔在地板上的溢出的枕头绊倒。

随着灯光亮起，我再次紧紧地闭上眼睛，试图调整自己。

那是 2010 年，我是一名刚毕业的计算机科学家，准备好去征服这个世界。尽管此时此刻绝大多数人肯定不是“眼睛明亮，尾巴浓密”。

我的童年并不轻松，我梦想着辉煌。我脑海中浮现出《福布斯》杂志上我的照片:“下一个马克·扎克伯格！”或者“30 下 30”(漏了那个)，“是 web 尺度！是啊！”

退一步说，我的父母经历了一场离婚，导致了一些糟糕的经济状况，我希望不仅能养活自己，也能养活他们。我梦想给他们买房子，偿还他们的债务，如果可以的话，还能照顾我的兄弟姐妹。

我爸爸总是会问，现在也是:“你有钱了吗？我能退役吗？”“我正在努力！”我会回答。

现在终于到了我的时刻，我第一次以“UX 工程师”的身份全职为一家初创公司的平台构建新的前端。在大学的业余时间，我一直在研究高可伸缩性和 DDD，我已经准备好面对这个世界。

我是第八个员工，所以我想当公司倒闭时，我的股票可能是一个很好的开始。事实证明并非如此——我们是在我的行权期前 11 天被收购的。事情是这样的。

总之。

这意味着作为我初级工程工作的一部分，我要轮流携带“闪亮的手机”

“闪亮的电话”是为我加入的初创公司建立的全天候技术紧急热线。如果事情发生了，必须有人知道，并迅速做出反应！这条消息的传递格式？《闪亮的手机》。男孩，它闪耀着光芒！

闪亮的手机是一个翻盖手机(因为那些仍然是一个东西)，你可能已经猜到了，是由一种闪亮的材料制成的。聪明。

首席技术官凯文决定，在工作几个月后，我已经做好了充分的准备，可以被放在收到电话的个人的轮换名单上。每个拿到手机的人都有责任在他们拥有手机的任何时候，对通过手机短信(反复)发送给他们的任何系统警报做出回应。

我暗暗害怕轮到我。我不知道如果爆炸了我是否准备好了。

毕竟，Sergey 是一个 SQL 奇才，而 Kevin 可以像硅谷的 Richard 一样在一夜之间集成新功能。"嘿，伙计们，我昨晚重写了所有东西，让它变得更好，希望你们不要介意！"

我还希望能够处理出现的问题。我想让他们认为“这家伙得到了它——很高兴我们雇用了他！”

但最重要的是，我只是希望这不会发生。

现在是夜深人静的时候，11 月第三周的第三天，凌晨 3 点 37 分，闪亮的电话响了。

**“哔哔哔哔哔哔”**

我跌跌撞撞地回到我的床头柜，翻开手机。我记得感觉一股寒气穿过我的身体，顺着我的手臂。这是一个寒冷的夜晚，尽管还开着暖气。

23 条信息。

> 致命错误:数据库服务器已关闭。无法连接到 10.10.0.1 "
> 
> 致命错误:用户界面关闭。无法连接到 https://我们的网站"

**“叭叭”**

更多相同的。

😳

我从梳妆台里拿出一件毛衣穿上，穿过房间走到角落，我的笔记本电脑放在一张薄薄的滚动桌上，这是我四年前花了大约 20 美元为我的大学宿舍买的。我坐在我的便宜，不舒服，也可能是大约 20 美元的办公椅上。

“好的——我明白了。”我想作为一个滚到了硬木地板上一些放置不当的电线自己的位置。

我有一份清单，上面列有如果出了问题该怎么做……会出什么问题？呃，还会有什么问题吗？

首先，我必须创建一个到办公室桌面的远程桌面连接。

检查。

接下来，我必须登录到管理门户来检查状态。

啊哦…管理界面没有加载…

“我能 ping 通服务器吗？”

没有。没有 ping。

“这是糟糕的”我想，当我尝试了更多的 IP 地址，它似乎一切都关闭了。

尽管我很骄傲，但我知道我需要在凌晨 4 点前叫醒谢尔盖。

我摸索着闪亮手机的亮蓝色按钮，试图查找他的号码，方便地定位为预触摸屏设备中为数不多的号码之一。“多可怜的 UX”电话铃响时，我心里想。

“你好”谢尔盖用他浓重的俄罗斯口音回答。

“嗨，谢尔盖，抱歉吵醒你，”我解释道。“闪亮的电话正在关闭，我试图按照清单恢复服务，但没有任何工作。”

"好吧，我会看看它"他东倒西歪地回答说，他挂了电话。我猜我完了。

当我爬回床上时，我有点松了口气，但也有点失望，因为我意识到这不是我当时可能解决的事情。

事实证明，我们租用服务器的数据中心出现了故障。必须有人实际去替换物理位置的物理机，才能让事情再次运行。

就在那一刻，我想知道任何地方的公司是如何随时保持一切正常的。

如何部署可以扩展以满足企业需求的系统，如何部署足够敏捷和灵活的系统，使初创公司不会因成本过高而望而却步，以及如何部署高度可用的系统。

最重要的是，我不想再拥有一部闪亮的手机。

直到四年后，我才负责从头到尾建立一个系统，并确保它保持运行。

从工程的角度来看，我已经成长了很多，但是到目前为止，我的操作和生产部署的范围是部署到 Heroku，或者提出一个 Pull 请求，让一个操作团队负责稍后进入生产。

对我来说，老年退休金计划仍然是事后的想法。

我一直专注于学习如何用 Node 构建分布式系统，同时也是一名专注于前端的全栈工程师(主干是当时的流行)。几年前，我有幸结识了一位了不起的导师马特·沃尔特斯(Matt Walters)，作为这家金融科技公司的同事，我们一起建立了一个私募股权交易平台。

他经常告诉我:“随着服务的简化，一些复杂性必然转移到架构上。”

现在，作为我自己创业公司的首席技术官，我负责所有的复杂性，不管它在哪里。

我很聪明地参与了这个项目，但是，我知道我需要好的设计模式，而不是一个整体，我肯定可以画一个图表来描述一个可以工作的系统，所以我去了！

在这一点上，我花了大部分精力试图设计和架构任何潜在的问题。我仍然在尝试设计模式和架构。我没有接受服务和基础设施的失败是不可避免的，我只是认为在我之前的那些只是需要更好。“如果他们使用这种模式，或者这种语言，或者这种工具……”我告诉自己。

当时，架构对我来说，甚至没有考虑我运行的基础设施或它是如何运行的，甚至没有考虑它是如何到达那里的。

我为行动组做了什么？我认识的大多数其他工程师都使用 PaaS。有人可能会说，我在学习 AWS 时参加了“PaaS”。🤣

> PaaS 是一种“平台即服务”——这些平台类似 Heroku 或 Modulus(已不存在)

我知道我需要学习 AWS。我知道如果我希望有一天能够自动解决我所有的问题，我需要这么做(我当时是这么想的)，但是现在，我有东西要做，而且要快！

回想起来，我的部署相当糟糕。它们看起来像这样:

1.  太在意分支和 git 流了
2.  最终有一个您想要部署的主分支
3.  标记发布
4.  使用手动过程部署它(即使是在 CLI 中键入几行代码)
5.  哎呀，环境配置是错误的，重新配置那些在 PaaS 上使用笨拙 UI 的环境。我知道有一个简单的方法来做这件事——总有一天我会知道的。
6.  好的，我需要一个数据库…去一些 DBaaS 网站，用副本集创建一个 MongoDB。认为“这听起来配置起来很复杂”
7.  笨拙地改变更多的环境变量
8.  哎呀，有东西坏了，重复 1-5 遍。

这里面有很多问题。

这是一项容易出错的手动任务。这不容易重复。你需要知道除了“git commit”之外的事情，你的服务通过互联网通信，当然这是痛苦的，也是你想要避免的。

因此，这样做的频率会降低，这会增加您对 GitFlow 和流程的需求，以及部署和更改精心配置的 PaaS 实例所需的时间，这实际上会使每次部署更加危险，更加复杂。

最重要的是，现在您正试图记住您创建的世界的两种不同状态，master 和 dev，这样您就可以创建热修复分支。你很酷，正在使用“微服务”,所以现在你需要记住 14 个分支的状态，以及 7 个不同的项目如何以不同的方式相互依赖，例如混合共享数据库和日志，从数据库更改事件以触发其他服务的更新。

你的初级工程师对 GitFlow 和创建热修复分支感到困惑，所以你需要教他们这一点，有人想添加缓存，你就像“哈哈，我们的 DBaaS 也有 Redis 吗？?"

架构和设计模式来拯救！正如乌迪·达汗所说(讽刺地):“把所有的 D 都扔过来！DDD！TDD！BDD！补充！”我们将设计出所有的问题！

> “把所有的 D 都扔进去！DDD！TDD！BDD！补充！”-乌迪·达汗

所以我试着把 D 扔进去。

我认为它很棒——用户界面也很棒。我使用了 CSS 动画，感觉就像是网络浏览器中的原生应用。多亏了 Meteor，这才是真正的实时，我再次摆脱了 DevOps 和部署的责任,成为首批受邀加入 beta DevOps 平台 Galaxy 的公司之一。

**我又一次避免学习 AWS。**

问题是，最终我停止使用流星，并开始使用更纯粹的节点。我又一次只能选择 PaaS 提供商。

我在每个环境中运行了大约 30 项服务，PaaS 的成本开始以每平方米 15 美元的速度增长，数据库服务和复杂的部署也是如此。考虑到工程时间是多么昂贵，再加上部署东西所花费的时间，成本是不可忽视的。

我在这种情况下生活了几年，仍然把时间集中在更好的工程上。更好的设计模式、可扩展的微服务、架构、代理，但仍然推迟了学习 AWS 的可怕任务。我仍然没能达到我想要达到的简单和美丽。

有东西不见了。

我听说过诸如编码基础设施和持续部署之类的事情。

我很确定我需要这些东西，但是我不知道怎么去。

但我知道一件事，一座名为 AWS 的大山的巨大阴影笼罩着我，我知道我需要到达山顶找到答案。

于是，我做了我想快速学东西时喜欢做的事情:买了 AWS 上的课程！

我讨厌 AWS。

我讨厌用户界面。

我讨厌别人教我 ui，而不是编程。

我讨厌我所学的东西会导致难以重现的，手动的，容易出错的任务。

当数字海洋、谷歌云和 Azure 正在进行一些很酷的事情时，我讨厌我没有从 AWS 的封闭基础设施中获得任何好处。我不能确定 AWS 是否会是我在一年、两年或三年后想要使用的平台。也许谷歌会让他们大吃一惊。也许他们不会。

但还是有几个月，当我能够克服对 AWS 的仇恨(或恐惧)时，我会看视频，进入 AWS UI 并做一些事情。直到最后，我决定需要一个更好的方法。毕竟，我不想花太多时间把自己锁在盒子里。

不用说，我的 AWS 课程进展并不顺利。

我现在已经为一个拥有 1400 多万年用户的网站构建了 DevOps 系统，为一家区块链公司构建了 DevOps 系统，两个人工智能 API 和一个金融科技平台。一年比一年好。

让我告诉你一个秘密…

这肯定不是因为学习 AWS。

它放弃了当时的标准做法，专注于一项新的新兴技术，这项技术在当时受到了极大的关注:*集装箱化*。

所以我开始阅读所有关于集装箱化的资料。我去 Leanpub 上买了几本书，我读博客，文档和代码。和代码。

我很喜欢。

我意识到，有一个完整的工具生态系统是为部署容器而构建的，如果我能学会如何将我的代码打包到容器中，那么部署将会很容易！

我读到的最令人兴奋的事情之一是，当我真正弄清楚如何很好地使用容器来完成各种开发任务，使我的生活变得更容易时，Docker 推出了一种称为“DAB”或分布式应用程序包的工具，你可以简单地编写一个 yaml 文件来描述你的系统应该如何运行，然后只需将它交给一个称为 orchestrator 的东西，它就会为你完成所有其他 AWS 工作。

创建的卷，映射它们，安全组，ASG，负载平衡器，一大堆其他我从未听说过的东西，比我自己做的还要好得多。

除此之外，我了解到，他们实际上为你管理生产中的容器。因为他们允许你用一个简单的命令来扩展它们，如果它们通过重启服务而中断，它们会自动从故障中恢复，你所要做的就是点击一个按钮来设置它！

我意识到，我应该学习*容器化*而不是学习 AWS，然后，我需要做的就是将我的容器提供给一个 orchestrator，我在 AWS 上通过点击一个按钮来设置它！完美！

我只需点击一个按钮，就可以在 AWS 上获得一个生产就绪系统。✅.管弦乐团

这有点像你在电影中看到的大型集装箱码头，在那里，各种邪恶的活动在夜深人静时发生。或者某个可怜的灵魂迷失了，没人知道他在哪个集装箱里。

想象一下，如果所有这些容器里的东西都不在容器里。

想象一下，如果数以万计的物品散落在某个大空地上。

运输和卸载过程会更加复杂！

我的脑海中浮现出巨型起重机试图捡起物品的画面，就像高速公路休息站里那些烦人的起重机游戏一样，用一些新的 Beats 耳机和一个废弃的爪子嘲弄你。

起重机能够完成拾取和组织集装箱的工作的原因是因为集装箱都是标准尺寸。它可以将它们打包成定义整齐的行，直到达到最大容量。

所以你所需要做的，就是想办法把你的东西放进集装箱，然后它就会被运出去。

起重机是非常强大的工具，人类可以简单地操作来安排、移动、订购、装运和接收集装箱。

管弦乐队有点像起重机。

编排者也是强大的工具，它们基本上自己操作来部署、分配、**从故障中恢复**，以及检查软件容器。他们知道什么服务器有能力，他们把你的容器放在那里，把它们连接到网络上运行。

此外，容器还解决了一大堆其他问题！比如臭名昭著的“我的代码在这里运行，而不是在那里运行”错误，以及各种测试场景。

所以我全押在集装箱上。

我学习了所有的细节，因为我知道如果我这样做了，我可以把它们交给一个管弦乐队，然后那个东西会处理我需要的所有 AWS 或 Azure 或 Google Cloud 的东西！

这才是真正让我解脱的。有数不清的好处超出了我最初的打算。比如能够利用我以前无法利用的整个生态系统。

这并不是说没有更多的东西要学。有过。很多。但是知道其中一个是连接开发和运营两个世界的关键。我怎么能不了解这项革命性的技术呢？

我所需要做的就是创建一个文件，这个文件是每个项目附带的，描述了它所需要的环境。此外，Node 团队已经为我创建并维护了这个环境的最难的部分。然后我只需要把它交给指挥。

“随着服务的简化，一些复杂性必然会转移到架构、基础架构和流程上。”我以为。"连接所有这些部分的关键是 docker 文件."

将我的应用程序容器化是释放所有其他潜力和优势的起点，因为当您进入容器化生态系统时，您不仅可以获得协调器，还可以获得生产就绪系统的库，如其他人已经容器化的数据库！

还记得有 npm 这样的包管理器之前的编码吗？

想象一下，如果没有 npm 这样的东西，今天的编程任务会有多困难。

如果您没有使用容器和编排器，那么对于整个已部署的数据库、队列、缓存以及您能想到的大多数想要部署的东西，您将会错过这些！！！

想知道我是怎么安装数据库的？在 YAML 文件中添加几行。

你知道这有多强大吗？

运行 Redis 之类的事情过去看起来像一座山，现在有了我的容器化工具，这座山在 YAML 文件中差不多有五行。

有人问“我们能管理 XYZ 吗？”你会说“是啊…anndddd…搞定。”

一周能为你和你的同事节省多少时间？

现在你可能在想——太好了，有一大堆新的东西需要学习和理解。

我理解你。这些都是我经历过的同样的挣扎。

这就是为什么我把帮助像你们这样的工程师在构建应用程序和在生产中运行应用程序之间架起一座桥梁作为我的使命。我还想教你简单的云原生微服务模式，我用它来为十亿美元的企业构建可扩展的系统。

简单是我的一切。

复杂是敌人，你需要与之斗争。

你必须和云融为一体。明白了吗？

为了让您开始您的旅程，我创建了一个为期 21 天的免费电子邮件课程“使用 DevOps 变得危险”，它将引导您了解容器和 orchestrators，教您如何将 Next.js 应用程序部署到 AWS，而不会将您的时间浪费在无用的 AWS 认证上！

如果你想收到我的免费电子邮件课程“与 DevOps 一起变得危险”，每天有 21 节课发送到你的收件箱，请前往 https://www.devopsbliss.com[报名吧！](https://www.devopsbliss.com)

> 如果你觉得这很有用，想说声谢谢，最好的方法是给我 50 个掌声(点击并按住鼓掌按钮)，并在你的社交媒体网站上分享我的故事！请务必关注我，获取更多关于 DevOps、微服务、架构、模式、NodeJS、DDD、测试、Fullstack 甚至一些 CSS 的文章！