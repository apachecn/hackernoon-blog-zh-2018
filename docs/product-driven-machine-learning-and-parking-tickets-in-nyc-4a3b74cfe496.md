# 产品驱动的机器学习(和纽约停车罚单)

> 原文：<https://medium.com/hackernoon/product-driven-machine-learning-and-parking-tickets-in-nyc-4a3b74cfe496>

## 用数据科学的接受标准弥合统计差距

![](img/45d156c53546dfbaa6254a52b3ed2f77.png)

TripAdvisor wants you to book just **one** hotel room. Stitch Fix wants you to buy **all** the items it sends you. This makes them very different as recommender systems.

## 两个推荐系统的故事

这里有两个熟悉的产品:

1.  猫途鹰，一个将旅游相关内容和住宿预订相结合的网站。在这里，我将重点关注预订酒店房间。
2.  [Stitch Fix](https://www.stitchfix.com/) ，一项向会员发送几件衣服的订阅服务。会员只为他们保留的东西付费。

这两种产品都依赖于推荐系统，试图将每个用户与他或她最有可能购买的商品匹配起来。如果你是一名机器学习工程师，你的思维可能会倾向于像[协同过滤](https://en.wikipedia.org/wiki/Collaborative_filtering)和[矩阵分解](https://en.wikipedia.org/wiki/Matrix_factorization_(recommender_systems))这样的东西。

但是在急于建立一个花哨的推荐系统之前，让我们从商业的角度再考虑一下这两个产品。原来他们很不一样。

当你在猫途鹰找酒店的时候，你通常会很清楚自己在找什么(“波士顿市中心的四星级酒店”)。所以你在相当相似的选项中选择。如果一切顺利，您将预订*一家*酒店。

有了 Stitch Fix，公司就可以为你选择商品了。它希望你保留尽可能多的项目。这意味着它们不能太相似。毕竟这个月你需要多少新的格子法兰绒衬衫？

此外，缝合修复发送给你正好五个项目。如果排在第六位的东西是你最喜欢的，那就太不幸了。你永远看不到，也永远买不到。

一旦你开始沿着这些思路思考，机器学习任务就会变得非常不同。你会以不同的方式训练和评估模型。您将跟踪不同的指标，并对它们进行不同的加权。

## 统计差距

但是，您团队中的数据科学家如何首先考虑这些因素呢？这就是产品经理的角色:成为业务、用户和其他利益相关者的代言人。

然而，许多产品经理并没有完全意识到机器学习的含义，这可能是非常技术性的:

*   衣服不应该太相似→你应该模拟*联合*购买概率，而不仅仅是每件衣服的*单个*概率。
*   会员永远看不到第六件商品→ [精度](https://en.wikipedia.org/wiki/Precision_and_recall)(会员购买的前 5 件商品中有多少)比[召回](https://en.wikipedia.org/wiki/Precision_and_recall)(会员*可能*购买的商品中有多少最终进入前 5)更重要。

这种沟通挑战会在产品定义和建模指标之间产生差距。它甚至可能导致次优甚至不正确模型的开发。最终，这都归结为用统计术语来谈论业务目标。让我们称之为*统计差距*。

怎么处理？所有数据科学家都被告知，他们应该了解他们所经营的业务。确实如此，所以雇佣对他们工作的现实世界含义表现出好奇心的数据科学家是一个非常好的主意。

但是为了弥补统计上的差距，产品经理也需要有更多的技术理解。他们不需要成为统计专家，也不需要 100%了解模特们在幕后做的事情。但是理解一些概念是很重要的:业务指标和统计指标之间的关系是什么？机器学习模型的输入是什么？它们是如何相互作用的？

## 验收标准:数据科学版

除了雇佣了解统计数据的产品经理，你的团队还能做些什么来改善现状呢？

统计差距是关于产品和数据科学之间的交流。沟通差距在软件工程中也很常见，人们想出了各种方法来减少沟通差距。具体来说，敏捷软件开发团队使用 [*验收标准*](https://www.leadingagile.com/2014/09/acceptance-criteria/) 的概念。

验收标准是产品经理和软件工程师之间关于一个软件特性应该包括什么的协议。定义验收标准是一项共同的工作，可能需要很长时间，但这是值得投资的。好的验收标准确保双方以相同的方式理解任务。

数据科学任务和机器学习模型的接受标准需要做同样的事情。他们必须将业务需求转化为清晰的建模指标。

> 该流程对于确保您的模型满足产品需求以及实现[产品/数据匹配](https://hackernoon.com/the-challenge-of-product-data-fit-92543078551b)至关重要。

它看起来是这样的:

*   产品经理用清晰简洁的术语定义*业务指标和业务目标*。
*   数据科学家将这些指标转化为严格的统计术语，并定义*建模指标*和*建模目标。*
*   为了完成这个周期并确认需求，团队将建模指标转换回业务指标。
*   这种对话必须在每个建模迭代中进行，就像对软件特性的任何改进一样。

如果你有一些敏捷开发的经验，你可能会注意到这个过程是不完整的。我们的验收标准没有一个 [*定义的*](https://www.leadingagile.com/2017/02/definition-of-done/) 。这是一个非常重要的话题，我将在另一篇文章中阐述。现在我们的目标是确保*为什么*和*什么*是一致的。

## 从业务指标到建模指标

让我们通过另一个例子来看看这一点。如果您在纽约市收到停车罚单，您可以在线提交上诉。上诉由一名城市雇员审查，他决定票是否有效。

想象一下，城市与您的团队签订合同，建立一个机器学习系统，使用历史数据自动处理日常上诉。当司机提交上诉时，系统可以决定接受或不做决定，让城市代理处理。出于法律原因，没有代理人的确认是不可能驳回上诉的。

![](img/cdba1f8e57851edd02e17f284021f0fe.png)

AI powered parking meters (Photo by [Josh Newton](https://unsplash.com/@imjoshnewton?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral))

产品经理负责定义*业务指标。*指标必须是可量化的:美元、点击率、转换率等。在我们的案例中:

*   如果系统批准了无效的上诉，城市将失去停车罚单的收入。该指标是批准的无效上诉的数量。我们可以用美元来精确量化:在纽约，每张票价值 65 美元。
*   如果系统通过了对代理人的有效上诉，城市将承担代理人的额外工资成本。因此，衡量标准是代理审查的有效申诉的数量。要用美元来量化，你必须算出处理上诉的成本，这是一件好事。

现在我们有了业务指标，数据科学家可以将它们转化为统计术语:

*   系统批准的无效申诉的百分比称为[](https://en.wikipedia.org/wiki/Sensitivity_and_specificity)**。**
*   *代理人处理的有效申诉的百分比称为[](https://en.wikipedia.org/wiki/Sensitivity_and_specificity)**。***

**这是一个非常清晰的翻译，因为该模型是一个简单的分类器:每个上诉要么被接受，要么不被接受。有许多与分类器相关的标准度量。就像在这个例子中一样，大多数错误都与模型做出的错误判断有关。**

**在更复杂的情况下，如推荐系统，定义业务指标并将其转换为数据科学术语可能不是那么简单明了。但是更重要的是确定正确的指标，即使这需要大量的时间。**

## **业务目标驱动建模目标**

**所以我们有两个统计指标:假阳性和假阴性率。但这还不够。这两个指标之间存在权衡:**

*   **你可以建立一个非常保守的模型，只批准它非常有信心的一小部分上诉。假阳性率会很低，但假阴性率会很高。**
*   **您可以构建一个非常宽松的模型，批准许多上诉，即使它也批准一些错误的上诉。假阴性率会很低，但假阳性率会很高。**

**您应该构建保守模型还是许可模型？这不是一个数据科学问题。这是一个商业问题。**

**因此，产品经理必须定义业务目标。然后，业务目标被转化为建模目标。以下是一些例子:**

****商业目标#1:利润最大化** 假设这个城市想从停车罚单中获得最大利润。然后，该模型应该根据它们的美元价值来平衡假阳性和假阴性率:假批准造成的收入损失与处理上诉的成本。**

**如果代理人的时薪很低，模型应该更保守，批准的案例更少。但是如果每小时的工资率很高，模型应该更宽松，批准更多的案例。**

**要优化的建模度量最终将是假阳性率和假阴性率之间的一种加权平均值。**

****商业目标#2:利润最大化，但没有太多的假批准** 但如果太多的上诉被假批准，司机可能会提交无聊的上诉或更频繁地非法停车。理想情况下，这一问题将以数据驱动的方式得到解决，并被量化。如果它是有效的，建模目标应该反映这一点。**

**要优化的建模指标仍然是假阳性率和假阴性率的加权平均值。但是除此之外，假阳性率也会有上限。**

****业务目标#3:在案件量高的时候减少周转时间** 如果代理人是受薪的并且加入了工会，所以他们不能被解雇，那该怎么办？这个城市不会通过减少他们的工作量来节省任何钱。因此，当代理人无所事事时，系统批准太多案例是没有意义的。但是，当申诉数量非常高时，该市可能仍然希望使用该系统来减少周转时间。**

**在这种情况下，我们知道需要代理处理多少个案例。假阴性率不是一个特别重要的指标。相反，该模型应该将代理处理的案例数量作为给定输入，从而最大限度地减少错误批准。**

**这三个例子的建模目标有所不同，因此每种情况都会产生不同的最佳模型。此外，这些建模目标是标准度量的变体，但是它们都不是教科书上的用例。如果一位数据科学家只是建立了一个优化标准指标之一的模型，如 [AUC](https://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_under_the_curve) 或 [F1 得分](https://en.wikipedia.org/wiki/F1_score)，这座城市可能会把钱留在桌子上。换句话说:**业务目标必须驱动建模目标**。**

## **结果**

**为了从机器学习模型中获得商业价值，商业目标必须用统计术语来构建。这需要相当多的专业知识，并且经常造成沟通上的差距，即统计上的差距。**

**为了消除统计差距，将接受标准的概念应用于数据科学任务。产品经理定义业务指标和业务目标。然后，数据科学家将它们转化为建模指标和建模目标。这是一个迭代过程，应该在每次建模迭代中重复。**

**最重要的是要记住，机器学习模型不是在真空中建立的。他们必须满足产品需求。业务目标必须驱动建模目标。**

## **PS:纽约实际上是如何解决停车罚单问题的**

**![](img/9a545f6a28e387a5488d4e6d3953ecd9.png)**

**Lady Liberty has successfully contested many parking tickets (photo by [Juan Mayobre](https://unsplash.com/@jmayobres?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral))**

**实际上，如果你对纽约市的停车罚单提出上诉，在大多数情况下，如果你只是支付罚单，你会自动获得大约 30%的折扣。如果你选择争辩，你可能会在法庭上付出更多。**

**所以这座城市在没有使用任何机器学习的情况下找到了一个相当好的商业解决方案。相反，它使用了一个非常简单的模型，以至于很难实现。**

**重要的是，这个简单的解决方案需要将重点从根据是非曲直决定每一个人的上诉转移开来。这看起来很明显吗？许多机器学习团队自然会专注于他们的建模任务。很难将注意力转移到探索不同的产品方法上。我将在以后的文章中写更多关于这方面的内容。**