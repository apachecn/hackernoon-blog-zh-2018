# #Rust2018:不要成为新的哈斯克尔

> 原文：<https://medium.com/hackernoon/rust-2018-dont-be-the-new-haskell-a383dbd74481>

## TLDR:大公司的采用决定了语言的成功，而不是语言的质量。让我们以大公司/项目为目标，拥有官方库、稳定的工具，让 cargo 像 gradle wrapper 一样工作。

![](img/7aef56ffc9bca4398e78125a147ac461.png)

# 关于我

我的名字是蒂博德洛尔，我是一个独立的承包商在澳大利亚工作。我参与了几个行业(银行、赌博、电子商务等)的大型项目，使用不同的语言(Scala、Java、Web 等)。Net、python、Haskell、Cobol、……)有时候作为开发者，有时候作为技术领袖。我的舒适区是使用 Scala 和 React 进行 web 开发。

我已经跟踪 Rust 两年了。可悲的是，在过去的两年里，我的生活一直非常忙碌，我没有像我希望的那样投入太多时间，也没有创作出任何值得分享的东西。我的计划是在 2018 年疯狂玩 Rust，所以希望在未来你会看到我的名字出现得更多一点！

请原谅我在这篇文章中可能遇到的任何近似、过时的事实和误解，如果我错了，请纠正我！

# 铁锈#2017

我记得我通读了路线图，心想“是的！就是这样！!"。最重要的是，无论承诺什么，都已经或即将兑现！非常非常感谢 Rust 团队和所有的贡献者，真的很棒的工作。

**我喜欢的东西**，对我最重要的东西 **:**

*   RLS 和 VS 代码改进体验。还不稳定，但有很大的改进。
*   稳定中的宏 1.1。这对我意义重大。不仅因为我可以编写宏，还因为 Serde 和 Diesel 最终可以在 stable 中使用。
*   图书馆稳定。不是稳定本身，而是生锈的“官员”来给一些图书馆盖上印章的事实。我认为还可以更进一步(更多解释，请继续阅读)。
*   增量编译和货物检查。减少开发人员的反馈循环总是非常令人满意的。
*   NLL。

**我不喜欢的**:

*   时代 RFC。我最大的挫败感。我认为将另一个版本控制系统放在另一个之上是没有意义的，只会混淆视听。你要么使用 epoch，要么使用 rust 版本，但请不要两者都用…我也相信向后兼容性是一个必须解决的问题，但不是以这种方式(后面会有更多)。

# 铁锈#2018

对我来说，Rust 现在和 Haskell 有很多相似之处:它背后的聪明人，解决现实世界问题的真正伟大的概念，固执己见的社区，不容易掌握的非常强大的语言，不成熟的生态系统，没有为混合开发者的大项目做好准备。

我为什么写“不成熟的生态系统”:

*   大多数库都是由几个个人而不是整个社区/公司支持的 github 项目。
*   还没有一个大的事实上的 web 框架像 Java/Spring、Ruby/Rails、Scala/Play 那样解决你所有的问题。
*   没有好的数据库抽象层。当编写一个真实世界的应用程序时，我最关心的问题之一是能够将任何数据库插入其中，这不仅是因为我希望具有可移植性，还因为我用于测试的内存数据库将不同于我的 prod 数据库，我希望避免令人讨厌的意外。Diesel 除了是一个朝着正确方向发展的令人敬畏的框架之外，还远远没有为我做好准备。在我目前的公司，我可以从 Oracle、SQL Server 或 Teradata 中选择数据库(可能是因为供应商的支持)，因此我不能在 prod 中使用 Rust。
*   大多数基本工具还不稳定。Rustfmt，rls，clippy，VS 代码插件，…
*   一些概念性的问题还有待解决:向后兼容性，板条箱的安全性，…

也就是说，这是我对 Rust 等新语言的期望，与 Haskell 相反，Rust 发展得非常快。我认为它现在已经达到了一种令人敬畏的语言的地步，它所需要的只是让大公司为生态系统做出贡献，使其成熟。所有成功的语言之所以成功，是因为它们成功说服了大公司，而不是因为它们拥有一个由聪明人组成的社区(Haskell，我正看着你呢……)。

因此，以下是我认为 2018 年应该或不应该优先考虑的事情。

**2018 年工作重点:**

*   官方板条箱:大公司需要依赖他们的附属品。Crates.io 似乎复制了极具争议的 NPM 安全模型。另一方面，docker hub 具有官方知识库的概念，其中最有用的图像由官方实体盖章和审核。我相信这应该是自由党闪电战的下一步。在 crates.io 上引入一个标志(称之为“官方的”、“已审核的”、“精选的”，等等)，用于有一些标准(由工作人员审核，对非官方的 crates 没有可传递的依赖性，等等)的 crates。我并不是说 Mozilla 的员工应该对此负责，它可能是一个选举产生的董事会，社区中精心挑选的成员，…
*   改进开发人员工具。专注于单个开发人员配置，确保所有需要的工具都在那里并且稳定。一个开发人员应该有一个好的编辑器，包括自动完成和重构工具、调试器、格式化程序和 linter。
*   改进项目工具。作为一名技术主管，我的主要问题之一是确保每个人都以相同的方式、相同的版本运行/构建东西。为了减轻这种情况，我们应该尽可能少地依赖手动安装。生锈和货物应该合并，我们不需要两个工具。Cargo config 应该包含所有东西的版本(库，rustc，Cargo，…)，并且能够自动更新。我相信 Gradle 和 gradle 包装应该是货物的样子。有了 gradle wrapper，我不需要团队中的任何人自己安装 gradle，我只需一次提交就可以更新每个人的 gradle 和 java 版本。**理想情况下，我们不希望在开发人员的机器上安装任何东西**，除了源代码，执行类似`./cargow build`的东西，下载正确的货物版本，rustc，std 库，所有的库，然后构建整个系统。
*   更好的基本事物库。Rust 的本意是有利于并发性，但却没有官方的稳定库。我们需要 tokio 和 future-rs 稳定！错误管理也是如此([失败案例](https://crates.io/crates/failure)？)伐木([原木板条箱](https://crates.io/crates/log)？).这只是最明显的例子，让我去“等等，什么？没有默认的实现吗？！?"。
*   向后兼容。这对我来说是最模糊的，我不确定它现在是如何工作的，也不确定它将来应该如何工作……尽管我相信每个库应该能够声明它的 rustc 版本，cargo 应该能够以某种方式使用不同的 rustc/lib 版本编译几个模块。
*   保持社区贡献友好。这是我唯一与“大公司采用”没有直接关系的观点。这一点已经被多次提及，Rust 在这方面做得非常出色。确保欢迎新手，鼓励贡献。这就是你如何建立一个骄傲的鲁斯塔西亚人社区来推广这种语言。

**2018 年不优先**(有意争议) **:**

*   Wasm。我理解为什么人们对此感到高兴，但我不认为有人会因此而采用 Rust。WASM 还没有线程，而 Rust 是关于并发的(内存管理也是关于并发的)。围绕 Wasm 的工具也在进化，让它们成熟吧。Wasm 支持只会让 Rust 社区更开心，但不会帮助语言获得牵引力。
*   语言功能。语言足够好。
*   非必要的图书馆。让社区为你工作。如果公司采用 Rust，他们将做出贡献并填补空白。关注那些 90%的开发人员都需要的库。
*   桌面 GUI。这也将来自社区。现在 90%的图形用户界面都是网络或移动的。桌面 GUI 现在是一个有大量解决方案的利基市场。

对我来说就是这样，感谢阅读并请在 Reddit 上留下一些评论！