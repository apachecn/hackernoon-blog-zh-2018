# 通过文件分离关注点—丹·阿布拉莫夫

> 原文：<https://medium.com/hackernoon/separation-of-concerns-by-files-dan-abramov-56d0d6da842e>

Dan Abramov 最近在推特上发布了一个很好的“关注点分离”的观点，并有很多子推特详细解释了它。我觉得为了社区和未来的参考，将推文提取成一个中等的故事会很好。

*你可以在这里找到原始推文:*

用文件分隔[关注](https://hackernoon.com/tagged/concerns)就像用桌子分隔学校友谊一样有效。当没有耦合时，关注点是“分离的”:改变 A 不会破坏 b。增加距离而不解决耦合只会更容易添加 bug。

这并不是说把东西分成文件没有帮助。它允许您在导航的粒度和上下文切换的频率之间选择适当的平衡。但是您的文件结构与减少耦合或分离关注点没有任何关系。

刚性文件结构可能有助于引入一些期望的惯性，以防止更强的耦合。如果 A 和 B 之间有距离，就更难清晰地耦合。然而，未来的问题*可能*需要更多的耦合！既然很难，那就做得很差。

每个问题都是一只多维的野兽。随着需求的变化和理解的发展，维度的数量会随着时间而波动。你不能指望所有问题都符合三个(或任何数量)预定义的“维度”。

然而，这就是“框架”的作用。他们用描述问题的精确性来换取用相同的独立“维度”来表达问题的子集。如果你的许多问题看起来有相似的“形状”(例如，“屏幕上的一个交互的东西”)，这真的很有用。

有多种方法可以解决这个问题。例如:它的初始树结构+任何事物的可能出现的级联+可以操纵树以响应交互的代码。这是典型的 HTML+CSS+JS。然后你意识到也许“初始树结构+操纵树的代码”不是描述动态事物的一种非常有用的方式。这就好比你叫了一辆出租车，司机每次转弯都问你方向，而不是目标地址。所以把问题分开可能更有帮助:“任意给定时间的树结构+如何把树从前一个结构更新到下一个结构”。第二个子问题非常普通，我们可以把它藏在库中。我们折叠了一个问题维度！

当然，只有当用这个“框架”解决的问题仍然可以被分割成预定的“维度”时，尽管需求在变化，这种方法才能很好地工作。为了找到这样的“维度”，你可以从列出那些你期望不管发生什么变化都保持不变的事情开始。

比如:ui 通常不是随机的。人们通常希望同一个“东西”(例如按钮)在整个应用程序中表现和外观一致。如果不是这样，组件就不会是如此有用的抽象。

ui 也趋于相对“稳定”。最常见的情况是，每一个 UI 都有一个有限的“库”,包括它能做的事情和它能看起来的样子。这让你可以将“如何填充 10k 像素”的问题简化为“5 种可能的状态是什么，以及交互如何改变它们”。

注意 React 中的动画是如何有点难以想象的？(尽管像 Animated 这样的命令库提供了一个很好的出口！)这是因为动画扰乱了上面描述的“稳定性”，所以在选择的“维度”内表达更具挑战性。

工程的一半是如何让这个东西很好地工作。另一半是如何确保它随着时间的推移保持良好的工作状态。这需要以一种不仅仅是正确的方式来分解问题，而且是我们的大脑在注意力和短期记忆非常有限的情况下可以理解的方式。

因为我们太不擅长[编程](https://hackernoon.com/tagged/programming)，所以我们经常重新评估什么时候以某种方式分解问题是有帮助的，什么时候有一种方式可以更好地处理某种形式的问题是很重要的。