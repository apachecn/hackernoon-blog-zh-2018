# 智能合约，第 1 部分:安全性状态

> 原文：<https://medium.com/hackernoon/smart-contracts-part-1-the-state-of-security-4c37988c770>

![](img/2ca2deffee845069c8d4cec162346d51.png)

这是智能合同 3 部分系列的第 1 部分——第 2 部分关注法律问题，可以在这里找到。

**智能合约有望从根本上改变人类的互动方式。然而，在他们目前的状态下，他们还没有准备好接受大规模的信任。**

1996 年，计算机科学家、法律学者和密码学家 Nick Szabo 写了一篇题为*智能合同:数字市场的构建模块*的论文。在这份报告中，他制定了智能合约的基本规则，作为区块链的关键创新之一。

正如 Szabo 所说，“智能合同的基本思想是，许多种类的合同条款可以嵌入到我们处理的软件中，以这种方式使违约者为违反合同付出昂贵的代价(如果愿意，有时是极其昂贵的代价)。”换句话说，自动执行的合同。

22 年过去了，区块链革命正如火如荼地进行着。虽然目前大多数注意力都集中在加密货币及其估值上，但智能合约代表着区块链从金融交易协议向通用公用事业发展的下一步。

# 智能合同正在激增

智能合约是区块链可能会产生最具破坏性的短期影响的应用。数百万美元已经委托给他们的代码，截至 2018 年 6 月，仅以太坊就部署了超过 95，000 份智能合同(根据[以太扫描](https://etherscan.io/tokens))。

> ***“截至 2018 年 6 月，仅以太坊就部署了超过 95000 份智能合约。”***

早在比特币出现之前，编码为软件的商业逻辑就已经自动化并彻底改变了我们周围的世界，但智能合约的出现代表了这一趋势的加速。

理论上，智能合同承诺能够:

*   自动、可信、公正地执行合同
*   消除合同构建、执行和实施中的中间人

智能合同将提高交易速度，降低交易风险，有些人甚至考虑是否会完全取代律师。这在短期内不太可能，但他们可能会从律师的市场份额中分得一杯羹。

智能合约是动态的、复杂的，而且非常强大。

# 挥之不去的问题

我们都听说过智能合同将如何不可逆转地改变世界，但容易被淹没的是，编写安全的智能合同极具挑战性。

这一事实导致《麻省理工技术评论》和其他期刊发表文章称[以太坊的智能合同漏洞百出](https://www.technologyreview.com/s/610392/ethereums-smart-contracts-are-full-of-holes/)。这一结论似乎主要来自最近发布的一篇被高度引用的研究论文，名为[发现大规模贪婪、挥霍和自杀的合同](https://arxiv.org/pdf/1802.06038.pdf)，该论文指出“我们对近 100 万份智能合同的分析将 34，200 份(2，365 份不同的)合同标记为易受攻击。”另一项研究发现，超过 45%用 Solidity 编写的智能合同都有某种形式的漏洞。

> ***“对近百万份智能合同的分析将 34，200 份(2，365 份不同的)合同标记为易受攻击。”***

在大肆宣传中，这是人们不想谈论的事情之一:大多数智能合同都有漏洞，开发标准留下了巨大的改进空间，需求超过了审计资源。尽管智能合约建立在安全密集型的区块链网络上，但它通常存在漏洞、后门和漏洞，容易被利用。

# 发展挑战

智能合同只是几行代码，就像任何其他软件一样，在计算机上运行。然而，从安全角度来看，有几个因素使智能合同更加敏感。

Solidity 是主要的智能合约语言，它的语法类似于 Javascript，这使得许多人认为编写智能合约很容易。但稳健充满了古怪的行为，粗略一看似乎是正确的，但事实上，很可能并非如此。

> ***“智能合约编程缺乏标准化的最佳实践…[并且]依赖于非标准的软件生命周期，根据该生命周期，交付的应用程序无法更新或修补。”***

在 2018 年[会议论文](https://www.researchgate.net/publication/323545752_Smart_Contracts_Vulnerabilities_A_Call_for_Blockchain_Software_Engineering)*中，一组英国研究人员强调了两个进一步的挑战:*

1.  *与传统的软件工程相比，智能合约编程缺乏标准化的最佳实践。*
2.  *智能合同依赖于非标准的软件生命周期，根据这种生命周期，交付的应用程序不能更新或打补丁。*

*还有一个事实是，许多加密令牌已经表现出如此重要的价值，以至于攻击者非常有动力去寻找和利用合同中的漏洞，直接处理或持有它们以获取利润。据网络安全公司 [Hosho](https://hosho.io/) 的联合创始人 Hartej Sawhney 称，风险资金的数量已经并将继续吸引大量的黑帽子。*

*此外，区块链的繁荣创造了对智能合同开发商的需求飙升。正如 [Techcrunch](https://techcrunch.com/2018/02/14/blockchain-engineers-are-in-demand/) 所强调的，“在自由职业者计费方面，Upwork 见证了区块链成为 5000 多项技能中增长最快的技能——同比增长超过 35000%。”结果，许多没有经验的开发人员被雇佣来满足需求。*

> *许多没有经验的[区块链]开发人员被雇佣来满足需求。即使是最好的开发人员也不能期望写出没有错误的代码。每 1000 行中，一般认为会有 15 到 50 个错误。”*

*即使是最好的开发人员也不能期望写出没有错误的代码。每 1000 行中，一般认为会有 15 到 50 个错误。因此，要编写一份没有错误的智能合同，程序员必须比平均水平高出 15 到 50 倍。*

*最后，还有焦点问题。正如网络安全社区 Hacken 的首席执行官 Dmytro Budorin 在[采访](https://bitcoinmagazine.com/articles/audits-and-quality-assurance-patching-holes-smart-contract-security/)中描述的那样，“当编写智能合同时，程序员更多地考虑功能而不是安全，因为主要任务是简单地使代码工作，而安全通常是事后的想法。”*

*当你把这些元素混合起来，开始利用图灵完备性时，就像许多平台一样，你会发现搞砸并创造出各种各样意想不到的行为并不困难。*

*因此，智能合约的历史已经充满了痛苦的脚注，列举了所有已经发生的事故和灾难。*

# *修补阿基里斯之踵*

*如果智能合约要成为未来数字经济的核心特征，安全性就必须提高。*

*对于一个“安全”的软件来说，它需要没有意外或不良的行为，即使在遭受各种威胁模型时也是如此。因此，问题是，在敌对条件下，什么会使智能合约不太可能出现意外行为？*

> ****“需要更加关注简单性和一致性，即使牺牲一些开发人员的前期努力(太多的语言为了易于开发而不是可验证性而优化)。”****

*据西雅图区块链战略与技术集团[新炼金术](https://newalchemy.io/)的专家称，有三个关键领域需要改进:*

*   *更好的语言设计:更具表现力的编程语言(即图灵全集)也更有可能创造出意想不到的行为。“需要更加关注简单性和一致性，即使牺牲一些开发人员的前期努力(太多的语言为了易于开发而不是可验证性进行了优化)。”此外，许多用例不需要图灵完备性提供的灵活性。一些项目已经意识到了这一点。例如，Waves 在最近的[博客文章](https://blog.wavesplatform.com/waves-smart-contracts-stage-1-311e4e5a0441)中说:“非图灵完全契约将覆盖大多数用例。所有用户都可以从 Waves 客户端获得这些服务，不需要任何专业知识或专业技能。”*
*   ***更好的工具:**代码审计员寻找的许多问题都属于已知的 bug 类别，可以自动检测出来。人工审核是必须的，但审核员一般也会使用棉绒或[松露](https://truffleframework.com/docs/getting_started/testing)和[胡杨](http://populus.readthedocs.io/en/latest/testing.html)等工具，便宜又省时，但也需要改进。事实上，一项关于开源以太坊合同的研究表明，由于“覆盖范围不足”，现有的解决方案可能会遗漏多达三分之二的漏洞(见实验和数据[此处](https://arxiv.org/abs/1806.01143))。最近推出了一些新工具，但是标准还需要提高。*
*   ***更好的方法论学科:**以太坊倾向于吸引早期采用者，喜欢生活在边缘的人，但那恰恰是设计高保证软件所必须的相反气质。“80 年代开发航空电子软件的开发人员用更少的资源做了更多的事情，我认为这在很大程度上与保守软件设计的文化倾向有关。”今天的区块链开发商将不可避免地采用这种理念。*

> ****“80 年代开发航空电子软件的开发者用更少的资源做了更多的事情，这在很大程度上与保守软件设计的文化倾向有关。”今天的区块链开发商将不可避免地采用这种理念。”****

# *其他改进*

*Sagewise 的首席执行官兼联合创始人 Amy Wan[主张用一种略有不同的方法来解决这个问题:“我相信区块链公司将能够通过使用专注于开发智能合同的专用开发人员来防止未来的智能合同灾难，雇佣一家声誉良好的安全审计公司，并在智能合同中包括一个全面的安全网，如 SDK。”](https://bitcoinmagazine.com/articles/audits-and-quality-assurance-patching-holes-smart-contract-security/)*

*这里讨论的软件开发工具包可以与智能合同集成，本质上充当代码中的仲裁条款，从而让开发人员有机会在需要时进行监管。对一些人来说，这可能听起来像是一个失败或控制的集中点，但像这样的常识性解决方案可能会发挥作用。*

*还有传统的方法:测试、代码审计和 bug 奖励。这不是什么新鲜事——政府和大公司经常使用这些方法来审查他们软件的安全性。唯一的区别是，鉴于智能合约的“一次性”条件，区块链空间需要在这些方法上加倍努力。*

*在一篇关于智能合同开发人员心态的文章中，ConsenSys 项目经理 Micah Dameron 提出了一个总体开发哲学:“随着智能合同等永久软件实体的创建，对一套规则的需求正在快速逼近。”他接着用一座纪念碑来体现他提出的哲学:这一哲学可以用这四行诗来很好地概括:*

*![](img/b22bf48a1d494a4c1bebfe23992ab448.png)*

# *最后的想法*

*数字经济将朝着一个全新的方向发展，这个方向可能比它之前的任何事物都更具变革性。这主要归功于区块链，以及由此带来的智能合约。但如果智能合约要成为全球经济去中介化的一个支点，就必须覆盖更多领域。*

*许多人认为智能合约仍处于萌芽阶段，因此大多会原谅它们的缺点。一夜之间的解决方案可能是不现实的，但对安全的更大关注需要成为现实。虽然大部分责任落在开发商身上，但区块链社区也有责任。社区可以通过更加直言不讳、将安全性作为谈话的中心以及要求更多来帮助开发团队在谨慎方面犯错误。*

*社区也应该花更多的时间记录被利用的漏洞。这样做扩展了现有的案例研究和情况库，以便未来的开发人员有更多的参考资料，并可以避免重复错误。*

> ****“在新安全解决方案的功效和将其改造到现有软件的大规模部署中的能力之间，总会有权衡取舍。”****

*回顾历史，传统软件中的许多安全改进都是渐进的，而不是革命性的，没有理由认为智能合约会有什么不同。在新的安全解决方案的功效和将其改造到现有软件的大规模部署中的能力之间，总会有权衡。*

*所有这些的底线是智能合约的可靠性是主流区块链采用的关键。如果对这项新技术有持续的信心，解决本文中概述的要点是至关重要的。*

***尝鲜人群***

*尽管早期阶段的智能合约相对缺乏内在的安全性，但不乏早期采用者找到新的方法来使用它们。一家这样的公司是法国航空公司 Fizzy AXA，它为区块链提供飞行保险。如果事件(航班延误超过两小时)被触发，用户会自动收到补偿选项通知。希望艰苦的补偿过程能成为过去。*

*另一个是 Propy，该公司希望让备受吹捧的房地产智能合同的未来成为现实。“跨境”市场使用智能合约来确保法律和金融的公平竞争，使得房产买卖更加简单。例如，如果买方提交 5000 美元的订金以预订一处房产，智能合同可以确保在卖方选择不出售的情况下立即返还这笔钱。像这样的简单用例将见证智能合约的繁荣。*

*![](img/77c95331a3e6b288f668a519181c5e79.png)*

*这篇文章是由研究院的科林·亚当斯写的，最初发表在 T2 二元地区杂志上。*

*新兴技术领域绝不缺少创意或灵感；然而，这些本身并不等同于创新，也不推动技术进步，而是高质量的研发。该研究所对技术发展采取实用的方法，并寻求在想法和可行的解决方案之间寻求平衡。*

*插图作者:Kseniya Forbender*