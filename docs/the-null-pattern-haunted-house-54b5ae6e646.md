# 零模式鬼屋

> 原文：<https://medium.com/hackernoon/the-null-pattern-haunted-house-54b5ae6e646>

![](img/cc7984d4319b4eb6888a9d0ff3e7244c.png)

Photo by [Patrick Tomasso](https://unsplash.com/photos/SDA-pOBbNdY?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/search/photos/haunted?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)

你有没有在一个非常标准的代码中遇到一个 bug，当你发现问题时，你不能说这是一个业务逻辑还是只是一些类型检查以避免空指针异常？这种错误对我来说是最糟糕的，他们花了我更多的时间来找出为什么会有问题，然后实际上解决问题。这是我更愿意发生在我身上的事情，所以让我们一起来谈谈这件事，一起抱怨吧。

声明:这个讨论比这篇文章还大，甚至还有人喜欢这个空模式！🤷‍️.有时我认为问题在于你实际上并不介意一张空头支票，也不把它当成一个问题，你知道，这只是一张空头支票！这能有什么错呢？这就是这种模式成为怪物的时候。

对我来说，如果你的软件抛出一个空指针，这是好事！您的工作是防止这种情况发生，而不是检查每一个数据是否为空。这不是政治迫害！他们在那里爆发，并给你一些潜在错误的反馈，记住:快速失败！我们将在另一篇文章中对此进行探讨。

我有一个案例可以指出这个问题:我正在开发一个新闻应用程序，其中有一个业务逻辑，如果前端发送一个发布日期，这个新闻应该发布给用户，否则这个新闻就是草稿，甚至软件应该将这个日期从字符串转换为时间戳。

到目前为止，这似乎是一个非常简单的任务，后端代码是这样的:

所以我们有一个将字符串转换成时间戳的方法，它实际上是在执行业务逻辑！这个空检查不仅不适合用它的方法创建一个单元，而且还隐藏了一个帮助器方法的实现。

## 没有付出就没有收获…

让我们想象一下，你正在一家面包店的蛋糕生产线上工作。你的工作是收到一个蛋糕形状，加入面粉，并把它送回去；如果前一个员工没有给出形状，你会在什么都不加面粉，什么都不回吗？不要！你可能会抱怨！不过这是一个副作用。

通过不返回任何东西，你没有为你的代码承担责任，而把问题留给了系统的其他部分，这是一个很难解决的问题，我将告诉你一个周末的痛苦，这是我在一个简单的空*scheia*中经历的

那是一个阳光明媚的周末，巴西炎热的夏天，空调开到了最大，我在那里，试图与客户一起部署一个项目，做质量保证。一切都很好，直到他们发现一个神秘的错误。一些日期在新软件过程中被保存为空。我是该公司唯一的开发人员，这个项目有 40 多名开发人员，我之前对系统的这个特定部分一无所知。2 个小时的调试之后，我完成了一小段代码:`if(date == null) return null;` 检查 *gitlog* ，这是一个前端问题的“错误修复”。我花了一个多小时才明白为什么一个空值解决了我们凶猛的角度应用的一个问题。一天花了几个小时编写代码，修改了 3 行代码，删除了一个空代码，bug 也解决了。

那我该怎么办呢？如何在没有 null 和它的“有用”能力的情况下生活？让它爆炸吧！混乱给了我们方向，给了我们问题和行动的方向！如果你的代码从来没有失败过，你怎么知道它在工作呢？