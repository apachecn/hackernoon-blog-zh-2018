# åŸºäºä¸»å¹²çš„åº”ç”¨ç¨‹åºå¼€å‘(TBD)

> åŸæ–‡ï¼š<https://medium.com/hackernoon/trunk-based-development-tbd-for-apps-9b654b6b198c>

é€šè¿‡é˜…è¯»ä¸€äº›ä¸ TBDâš¡ï¸ç›¸å…³çš„æ–‡ç« å’Œæ¨æ–‡ï¼Œæˆ‘æ— æ³•é¿å…å°†è¿™ä¸ªè¯é¢˜å¸¦åˆ°æˆ‘è‡ªå·±çš„é¢†åŸŸ(ğŸ“± **app å¼€å‘**ï¼Œä¼¸ä¼¸èƒ³è†Šä¼¸ä¼¸æ‰‹æŒ‡ï¼Œå‘è¡¨ä¸€ç¯‡å…³äºè¿™ä¸ªçš„ç¬”è®°ã€‚

# é‚£ä¹ˆï¼ŒTBD æ˜¯ä»€ä¹ˆï¼Ÿ

[å¹²çº¿åŸºç¡€å‘å±•](https://trunkbaseddevelopment.com/)æ˜¯:

> åœ¨æºä»£ç æ§åˆ¶åˆ†æ”¯æ¨¡å‹ä¸­ï¼Œå¼€å‘äººå‘˜åœ¨ä¸€ä¸ªåä¸ºâ€œä¸»å¹²â€çš„åˆ†æ”¯ä¸­å°±ä»£ç è¿›è¡Œåä½œï¼Œé€šè¿‡é‡‡ç”¨æ–‡æ¡£åŒ–çš„æŠ€æœ¯æ¥æŠµåˆ¶åˆ›å»ºå…¶ä»–é•¿æœŸå¼€å‘åˆ†æ”¯çš„å‹åŠ›ã€‚å› æ­¤ï¼Œä»–ä»¬é¿å…åˆå¹¶åœ°ç‹±ï¼Œä¸ç ´åå»ºè®¾ï¼Œå¹¶å¹¸ç¦åœ°ç”Ÿæ´»åœ¨ä¸€èµ·ã€‚

![](img/de75fb5e499e8c8984cd120c573cd189.png)

é€šè¿‡é˜…è¯»å®ƒï¼Œä½ å¯ä»¥å¯Ÿè§‰åˆ°é‚ªæ¶ğŸ‘¹è¿‡åº¦ç»“æ„åŒ–çš„åˆ†æ”¯æ¨¡å‹(å¦‚ [git flow](https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow) )çš„ä¸€é¢ï¼Œä½ å¯èƒ½ä¼šå¼€å§‹è€ƒè™‘æŠ½è±¡ğŸ§™â€â™‚ï¸çš„**åˆ†æ”¯** **ç­‰æ¦‚å¿µï¼Œç‰¹æ€§æ ‡å¿—ğŸš©**ä»¥åŠå¦‚ä½•ä½¿æ‚¨çš„ CI/CD æµç¨‹â™»ï¸é€‚åº”ä½¿ç”¨**å¾…å®š** âš¡ï¸ **å·¥ä½œæµç¨‹ã€‚**

è®©æˆ‘ä»¬ä¸€èµ·å›é¡¾ä¸€äº›å…³é”®çš„äº‹æƒ…ã€‚

# åŠŸèƒ½æ ‡å¿—ğŸš©

åŠŸèƒ½æ ‡å¿—æ¦‚å¿µ[æ˜¯æ–°çš„](https://featureflags.io/)æˆ–ç‰¹åˆ«é™„åŠ åˆ° TBDâš¡ï¸ **ä½†æ˜¯å¦‚æœä½ æƒ³æ¬åˆ° TBDâš¡ï¸.ï¼Œä½ éœ€è¦å¼€å§‹ä½¿ç”¨åŠŸèƒ½æ ‡å¿—**

å½“æ¯ä¸ªäººéƒ½åœ¨ä¸€ä¸ªåˆ†æ”¯ä¸­åˆä½œæ—¶ï¼Œä½ éœ€è¦ä¸€ç§æœºåˆ¶æ¥éšè—æˆ–æ·¡å‡ºé‚£äº›æ­£åœ¨å¼€å‘çš„éƒ¨åˆ†ã€‚

> ç”±äºå¾ˆéš¾è®©ä½ çš„ç”¨æˆ·è·å¾—æ–°ä»£ç ï¼Œåº”ç”¨ç¨‹åºçš„å‘å¸ƒè¿‡ç¨‹æœ‰ç€ç‰¹æ®Šçš„æ„ä¹‰ã€‚

iOS å•†åº—éœ€è¦é•¿è¾¾ 3 å¤©çš„å®¡æŸ¥è¿‡ç¨‹ï¼Œè¿™å¹¶ä¸æ–°é²œâ³(Android æ²¡æœ‰)ï¼Œä½†åœ¨ä¸¤è€…ä¸­ï¼Œä¸€æ—¦ä½ â€œå‘å¸ƒâ€å¯ä»¥æŒç»­é•¿è¾¾ 1 å‘¨ï¼Œä»¥è·å¾—æ–°ç‰ˆæœ¬ä¸­ 90%ä»¥ä¸Šçš„ç”¨æˆ·ã€‚

> é‡‡ç”¨[ç‰¹å¾æ ‡å¿—](https://martinfowler.com/bliki/FeatureToggle.html)ğŸš©å°†å¸®åŠ©æ‚¨å°è¯•æ–°çš„ä»£ç ï¼Œå¹¶åœ¨å‡ºç°é—®é¢˜æ—¶ç«‹å³å°†å®ƒæ”¹å›æ¥

æ­¤å¤–ï¼Œæ‚¨è¿˜ä¼šå–œæ¬¢å®ƒï¼Œå› ä¸ºå®ƒé€šè¿‡å¼ºåˆ¶è§£è€¦æé«˜äº†æ‚¨çš„ä»£ç è´¨é‡ï¼Œå¹¶æ”¯æŒæ‚¨çš„äº§å“ A/B æµ‹è¯•åŠŸèƒ½ã€‚

# æŠ½è±¡åˆ†æ”¯ğŸ§™â€â™‚ï¸

![](img/7a68ca40690e3ac86676843e40a76eb3.png)

[æŠ½è±¡åˆ†æ”¯](https://www.branchbyabstraction.com/)æ˜¯**å¢é‡æ‰§è¡Œå˜æ›´çš„ä¸€ç§æ–¹å¼**ï¼ŒTBDâš¡ï¸éœ€è¦å®ƒï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºåˆå¹¶â€œè¿›è¡Œä¸­çš„å·¥ä½œâ€å˜æ›´ğŸš§æ”¾åœ¨åå¤‡ç®±é‡Œå¹¶ä¿æŒç¨³å®šã€‚

> åŸºæœ¬æ€æƒ³æ˜¯æŠ½è±¡å½“å‰çš„å®ç°ï¼Œåœ¨æ¯ä¸ªé˜¶æ®µçš„ä¸€ç³»åˆ—å¯å‘å¸ƒçš„å˜æ›´ä¸­ç”¨æ–°çš„å®ç°æ›¿æ¢å®ƒã€‚

è¿™ä¸ªç®€å•çš„æ¦‚å¿µå¾ˆå®¹æ˜“åº”ç”¨ï¼Œå¹¶ä¸”ä¼šå¸®åŠ©ä½ å¾—åˆ°ä¸€ä¸ªè€¦åˆåº¦æ›´ä½çš„ä»£ç **ğŸš**å¹¶åœ¨â€œå·¥ä½œè¿›è¡Œä¸­â€å˜æ›´ä¸­è·å¾—åé¦ˆğŸš§è¶Šæ¥è¶Šé¢‘ç¹ã€‚

æ‰€æœ‰è¿™äº›å¥½å¤„éƒ½æ˜¯åƒ[å¹²å‡€çš„æ¶æ„](http://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)æˆ–[åšå®çš„](https://en.wikipedia.org/wiki/SOLID)è®¾è®¡åŸåˆ™è¿™æ ·çš„æ¦‚å¿µæ‰€å›ºæœ‰çš„ï¼Œä½†æ˜¯å³ä½¿æŠ½è±¡åˆ†æ”¯åœ¨ä»»ä½•æƒ³è¦é¼“åŠ±å“è¶Šå’Œæ”¹è¿›åä½œçš„å›¢é˜Ÿä¸­éƒ½æ˜¯å¿…é¡»åšçš„ï¼Œå°½ç®¡ä»–ä»¬æ¸´æœ›é‡‡ç”¨ TBDâš¡ï¸

# ç»“è®º

é‰´äºä¸Šè¿°å¥½å¤„å’Œåº”ç”¨ç¨‹åºå‘å¸ƒçš„ç–¯ç‹‚â³ä½ ä¼šæ³¨æ„åˆ° TBDâš¡ï¸çš„å¤§éƒ¨åˆ†æ”¹è¿›éƒ½ä¸æ­¤ç›¸å…³æˆ–ç›´æ¥ç›¸å…³ï¼Œæ¯”å¦‚:

*   **å°‘è€¦åˆä»£ç ğŸš**
*   **æ›´å¥½çš„ä»£ç å®¡æŸ¥æµç¨‹ğŸ‘€**
*   **å¿Œé‚ªé‚ªåˆ†æ”¯ğŸ‘¹**
*   **æ›´ç²¾ç®€çš„ CI/CD æµç¨‹â™»ï¸**
*   **æ›´å®‰å…¨ã€æ›´å¿«æ·ã€æ›´å¿«å‘å¸ƒ**ğŸš€

> è€Œåœ¨å…¶ä»–æŠ€æœ¯ä¸­ï¼Œå‘å¸ƒåˆ°ä¸»å¹²å¯èƒ½æ„å‘³ç€åœ¨ç”Ÿäº§ä¸­å‘å¸ƒã€‚
> 
> åœ¨åº”ç”¨ç¨‹åºå¼€å‘ä¸­ï¼Œæƒ…å†µå¹¶éå¦‚æ­¤ï¼Œæœ‰å¿…è¦é™ˆè¿°ä¸€ä¸ªæ¸…æ™°çš„å‘å¸ƒæ”¿ç­–ğŸš€ã€‚

å½“ä½ å‘å¸ƒä½ çš„åº”ç”¨ç¨‹åºæ—¶ï¼Œä½ ä¸ä»…ä»…æ˜¯é€æ­¥æ·˜æ±°äº†ä¸€å‘¨ 90%ä»¥ä¸Šçš„ç”¨æˆ·è·å¾—æ–°çš„å˜åŒ–ï¼Œä½ è¿˜è¿«ä½¿ä»–ä»¬åœ¨æ¯æ¬¡æ›´æ–°æ—¶ä¸‹è½½å‡ åç”šè‡³å‡ ç™¾ MBï¼Œä½ ä¸èƒ½ç®€å•åœ°å‘å¸ƒåˆå¹¶åˆ° trunk ä¸­çš„æ¯ä¸ªå˜åŒ–ã€‚

å¦‚æœä½ è¦æ”¶å…» TBDâš¡ï¸ï¼Œä½ éœ€è¦è®©ä½ çš„é‡Šæ”¾è¿‡ç¨‹å®šæœŸè¿›è¡Œâ²(å¯èƒ½ä¸æ‚¨çš„ sprint è®¡åˆ’ä¸€è‡´)è¿™æ ·æ— è®ºä»€ä¹ˆåœ¨ trunk ä¸­éƒ½ä¼šåŠæ—¶è¢«é‡Šæ”¾ğŸš€ï¼Œè¿™å°†å¸®åŠ©æ‚¨ä¿æŒä¸€ä¸ªç¨³å®šçš„å‘å¸ƒè¿›åº¦ï¼Œè¿™å°†å¯¼è‡´ä¸€ä¸ªæ›´åŠ æŠ•å…¥çš„å›¢é˜Ÿï¼Œé€šè¿‡æ›´é¢‘ç¹åœ°çœ‹åˆ°ä»–ä»¬å·¥ä½œçš„å½±å“å¹¶è¿«ä½¿æ‚¨æ›´å¿«åœ°è¿›è¡Œæµ‹è¯•æ¥å¢åŠ å›¢é˜Ÿçš„æˆå°±æ„Ÿã€‚

ç„¶è€Œï¼Œä¸»å¹²åˆ†æ”¯å˜å¾—è¶Šæ¥è¶Šé‡è¦ï¼Œæ‚¨éœ€è¦é«˜åº¦é‡è§†è¯¥åˆ†æ”¯ä¸­çš„è‡ªåŠ¨åŒ–æ£€æŸ¥ï¼Œä»¥ç¡®ä¿å…¶ç¨³å®šæ€§ã€‚

> åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼Œæ‚¨éƒ½éœ€è¦å°±ä½•æ—¶è‡ªåŠ¨é‡Šæ”¾ä»¥åŠå¦‚ä½•é˜»æ­¢å®ƒï¼Œå¦‚ä½•åœ¨éœ€è¦æ—¶æ‰‹åŠ¨é‡Šæ”¾è¾¾æˆä¸€è‡´ï¼Œä½†æ›´é‡è¦çš„æ˜¯åœ¨ä¸»å¹²ä¸­åˆ›å»ºä¸€ç»„è‡ªåŠ¨æ£€æŸ¥ä»¥ç¡®ä¿å®ƒçš„ç¨³å®šæ€§ã€‚å¦‚æœå¯èƒ½ï¼Œåœ¨åˆå¹¶ä»»ä½• PR åˆ°å®ƒä¹‹å‰ã€‚

# TLï¼›åšå£«â€”â€”LOLğŸ˜‚

æœ‰å‡ ä¸ªæœ‰æ•ˆçš„ç‚¹åœ¨å¾…å®šâš¡ï¸and å‘¨å›´çš„ä¸€åˆ‡ï¼Œåƒ**ç‰¹å¾æ ‡å¿—**ğŸš©ï¼Œ**åˆ†æ”¯è¢«æŠ½è±¡åŒ–** ğŸ§™â€â™‚ï¸ï¼Œ**å¢åŠ åä½œ**ğŸ“£ï¼Œæ›´ç®€æ´çš„ä»£ç å’Œæ›´ç®€å•çš„ CI/CD æµç¨‹â™»ï¸

> æˆ‘çš„ç»“è®ºæ˜¯ï¼Œç°åœ¨æ²¡æœ‰ä»€ä¹ˆèƒ½é˜»æ­¢ä½ åœ¨åº”ç”¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­é‡‡ç”¨è¿™ç§æ–¹æ³•ï¼Œåªæ˜¯å¯¹ä¸»å¹²ç¨³å®šæ€§å’Œå¯¹æœªçŸ¥çš„ææƒ§è®¾ç½®äº†æ›´ä¸¥æ ¼çš„æ£€æŸ¥ã€‚

## ç›¸å…³æ–‡ç« :

*   [trunkbaseddevelopment.com](https://trunkbaseddevelopment.com)
*   [çš„ç‰¹è‰²ä»](https://martinfowler.com/bliki/FeatureToggle.html)[çš„](http://martinfowler.com/)ä¸­å€Ÿé‰´äº†é©¬ä¸Â·ç¦å‹’çš„
*   [é€šè¿‡æŠ½è±¡åˆ†æ”¯](https://continuousdelivery.com/2011/05/make-large-scale-changes-incrementally-with-branch-by-abstraction/)ä»[ContinuousDelivery.com](https://continuousdelivery.com/)
*   [åŸºäºä¸»å¹²çš„å¼€å‘](https://www.thoughtworks.com/insights/blog/enabling-trunk-based-development-deployment-pipelines)æ¥è‡ª [ThoughtWorks](https://medium.com/u/8075bdd73dd9?source=post_page-----9b654b6b198c--------------------------------)
*   [ä¸ºä»€ä¹ˆç‰¹å¾åˆ†æ”¯æ˜¯é‚ªæ¶çš„](https://twitter.com/buraitopengin/status/993415389525790720)æ¥è‡ª[å‰åˆ—å§†ç®¡](https://medium.com/u/179bce3232e6?source=post_page-----9b654b6b198c--------------------------------)