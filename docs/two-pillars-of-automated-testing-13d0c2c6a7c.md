# 自动化测试的两大支柱

> 原文：<https://medium.com/hackernoon/two-pillars-of-automated-testing-13d0c2c6a7c>

当你的团队被要求[快速行动并打破常规](https://www.xkcd.com/1428/)时，方法论的纯粹性会很快让位于冲刺速度的实用主义。然而，这句话——曾经是脸书的信条——并不意味着我们可以在质量保证部门冒险。这实际上是对我们的一个告诫，要睁开眼睛去寻找新的机会，而不是闭上眼睛，祈祷事情会保持不变。这是一种具有颠覆性的战斗口号，要求快速尝试(并在必要时抛弃)新事物。

所有这些与测试和 QA 有什么关系？

![](img/d52380be9337cbbfdaf3fddebf245583.png)

相当多。根据我们的经验，QA 是开发领域中进展最慢的学科之一。这适用于市场的供应方和需求方。新的测试技术很少能在第一时间进入市场。同样，产品团队没有能力、时间和意愿去寻找新工具也不常见。这并不奇怪，因为许多 QA 团队有一个测试库语料库，他们不能简单地忘记。

所有这些都是为了鼓励你去了解一个叫做 [Cypress](https://www.cypress.io/) 的测试框架，它惹怒了市场领导者 [Selenium](https://www.seleniumhq.org/) 的几根羽毛。你可能听说过。就时间而言，Cypress 刚刚离开 Beta，我们认为这将是对比两个框架采取的非常不同的方法的一个合适的时机。在本帖中，我们将回顾它们的主要区别，其中大部分源于开发人员做出的一组较小的设计选择。

# 历史速成班

Selenium 最初是由 Jason Huggins 在 2004 年开发的，从那以后一直在维护和更新，以应对技术的变化。一路走来，一个超级团队围绕着这项技术。Cypress 是由 Brian Mann 和他的超级团队开发的，它的第一次提交是在四年前。Selenium 和 Cypress 现在都是[开源](https://github.com)。

![](img/7994fdd23738fb2d5fe2f3a8946b16e2.png)![](img/4cda1bbadc68abd99f42eeb9ac9a86bc.png)

# 体系结构

从架构上来说，这两者是截然相反的，正是这些架构上的差异可能会影响你的偏好，而不是其他任何东西。

Selenium 由一个名为 WebDriver 的组件组成，该组件可以管理和控制一个(特定的)浏览器，以及一组确定用哪种语言编写测试的绑定。当测试运行时，至少涉及三个过程:

*   网络驱动
*   浏览器驱动程序
*   浏览器本身

众所周知，这些进程之间的网络开销会导致测试执行缓慢。即使您在同一台机器上运行所有的东西，网络开销仍然存在——在本地，Selenium 使用 127.0.0.1 环回接口。

![](img/37d0e67eb47303ddd636cc29363276b7.png)

Cypress 采用了一种不同的方法，并作为一个单一的整体应用程序来提供——您需要做的唯一选择是通过 npm 还是以独立模式安装它。选择 npm 可以让您访问测试套件中的其他生态系统——实际上在 Cypress 的后面是 Node.js 服务器进程(在独立模式下，它是嵌入式的)。大多数人选择 npm 路线，但独立模式可能适合在评估时进行短暂的访问。

Cypress 在浏览器内部运行测试*并且可以访问 DOM，甚至是测试中的应用程序，这种配置除了其他方面之外，还能让它运行得非常快。但是不要忘记，拥有后端 Node.js 进程意味着它也可以在浏览器之外执行需要更高权限的任务。这意味着与后端进程(如数据库或另一个服务器)进行通信需要一些额外的工作。*

*这种取舍意味着 Cypress 只能支持 JavaScript，永远不会支持其他的，而 Selenium 目前有 Java、C#、Ruby、Python 和 JavaScript (node)的绑定，目前在 Alpha 中。对于一些人来说，这将是一个杀手级的特性，也可能是一些团队不得不立即拒绝 Cypress 的原因。*

# *火花*

*古怪的测试——在完全相同的应用程序状态下可能通过也可能失败的测试——是测试人员和 [QA 工程师](https://www.a1qa.com/services/testing_automation/)的克星。Cypress 用重试和超时逻辑包装所有的 DOM 查询，开发者声称这种逻辑对真正的 web 应用更有效，导致了*测试片*的大量减少。*

*Cypress 团队还声称，尽管 Selenium 在支持今天的 web 方面取得了令人印象深刻的进展，但 Cypress 对现代异步单页面应用程序的支持使其更适合当前的开发工作流和应用程序设计模式。*

*![](img/f52c1415ca94041030c449af4edce256.png)*

# *代码、库和入门*

*Selenium 和 Cypress 都要求用编程语言编写测试。这听起来可能是显而易见的，但是有一些测试产品使用其他模型，例如，通过基于 GUI 的测试记录器。在 Cypress 的例子中，语言必须是 JavaScript。抛开语言战争不谈，Selenium 提供了一种选择，而且，正确地说，它更像是一个库，而不是像 Cypress 这样的框架。Selenium 继续与许多单元测试框架和断言库很好地集成，而使用 Cypress，选择仅限于 Mocha、Chai 和 Sinon。*

*因此，开箱即用的 Cypress 更容易上手，因为所有东西都已经捆绑在一起了。Selenium 需要做更多的准备，考虑哪些配套技术最适合您的用例。这不是一个巨大的减速带，但它可能会有所不同，尤其是当你试图评估多个选项时。*

# *排除故障*

*Cypress 直接面向开发人员和 QA 工程师，并且有一个很棒的调试故事。因为它与应用程序在同一个运行循环中执行，所以它可以访问变量、代码和浏览器提供的东西，如文档、窗口和调试器。一旦您熟悉了它的异步特性，进入调试器就很简单了。如果您正在寻找测试脚本中的一个 bug，它还可以自动拍摄 DOM 的快照，并让您“时间旅行”到更早的应用程序状态。*

*使用 WebDriver/Selenium，调试不是特别直观。当您遇到问题时，在运行所有测试后，您得到的只是一个 HTTP 错误响应。此时，您的应用程序消失了，浏览器也关闭了——然而，您必须以某种方式直观地了解 HTTP 错误的原因。这可能会令人沮丧。*

*![](img/73372cd33da8bc67244ec688f800987e.png)*

# *底线*

*文字和清单的比较似乎不能公正地对待这些伟大的测试解决方案。你必须根据自己的需求来体验它们。对某些人来说可能是一个令人叫绝的特性或架构怪癖，对其他人来说可能根本没有任何区别，甚至是一种好处。*

*当然，我们很兴奋，Cypress 的到来意味着多年来第一次，又一个开源自动化测试游戏出现了。但毫无疑问，Selenium 是一个非常成功的故事，在可预见的未来仍将对许多人至关重要——它缓解了 Cypress 当前功能中的几个漏洞，如跨浏览器测试和多语言支持。*

*如果你的团队用的是 Selenium，我们不能告诉你是否应该改用 Cypress，但是我们可以告诉你的是，你应该去求，借，或者偷*时间*去查。然后，也许在一个小的、定义良好的新产品功能上真正尝试一下，而不是在你的整个应用程序上。也许，最终，明智的决定将是同时使用*和*两种技术？*

*继续吧。动作要快。打碎东西。*