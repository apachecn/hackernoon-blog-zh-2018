# UTXO(未用交易输出)和账户模型比较 v. 2

> 原文：<https://medium.com/hackernoon/utxo-and-account-model-comparison-v-2-cdf9669c6c0d>

![](img/c88e71bed1806a239d9dad6bb7e531d0.png)

任何金融体系的基础都是资产管理方法。如果没有对可用余额的清晰理解，就不可能使用资产。如果平台不允许跟踪用户余额，传统会计中应用的复式记账法或分散式系统会计中青睐的三式记账法将不适用于区块链平台。

目前，两种流行的平衡模型是:未用交易输出(UTXO)和帐户模型。第一个模型是在用户之间移动的资产的有向图，第二个模型是具有当前网络状态的数据库。

# UTXO 与客户模型

第一个模型的主要优势是每个硬币的唯一性，而第二个模型提供了更简单的智能合约实现。由于这两个方面对现代系统都很重要，因此选择一种模式而不是另一种模式是不合理的。应用于流行产品的解决方案证实了这一点。标签。1 展示了最流行的区块链所使用的模型。

## 热门区块链设计对比

```
+----------+---------------+-----------+-----------------+
|          | Balance Model | Consensus | Smart Contracts |
+----------+---------------+-----------+-----------------+
| Bitcoin  | UTXO          | PoW       | -               |
| Ethereum | Account       | PoW/PoS   | +               |
| EOS      | Account       | DPoS      | +               |
| Tron     | UTXO+Account  | DPoS      | +               |
| Qtum     | UTXO+AAL      | PoS       | +               |
| ICON     | Account+?     | LFT (BFT) | +               |
+----------+---------------+-----------+-----------------+
```

标签。1.热门区块链设计对比

需要注意的是，几乎所有的新系统都有混合平衡模型，而以太坊和 EOS 使用的是纯账户模型。

## UTXO 和帐户模型的优缺点

**UTXO 型号**

*   新地址的私密性更高，硬币没有主人
*   通过分片更容易扩展
*   很难使用智能合同状态
*   允许使用多线程进行计算
*   资产流动完全透明

**账户模型**

*   需要存储所有账户状态
*   更高效的存储使用
*   直观清晰的方法
*   轻型客户端可以更容易地分析状态
*   高度的可替代性；更难追踪资产
*   为了防止状态机存储随机数，删除未使用的地址
*   在公共区块链中不方便跟踪内部交易
*   每个事务都必须有一个随机数

**UTXOs pros**

1.  **更高的隐私度**。如果用户为他们收到的每笔交易使用一个新地址，通常很难将帐户相互联系起来。这极大地影响了货币，而不是任意的 DApps，因为后者经常需要跟踪用户复杂的捆绑状态。因此，用户状态划分方案不像货币那样简单。
2.  **可行的可扩展性范例**。理论上，UTXOs 与某些类型的可伸缩性范例更兼容，因为可能只有一些硬币的所有者可以维护所有权的 Merkle 证明。这意味着，即使所有人(包括所有者)都决定丢弃这些数据，那么只有所有者自己受到伤害。在帐户范例中，丢失 Merkle 树中与帐户对应的部分将使得无法处理引用该帐户的消息，甚至包括传入的交易。然而，还有其他不依赖于 UTXO 的可伸缩性范例。

**账户范式利弊**

1.  **大型仓储经济**。例如，如果一个帐户有 5 个 UTXO，那么从 UTXO 模型切换到帐户模型会将空间需求从(20 + 32 + 8) * 5 = 300 字节(20 个用于地址，32 个用于 txid，8 个用于值)减少到 20 + 8 + 2 = 30 字节(20 个用于地址，8 个用于值，2 个用于 nonce(见下文))。实际上，存款远没有这么多，因为账户需要存储在 Patricia 树中(见下文)，但它们仍然非常可观。此外，交易可以更小(例如以太坊中的 100 个字节，而比特币中的 200–250 个字节)，因为每个交易只需要进行一次引用、签名并产生一个输出。
2.  **更强的替代性**。由于没有区块链级别的特定硬币来源的概念，建立一个红名单/黑名单方案并根据硬币的来源区分硬币在技术上和法律上都变得不太实际。
3.  **简约**。帐户模型更容易编码和理解，尤其是在使用更复杂的脚本的情况下。尽管可以通过以下两个概念将任意分散的应用程序硬塞进 UTXO 范式。首先是为脚本提供一种能力，限制一个给定的 UTXO 可以转移到哪种 UTXO。第二，还要求开销包括脚本评估的应用程序状态根更改的 Merkle 树证明。然而，与简单地使用帐户相比，这使得这种范式更加复杂和丑陋。
4.  **恒光客户端参考**。通过以特定方向遍历状态树，轻客户端可以在任何时候访问与帐户相关的所有数据。在 UTXO 范例中，引用随着每个事务而改变，这对于试图使用上述 state-root-in-UTXO 传播机制的长期运行的 DApps 来说是一个特别麻烦的问题。

**账户模式弊端**

account 范式的一个弱点是，为了防止重放攻击，每个交易都必须有一个“nonce”。该帐户跟踪所使用的随机数，并且只接受其随机数在所使用的最后一个随机数之后的交易。这意味着即使不再使用的帐户也不能从帐户状态中删除。这个问题的一个简单解决方案是要求事务包含一个块号，使它们在一段时间后不可重放，并定期重置 nonces。矿工或其他用户将需要“ping”未使用的账户，以便将它们从状态中移除，因为作为区块链协议本身的一部分，否则进行全面清理的成本太高。

# 结论

据观察，这两个模型大致相同。每一种都有其明显的利弊。社区意见再次证明了这一点，甚至显示出对这两种类型的偏好。然而，现在流行的趋势是使用混合范例。考虑将 UTXO 用于余额、将状态用于契约的混合模型是合理的。我们还建议从改进认证的动态字典中学习 AVL+树，在使用优化的证明模型方面应用于加密货币[[https://eprint.iacr.org/2016/994.pdf](https://eprint.iacr.org/2016/994.pdf)。

![](img/731acf26f5d44fdc58d99a6388fe935d.png)

HashEx 网站:【https://hashex.org 

通过 LinkedIn 与我联系【https://www.linkedin.com/in/dmitrymishunin/ 

![](img/731acf26f5d44fdc58d99a6388fe935d.png)