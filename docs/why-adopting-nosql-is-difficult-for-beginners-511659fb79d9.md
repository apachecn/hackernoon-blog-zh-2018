# 为什么初学者很难采用 NoSQL

> 原文：<https://medium.com/hackernoon/why-adopting-nosql-is-difficult-for-beginners-511659fb79d9>

随着技术的不断突破，传统的数据存储方式受到了挑战。随着行业巨头对 NoSQL 的采用和不断增加的 NoSQL 数据库选项，考虑将 NoSQL 作为主流软件开发的关系数据库的替代品正成为一种趋势。

然而，说到关系数据库，它已经存在了几十年。不难找到在编写 SQL 查询、设计实体关系、规范化模式和确保 ACID 属性方面有知识和经验的开发人员。这与 NoSQL 的情况不同，那里知识、专业技能和经验都很匮乏。

这可能导致错误的设计决策，在不适合的地方使用 NoSQL。采用 NoSQL 的另一个常见错误发生在来自关系数据库背景的开发人员按照关系数据库的基本原理设计 NoSQL 数据库时。

![](img/e64bafc6b682faece06fefeb55a58373.png)

尽管我在本文中更多地讨论了 NoSQL，但我确实相信关系数据库在它应该在的地方有它的优势。

> 因此，如果您现在正在使用关系数据库，或者打算将它用于一个新的软件项目，不要担心，坚持您的决定，它不会在可预见的未来消亡。此外，请记住，NoSQL 并不意味着“没有 SQL”，而是意味着“不只有 SQL”。

在这篇文章中，我将强调几点，这对初学者采用 NoSQL 很有用。

# 为什么 NoSQL 很难？

简而言之，使用 NoSQL 数据库并不难。困难在于以正确的方式把它用在正确的地方。首先，重要的是要理解 NoSQL 并不遵循与关系数据库相同的原则，如固定模式、规范化、对 SQL 等表达性查询的支持。

> 开发人员常犯的一个错误是试图规范化 NoSQL 数据库，他们搞砸了整个数据库设计，使得很难有效地检索项目。

根据 NoSQL 数据库的类型(文档数据库、键值数据库、图形数据库等), NoSQL 数据库与其他数据库有很大的不同。)和厂商具体实现( [MongoDB](https://www.mongodb.com/) 、 [DynamoDB](https://aws.amazon.com/dynamodb/) 、 [Cassandra](http://cassandra.apache.org/) &等)。).因此，对于设计数据库模式或查询来说，没有适合所有类型的 NoSQL 数据库的通用最佳实践或原则。这给设计符合各自 NoSQL 数据库类型的最佳实践带来了挑战。

> 例如，如果我们考虑一个文档数据库，我们需要考虑集合大小限制、它们是如何分区的、可用的查询类型和索引支持，以便能够有效地检索应用程序所需的项目(或嵌套属性)。这不是一项容易的任务，因为有几个地方可能会出错。

关系数据库的一些最佳实践(比如不把所有东西都存储在数据库中)仍然适用于 NoSQL。虽然可以存储图像、[转码视频](https://cloudinary.com/features/video_transcoding)等文件。在某些 NoSQL 数据库中，将它们存储在分布式文件系统中更有意义，然后使用数据库来存储文件元数据。

# 复制数据可能成为最佳实践

如果你是一个开发人员，有在数据库层面对数据重复说不的想法，那么是时候重新考虑一下 NoSQL 了。

对于某些类型的 NoSQL 数据库，跨不同的表或集合复制数据属性甚至可能成为避免复杂查询的最佳实践。

> 例如，今天的存储并不昂贵，相比之下，处理能力更昂贵。因此，以不同的形式存储数据，利用更多的存储空间进行直接检索，可能比执行计算量大的查询更有意义。

所以你可能想知道，为什么所有这些昂贵的关系数据库查询，而不是存储数据和它的关系，在 NoSQL 复制，我们可以执行直接查找和检索？答案是没有那么简单，因为当数据分散在许多表或集合中时，在 NoSQL 中创建或更新数据会变得更加复杂。

> 因此，评估应用程序如何使用和更新数据并相应地设计数据库是很重要的。

# 对于每个 NoSQL 数据库，查询 NoSQL 是唯一的

这是另一个让 NoSQL 感到困惑的领域。每个 NoSQL 数据库都有自己的查询语言。这对于习惯于使用关系数据库的开发人员来说确实是一个挑战，因为 SQL 可以适用于许多关系数据库实现，只是略有不同。对于 NoSQL，您必须参考文档来了解支持的特定数据类型、查询和功能限制。

对于某些类型的 NoSQL 数据库(例如；某些文档数据库和键-值数据库)，当看到只能使用键属性或使用预定义的索引进行查询时，不要感到惊讶，因为在关系数据库中，几乎可以从任何属性进行查询。

NoSQL 数据库需要考虑的另一个要点是它们支持的一致性模型。尽管这些数据库中的一些支持强一致性，但其他数据库可能会受到最终一致性的限制。一致性支持也可能因查询类型而异，无论是读、写还是更新。

# 交易不以同样的方式处理

对于大多数 NoSQL 数据库，很难创建类似于关系数据库的事务，在关系数据库中，数据库为提交和回滚提供更高级别的支持。因此，确定 NoSQL 数据库对实施交易的支持程度也很重要。

> 对于大多数 NoSQL 数据库，您需要在应用程序级别处理事务和回滚。然而，许多这些 NoSQL 数据库提供了一些基本功能，这将使您的生活更容易。

例如，某些 NoSQL 数据库支持条件写入和原子更新等特性，这些特性可用于高效地实现事务。

> *例如，您可以创建一个更新操作，说明如果金额仅为“x”金额，则进行项目更新(或者如果项目发生变化，则抛出一个异常，需要在应用程序中进行相应的处理)。这样做的好处是，当事务发生时，集合或表不会被锁定，这对数据库性能有积极的影响。*

# 同时使用 NoSQL 和关系

根据我的经验，许多 web 和移动应用程序特性需要不同的查询功能，从关系数据库开始是明智的。

如果您的应用程序需要对高吞吐量、可用性和存储伸缩性的特殊支持，除了关系数据库之外，您还可以考虑在相关领域使用 NoSQL 数据库。

> 在过去几年中，微服务的采用也使得根据所需的应用程序功能使用多种数据库类型变得合乎逻辑。

> 例如，您可以考虑使用内存中的键值 NoSQL 数据库(如 Redis)来存储会话，使用关系数据库来存储业务实体等。

因此，长话短说，使用不同的数据库类型来构建应用程序，而不是坚持用一个数据库来构建所有应用程序，已经成为一种常见的做法。

# 结论

NoSQL 和关系数据库之间有许多不同之处。尽管我们已经讨论了使用 NoSQL 的一些挑战，但是在一些用例中使用 NoSQL 有很多好处。

例如，很少有好处包括处理大量存储数据的能力、可伸缩性、灵活的数据收集等。

因此，在使用 NoSQL 之前，进行充分的背景研究、获取专业知识并保持开放的心态是非常重要的，因为无论您的经验有多丰富，您已经学习的一些数据库实践都需要学习。