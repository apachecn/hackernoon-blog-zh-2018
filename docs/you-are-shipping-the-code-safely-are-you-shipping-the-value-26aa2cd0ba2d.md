# 您正在安全地运送代码。你在运输价值吗？

> 原文：<https://medium.com/hackernoon/you-are-shipping-the-code-safely-are-you-shipping-the-value-26aa2cd0ba2d>

![](img/7bd45950a95ca9c4d05d54021886f56b.png)

Even though steps are quite wide, the only distance travelled that matters is the vertical one.

# 运输代码。安全地。

加入 Intercom 教会了我如何快速而安全地发布变更。在那里工作而不学习这些东西几乎是不可能的。有些东西是基础设施层面内置的，通过设计来保护我。

当大多数新员工发现合并到 master branch 实际上启动了新的部署时，他们会非常兴奋。挺顺利的。没有人监督，我们一直在运输(每天超过 200 次)，对生产没有任何负面影响，如果出现严重问题，部署会自动恢复。

这种安装改变了你对构建软件的看法。你进入了将雄心勃勃的变革作为一系列安全的小步骤的模式。有些更改非常简单(简单的代码更改)，有些比较复杂(添加一个可为空的列)，还有一些有点棘手+需要特意拆分并单独处理。

向系统中引入新功能，同时确保在出现问题时可以将其关闭？没问题，机制已经到位——我只是添加了一个特性标志作为 [killswitch](https://hackernoon.com/tagged/killswitch) ，为两个代码分支编写了测试，我准备好再次安全运行了。

过了一段时间，我不得不重构整个系统。一点一点地改变，将较大的改变分割成较小的改变以降低改变的风险，做一系列外科手术式的安全动作。但这款应用并没有下架。

# 中断生产以更快地实现价值。

所有这些技术都有助于我们始终以较小的增量发货，而不必担心中断生产。它们在文化中如此根深蒂固，以至于成为人们滚动的唯一方式。

我发现自己犯的错误是将安全发布代码和发布商业价值混为一谈。我在做这些外科手术时找到了极大的安慰，但我最近开始问自己这样做的代价是什么。

值得吗？我可以用一些安全来换取速度吗？安全对我现在正在做的事情重要吗？这些抽象的问题帮助我发现了我一直在无意识地做的权衡:

*   将一份公关文件分成 10 份小文件需要我和我的同事花时间来审阅。如果出现问题，推出和恢复可能会更便宜(即使恢复可能会带来坏名声)
*   添加一个特性标志来关闭一个没人使用的特性需要不必要的代码和测试。很可能是过早的优化。
*   安排 5 分钟的部分停机比执行一系列小的、安全的模式更改要便宜。
*   见鬼，我甚至会挑战编写一些测试(还好鲍勃叔叔没有读这篇文章，他会声明我不是专业人员)

正如工程中的所有事情一样，事情并不是非黑即白的。在这里，我们如何衡量成本和收益的定义往往非常松散，但事实是，企业往往通过执行取胜。作为工程师，我们(通常)是其中的一大部分，我们获得的每一个速度差异都有助于公司赢得竞争。

了解我们能够打破事物的程度是困难的。它需要一些商业背景。这肯定比坐在代码编辑器里更难，但它会让你成为一名更好的工程师。这是一门在速度和安全之间寻找平衡的艺术。首先你会烧伤自己，变得更有防御性。最终，你会再次变得更加好斗，直到你找到平衡。